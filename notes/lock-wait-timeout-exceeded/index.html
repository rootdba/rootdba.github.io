<!DOCTYPE html>
<html lang="zh-cn" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="牧云" />
	
	
	
	<title>MySql锁等待Lock wait timeout exceeded锁表处理 ｜ 牧人池塘</title>
	
    
    
    <meta name="description" content="现象 A.数据更新或新增后数据经常自动回滚。 B.表操作总报 Lock wait timeout exceeded 并长时间无反应 解决方法 A.应急方法：show full processlist; kill掉出现问题的进程 B.根治方法：select * from innodb_trx;查看有是哪些" />
    

    
    
    <meta name="keywords" content="牧人池塘, DBA, 运维, 开发, 独立博客, iops.top" />
    

	
    
    <link rel="shortcut icon" href="/favicon.ico" />

    <link rel="stylesheet" type="text/css" media="screen" href="https://cdn.bootcdn.net/ajax/libs/normalize/8.0.1/normalize.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://cdn.bootcdn.net/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="/css/zozo.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://cdn.bootcdn.net/ajax/libs/remixicon/3.1.1/remixicon.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="/css/highlight.css" />

    
    
</head>

<body>
    <div class="main animate__animated animate__fadeInDown">
        <div class="nav_container animated fadeInDown">
    <div class="site_nav" id="site_nav">
        <ul>
            
            <li>
                <a href="/">首页</a>
            </li>
            
            <li>
                <a href="/notes/">技术</a>
            </li>
            
            <li>
                <a href="/life/">生活</a>
            </li>
            
            <li>
                <a href="/categories/">分类</a>
            </li>
            
            <li>
                <a href="/tags/">标签</a>
            </li>
            
            <li>
                <a href="/archives/">归档</a>
            </li>
            
            <li>
                <a href="/doc/">文档</a>
            </li>
            
            <li>
                <a href="/firendlink/">友链</a>
            </li>
            
            <li>
                <a href="/about/">关于</a>
            </li>
            
        </ul>
    </div>
    <div class="menu_icon">
        <a id="menu_icon"><i class="ri-menu-line"></i></a>
    </div>
</div>
        <div class="header animated fadeInDown">
    <div class="site_title_container">
        <div class="site_title">
            <h1>
                <a href="/">
                    <span>牧人池塘</span>
                </a>
            </h1>
        </div>
        <div class="description">
            <p class="sub_title">时光匆匆，记录是对思维的沉淀.</p>
            <div class="my_socials">
                
                
                <a href="https://github.com/rootdba" title="github" target="_blank"><i class="ri-github-fill"></i></a>
                
                
                
                <a href="https://twitter.com/imlaoma" title="twitter" target="_blank"><i class="ri-twitter-fill"></i></a>
                
                
                <a href="/index.xml" type="application/rss+xml" title="rss" target="_blank"><i
                        class="ri-rss-fill"></i></a>
            </div>
        </div>
    </div>
</div>
        <div class="content">
            <div class="post_page">
                <div class="post animate__animated animate__fadeInDown">
                    <div class="post_title post_detail_title">
                        <h2><a href='/notes/lock-wait-timeout-exceeded/' title='MySql锁等待Lock wait timeout exceeded锁表处理 '>MySql锁等待Lock wait timeout exceeded锁表处理</a>
									
					    						
						<a href="/categories/mysql" title="分类：MySQL"> - MySQL</a>	</h2>					
					    
						
                        <span class="date">日期：2017.01.17</span>
						

						
                    </div>
                    <div class="post_content markdown"><p>现象</p>
<p>A.数据更新或新增后数据经常自动回滚。</p>
<p>B.表操作总报 Lock wait timeout exceeded 并长时间无反应</p>
<p>解决方法</p>
<p>A.应急方法：show full processlist; kill掉出现问题的进程</p>
<p>B.根治方法：select * from innodb_trx;查看有是哪些事务占据了表资源。</p>
<p>建议方法：设置MySQL锁等待超时</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SET</span><span class="w"> </span><span class="k">GLOBAL</span><span class="w"> </span><span class="n">innodb_lock_wait_timeout</span><span class="o">=</span><span class="mi">50</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SET</span><span class="w"> </span><span class="n">innodb_lock_wait_timeout</span><span class="o">=</span><span class="mi">50</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>查看锁等待时间：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SHOW</span><span class="w"> </span><span class="n">VARIABLES</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="s1">&#39;%innodb_lock_wait%&#39;</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>查看当前autocommit模式：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">show</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;autocommit&#39;</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>Value的值是ON，表示autocommit开启
值0和OFF都是一样的，当然，1也就表示ON。通过以上设置autocommit=0，则用户将一直处于某个事务中，直到执行一条commit提交或rollback语句才会结束当前事务重新开始一个新的事务。</p>
<p>该类问题导致原因</p>
<p>据我分析,Mysql的 InnoDB存储引擎是支持事务的，事务开启后没有被主动Commit。导致该资源被长期占用，其他事务在抢占该资源时，因上一个事务的锁而导致抢占失败！因此出现 Lock wait timeout exceeded</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">innodb_trx</span><span class="w"> </span><span class="o">##</span><span class="w"> </span><span class="err">当前运行的所有事务</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">innodb_locks</span><span class="w"> </span><span class="o">##</span><span class="w"> </span><span class="err">当前出现的锁</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">innodb_lock_waits</span><span class="w"> </span><span class="o">##</span><span class="w"> </span><span class="err">锁等待的对应关系</span><span class="w">
</span></span></span></code></pre></div><p>下面对 innodb_trx 表的每个字段进行解释：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">trx_id</span><span class="err">：事务</span><span class="n">ID</span><span class="err">。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">trx_state</span><span class="err">：事务状态，有以下几种状态：</span><span class="n">RUNNING</span><span class="err">、</span><span class="k">LOCK</span><span class="w"> </span><span class="n">WAIT</span><span class="err">、</span><span class="n">ROLLING</span><span class="w"> </span><span class="n">BACK</span><span class="w"> </span><span class="err">和</span><span class="w"> </span><span class="n">COMMITTING</span><span class="err">。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">trx_started</span><span class="err">：事务开始时间。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">trx_requested_lock_id</span><span class="err">：事务当前正在等待锁的标识，可以和</span><span class="w"> </span><span class="n">INNODB_LOCKS</span><span class="w"> </span><span class="err">表</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="err">以得到更多详细信息。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">trx_wait_started</span><span class="err">：事务开始等待的时间。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">trx_weight</span><span class="err">：事务的权重。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">trx_mysql_thread_id</span><span class="err">：事务线程</span><span class="w"> </span><span class="n">ID</span><span class="err">，可以和</span><span class="w"> </span><span class="n">PROCESSLIST</span><span class="w"> </span><span class="err">表</span><span class="w"> </span><span class="k">JOIN</span><span class="err">。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">trx_query</span><span class="err">：事务正在执行的</span><span class="w"> </span><span class="k">SQL</span><span class="w"> </span><span class="err">语句。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">trx_operation_state</span><span class="err">：事务当前操作状态。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">trx_tables_in_use</span><span class="err">：当前事务执行的</span><span class="w"> </span><span class="k">SQL</span><span class="w"> </span><span class="err">中使用的表的个数。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">trx_tables_locked</span><span class="err">：当前执行</span><span class="w"> </span><span class="k">SQL</span><span class="w"> </span><span class="err">的行锁数量。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">trx_lock_structs</span><span class="err">：事务保留的锁数量。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">trx_lock_memory_bytes</span><span class="err">：事务锁住的内存大小，单位为</span><span class="w"> </span><span class="n">BYTES</span><span class="err">。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">trx_rows_locked</span><span class="err">：事务锁住的记录数。包含标记为</span><span class="w"> </span><span class="n">DELETED</span><span class="err">，并且已经保存到磁盘但对事务不可见的行。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">trx_rows_modified</span><span class="err">：事务更改的行数。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">trx_concurrency_tickets</span><span class="err">：事务并发票数。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">trx_isolation_level</span><span class="err">：当前事务的隔离级别。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">trx_unique_checks</span><span class="err">：是否打开唯一性检查的标识。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">trx_foreign_key_checks</span><span class="err">：是否打开外键检查的标识。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">trx_last_foreign_key_error</span><span class="err">：最后一次的外键错误信息。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">trx_adaptive_hash_latched</span><span class="err">：自适应散列索引是否被当前事务锁住的标识。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">trx_adaptive_hash_timeout</span><span class="err">：是否立刻放弃为自适应散列索引搜索</span><span class="w"> </span><span class="n">LATCH</span><span class="w"> </span><span class="err">的标识。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">查看</span><span class="w"> </span><span class="n">innodb_locks</span><span class="w"> </span><span class="err">表结构</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">DESC</span><span class="w"> </span><span class="n">innodb_locks</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>下面对 innodb_locks 表的每个字段进行解释：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">lock_id：锁 ID。
</span></span><span class="line"><span class="cl">lock_trx_id：拥有锁的事务 ID。可以和 INNODB_TRX 表 JOIN 得到事务的详细信息。
</span></span><span class="line"><span class="cl">lock_mode：锁的模式。有如下锁类型：行级锁包括：S、X、IS、IX，分别代表：共享锁、排它锁、意向共享锁、意向排它锁。表级锁包括：S_GAP、X_GAP、IS_GAP、IX_GAP 和 AUTO_INC，分别代表共享间隙锁、排它间隙锁、意向共享间隙锁、意向排它间隙锁和自动递增锁。
</span></span><span class="line"><span class="cl">lock_type：锁的类型。RECORD 代表行级锁，TABLE 代表表级锁。
</span></span><span class="line"><span class="cl">lock_table：被锁定的或者包含锁定记录的表的名称。
</span></span><span class="line"><span class="cl">lock_index：当 LOCK_TYPE=’RECORD’ 时，表示索引的名称；否则为 NULL。
</span></span><span class="line"><span class="cl">lock_space：当 LOCK_TYPE=’RECORD’ 时，表示锁定行的表空间 ID；否则为 NULL。
</span></span><span class="line"><span class="cl">lock_page：当 LOCK_TYPE=’RECORD’ 时，表示锁定行的页号；否则为 NULL。
</span></span><span class="line"><span class="cl">lock_rec：当 LOCK_TYPE=’RECORD’ 时，表示一堆页面中锁定行的数量，亦即被锁定的记录号；否则为 NULL。
</span></span><span class="line"><span class="cl">lock_data：当 LOCK_TYPE=’RECORD’ 时，表示锁定行的主键；否则为NULL。
</span></span></code></pre></div><p>查看 innodb_lock_waits 表结构。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">DESC</span><span class="w"> </span><span class="n">innodb_lock_waits</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>下面对 innodb_lock_waits 表的每个字段进行解释：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">requesting_trx_id</span><span class="err">：请求事务的</span><span class="w"> </span><span class="n">ID</span><span class="err">。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">requested_lock_id</span><span class="err">：事务所等待的锁定的</span><span class="w"> </span><span class="n">ID</span><span class="err">。可以和</span><span class="w"> </span><span class="n">INNODB_LOCKS</span><span class="w"> </span><span class="err">表</span><span class="w"> </span><span class="k">JOIN</span><span class="err">。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">blocking_trx_id</span><span class="err">：阻塞事务的</span><span class="w"> </span><span class="n">ID</span><span class="err">。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">blocking_lock_id</span><span class="err">：某一事务的锁的</span><span class="w"> </span><span class="n">ID</span><span class="err">，该事务阻塞了另一事务的运行。可以和</span><span class="w"> </span><span class="n">INNODB_LOCKS</span><span class="w"> </span><span class="err">表</span><span class="w"> </span><span class="k">JOIN</span><span class="err">。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">查询锁等待</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">直接查看</span><span class="w"> </span><span class="n">innodb_lock_waits</span><span class="w"> </span><span class="err">表</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">innodb_lock_waits</span><span class="w"> </span><span class="err">\</span><span class="k">G</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">当前运行的所有事务</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">information_schema</span><span class="p">.</span><span class="n">INNODB_TRX</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">当前出现的锁</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">information_schema</span><span class="p">.</span><span class="n">INNODB_LOCKS</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">锁等待的对应关系</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">information_schema</span><span class="p">.</span><span class="n">INNODB_LOCK_WAITS</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">innodb_locks</span><span class="w"> </span><span class="err">表和</span><span class="w"> </span><span class="n">innodb_lock_waits</span><span class="w"> </span><span class="err">表结合：</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">innodb_locks</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">lock_trx_id</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="n">blocking_trx_id</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">innodb_lock_waits</span><span class="p">)</span><span class="w"> </span><span class="err">\</span><span class="k">G</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">innodb_locks</span><span class="w"> </span><span class="err">表</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">innodb_lock_waits</span><span class="w"> </span><span class="err">表</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">innodb_locks</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">innodb_locks</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">innodb_lock_waits</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="p">(</span><span class="n">innodb_locks</span><span class="p">.</span><span class="n">lock_trx_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">innodb_lock_waits</span><span class="p">.</span><span class="n">blocking_trx_id</span><span class="p">)</span><span class="w"> </span><span class="err">\</span><span class="k">G</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">查询</span><span class="w"> </span><span class="n">innodb_trx</span><span class="w"> </span><span class="err">表</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">trx_id</span><span class="p">,</span><span class="w"> </span><span class="n">trx_requested_lock_id</span><span class="p">,</span><span class="w"> </span><span class="n">trx_mysql_thread_id</span><span class="p">,</span><span class="w"> </span><span class="n">trx_query</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">innodb_trx</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">trx_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;LOCK WAIT&#39;</span><span class="w"> </span><span class="err">\</span><span class="k">G</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">trx_mysql_thread_id</span><span class="w"> </span><span class="err">即</span><span class="n">kill</span><span class="err">掉事务线程</span><span class="w"> </span><span class="n">ID</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SHOW</span><span class="w"> </span><span class="n">ENGINE</span><span class="w"> </span><span class="n">INNODB</span><span class="w"> </span><span class="n">STATUS</span><span class="w"> </span><span class="err">\</span><span class="k">G</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SHOW</span><span class="w"> </span><span class="n">PROCESSLIST</span><span class="w"> </span><span class="err">\</span><span class="k">G</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">从上述方法中得到了相关信息，我们可以得到发生锁等待的线程</span><span class="w"> </span><span class="n">ID</span><span class="err">，然后将其</span><span class="w"> </span><span class="n">KILL</span><span class="w"> </span><span class="err">掉。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">KILL</span><span class="w"> </span><span class="err">掉发生锁等待的线程。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">kill</span><span class="w"> </span><span class="n">ID</span><span class="p">;</span><span class="w"> 
</span></span></span></code></pre></div><p>即可</p>
<p>参考：https://dbarobin.com/2015/01/27/innodb-lock-wait-under-mysql-5.5/</p>
</div>
                    <div class="post_footer">
                        
                        <div class="meta">
                            <div class="info">
                                <span class="field tags">
                                    <i class="ri-stack-line"></i>Tag标签：
                                    
                                    <a href="/tags/mysql/" title="MySQL">MySQL</a>
                                    
                                    <a href="/tags/%E5%9B%9E%E6%BB%9A/" title="回滚">回滚</a>
                                    
                                    <a href="/tags/%E9%94%81/" title="锁">锁</a>
                                    
                                    <a href="/tags/%E9%94%81%E8%A1%A8/" title="锁表">锁表</a>
                                    
                                    <a href="/tags/lock/" title="Lock">Lock</a>
                                    
                                </span>
                            </div>
                        </div>
                        
                    </div>
                </div>
                
                
                
<div>    
    <div class="pagination__title">
        <span class="pagination__title-h" style="font-size: 16px;">发表评论</span>
        <br/>
    </div>
    <div id="tcomment"></div>
    <script src="https://utteranc.es/client.js"
            repo="rootdba/rootdba.github.io" 
            issue-term="url"
            theme="preferred-color-scheme"
            crossorigin="anonymous"
            async>
    </script>
</div>




                
            </div>
        </div>
    </div>
    <a id="back_to_top" href="#" class="back_to_top"><i class="ri-arrow-up-s-line"></i></a>
    <footer class="footer">
    <div class="powered_by">

        
        <a href="/">&copy; 2015-2023 牧人池塘</a> <a href="https://gohugo.io/" target="_blank">Hugo驱动</a> <a href="https://github.com/varkai/hugo-theme-zozo" target="_blank">Theme: Zozo</a> <a href='/index.xml' target="_blank" title='Rss订阅'>Rss订阅</a> 

    </div>

    <div class="footer_slogan">
        <span>勿在浮沙筑高台，不为繁华易匠心.</span><br>
    </div>
</footer>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<link href="https://cdn.bootcdn.net/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" rel="stylesheet">
<script src="https://cdn.bootcdn.net/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>
<script src="/js/zozo.js"></script>


<script type="text/javascript" async
    src="https://cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\[\[', '\]\]']],
                processEscapes: true,
                processEnvironments: true,
                skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
                TeX: {
                    equationNumbers: { autoNumber: "AMS" },
                    extensions: ["AMSmath.js", "AMSsymbols.js"]
                }
            }
        });

        MathJax.Hub.Queue(function () {
            
            
            
            var all = MathJax.Hub.getAllJax(), i;
            for (i = 0; i < all.length; i += 1) {
                all[i].SourceElement().parentNode.className += ' has-jax';
            }
        });
    </script>

<style>
    code.has-jax {
        font: inherit;
        font-size: 100%;
        background: inherit;
        border: inherit;
        color: #515151;
    }
</style>



</body>

</html>