<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Chapter 22 MySQL NDB Cluster 8.0</title>
<link rel="stylesheet" href="mvl.css" type="text/css" />
<meta name="generator" content="DocBook XSL Stylesheets + chunker.py v1.9.2" />
<link rel="start" href="index.html" title="{book-title}" />
<link rel="up" href="" title="" />
<link rel="prev" href="mysql-innodb-cluster-userguide.html" title="Chapter 21 InnoDB Cluster" />
<link rel="next" href="partitioning.html" title="Chapter 23 Partitioning" />
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr>
<th colspan="3" align="center">Chapter 22 MySQL NDB Cluster 8.0</th>
</tr>
<tr>
<td width="20%" align="left"><a accesskey="p" href="mysql-innodb-cluster-userguide.html">Prev</a> </td>
<th width="60%" align="center"></th>
<td width="20%" align="right"> <a accesskey="n" href="partitioning.html">Next</a></td>
</tr>
</table>
<hr>
</div>
<div class="chapter">
<div class="titlepage">
<div>
<div>
<h1 class="title"><a name="mysql-cluster"></a>Chapter 22 MySQL NDB Cluster 8.0</h1>

</div>

</div>

</div>
<div class="toc">
<p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-overview">22.1 NDB Cluster Overview</a></span></dt><dd><dl><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-basics">22.1.1 NDB Cluster Core Concepts</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-nodes-groups">22.1.2 NDB Cluster Nodes, Node Groups, Replicas, and Partitions</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-overview-requirements">22.1.3 NDB Cluster Hardware, Software, and Networking Requirements</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-what-is-new">22.1.4 What is New in NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-added-deprecated-removed">22.1.5 Options, Variables, and Parameters Added, Deprecated or Removed in NDB
      8.0</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-compared">22.1.6 MySQL Server Using InnoDB Compared with NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations">22.1.7 Known Limitations of NDB Cluster</a></span></dt></dl></dd><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-installation">22.2 NDB Cluster Installation</a></span></dt><dd><dl><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-installer">22.2.1 The NDB Cluster Auto-Installer</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-linux">22.2.2 Installation of NDB Cluster on Linux</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-windows">22.2.3 Installing NDB Cluster on Windows</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-configuration">22.2.4 Initial Configuration of NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-first-start">22.2.5 Initial Startup of NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-example-data">22.2.6 NDB Cluster Example with Tables and Data</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-shutdown-restart">22.2.7 Safe Shutdown and Restart of NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-upgrade-downgrade">22.2.8 Upgrading and Downgrading NDB Cluster</a></span></dt></dl></dd><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-configuration">22.3 Configuration of NDB Cluster</a></span></dt><dd><dl><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-quick">22.3.1 Quick Test Setup of NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-configuration-overview">22.3.2 Overview of NDB Cluster Configuration Parameters, Options, and Variables</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-config-file">22.3.3 NDB Cluster Configuration Files</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-interconnects">22.3.4 Using High-Speed Interconnects with NDB Cluster</a></span></dt></dl></dd><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs">22.4 NDB Cluster Programs</a></span></dt><dd><dl><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndbd">22.4.1 <span class="command"><strong>ndbd</strong></span> — The NDB Cluster Data Node Daemon</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndbinfo-select-all">22.4.2 <span class="command"><strong>ndbinfo_select_all</strong></span> — Select From ndbinfo Tables</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndbmtd">22.4.3 <span class="command"><strong>ndbmtd</strong></span> — The NDB Cluster Data Node Daemon (Multi-Threaded)</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd">22.4.4 <span class="command"><strong>ndb_mgmd</strong></span> — The NDB Cluster Management Server Daemon</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm">22.4.5 <span class="command"><strong>ndb_mgm</strong></span> — The NDB Cluster Management Client</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-blob-tool">22.4.6 <span class="command"><strong>ndb_blob_tool</strong></span> — Check and Repair BLOB and TEXT columns of NDB Cluster
        Tables</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-config">22.4.7 <span class="command"><strong>ndb_config</strong></span> — Extract NDB Cluster Configuration Information</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-delete-all">22.4.8 <span class="command"><strong>ndb_delete_all</strong></span> — Delete All Rows from an NDB Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-desc">22.4.9 <span class="command"><strong>ndb_desc</strong></span> — Describe NDB Tables</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-drop-index">22.4.10 <span class="command"><strong>ndb_drop_index</strong></span> — Drop Index from an NDB Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-drop-table">22.4.11 <span class="command"><strong>ndb_drop_table</strong></span> — Drop an NDB Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-error-reporter">22.4.12 <span class="command"><strong>ndb_error_reporter</strong></span> — NDB Error-Reporting Utility</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-import">22.4.13 <span class="command"><strong>ndb_import</strong></span> — Import CSV Data Into NDB</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-index-stat">22.4.14 <span class="command"><strong>ndb_index_stat</strong></span> — NDB Index Statistics Utility</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-move-data">22.4.15 <span class="command"><strong>ndb_move_data</strong></span> — NDB Data Copy Utility</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-perror">22.4.16 <span class="command"><strong>ndb_perror</strong></span> — Obtain NDB Error Message Information</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-print-backup-file">22.4.17 <span class="command"><strong>ndb_print_backup_file</strong></span> — Print NDB Backup File Contents</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-print-file">22.4.18 <span class="command"><strong>ndb_print_file</strong></span> — Print NDB Disk Data File Contents</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-print-frag-file">22.4.19 <span class="command"><strong>ndb_print_frag_file</strong></span> — Print NDB Fragment List File Contents</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-print-schema-file">22.4.20 <span class="command"><strong>ndb_print_schema_file</strong></span> — Print NDB Schema File Contents</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-print-sys-file">22.4.21 <span class="command"><strong>ndb_print_sys_file</strong></span> — Print NDB System File Contents</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-redo-log-reader">22.4.22 <span class="command"><strong>ndb_redo_log_reader</strong></span> — Check and Print Content of Cluster Redo Log</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-restore">22.4.23 <span class="command"><strong>ndb_restore</strong></span> — Restore an NDB Cluster Backup</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-select-all">22.4.24 <span class="command"><strong>ndb_select_all</strong></span> — Print Rows from an NDB Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-select-count">22.4.25 <span class="command"><strong>ndb_select_count</strong></span> — Print Row Counts for NDB Tables</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py">22.4.26 <span class="command"><strong>ndb_setup.py</strong></span> — Start browser-based Auto-Installer for
NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-show-tables">22.4.27 <span class="command"><strong>ndb_show_tables</strong></span> — Display List of NDB Tables</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-size-pl">22.4.28 <span class="command"><strong>ndb_size.pl</strong></span> — NDBCLUSTER Size Requirement Estimator</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-top">22.4.29 <span class="command"><strong>ndb_top</strong></span> — View CPU usage information for NDB threads</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-waiter">22.4.30 <span class="command"><strong>ndb_waiter</strong></span> — Wait for NDB Cluster to Reach a Given Status</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-program-options-common">22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs</a></span></dt></dl></dd><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-management">22.5 Management of NDB Cluster</a></span></dt><dd><dl><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-start-phases">22.5.1 Summary of NDB Cluster Start Phases</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-mgm-client-commands">22.5.2 Commands in the NDB Cluster Management Client</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-backup">22.5.3 Online Backup of NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-mysqld">22.5.4 MySQL Server Usage for NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-rolling-restart">22.5.5 Performing a Rolling Restart of an NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-event-reports">22.5.6 Event Reports Generated in NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-logs-ndb-messages">22.5.7 NDB Cluster Log Messages</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-single-user-mode">22.5.8 NDB Cluster Single User Mode</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-sql-statements">22.5.9 Quick Reference: NDB Cluster SQL Statements</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo">22.5.10 ndbinfo: The NDB Cluster Information Database</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-i_s-tables">22.5.11 INFORMATION_SCHEMA Tables for NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-security">22.5.12 NDB Cluster Security Issues</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-disk-data">22.5.13 NDB Cluster Disk Data Tables</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-online-operations">22.5.14 Online Operations with ALTER TABLE in NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-online-add-node">22.5.15 Adding NDB Cluster Data Nodes Online</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-privilege-distribution">22.5.16 Distributed MySQL Privileges (Not Supported)</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndb-api-statistics">22.5.17 NDB API Statistics Counters and Variables</a></span></dt></dl></dd><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication">22.6 NDB Cluster Replication</a></span></dt><dd><dl><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-abbreviations">22.6.1 NDB Cluster Replication: Abbreviations and Symbols</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-general">22.6.2 General Requirements for NDB Cluster Replication</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-issues">22.6.3 Known Issues in NDB Cluster Replication</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-schema">22.6.4 NDB Cluster Replication Schema and Tables</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-preparation">22.6.5 Preparing the NDB Cluster for Replication</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-starting">22.6.6 Starting NDB Cluster Replication (Single Replication Channel)</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-two-channels">22.6.7 Using Two Replication Channels for NDB Cluster Replication</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-failover">22.6.8 Implementing Failover with NDB Cluster Replication</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-backups">22.6.9 NDB Cluster Backups With NDB Cluster Replication</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-multi-master">22.6.10 NDB Cluster Replication: Multi-Master and Circular Replication</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution">22.6.11 NDB Cluster Replication Conflict Resolution</a></span></dt></dl></dd><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-news">22.7 NDB Cluster Release Notes</a></span></dt></dl>
</div>
<a class="indexterm" name="idm140091608848032"></a><a class="indexterm" name="idm140091608846960"></a><a class="indexterm" name="idm140091608845472"></a><a class="indexterm" name="idm140091608843968"></a><p>
    MySQL <span class="firstterm">NDB Cluster</span> is a
    high-availability, high-redundancy version of MySQL adapted for the
    distributed computing environment. Recent NDB Cluster release series
    use version 8 of the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine
    (also known as <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a>) to enable
    running several computers with MySQL servers and other software in a
    cluster. NDB Cluster 8.0, now available as a Developer Milestone
    Release (DMR) beginning with version 8.0.13, incorporates version
    8.0 of the <code class="literal">NDB</code> storage engine. NDB Cluster 7.6,
    is the current GA release, and uses version 7.6 of
    <code class="literal">NDB</code>. Previous GA releases still available for use
    in production, NDB Cluster 7.5 and NDB Cluster 7.4, incorporate
    <code class="literal">NDB</code> versions 7.5 and 7.4, respectively. NDB
    Cluster 7.2, which uses version 7.2 of the <code class="literal">NDB</code>
    storage engine, is a previous GA release that is currently still
    maintained; 7.2 users are encouraged to upgrade to NDB 7.5 or NDB
    7.6. <span class="emphasis"><em>NDB 7.1 and previous release series are no longer
    supported or maintained</em></span>.
  </p><p>
    Support for the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine is
    not included in standard MySQL Server 8.0 binaries built by Oracle.
    Instead, users of NDB Cluster binaries from Oracle should upgrade to
    the most recent binary release of NDB Cluster for supported
    platforms—these include RPMs that should work with most Linux
    distributions. NDB Cluster 8.0 users who build from source should
    use the sources provided for MySQL 8.0 and build with the options
    required to provide NDB support. (Locations where the sources can be
    obtained are listed later in this section.)
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
      MySQL NDB Cluster does not support InnoDB cluster, which must be
      deployed using MySQL Server 8.0 with the
      <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> storage engine as well as
      additional applications that are not included in the NDB Cluster
      distribution. MySQL Server 8.0 binaries cannot be used with MySQL
      NDB Cluster. For more information about deploying and using
      InnoDB cluster, see
      <a class="xref" href="mysql-innodb-cluster-userguide.html" title="Chapter 21 InnoDB Cluster">Chapter 21, <i>InnoDB Cluster</i></a>.
      <a class="xref" href="mysql-cluster.html#mysql-cluster-compared" title="22.1.6 MySQL Server Using InnoDB Compared with NDB Cluster">Section 22.1.6, “MySQL Server Using InnoDB Compared with NDB Cluster”</a>, discusses differences
      between the <code class="literal">NDB</code> and <code class="literal">InnoDB</code>
      storage engines.
</p>
</div>
<p>
    This chapter contains information about NDB Cluster 8.0 releases
    through 8.0.17-ndb-8.0.17, currently available as a
    Developer Preview. NDB Cluster 7.6 is the latest General
    Availability release, and is recommended for new deployments; for
    information about NDB Cluster 7.6, see
    <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-what-is-new-7-6.html" target="_top">What is New in NDB Cluster 7.6</a>. For
    similar information about NDB Cluster 7.5, see
    <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-what-is-new-7-5.html" target="_top">What is New in NDB Cluster 7.5</a>. NDB
    Cluster 7.4 and 7.3 are previous GA releases still supported in
    production; see <a class="ulink" href="https://dev.mysql.com/doc/refman/5.6/en/mysql-cluster.html" target="_top">MySQL NDB Cluster 7.3 and NDB Cluster 7.4</a>. NDB
    Cluster 7.2 is a previous GA release series which is still
    maintained, although we recommend that new deployments for
    production use NDB Cluster 7.6. For more information about NDB
    Cluster 7.2, see <a class="ulink" href="https://dev.mysql.com/doc/refman/5.5/en/mysql-cluster.html" target="_top">MySQL NDB Cluster 7.2</a>.
  </p><a class="indexterm" name="idm140091608822736"></a><p><b>Supported Platforms. </b>
      NDB Cluster is currently available and supported on a number of
      platforms. For exact levels of support available for on specific
      combinations of operating system versions, operating system
      distributions, and hardware platforms, please refer to
      <a class="ulink" href="https://www.mysql.com/support/supportedplatforms/cluster.html" target="_top">https://www.mysql.com/support/supportedplatforms/cluster.html</a>.
    </p><p><b>Availability. </b>
      NDB Cluster binary and source packages are available for supported
      platforms from <a class="ulink" href="https://dev.mysql.com/downloads/cluster/" target="_top">https://dev.mysql.com/downloads/cluster/</a>.
    </p><p><b>NDB Cluster release numbers. </b>
      NDB 8.0 follows the same release pattern as the MySQL Server 8.0
      series of releases, beginning with MySQL 8.0.13 and MySQL NDB
      Cluster 8.0.13. In this <em class="citetitle">Manual</em> and other
      MySQL documentation, we identify these and later NDB Cluster
      releases employing a version number that begins with
      <span class="quote">“<span class="quote">NDB</span>”</span>. This version number is that of the
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> storage engine used in the
      NDB 8.0 release, and is the same as the MySQL 8.0 server version
      on which the NDB Cluster 8.0 release is based.
    </p><p><a name="mysql-cluster-version-strings"></a><b>Version strings used in NDB Cluster software. </b>
      The version string displayed by the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>
      client supplied with the MySQL NDB Cluster distribution uses this
      format:
    </p><pre data-lang="simple" class="programlisting">
mysql-<em class="replaceable"><code>mysql_server_version</code></em>-cluster
</pre><p>
    <em class="replaceable"><code>mysql_server_version</code></em> represents the
    version of the MySQL Server on which the NDB Cluster release is
    based. For all NDB Cluster 8.0 releases, this is
    <code class="literal">8.0.<em class="replaceable"><code>n</code></em></code>, where
    <em class="replaceable"><code>n</code></em> is the release number. Building from
    source using <a class="link" href="installing.html#option_cmake_with_ndbcluster"><code class="option">-DWITH_NDBCLUSTER</code></a> or the
    equivalent adds the <code class="literal">-cluster</code> suffix to the
    version string. (See
    <a class="xref" href="mysql-cluster.html#mysql-cluster-install-linux-source" title="22.2.2.4 Building NDB Cluster from Source on Linux">Section 22.2.2.4, “Building NDB Cluster from Source on Linux”</a>, and
    <a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows-source" title="22.2.3.2 Compiling and Installing NDB Cluster from Source on Windows">Section 22.2.3.2, “Compiling and Installing NDB Cluster from Source on Windows”</a>.) You can see
    this format used in the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client, as shown
    here:
  </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>mysql</code></strong>
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 2
Server version: 8.0.17-cluster Source distribution

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

mysql&gt; <strong class="userinput"><code>SELECT VERSION()\G</code></strong>
*************************** 1. row ***************************
VERSION(): 8.0.17-cluster
1 row in set (0.00 sec)
</pre><p>
    The first release of NDB Cluster using MySQL 8.0 was NDB 8.0.13,
    which used MySQL 8.0.13.
  </p><p>
    The version string displayed by other NDB Cluster programs not
    normally included with the MySQL 8.0 distribution uses this format:
  </p><pre data-lang="simple" class="programlisting">
mysql-<em class="replaceable"><code>mysql_server_version</code></em> ndb-<em class="replaceable"><code>ndb_engine_version</code></em>
</pre><p>
    <em class="replaceable"><code>mysql_server_version</code></em> represents the
    version of the MySQL Server on which the NDB Cluster release is
    based. For all NDB Cluster 8.0 releases, this is
    <code class="literal">8.0.<em class="replaceable"><code>n</code></em></code>, where
    <em class="replaceable"><code>n</code></em> is the release number.
    <em class="replaceable"><code>ndb_engine_version</code></em> is the version of the
    <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine used by this release
    of the NDB Cluster software. For all NDB 8.0 releases, this number
    is the same as the MySQL Server version. You can see this format
    used in the output of the <code class="literal">SHOW</code> command in the
    <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> client, like this:
  </p><pre data-lang="ndbmgm" class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>SHOW</code></strong>
Connected to Management Server at: localhost:1186
Cluster Configuration
---------------------
[ndbd(NDB)]     2 node(s)
id=1    @10.0.10.6  (mysql-8.0.18 ndb-8.0.17-ndb-8.0.17, Nodegroup: 0, *)
id=2    @10.0.10.8  (mysql-8.0.18 ndb-8.0.17-ndb-8.0.17, Nodegroup: 0)

[ndb_mgmd(MGM)] 1 node(s)
id=3    @10.0.10.2  (mysql-8.0.18 ndb-8.0.17-ndb-8.0.17)

[mysqld(API)]   2 node(s)
id=4    @10.0.10.10  (mysql-8.0.18 ndb-8.0.17-ndb-8.0.17)
id=5 (not connected, accepting connect from any host)
</pre><p><b>Compatibility with standard MySQL 8.0 releases. </b>
      While many standard MySQL schemas and applications can work using
      NDB Cluster, it is also true that unmodified applications and
      database schemas may be slightly incompatible or have suboptimal
      performance when run using NDB Cluster (see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-limitations" title="22.1.7 Known Limitations of NDB Cluster">Section 22.1.7, “Known Limitations of NDB Cluster”</a>). Most of these issues
      can be overcome, but this also means that you are very unlikely to
      be able to switch an existing application datastore—that
      currently uses, for example, <a class="link" href="storage-engines.html#myisam-storage-engine" title="16.2 The MyISAM Storage Engine"><code class="literal">MyISAM</code></a>
      or <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>—to use the
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine without allowing
      for the possibility of changes in schemas, queries, and
      applications. A <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> compiled without
      <code class="literal">NDB</code> support (that is, built without
      <a class="link" href="installing.html#option_cmake_with_ndbcluster_storage_engine"><code class="option">-DWITH_NDBCLUSTER_STORAGE_ENGINE</code></a> or
      its alias <code class="option">-DWITH_NDBCLUSTER</code>) cannot function as a
      drop-in replacement for a <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> that is built
      with it.
    </p><p><b>NDB Cluster development source trees. </b>
      NDB Cluster development trees can also be accessed from
      <a class="ulink" href="https://github.com/mysql/mysql-server" target="_top">https://github.com/mysql/mysql-server</a>.
    </p><p>
    The NDB Cluster development sources maintained at
    <a class="ulink" href="https://github.com/mysql/mysql-server" target="_top">https://github.com/mysql/mysql-server</a> are licensed
    under the GPL. For information about obtaining MySQL sources using
    Git and building them yourself, see
    <a class="xref" href="installing.html#installing-development-tree" title="2.9.3 Installing MySQL Using a Development Source Tree">Section 2.9.3, “Installing MySQL Using a Development Source Tree”</a>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
      As with MySQL Server 8.0, NDB Cluster 8.0 releases are built using
      <span class="command"><strong>CMake</strong></span>.
</p>
</div>
<p>
    NDB Cluster 7.5 and NDB Cluster 7.6 are available as General
    Availability (GA) releases; NDB 7.6 is recommended for new
    deployments. NDB Cluster 7.4 and NDB Cluster 7.3 are previous GA
    releases which are still supported in production. NDB 7.2 is a
    previous GA release series which is still maintained; it is no
    longer recommended for new deployments. For an overview of major
    features added in NDB 7.6, see
    <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-what-is-new-7-6.html" target="_top">What is New in NDB Cluster 7.6</a>. For
    similar information about NDB Cluster 7.5, see
    <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-what-is-new-7-5.html" target="_top">What is New in NDB Cluster 7.5</a>. For
    information about previous NDB Cluster releases, see
    <a class="ulink" href="https://dev.mysql.com/doc/refman/5.6/en/mysql-cluster.html" target="_top">MySQL NDB Cluster 7.3 and NDB Cluster 7.4</a>, and
    <a class="ulink" href="https://dev.mysql.com/doc/refman/5.5/en/mysql-cluster.html" target="_top">MySQL NDB Cluster 7.2</a>.
  </p><p>
    The contents of this chapter are subject to revision as NDB Cluster
    continues to evolve. Additional information regarding NDB Cluster
    can be found on the MySQL website at
    <a class="ulink" href="http://www.mysql.com/products/cluster/" target="_top">http://www.mysql.com/products/cluster/</a>.
  </p><a class="indexterm" name="idm140091608764928"></a><p><b>Additional Resources. </b>
      More information about NDB Cluster can be found in the following
      places:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        For answers to some commonly asked questions about NDB Cluster,
        see <a class="xref" href="faqs.html#faqs-mysql-cluster" title="A.10 MySQL 8.0 FAQ: NDB Cluster">Section A.10, “MySQL 8.0 FAQ: NDB Cluster”</a>.
      </p></li><li class="listitem"><p>
        The NDB Cluster mailing list:
        <a class="ulink" href="http://lists.mysql.com/cluster" target="_top">http://lists.mysql.com/cluster</a>.
      </p></li><li class="listitem"><p>
        The NDB Cluster Forum: <a class="ulink" href="https://forums.mysql.com/list.php?25" target="_top">https://forums.mysql.com/list.php?25</a>.
      </p></li><li class="listitem"><p>
        Many NDB Cluster users and developers blog about their
        experiences with NDB Cluster, and make feeds of these available
        through
        <a class="ulink" href="http://www.planetmysql.org/" target="_top">PlanetMySQL</a>.
</p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="mysql-cluster-overview"></a>22.1 NDB Cluster Overview</h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-basics">22.1.1 NDB Cluster Core Concepts</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-nodes-groups">22.1.2 NDB Cluster Nodes, Node Groups, Replicas, and Partitions</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-overview-requirements">22.1.3 NDB Cluster Hardware, Software, and Networking Requirements</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-what-is-new">22.1.4 What is New in NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-added-deprecated-removed">22.1.5 Options, Variables, and Parameters Added, Deprecated or Removed in NDB
8.0</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-compared">22.1.6 MySQL Server Using InnoDB Compared with NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations">22.1.7 Known Limitations of NDB Cluster</a></span></dt></dl>
</div>
<a class="indexterm" name="idm140091608754480"></a><p>
    <span class="firstterm">NDB Cluster</span> is a technology
    that enables clustering of in-memory databases in a shared-nothing
    system. The shared-nothing architecture enables the system to work
    with very inexpensive hardware, and with a minimum of specific
    requirements for hardware or software.
  </p><p>
    NDB Cluster is designed not to have any single point of failure. In
    a shared-nothing system, each component is expected to have its own
    memory and disk, and the use of shared storage mechanisms such as
    network shares, network file systems, and SANs is not recommended or
    supported.
  </p><p>
    NDB Cluster integrates the standard MySQL server with an in-memory
    clustered storage engine called <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>
    (which stands for <span class="quote">“<span class="quote"><span class="emphasis"><em>N</em></span>etwork
    <span class="emphasis"><em>D</em></span>ata<span class="emphasis"><em>B</em></span>ase</span>”</span>). In our
    documentation, the term <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> refers to
    the part of the setup that is specific to the storage engine,
    whereas <span class="quote">“<span class="quote">MySQL NDB Cluster</span>”</span> refers to the combination
    of one or more MySQL servers with the
    <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine.
  </p><p>
    An NDB Cluster consists of a set of computers, known as
    <span class="firstterm">hosts</span>, each running one or
    more processes. These processes, known as
    <span class="firstterm">nodes</span>, may include MySQL
    servers (for access to NDB data), data nodes (for storage of the
    data), one or more management servers, and possibly other
    specialized data access programs. The relationship of these
    components in an NDB Cluster is shown here:
</p>
<div class="figure">
<a name="fig-mysql-cluster-components"></a><p class="title"><b>Figure 22.1 NDB Cluster Components</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/cluster-components-1.png" width="583" height="372" alt="In this cluster, three MySQL servers (mysqld program) are SQL nodes that provide access to four data nodes (ndbd program) that store data. The SQL nodes and data nodes are under the control of an NDB management server (ndb_mgmd program). Various clients and APIs can interact with the SQL nodes - the mysql client, the MySQL C API, PHP, Connector/J, and Connector/NET. Custom clients can also be created using the NDB API to interact with the data nodes or the NDB management server. The NDB management client (ndb_mgm program) interacts with the NDB management server.">
</div>

</div>

</div>
<br class="figure-break"><p>
    All these programs work together to form an NDB Cluster (see
    <a class="xref" href="mysql-cluster.html#mysql-cluster-programs" title="22.4 NDB Cluster Programs">Section 22.4, “NDB Cluster Programs”</a>. When data is stored by the
    <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine, the tables (and
    table data) are stored in the data nodes. Such tables are directly
    accessible from all other MySQL servers (SQL nodes) in the cluster.
    Thus, in a payroll application storing data in a cluster, if one
    application updates the salary of an employee, all other MySQL
    servers that query this data can see this change immediately.
  </p><p>
    Although an NDB Cluster SQL node uses the <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>
    server daemon, it differs in a number of critical respects from the
    <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> binary supplied with the MySQL
    8.0 distributions, and the two versions of
    <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> are not interchangeable.
  </p><p>
    In addition, a MySQL server that is not connected to an NDB Cluster
    cannot use the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine and
    cannot access any NDB Cluster data.
  </p><p>
    The data stored in the data nodes for NDB Cluster can be mirrored;
    the cluster can handle failures of individual data nodes with no
    other impact than that a small number of transactions are aborted
    due to losing the transaction state. Because transactional
    applications are expected to handle transaction failure, this should
    not be a source of problems.
  </p><p>
    Individual nodes can be stopped and restarted, and can then rejoin
    the system (cluster). Rolling restarts (in which all nodes are
    restarted in turn) are used in making configuration changes and
    software upgrades (see
    <a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="22.5.5 Performing a Rolling Restart of an NDB Cluster">Section 22.5.5, “Performing a Rolling Restart of an NDB Cluster”</a>). Rolling restarts
    are also used as part of the process of adding new data nodes online
    (see <a class="xref" href="mysql-cluster.html#mysql-cluster-online-add-node" title="22.5.15 Adding NDB Cluster Data Nodes Online">Section 22.5.15, “Adding NDB Cluster Data Nodes Online”</a>). For more
    information about data nodes, how they are organized in an NDB
    Cluster, and how they handle and store NDB Cluster data, see
    <a class="xref" href="mysql-cluster.html#mysql-cluster-nodes-groups" title="22.1.2 NDB Cluster Nodes, Node Groups, Replicas, and Partitions">Section 22.1.2, “NDB Cluster Nodes, Node Groups, Replicas, and Partitions”</a>.
  </p><p>
    Backing up and restoring NDB Cluster databases can be done using the
    <code class="literal">NDB</code>-native functionality found in the NDB Cluster
    management client and the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> program
    included in the NDB Cluster distribution. For more information, see
    <a class="xref" href="mysql-cluster.html#mysql-cluster-backup" title="22.5.3 Online Backup of NDB Cluster">Section 22.5.3, “Online Backup of NDB Cluster”</a>, and
    <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup">Section 22.4.23, “<span class="command"><strong>ndb_restore</strong></span> — Restore an NDB Cluster Backup”</a>. You can also
    use the standard MySQL functionality provided for this purpose in
    <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a> and the MySQL server. See
    <a class="xref" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program">Section 4.5.4, “<span class="command"><strong>mysqldump</strong></span> — A Database Backup Program”</a>, for more information.
  </p><p>
    NDB Cluster nodes can employ different transport mechanisms for
    inter-node communications; TCP/IP over standard 100 Mbps or faster
    Ethernet hardware is used in most real-world deployments.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-basics"></a>22.1.1 NDB Cluster Core Concepts</h3>
</div>
</div>
</div>
<a class="indexterm" name="idm140091608713440"></a><a class="indexterm" name="idm140091608711984"></a><a class="indexterm" name="idm140091608710496"></a><a class="indexterm" name="idm140091608709008"></a><a class="indexterm" name="idm140091608707504"></a><a class="indexterm" name="idm140091608706016"></a><a class="indexterm" name="idm140091608704528"></a><a class="indexterm" name="idm140091608702624"></a><a class="indexterm" name="idm140091608700704"></a><a class="indexterm" name="idm140091608698784"></a><a class="indexterm" name="idm140091608696880"></a><a class="indexterm" name="idm140091608695392"></a><a class="indexterm" name="idm140091608693904"></a><a class="indexterm" name="idm140091608692416"></a><a class="indexterm" name="idm140091608690928"></a><p>
      <span class="firstterm"><a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a></span>
      (also known as <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>) is an in-memory
      storage engine offering high-availability and data-persistence
      features.
    </p><p>
      The <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> storage engine can be
      configured with a range of failover and load-balancing options,
      but it is easiest to start with the storage engine at the cluster
      level. NDB Cluster's <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage
      engine contains a complete set of data, dependent only on other
      data within the cluster itself.
    </p><p>
      The <span class="quote">“<span class="quote">Cluster</span>”</span> portion of NDB Cluster is configured
      independently of the MySQL servers. In an NDB Cluster, each part
      of the cluster is considered to be a
      <span class="firstterm">node</span>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        In many contexts, the term <span class="quote">“<span class="quote">node</span>”</span> is used to
        indicate a computer, but when discussing NDB Cluster it means a
        <span class="emphasis"><em>process</em></span>. It is possible to run multiple
        nodes on a single computer; for a computer on which one or more
        cluster nodes are being run we use the term
        <span class="firstterm">cluster host</span>.
</p>
</div>
<p>
      There are three types of cluster nodes, and in a minimal NDB
      Cluster configuration, there will be at least three nodes, one of
      each of these types:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <span class="firstterm">Management node</span>: The
          role of this type of node is to manage the other nodes within
          the NDB Cluster, performing such functions as providing
          configuration data, starting and stopping nodes, and running
          backups. Because this node type manages the configuration of
          the other nodes, a node of this type should be started first,
          before any other node. An MGM node is started with the command
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>.
        </p></li><li class="listitem"><p>
          <span class="firstterm">Data node</span>: This type of
          node stores cluster data. There are as many data nodes as
          there are replicas, times the number of fragments (see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-nodes-groups" title="22.1.2 NDB Cluster Nodes, Node Groups, Replicas, and Partitions">Section 22.1.2, “NDB Cluster Nodes, Node Groups, Replicas, and Partitions”</a>). For example,
          with two replicas, each having two fragments, you need four
          data nodes. One replica is sufficient for data storage, but
          provides no redundancy; therefore, it is recommended to have 2
          (or more) replicas to provide redundancy, and thus high
          availability. A data node is started with the command
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> (see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon">Section 22.4.1, “<span class="command"><strong>ndbd</strong></span> — The NDB Cluster Data Node Daemon”</a>) or
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> (see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)">Section 22.4.3, “<span class="command"><strong>ndbmtd</strong></span> — The NDB Cluster Data Node Daemon (Multi-Threaded)”</a>).
        </p><p>
          NDB Cluster tables are normally stored completely in memory
          rather than on disk (this is why we refer to NDB Cluster as an
          <span class="firstterm">in-memory</span> database).
          However, some NDB Cluster data can be stored on disk; see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-disk-data" title="22.5.13 NDB Cluster Disk Data Tables">Section 22.5.13, “NDB Cluster Disk Data Tables”</a>, for more
          information.
        </p></li><li class="listitem"><p>
          <span class="firstterm">SQL node</span>: This is a node
          that accesses the cluster data. In the case of NDB Cluster, an
          SQL node is a traditional MySQL server that uses the
          <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> storage engine. An SQL
          node is a <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> process started with the
          <a class="link" href="mysql-cluster.html#option_mysqld_ndbcluster"><code class="option">--ndbcluster</code></a> and
          <code class="option">--ndb-connectstring</code> options, which are
          explained elsewhere in this chapter, possibly with additional
          MySQL server options as well.
        </p><p>
          An SQL node is actually just a specialized type of
          <span class="firstterm">API node</span>, which
          designates any application which accesses NDB Cluster data.
          Another example of an API node is the
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> utility that is used to restore
          a cluster backup. It is possible to write such applications
          using the NDB API. For basic information about the NDB API,
          see <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-getting-started.html" target="_top">Getting Started with the NDB API</a>.
</p></li></ul>
</div>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Important
</div>
<p>
        It is not realistic to expect to employ a three-node setup in a
        production environment. Such a configuration provides no
        redundancy; to benefit from NDB Cluster's high-availability
        features, you must use multiple data and SQL nodes. The use of
        multiple management nodes is also highly recommended.
</p>
</div>
<p>
      For a brief introduction to the relationships between nodes, node
      groups, replicas, and partitions in NDB Cluster, see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-nodes-groups" title="22.1.2 NDB Cluster Nodes, Node Groups, Replicas, and Partitions">Section 22.1.2, “NDB Cluster Nodes, Node Groups, Replicas, and Partitions”</a>.
    </p><p>
      Configuration of a cluster involves configuring each individual
      node in the cluster and setting up individual communication links
      between nodes. NDB Cluster is currently designed with the
      intention that data nodes are homogeneous in terms of processor
      power, memory space, and bandwidth. In addition, to provide a
      single point of configuration, all configuration data for the
      cluster as a whole is located in one configuration file.
    </p><p>
      The management server manages the cluster configuration file and
      the cluster log. Each node in the cluster retrieves the
      configuration data from the management server, and so requires a
      way to determine where the management server resides. When
      interesting events occur in the data nodes, the nodes transfer
      information about these events to the management server, which
      then writes the information to the cluster log.
    </p><p>
      In addition, there can be any number of cluster client processes
      or applications. These include standard MySQL clients,
      <code class="literal">NDB</code>-specific API programs, and management
      clients. These are described in the next few paragraphs.
    </p><p><b>Standard MySQL clients. </b>
        NDB Cluster can be used with existing MySQL applications written
        in PHP, Perl, C, C++, Java, Python, Ruby, and so on. Such client
        applications send SQL statements to and receive responses from
        MySQL servers acting as NDB Cluster SQL nodes in much the same
        way that they interact with standalone MySQL servers.
      </p><a class="indexterm" name="idm140091608648832"></a><a class="indexterm" name="idm140091608647344"></a><a class="indexterm" name="idm140091608645856"></a><p>
      MySQL clients using an NDB Cluster as a data source can be
      modified to take advantage of the ability to connect with multiple
      MySQL servers to achieve load balancing and failover. For example,
      Java clients using Connector/J 5.0.6 and later can use
      <code class="literal">jdbc:mysql:loadbalance://</code> URLs (improved in
      Connector/J 5.1.7) to achieve load balancing transparently; for
      more information about using Connector/J with NDB Cluster, see
      <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/mccj-using-connectorj.html" target="_top">Using Connector/J with NDB Cluster</a>.
    </p><p><b>NDB client programs. </b>
        Client programs can be written that access NDB Cluster data
        directly from the <code class="literal">NDBCLUSTER</code> storage engine,
        bypassing any MySQL Servers that may be connected to the
        cluster, using the <span class="firstterm">NDB
        API</span>, a high-level C++ API. Such applications may be
        useful for specialized purposes where an SQL interface to the
        data is not needed. For more information, see
        <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndbapi.html" target="_top">The NDB API</a>.
      </p><p>
      <code class="literal">NDB</code>-specific Java applications can also be
      written for NDB Cluster using the <span class="firstterm">NDB
      Cluster Connector for Java</span>. This NDB Cluster Connector
      includes <span class="firstterm">ClusterJ</span>, a
      high-level database API similar to object-relational mapping
      persistence frameworks such as Hibernate and JPA that connect
      directly to <code class="literal">NDBCLUSTER</code>, and so does not require
      access to a MySQL Server. Support is also provided in NDB Cluster
      for <span class="firstterm">ClusterJPA</span>, an OpenJPA
      implementation for NDB Cluster that leverages the strengths of
      ClusterJ and JDBC; ID lookups and other fast operations are
      performed using ClusterJ (bypassing the MySQL Server), while more
      complex queries that can benefit from MySQL's query optimizer
      are sent through the MySQL Server, using JDBC. See
      <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/mccj-overview-java.html" target="_top">Java and NDB Cluster</a>, and
      <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/mccj-overview-clusterj-object-models.html" target="_top">The ClusterJ API and Data Object Model</a>, for more
      information.
    </p><p>
      NDB Cluster also supports applications written in JavaScript using
      Node.js. The MySQL Connector for JavaScript includes adapters for
      direct access to the <code class="literal">NDB</code> storage engine and as
      well as for the MySQL Server. Applications using this Connector
      are typically event-driven and use a domain object model similar
      in many ways to that employed by ClusterJ. For more information,
      see <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-nodejs.html" target="_top">MySQL NoSQL Connector for JavaScript</a>.
    </p><p>
      The Memcache API for NDB Cluster, implemented as the loadable
      <span class="firstterm">ndbmemcache</span> storage engine
      for memcached version 1.6 and later, can be used to provide a
      persistent NDB Cluster data store, accessed using the memcache
      protocol.
    </p><p>
      The standard <span class="command"><strong>memcached</strong></span> caching engine is
      included in the NDB Cluster 8.0 distribution. Each
      <span class="command"><strong>memcached</strong></span> server has direct access to data
      stored in NDB Cluster, but is also able to cache data locally and
      to serve (some) requests from this local cache.
    </p><p>
      For more information, see <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndbmemcache.html" target="_top">ndbmemcache—Memcache API for NDB Cluster</a>.
    </p><p><b>Management clients. </b>
        These clients connect to the management server and provide
        commands for starting and stopping nodes gracefully, starting
        and stopping message tracing (debug versions only), showing node
        versions and status, starting and stopping backups, and so on.
        An example of this type of program is the
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> management client supplied with NDB
        Cluster (see <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client">Section 22.4.5, “<span class="command"><strong>ndb_mgm</strong></span> — The NDB Cluster Management Client”</a>).
        Such applications can be written using the
        <span class="firstterm">MGM API</span>, a C-language API
        that communicates directly with one or more NDB Cluster
        management servers. For more information, see
        <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/mgm-api.html" target="_top">The MGM API</a>.
      </p><p>
      Oracle also makes available MySQL Cluster Manager, which provides an advanced
      command-line interface simplifying many complex NDB Cluster
      management tasks, such restarting an NDB Cluster with a large
      number of nodes. The MySQL Cluster Manager client also supports commands for
      getting and setting the values of most node configuration
      parameters as well as <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> server options and
      variables relating to NDB Cluster. See <a class="ulink" href="https://dev.mysql.com/doc/mysql-cluster-manager/1.4/en/" target="_top">MySQL™ Cluster Manager 1.4.7 User Manual</a>,
      for more information.
    </p><p><b>Event logs. </b>
        NDB Cluster logs events by category (startup, shutdown, errors,
        checkpoints, and so on), priority, and severity. A complete
        listing of all reportable events may be found in
        <a class="xref" href="mysql-cluster.html#mysql-cluster-event-reports" title="22.5.6 Event Reports Generated in NDB Cluster">Section 22.5.6, “Event Reports Generated in NDB Cluster”</a>. Event logs are of
        the two types listed here:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <span class="firstterm">Cluster log</span>: Keeps a
          record of all desired reportable events for the cluster as a
          whole.
        </p></li><li class="listitem"><p>
          <span class="firstterm">Node log</span>: A separate log
          which is also kept for each individual node.
</p></li></ul>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Note
</div>
<p>
        Under normal circumstances, it is necessary and sufficient to
        keep and examine only the cluster log. The node logs need be
        consulted only for application development and debugging
        purposes.
</p>
</div>
<p><b>Checkpoint. </b>
        Generally speaking, when data is saved to disk, it is said that
        a <span class="firstterm">checkpoint</span> has been
        reached. More specific to NDB Cluster, a checkpoint is a point
        in time where all committed transactions are stored on disk.
        With regard to the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage
        engine, there are two types of checkpoints which work together
        to ensure that a consistent view of the cluster's data is
        maintained. These are shown in the following list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <span class="firstterm">Local Checkpoint (LCP)</span>:
          This is a checkpoint that is specific to a single node;
          however, LCPs take place for all nodes in the cluster more or
          less concurrently. An LCP usually occurs every few minutes;
          the precise interval varies, and depends upon the amount of
          data stored by the node, the level of cluster activity, and
          other factors.
        </p><p>
          NDB 8.0 supports partial LCPs, which can significantly improve
          performance under some conditions. See the descriptions of the
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-enablepartiallcp"><code class="literal">EnablePartialLcp</code></a> and
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-recoverywork"><code class="literal">RecoveryWork</code></a>
          configuration parameters which enable partial LCPs and control
          the amount of storage they use.
        </p></li><li class="listitem"><p>
          <span class="firstterm">Global Checkpoint (GCP)</span>:
          A GCP occurs every few seconds, when transactions for all
          nodes are synchronized and the redo-log is flushed to disk.
</p></li></ul>
</div>
<p>
      For more information about the files and directories created by
      local checkpoints and global checkpoints, see
      <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-ndbd-filesystemdir-files.html" target="_top">NDB Cluster Data Node File System Directory Files</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-nodes-groups"></a>22.1.2 NDB Cluster Nodes, Node Groups, Replicas, and Partitions</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091608596176"></a><a class="indexterm" name="idm140091608594688"></a><a class="indexterm" name="idm140091608593200"></a><a class="indexterm" name="idm140091608591712"></a><a class="indexterm" name="idm140091608590672"></a><a class="indexterm" name="idm140091608589600"></a><p>
      This section discusses the manner in which NDB Cluster divides and
      duplicates data for storage.
    </p><p>
      A number of concepts central to an understanding of this topic are
      discussed in the next few paragraphs.
    </p><p><b>Data node. </b>
        An <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> or <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> process,
        which stores one or more
        <span class="firstterm">replicas</span>—that is,
        copies of the <span class="firstterm">partitions</span>
        (discussed later in this section) assigned to the node group of
        which the node is a member.
      </p><p>
      Each data node should be located on a separate computer. While it
      is also possible to host multiple data node processes on a single
      computer, such a configuration is not usually recommended.
    </p><p>
      It is common for the terms <span class="quote">“<span class="quote">node</span>”</span> and <span class="quote">“<span class="quote">data
      node</span>”</span> to be used interchangeably when referring to an
      <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> or <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> process;
      where mentioned, management nodes (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>
      processes) and SQL nodes (<a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> processes) are
      specified as such in this discussion.
    </p><p><a name="mysql-cluster-nodes-groups-nodegroup"></a><b>Node group. </b>
        A node group consists of one or more nodes, and stores
        partitions, or sets of
        <span class="firstterm">replicas</span> (see next item).
      </p><p>
      The number of node groups in an NDB Cluster is not directly
      configurable; it is a function of the number of data nodes and of
      the number of replicas
      (<a class="link" href="mysql-cluster.html#ndbparam-ndbd-noofreplicas"><code class="literal">NoOfReplicas</code></a>
      configuration parameter), as shown here:
    </p><pre data-lang="simple" class="programlisting">
[# of node groups] = [# of data nodes] / <code class="literal">NoOfReplicas</code>
</pre><p>
      Thus, an NDB Cluster with 4 data nodes has 4 node groups if
      <a class="link" href="mysql-cluster.html#ndbparam-ndbd-noofreplicas"><code class="literal">NoOfReplicas</code></a> is set to 1
      in the <code class="filename">config.ini</code> file, 2 node groups if
      <a class="link" href="mysql-cluster.html#ndbparam-ndbd-noofreplicas"><code class="literal">NoOfReplicas</code></a> is set to 2,
      and 1 node group if
      <a class="link" href="mysql-cluster.html#ndbparam-ndbd-noofreplicas"><code class="literal">NoOfReplicas</code></a> is set to 4.
      Replicas are discussed later in this section; for more information
      about <a class="link" href="mysql-cluster.html#ndbparam-ndbd-noofreplicas"><code class="literal">NoOfReplicas</code></a>, see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition" title="22.3.3.6 Defining NDB Cluster Data Nodes">Section 22.3.3.6, “Defining NDB Cluster Data Nodes”</a>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        All node groups in an NDB Cluster must have the same number of
        data nodes.
</p>
</div>
<p>
      You can add new node groups (and thus new data nodes) online, to a
      running NDB Cluster; see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-online-add-node" title="22.5.15 Adding NDB Cluster Data Nodes Online">Section 22.5.15, “Adding NDB Cluster Data Nodes Online”</a>, for more
      information.
    </p><p><a name="mysql-cluster-nodes-groups-partition"></a><b>Partition. </b>
        This is a portion of the data stored by the cluster. Each node
        is responsible for keeping at least one copy of any partitions
        assigned to it (that is, at least one replica) available to the
        cluster.
      </p><p>
      The number of partitions used by default by NDB Cluster depends on
      the number of data nodes and the number of LDM threads in use by
      the data nodes, as shown here:
    </p><pre data-lang="simple" class="programlisting">
[# of partitions] = [# of data nodes] * [# of LDM threads]
</pre><p>
      When using data nodes running <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>, the
      number of LDM threads is controlled by the setting for
      <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-maxnoofexecutionthreads"><code class="literal">MaxNoOfExecutionThreads</code></a>.
      When using <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> there is a single LDM thread,
      which means that there are as many cluster partitions as nodes
      participating in the cluster. This is also the case when using
      <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> with
      <code class="literal">MaxNoOfExecutionThreads</code> set to 3 or less. (You
      should be aware that the number of LDM threads increases with the
      value of this parameter, but not in a strictly linear fashion, and
      that there are additional constraints on setting it; see the
      description of
      <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-maxnoofexecutionthreads"><code class="literal">MaxNoOfExecutionThreads</code></a>
      for more information.)
    </p><p><a name="mysql-cluster-nodes-groups-user-partitioning"></a><b>NDB and user-defined partitioning. </b>
        NDB Cluster normally partitions
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> tables automatically.
        However, it is also possible to employ user-defined partitioning
        with <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> tables. This is
        subject to the following limitations:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
          Only the <code class="literal">KEY</code> and <code class="literal">LINEAR
          KEY</code> partitioning schemes are supported in production
          with <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables.
        </p></li><li class="listitem"><p>
          The maximum number of partitions that may be defined
          explicitly for any <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table is
          <code class="literal">8 * MaxNoOfExecutionThreads * [<em class="replaceable"><code>number of
          node groups</code></em>]</code>, the number of node
          groups in an NDB Cluster being determined as discussed
          previously in this section. When using <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>
          for data node processes, setting
          <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-maxnoofexecutionthreads"><code class="literal">MaxNoOfExecutionThreads</code></a>
          has no effect; in such a case, it can be treated as though it
          were equal to 1 for purposes of performing this calculation.
        </p><p>
          See <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)">Section 22.4.3, “<span class="command"><strong>ndbmtd</strong></span> — The NDB Cluster Data Node Daemon (Multi-Threaded)”</a>, for more
          information.
</p></li></ol>
</div>
<p>
      For more information relating to NDB Cluster and user-defined
      partitioning, see <a class="xref" href="mysql-cluster.html#mysql-cluster-limitations" title="22.1.7 Known Limitations of NDB Cluster">Section 22.1.7, “Known Limitations of NDB Cluster”</a>, and
      <a class="xref" href="partitioning.html#partitioning-limitations-storage-engines" title="23.6.2 Partitioning Limitations Relating to Storage Engines">Section 23.6.2, “Partitioning Limitations Relating to Storage Engines”</a>.
    </p><p><a name="mysql-cluster-nodes-groups-replica"></a><b>Replica. </b>
        This is a copy of a cluster partition. Each node in a node group
        stores a replica. Also sometimes known as a
        <span class="firstterm">partition replica</span>. The
        number of replicas is equal to the number of nodes per node
        group.
      </p><p>
      A replica belongs entirely to a single node; a node can (and
      usually does) store several replicas.
    </p><p>
      The following diagram illustrates an NDB Cluster with four data
      nodes running <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>, arranged in two node groups
      of two nodes each; nodes 1 and 2 belong to node group 0, and nodes
      3 and 4 belong to node group 1.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        Only data nodes are shown here; although a working NDB Cluster
        requires an <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> process for cluster
        management and at least one SQL node to access the data stored
        by the cluster, these have been omitted from the figure for
        clarity.
</p>
</div>

<div class="figure">
<a name="fig-mysql-cluster-2-node-groups"></a><p class="title"><b>Figure 22.2 NDB Cluster with Two Node Groups</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/replicas-groups-1-1.png" width="500" height="505" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"><p>
      The data stored by the cluster is divided into four partitions,
      numbered 0, 1, 2, and 3. Each partition is stored—in
      multiple copies—on the same node group. Partitions are
      stored on alternate node groups as follows:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Partition 0 is stored on node group 0; a
          <span class="firstterm">primary replica</span> (primary
          copy) is stored on node 1, and a
          <span class="firstterm">backup replica</span> (backup
          copy of the partition) is stored on node 2.
        </p></li><li class="listitem"><p>
          Partition 1 is stored on the other node group (node group 1);
          this partition's primary replica is on node 3, and its backup
          replica is on node 4.
        </p></li><li class="listitem"><p>
          Partition 2 is stored on node group 0. However, the placing of
          its two replicas is reversed from that of Partition 0; for
          Partition 2, the primary replica is stored on node 2, and the
          backup on node 1.
        </p></li><li class="listitem"><p>
          Partition 3 is stored on node group 1, and the placement of
          its two replicas are reversed from those of partition 1. That
          is, its primary replica is located on node 4, with the backup
          on node 3.
</p></li></ul>
</div>
<p>
      What this means regarding the continued operation of an NDB
      Cluster is this: so long as each node group participating in the
      cluster has at least one node operating, the cluster has a
      complete copy of all data and remains viable. This is illustrated
      in the next diagram.
</p>
<div class="figure">
<a name="fig-mysql-cluster-nodes-required-2x2"></a><p class="title"><b>Figure 22.3 Nodes Required for a 2x2 NDB Cluster</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/replicas-groups-1-2.png" width="500" height="395" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"><p>
      In this example, the cluster consists of two node groups each
      consisting of two data nodes. Each data node is running an
      instance of <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>. Any combination of at least
      one node from node group 0 and at least one node from node group 1
      is sufficient to keep the cluster <span class="quote">“<span class="quote">alive</span>”</span>. However,
      if both nodes from a single node group fail, the combination
      consisting of the remaining two nodes in the other node group is
      not sufficient. In this situation, the cluster has lost an entire
      partition and so can no longer provide access to a complete set of
      all NDB Cluster data.
    </p><p>
      The maximum number of node groups supported for a single NDB
      Cluster instance is 48.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-overview-requirements"></a>22.1.3 NDB Cluster Hardware, Software, and Networking Requirements</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091608495792"></a><a class="indexterm" name="idm140091608494304"></a><p>
      One of the strengths of NDB Cluster is that it can be run on
      commodity hardware and has no unusual requirements in this regard,
      other than for large amounts of RAM, due to the fact that all live
      data storage is done in memory. (It is possible to reduce this
      requirement using Disk Data tables—see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-disk-data" title="22.5.13 NDB Cluster Disk Data Tables">Section 22.5.13, “NDB Cluster Disk Data Tables”</a>, for more information
      about these.) Naturally, multiple and faster CPUs can enhance
      performance. Memory requirements for other NDB Cluster processes
      are relatively small.
    </p><p>
      The software requirements for NDB Cluster are also modest. Host
      operating systems do not require any unusual modules, services,
      applications, or configuration to support NDB Cluster. For
      supported operating systems, a standard installation should be
      sufficient. The MySQL software requirements are simple: all that
      is needed is a production release of NDB Cluster. It is not
      strictly necessary to compile MySQL yourself merely to be able to
      use NDB Cluster. We assume that you are using the binaries
      appropriate to your platform, available from the NDB Cluster
      software downloads page at
      <a class="ulink" href="https://dev.mysql.com/downloads/cluster/" target="_top">https://dev.mysql.com/downloads/cluster/</a>.
    </p><p>
      For communication between nodes, NDB Cluster supports TCP/IP
      networking in any standard topology, and the minimum expected for
      each host is a standard 100 Mbps Ethernet card, plus a switch,
      hub, or router to provide network connectivity for the cluster as
      a whole. We strongly recommend that an NDB Cluster be run on its
      own subnet which is not shared with machines not forming part of
      the cluster for the following reasons:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Security. </b>
            Communications between NDB Cluster nodes are not encrypted
            or shielded in any way. The only means of protecting
            transmissions within an NDB Cluster is to run your NDB
            Cluster on a protected network. If you intend to use NDB
            Cluster for Web applications, the cluster should definitely
            reside behind your firewall and not in your network's
            De-Militarized Zone
            (<a class="ulink" href="http://compnetworking.about.com/cs/networksecurity/g/bldef_dmz.htm" target="_top">DMZ</a>)
            or elsewhere.
          </p><p>
          See
          <a class="xref" href="mysql-cluster.html#mysql-cluster-security-networking-issues" title="22.5.12.1 NDB Cluster Security and Networking Issues">Section 22.5.12.1, “NDB Cluster Security and Networking Issues”</a>,
          for more information.
        </p></li><li class="listitem"><p><b>Efficiency. </b>
            Setting up an NDB Cluster on a private or protected network
            enables the cluster to make exclusive use of bandwidth
            between cluster hosts. Using a separate switch for your NDB
            Cluster not only helps protect against unauthorized access
            to NDB Cluster data, it also ensures that NDB Cluster nodes
            are shielded from interference caused by transmissions
            between other computers on the network. For enhanced
            reliability, you can use dual switches and dual cards to
            remove the network as a single point of failure; many device
            drivers support failover for such communication links.
</p></li></ul>
</div>
<p><a name="mysql-cluster-network-latency-issues"></a><b>Network communication and latency. </b>
        NDB Cluster requires communication between data nodes and API
        nodes (including SQL nodes), as well as between data nodes and
        other data nodes, to execute queries and updates. Communication
        latency between these processes can directly affect the observed
        performance and latency of user queries. In addition, to
        maintain consistency and service despite the silent failure of
        nodes, NDB Cluster uses heartbeating and timeout mechanisms
        which treat an extended loss of communication from a node as
        node failure. This can lead to reduced redundancy. Recall that,
        to maintain data consistency, an NDB Cluster shuts down when the
        last node in a node group fails. Thus, to avoid increasing the
        risk of a forced shutdown, breaks in communication between nodes
        should be avoided wherever possible.
      </p><p>
      The failure of a data or API node results in the abort of all
      uncommitted transactions involving the failed node. Data node
      recovery requires synchronization of the failed node's data
      from a surviving data node, and re-establishment of disk-based
      redo and checkpoint logs, before the data node returns to service.
      This recovery can take some time, during which the Cluster
      operates with reduced redundancy.
    </p><p>
      Heartbeating relies on timely generation of heartbeat signals by
      all nodes. This may not be possible if the node is overloaded, has
      insufficient machine CPU due to sharing with other programs, or is
      experiencing delays due to swapping. If heartbeat generation is
      sufficiently delayed, other nodes treat the node that is slow to
      respond as failed.
    </p><p>
      This treatment of a slow node as a failed one may or may not be
      desirable in some circumstances, depending on the impact of the
      node's slowed operation on the rest of the cluster. When
      setting timeout values such as
      <a class="link" href="mysql-cluster.html#ndbparam-ndbd-heartbeatintervaldbdb"><code class="literal">HeartbeatIntervalDbDb</code></a> and
      <a class="link" href="mysql-cluster.html#ndbparam-ndbd-heartbeatintervaldbapi"><code class="literal">HeartbeatIntervalDbApi</code></a> for
      NDB Cluster, care must be taken care to achieve quick detection,
      failover, and return to service, while avoiding potentially
      expensive false positives.
    </p><p>
      Where communication latencies between data nodes are expected to
      be higher than would be expected in a LAN environment (on the
      order of 100 µs), timeout parameters must be increased to
      ensure that any allowed periods of latency periods are well within
      configured timeouts. Increasing timeouts in this way has a
      corresponding effect on the worst-case time to detect failure and
      therefore time to service recovery.
    </p><p>
      LAN environments can typically be configured with stable low
      latency, and such that they can provide redundancy with fast
      failover. Individual link failures can be recovered from with
      minimal and controlled latency visible at the TCP level (where NDB
      Cluster normally operates). WAN environments may offer a range of
      latencies, as well as redundancy with slower failover times.
      Individual link failures may require route changes to propagate
      before end-to-end connectivity is restored. At the TCP level this
      can appear as large latencies on individual channels. The
      worst-case observed TCP latency in these scenarios is related to
      the worst-case time for the IP layer to reroute around the
      failures.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-what-is-new"></a>22.1.4 What is New in NDB Cluster</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091608469120"></a><a class="indexterm" name="idm140091608468048"></a><a class="indexterm" name="idm140091608466960"></a><p>
      The following sections describe changes in the implementation of
      NDB Cluster in MySQL NDB Cluster 8.0 through
      8.0.17, as compared to earlier release series.
      NDB Cluster 8.0 is currently available in a Developer Preview
      release. NDB Cluster 7.6 is available as a General Availability
      release, as is NDB Cluster 7.5 For information about additions and
      other changes in NDB Cluster 7.6, see
      <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-what-is-new-7-5.html" target="_top">What is New in NDB Cluster 7.5</a>; for
      information about new features and other changes in NDB Cluster
      7.5, see
      <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-what-is-new-7-6.html" target="_top">What is New in NDB Cluster 7.6</a>.
    </p><p>
      NDB Cluster 7.4 and 7.3 are recent General Availability releases,
      and are still supported. NDB Cluster 7.2 is a previous GA release,
      still supported in production for existing deployments.
      <span class="emphasis"><em>NDB 7.1 and earlier releases series are no longer
      maintained or supported in production</em></span>. We recommend
      that new deployments use NDB Cluster 7.6 or NDB Cluster 7.5. For
      information about NDB 7.4 and NDB 7.3, see
      <a class="ulink" href="https://dev.mysql.com/doc/refman/5.6/en/mysql-cluster.html" target="_top">MySQL NDB Cluster 7.3 and NDB Cluster 7.4</a>. For information about
      NDB 7.2 and previous NDB releases, see
      <a class="ulink" href="https://dev.mysql.com/doc/refman/5.5/en/mysql-cluster.html" target="_top">MySQL NDB Cluster 7.2</a>.
</p>
<h4><a name="mysql-cluster-what-is-new-8-0"></a>What is New in NDB Cluster 8.0</h4>
<p>
      Major changes and new features in NDB Cluster 8.0 which are likely
      to be of interest are shown in the following list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>INFORMATION_SCHEMA changes. </b>
            The following changes are made in the display of information
            about Disk Data files in the
            <a class="link" href="information-schema.html#files-table" title="25.11 The INFORMATION_SCHEMA FILES Table"><code class="literal">INFORMATION_SCHEMA.FILES</code></a> table:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              Tablespaces and log file groups are no longer represented
              in the <code class="literal">FILES</code> table. (These constructs
              are not actually files.)
            </p></li><li class="listitem"><p>
              Each data file is now represented by a single row in the
              <code class="literal">FILES</code> table. Each undo log file is also
              now represented in this table by one row only.
              (Previously, a row was displayed for each copy of each of
              these files on each data node.)
            </p></li><li class="listitem"><p>
              For rows corresponding to data files or undo log files,
              node ID and undo log buffer information is no longer
              displayed in the <code class="literal">EXTRA</code> column of the
              <code class="literal">FILES</code> table.
</p></li></ul>
</div>
<p>
          In addition, <code class="literal">INFORMATION_SCHEMA</code> tables now
          are populated with tablespace statistics for MySQL Cluster
          tables. (Bug #27167728)
        </p></li><li class="listitem"><p><b>Error information with ndb_perror. </b>
            Removed the deprecated <code class="option">--ndb</code> option for
            <a class="link" href="programs.html#perror" title="4.8.2 perror — Display MySQL Error Message Information"><span class="command"><strong>perror</strong></span></a>. Use <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-perror" title="22.4.16 ndb_perror — Obtain NDB Error Message Information"><span class="command"><strong>ndb_perror</strong></span></a>
            to obtain error message information from
            <code class="literal">NDB</code> error codes instead. (Bug #81704, Bug
            #81705, Bug #23523926, Bug #23523957)
          </p></li><li class="listitem"><p><b>Development in parallel with MySQL server. </b>
            Beginning with this release, MySQL NDB Cluster is being
            developed in parallel with the standard MySQL 8.0 server
            under a new unified release model with the following
            features:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              NDB 8.0 is developed in, built from, and released with the
              MySQL 8.0 source code tree.
            </p></li><li class="listitem"><p>
              The numbering scheme for NDB Cluster 8.0 releases follows
              the scheme for MySQL 8.0, starting with the current MySQL
              release (8.0.13).
            </p></li><li class="listitem"><p>
              Building the source with NDB support appends
              <code class="literal">-cluster</code> to the version string returned
              by <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> <code class="option">-V</code>, as shown
              here:
            </p><pre data-lang="terminal" class="programlisting">
shell≫ <strong class="userinput"><code>mysql -V</code></strong>
mysql  Ver 8.0.13-cluster for Linux on x86_64 (Source distribution)
</pre><p>
              NDB binaries continue to display both the MySQL Server
              version and the NDB engine version, like this:
            </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_mgm -V</code></strong>
MySQL distrib mysql-8.0.13 ndb-8.0.13-dmr, for Linux (x86_64)
</pre><p>
              In MySQL Cluster NDB 8.0, these two version numbers are
              always the same.
</p></li></ul>
</div>
<p>
          To build the MySQL 8.0.13 (or later) source with NDB Cluster
          support, use the CMake option
          <a class="link" href="installing.html#option_cmake_with_ndbcluster"><code class="option">-DWITH_NDBCLUSTER</code></a>.
        </p></li><li class="listitem"><p><b>Offline multithreaded index builds. </b>
            It is now possible to specify a set of cores to be used for
            I/O threads performing offline multithreaded builds of
            ordered indexes, as opposed to normal I/O duties such as
            file I/O， compression， or decompression.
            <span class="quote">“<span class="quote">Offline</span>”</span> in this context refers to building of
            ordered indexes performed when the parent table is not being
            written to; such building takes place when an
            <code class="literal">NDB</code> cluster performs a node or system
            restart, or as part of restoring a cluster from backup using
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>
            <a class="link" href="mysql-cluster.html#option_ndb_restore_rebuild-indexes"><code class="option">--rebuild-indexes</code></a>.
          </p><p>
          In addition, the default behaviour for offline index build
          work is modified to use all cores available to
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>, rather limiting itself to the core
          reserved for the I/O thread. Doing so can improve restart and
          restore times and performance, availability, and the user
          experience.
        </p><p>
          This enhancement is implemented as follows:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
              The default value for
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-buildindexthreads"><code class="literal">BuildIndexThreads</code></a>
              is changed from 0 to 128. This means that offline ordered
              index builds are now multithreaded by default.
            </p></li><li class="listitem"><p>
              The default value for
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-twopassinitialnoderestartcopy"><code class="literal">TwoPassInitialNodeRestartCopy</code></a>
              is changed from <code class="literal">false</code> to
              <code class="literal">true</code>. This means that an initial node
              restart first copies all data from a <span class="quote">“<span class="quote">live</span>”</span>
              node to one that is starting—without creating any
              indexes—builds ordered indexes offline, and then
              again synchronizes its data with the live node, that is,
              synchronizing twice and building indexes offline between
              the two synchonizations. This causes an initial node
              restart to behave more like the normal restart of a node,
              and reduces the time required for building indexes.
            </p></li><li class="listitem"><p>
              A new thread type (<code class="literal">idxbld</code>) is defined
              for the
              <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-threadconfig"><code class="literal">ThreadConfig</code></a>
              configuration parameter, to allow locking of offline index
              build threads to specific CPUs.
</p></li></ol>
</div>
<p>
          In addition, <code class="literal">NDB</code> now distinguishes the
          thread types that are accessible to
          <span class="quote">“<span class="quote">ThreadConfig</span>”</span> by the following two criteria:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
              Whether the thread is an execution thread. Threads of
              types <code class="literal">main</code>, <code class="literal">ldm</code>,
              <code class="literal">recv</code>, <code class="literal">rep</code>,
              <code class="literal">tc</code>, and <code class="literal">send</code> are
              execution threads; thread types <code class="literal">io</code>,
              <code class="literal">watchdog</code>, and <code class="literal">idxbld</code>
              are not.
            </p></li><li class="listitem"><p>
              Whether the allocation of the thread to a given task is
              permanent or temporary. Currently all thread types except
              <code class="literal">idxbld</code> are permanent.
</p></li></ol>
</div>
<p>
          For additonal information, see the descriptions of the
          parameters in the Manual. (Bug #25835748, Bug #26928111)
        </p></li><li class="listitem"><p><b>logbuffers table backup process information. </b>
            When performing an NDB backup, the
            <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-logbuffers" title="22.5.10.23 The ndbinfo logbuffers Table"><code class="literal">ndbinfo.logbuffers</code></a> table
            now displays information regarding buffer usage by the
            backup process on each data node. This is implemented as
            rows reflecting two new log types in addition to
            <code class="literal">REDO</code> and <code class="literal">DD-UNDO</code>. One
            of these rows has the log type
            <code class="literal">BACKUP-DATA</code>, which shows the amount of
            data buffer used during backup to copy fragments to backup
            files. The other row has the log type
            <code class="literal">BACKUP-LOG</code>, which displays the amount of
            log buffer used during the backup to record changes made
            after the backup has started. One each of these
            <code class="literal">log_type</code> rows is shown in the
            <code class="literal">logbuffers</code> table for each data node in
            the cluster. Rows having these two log types are present in
            the table only while an NDB backup is currently in progress.
            (Bug #25822988)
          </p></li><li class="listitem"><p><b>processes table on Windows. </b>
            The process ID of the monitor process used on Windows
            platforms by <a class="link" href="sql-syntax.html#restart" title="13.7.7.8 RESTART Syntax"><code class="literal">RESTART</code></a> to spawn
            and restart a <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> is now shown in the
            <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-processes" title="22.5.10.30 The ndbinfo processes Table"><code class="literal">ndbinfo.processes</code></a> table as
            an <code class="literal">angel_pid</code>.
          </p></li><li class="listitem"><p><b>ODirectSyncFlag. </b>
            Added the
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-odirectsyncflag"><code class="literal">ODirectSyncFlag</code></a>
            configuration parameter for data nodes. When enabled, the
            data node treats all completed filesystem writes to the redo
            log as though they had been performed using
            <code class="literal">fsync</code>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
            This parameter has no effect if at least one of the
            following conditions is true:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-odirect"><code class="literal">ODirect</code></a> is not
                enabled.
              </p></li><li class="listitem"><p>
                <code class="literal">InitFragmentLogFiles</code>
                is set to <code class="literal">SPARSE</code>.
</p></li></ul>
</div>

</div>
<p>
          (Bug #25428560)
        </p></li><li class="listitem"><p><b>Data node log buffer size control. </b>
            Added the <a class="link" href="mysql-cluster.html#option_ndbd_logbuffer-size"><code class="option">--logbuffer-size</code></a>
            option for <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> and
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>, for use in debugging with a large
            number of log messages. This controls the size of the data
            node log buffer; the default (32K) is intended for normal
            operations. (Bug #89679, Bug #27550943)
          </p></li><li class="listitem"><p><b>String hashing improvements. </b>
            Prior to NDB 8.0, all string hashing was based on first
            transforming the string into a normalized form, then
            MD5-hashing the resulting binary image. This could give rise
            to some performance problems, for the following reasons:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              The normalized string is always space padded to its full
              length. For a <a class="link" href="data-types.html#char" title="11.4.1 The CHAR and VARCHAR Types"><code class="literal">VARCHAR</code></a>, this
              often involved adding more spaces than there were
              characters in the original string.
            </p></li><li class="listitem"><p>
              The string libraries were not optimized for this space
              padding, and added considerable overhead in some use
              cases.
            </p></li><li class="listitem"><p>
              The padding semantics varied between character sets, some
              of which were not padded to their full length.
            </p></li><li class="listitem"><p>
              The transformed string could become quite large, even
              without space padding; some Unicode 9.0 collations can
              transform a single code point into 100 bytes of character
              data or more.
            </p></li><li class="listitem"><p>
              Subsequent MD5 hashing consisted mainly of padding with
              spaces, and was not particularly efficient, possibly
              causing additional performance penalties by flush
              significant portions of the L1 cache.
</p></li></ul>
</div>
<p>
          Collations provide their own hash functions, which hash the
          string directly without first creating a normalized string. In
          addition, for Unicode 9.0 collations, the hashes are computed
          without padding. <code class="literal">NDB</code> now takes advantage of
          this built-in function whenever hashing a string identified as
          using a Unicode 9.0 collation.
        </p><p>
          Since, for other collations there are existing databases which
          are hash partitioned on the transformed string,
          <code class="literal">NDB</code> continues to employ the previous method
          for hashing strings that use these, to maintain compatibility.
          (Bug #89590, Bug #89604, Bug #89609, Bug #27515000, Bug
          #27523758, Bug #27522732)
        </p><p>
          (See also.)
        </p></li><li class="listitem"><p><b>On-the-fly upgrades of tables using .frm files. </b>
            A table created in NDB 7.6 and earlier contains metadata in
            the form of a compressed <code class="filename">.frm</code> file,
            which is no longer supported in MySQL 8.0. To facilitate
            online upgrades to NDB 8.0, <code class="literal">NDB</code> performs
            on-the-fly translation of this metadata and writes it into
            the MySQL Server's data dictionary, which enables the
            <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> in NDB Cluster 8.0 to work with
            the table without preventing subsequent use of the table by
            a previous version of the <code class="literal">NDB</code> software.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
            Once a table's structure has been modified in NDB 8.0,
            its metadata is stored using the Data Dictionary, and it can
            no longer be accessed by NDB 7.6 and earlier.
</p>
</div>
<p>
          This enhancement also makes it possible to restore an
          <code class="literal">NDB</code> backup made using an earlier version to
          a cluster running NDB 8.0 (or later).
        </p></li><li class="listitem"><p><b>Schema synchronization of tablespace objects. </b>
            When a MySQL Server connects as an SQL node to an NDB
            cluster, it synchronizes its data dictionary with the
            information found in <code class="literal">NDB</code> dictionary.
          </p><p>
          Previously, the only <code class="literal">NDB</code> objects
          synchronized on connection of a new SQL node were databases
          and tables; MySQL NDB Cluster 8.0.14 and later also implement
          schema synchronization of disk data objects including
          tablespaces and log file groups. Among other benefits, this
          eliminates the possibility of a mismatch between the MySQL
          data dictionary and the <code class="literal">NDB</code> dictionary
          following a native backup and restore, in which tablespaces
          and log file groups were restored to the
          <code class="literal">NDB</code> dictionary, but not to the MySQL
          Server's data dictionary.
        </p></li><li class="listitem"><p><b>Handling of NO_AUTO_CREATE_USER in mysqld options file. </b>
            An error now is written to the server log when the presence
            of the <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/sql-mode.html#sqlmode_no_auto_create_user" target="_top"><code class="literal">NO_AUTO_CREATE_USER</code></a>
            value for the <code class="literal">sql_mode</code> option in the
            options file prevents <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> from
            starting.
          </p></li><li class="listitem"><p><b>Handling of references to nonexistent tablespaces. </b>
            It is no longer possible to issue a
            <a class="link" href="sql-syntax.html#create-table" title="13.1.20 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statement that
            refers to a nonexistent tablespace. Such a statement now
            fails with an error.
          </p></li><li class="listitem"><p><b>RESET MASTER changes. </b>
            Because the MySQL Server now executes
            <a class="link" href="sql-syntax.html#reset-master" title="13.4.1.2 RESET MASTER Syntax"><code class="literal">RESET MASTER</code></a> with a global
            read lock, the behavior of this statement when used with NDB
            Cluster has changed in the following two respects:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              It is no longer guaranteed to be synonchrous; that is, it
              is now possible that a read coming immediately before
              <code class="literal">RESET MASTER</code> is issued may not be
              logged until after the binary log has been rotated.
            </p></li><li class="listitem"><p>
              It now behaves identically, regardless of whether the
              statement is issued on the same SQL node that is writing
              the binary log, or on a different SQL node in the same
              cluster.
</p></li></ul>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Note
</div>
<p>
            <a class="link" href="sql-syntax.html#show-binlog-events" title="13.7.6.2 SHOW BINLOG EVENTS Syntax"><code class="literal">SHOW BINLOG EVENTS</code></a>,
            <a class="link" href="sql-syntax.html#flush-logs"><code class="literal">FLUSH LOGS</code></a>, and most data
            definition statements continue, as they did in previous
            <code class="literal">NDB</code> versions, to operate in a synchronous
            fashion.
</p>
</div>
</li><li class="listitem"><p><a name="mysql-cluster-what-is-new-8-0-extra-metadata"></a><b>NDB table extra metadata changes. </b>
            In NDB 8.0.14 and later, the extra metadata property of an
            <code class="literal">NDB</code> table is used for storing serialized
            metadata from the MySQL data dictionary rather than storing
            the binary representation of the table as in previous
            versions. (This was a <code class="filename">.frm</code> file, no
            longer used by the MySQL Server—see
            <a class="xref" href="data-dictionary.html" title="Chapter 14 MySQL Data Dictionary">Chapter 14, <i>MySQL Data Dictionary</i></a>.) As part of the work to
            support this change, the available size of the table's
            extra metadata has been increased. This means that
            <code class="literal">NDB</code> tables created in NDB Cluster 8.0.14
            and later are not compatible with previous NDB Cluster
            releases. Tables created in previous releases can be used
            with NDB 8.0.14 and later, but cannot be opened afterwards
            by an earlier version.
          </p><p>
          For more information, see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-upgrade-downgrade" title="22.2.8 Upgrading and Downgrading NDB Cluster">Section 22.2.8, “Upgrading and Downgrading NDB Cluster”</a>.
        </p></li><li class="listitem"><p><b>Disk data file distribution. </b>
            Beginning with NDB Cluster 8.0.14, <code class="literal">NDB</code>
            uses the MySQL data dictionary to make sure that disk data
            files and related constructs such as tablespaces and log
            file groups are correctly distributed between all connected
            SQL nodes.
          </p></li><li class="listitem"><p><b>ndb_restore options. </b>
            Beginning with NDB 8.0.16, the
            <a class="link" href="mysql-cluster.html#option_ndb_restore_nodeid"><code class="option">--nodeid</code></a> and
            <a class="link" href="mysql-cluster.html#option_ndb_restore_backupid"><code class="option">--backupid</code></a> options are
            both required when invoking <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>.
          </p></li><li class="listitem"><p><b>ndb_log_bin system variable. </b>
            Beginning with NDB 8.0.16, the default value of the
            <a class="link" href="mysql-cluster.html#sysvar_ndb_log_bin"><code class="literal">ndb_log_bin</code></a> system variable
            has changed from <code class="literal">TRUE</code> to
            <code class="literal">FALSE</code>.
          </p></li><li class="listitem"><p><b>NDB metadata change detection. </b>
            NDB 8.0.16 implements a new mechanism for detection of
            updates to metadata for data objects such as tables,
            tablespaces, and log file groups with the MySQL data
            dictionary. This is done using a thread, the
            <code class="literal">NDB</code> metadata change monitor thread, which
            runs in the background and checks periodically for
            inconsistencies between the <code class="literal">NDB</code>
            dictionary and the MySQL data dictionary.
          </p><p>
          The monitor performs metadata checks every 60 seconds by
          default. The polling interval can be adjusted by setting the
          value of the
          <a class="link" href="mysql-cluster.html#sysvar_ndb_metadata_check_interval"><code class="literal">ndb_metadata_check_interval</code></a>
          system variable; polling can be disabled altogether by setting
          the <a class="link" href="mysql-cluster.html#sysvar_ndb_metadata_check"><code class="literal">ndb_metadata_check</code></a> system
          variable to OFF. A status variable,
          <a class="link" href="mysql-cluster.html#statvar_Ndb_metadata_detected_count"><code class="literal">Ndb_metadata_detected_count</code></a>
          shows the number of times since <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> was
          last started that inconsistencies have been detected.
        </p></li><li class="listitem"><p><b>NDB 7.x distributed privileges no longer supported. </b>
            Most <code class="literal">NDB</code> code supporting distribution of
            privileges between MySQL servers connected to an NDB
            Cluster, as implemented in NDB 7.6 and earlier (see
            <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-privilege-distribution.html" target="_top">Distributed MySQL Privileges for NDB Cluster</a>),
            has been removed. This is due to the fact that such
            privilege tables do not function correctly in NDB 8.0, and
            is the result of changes to the MySQL server's
            privilege system (see <a class="xref" href="security.html#grant-tables" title="6.2.3 Grant Tables">Section 6.2.3, “Grant Tables”</a>).
          </p><p>
          It is safe but not necessary to retain privilege tables that
          use the <code class="literal">NDB</code> storage engine and were created
          in a previous release, but they are no longer used for access
          control in NDB Cluster 8.0. In NDB 8.0.16 and later, when a
          <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> acting as an SQL node detects such
          tables in <code class="literal">NDB</code>, it writes a warning to the
          MySQL server log, and creates
          <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> shadow tables local to
          itself; such shadow tables are created on each MySQL server
          connected to an NDB Cluster. When performing an upgrade from
          NDB 7.6 or earlier, the privilege tables in
          <code class="literal">NDB</code> can be removed safely using
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-drop-table" title="22.4.11 ndb_drop_table — Drop an NDB Table"><span class="command"><strong>ndb_drop_table</strong></span></a> once all MySQL servers
          acting as SQL nodes have been upgraded.
        </p><p>
          The <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> utility's
          <a class="link" href="mysql-cluster.html#option_ndb_restore_restore-privilege-tables"><code class="option">--restore-privilege-tables</code></a>
          option continues to be honored in NDB 8.0, and can still be
          used to restore distributed privilege tables present in a
          backup taken from a previous release of NDB Cluster to a
          cluster running NDB 8.0. These tables are handled as described
          in the preceeding paragraph.
        </p><p>
          For additional information regarding upgrades from previous
          NDB Cluster releases to NDB 8.0, see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-upgrade-downgrade" title="22.2.8 Upgrading and Downgrading NDB Cluster">Section 22.2.8, “Upgrading and Downgrading NDB Cluster”</a>.
        </p></li><li class="listitem"><p><b>Dynamic transactional resource allocation. </b>
            Allocation of resources in the transaction corrdinator (see
            <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-kernel-blocks-dbtc.html" target="_top">The DBTC Block</a>) is now
            performed using dynamic memory pools. This means that
            resource allocation determined by data node configuration
            parameters such as
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdmloperationspertransaction"><code class="literal">MaxDMLOperationsPerTransaction</code></a>,
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentindexoperations"><code class="literal">MaxNoOfConcurrentIndexOperations</code></a>,
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentoperations"><code class="literal">MaxNoOfConcurrentOperations</code></a>,
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentscans"><code class="literal">MaxNoOfConcurrentScans</code></a>,
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrenttransactions"><code class="literal">MaxNoOfConcurrentTransactions</code></a>,
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooffiredtriggers"><code class="literal">MaxNoOfFiredTriggers</code></a>,
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooflocalscans"><code class="literal">MaxNoOfLocalScans</code></a>,
            and
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-transactionbuffermemory"><code class="literal">TransactionBufferMemory</code></a>
            is now done in such a way that, if the load represented by
            each of these parameters is within the target load for all
            such resources, others of these resources can be limited so
            as not to exceed the total resources available.
          </p><p>
          As part of this work, several new data node parameters
          controlling transactional resources in
          <code class="literal">DBTC</code>, listed here, have been added:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedconcurrentindexoperations"><code class="literal">ReservedConcurrentIndexOperations</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedconcurrentoperations"><code class="literal">ReservedConcurrentOperations</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedconcurrentscans"><code class="literal">ReservedConcurrentScans</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedconcurrenttransactions"><code class="literal">ReservedConcurrentTransactions</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedfiredtriggers"><code class="literal">ReservedFiredTriggers</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedlocalscans"><code class="literal">ReservedLocalScans</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedtransactionbuffermemory"><code class="literal">ReservedTransactionBufferMemory</code></a>.
</p></li></ul>
</div>
</li><li class="listitem"><p><b>Backups using multiple LDMs per data node. </b>
            <code class="literal">NDB</code> backups can now be performed in a
            parallel fashion on individual data nodes using multiple
            local data managers (LDMs). (Previously, backups were done
            in parallel across data nodes, but were always serial within
            data node processes.) No special syntax is required for the
            <a class="link" href="mysql-cluster.html#mysql-cluster-backup-using-management-client" title="22.5.3.2 Using The NDB Cluster Management Client to Create a Backup"><code class="literal">START BACKUP</code></a> command in
            the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> client to enable this
            feature, but all data nodes must be using multiple LDMs.
            This means that data nodes must be running
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> is
            single-threaded and thus always has only one LDM) and they
            must be configured to use multiple LDMs before taking the
            backup; you can do this by choosing an appropriate setting
            for one of the multi-threaded data node configuration
            parameters
            <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-maxnoofexecutionthreads"><code class="literal">MaxNoOfExecutionThreads</code></a>
            or <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-threadconfig"><code class="literal">ThreadConfig</code></a>.
          </p><p>
          Backups using multiple LDMs create subdirectories, one per
          LDM, under the
          <code class="filename">BACKUP/BACKUP-<em class="replaceable"><code>backup_id</code></em>/</code>
          directory. <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> now detects these
          subdirectories automatically, and if they exist, attempts to
          restore the backup in parallel; see
          <a class="xref" href="mysql-cluster.html#ndb-restore-parallel-data-node-backup" title="22.4.23.2 Restoring from a backup taken in parallel">Section 22.4.23.2, “Restoring from a backup taken in parallel”</a>, for
          details. (Single-threaded backups are restored as in previous
          versions of <code class="literal">NDB</code>.) It is also possible to
          restore backups taken in parallel using an
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> binary from a previous version
          of NDB Cluster by modifying the usual restore procedure;
          <a class="xref" href="mysql-cluster.html#ndb-restore-parallel-backup-serial" title="22.4.23.2.2 Restoring a parallel backup serially">Section 22.4.23.2.2, “Restoring a parallel backup serially”</a>, provides
          information on how to do this.
        </p></li><li class="listitem"><p><b>Condition pushdown enhancements. </b>
            Previously, condition pushdown was limited to predicate
            terms referring to column values from the same table to
            which the condition was being pushed. In NDB 8.0.16, this
            restriction is removed such that column values from tables
            earlier in the query plan can also be referred to from
            pushed conditions.
          </p><p>
          Pushing down larger parts of a condition allows more rows to
          be filtered out by the data nodes, thereby reducing the number
          of rows which <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> must handle during
          join processing. Another benefit of this enhancement is that
          filtering can be performed in parallel in the LDM threads,
          rather than in a single mysqld process on an SQL node; this
          has the potential to improve query performance significantly.
        </p><p>
          Existing rules for type compatibility between column values
          being compared continue to apply (see
          <a class="xref" href="optimization.html#condition-pushdown-optimization" title="8.2.1.4 Engine Condition Pushdown Optimization">Section 8.2.1.4, “Engine Condition Pushdown Optimization”</a>).
        </p></li><li class="listitem"><p><b>ndb_mgm SHOW command and single user mode. </b>
            Beginning with NDB 8.0.17, when the cluster in single user
            mode, the output of the management client
            <a class="link" href="mysql-cluster.html#ndbclient-show"><code class="literal">SHOW</code></a> command indicates
            the API or SQL node having exclusive access while this mode
            is in effect.
          </p></li><li class="listitem"><p><b>Schema distribution enhancements. </b>
            The <code class="literal">NDB</code> schema distribution coordinator,
            which handles schema operations and tracks their progress,
            has been extended in NDB 8.0.17 to ensure that resources
            used during a schema operation are released at its
            conclusion. Previously, some of this work was done by the
            schema distribution client; this has been changed due to the
            fact that the client did not always have all needed state
            information, which could lead to resource leaks when the
            client decided to abandon the schema operation prior to
            completion and without informing the coordinator.
          </p><p>
          To help fix this issue, schema operation timeout detection has
          been moved from the schema distribution client to the
          coordinator, providing the coordinator with an opportunity to
          clean up any resources used during the schema operation. The
          coordinator now checks ongoing schema operations for timeout
          at regular intervals, and marks participants that have not yet
          completed a given schema operation as failed when detecting
          timeout. It also provides suitable warnings whenever a schema
          operation timeout occurs. (It should be noted that, after such
          a timeout is detected, the schema operation itself continues.)
          Additional reporting is done by printing a list of active
          schema operations at regular intervals whenever one or more of
          these operations is ongoing.
        </p><p>
          As an additional part of this work, a new
          <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> option
          <a class="link" href="mysql-cluster.html#option_mysqld_ndb-schema-dist-timeout"><code class="option">--ndb-schema-dist-timeout</code></a> makes
          it possible to set the length of time to wait until a schema
          operation is marked as having timed out.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-added-deprecated-removed"></a>22.1.5 Options, Variables, and Parameters Added, Deprecated or Removed in NDB
8.0</h3>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="mysql-cluster.html#params-added-ndb-8.0" title="Node Configuration Parameters Introduced in NDB 8.0">Node Configuration Parameters Introduced in NDB 8.0</a></p></li><li class="listitem"><p><a class="xref" href="mysql-cluster.html#params-deprecated-ndb-8.0" title="Node Configuration Parameters Deprecated in NDB 8.0">Node Configuration Parameters Deprecated in NDB 8.0</a></p></li><li class="listitem"><p><a class="xref" href="mysql-cluster.html#params-removed-ndb-8.0" title="Node Configuration Parameters Removed in NDB 8.0">Node Configuration Parameters Removed in NDB 8.0</a></p></li><li class="listitem"><p><a class="xref" href="mysql-cluster.html#optvars-added-ndb-8.0" title="MySQL Server Options and Variables Introduced in NDB 8.0">MySQL Server Options and Variables Introduced in NDB 8.0</a></p></li><li class="listitem"><p><a class="xref" href="mysql-cluster.html#optvars-deprecated-ndb-8.0" title="MySQL Server Options and Variables Deprecated in NDB 8.0">MySQL Server Options and Variables Deprecated in NDB 8.0</a></p></li><li class="listitem"><p><a class="xref" href="mysql-cluster.html#optvars-removed-ndb-8.0" title="MySQL Server Options and Variables Removed in NDB 8.0">MySQL Server Options and Variables Removed in NDB 8.0</a></p></li></ul>
</div>
<p>
      The next few sections contain information about
      <code class="literal">NDB</code> configuration parameters and NDB-specific
      <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> options and variables that have been
      added to, deprecated in, or removed from NDB 8.0.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h4 class="title"><a name="params-added-ndb-8.0"></a>Node Configuration Parameters Introduced in NDB 8.0</h4>
</div>
</div>
</div>
<p>
        The following node configuration parameters have been added in
        NDB 8.0.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedconcurrentindexoperations">ReservedConcurrentIndexOperations</a></code>:
            Number of simultaneous index operations having dedicated
            resources on one data node. Added in NDB 8.0.16.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedconcurrentoperations">ReservedConcurrentOperations</a></code>:
            Number of simultaneous operations having dedicated resources
            in transaction coordinators on one data node. Added in NDB
            8.0.16.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedconcurrentscans">ReservedConcurrentScans</a></code>:
            Number of simultaneous scans having dedicated resources on
            one data node. Added in NDB 8.0.16.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedconcurrenttransactions">ReservedConcurrentTransactions</a></code>:
            Number of simultaneous transactions having dedicated
            resources on one data node. Added in NDB 8.0.16.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedfiredtriggers">ReservedFiredTriggers</a></code>:
            Number of triggers having dedicated resources on one data
            node. Added in NDB 8.0.16.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedlocalscans">ReservedLocalScans</a></code>:
            Number of simultaneous fragment scans having dedicated
            resources on one data node. Added in NDB 8.0.16.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedtransactionbuffermemory">ReservedTransactionBufferMemory</a></code>:
            Dynamic buffer space (in bytes) for key and attribute data
            allocated to each data node. Added in NDB 8.0.16.
</p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="params-deprecated-ndb-8.0"></a>Node Configuration Parameters Deprecated in NDB 8.0</h4>

</div>

</div>

</div>
<p>
        No node configuration parameters have been deprecated in NDB
        8.0.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="params-removed-ndb-8.0"></a>Node Configuration Parameters Removed in NDB 8.0</h4>

</div>

</div>

</div>
<p>
        No node configuration parameters have been removed from NDB 8.0.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="optvars-added-ndb-8.0"></a>MySQL Server Options and Variables Introduced in NDB 8.0</h4>

</div>

</div>

</div>
<p>
        The following <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> system variables, status
        variables, and options have been added in NDB 8.0.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_metadata_detected_count">Ndb_metadata_detected_count</a></code>:
            Number of times NDB metadata change monitor thread has
            detected changes. Added in NDB 8.0.16.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-schema-dist-timeout">ndb-schema-dist-timeout</a></code>:
            How long to wait before detecting timeout during schema
            distribution. Added in NDB 8.0.17.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_metadata_check">ndb_metadata_check</a></code>:
            Enable auto-detection of NDB metadata changes with respect
            to MySQL data dictionary; enabled by default. Added in NDB
            8.0.16.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_metadata_check_interval">ndb_metadata_check_interval</a></code>:
            Interval in seconds to perform check for NDB metadata
            changes with respect to MySQL data dictionary. Added in NDB
            8.0.16.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndbinfo">ndbinfo</a></code>:
            Enable ndbinfo plugin, if supported. Added in NDB 8.0.13.
</p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="optvars-deprecated-ndb-8.0"></a>MySQL Server Options and Variables Deprecated in NDB 8.0</h4>

</div>

</div>

</div>
<p>
        No system variables, status variables, or options have been
        deprecated in NDB 8.0.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="optvars-removed-ndb-8.0"></a>MySQL Server Options and Variables Removed in NDB 8.0</h4>

</div>

</div>

</div>
<p>
        No system variables, status variables, or options have been
        removed from NDB 8.0.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-compared"></a>22.1.6 MySQL Server Using InnoDB Compared with NDB Cluster</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndb-innodb-engines">22.1.6.1 Differences Between the NDB and InnoDB Storage Engines</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndb-innodb-workloads">22.1.6.2 NDB and InnoDB Workloads</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndb-innodb-usage">22.1.6.3 NDB and InnoDB Feature Usage Summary</a></span></dt></dl>
</div>
<a class="indexterm" name="idm140091608162016"></a><a class="indexterm" name="idm140091608160592"></a><a class="indexterm" name="idm140091608159104"></a><p>
      MySQL Server offers a number of choices in storage engines. Since
      both <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> and
      <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> can serve as transactional
      MySQL storage engines, users of MySQL Server sometimes become
      interested in NDB Cluster. They see
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> as a possible alternative or
      upgrade to the default <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> storage
      engine in MySQL 8.0. While <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> and
      <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> share common characteristics,
      there are differences in architecture and implementation, so that
      some existing MySQL Server applications and usage scenarios can be
      a good fit for NDB Cluster, but not all of them.
    </p><p>
      In this section, we discuss and compare some characteristics of
      the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine used by NDB
      8.0 with <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> used in MySQL 8.0.
      The next few sections provide a technical comparison. In many
      instances, decisions about when and where to use NDB Cluster must
      be made on a case-by-case basis, taking all factors into
      consideration. While it is beyond the scope of this documentation
      to provide specifics for every conceivable usage scenario, we also
      attempt to offer some very general guidance on the relative
      suitability of some common types of applications for
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> as opposed to
      <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> back ends.
    </p><a class="indexterm" name="idm140091608142656"></a><a class="indexterm" name="idm140091608141168"></a><a class="indexterm" name="idm140091608139680"></a><p>
      NDB Cluster 8.0 uses a <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> based on MySQL
      8.0, including support for <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>
      1.1. While it is possible to use <code class="literal">InnoDB</code> tables
      with NDB Cluster, such tables are not clustered. It is also not
      possible to use programs or libraries from an NDB Cluster 8.0
      distribution with MySQL Server 8.0, or the reverse.
    </p><p>
      While it is also true that some types of common business
      applications can be run either on NDB Cluster or on MySQL Server
      (most likely using the <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> storage
      engine), there are some important architectural and implementation
      differences. <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-innodb-engines" title="22.1.6.1 Differences Between the NDB and InnoDB Storage Engines">Section 22.1.6.1, “Differences Between the NDB and InnoDB Storage Engines”</a>,
      provides a summary of the these differences. Due to the
      differences, some usage scenarios are clearly more suitable for
      one engine or the other; see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-innodb-workloads" title="22.1.6.2 NDB and InnoDB Workloads">Section 22.1.6.2, “NDB and InnoDB Workloads”</a>. This in turn
      has an impact on the types of applications that better suited for
      use with <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> or
      <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>. See
      <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-innodb-usage" title="22.1.6.3 NDB and InnoDB Feature Usage Summary">Section 22.1.6.3, “NDB and InnoDB Feature Usage Summary”</a>, for a comparison
      of the relative suitability of each for use in common types of
      database applications.
    </p><p>
      For information about the relative characteristics of the
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> and
      <a class="link" href="storage-engines.html#memory-storage-engine" title="16.3 The MEMORY Storage Engine"><code class="literal">MEMORY</code></a> storage engines, see
      <a class="xref" href="storage-engines.html#memory-storage-engine-compared-cluster" title="When to Use MEMORY or NDB Cluster">When to Use MEMORY or NDB Cluster</a>.
    </p><p>
      See <a class="xref" href="storage-engines.html" title="Chapter 16 Alternative Storage Engines">Chapter 16, <i>Alternative Storage Engines</i></a>, for additional information
      about MySQL storage engines.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndb-innodb-engines"></a>22.1.6.1 Differences Between the NDB and InnoDB Storage Engines</h4>
</div>
</div>
</div>
<a class="indexterm" name="idm140091608121088"></a><a class="indexterm" name="idm140091608119664"></a><a class="indexterm" name="idm140091608118176"></a><a class="indexterm" name="idm140091608116688"></a><p>
        The <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine is
        implemented using a distributed, shared-nothing architecture,
        which causes it to behave differently from
        <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> in a number of ways. For
        those unaccustomed to working with
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>, unexpected behaviors can arise
        due to its distributed nature with regard to transactions,
        foreign keys, table limits, and other characteristics. These are
        shown in the following table:
</p>
<div class="table">
<a name="idm140091608110736"></a><p class="title"><b>Table 22.1
          Differences between InnoDB and NDB storage engines
</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Feature</th>
            <th scope="col"><code class="literal">InnoDB</code> (MySQL 8.0)</th>
            <th scope="col"><code class="literal">NDB</code> 8.0</th>
          </tr></thead><tbody><tr>
            <td scope="row"><span class="emphasis"><em>MySQL Server Version</em></span></td>
            <td>8.0</td>
            <td>8.0</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em><a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> Version </em></span></td>
            <td><a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> 8.0.18</td>
            <td><a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> 8.0.18</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>NDB Cluster Version</em></span></td>
            <td>N/A</td>
            <td><a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>
              8.0.17/8.0.17</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>Storage Limits</em></span></td>
            <td>64TB</td>
            <td>128TB</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>Foreign Keys</em></span></td>
            <td>Yes</td>
            <td>Yes</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>Transactions</em></span></td>
            <td>All standard types</td>
            <td><a class="link" href="innodb-storage-engine.html#isolevel_read-committed"><code class="literal">READ COMMITTED</code></a></td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>MVCC</em></span></td>
            <td>Yes</td>
            <td>No</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>Data Compression</em></span></td>
            <td>Yes</td>
            <td>No (NDB checkpoint and backup files can be compressed)</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>Large Row Support (&gt; 14K)</em></span></td>
            <td>Supported for <a class="link" href="data-types.html#binary-varbinary" title="11.4.2 The BINARY and VARBINARY Types"><code class="literal">VARBINARY</code></a>,
              <a class="link" href="data-types.html#char" title="11.4.1 The CHAR and VARCHAR Types"><code class="literal">VARCHAR</code></a>,
              <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a>, and
              <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> columns</td>
            <td>Supported for <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> and
              <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> columns only (Using
              these types to store very large amounts of data can lower
              NDB performance)</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>Replication Support</em></span></td>
            <td>Asynchronous and semisynchronous replication using MySQL Replication;
              MySQL <a class="link" href="group-replication.html" title="Chapter 18 Group Replication">Group
              Replication</a></td>
            <td>Automatic synchronous replication within an NDB Cluster; asynchronous
              replication between NDB Clusters, using MySQL Replication
              (Semisynchronous replication is not supported)</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>Scaleout for Read Operations</em></span></td>
            <td>Yes (MySQL Replication)</td>
            <td>Yes (Automatic partitioning in NDB Cluster; NDB Cluster Replication)</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>Scaleout for Write Operations</em></span></td>
            <td>Requires application-level partitioning (sharding)</td>
            <td>Yes (Automatic partitioning in NDB Cluster is transparent to
              applications)</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>High Availability (HA)</em></span></td>
            <td>Built-in, from InnoDB cluster</td>
            <td>Yes (Designed for 99.999% uptime)</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>Node Failure Recovery and Failover</em></span></td>
            <td>From MySQL Group Replication</td>
            <td>Automatic (Key element in NDB architecture)</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>Time for Node Failure Recovery</em></span></td>
            <td>30 seconds or longer</td>
            <td>Typically &lt; 1 second</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>Real-Time Performance</em></span></td>
            <td>No</td>
            <td>Yes</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>In-Memory Tables</em></span></td>
            <td>No</td>
            <td>Yes (Some data can optionally be stored on disk; both in-memory and disk
              data storage are durable)</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>NoSQL Access to Storage Engine</em></span></td>
            <td>Yes</td>
            <td>Yes (Multiple APIs, including Memcached, Node.js/JavaScript, Java, JPA,
              C++, and HTTP/REST)</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>Concurrent and Parallel Writes</em></span></td>
            <td>Yes</td>
            <td>Up to 48 writers, optimized for concurrent writes</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>Conflict Detection and Resolution (Multiple Replication
              Masters)</em></span></td>
            <td>Yes (MySQL Group Replication)</td>
            <td>Yes</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>Hash Indexes</em></span></td>
            <td>No</td>
            <td>Yes</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>Online Addition of Nodes</em></span></td>
            <td>Read/write replicas using MySQL Group Replication</td>
            <td>Yes (all node types)</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>Online Upgrades</em></span></td>
            <td>Yes (using replication)</td>
            <td>Yes</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>Online Schema Modifications</em></span></td>
            <td>Yes, as part of MySQL 8.0</td>
            <td>Yes</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndb-innodb-workloads"></a>22.1.6.2 NDB and InnoDB Workloads</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091608004336"></a><a class="indexterm" name="idm140091608002832"></a><a class="indexterm" name="idm140091608001344"></a><a class="indexterm" name="idm140091607999856"></a><a class="indexterm" name="idm140091607998368"></a><a class="indexterm" name="idm140091607996880"></a><p>
        NDB Cluster has a range of unique attributes that make it ideal
        to serve applications requiring high availability, fast
        failover, high throughput, and low latency. Due to its
        distributed architecture and multi-node implementation, NDB
        Cluster also has specific constraints that may keep some
        workloads from performing well. A number of major differences in
        behavior between the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> and
        <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> storage engines with regard
        to some common types of database-driven application workloads
        are shown in the following table::
</p>
<div class="table">
<a name="idm140091607992000"></a><p class="title"><b>Table 22.2 Differences between InnoDB and NDB storage engines, common
types of data-driven application workloads.</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Workload</th>
            <th scope="col"><a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a></th>
            <th scope="col">NDB Cluster (<a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>)</th>
          </tr></thead><tbody><tr>
            <td scope="row"><span class="emphasis"><em>High-Volume OLTP Applications</em></span></td>
            <td>Yes</td>
            <td>Yes</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>DSS Applications (data marts, analytics)</em></span></td>
            <td>Yes</td>
            <td>Limited (Join operations across OLTP datasets not exceeding 3TB in size)</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>Custom Applications</em></span></td>
            <td>Yes</td>
            <td>Yes</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>Packaged Applications</em></span></td>
            <td>Yes</td>
            <td>Limited (should be mostly primary key access); NDB Cluster 8.0 supports
              foreign keys</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>In-Network Telecoms Applications (HLR, HSS, SDP)</em></span></td>
            <td>No</td>
            <td>Yes</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>Session Management and Caching</em></span></td>
            <td>Yes</td>
            <td>Yes</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>E-Commerce Applications</em></span></td>
            <td>Yes</td>
            <td>Yes</td>
          </tr><tr>
            <td scope="row"><span class="emphasis"><em>User Profile Management, AAA Protocol</em></span></td>
            <td>Yes</td>
            <td>Yes</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndb-innodb-usage"></a>22.1.6.3 NDB and InnoDB Feature Usage Summary</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091607953648"></a><a class="indexterm" name="idm140091607952144"></a><a class="indexterm" name="idm140091607950656"></a><a class="indexterm" name="idm140091607949168"></a><a class="indexterm" name="idm140091607947680"></a><a class="indexterm" name="idm140091607946176"></a><a class="indexterm" name="idm140091607944672"></a><p>
        When comparing application feature requirements to the
        capabilities of <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> with
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>, some are clearly more
        compatible with one storage engine than the other.
      </p><p>
        The following table lists supported application features
        according to the storage engine to which each feature is
        typically better suited.
</p>
<div class="table">
<a name="idm140091607939584"></a><p class="title"><b>Table 22.3 Supported application features according to the
          storage engine to which each feature is typically better
suited</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
            <th scope="col">Preferred application requirements for
              <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a></th>
            <th scope="col">Preferred application requirements for <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a></th>
          </tr></thead><tbody><tr>
<td scope="row">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    Foreign keys
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
                      NDB Cluster 8.0 supports foreign keys
</p>
</div>
</li><li class="listitem"><p>
                    Full table scans
                  </p></li><li class="listitem"><p>
                    Very large databases, rows, or transactions
                  </p></li><li class="listitem"><p>
                    Transactions other than
                    <a class="link" href="innodb-storage-engine.html#isolevel_read-committed"><code class="literal">READ COMMITTED</code></a>
</p></li></ul>
</div>
</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    Write scaling
                  </p></li><li class="listitem"><p>
                    99.999% uptime
                  </p></li><li class="listitem"><p>
                    Online addition of nodes and online schema
                    operations
                  </p></li><li class="listitem"><p>
                    Multiple SQL and NoSQL APIs (see
                    <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/mysql-cluster-api-overview.html" target="_top">NDB Cluster APIs: Overview and Concepts</a>)
                  </p></li><li class="listitem"><p>
                    Real-time performance
                  </p></li><li class="listitem"><p>
                    Limited use of <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a>
                    columns
                  </p></li><li class="listitem"><p>
                    Foreign keys are supported, although their use may
                    have an impact on performance at high throughput
</p></li></ul>
</div>
</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-limitations"></a>22.1.7 Known Limitations of NDB Cluster</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations-syntax">22.1.7.1 Noncompliance with SQL Syntax in NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations-limits">22.1.7.2 Limits and Differences of NDB Cluster from Standard MySQL Limits</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations-transactions">22.1.7.3 Limits Relating to Transaction Handling in NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations-error-handling">22.1.7.4 NDB Cluster Error Handling</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations-database-objects">22.1.7.5 Limits Associated with Database Objects in NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations-unsupported">22.1.7.6 Unsupported or Missing Features in NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations-performance">22.1.7.7 Limitations Relating to Performance in NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations-exclusive-to-cluster">22.1.7.8 Issues Exclusive to NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations-disk-data">22.1.7.9 Limitations Relating to NDB Cluster Disk Data Storage</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations-multiple-nodes">22.1.7.10 Limitations Relating to Multiple NDB Cluster Nodes</a></span></dt></dl>
</div>
<a class="indexterm" name="idm140091607914064"></a><a class="indexterm" name="idm140091607912992"></a><p>
      In the sections that follow, we discuss known limitations in
      current releases of NDB Cluster as compared with the features
      available when using the <code class="literal">MyISAM</code> and
      <code class="literal">InnoDB</code> storage engines. If you check the
      <span class="quote">“<span class="quote">Cluster</span>”</span> category in the MySQL bugs database at
      <a class="ulink" href="http://bugs.mysql.com" target="_top">http://bugs.mysql.com</a>, you can find known bugs in
      the following categories under <span class="quote">“<span class="quote">MySQL Server:</span>”</span> in the
      MySQL bugs database at <a class="ulink" href="http://bugs.mysql.com" target="_top">http://bugs.mysql.com</a>, which
      we intend to correct in upcoming releases of NDB Cluster:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          NDB Cluster
        </p></li><li class="listitem"><p>
          Cluster Direct API (NDBAPI)
        </p></li><li class="listitem"><p>
          Cluster Disk Data
        </p></li><li class="listitem"><p>
          Cluster Replication
        </p></li><li class="listitem"><p>
          ClusterJ
</p></li></ul>
</div>
<p>
      This information is intended to be complete with respect to the
      conditions just set forth. You can report any discrepancies that
      you encounter to the MySQL bugs database using the instructions
      given in <a class="xref" href="introduction.html#bug-reports" title="1.7 How to Report Bugs or Problems">Section 1.7, “How to Report Bugs or Problems”</a>. If we do not plan to fix
      the problem in NDB Cluster 8.0, we will add it to the list.
    </p><p>
      See <a class="ulink" href="https://dev.mysql.com/doc/refman/5.6/en/mysql-cluster-limitations-resolved.html" target="_top">Previous NDB Cluster Issues Resolved in NDB Cluster 7.3</a> for a
      list of issues in earlier releases that have been resolved in NDB
      Cluster 8.0.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        Limitations and other issues specific to NDB Cluster Replication
        are described in
        <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-issues" title="22.6.3 Known Issues in NDB Cluster Replication">Section 22.6.3, “Known Issues in NDB Cluster Replication”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-limitations-syntax"></a>22.1.7.1 Noncompliance with SQL Syntax in NDB Cluster</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091607897664"></a><p>
        Some SQL statements relating to certain MySQL features produce
        errors when used with <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables,
        as described in the following list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Temporary tables. </b>
              Temporary tables are not supported. Trying either to
              create a temporary table that uses the
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine or to
              alter an existing temporary table to use
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> fails with the error
              <span class="errortext">Table storage engine 'ndbcluster' does not
              support the create option 'TEMPORARY'</span>.
            </p></li><li class="listitem"><p><b>Indexes and keys in NDB tables. </b>
              Keys and indexes on NDB Cluster tables are subject to the
              following limitations:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><b>Column width. </b>
                  Attempting to create an index on an
                  <code class="literal">NDB</code> table column whose width is
                  greater than 3072 bytes succeeds, but only the first
                  3072 bytes are actually used for the index. In such
                  cases, a warning <span class="errortext">Specified key was too
                  long; max key length is 3072 bytes</span> is
                  issued, and a <a class="link" href="sql-syntax.html#show-create-table" title="13.7.6.10 SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE
                  TABLE</code></a> statement shows the length of the
                  index as 3072.
                </p></li><li class="listitem"><p><b>TEXT and BLOB columns. </b>
                  You cannot create indexes on
                  <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table columns that
                  use any of the <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> or
                  <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> data types.
                </p></li><li class="listitem"><p><b>FULLTEXT indexes. </b>
                  The <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine
                  does not support <code class="literal">FULLTEXT</code> indexes,
                  which are possible for
                  <a class="link" href="storage-engines.html#myisam-storage-engine" title="16.2 The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> and
                  <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> tables only.
                </p><p>
                However, you can create indexes on
                <a class="link" href="data-types.html#char" title="11.4.1 The CHAR and VARCHAR Types"><code class="literal">VARCHAR</code></a> columns of
                <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables.
              </p></li><li class="listitem"><p><b>USING HASH keys and NULL. </b>
                  Using nullable columns in unique keys and primary keys
                  means that queries using these columns are handled as
                  full table scans. To work around this issue, make the
                  column <code class="literal">NOT NULL</code>, or re-create the
                  index without the <code class="literal">USING HASH</code>
                  option.
                </p></li><li class="listitem"><p><b>Prefixes. </b>
                  There are no prefix indexes; only entire columns can
                  be indexed. (The size of an <code class="literal">NDB</code>
                  column index is always the same as the width of the
                  column in bytes, up to and including 3072 bytes, as
                  described earlier in this section. Also see
                  <a class="xref" href="mysql-cluster.html#mysql-cluster-limitations-unsupported" title="22.1.7.6 Unsupported or Missing Features in NDB Cluster">Section 22.1.7.6, “Unsupported or Missing Features in NDB Cluster”</a>,
                  for additional information.)
                </p></li><li class="listitem"><p><b>BIT columns. </b>
                  A <a class="link" href="data-types.html#bit-type" title="11.2.4 Bit-Value Type - BIT"><code class="literal">BIT</code></a> column cannot be
                  a primary key, unique key, or index, nor can it be
                  part of a composite primary key, unique key, or index.
                </p></li><li class="listitem"><p><b>AUTO_INCREMENT columns. </b>
                  Like other MySQL storage engines, the
                  <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine can
                  handle a maximum of one
                  <code class="literal">AUTO_INCREMENT</code> column per table.
                  However, in the case of an NDB table with no explicit
                  primary key, an <code class="literal">AUTO_INCREMENT</code>
                  column is automatically defined and used as a
                  <span class="quote">“<span class="quote">hidden</span>”</span> primary key. For this reason,
                  you cannot define a table that has an explicit
                  <code class="literal">AUTO_INCREMENT</code> column unless that
                  column is also declared using the <code class="literal">PRIMARY
                  KEY</code> option. Attempting to create a table
                  with an <code class="literal">AUTO_INCREMENT</code> column that
                  is not the table's primary key, and using the
                  <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine, fails
                  with an error.
</p></li></ul>
</div>
</li><li class="listitem"><p><b>Restrictions on foreign keys. </b>
              Support for foreign key constraints in NDB 8.0 is
              comparable to that provided by
              <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>, subject to the
              following restrictions:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                Every column referenced as a foreign key requires an
                explicit unique key, if it is not the table's
                primary key.
              </p></li><li class="listitem"><p>
                <code class="literal">ON UPDATE CASCADE</code> is not supported
                when the reference is to the parent table's primary
                key.
              </p><p>
                This is because an update of a primary key is
                implemented as a delete of the old row (containing the
                old primary key) plus an insert of the new row (with a
                new primary key). This is not visible to the
                <code class="literal">NDB</code> kernel, which views these two
                rows as being the same, and thus has no way of knowing
                that this update should be cascaded.
              </p></li><li class="listitem"><p>
                <code class="literal">SET DEFAULT</code> is not supported. (Also
                not supported by <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>.)
              </p></li><li class="listitem"><p>
                The <code class="literal">NO ACTION</code> keywords are accepted
                but treated as <code class="literal">RESTRICT</code>. (Also the
                same as with <code class="literal">InnoDB</code>.)
              </p></li><li class="listitem"><p>
                In earlier versions of NDB Cluster, when creating a
                table with foreign key referencing an index in another
                table, it sometimes appeared possible to create the
                foreign key even if the order of the columns in the
                indexes did not match, due to the fact that an
                appropriate error was not always returned internally. A
                partial fix for this issue improved the error used
                internally to work in most cases; however, it remains
                possible for this situation to occur in the event that
                the parent index is a unique index. (Bug #18094360)
</p></li></ul>
</div>
<p>
            For more information, see
            <a class="xref" href="sql-syntax.html#create-table-foreign-keys" title="13.1.20.6 Using FOREIGN KEY Constraints">Section 13.1.20.6, “Using FOREIGN KEY Constraints”</a>, and
            <a class="xref" href="introduction.html#constraint-foreign-key" title="1.8.3.2 FOREIGN KEY Constraints">Section 1.8.3.2, “FOREIGN KEY Constraints”</a>.
          </p></li><li class="listitem"><p><b>NDB Cluster and geometry data types. </b><a class="indexterm" name="idm140091607832736"></a>
              Geometry data types (<code class="literal">WKT</code> and
              <code class="literal">WKB</code>) are supported for
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables. However, spatial
              indexes are not supported.
            </p></li><li class="listitem"><p><b>Character sets and binary log files. </b>
              Currently, the <code class="literal">ndb_apply_status</code> and
              <code class="literal">ndb_binlog_index</code> tables are created
              using the <code class="literal">latin1</code> (ASCII) character set.
              Because names of binary logs are recorded in this table,
              binary log files named using non-Latin characters are not
              referenced correctly in these tables. This is a known
              issue, which we are working to fix. (Bug #50226)
            </p><p>
            To work around this problem, use only Latin-1 characters
            when naming binary log files or setting any the
            <a class="link" href="server-administration.html#option_mysqld_basedir"><code class="option">--basedir</code></a>,
            <a class="link" href="replication.html#option_mysqld_log-bin"><code class="option">--log-bin</code></a>, or
            <a class="link" href="replication.html#option_mysqld_log-bin-index"><code class="option">--log-bin-index</code></a> options.
          </p></li><li class="listitem"><p><b>Creating NDB tables with user-defined partitioning. </b>
              <a class="indexterm" name="idm140091607819024"></a>

              <a class="indexterm" name="idm140091607817536"></a>

              <a class="indexterm" name="idm140091607816048"></a>

              Support for user-defined partitioning in NDB Cluster is
              restricted to [<code class="literal">LINEAR</code>]
              <code class="literal">KEY</code> partitioning. Using any other
              partitioning type with <code class="literal">ENGINE=NDB</code> or
              <code class="literal">ENGINE=NDBCLUSTER</code> in a
              <a class="link" href="sql-syntax.html#create-table" title="13.1.20 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statement
              results in an error.
            </p><p>
            It is possible to override this restriction, but doing so is
            not supported for use in production settings. For details,
            see <a class="xref" href="partitioning.html#partitioning-limitations-ndb" title="User-defined partitioning and the NDB storage engine (NDB Cluster)">User-defined partitioning and the NDB storage engine (NDB Cluster)</a>.
          </p><p><b>Default partitioning scheme. </b>
              All NDB Cluster tables are by default partitioned by
              <code class="literal">KEY</code> using the table's primary key
              as the partitioning key. If no primary key is explicitly
              set for the table, the <span class="quote">“<span class="quote">hidden</span>”</span> primary key
              automatically created by the
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine is used
              instead. For additional discussion of these and related
              issues, see <a class="xref" href="partitioning.html#partitioning-key" title="23.2.5 KEY Partitioning">Section 23.2.5, “KEY Partitioning”</a>.
            </p><p>
            <a class="link" href="sql-syntax.html#create-table" title="13.1.20 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> and
            <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statements that
            would cause a user-partitioned
            <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> table not to meet
            either or both of the following two requirements are not
            permitted, and fail with an error:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
                The table must have an explicit primary key.
              </p></li><li class="listitem"><p>
                All columns listed in the table's partitioning
                expression must be part of the primary key.
</p></li></ol>
</div>
<p><b>Exception. </b>
              If a user-partitioned
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> table is created
              using an empty column-list (that is, using
              <code class="literal">PARTITION BY [LINEAR] KEY()</code>), then no
              explicit primary key is required.
            </p><p><b>Maximum number of partitions for NDBCLUSTER tables. </b>
              The maximum number of partitions that can defined for a
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> table when
              employing user-defined partitioning is 8 per node group.
              (See <a class="xref" href="mysql-cluster.html#mysql-cluster-nodes-groups" title="22.1.2 NDB Cluster Nodes, Node Groups, Replicas, and Partitions">Section 22.1.2, “NDB Cluster Nodes, Node Groups, Replicas, and Partitions”</a>, for
              more information about NDB Cluster node groups.
            </p><p><b>DROP PARTITION not supported. </b>
              It is not possible to drop partitions from
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables using
              <code class="literal">ALTER TABLE ... DROP PARTITION</code>. The
              other partitioning extensions to
              <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER
              TABLE</code></a>—<code class="literal">ADD PARTITION</code>,
              <code class="literal">REORGANIZE PARTITION</code>, and
              <code class="literal">COALESCE PARTITION</code>—are supported
              for NDB tables, but use copying and so are not optimized.
              See <a class="xref" href="partitioning.html#partitioning-management-range-list" title="23.3.1 Management of RANGE and LIST Partitions">Section 23.3.1, “Management of RANGE and LIST Partitions”</a>
              and <a class="xref" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax">Section 13.1.9, “ALTER TABLE Syntax”</a>.
            </p></li><li class="listitem"><p><b>Row-based replication. </b><a class="indexterm" name="idm140091607781248"></a>
              When using row-based replication with NDB Cluster, binary
              logging cannot be disabled. That is, the
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine ignores
              the value of <a class="link" href="replication.html#sysvar_sql_log_bin"><code class="literal">sql_log_bin</code></a>.
            </p></li><li class="listitem"><p><b>JSON data type. </b>
              The MySQL <a class="link" href="data-types.html#json" title="11.6 The JSON Data Type"><code class="literal">JSON</code></a> data type is
              supported for <code class="literal">NDB</code> tables in the
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> supplied with NDB 8.0.
            </p><a class="indexterm" name="idm140091607771792"></a><p>
            An <code class="literal">NDB</code> table can have a maximum of 3
            <code class="literal">JSON</code> columns.
          </p><p>
            The NDB API has no special provision for working with
            <code class="literal">JSON</code> data, which it views simply as
            <code class="literal">BLOB</code> data. Handling data as
            <code class="literal">JSON</code> must be performed by the
            application.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-limitations-limits"></a>22.1.7.2 Limits and Differences of NDB Cluster from Standard MySQL Limits</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091607764048"></a><p>
        In this section, we list limits found in NDB Cluster that either
        differ from limits found in, or that are not found in, standard
        MySQL.
      </p><a class="indexterm" name="idm140091607761968"></a><a class="indexterm" name="idm140091607760480"></a><a class="indexterm" name="idm140091607759024"></a><a class="indexterm" name="idm140091607757536"></a><a class="indexterm" name="idm140091607756048"></a><p><b>Memory usage and recovery. </b>
          Memory consumed when data is inserted into an
          <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table is not automatically
          recovered when deleted, as it is with other storage engines.
          Instead, the following rules hold true:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            A <a class="link" href="sql-syntax.html#delete" title="13.2.2 DELETE Syntax"><code class="literal">DELETE</code></a> statement on an
            <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table makes the memory
            formerly used by the deleted rows available for re-use by
            inserts on the same table only. However, this memory can be
            made available for general re-use by performing
            <a class="link" href="sql-syntax.html#optimize-table" title="13.7.3.4 OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a>.
          </p><p>
            A rolling restart of the cluster also frees any memory used
            by deleted rows. See
            <a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="22.5.5 Performing a Rolling Restart of an NDB Cluster">Section 22.5.5, “Performing a Rolling Restart of an NDB Cluster”</a>.
          </p></li><li class="listitem"><p>
            A <a class="link" href="sql-syntax.html#drop-table" title="13.1.32 DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a> or
            <a class="link" href="sql-syntax.html#truncate-table" title="13.1.37 TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE TABLE</code></a> operation on
            an <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table frees the memory
            that was used by this table for re-use by any
            <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table, either by the same
            table or by another <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              Recall that <a class="link" href="sql-syntax.html#truncate-table" title="13.1.37 TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE TABLE</code></a>
              drops and re-creates the table. See
              <a class="xref" href="sql-syntax.html#truncate-table" title="13.1.37 TRUNCATE TABLE Syntax">Section 13.1.37, “TRUNCATE TABLE Syntax”</a>.
</p>
</div>
</li><li class="listitem"><p><b>Limits imposed by the cluster's configuration. </b><a class="indexterm" name="idm140091607735024"></a>
              A number of hard limits exist which are configurable, but
              available main memory in the cluster sets limits. See the
              complete list of configuration parameters in
              <a class="xref" href="mysql-cluster.html#mysql-cluster-config-file" title="22.3.3 NDB Cluster Configuration Files">Section 22.3.3, “NDB Cluster Configuration Files”</a>. Most
              configuration parameters can be upgraded online. These
              hard limits include:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                Database memory size and index memory size
                (<a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a> and
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexmemory"><code class="literal">IndexMemory</code></a>,
                respectively).
              </p><p>
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a> is
                allocated as 32KB pages. As each
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a> page
                is used, it is assigned to a specific table; once
                allocated, this memory cannot be freed except by
                dropping the table.
              </p><p>
                See <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition" title="22.3.3.6 Defining NDB Cluster Data Nodes">Section 22.3.3.6, “Defining NDB Cluster Data Nodes”</a>, for
                more information.
              </p></li><li class="listitem"><p>
                The maximum number of operations that can be performed
                per transaction is set using the configuration
                parameters
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentoperations"><code class="literal">MaxNoOfConcurrentOperations</code></a>
                and
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooflocaloperations"><code class="literal">MaxNoOfLocalOperations</code></a>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
                  Bulk loading, <a class="link" href="sql-syntax.html#truncate-table" title="13.1.37 TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE
                  TABLE</code></a>, and <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER
                  TABLE</code></a> are handled as special cases by
                  running multiple transactions, and so are not subject
                  to this limitation.
</p>
</div>
</li><li class="listitem"><p>
                Different limits related to tables and indexes. For
                example, the maximum number of ordered indexes in the
                cluster is determined by
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooforderedindexes"><code class="literal">MaxNoOfOrderedIndexes</code></a>,
                and the maximum number of ordered indexes per table is
                16.
</p></li></ul>
</div>
</li><li class="listitem"><p><b>Node and data object maximums. </b>
              The following limits apply to numbers of cluster nodes and
              metadata objects:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                The maximum number of data nodes is 48.
              </p><p>
                A data node must have a node ID in the range of 1 to 48,
                inclusive. (Management and API nodes may use node IDs in
                the range 1 to 255, inclusive.)
              </p></li><li class="listitem"><p>
                The total maximum number of nodes in an NDB Cluster is
                255. This number includes all SQL nodes (MySQL Servers),
                API nodes (applications accessing the cluster other than
                MySQL servers), data nodes, and management servers.
              </p></li><li class="listitem"><p>
                The maximum number of metadata objects in current
                versions of NDB Cluster is 20320. This limit is
                hard-coded.
</p></li></ul>
</div>
<p>
            See <a class="ulink" href="https://dev.mysql.com/doc/refman/5.6/en/mysql-cluster-limitations-resolved.html" target="_top">Previous NDB Cluster Issues Resolved in NDB Cluster 7.3</a>,
            for more information.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-limitations-transactions"></a>22.1.7.3 Limits Relating to Transaction Handling in NDB Cluster</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091607704688"></a><p>
        A number of limitations exist in NDB Cluster with regard to the
        handling of transactions. These include the following:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Transaction isolation level. </b>
              <a class="indexterm" name="idm140091607701248"></a>

              <a class="indexterm" name="idm140091607699744"></a>

              <a class="indexterm" name="idm140091607698240"></a>

              The <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> storage engine
              supports only the <a class="link" href="innodb-storage-engine.html#isolevel_read-committed"><code class="literal">READ
              COMMITTED</code></a> transaction isolation level.
              (<code class="literal">InnoDB</code>, for example, supports
              <a class="link" href="innodb-storage-engine.html#isolevel_read-committed"><code class="literal">READ COMMITTED</code></a>,
              <a class="link" href="innodb-storage-engine.html#isolevel_read-uncommitted"><code class="literal">READ UNCOMMITTED</code></a>,
              <a class="link" href="innodb-storage-engine.html#isolevel_repeatable-read"><code class="literal">REPEATABLE READ</code></a>, and
              <a class="link" href="innodb-storage-engine.html#isolevel_serializable"><code class="literal">SERIALIZABLE</code></a>.) You
              should keep in mind that <code class="literal">NDB</code> implements
              <code class="literal">READ COMMITTED</code> on a per-row basis; when
              a read request arrives at the data node storing the row,
              what is returned is the last committed version of the row
              at that time.
            </p><p>
            Uncommitted data is never returned, but when a transaction
            modifying a number of rows commits concurrently with a
            transaction reading the same rows, the transaction
            performing the read can observe <span class="quote">“<span class="quote">before</span>”</span>
            values, <span class="quote">“<span class="quote">after</span>”</span> values, or both, for different
            rows among these, due to the fact that a given row read
            request can be processed either before or after the commit
            of the other transaction.
          </p><p>
            To ensure that a given transaction reads only before or
            after values, you can impose row locks using
            <a class="link" href="sql-syntax.html#select" title="13.2.10 SELECT Syntax"><code class="literal">SELECT ... LOCK IN
            SHARE MODE</code></a>. In such cases, the lock is held until
            the owning transaction is committed. Using row locks can
            also cause the following issues:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                Increased frequency of lock wait timeout errors, and
                reduced concurrency
              </p></li><li class="listitem"><p>
                Increased transaction processing overhead due to reads
                requiring a commit phase
              </p></li><li class="listitem"><p>
                Possibility of exhausting the available number of
                concurrent locks, which is limited by
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentoperations"><code class="literal">MaxNoOfConcurrentOperations</code></a>
</p></li></ul>
</div>
<p>
            <code class="literal">NDB</code> uses <code class="literal">READ
            COMMITTED</code> for all reads unless a modifier such as
            <code class="literal">LOCK IN SHARE MODE</code> or <code class="literal">FOR
            UPDATE</code> is used. <code class="literal">LOCK IN SHARE
            MODE</code> causes shared row locks to be used;
            <code class="literal">FOR UPDATE</code> causes exclusive row locks to
            be used. Unique key reads have their locks upgraded
            automatically by <code class="literal">NDB</code> to ensure a
            self-consistent read; <code class="literal">BLOB</code> reads also
            employ extra locking for consistency.
          </p><p>
            See <a class="xref" href="mysql-cluster.html#mysql-cluster-backup-troubleshooting" title="22.5.3.4 NDB Cluster Backup Troubleshooting">Section 22.5.3.4, “NDB Cluster Backup Troubleshooting”</a>,
            for information on how NDB Cluster's implementation of
            transaction isolation level can affect backup and
            restoration of <code class="literal">NDB</code> databases.
          </p></li><li class="listitem"><p><b>Transactions and BLOB or TEXT columns. </b>
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> stores only part
              of a column value that uses any of MySQL's
              <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> or
              <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> data types in the
              table visible to MySQL; the remainder of the
              <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> or
              <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> is stored in a
              separate internal table that is not accessible to MySQL.
              This gives rise to two related issues of which you should
              be aware whenever executing
              <a class="link" href="sql-syntax.html#select" title="13.2.10 SELECT Syntax"><code class="literal">SELECT</code></a> statements on tables
              that contain columns of these types:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
                For any <a class="link" href="sql-syntax.html#select" title="13.2.10 SELECT Syntax"><code class="literal">SELECT</code></a> from an
                NDB Cluster table: If the
                <a class="link" href="sql-syntax.html#select" title="13.2.10 SELECT Syntax"><code class="literal">SELECT</code></a> includes a
                <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> or
                <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> column, the
                <a class="link" href="innodb-storage-engine.html#isolevel_read-committed"><code class="literal">READ COMMITTED</code></a>
                transaction isolation level is converted to a read with
                read lock. This is done to guarantee consistency.
              </p></li><li class="listitem"><p>
                For any <a class="link" href="sql-syntax.html#select" title="13.2.10 SELECT Syntax"><code class="literal">SELECT</code></a> which uses
                a unique key lookup to retrieve any columns that use any
                of the <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> or
                <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> data types and that
                is executed within a transaction, a shared read lock is
                held on the table for the duration of the
                transaction—that is, until the transaction is
                either committed or aborted.
              </p><p>
                This issue does not occur for queries that use index or
                table scans, even against
                <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables having
                <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> or
                <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> columns.
              </p><p>
                For example, consider the table <code class="literal">t</code>
                defined by the following <a class="link" href="sql-syntax.html#create-table" title="13.1.20 CREATE TABLE Syntax"><code class="literal">CREATE
                TABLE</code></a> statement:
              </p><pre data-lang="sql" class="programlisting">
CREATE TABLE t (
    a INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    b INT NOT NULL,
    c INT NOT NULL,
    d TEXT,
    INDEX i(b),
    UNIQUE KEY u(c)
) ENGINE = NDB,
</pre><p>
                Either of the following queries on <code class="literal">t</code>
                causes a shared read lock, because the first query uses
                a primary key lookup and the second uses a unique key
                lookup:
              </p><pre data-lang="sql" class="programlisting">
SELECT * FROM t WHERE a = 1;

SELECT * FROM t WHERE c = 1;
</pre><p>
                However, none of the four queries shown here causes a
                shared read lock:
              </p><pre data-lang="sql" class="programlisting">
SELECT * FROM t WHERE b = 1;

SELECT * FROM t WHERE d = '1';

SELECT * FROM t;

SELECT b,c WHERE a = 1;
</pre><p>
                This is because, of these four queries, the first uses
                an index scan, the second and third use table scans, and
                the fourth, while using a primary key lookup, does not
                retrieve the value of any
                <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> or
                <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> columns.
              </p><p>
                You can help minimize issues with shared read locks by
                avoiding queries that use unique key lookups that
                retrieve <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> or
                <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> columns, or, in
                cases where such queries are not avoidable, by
                committing transactions as soon as possible afterward.
</p></li></ol>
</div>
</li><li class="listitem"><p><b>Rollbacks. </b>
              There are no partial transactions, and no partial
              rollbacks of transactions. A duplicate key or similar
              error causes the entire transaction to be rolled back.
            </p><p>
            This behavior differs from that of other transactional
            storage engines such as <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>
            that may roll back individual statements.
          </p></li><li class="listitem"><p><b>Transactions and memory usage. </b><a class="indexterm" name="idm140091607624720"></a><a class="indexterm" name="idm140091607623216"></a>
              As noted elsewhere in this chapter, NDB Cluster does not
              handle large transactions well; it is better to perform a
              number of small transactions with a few operations each
              than to attempt a single large transaction containing a
              great many operations. Among other considerations, large
              transactions require very large amounts of memory. Because
              of this, the transactional behavior of a number of MySQL
              statements is affected as described in the following list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <a class="link" href="sql-syntax.html#truncate-table" title="13.1.37 TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE TABLE</code></a> is not
                transactional when used on
                <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables. If a
                <a class="link" href="sql-syntax.html#truncate-table" title="13.1.37 TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE TABLE</code></a> fails to
                empty the table, then it must be re-run until it is
                successful.
              </p></li><li class="listitem"><p>
                <code class="literal">DELETE FROM</code> (even with no
                <code class="literal">WHERE</code> clause) <span class="emphasis"><em>is</em></span>
                transactional. For tables containing a great many rows,
                you may find that performance is improved by using
                several <code class="literal">DELETE FROM ... LIMIT ...</code>
                statements to <span class="quote">“<span class="quote">chunk</span>”</span> the delete operation.
                If your objective is to empty the table, then you may
                wish to use <a class="link" href="sql-syntax.html#truncate-table" title="13.1.37 TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE
                TABLE</code></a> instead.
              </p></li><li class="listitem"><p><b>LOAD DATA statements. </b>
                  <a class="link" href="sql-syntax.html#load-data" title="13.2.7 LOAD DATA Syntax"><code class="literal">LOAD DATA</code></a> is not
                  transactional when used on
                  <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
                  When executing a <a class="link" href="sql-syntax.html#load-data" title="13.2.7 LOAD DATA Syntax"><code class="literal">LOAD
                  DATA</code></a> statement, the
                  <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> engine performs
                  commits at irregular intervals that enable better
                  utilization of the communication network. It is not
                  possible to know ahead of time when such commits take
                  place.
</p>
</div>
</li><li class="listitem"><p><b>ALTER TABLE and transactions. </b>
                  When copying an <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table
                  as part of an <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER
                  TABLE</code></a>, the creation of the copy is
                  nontransactional. (In any case, this operation is
                  rolled back when the copy is deleted.)
</p></li></ul>
</div>
</li><li class="listitem"><p><b>Transactions and the COUNT() function. </b>
              When using NDB Cluster Replication, it is not possible to
              guarantee the transactional consistency of the
              <a class="link" href="functions.html#function_count"><code class="literal">COUNT()</code></a> function on the
              slave. In other words, when performing on the master a
              series of statements
              (<a class="link" href="sql-syntax.html#insert" title="13.2.6 INSERT Syntax"><code class="literal">INSERT</code></a>,
              <a class="link" href="sql-syntax.html#delete" title="13.2.2 DELETE Syntax"><code class="literal">DELETE</code></a>, or both) that
              changes the number of rows in a table within a single
              transaction, executing <code class="literal">SELECT COUNT(*) FROM
              <em class="replaceable"><code>table</code></em></code> queries on the
              slave may yield intermediate results. This is due to the
              fact that <code class="literal">SELECT COUNT(...)</code> may perform
              dirty reads, and is not a bug in the
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine. (See Bug
              #31321 for more information.)
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-limitations-error-handling"></a>22.1.7.4 NDB Cluster Error Handling</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091607587872"></a><p>
        Starting, stopping, or restarting a node may give rise to
        temporary errors causing some transactions to fail. These
        include the following cases:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Temporary errors. </b>
              When first starting a node, it is possible that you may
              see Error 1204 <span class="errortext">Temporary failure, distribution
              changed</span> and similar temporary errors.
            </p></li><li class="listitem"><p><b>Errors due to node failure. </b>
              The stopping or failure of any data node can result in a
              number of different node failure errors. (However, there
              should be no aborted transactions when performing a
              planned shutdown of the cluster.)
</p></li></ul>
</div>
<p>
        In either of these cases, any errors that are generated must be
        handled within the application. This should be done by retrying
        the transaction.
      </p><p>
        See also <a class="xref" href="mysql-cluster.html#mysql-cluster-limitations-limits" title="22.1.7.2 Limits and Differences of NDB Cluster from Standard MySQL Limits">Section 22.1.7.2, “Limits and Differences of NDB Cluster from Standard MySQL Limits”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-limitations-database-objects"></a>22.1.7.5 Limits Associated with Database Objects in NDB Cluster</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091607578208"></a><p>
        Some database objects such as tables and indexes have different
        limitations when using the
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> storage engine:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Database and table names. </b>
              When using the <code class="literal">NDB</code> storage engine, the
              maximum allowed length both for database names and for
              table names is 63 characters. A statement using a database
              name or table name longer than this limit fails with an
              appropriate error.
            </p></li><li class="listitem"><p><b>Number of database objects. </b>
              The maximum number of <span class="emphasis"><em>all</em></span>
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> database objects in a
              single NDB Cluster—including databases, tables, and
              indexes—is limited to 20320.
            </p></li><li class="listitem"><p><b>Attributes per table. </b>
              The maximum number of attributes (that is, columns and
              indexes) that can belong to a given table is 512.
            </p></li><li class="listitem"><p><b>Attributes per key. </b>
              The maximum number of attributes per key is 32.
            </p></li><li class="listitem"><p><b>Row size. </b>
              The maximum permitted size of any one row is 14000 bytes.
              Each <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> or
              <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> column contributes 256
              + 8 = 264 bytes to this total.
            </p><p>
            In addition, the maximum offset for a fixed-width column of
            an <code class="literal">NDB</code> table is 8188 bytes; attempting to
            create a table that violates this limitation fails with NDB
            error 851 <span class="errortext">Maximum offset for fixed-size columns
            exceeded</span>. For memory-based columns, you can work
            around this limitation by using a variable-width column type
            such as <a class="link" href="data-types.html#char" title="11.4.1 The CHAR and VARCHAR Types"><code class="literal">VARCHAR</code></a> or defining
            the column as <code class="literal">COLUMN_FORMAT=DYNAMIC</code>; this
            does not work with columns stored on disk. For disk-based
            columns, you may be able to do so by reordering one or more
            of the table's disk-based columns such that the
            combined width of all but the disk-based column defined last
            in the <a class="link" href="sql-syntax.html#create-table" title="13.1.20 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statement
            used to create the table does not exceed 8188 bytes, less
            any possible rounding performed for some data types such as
            <a class="link" href="data-types.html#char" title="11.4.1 The CHAR and VARCHAR Types"><code class="literal">CHAR</code></a> or
            <code class="literal">VARCHAR</code>; otherwise it is necessary to use
            memory-based storage for one or more of the offending column
            or columns instead.
          </p></li><li class="listitem"><p><b>BIT column storage per table. </b>
              The maximum combined width for all
              <a class="link" href="data-types.html#bit-type" title="11.2.4 Bit-Value Type - BIT"><code class="literal">BIT</code></a> columns used in a given
              <code class="literal">NDB</code> table is 4096.
            </p></li><li class="listitem"><p><b>FIXED column storage. </b>
              NDB Cluster 8.0 supports a maximum of 128 TB per fragment
              of data in <code class="literal">FIXED</code> columns.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-limitations-unsupported"></a>22.1.7.6 Unsupported or Missing Features in NDB Cluster</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091607544432"></a><p>
        A number of features supported by other storage engines are not
        supported for <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables. Trying to
        use any of these features in NDB Cluster does not cause errors
        in or of itself; however, errors may occur in applications that
        expects the features to be supported or enforced. Statements
        referencing such features, even if effectively ignored by
        <code class="literal">NDB</code>, must be syntactically and otherwise
        valid.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Index prefixes. </b>
              Prefixes on indexes are not supported for
              <code class="literal">NDB</code> tables. If a prefix is used as part
              of an index specification in a statement such as
              <a class="link" href="sql-syntax.html#create-table" title="13.1.20 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>,
              <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>, or
              <a class="link" href="sql-syntax.html#create-index" title="13.1.15 CREATE INDEX Syntax"><code class="literal">CREATE INDEX</code></a>, the prefix is
              not created by <code class="literal">NDB</code>.
            </p><p>
            A statement containing an index prefix, and creating or
            modifying an <code class="literal">NDB</code> table, must still be
            syntactically valid. For example, the following statement
            always fails with Error 1089 <span class="errortext">Incorrect prefix
            key; the used key part isn't a string, the used length is
            longer than the key part, or the storage engine doesn't
            support unique prefix keys</span>, regardless of
            storage engine:
          </p><pre data-lang="sql" class="programlisting">
<a class="link" href="sql-syntax.html#create-table" title="13.1.20 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> t1 (
    c1 INT NOT NULL,
    <span class="emphasis"><em>c2 VARCHAR(100),
    INDEX i1 (c2(500))</em></span>
);</pre><p>
            This happens on account of the SQL syntax rule that no index
            may have a prefix larger than itself.
          </p></li><li class="listitem"><p><b>Savepoints and rollbacks. </b>
              Savepoints and rollbacks to savepoints are ignored as in
              <a class="link" href="storage-engines.html#myisam-storage-engine" title="16.2 The MyISAM Storage Engine"><code class="literal">MyISAM</code></a>.
            </p></li><li class="listitem"><p><b>Durability of commits. </b>
              There are no durable commits on disk. Commits are
              replicated, but there is no guarantee that logs are
              flushed to disk on commit.
            </p></li><li class="listitem"><p><b>Replication. </b>
              Statement-based replication is not supported. Use
              <a class="link" href="replication.html#sysvar_binlog_format"><code class="option">--binlog-format=ROW</code></a> (or
              <a class="link" href="replication.html#sysvar_binlog_format"><code class="option">--binlog-format=MIXED</code></a>) when
              setting up cluster replication. See
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication" title="22.6 NDB Cluster Replication">Section 22.6, “NDB Cluster Replication”</a>, for more
              information.
            </p><p>
            Replication using global transaction identifiers (GTIDs) is
            not compatible with NDB Cluster, and is not supported in NDB
            Cluster 8.0. Do not enable GTIDs when using the
            <code class="literal">NDB</code> storage engine, as this is very
            likely to cause problems up to and including failure of NDB
            Cluster Replication.
          </p><p>
            Semisynchronous replication is not supported in NDB Cluster.
          </p></li><li class="listitem"><p><b>Generated columns. </b>
              The <code class="literal">NDB</code> storage engine does not support
              indexes on virtual generated columns.
            </p><p>
            As with other storage engines, you can create an index on a
            stored generated column, but you should bear in mind that
            <code class="literal">NDB</code> uses
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a> for
            storage of the generated column as well as
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexmemory"><code class="literal">IndexMemory</code></a> for the
            index. See
            <a class="xref" href="sql-syntax.html#json-column-indirect-index-mysql-cluster" title="JSON columns and indirect indexing in NDB Cluster">JSON columns and indirect indexing in NDB Cluster</a>,
            for an example.
          </p><p>
            NDB Cluster writes changes in stored generated columns to
            the binary log, but does log not those made to virtual
            columns. This should not effect NDB Cluster Replication or
            replication between <code class="literal">NDB</code> and other MySQL
            storage engines.
</p></li></ul>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Note
</div>
<p>
          See <a class="xref" href="mysql-cluster.html#mysql-cluster-limitations-transactions" title="22.1.7.3 Limits Relating to Transaction Handling in NDB Cluster">Section 22.1.7.3, “Limits Relating to Transaction Handling in NDB Cluster”</a>,
          for more information relating to limitations on transaction
          handling in <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-limitations-performance"></a>22.1.7.7 Limitations Relating to Performance in NDB Cluster</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091607504144"></a><p>
        The following performance issues are specific to or especially
        pronounced in NDB Cluster:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Range scans. </b>
              There are query performance issues due to sequential
              access to the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage
              engine; it is also relatively more expensive to do many
              range scans than it is with either
              <code class="literal">MyISAM</code> or <code class="literal">InnoDB</code>.
            </p></li><li class="listitem"><p><b>Reliability of Records in range. </b>
              The <code class="literal">Records in range</code> statistic is
              available but is not completely tested or officially
              supported. This may result in nonoptimal query plans in
              some cases. If necessary, you can employ <code class="literal">USE
              INDEX</code> or <code class="literal">FORCE INDEX</code> to alter
              the execution plan. See <a class="xref" href="optimization.html#index-hints" title="8.9.4 Index Hints">Section 8.9.4, “Index Hints”</a>, for
              more information on how to do this.
            </p></li><li class="listitem"><p><b>Unique hash indexes. </b>
              Unique hash indexes created with <code class="literal">USING
              HASH</code> cannot be used for accessing a table if
              <code class="literal">NULL</code> is given as part of the key.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-limitations-exclusive-to-cluster"></a>22.1.7.8 Issues Exclusive to NDB Cluster</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091607488064"></a><p>
        The following are limitations specific to the
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Machine architecture. </b>
              All machines used in the cluster must have the same
              architecture. That is, all machines hosting nodes must be
              either big-endian or little-endian, and you cannot use a
              mixture of both. For example, you cannot have a management
              node running on a PowerPC which directs a data node that
              is running on an x86 machine. This restriction does not
              apply to machines simply running <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>
              or other clients that may be accessing the cluster's
              SQL nodes.
            </p></li><li class="listitem"><p><b>Binary logging. </b><a class="indexterm" name="idm140091607480352"></a><a class="indexterm" name="idm140091607478864"></a>
              NDB Cluster has the following limitations or restrictions
              with regard to binary logging:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <a class="link" href="replication.html#sysvar_sql_log_bin"><code class="literal">sql_log_bin</code></a> has no
                effect on data operations; however, it is supported for
                schema operations.
              </p></li><li class="listitem"><p>
                NDB Cluster cannot produce a binary log for tables
                having <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> columns but
                no primary key.
              </p></li><li class="listitem"><p>
                Only the following schema operations are logged in a
                cluster binary log which is <span class="emphasis"><em>not</em></span> on
                the <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> executing the statement:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                    <a class="link" href="sql-syntax.html#create-table" title="13.1.20 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="sql-syntax.html#drop-table" title="13.1.32 DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="sql-syntax.html#create-database" title="13.1.12 CREATE DATABASE Syntax"><code class="literal">CREATE DATABASE</code></a> /
                    <a class="link" href="sql-syntax.html#create-database" title="13.1.12 CREATE DATABASE Syntax"><code class="literal">CREATE
                    SCHEMA</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="sql-syntax.html#drop-database" title="13.1.24 DROP DATABASE Syntax"><code class="literal">DROP DATABASE</code></a> /
                    <a class="link" href="sql-syntax.html#drop-database" title="13.1.24 DROP DATABASE Syntax"><code class="literal">DROP
                    SCHEMA</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="sql-syntax.html#create-tablespace" title="13.1.21 CREATE TABLESPACE Syntax"><code class="literal">CREATE TABLESPACE</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="sql-syntax.html#alter-tablespace" title="13.1.10 ALTER TABLESPACE Syntax"><code class="literal">ALTER TABLESPACE</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="sql-syntax.html#drop-tablespace" title="13.1.33 DROP TABLESPACE Syntax"><code class="literal">DROP TABLESPACE</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="sql-syntax.html#create-logfile-group" title="13.1.16 CREATE LOGFILE GROUP Syntax"><code class="literal">CREATE LOGFILE GROUP</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="sql-syntax.html#alter-logfile-group" title="13.1.6 ALTER LOGFILE GROUP Syntax"><code class="literal">ALTER LOGFILE GROUP</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="sql-syntax.html#drop-logfile-group" title="13.1.28 DROP LOGFILE GROUP Syntax"><code class="literal">DROP LOGFILE GROUP</code></a>
</p></li></ul>
</div>
</li></ul>
</div>
</li><li class="listitem"><p>
            Schema operations (DDL statements) are rejected while any
            data node restarts.
          </p></li><li class="listitem"><p><b>Number of replicas. </b>
              The number of replicas, as determined by the
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-noofreplicas"><code class="literal">NoOfReplicas</code></a> data
              node configuration parameter, is the number of copies of
              all data stored by NDB Cluster. Setting this parameter to
              1 means there is only a single copy; in this case, no
              redundancy is provided, and the loss of a data node
              entails loss of data. To guarantee redundancy, and thus
              preservation of data even if a data node fails, set this
              parameter to 2, which is the default and recommended value
              in production.
            </p><p>
            Setting <a class="link" href="mysql-cluster.html#ndbparam-ndbd-noofreplicas"><code class="literal">NoOfReplicas</code></a>
            to a value greater than 2 is possible (to a maximum of 4)
            but unnecessary to guard against loss of data. In addition,
            <span class="emphasis"><em>values greater than 2 for this parameter are not
            supported in production</em></span>.
</p></li></ul>
</div>
<p>
        See also
        <a class="xref" href="mysql-cluster.html#mysql-cluster-limitations-multiple-nodes" title="22.1.7.10 Limitations Relating to Multiple NDB Cluster Nodes">Section 22.1.7.10, “Limitations Relating to Multiple NDB Cluster Nodes”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-limitations-disk-data"></a>22.1.7.9 Limitations Relating to NDB Cluster Disk Data Storage</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091607434864"></a><p><b>Disk Data object maximums and minimums. </b>
          Disk data objects are subject to the following maximums and
          minimums:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Maximum number of tablespaces:
            2<sup>32</sup> (4294967296)
          </p></li><li class="listitem"><p>
            Maximum number of data files per tablespace:
            2<sup>16</sup> (65536)
          </p></li><li class="listitem"><p>
            The minimum and maximum possible sizes of extents for
            tablespace data files are 32K and 2G, respectively. See
            <a class="xref" href="sql-syntax.html#create-tablespace" title="13.1.21 CREATE TABLESPACE Syntax">Section 13.1.21, “CREATE TABLESPACE Syntax”</a>, for more information.
</p></li></ul>
</div>
<p>
        In addition, when working with NDB Disk Data tables, you should
        be aware of the following issues regarding data files and
        extents:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Data files use
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a>. Usage is
            the same as for in-memory data.
          </p></li><li class="listitem"><p>
            Data files use file descriptors. It is important to keep in
            mind that data files are always open, which means the file
            descriptors are always in use and cannot be re-used for
            other system tasks.
          </p></li><li class="listitem"><p>
            Extents require sufficient
            <code class="literal">DiskPageBufferMemory</code>;
            you must reserve enough for this parameter to account for
            all memory used by all extents (number of extents times size
            of extents).
</p></li></ul>
</div>
<p><b>Disk Data tables and diskless mode. </b>
          Use of Disk Data tables is not supported when running the
          cluster in diskless mode.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-limitations-multiple-nodes"></a>22.1.7.10 Limitations Relating to Multiple NDB Cluster Nodes</h4>

</div>

</div>

</div>
<p><b>Multiple SQL nodes. </b><a class="indexterm" name="idm140091607418128"></a>
          The following are issues relating to the use of multiple MySQL
          servers as NDB Cluster SQL nodes, and are specific to the
          <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> storage engine:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>No distributed table locks. </b>
              A <a class="link" href="sql-syntax.html#lock-tables" title="13.3.6 LOCK TABLES and UNLOCK TABLES Syntax"><code class="literal">LOCK TABLES</code></a> works only
              for the SQL node on which the lock is issued; no other SQL
              node in the cluster <span class="quote">“<span class="quote">sees</span>”</span> this lock. This is
              also true for a lock issued by any statement that locks
              tables as part of its operations. (See next item for an
              example.)
            </p></li><li class="listitem"><p><b>ALTER TABLE operations. </b>
              <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> is not fully
              locking when running multiple MySQL servers (SQL nodes).
              (As discussed in the previous item, NDB Cluster does not
              support distributed table locks.)
</p></li></ul>
</div>
<p><b>Multiple management nodes. </b><a class="indexterm" name="idm140091607407056"></a>
          When using multiple management servers:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            If any of the management servers are running on the same
            host, you must give nodes explicit IDs in connection strings
            because automatic allocation of node IDs does not work
            across multiple management servers on the same host. This is
            not required if every management server resides on a
            different host.
          </p></li><li class="listitem"><p>
            When a management server starts, it first checks for any
            other management server in the same NDB Cluster, and upon
            successful connection to the other management server uses
            its configuration data. This means that the management
            server <a class="link" href="mysql-cluster.html#option_ndb_mgmd_reload"><code class="option">--reload</code></a> and
            <a class="link" href="mysql-cluster.html#option_ndb_mgmd_initial"><code class="option">--initial</code></a> startup options
            are ignored unless the management server is the only one
            running. It also means that, when performing a rolling
            restart of an NDB Cluster with multiple management nodes,
            the management server reads its own configuration file if
            (and only if) it is the only management server running in
            this NDB Cluster. See
            <a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="22.5.5 Performing a Rolling Restart of an NDB Cluster">Section 22.5.5, “Performing a Rolling Restart of an NDB Cluster”</a>, for more
            information.
</p></li></ul>
</div>
<p><b>Multiple network addresses. </b>
          Multiple network addresses per data node are not supported.
          Use of these is liable to cause problems: In the event of a
          data node failure, an SQL node waits for confirmation that the
          data node went down but never receives it because another
          route to that data node remains open. This can effectively
          make the cluster inoperable.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          It is possible to use multiple network hardware
          <span class="emphasis"><em>interfaces</em></span> (such as Ethernet cards) for a
          single data node, but these must be bound to the same address.
          This also means that it not possible to use more than one
          <code class="literal">[tcp]</code> section per connection in the
          <code class="literal">config.ini</code> file. See
          <a class="xref" href="mysql-cluster.html#mysql-cluster-tcp-definition" title="22.3.3.10 NDB Cluster TCP/IP Connections">Section 22.3.3.10, “NDB Cluster TCP/IP Connections”</a>, for more
          information.
</p>
</div>

</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="mysql-cluster-installation"></a>22.2 NDB Cluster Installation</h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-installer">22.2.1 The NDB Cluster Auto-Installer</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-linux">22.2.2 Installation of NDB Cluster on Linux</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-windows">22.2.3 Installing NDB Cluster on Windows</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-configuration">22.2.4 Initial Configuration of NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-first-start">22.2.5 Initial Startup of NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-example-data">22.2.6 NDB Cluster Example with Tables and Data</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-shutdown-restart">22.2.7 Safe Shutdown and Restart of NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-upgrade-downgrade">22.2.8 Upgrading and Downgrading NDB Cluster</a></span></dt></dl>
</div>
<a class="indexterm" name="idm140091607391936"></a><a class="indexterm" name="idm140091607390864"></a><a class="indexterm" name="idm140091607389792"></a><a class="indexterm" name="idm140091607388304"></a><a class="indexterm" name="idm140091607387232"></a><p>
    This section describes the basics for planning, installing,
    configuring, and running an NDB Cluster. Whereas the examples in
    <a class="xref" href="mysql-cluster.html#mysql-cluster-configuration" title="22.3 Configuration of NDB Cluster">Section 22.3, “Configuration of NDB Cluster”</a> provide more in-depth
    information on a variety of clustering options and configuration,
    the result of following the guidelines and procedures outlined here
    should be a usable NDB Cluster which meets the
    <span class="emphasis"><em>minimum</em></span> requirements for availability and
    safeguarding of data.
  </p><p>
    This section covers hardware and software requirements; networking
    issues; installation of NDB Cluster; basic configuration issues;
    starting, stopping, and restarting the cluster; loading of a sample
    database; and performing queries.
  </p><p>
    NDB Cluster also provides the NDB Cluster Auto-Installer, a
    web-based graphical installer, as part of the NDB Cluster
    distribution. The Auto-Installer can be used to perform basic
    installation and setup of an NDB Cluster on one (for testing) or
    more host computers. See <a class="xref" href="mysql-cluster.html#mysql-cluster-installer" title="22.2.1 The NDB Cluster Auto-Installer">Section 22.2.1, “The NDB Cluster Auto-Installer”</a>,
    for more information.
  </p><p><b>Assumptions. </b>
      The following sections make a number of assumptions regarding the
      cluster's physical and network configuration. These
      assumptions are discussed in the next few paragraphs.
    </p><p><a name="mysql-cluster-install-nodes-hosts"></a><b>Cluster nodes and host computers. </b>
      The cluster consists of four nodes, each on a separate host
      computer, and each with a fixed network address on a typical
      Ethernet network as shown here:
</p>
<div class="table">
<a name="idm140091607378288"></a><p class="title"><b>Table 22.4 Network addresses of nodes in example cluster</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
        <th scope="col">Node</th>
        <th scope="col">IP Address</th>
      </tr></thead><tbody><tr>
        <td scope="row">Management node (<span class="command"><strong>mgmd</strong></span>)</td>
        <td>198.51.100.10</td>
      </tr><tr>
        <td scope="row">SQL node (<a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>)</td>
        <td>198.51.100.20</td>
      </tr><tr>
        <td scope="row">Data node "A" (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>)</td>
        <td>198.51.100.30</td>
      </tr><tr>
        <td scope="row">Data node "B" (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>)</td>
        <td>198.51.100.40</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
    This setup is also shown in the following diagram:
</p>
<div class="figure">
<a name="fig-mysql-cluster-multi-computer"></a><p class="title"><b>Figure 22.4 NDB Cluster Multi-Computer Setup</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/multi-comp-1.png" width="500" height="393" alt="Most content is described in the surrounding text. The four nodes each connect to a central switch that connects to a network.">
</div>

</div>

</div>
<br class="figure-break"><p><b>Network addressing. </b>
      <a class="indexterm" name="idm140091607350432"></a>

      <a class="indexterm" name="idm140091607348944"></a>

      In the interest of simplicity (and reliability), this
      <em class="citetitle">How-To</em> uses only numeric IP addresses.
      However, if DNS resolution is available on your network, it is
      possible to use host names in lieu of IP addresses in configuring
      Cluster. Alternatively, you can use the <code class="filename">hosts</code>
      file (typically <code class="filename">/etc/hosts</code> for Linux and
      other Unix-like operating systems,
      <code class="filename">C:\WINDOWS\system32\drivers\etc\hosts</code> on
      Windows, or your operating system's equivalent) for providing
      a means to do host lookup if such is available.
    </p><p><b>Potential hosts file issues. </b>
      A common problem when trying to use host names for Cluster nodes
      arises because of the way in which some operating systems
      (including some Linux distributions) set up the system's own
      host name in the <code class="filename">/etc/hosts</code> during
      installation. Consider two machines with the host names
      <code class="literal">ndb1</code> and <code class="literal">ndb2</code>, both in the
      <code class="literal">cluster</code> network domain. Red Hat Linux
      (including some derivatives such as CentOS and Fedora) places the
      following entries in these machines'
      <code class="filename">/etc/hosts</code> files:
    </p><pre data-lang="ini" class="programlisting">
#  ndb1 <code class="filename">/etc/hosts</code>:
127.0.0.1   ndb1.cluster ndb1 localhost.localdomain localhost
</pre><pre data-lang="ini" class="programlisting">
#  ndb2 <code class="filename">/etc/hosts</code>:
127.0.0.1   ndb2.cluster ndb2 localhost.localdomain localhost
</pre><p>
    SUSE Linux (including OpenSUSE) places these entries in the
    machines' <code class="filename">/etc/hosts</code> files:
  </p><pre data-lang="ini" class="programlisting">
#  ndb1 <code class="filename">/etc/hosts</code>:
127.0.0.1       localhost
127.0.0.2       ndb1.cluster ndb1
</pre><pre data-lang="ini" class="programlisting">
#  ndb2 <code class="filename">/etc/hosts</code>:
127.0.0.1       localhost
127.0.0.2       ndb2.cluster ndb2
</pre><p>
    In both instances, <code class="literal">ndb1</code> routes
    <code class="literal">ndb1.cluster</code> to a loopback IP address, but gets a
    public IP address from DNS for <code class="literal">ndb2.cluster</code>,
    while <code class="literal">ndb2</code> routes <code class="literal">ndb2.cluster</code>
    to a loopback address and obtains a public address for
    <code class="literal">ndb1.cluster</code>. The result is that each data node
    connects to the management server, but cannot tell when any other
    data nodes have connected, and so the data nodes appear to hang
    while starting.
</p>
<div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Caution
</div>
<p>
      You cannot mix <code class="literal">localhost</code> and other host names
      or IP addresses in <code class="filename">config.ini</code>. For these
      reasons, the solution in such cases (other than to use IP
      addresses for <span class="emphasis"><em>all</em></span>
      <code class="filename">config.ini</code> <code class="literal">HostName</code>
      entries) is to remove the fully qualified host names from
      <code class="filename">/etc/hosts</code> and use these in
      <code class="filename">config.ini</code> for all cluster hosts.
</p>
</div>
<p><b>Host computer type. </b>
      Each host computer in our installation scenario is an Intel-based
      desktop PC running a supported operating system installed to disk
      in a standard configuration, and running no unnecessary services.
      The core operating system with standard TCP/IP networking
      capabilities should be sufficient. Also for the sake of
      simplicity, we also assume that the file systems on all hosts are
      set up identically. In the event that they are not, you should
      adapt these instructions accordingly.
    </p><p><b>Network hardware. </b>
      Standard 100 Mbps or 1 gigabit Ethernet cards are installed on
      each machine, along with the proper drivers for the cards, and
      that all four hosts are connected through a standard-issue
      Ethernet networking appliance such as a switch. (All machines
      should use network cards with the same throughput. That is, all
      four machines in the cluster should have 100 Mbps cards
      <span class="emphasis"><em>or</em></span> all four machines should have 1 Gbps
      cards.) NDB Cluster works in a 100 Mbps network; however, gigabit
      Ethernet provides better performance.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
      NDB Cluster is <span class="emphasis"><em>not</em></span> intended for use in a
      network for which throughput is less than 100 Mbps or which
      experiences a high degree of latency. For this reason (among
      others), attempting to run an NDB Cluster over a wide area network
      such as the Internet is not likely to be successful, and is not
      supported in production.
</p>
</div>
<p><b>Sample data. </b>
      We use the <code class="literal">world</code> database which is available
      for download from the MySQL website (see
      <a class="ulink" href="https://dev.mysql.com/doc/index-other.html" target="_top">https://dev.mysql.com/doc/index-other.html</a>). We assume that each
      machine has sufficient memory for running the operating system,
      required NDB Cluster processes, and (on the data nodes) storing
      the database.
    </p><p>
    For general information about installing MySQL, see
    <a class="xref" href="installing.html" title="Chapter 2 Installing and Upgrading MySQL">Chapter 2, <i>Installing and Upgrading MySQL</i></a>. For information about installation of
    NDB Cluster on Linux and other Unix-like operating systems, see
    <a class="xref" href="mysql-cluster.html#mysql-cluster-install-linux" title="22.2.2 Installation of NDB Cluster on Linux">Section 22.2.2, “Installation of NDB Cluster on Linux”</a>. For information about
    installation of NDB Cluster on Windows operating systems, see
    <a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows" title="22.2.3 Installing NDB Cluster on Windows">Section 22.2.3, “Installing NDB Cluster on Windows”</a>.
  </p><p>
    For general information about NDB Cluster hardware, software, and
    networking requirements, see
    <a class="xref" href="mysql-cluster.html#mysql-cluster-overview-requirements" title="22.1.3 NDB Cluster Hardware, Software, and Networking Requirements">Section 22.1.3, “NDB Cluster Hardware, Software, and Networking Requirements”</a>.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-installer"></a>22.2.1 The NDB Cluster Auto-Installer</h3>

</div>

</div>

</div>

<div class="toc">
<dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-installer-requirements">22.2.1.1 NDB Cluster Auto-Installer Requirements</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-installer-using">22.2.1.2 Using the NDB Cluster Auto-Installer</a></span></dt></dl>
</div>
<a class="indexterm" name="idm140091607306416"></a><a class="indexterm" name="idm140091607305360"></a><p>
      This section describes the web-based graphical configuration
      installer included as part of the NDB Cluster distribution. Topics
      discussed include an overview of the installer and its parts,
      software and other requirements for running the installer,
      navigating the GUI, and using the installer to set up and start or
      stop an NDB Cluster on one or more host computers.
    </p><a class="indexterm" name="idm140091607303040"></a><p>
      The NDB Cluster Auto-Installer is made up of two components. The
      front end is a GUI client implemented as a Web page that loads and
      runs in a standard Web browser such as Firefox or Microsoft
      Internet Explorer. The back end is a server process
      (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py" title="22.4.26 ndb_setup.py — Start browser-based Auto-Installer for NDB Cluster"><span class="command"><strong>ndb_setup.py</strong></span></a>) that runs on the local machine
      or on another host to which you have access.
    </p><p>
      These two components (client and server) communicate with each
      other using standard HTTP requests and responses. The back end can
      manage NDB Cluster software programs on any host where the back
      end user has granted access. If the NDB Cluster software is on a
      different host, the back end relies on SSH for access, using the
      Paramiko library for executing commands remotely (see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-installer-requirements" title="22.2.1.1 NDB Cluster Auto-Installer Requirements">Section 22.2.1.1, “NDB Cluster Auto-Installer Requirements”</a>).
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-installer-requirements"></a>22.2.1.1 NDB Cluster Auto-Installer Requirements</h4>
</div>
</div>
</div>
<a class="indexterm" name="idm140091607296496"></a><p>
        This section provides information on supported operating
        platforms and software, required software, and other
        prerequisites for running the NDB Cluster Auto-Installer.
      </p><p><b>Supported platforms. </b>
          <a class="indexterm" name="idm140091607293472"></a>

          The NDB Cluster Auto-Installer is available with NDB 8.0
          distributions for recent versions of Linux, Windows, Solaris,
          and MacOS X. For more detailed information about platform
          support for NDB Cluster and the NDB Cluster Auto-Installer,
          see <a class="ulink" href="https://www.mysql.com/support/supportedplatforms/cluster.html" target="_top">https://www.mysql.com/support/supportedplatforms/cluster.html</a>.
        </p><p><b>Supported web browsers. </b>
          <a class="indexterm" name="idm140091607289872"></a>

          The web-based installer is supported with recent versions of
          Firefox and Microsoft Internet Explorer. It should also work
          with recent versions of Opera, Safari, and Chrome, although we
          have not thoroughly tested for compability with these
          browsers.
        </p><p><b>Required software—setup host. </b>
          <a class="indexterm" name="idm140091607286816"></a>

          The following software must be installed on the host where the
          Auto-Installer is run:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Python 2.6 or higher. </b>
              <a class="indexterm" name="idm140091607283488"></a>

              The Auto-Installer requires the Python interpreter and
              standard libraries. If these are not already installed on
              the system, you may be able to add them using the
              system's package manager. Otherwise, you can download
              them from <a class="ulink" href="http://python.org/download/" target="_top">http://python.org/download/</a>.
            </p></li><li class="listitem"><p><b>Paramiko 2 or higher. </b>
              This is required to communicate with remote hosts using
              SSH. You can download it from
              <a class="ulink" href="http://www.lag.net/paramiko/" target="_top">http://www.lag.net/paramiko/</a>. Paramiko may
              also be available from your system's package manager.
            </p></li><li class="listitem"><p><b>Pycrypto version 1.9 or higher. </b>
              This cryptography module is required by Paramiko, and can
              be iunstalled using <code class="literal">pip install
              cryptography</code>. If <code class="literal">pip</code> is not
              installed, and the module is not available using your
              system's package manage, you can download it from
              <a class="ulink" href="https://www.dlitz.net/software/pycrypto/" target="_top">https://www.dlitz.net/software/pycrypto/</a>.
</p></li></ul>
</div>
<p>
        All of the software in the preceding list is included in the
        Windows version of the configuration tool, and does not need to
        be installed separately.
      </p><p>
        The Paramiko and Pycrypto libraries are required only if you
        intend to deploy NDB Cluster nodes on remote hosts, and are not
        needed if all nodes are on the same host where the installer is
        run.
      </p><p><b>Required software—remote hosts. </b>
          <a class="indexterm" name="idm140091607272096"></a>

          The only software required for remote hosts where you wish to
          deploy NDB Cluster nodes is the SSH server, which is usually
          installed by default on Linux and Solaris systems. Several
          alternatives are available for Windows; for an overview of
          these, see
          <a class="ulink" href="http://en.wikipedia.org/wiki/Comparison_of_SSH_servers" target="_top">http://en.wikipedia.org/wiki/Comparison_of_SSH_servers</a>.
        </p><p>
        <a class="indexterm" name="idm140091607269152"></a>

        An additional requirement when using multiple hosts is that it
        is possible to authenticate to any of the remote hosts using SSH
        and the proper keys or user credentials, as discussed in the
        next few paragraphs:
      </p><p><b>Authentication and security. </b>
          <a class="indexterm" name="idm140091607266288"></a>

          Three basic security or authentication mechanisms for remote
          access are available to the Auto-Installer, which we list and
          describe here:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>SSH. </b>
              A secure shell connection is used to enable the back end
              to perform actions on remote hosts. For this reason, an
              SSH server must be running on the remote host. In
              addition, the operating system user running the installer
              must have access to the remote server, either with a user
              name and password, or by using public and private keys.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              You should never use the system <code class="literal">root</code>
              account for remote access, as this is extremely insecure.
              In addition, <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> cannot normally be
              started by system <code class="literal">root</code>. For these and
              other reasons, you should provide SSH credentials for a
              regular user account on the target system, and not for
              system <code class="literal">root</code>. For more information about
              this issue, see <a class="xref" href="security.html#changing-mysql-user" title="6.1.5 How to Run MySQL as a Normal User">Section 6.1.5, “How to Run MySQL as a Normal User”</a>.
</p>
</div>
</li><li class="listitem"><p><b>HTTPS. </b>
              Remote communication between the Web browser front end and
              the back end is not encrypted by default, which means that
              information such as the user's SSH password is
              transmitted as cleartext that is readable to anyone. For
              communication from a remote client to be encrypted, the
              back end must have a certificate, and the front end must
              communicate with the back end using HTTPS rather than
              HTTP. Enabling HTTPS is accomplished most easily through
              issuing a self-signed certificate. Once the certificate is
              issued, you must make sure that it is used. You can do
              this by starting <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py" title="22.4.26 ndb_setup.py — Start browser-based Auto-Installer for NDB Cluster"><span class="command"><strong>ndb_setup.py</strong></span></a> from the
              command line with the
              <a class="link" href="mysql-cluster.html#option_ndb_setup_py_use-https"><code class="option">--use-https</code></a>
              (<code class="option">-S</code>) and
              <a class="link" href="mysql-cluster.html#option_ndb_setup_py_cert-file"><code class="option">--cert-file</code></a>
              (<code class="option">-c</code>) options.
            </p><p>
            A sample certificate file <code class="filename">cfg.pem</code> is
            included and is used by default. This file is located in the
            <code class="filename">mcc</code> directory under the installation
            share directory; on Linux, the full path to the file is
            normally <code class="filename">/usr/share/mysql/mcc/cfg.pem</code>.
            On Windows systems, this is usually <code class="filename">C:\Program
            Files\MySQL\MySQL Server
            8.0\share\mcc\cfg.pem</code>. Letting the
            default be used means that, for testing purposes, you can
            simply start the installer with the <code class="option">-S</code>
            option to use an HTTPS connection between the browser and
            the back end.
          </p><p>
            The Auto-Installer saves the configuration file for a given
            cluster <code class="literal">mycluster01</code> as
            <code class="filename">mycluster01.mcc</code> in the home directory
            of the user invoking the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py" title="22.4.26 ndb_setup.py — Start browser-based Auto-Installer for NDB Cluster"><span class="command"><strong>ndb_setup.py</strong></span></a>
            executable. This file is encrypted with a passphrase
            supplied by the user (using
            <a class="ulink" href="https://cryptography.io/en/latest/fernet/" target="_top">Fernet</a>);
            because HTTP transmits the passphrase in the clear,
            <span class="emphasis"><em>it is strongly recommended that you always use an
            HTTPS connection to access the Auto-Installer on a remote
            host</em></span>.
          </p></li><li class="listitem"><p><b>Certificate-based authentication. </b>
              The back end <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py" title="22.4.26 ndb_setup.py — Start browser-based Auto-Installer for NDB Cluster"><span class="command"><strong>ndb_setup.py</strong></span></a> process can
              execute commands on the local host as well as remote
              hosts. This means that anyone connecting to the back end
              can take charge of how commands are executed. To reject
              unwanted connections to the back end, a certificate may be
              required for authentication of the client. In this case, a
              certificate must be issued by the user, installed in the
              browser, and made available to the back end for
              authentication purposes. You can enact this requirement
              (together with or in place of password or key
              authentication) by starting
              <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py" title="22.4.26 ndb_setup.py — Start browser-based Auto-Installer for NDB Cluster"><span class="command"><strong>ndb_setup.py</strong></span></a> with the
              <a class="link" href="mysql-cluster.html#option_ndb_setup_py_ca-certs-file"><code class="option">--ca-certs-file</code></a>
              (<code class="option">-a</code>) option.
</p></li></ul>
</div>
<p>
        <a class="indexterm" name="idm140091607234224"></a>

        There is no need or requirement for secure authentication when
        the client browser is running on the same host as the
        Auto-Installer back end.
      </p><p>
        See also <a class="xref" href="mysql-cluster.html#mysql-cluster-security" title="22.5.12 NDB Cluster Security Issues">Section 22.5.12, “NDB Cluster Security Issues”</a>, which
        discusses security considerations to take into account when
        deploying NDB Cluster, as well as <a class="xref" href="security.html" title="Chapter 6 Security">Chapter 6, <i>Security</i></a>,
        for more general MySQL security information.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-installer-using"></a>22.2.1.2 Using the NDB Cluster Auto-Installer</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091607229072"></a><p>
        The NDB Cluster Auto-Installer interface is made up of several
        pages, each corresponding to a step in the process used to
        configure and deploy an NDB Cluster. These pages are listed
        here, in order:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-welcome" title="NDB Cluster Auto-Installer Welcome Screen">Welcome</a></strong></span>:
            Begin using the Auto-Installer by choosing either to
            configure a new NDB Cluster, or to continue configuring an
            existing one.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-define-cluster" title="NDB Cluster Auto-Installer Define Cluster Screen">Define
            Cluster</a></strong></span>: Set basic information about the
            cluster as a whole, such as name, hosts, and load type. Here
            you can also set the SSH authentication type for accessing
            remote hosts, if needed.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-define-hosts" title="NDB Cluster Auto-Installer Define Hosts Screen">Define
            Hosts</a></strong></span>: Identify the hosts where you intend
            to run NDB Cluster processes.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-define-processes" title="NDB Cluster Auto-Installer Define Processes Screen">Define
            Processes</a></strong></span>: Assign one or more processes of
            a given type or types to each cluster host.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-define-parameters" title="NDB Cluster Auto-Installer Define Parameters Screen">Define
            Parameters</a></strong></span>: Set configuration attributes
            for processes or types of processes.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-deploy-configuration" title="NDB Cluster Auto-Installer Deploy Configuration Screen">Deploy
            Configuration</a></strong></span>: Deploy the cluster with the
            configuration set previously; start and stop the deployed
            cluster.
</p></li></ul>
</div>
<h5><a name="mysql-install-auto-settings-help-menus"></a>NDB Cluster Installer Settings and Help Menus</h5>
<p>
        These menus are shown on all screens except for the
        <span class="bold"><strong>Welcome</strong></span> screen. They provide
        access to installer settings and information. The
        <span class="guimenu">Settings</span> menu is shown here in more detail:
</p>
<div class="figure">
<a name="fig-mysql-cluster-installer-settings-menu"></a><p class="title"><b>Figure 22.5 NDB Cluster Auto-Installer Settings menu</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/settings-menu.png" width="400" height="300" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"><p>
        The <span class="guimenu">Settings</span> menu has the following entries:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="guimenuitem">Automatically save configuration as
            cookies</span>: Save your configuration
            information—such as host names, process data, and
            parameter values—as a cookie in the browser. When this
            option is chosen, all information except any SSH password is
            saved. This means that you can quit and restart the browser,
            and continue working on the same configuration from where
            you left off at the end of the previous session. This option
            is enabled by default.
          </p><p>
            The SSH password is never saved; if you use one, you must
            supply it at the beginning of each new session.
          </p></li><li class="listitem"><p>
            <span class="guimenuitem">Show advanced configuration
            options</span>: Shows by default advanced
            configuration parameters where available.
          </p><p>
            Once set, the advanced parameters continue to be used in the
            configuration file until they are explicitly changed or
            reset. This is regardless of whether the advanced parameters
            are currently visible in the installer; in other words,
            disabling the menu item does not reset the values of any of
            these parameters.
          </p><p>
            You can also toggle the display of advanced parameters for
            individual processes on the
            <a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-define-parameters" title="NDB Cluster Auto-Installer Define Parameters Screen"><span class="bold"><strong>Define
            Parameters</strong></span> screen</a>.
          </p><p>
            This option is disabled by default.
          </p></li><li class="listitem"><p>
            <span class="guimenuitem">Automatically get resource information for new
            hosts</span>: Query new hosts automatically for
            hardware resource information to pre-populate a number of
            configuration options and values. In this case, the
            suggested values are not mandatory, but they are used unless
            explicitly changed using the appropriate editing options in
            the installer.
          </p><p>
            This option is enabled by default.
</p></li></ul>
</div>
<p>
        The installer <span class="guimenu">Help</span> menu is shown here:
</p>
<div class="figure">
<a name="fig-mysql-cluster-installer-help-menu"></a><p class="title"><b>Figure 22.6 NDB Cluster Auto-Installer Help menu</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/help-menu.png" width="400" height="300" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"><p>
        The <span class="guimenu">Help</span> menu provides several options,
        described in the following list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="guibutton">Contents</span>: Show the built-in user
            guide. This is opened in a separate browser window, so that
            it can be used simultaneously with the installer without
            interrupting workflow.
          </p></li><li class="listitem"><p>
            <span class="guibutton">Current page</span>: Open the built-in user
            guide to the section describing the page currently displayed
            in the installer.
          </p></li><li class="listitem"><p>
            <span class="guibutton">About</span>: open a dialog displaying the
            installer name and the version number of the NDB Cluster
            distribution with which it was supplied.
</p></li></ul>
</div>
<p>
        The Auto-Installer also provides context-sensitive help in the
        form of tooltips for most input widgets.
      </p><p>
        In addition, the names of most NDB configuration parameters are
        linked to their descriptions in the online documentation. The
        documentation is displayed in a separate browser window.
      </p><p>
        The next section discusses starting the Auto-Installer. The
        sections immediately following it describe in greater detail the
        purpose and function of each of these pages in the order listed
        previously.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="mysql-cluster-installer-using-starting"></a>Starting the NDB Cluster Auto-Installer</h5>
</div>
</div>
</div>
<a class="indexterm" name="idm140091607173296"></a><p>
          The Auto-Installer is provided together with the NDB Cluster
          software. Separate RPM and <code class="filename">.deb</code> packages
          containing only the Auto-Installer are also available for many
          Linux distributions. (See
          <a class="xref" href="mysql-cluster.html#mysql-cluster-installation" title="22.2 NDB Cluster Installation">Section 22.2, “NDB Cluster Installation”</a>.)
        </p><p>
          The present section explains how to start the installer. You
          can do by invoking the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py" title="22.4.26 ndb_setup.py — Start browser-based Auto-Installer for NDB Cluster"><span class="command"><strong>ndb_setup.py</strong></span></a>
          executable.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
User and privileges
</div>
<p>
            You should run the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py" title="22.4.26 ndb_setup.py — Start browser-based Auto-Installer for NDB Cluster"><span class="command"><strong>ndb_setup.py</strong></span></a> as a
            normal user; no special privileges are needed to do so. You
            should <span class="emphasis"><em>not</em></span> run this program as the
            <code class="literal">mysql</code> user, or using the system
            <code class="literal">root</code> or Administrator account; doing so
            may cause the installation to fail.
</p>
</div>
<p>
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py" title="22.4.26 ndb_setup.py — Start browser-based Auto-Installer for NDB Cluster"><span class="command"><strong>ndb_setup.py</strong></span></a> is found in the
          <code class="filename">bin</code> within the NDB Cluster installation
          directory; a typical location might be
          <code class="filename">/usr/local/mysql/bin</code> on a Linux system or
          <code class="filename">C:\Program Files\MySQL\MySQL Server
          8.0\bin</code> on a Windows system. This can
          vary according to where the NDB Cluster software is installed
          on your system, and the installation method.
        </p><p>
          On Windows, you can also start the installer by running
          <span class="command"><strong>setup.bat</strong></span> in the NDB Cluster
          installation directory. When invoked from the command line,
          this batch file accepts the same options as
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py" title="22.4.26 ndb_setup.py — Start browser-based Auto-Installer for NDB Cluster"><span class="command"><strong>ndb_setup.py</strong></span></a>.
        </p><a class="indexterm" name="idm140091607156288"></a><a class="indexterm" name="idm140091607154832"></a><p>
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py" title="22.4.26 ndb_setup.py — Start browser-based Auto-Installer for NDB Cluster"><span class="command"><strong>ndb_setup.py</strong></span></a> can be started with any of
          several options that affect its operation, but it is usually
          sufficient to allow the default settings be used, in which
          case you can start <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py" title="22.4.26 ndb_setup.py — Start browser-based Auto-Installer for NDB Cluster"><span class="command"><strong>ndb_setup.py</strong></span></a> by either
          of the following two methods:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
              Navigate to the NDB Cluster <code class="filename">bin</code>
              directory in a terminal and invoke it from the command
              line, without any additional arguments or options, like
              this:
            </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_setup.py</code></strong>
Running out of install dir: /usr/local/mysql/bin
Starting web server on port 8081
URL is https://localhost:8081/welcome.html
deathkey=627876
Press CTRL+C to stop web server.
The application should now be running in your browser.
(Alternatively you can navigate to https://localhost:8081/welcome.html to start it)
</pre><p>
              This works regardless of operating platform.
            </p></li><li class="listitem"><p>
              Navigate to the NDB Cluster <code class="filename">bin</code>
              directory in a file browser (such as Windows Explorer on
              Windows, or Konqueror, Dolphin, or Nautilus on Linux) and
              activate (usually by double-clicking) the
              <span class="guilabel">ndb_setup.py</span> file icon. This works on
              Windows, and should work with most common Linux desktops
              as well.
            </p><p>
              On Windows, you can also navigate to the NDB Cluster
              installation directory and activate the
              <span class="guilabel">setup.bat</span> file icon.
</p></li></ol>
</div>
<p>
          In either case, once <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py" title="22.4.26 ndb_setup.py — Start browser-based Auto-Installer for NDB Cluster"><span class="command"><strong>ndb_setup.py</strong></span></a> is
          invoked, the Auto-Installer's
          <a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-welcome" title="NDB Cluster Auto-Installer Welcome Screen"><span class="bold"><strong>Welcome</strong></span>
          screen</a> should open in the system's default web
          browser. If not, you should be able to open the page
          <code class="uri">http://localhost:8081/welcome.html</code> or
          <code class="uri">https://localhost:8081/welcome.html</code> manually in the
          browser.
        </p><p>
          In some cases, you may wish to use non-default settings for
          the installer, such as specifying HTTPS for connections, or a
          different port for the Auto-Installer's included web
          server to run on, in which case you must invoke
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py" title="22.4.26 ndb_setup.py — Start browser-based Auto-Installer for NDB Cluster"><span class="command"><strong>ndb_setup.py</strong></span></a> with one or more startup
          options with values overriding the necessary defaults. The
          same startup options can be used on Windows systems with the
          <span class="command"><strong>setup.bat</strong></span> file supplied for
          such platforms in the NDB Cluster software distribution. This
          can be done using the command line, but if you want or need to
          start the installer from a desktop or file browser while
          employing one or more of these options, it is also possible to
          create a script or batch file containing the proper
          invocation, then to double-click its file icon in the file
          browser to start the installer. (On Linux systems, you might
          also need to make the script file executable first.) If you
          plan to use the Auto-Installer from a remote host, you should
          start using the <code class="option">-S</code> option. For information
          about this and other advanced startup options for the NDB
          Cluster Auto-Installer, see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py" title="22.4.26 ndb_setup.py — Start browser-based Auto-Installer for NDB Cluster">Section 22.4.26, “<span class="command"><strong>ndb_setup.py</strong></span> — Start browser-based Auto-Installer for
        NDB Cluster”</a>.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="mysql-cluster-installer-using-welcome"></a>NDB Cluster Auto-Installer Welcome Screen</h5>

</div>

</div>

</div>
<a class="indexterm" name="idm140091607130752"></a><p>
          The <span class="bold"><strong>Welcome</strong></span> screen is loaded
          in the default browser when <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py" title="22.4.26 ndb_setup.py — Start browser-based Auto-Installer for NDB Cluster"><span class="command"><strong>ndb_setup.py</strong></span></a> is
          invoked. The first time the Auto-Installer is run (or if for
          some other reason there are no existing configurations), this
          screen appears as shown here:
</p>
<div class="figure">
<a name="fig-mysql-cluster-installer-welcome-first-run"></a><p class="title"><b>Figure 22.7 The NDB Cluster Auto-Installer Welcome screen, first run</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/welcome-first-run.png" width="800" height="600" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"><p>
          In this case, the only choice of cluster listed is for
          configuration of a new cluster, and both the <span class="guibutton">View
          Cfg</span> and <span class="guibutton">Continue</span> buttons
          are inactive.
        </p><p>
          To create a new configuration, enter and confirm a passphrase
          in the text boxes provided. When this has been done, you can
          click <span class="guibutton">Continue</span> to proceed to the
          <span class="bold"><strong>Define Cluster</strong></span> screen where
          you can assign a name to the new cluster.
        </p><p>
          If you have previously created one or more clusters with the
          Auto-Installer, they are listed by name. This example shows an
          existing cluster named <code class="literal">mycluster-1</code>:
</p>
<div class="figure">
<a name="fig-mysql-cluster-installer-welcome-previous-run"></a><p class="title"><b>Figure 22.8 The NDB Cluster Auto-Installer Welcome screen, with previously created
cluster mycluster-1</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/welcome-previous-run.png" width="800" height="600" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"><p>
          To view the configuration for and work with a given cluster,
          select the radiobutton next to its name in the list, then
          enter and confirm the passphrase that was used to create it.
          When you have done this correctly, you can click
          <span class="guibutton">View Cfg</span> to view and edit this
          cluster's configuration.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="mysql-cluster-installer-using-define-cluster"></a>NDB Cluster Auto-Installer Define Cluster Screen</h5>

</div>

</div>

</div>
<a class="indexterm" name="idm140091607104960"></a><p>
          The <span class="bold"><strong>Define Cluster</strong></span> screen is
          appears following the
          <a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-welcome" title="NDB Cluster Auto-Installer Welcome Screen"><span class="bold"><strong>Welcome</strong></span>
          screen</a>, and is used for setting general properties of
          the cluster. The layout of the <span class="bold"><strong>Define
          Cluster</strong></span> screen is shown here:
</p>
<div class="figure">
<a name="fig-mysql-cluster-installer-define-cluster-start"></a><p class="title"><b>Figure 22.9 The NDB Cluster Auto-Installer Define Cluster screen</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/define-cluster-start.png" width="800" height="600" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"><p>
          This screen and subsequent screens also include
          <span class="guilabel">Settings</span> and <span class="guilabel">Help</span>
          menus which are described later in this section; see
          <a class="xref" href="mysql-cluster.html#mysql-install-auto-settings-help-menus" title="NDB Cluster Installer Settings and Help Menus">NDB Cluster Installer Settings and Help Menus</a>.
        </p><p>
          The <span class="bold"><strong>Define Cluster</strong></span> screen
          allows you to set three sorts of properties for the cluster:
          cluster properties, SSH properties, and installation
          properties.
        </p><p>
          Cluster properties that can be set on this screen are listed
          here:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <span class="guilabel">Cluster name</span>: A name that identifies
              the cluster; in this example, this is
              <code class="literal">mycluster-1</code>. The name is set on the
              previous screen and cannot be changed here.
            </p></li><li class="listitem"><p>
              <span class="guilabel">Host list</span>: A comma-delimited list of
              one or more hosts where cluster processes should run. By
              default, this is <code class="literal">127.0.0.1</code>. If you add
              remote hosts to the list, you must be able to connect to
              them using the credentials supplied as SSH properties.
            </p></li><li class="listitem"><p>
              <span class="guilabel">Application type</span>: Choose one of the
              following:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
                  <span class="guimenuitem">Simple testing</span>: Minimal
                  resource usage for small-scale testing. This the
                  default. <span class="emphasis"><em>Not intended for production
                  environments</em></span>.
                </p></li><li class="listitem"><p>
                  <span class="guimenuitem">Web</span>: Maximize performance
                  for the given hardware.
                </p></li><li class="listitem"><p>
                  <span class="guimenuitem">Real-time</span>: Maximize
                  performance while maximizing sensitivity to timeouts
                  in order to minimize the time needed to detect failed
                  cluster processes.
</p></li></ol>
</div>
</li><li class="listitem"><p>
              <span class="guilabel">Write load</span>: Choose a level for the
              anticipated number of writes for the cluster as a whole.
              You can choose any one of the following levels:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
                  <span class="guimenuitem">Low</span>: The expected load
                  includes fewer than 100 write transactions for second.
                </p></li><li class="listitem"><p>
                  <span class="guimenuitem">Medium</span>: The expected load
                  includes 100 to 1000 write transactions per second;
                  this is the default.
                </p></li><li class="listitem"><p>
                  <span class="guimenuitem">High</span>: The expected load
                  includes more than 1000 write transactions per second.
</p></li></ol>
</div>
</li></ul>
</div>
<p>
          SSH properties are described in the following list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <span class="guilabel">Key-Based SSH</span>: Check this box to use
              key-enabled login to the remote host. If checked, the key
              user and passphrase must also be supplied; otherwise, a
              user and password for a remote login account are needed.
            </p></li><li class="listitem"><p>
              <span class="guilabel">User</span>: Name of user with remote login
              access.
            </p></li><li class="listitem"><p>
              <span class="guilabel">Password</span>: Password for remote user.
            </p></li><li class="listitem"><p>
              <span class="guilabel">Key user</span>: Name of the user for whom
              the key is valid, if not the same as the operating system
              user.
            </p></li><li class="listitem"><p>
              <span class="guilabel">Key passphrase</span>: Passphrase for the
              key, if required.
            </p></li><li class="listitem"><p>
              <span class="guilabel">Key file</span>: Path to the key file. The
              default is <code class="filename">~/.ssh/id_rsa</code>.
</p></li></ul>
</div>
<p>
          The SSH properties set on this page apply to all hosts in the
          cluster. They can be overridden for a given host by editing
          that hosts's properties on the
          <span class="bold"><strong>Define Hosts</strong></span> screen.
        </p><p>
          Two installation properties can also be set on this screen:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <span class="guilabel">Install MySQL Cluster</span>: This setting
              determines the source from which the Auto-Installer
              installs NDB Cluster software, if any, on the cluster
              hosts. Possible values and their effects are listed here:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
                  <code class="literal">DOCKER</code>: Try to install the MySQL
                  Cluster Docker image from
                  <code class="uri">https://hub.docker.com/r/mysql/mysql-cluster/</code>
                  on each host
                </p></li><li class="listitem"><p>
                  <code class="literal">REPO</code>: Try to install the NDB
                  Cluster software from the
                  <a class="ulink" href="https://repo.mysql.com/" target="_top">MySQL
                  Repositories</a> on each host
                </p></li><li class="listitem"><p>
                  <code class="literal">BOTH</code>: Try to install either the
                  Docker image or the software from the repository on
                  each host, giving preference to the repository
                </p></li><li class="listitem"><p>
                  <code class="literal">NONE</code>: Do not install the NDB
                  Cluster software on the hosts; this is the default
</p></li></ol>
</div>
</li><li class="listitem"><p>
              <span class="guilabel">Open FW Ports</span>: Check this checkbox to
              have the installer attempt to open ports required by NDB
              CLuster processes on all hosts.
</p></li></ul>
</div>
<p>
          The next figure shows the <span class="bold"><strong>Define
          Cluster</strong></span> page with settings for a small test cluster
          with all nodes running on <code class="literal">localhost</code>:
</p>
<div class="figure">
<a name="fig-mysql-cluster-installer-define-cluster-local-setup"></a><p class="title"><b>Figure 22.10 The NDB Cluster Auto-Installer Define Cluster screen, with settings for
a test cluster</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/define-cluster-local-setup.png" width="800" height="800" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"><p>
          After making the desired settings, you can save them to the
          configuration file and proceed to the
          <span class="bold"><strong>Define Hosts</strong></span> screen by
          clicking the <span class="guibutton">Save &amp; Next</span> button.
        </p><p>
          If you exit the installer without saving, no changes are made
          to the configuration file.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="mysql-cluster-installer-using-define-hosts"></a>NDB Cluster Auto-Installer Define Hosts Screen</h5>

</div>

</div>

</div>
<a class="indexterm" name="idm140091607029968"></a><p>
          The <span class="bold"><strong>Define Hosts</strong></span> screen,
          shown here, provides a means of viewing and specifying several
          key properties of each cluster host:
</p>
<div class="figure">
<a name="fig-mysql-cluster-installer-define-hosts-start"></a><p class="title"><b>Figure 22.11 NDB Cluster Define Hosts screen, start</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/define-hosts-start.png" width="1000" height="600" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"><p>
          Properties shown include the following:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <span class="guilabel">Host</span>: Name or IP address of this host
            </p></li><li class="listitem"><p>
              <span class="guilabel">Res.info</span>: Shows <code class="literal">OK</code>
              if the installer was able to retrieve requested resource
              information from this host
            </p></li><li class="listitem"><p>
              <span class="guilabel">Platform</span>: Operating system or
              platform
            </p></li><li class="listitem"><p>
              <span class="guilabel">Memory (MB)</span>: Amount of RAM on this
              host
            </p></li><li class="listitem"><p>
              <span class="guilabel">Cores</span>: Number of CPU cores available
              on this host
            </p></li><li class="listitem"><p>
              <span class="guilabel">MySQL Cluster install directory</span>: Path
              to directory where the NDB Cluster software is installed
              on this host; defaults to
              <code class="filename">/usr/local/bin</code>
            </p></li><li class="listitem"><p>
              <span class="guilabel">MySQL Cluster data directory</span>: Path to
              directory used for data by NDB Cluster processes on this
              host; defaults to
              <code class="filename">/var/lib/mysql-cluster</code>.
            </p></li><li class="listitem"><p>
              <span class="guilabel">DiskFree</span>: Free disk space in bytes
            </p><p>
              For hosts with multiple disks, only the space available on
              the disk used for the data directory is shown.
</p></li></ul>
</div>
<p>
          This screen also provides an extended view for each host that
          includes the following properties:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <span class="guilabel">FDQN</span>: This host's fully
              qualified domain name, used by the installer to connect
              with it, distribute configuration information to it, and
              start and stop cluster processes on it.
            </p></li><li class="listitem"><p>
              <span class="guilabel">Internal IP</span>: The IP address used for
              communication with cluster processes running on this host
              by processes running elsewhere.
            </p></li><li class="listitem"><p>
              <span class="guilabel">OS Details</span>: Detailed operating system
              name and version information.
            </p></li><li class="listitem"><p>
              <span class="guilabel">Open FW</span>: If this checkbox is enabled,
              the installer attempts to open ports in the host's
              firewall needed by cluster processes.
            </p></li><li class="listitem"><p>
              <span class="guilabel">REPO URL</span>: URL for MySQL NDB Cluster
              repository
            </p></li><li class="listitem"><p>
              <span class="guilabel">DOCKER URL</span>: URL for MySQL NDB CLuster
              Docker images; for NDB 8.0, this is
              <code class="literal">mysql/mysql-cluster:8.0</code>.
            </p></li><li class="listitem"><p>
              <span class="guilabel">Install</span>: If this checkbox is enabled,
              the Auto-Installer attempts to install the NDB Cluster
              software on this host
</p></li></ul>
</div>
<p>
          The extended view is shown here:
</p>
<div class="figure">
<a name="fig-mysql-cluster-installer-define-hosts-extended"></a><p class="title"><b>Figure 22.12 NDB Cluster Define Hosts screen, extended host info view</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/define-hosts-extended.png" width="1000" height="600" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"><p>
          All cells in the display are editable, with the exceptions of
          those in the <span class="guilabel">Host</span>,
          <span class="guilabel">Res.info</span>, and <span class="guilabel">FQDN</span>
          columns.
        </p><p>
          Be aware that it may take some time for information to be
          retrieved from remote hosts. Fields for which no value could
          be retrieved are indicated with an ellipsis
          (<code class="literal">…</code>). You can retry the fetching of
          resource information from one or more hosts by selecting the
          hosts in the list and then clicking the <span class="guilabel">Refresh
          selected host(s)</span> button.
        </p><a class="indexterm" name="idm140091606976224"></a><h6><a name="idm140091606974704"></a>Adding and Removing Hosts</h6><p>
          You can add one or more hosts by clicking the <span class="guibutton">Add
          Host</span> button and entering the required properties
          where indicated in the <span class="guilabel">Add new host</span>
          dialog, shown here:
</p>
<div class="figure">
<a name="fig-mysql-cluster-installer-add-host-widget"></a><p class="title"><b>Figure 22.13 NDB Cluster Add Host dialog</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/add-host-widget.png" width="250" height="405" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"><p>
          This dialog includes the following fields:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <span class="guilabel">Host name</span>: A comma-separated list of
              one or more host names, IP addresses, or both. These must
              be accessible from the host where the Auto-Installer is
              running.
            </p></li><li class="listitem"><p>
              <span class="guilabel">Host internal IP (VPN)</span>: If you are
              setting up the cluster to run on a VPN or other internal
              network, enter the IP address or addresses used for
              contact by cluster nodes on other hosts.
            </p></li><li class="listitem"><p>
              <span class="guilabel">Key-based auth</span>: If checked, enables
              key-based authentication. You can enter any additional
              needed information in the <span class="guilabel">User</span>,
              <span class="guilabel">Passphrase</span>, and <span class="guilabel">Key
              file</span> fields.
            </p></li><li class="listitem"><p>
              <span class="guilabel">Ordinary login</span>: If accessing this
              host using a password-based login, enter the appropriate
              information in the <span class="guilabel">User</span> and
              <span class="guilabel">Password</span> fields.
            </p></li><li class="listitem"><p>
              <span class="guilabel">Open FW ports</span>: Selecting this
              checkbox allows the installer try opening any ports needed
              by cluster processes in this host's firewall.
            </p></li><li class="listitem"><p>
              <span class="guilabel">Configure installation</span>: Checking this
              allows the Auto-Install to attempt to set up the NDB
              Cluster software on this host.
</p></li></ul>
</div>
<p>
          To save the new host and its properties, click
          <span class="guilabel">Add</span>. If you wish to cancel without saving
          any changes, click <span class="guilabel">Cancel</span> instead.
        </p><p>
          Similarly, you can remove one or more hosts using the button
          labelled <span class="guibutton">Remove selected host(s)</span>.
          <span class="emphasis"><em>When you remove a host, any process which was
          configured for that host is also removed</em></span>.
</p>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Warning
</div>
<p>
            <span class="guibutton">Remove selected host(s)</span> acts
            immediately. There is no confirmation dialog. If you remove
            a host in error, you must re-enter its name and properties
            manually using <span class="guibutton">Add host</span>.
</p>
</div>
<p>
          If the SSH user credentials on the
          <a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-define-cluster" title="NDB Cluster Auto-Installer Define Cluster Screen"><span class="emphasis"><em>Define
          Cluster</em></span> screen</a> are changed, the
          Auto-Installer attempts to refresh the resource information
          from any hosts for which information is missing.

          

        </p><p>
          You can edit the host's platform name, hardware resource
          information, installation directory, and data directory by
          clicking the corresponding cell in the grid, by selecting one
          or more hosts and clicking the button labelled <span class="guilabel">Edit
          selected host(s)</span>. This causes a dialog box to
          appear, in which these fields can be edited, as shown here:
</p>
<div class="figure">
<a name="fig-mysql-cluster-installer-edit-hosts-widget"></a><p class="title"><b>Figure 22.14 NDB Cluster Auto-Installer Edit Hosts dialog</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/edit-host-widget.png" width="650" height="525" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"><p>
          When more than one host is selected, any edited values are
          applied to all selected hosts.
        </p><p>
          Once you have entered all desired host information, you can
          use the <span class="guibutton">Save &amp; Next</span> button to save
          the information to the cluster's configuration file and
          proceed to the
          <a class="link" href="mysql-cluster.html#fig-mysql-cluster-installer-define-processes" title="Figure 22.15 NDB Cluster Auto-Installer Define Processes dialog"><span class="bold"><strong>Define
          Processes</strong></span> screen</a>, where you can set up NDB
          Cluster processes on one or more hosts.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="mysql-cluster-installer-using-define-processes"></a>NDB Cluster Auto-Installer Define Processes Screen</h5>

</div>

</div>

</div>
<a class="indexterm" name="idm140091606929200"></a><p>
          The <span class="bold"><strong>Define Processes</strong></span> screen,
          shown here, provides a way to assign NDB Cluster processes
          (nodes) to cluster hosts:
</p>
<div class="figure">
<a name="fig-mysql-cluster-installer-define-processes"></a><p class="title"><b>Figure 22.15 NDB Cluster Auto-Installer Define Processes dialog</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/define-processes-start.png" width="600" height="435" alt='Content is described in the surrounding text. The example process tree topology includes "Any host" and "localhost", as defined earlier. The localhost tree includes the following processes: Management mode 1, API node 1, API node 2, API node 3, SQL node 1, SQL node 2, Multi threaded data node 1, and Multi threaded data node 2. This panel also includes "Add process" and "Del[ete] process" buttons.'>
</div>

</div>

</div>
<br class="figure-break"><p>
          This screen contains a process tree showing cluster hosts and
          processes set up to run on each one, as well as a panel which
          displays information about the item currently selected in the
          tree.
        </p><p>
          When this screen is accessed for the first time for a given
          cluster, a default set of processes is defined for you, based
          on the number of hosts. If you later return to the
          <a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-define-hosts" title="NDB Cluster Auto-Installer Define Hosts Screen"><span class="bold"><strong>Define
          Hosts</strong></span> screen</a>, remove all hosts, and add new
          hosts, this also causes a new default set of processes to be
          defined.
        </p><p>
          NDB Cluster processes are of the types described in this list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Management node. </b>
                Performs administrative tasks such as stopping
                individual data nodes, querying node and cluster status,
                and making backups. Executable:
                <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>.
              </p></li><li class="listitem"><p><b>Single-threaded data node. </b>
                Stores data and executes queries. Executable:
                <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>.
              </p></li><li class="listitem"><p><b>Multi threaded data node. </b>
                Stores data and executes queries with multiple worker
                threads executing in parallel. Executable:
                <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>.
              </p></li><li class="listitem"><p><b>SQL node. </b>
                MySQL server for executing SQL queries against
                <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>. Executable:
                <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>.
              </p></li><li class="listitem"><p><b>API node. </b>
                A client accessing data in
                <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> by means of the NDB API
                or other low-level client API, rather than by using SQL.
                See <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/" target="_top">MySQL NDB Cluster API Developer Guide</a>, for more information.
</p></li></ul>
</div>
<p>
          For more information about process (node) types, see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-basics" title="22.1.1 NDB Cluster Core Concepts">Section 22.1.1, “NDB Cluster Core Concepts”</a>.
        </p><p>
          Processes shown in the tree are numbered sequentially by type,
          for each host—for example, <code class="literal">SQL node
          1</code>, <code class="literal">SQL node 2</code>, and so on—to
          simplify identification.
        </p><p>
          Each management node, data node, or SQL process must be
          assigned to a specific host, and is not allowed to run on any
          other host. An API node <span class="emphasis"><em>may</em></span> be assigned
          to a single host, but this is not required. Instead, you can
          assign it to the special <span class="guimenuitem">Any host</span>
          entry which the tree also contains in addition to any other
          hosts, and which acts as a placeholder for processes that are
          allowed to run on any host. <span class="emphasis"><em>Only API processes may
          use this <span class="guimenuitem">Any host</span> entry</em></span>.
        </p><p><b>Adding processes. </b>
            <a class="indexterm" name="idm140091606891328"></a>

            To add a new process to a given host, either right-click
            that host's entry in the tree, then select the
            <span class="guilabel">Add process</span> popup when it appears, or
            select a host in the process tree, and press the
            <span class="guibutton">Add process</span> button below the process
            tree. Performing either of these actions opens the add
            process dialog, as shown here:
</p>
<div class="figure">
<a name="fig-mysql-cluster-installer-add-process"></a><p class="title"><b>Figure 22.16 NDB Cluster Auto-Installer Add Process Dialog</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/add-process-widget.png" width="600" height="300" alt='Most content is described in the surrounding text. Shows a window titled "Add new process" with two options: "Select process type:" that shows a select box with "API node" selected, and "Enter process name:" with "API node 4" entered as plain text. Action buttons include "Cancel" and "Add".'>
</div>

</div>

</div>
<br class="figure-break"><p>
          Here you can select from among the available process types
          described earlier this section; you can also enter an
          arbitrary process name to take the place of the suggested
          value, if desired.
        </p><p><b>Removing processes. </b>
            <a class="indexterm" name="idm140091606879152"></a>

            To delete a process, select that process in the tree and use
            the <span class="guibutton">Del process</span> button.
          </p><p>
          When you select a process in the process tree, information
          about that process is displayed in the information panel,
          where you can change the process name and possibly its type.
          You can change a multi-threaded data node
          (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>) to a single-threaded data node
          (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>), or the reverse, only; no other
          process type changes are allowed. <span class="emphasis"><em>If you want to
          make a change between any other process types, you must delete
          the original process first, then add a new process of the
          desired type</em></span>.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="mysql-cluster-installer-using-define-parameters"></a>NDB Cluster Auto-Installer Define Parameters Screen</h5>

</div>

</div>

</div>
<a class="indexterm" name="idm140091606871328"></a><p>
          Like the
          <a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-define-processes" title="NDB Cluster Auto-Installer Define Processes Screen"><span class="bold"><strong>Define
          Processes</strong></span> screen</a>, this screen includes a
          process tree; the <span class="bold"><strong>Define
          Parameters</strong></span> process tree is organized by process or
          node type, in groups labelled <span class="guimenu">Management
          Layer</span>, <span class="guimenu">Data Layer</span>, <span class="guimenu">SQL
          Layer</span>, and <span class="guimenu">API Layer</span>. An
          information panel displays information regarding the item
          currently selected. The <span class="bold"><strong>Define
          Attributes</strong></span> screen is shown here:
</p>
<div class="figure">
<a name="fig-mysql-cluster-installer-define-parameters-start"></a><p class="title"><b>Figure 22.17 NDB Cluster Auto-Installer Define Parameters screen</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/define-parameters-start.png" width="800" height="600" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"><p>
          The checkbox labelled <span class="guilabel">Show advanced
          configuration</span>, when checked, makes advanced options
          for data node and SQL node processes visible in the
          information pane. These options are set and used whether or
          not they are visible. You can also enable this behavior
          globally by checking <span class="guimenuitem">Show advanced configuration
          options</span> under <span class="guilabel">Settings</span> (see
          <a class="xref" href="mysql-cluster.html#mysql-install-auto-settings-help-menus" title="NDB Cluster Installer Settings and Help Menus">NDB Cluster Installer Settings and Help Menus</a>).
        </p><p>
          You can edit attributes for a single process by selecting that
          process from the tree, or for all processes of the same type
          in the cluster by selecting one of the
          <span class="guimenu">Layer</span> folders. A per-process value set for
          a given attribute overrides any per-group setting for that
          attribute that would otherwise apply to the process in
          question. An example of such an information panel (for an SQL
          process) is shown here:
</p>
<div class="figure">
<a name="fig-mysql-cluster-installer-define-parameters-process"></a><p class="title"><b>Figure 22.18 Define Parameters—Process Attributes</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/define-parameters-process.png" width="800" height="675" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"><p>
          Attributes whose values can be overridden are shown in the
          information panel with a button bearing a plus sign. This
          <span class="guibutton">+</span> button activates an input widget for
          the attribute, enabling you to change its value. When the
          value has been overridden, this button changes into a button
          showing an <span class="guibutton">X</span>. The
          <span class="guibutton">X</span> button undoes any changes made to a
          given attribute, which immediately reverts to the predefined
          value.
        </p><p>
          All configuration attributes have predefined values calculated
          by the installer, based such factors as host name, node ID,
          node type, and so on. In most cases, these values may be left
          as they are. If you are not familiar with it already, it is
          highly recommended that you read the applicable documentation
          before making changes to any of the attribute values. To make
          finding this information easier, each attribute name shown in
          the information panel is linked to its description in the
          online NDB Cluster documentation.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="mysql-cluster-installer-using-deploy-configuration"></a>NDB Cluster Auto-Installer Deploy Configuration Screen</h5>

</div>

</div>

</div>
<a class="indexterm" name="idm140091606839536"></a><p>
          This screen allows you to perform the following tasks:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              Review process startup commands and configuration files to
              be applied
            </p></li><li class="listitem"><p>
              Distribute configuration files by creating any necessary
              files and directories on all cluster hosts—that is,
              <span class="emphasis"><em>deploy</em></span> the cluster as presently
              configured
            </p></li><li class="listitem"><p>
              Start and stop the cluster
</p></li></ul>
</div>
<p>
          The <span class="bold"><strong>Deploy Configuration</strong></span>
          screen is shown here:
</p>
<div class="figure">
<a name="fig-mysql-cluster-installer-deploy-configuration"></a><p class="title"><b>Figure 22.19 NDB Cluster Auto-Installer Deploy Configuration screen</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/deploy-configuration-start.png" width="800" height="675" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"><p>
          Like the
          <a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-define-parameters" title="NDB Cluster Auto-Installer Define Parameters Screen"><span class="bold"><strong>Define
          Parameters</strong></span> screen</a>, this screen features a
          process tree which is organized by process type. Next to each
          process in the tree is a status icon indicating the current
          status of the process: connected
          (<code class="literal">CONNECTED</code>), starting
          (<code class="literal">STARTING</code>), running
          (<code class="literal">STARTED</code>), stopping
          (<code class="literal">STOPPING</code>), or disconnected
          (<code class="literal">NO_CONTACT</code>). The icon shows green if the
          process is connected or running; yellow if it is starting or
          stopping; red if the process is stopped or cannot be contacted
          by the management server.
        </p><p>
          This screen also contains two information panels, one showing
          the startup command or commands needed to start the selected
          process. (For some processes, more than one command may be
          required—for example, if initialization is necessary.)
          The other panel shows the contents of the configuration file,
          if any, for the given process.
        </p><p>
          This screen also contains four buttons, labelled as and
          performing the functions described in the following list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <span class="guibutton">Install cluster</span>: Nonfunctional in
              this release; implementation intended for a future
              release.
            </p></li><li class="listitem"><p>
              <span class="guibutton">Deploy cluster</span>: Verify that the
              configuration is valid. Create any directories required on
              the cluster hosts, and distribute the configuration files
              onto the hosts. A progress bar shows how far the
              deployment has proceeded, as shown here, and a dialog is
              pisplayed when the deployment has completed, as shown
              here:
</p>
<div class="figure">
<a name="fig-mysql-cluster-installer-deploy-configuration-deploy-cluster"></a><p class="title"><b>Figure 22.20 Cluster Deployment Process</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/deploy-configuration-deploy-cluster.png" width="800" height="675" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"></li><li class="listitem"><p>
              <span class="guibutton">Start cluster</span>: The cluster is
              deployed as with <span class="guibutton">Deploy cluster</span>,
              after which all cluster processes are started in the
              correct order.
            </p><p>
              Starting these processes may take some time. If the
              estimated time to completion is too large, the installer
              provides an opportunity to cancel or to continue of the
              startup procedure. A progress bar indicates the current
              status of the startup procedure, as shown here:
</p>
<div class="figure">
<a name="fig-mysql-cluster-installer-deploy-configuration-start-cluster"></a><p class="title"><b>Figure 22.21 Cluster Startup Process with Progress Bar</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/deploy-configuration-start-cluster.png" width="800" height="675" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"><p>
              The process status icons next to the items shown in the
              process tree also update with the status of each process.
            </p><p>
              A confirmation dialog is shown when the startup process
              has completed, as shown here:
</p>
<div class="figure">
<a name="fig-mysql-cluster-installer-deploy-configuration-start-cluster-started"></a><p class="title"><b>Figure 22.22 Cluster Startup, Process Completed Dialog</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/deploy-configuration-start-cluster-started.png" width="800" height="675" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"></li><li class="listitem"><p>
              <span class="guibutton">Stop cluster</span>: After the cluster has
              been started, you can stop it using this. As with starting
              the cluster, cluster shutdown is not instantaneous, and
              may require some time complete. A progress bar, similar to
              that displayed during cluster startup, shows the
              approximate current status of the cluster shutdown
              procedure, as do the process status icons adjoining the
              process tree. The progress bar is shown here:
</p>
<div class="figure">
<a name="fig-mysql-cluster-installer-deploy-configuration-stop-cluster"></a><p class="title"><b>Figure 22.23 Cluster Shutdown Process, with Progress Bar</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/deploy-configuration-stop-cluster.png" width="800" height="675" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"><p>
              A confirmation dialog indicates when the shutdown process
              is complete:
</p>
<div class="figure">
<a name="fig-mysql-cluster-installer-deploy-configuration-stop-cluster-stopped"></a><p class="title"><b>Figure 22.24 Cluster Shutdown, Process Completed Dialog</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/deploy-configuration-stop-cluster-stopped.png" width="800" height="675" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"></li></ul>
</div>
<p>
          The Auto-Installer generates a <code class="filename">config.ini</code>
          file containing NDB node parameters for each management node,
          as well as a <code class="filename">my.cnf</code> file containing the
          appropriate options for each <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> process
          in the cluster. No configuration files are created for data
          nodes or API nodes.
</p>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-install-linux"></a>22.2.2 Installation of NDB Cluster on Linux</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-linux-binary">22.2.2.1 Installing an NDB Cluster Binary Release on Linux</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-linux-rpm">22.2.2.2 Installing NDB Cluster from RPM</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-debian">22.2.2.3 Installing NDB Cluster Using .deb Files</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-linux-source">22.2.2.4 Building NDB Cluster from Source on Linux</a></span></dt></dl>
</div>
<a class="indexterm" name="idm140091606768976"></a><a class="indexterm" name="idm140091606767488"></a><p>
      This section covers installation methods for NDB Cluster on Linux
      and other Unix-like operating systems. While the next few sections
      refer to a Linux operating system, the instructions and procedures
      given there should be easily adaptable to other supported
      Unix-like platforms. For manual installation and setup
      instructions specific to Windows systems, see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows" title="22.2.3 Installing NDB Cluster on Windows">Section 22.2.3, “Installing NDB Cluster on Windows”</a>.
    </p><p>
      Each NDB Cluster host computer must have the correct executable
      programs installed. A host running an SQL node must have installed
      on it a MySQL Server binary (<a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>).
      Management nodes require the management server daemon
      (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>); data nodes require the data node
      daemon (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> or <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>). It
      is not necessary to install the MySQL Server binary on management
      node hosts and data node hosts. It is recommended that you also
      install the management client (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a>) on the
      management server host.
    </p><p>
      Installation of NDB Cluster on Linux can be done using precompiled
      binaries from Oracle (downloaded as a .tar.gz archive), with RPM
      packages (also available from Oracle), or from source code. All
      three of these installation methods are described in the section
      that follow.
    </p><p>
      Regardless of the method used, it is still necessary following
      installation of the NDB Cluster binaries to create configuration
      files for all cluster nodes, before you can start the cluster. See
      <a class="xref" href="mysql-cluster.html#mysql-cluster-install-configuration" title="22.2.4 Initial Configuration of NDB Cluster">Section 22.2.4, “Initial Configuration of NDB Cluster”</a>.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-install-linux-binary"></a>22.2.2.1 Installing an NDB Cluster Binary Release on Linux</h4>
</div>
</div>
</div>
<a class="indexterm" name="idm140091606753920"></a><a class="indexterm" name="idm140091606752432"></a><p>
        This section covers the steps necessary to install the correct
        executables for each type of Cluster node from precompiled
        binaries supplied by Oracle.
      </p><p>
        For setting up a cluster using precompiled binaries, the first
        step in the installation process for each cluster host is to
        download the binary archive from the
        <a class="ulink" href="https://dev.mysql.com/downloads/cluster/" target="_top">NDB Cluster downloads
        page</a>. (For the most recent 64-bit NDB 8.0 release, this
        is
        <code class="filename">mysql-cluster-gpl-8.0.17-linux-glibc2.12-x86_64.tar.gz</code>.)
        We assume that you have placed this file in each machine's
        <code class="filename">/var/tmp</code> directory.
      </p><p>
        If you require a custom binary, see
        <a class="xref" href="installing.html#installing-development-tree" title="2.9.3 Installing MySQL Using a Development Source Tree">Section 2.9.3, “Installing MySQL Using a Development Source Tree”</a>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          After completing the installation, do not yet start any of the
          binaries. We show you how to do so following the configuration
          of the nodes (see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-install-configuration" title="22.2.4 Initial Configuration of NDB Cluster">Section 22.2.4, “Initial Configuration of NDB Cluster”</a>).
</p>
</div>
<p><b>SQL nodes. </b>
          On each of the machines designated to host SQL nodes, perform
          the following steps as the system <code class="literal">root</code>
          user:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Check your <code class="filename">/etc/passwd</code> and
            <code class="filename">/etc/group</code> files (or use whatever tools
            are provided by your operating system for managing users and
            groups) to see whether there is already a
            <code class="literal">mysql</code> group and <code class="literal">mysql</code>
            user on the system. Some OS distributions create these as
            part of the operating system installation process. If they
            are not already present, create a new
            <code class="literal">mysql</code> user group, and then add a
            <code class="literal">mysql</code> user to this group:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>groupadd mysql</code></strong>
shell&gt; <strong class="userinput"><code>useradd -g mysql -s /bin/false mysql</code></strong>
</pre><p>
            The syntax for <span class="command"><strong>useradd</strong></span> and
            <span class="command"><strong>groupadd</strong></span> may differ slightly on different
            versions of Unix, or they may have different names such as
            <span class="command"><strong>adduser</strong></span> and <span class="command"><strong>addgroup</strong></span>.
          </p></li><li class="listitem"><p>
            Change location to the directory containing the downloaded
            file, unpack the archive, and create a symbolic link named
            <code class="filename">mysql</code> to the <code class="filename">mysql</code>
            directory.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              The actual file and directory names vary according to the
              NDB Cluster version number.
</p>
</div>
<pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>cd /var/tmp</code></strong>
shell&gt; <strong class="userinput"><code>tar -C /usr/local -xzvf mysql-cluster-gpl-8.0.17-linux-glibc2.12-x86_64.tar.gz</code></strong>
shell&gt; <strong class="userinput"><code>ln -s /usr/local/mysql-cluster-gpl-8.0.17-linux-glibc2.12-x86_64 /usr/local/mysql</code></strong>
</pre></li><li class="listitem"><p>
            Change location to the <code class="filename">mysql</code> directory
            and set up the system databases using
            <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>
            <a class="link" href="server-administration.html#option_mysqld_initialize"><code class="option">--initialize</code></a> as shown here:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>cd mysql</code></strong>
shell&gt; <strong class="userinput"><code>mysqld --initialize</code></strong>
</pre><p>
            This generates a random password for the MySQL
            <code class="literal">root</code> account. If you do
            <span class="emphasis"><em>not</em></span> want the random password to be
            generated, you can substitute the
            <a class="link" href="server-administration.html#option_mysqld_initialize-insecure"><code class="option">--initialize-insecure</code></a> option
            for <code class="option">--initialize</code>. In either case, you
            should review
            <a class="xref" href="installing.html#data-directory-initialization" title="2.10.1 Initializing the Data Directory">Section 2.10.1, “Initializing the Data Directory”</a>, for
            additional information before performing this step. See also
            <a class="xref" href="programs.html#mysql-secure-installation" title="4.4.2 mysql_secure_installation — Improve MySQL Installation Security">Section 4.4.2, “<span class="command"><strong>mysql_secure_installation</strong></span> — Improve MySQL Installation Security”</a>.
          </p></li><li class="listitem"><p>
            Set the necessary permissions for the MySQL server and data
            directories:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>chown -R root .</code></strong>
shell&gt; <strong class="userinput"><code>chown -R mysql data</code></strong>
shell&gt; <strong class="userinput"><code>chgrp -R mysql .</code></strong>
</pre></li><li class="listitem"><p>
            Copy the MySQL startup script to the appropriate directory,
            make it executable, and set it to start when the operating
            system is booted up:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>cp support-files/mysql.server /etc/rc.d/init.d/</code></strong>
shell&gt; <strong class="userinput"><code>chmod +x /etc/rc.d/init.d/mysql.server</code></strong>
shell&gt; <strong class="userinput"><code>chkconfig --add mysql.server</code></strong>
</pre><p>
            (The startup scripts directory may vary depending on your
            operating system and version—for example, in some
            Linux distributions, it is
            <code class="filename">/etc/init.d</code>.)
          </p><p>
            Here we use Red Hat's <span class="command"><strong>chkconfig</strong></span> for
            creating links to the startup scripts; use whatever means is
            appropriate for this purpose on your platform, such as
            <span class="command"><strong>update-rc.d</strong></span> on Debian.
</p></li></ol>
</div>
<p>
        Remember that the preceding steps must be repeated on each
        machine where an SQL node is to reside.
      </p><p><b>Data nodes. </b>
          Installation of the data nodes does not require the
          <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> binary. Only the NDB Cluster data
          node executable <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> (single-threaded) or
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> (multithreaded) is required. These
          binaries can also be found in the <code class="filename">.tar.gz</code>
          archive. Again, we assume that you have placed this archive in
          <code class="filename">/var/tmp</code>.
        </p><p>
        As system <code class="literal">root</code> (that is, after using
        <span class="command"><strong>sudo</strong></span>, <span class="command"><strong>su root</strong></span>, or your
        system's equivalent for temporarily assuming the system
        administrator account's privileges), perform the following steps
        to install the data node binaries on the data node hosts:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Change location to the <code class="filename">/var/tmp</code>
            directory, and extract the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> and
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> binaries from the archive into a
            suitable directory such as
            <code class="filename">/usr/local/bin</code>:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>cd /var/tmp</code></strong>
shell&gt; <strong class="userinput"><code>tar -zxvf mysql-cluster-gpl-8.0.17-linux-glibc2.12-x86_64.tar.gz</code></strong>
shell&gt; <strong class="userinput"><code>cd mysql-cluster-gpl-8.0.17-linux-glibc2.12-x86_64</code></strong>
shell&gt; <strong class="userinput"><code>cp bin/ndbd /usr/local/bin/ndbd</code></strong>
shell&gt; <strong class="userinput"><code>cp bin/ndbmtd /usr/local/bin/ndbmtd</code></strong>
</pre><p>
            (You can safely delete the directory created by unpacking
            the downloaded archive, and the files it contains, from
            <code class="filename">/var/tmp</code> once
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> and <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>
            have been copied to the executables directory.)
          </p></li><li class="listitem"><p>
            Change location to the directory into which you copied the
            files, and then make both of them executable:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>cd /usr/local/bin</code></strong>
shell&gt; <strong class="userinput"><code>chmod +x ndb*</code></strong>
</pre></li></ol>
</div>
<p>
        The preceding steps should be repeated on each data node host.
      </p><p>
        Although only one of the data node executables is required to
        run an NDB Cluster data node, we have shown you how to install
        both <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> and <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> in
        the preceding instructions. We recommend that you do this when
        installing or upgrading NDB Cluster, even if you plan to use
        only one of them, since this will save time and trouble in the
        event that you later decide to change from one to the other.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          The data directory on each machine hosting a data node is
          <code class="filename">/usr/local/mysql/data</code>. This piece of
          information is essential when configuring the management node.
          (See <a class="xref" href="mysql-cluster.html#mysql-cluster-install-configuration" title="22.2.4 Initial Configuration of NDB Cluster">Section 22.2.4, “Initial Configuration of NDB Cluster”</a>.)
</p>
</div>
<p><b>Management nodes. </b>
          Installation of the management node does not require the
          <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> binary. Only the NDB Cluster
          management server (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>) is required;
          you most likely want to install the management client
          (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a>) as well. Both of these binaries
          also be found in the <code class="filename">.tar.gz</code> archive.
          Again, we assume that you have placed this archive in
          <code class="filename">/var/tmp</code>.
        </p><p>
        As system <code class="literal">root</code>, perform the following steps
        to install <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> and
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> on the management node host:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Change location to the <code class="filename">/var/tmp</code>
            directory, and extract the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> and
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> from the archive into a suitable
            directory such as <code class="filename">/usr/local/bin</code>:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>cd /var/tmp</code></strong>
shell&gt; <strong class="userinput"><code>tar -zxvf mysql-cluster-gpl-8.0.17-linux-glibc2.12-x86_64.tar.gz</code></strong>
shell&gt; <strong class="userinput"><code>cd mysql-cluster-gpl-8.0.17-linux-glibc2.12-x86_64</code></strong>
shell&gt; <strong class="userinput"><code>cp bin/ndb_mgm* /usr/local/bin</code></strong>
</pre><p>
            (You can safely delete the directory created by unpacking
            the downloaded archive, and the files it contains, from
            <code class="filename">/var/tmp</code> once
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> and <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>
            have been copied to the executables directory.)
          </p></li><li class="listitem"><p>
            Change location to the directory into which you copied the
            files, and then make both of them executable:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>cd /usr/local/bin</code></strong>
shell&gt; <strong class="userinput"><code>chmod +x ndb_mgm*</code></strong>
</pre></li></ol>
</div>
<p>
        In <a class="xref" href="mysql-cluster.html#mysql-cluster-install-configuration" title="22.2.4 Initial Configuration of NDB Cluster">Section 22.2.4, “Initial Configuration of NDB Cluster”</a>, we
        create configuration files for all of the nodes in our example
        NDB Cluster.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-install-linux-rpm"></a>22.2.2.2 Installing NDB Cluster from RPM</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091606637728"></a><a class="indexterm" name="idm140091606636240"></a><p>
        This section covers the steps necessary to install the correct
        executables for each type of NDB Cluster 8.0 node using RPM
        packages supplied by Oracle. For information about RPMs for
        previous versions of NDB Cluster, see
        <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-install-linux-rpm.html#mysql-cluster-install-linux-rpm-old" target="_top">Installation using old-style RPMs (NDB 7.5.3 and earlier)</a>.
      </p><p>
        As an alternative to the method described in this section,
        Oracle provides MySQL Repositories for NDB Cluster that are
        compatible with many common Linux distributions. Two
        repostories, listed here, are available for RPM-based
        distributions:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            For distributions using <span class="command"><strong>yum</strong></span>
            or <span class="command"><strong>dnf</strong></span>, you can use the
            MySQL Yum Repository for NDB Cluster. See
            <a class="ulink" href="https://dev.mysql.com/doc/mysql-yum-repo-quick-guide/en/#repo-qg-yum-fresh-cluster-install" target="_top"><em class="citetitle">Installing
            MySQL NDB Cluster Using the Yum
            Repository</em></a>, for instructions and
            additional information.
          </p></li><li class="listitem"><p>
            For SLES, you can use the MySQL SLES Repository for NDB
            Cluster. See
            <a class="ulink" href="https://dev.mysql.com/doc/mysql-sles-repo-quick-guide/en/#repo-qg-sles-fresh-cluster-install" target="_top"><em class="citetitle">Installing
            MySQL NDB Cluster Using the SLES
            Repository</em></a>, for instructions and
            additional information.
</p></li></ul>
</div>
<p>
        RPMs are available for both 32-bit and 64-bit Linux platforms.
        The filenames for these RPMs use the following pattern:
      </p><pre data-lang="simple" class="programlisting">
mysql-cluster-community-data-node-8.0.17-1.el7.x86_64.rpm

mysql-cluster-<em class="replaceable"><code>license</code></em>-<em class="replaceable"><code>component</code></em>-<em class="replaceable"><code>ver</code></em>-<em class="replaceable"><code>rev</code></em>.<em class="replaceable"><code>distro</code></em>.<em class="replaceable"><code>arch</code></em>.rpm
  
    <em class="replaceable"><code>license</code></em>:= {commercial | community}
    
    <em class="replaceable"><code>component</code></em>: {management-server | data-node | server | client | <em class="replaceable"><code>other—see text</code></em>}
    
    <em class="replaceable"><code>ver</code></em>: <em class="replaceable"><code>major</code></em>.<em class="replaceable"><code>minor</code></em>.<em class="replaceable"><code>release</code></em>
    
    <em class="replaceable"><code>rev</code></em>: <em class="replaceable"><code>major</code></em>[.<em class="replaceable"><code>minor</code></em>]
    
    <em class="replaceable"><code>distro</code></em>: {el6 | el7 | sles12}
    
    <em class="replaceable"><code>arch</code></em>: {i686 | x86_64}
</pre><p>
        <em class="replaceable"><code>license</code></em> indicates whether the RPM is
        part of a Commercial or Community release of NDB Cluster. In the
        remainder of this section, we assume for the examples that you
        are installing a Community release.
      </p><p>
        Possible values for <em class="replaceable"><code>component</code></em>, with
        descriptions, can be found in the following table:

</p>
<div class="table">
<a name="idm140091606615152"></a><p class="title"><b>Table 22.5 Components of the NDB Cluster RPM distribution</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
              <th scope="col">Component</th>
              <th scope="col">Description</th>
            </tr></thead><tbody><tr>
              <td scope="row"><code class="literal">auto-installer</code></td>
              <td>NDB Cluster Auto Installer program; see
                <a class="xref" href="mysql-cluster.html#mysql-cluster-installer" title="22.2.1 The NDB Cluster Auto-Installer">Section 22.2.1, “The NDB Cluster Auto-Installer”</a>, for usage</td>
            </tr><tr>
              <td scope="row"><code class="literal">client</code></td>
              <td>MySQL and <code class="literal">NDB</code> client programs; includes
                <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client,
                <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> client, and other client
                tools</td>
            </tr><tr>
              <td scope="row"><code class="literal">common</code></td>
              <td>Character set and error message information needed by the MySQL server</td>
            </tr><tr>
              <td scope="row"><code class="literal">data-node</code></td>
              <td><a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> and <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> data node binaries</td>
            </tr><tr>
              <td scope="row"><code class="literal">devel</code></td>
              <td>Headers and library files needed for MySQL client development</td>
            </tr><tr>
              <td scope="row"><code class="literal">embedded</code></td>
              <td>Embedded MySQL server</td>
            </tr><tr>
              <td scope="row"><code class="literal">embedded-compat</code></td>
              <td>Backwards-compatible embedded MySQL server</td>
            </tr><tr>
              <td scope="row"><code class="literal">embedded-devel</code></td>
              <td>Header and library files for developing applications for embedded MySQL</td>
            </tr><tr>
              <td scope="row"><code class="literal">java</code></td>
              <td>JAR files needed for support of ClusterJ applications</td>
            </tr><tr>
              <td scope="row"><code class="literal">libs</code></td>
              <td>MySQL client libraries</td>
            </tr><tr>
              <td scope="row"><code class="literal">libs-compat</code></td>
              <td>Backwards-compatible MySQL client libraries</td>
            </tr><tr>
              <td scope="row"><code class="literal">management-server</code></td>
              <td>The NDB Cluster management server (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>)</td>
            </tr><tr>
              <td scope="row"><code class="literal">memcached</code></td>
              <td>Files needed to support <code class="literal">ndbmemcache</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">minimal-debuginfo</code></td>
              <td>Debug information for package server-minimal; useful when developing
                applications that use this package or when debugging
                this package</td>
            </tr><tr>
              <td scope="row"><code class="literal">ndbclient</code></td>
              <td><code class="literal">NDB</code> client library for running NDB API and MGM API
                applications (<code class="literal">libndbclient</code>)</td>
            </tr><tr>
              <td scope="row"><code class="literal">ndbclient-devel</code></td>
              <td>Header and other files needed for developing NDB API and MGM API
                applications</td>
            </tr><tr>
              <td scope="row"><code class="literal">nodejs</code></td>
              <td>Files needed to set up Node.JS support for NDB Cluster</td>
            </tr><tr>
              <td scope="row"><code class="literal">server</code></td>
              <td>The MySQL server (<a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>) with <code class="literal">NDB</code>
                storage engine support included, and associated MySQL
                server programs</td>
            </tr><tr>
              <td scope="row"><code class="literal">server-minimal</code></td>
              <td>Minimal installation of the MySQL server for NDB and related tools</td>
            </tr><tr>
              <td scope="row"><code class="literal">test</code></td>
              <td><span class="command"><strong>mysqltest</strong></span>, other MySQL test programs, and support
                files</td>
</tr></tbody></table>
</div>

</div>
<p><br class="table-break">
      </p><p>
        A single bundle (<code class="filename">.tar</code> file) of all NDB
        Cluster RPMs for a given platform and architecture is also
        available. The name of this file follows the pattern shown here:
      </p><pre data-lang="simple" class="programlisting">
mysql-cluster-<em class="replaceable"><code>license</code></em>-<em class="replaceable"><code>ver</code></em>-<em class="replaceable"><code>rev</code></em>.<em class="replaceable"><code>distro</code></em>.<em class="replaceable"><code>arch</code></em>.rpm-bundle.tar
</pre><p>
        You can extract the individual RPM files from this file using
        <span class="command"><strong>tar</strong></span> or your preferred tool for extracting
        archives.
      </p><p>
        The components required to install the three major types of NDB
        Cluster nodes are given in the following list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="emphasis"><em>Management node</em></span>:
            <code class="literal">management-server</code>
          </p></li><li class="listitem"><p>
            <span class="emphasis"><em>Data node</em></span>: <code class="literal">data-node</code>
          </p></li><li class="listitem"><p>
            <span class="emphasis"><em>SQL node</em></span>: <code class="literal">server</code> and
            <code class="literal">common</code>
</p></li></ul>
</div>
<p>
        In addition, the <code class="literal">client</code> RPM should be
        installed to provide the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> management
        client on at least one management node. You may also wish to
        install it on SQL nodes, to have <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> and
        other MySQL client programs available on these. We discuss
        installation of nodes by type later in this section.
      </p><p>
        <em class="replaceable"><code>ver</code></em> represents the three-part
        <code class="literal">NDB</code> storage engine version number in
        8.0.<em class="replaceable"><code>x</code></em> format, shown as
        <code class="literal">8.0.17</code> in the examples.
        <code class="literal">rev</code> provides the RPM revision number in
        <em class="replaceable"><code>major</code></em>.<em class="replaceable"><code>minor</code></em>
        format. In the examples shown in this section, we use
        <code class="literal">1.1</code> for this value.
      </p><p>
        The <em class="replaceable"><code>distro</code></em> (Linux distribution) is
        one of <code class="literal">rhel5</code> (Oracle Linux 5, Red Hat
        Enterprise Linux 4 and 5), <code class="literal">el6</code> (Oracle Linux
        6, Red Hat Enterprise Linux 6), <code class="literal">el7</code> (Oracle
        Linux 7, Red Hat Enterprise Linux 7), or
        <code class="literal">sles12</code> (SUSE Enterprise Linux 12). For the
        examples in this section, we assume that the host runs Oracle
        Linux 7, Red Hat Enterprise Linux 7, or the equivalent
        (<code class="literal">el7</code>).
      </p><p>
        <em class="replaceable"><code>arch</code></em> is <code class="literal">i686</code> for
        32-bit RPMs and <code class="literal">x86_64</code> for 64-bit versions.
        In the examples shown here, we assume a 64-bit platform.
      </p><p>
        The NDB Cluster version number in the RPM file names (shown here
        as <code class="literal">8.0.17</code>) can vary
        according to the version which you are actually using.
        <span class="emphasis"><em>It is very important that all of the Cluster RPMs to
        be installed have the same version number</em></span>. The
        architecture should also be appropriate to the machine on which
        the RPM is to be installed; in particular, you should keep in
        mind that 64-bit RPMs (<code class="literal">x86_64</code>) cannot be used
        with 32-bit operating systems (use <code class="literal">i686</code> for
        the latter).
      </p><p><b>Data nodes. </b>
          On a computer that is to host an NDB Cluster data node it is
          necessary to install only the <code class="literal">data-node</code>
          RPM. To do so, copy this RPM to the data node host, and run
          the following command as the system root user, replacing the
          name shown for the RPM as necessary to match that of the RPM
          downloaded from the MySQL website:
        </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>rpm -Uhv mysql-cluster-community-data-node-8.0.17-1.el7.x86_64.rpm</code></strong>
</pre><p>
        This installs the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> and
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> data node binaries in
        <code class="filename">/usr/sbin</code>. Either of these can be used to
        run a data node process on this host.
      </p><p><b>SQL nodes. </b>
          Copy the <code class="literal">server</code> and
          <code class="literal">common</code> RPMs to each machine to be used for
          hosting an NDB Cluster SQL node (<code class="literal">server</code>
          requires <code class="literal">common</code>). Install the
          <code class="literal">server</code> RPM by executing the following
          command as the system root user, replacing the name shown for
          the RPM as necessary to match the name of the RPM downloaded
          from the MySQL website:
        </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>rpm -Uhv mysql-cluster-community-server-8.0.17-1.el7.x86_64.rpm</code></strong>
</pre><p>
        This installs the MySQL server binary
        (<a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>), with <code class="literal">NDB</code> storage
        engine support, in the <code class="filename">/usr/sbin</code> directory.
        It also installs all needed MySQL Server support files and
        useful MySQL server programs, including the
        <a class="link" href="programs.html#mysql-server" title="4.3.3 mysql.server — MySQL Server Startup Script"><span class="command"><strong>mysql.server</strong></span></a> and
        <a class="link" href="programs.html#mysqld-safe" title="4.3.2 mysqld_safe — MySQL Server Startup Script"><span class="command"><strong>mysqld_safe</strong></span></a> startup scripts (in
        <code class="filename">/usr/share/mysql</code> and
        <code class="filename">/usr/bin</code>, respectively). The RPM installer
        should take care of general configuration issues (such as
        creating the <code class="literal">mysql</code> user and group, if needed)
        automatically.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
          You must use the versions of these RPMs released for NDB
          Cluster ; those released for the standard MySQL server do not
          provide support for the <code class="literal">NDB</code> storage engine.
</p>
</div>
<p>
        To administer the SQL node (MySQL server), you should also
        install the <code class="literal">client</code> RPM, as shown here:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>rpm -Uhv mysql-cluster-community-client-8.0.17-1.el7.x86_64.rpm</code></strong>
</pre><p>
        This installs the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client and other
        MySQL client programs, such as <a class="link" href="programs.html#mysqladmin" title="4.5.2 mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin</strong></span></a> and
        <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a>, to <code class="filename">/usr/bin</code>.
      </p><p><b>Management nodes. </b>
          To install the NDB Cluster management server, it is necessary
          only to use the <code class="literal">management-server</code> RPM. Copy
          this RPM to the computer intended to host the management node,
          and then install it by running the following command as the
          system root user (replace the name shown for the RPM as
          necessary to match that of the
          <code class="literal">management-server</code> RPM downloaded from the
          MySQL website):
        </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>rpm -Uhv mysql-cluster-commercial-management-server-8.0.17-1.el7.x86_64.rpm</code></strong>
</pre><p>
        This RPM installs the management server binary
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> in the
        <code class="filename">/usr/sbin</code> directory. While this is the only
        program actually required for running a management node, it is
        also a good idea to have the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> NDB
        Cluster management client available as well. You can obtain this
        program, as well as other <code class="literal">NDB</code> client programs
        such as <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-desc" title="22.4.9 ndb_desc — Describe NDB Tables"><span class="command"><strong>ndb_desc</strong></span></a> and
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-config" title="22.4.7 ndb_config — Extract NDB Cluster Configuration Information"><span class="command"><strong>ndb_config</strong></span></a>, by installing the
        <code class="literal">client</code> RPM as described previously.
      </p><p>
        See <a class="xref" href="installing.html#linux-installation-rpm" title="2.5.4 Installing MySQL on Linux Using RPM Packages from Oracle">Section 2.5.4, “Installing MySQL on Linux Using RPM Packages from Oracle”</a>, for general
        information about installing MySQL using RPMs supplied by
        Oracle.
      </p><p>
        After installing from RPM, you still need to configure the
        cluster; see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-install-configuration" title="22.2.4 Initial Configuration of NDB Cluster">Section 22.2.4, “Initial Configuration of NDB Cluster”</a>, for the
        relevant information.
      </p><p>
        <span class="emphasis"><em>It is very important that all of the Cluster RPMs to
        be installed have the same version number</em></span>. The
        <em class="replaceable"><code>architecture</code></em> designation should also
        be appropriate to the machine on which the RPM is to be
        installed; in particular, you should keep in mind that 64-bit
        RPMs cannot be used with 32-bit operating systems.
      </p><p><b>Data nodes. </b>
          On a computer that is to host a cluster data node it is
          necessary to install only the <code class="literal">server</code> RPM.
          To do so, copy this RPM to the data node host, and run the
          following command as the system root user, replacing the name
          shown for the RPM as necessary to match that of the RPM
          downloaded from the MySQL website:
        </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>rpm -Uhv MySQL-Cluster-server-gpl-8.0.17-1.sles11.i386.rpm</code></strong>
</pre><p>
        Although this installs all NDB Cluster binaries, only the
        program <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> or <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>
        (both in <code class="filename">/usr/sbin</code>) is actually needed to
        run an NDB Cluster data node.
      </p><p><b>SQL nodes. </b>
          On each machine to be used for hosting a cluster SQL node,
          install the <code class="literal">server</code> RPM by executing the
          following command as the system root user, replacing the name
          shown for the RPM as necessary to match the name of the RPM
          downloaded from the MySQL website:
        </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>rpm -Uhv MySQL-Cluster-server-gpl-8.0.17-1.sles11.i386.rpm</code></strong>
</pre><p>
        This installs the MySQL server binary
        (<a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>) with
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine support in the
        <code class="filename">/usr/sbin</code> directory, as well as all needed
        MySQL Server support files. It also installs the
        <a class="link" href="programs.html#mysql-server" title="4.3.3 mysql.server — MySQL Server Startup Script"><span class="command"><strong>mysql.server</strong></span></a> and
        <a class="link" href="programs.html#mysqld-safe" title="4.3.2 mysqld_safe — MySQL Server Startup Script"><span class="command"><strong>mysqld_safe</strong></span></a> startup scripts (in
        <code class="filename">/usr/share/mysql</code> and
        <code class="filename">/usr/bin</code>, respectively). The RPM installer
        should take care of general configuration issues (such as
        creating the <code class="literal">mysql</code> user and group, if needed)
        automatically.
      </p><p>
        To administer the SQL node (MySQL server), you should also
        install the <code class="literal">client</code> RPM, as shown here:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>rpm -Uhv MySQL-Cluster-client-gpl-8.0.17-1.sles11.i386.rpm</code></strong>
</pre><p>
        This installs the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client program.
      </p><p><b>Management nodes. </b>
          To install the NDB Cluster management server, it is necessary
          only to use the <code class="literal">server</code> RPM. Copy this RPM
          to the computer intended to host the management node, and then
          install it by running the following command as the system root
          user (replace the name shown for the RPM as necessary to match
          that of the <code class="literal">server</code> RPM downloaded from the
          MySQL website):
        </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>rpm -Uhv MySQL-Cluster-server-gpl-8.0.17-1.sles11.i386.rpm</code></strong>
</pre><p>
        Although this RPM installs many other files, only the management
        server binary <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> (in the
        <code class="filename">/usr/sbin</code> directory) is actually required
        for running a management node. The <code class="literal">server</code> RPM
        also installs <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a>, the
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> management client.
      </p><p>
        See <a class="xref" href="installing.html#linux-installation-rpm" title="2.5.4 Installing MySQL on Linux Using RPM Packages from Oracle">Section 2.5.4, “Installing MySQL on Linux Using RPM Packages from Oracle”</a>, for general
        information about installing MySQL using RPMs supplied by
        Oracle. See
        <a class="xref" href="mysql-cluster.html#mysql-cluster-install-configuration" title="22.2.4 Initial Configuration of NDB Cluster">Section 22.2.4, “Initial Configuration of NDB Cluster”</a>, for
        information about required post-installation configuration.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-install-debian"></a>22.2.2.3 Installing NDB Cluster Using .deb Files</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091606420592"></a><a class="indexterm" name="idm140091606419104"></a><a class="indexterm" name="idm140091606417616"></a><p>
        The section provides information about installing NDB Cluster on
        Debian and related Linux distributions such Ubuntu using the
        <code class="filename">.deb</code> files supplied by Oracle for this
        purpose.
      </p><p>
        Oracle also provides an NDB Cluster APT repository for Debian
        and other distributions. See
        <a class="ulink" href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/#repo-qg-apt-cluster-install" target="_top"><em class="citetitle">Installing
        MySQL NDB Cluster Using the APT Repository</em></a>,
        for instructions and additional information.
      </p><p>
        Oracle provides <code class="filename">.deb</code> installer files for
        NDB Cluster for 32-bit and 64-bit platforms. For a Debian-based
        system, only a single installer file is necessary. This file is
        named using the pattern shown here, according to the applicable
        NDB Cluster version, Debian version, and architecture:
      </p><pre data-lang="simple" class="programlisting">
mysql-cluster-gpl-<em class="replaceable"><code>ndbver</code></em>-debian<em class="replaceable"><code>debianver</code></em>-<em class="replaceable"><code>arch</code></em>.deb
</pre><p>
        Here, <em class="replaceable"><code>ndbver</code></em> is the 3-part
        <code class="literal">NDB</code> engine version number,
        <em class="replaceable"><code>debianver</code></em> is the major version of
        Debian (<code class="literal">8</code> or <code class="literal">9</code>), and
        <em class="replaceable"><code>arch</code></em> is one of
        <code class="literal">i686</code> or <code class="literal">x86_64</code>. In the
        examples that follow, we assume you wish to install NDB
        8.0.17 on a 64-bit Debian 9 system; in this
        case, the installer file is named
        <code class="filename">mysql-cluster-gpl-8.0.17-debian9-x86_64.deb-bundle.tar</code>.
      </p><p>
        Once you have downloaded the appropriate
        <code class="filename">.deb</code> file, you can untar it, and then
        install it from the command line using <code class="literal">dpkg</code>,
        like this:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>dpkg -i mysql-cluster-gpl-8.0.17-debian9-i686.deb</code></strong>
</pre><p>
        You can also remove it using <code class="literal">dpkg</code> as shown
        here:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>dpkg -r mysql</code></strong>
</pre><p>
        The installer file should also be compatible with most graphical
        package managers that work with <code class="filename">.deb</code> files,
        such as <code class="literal">GDebi</code> for the Gnome desktop.
      </p><p>
        The <code class="filename">.deb</code> file installs NDB Cluster under
        <code class="filename">/opt/mysql/server-<em class="replaceable"><code>version</code></em>/</code>,
        where <em class="replaceable"><code>version</code></em> is the 2-part release
        series version for the included MySQL server. For NDB 8.0, this
        is always <code class="literal">5.7</code>. The directory layout is the
        same as that for the generic Linux binary distribution (see
        <a class="xref" href="installing.html#binary-installation-layout" title="Table 2.3 MySQL Installation Layout for Generic Unix/Linux Binary Package">Table 2.3, “MySQL Installation Layout for Generic Unix/Linux Binary Package”</a>), with the
        exception that startup scripts and configuration files are found
        in <code class="filename">support-files</code> instead of
        <code class="filename">share</code>. All NDB Cluster executables, such as
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a>, <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>, and
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>, are placed in the
        <code class="filename">bin</code> directory.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-install-linux-source"></a>22.2.2.4 Building NDB Cluster from Source on Linux</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091606383248"></a><a class="indexterm" name="idm140091606381760"></a><p>
        This section provides information about compiling NDB Cluster on
        Linux and other Unix-like platforms. Building NDB Cluster from
        source is similar to building the standard MySQL Server,
        although it differs in a few key respects discussed here. For
        general information about building MySQL from source, see
        <a class="xref" href="installing.html#source-installation" title="2.9 Installing MySQL from Source">Section 2.9, “Installing MySQL from Source”</a>. For information about
        compiling NDB Cluster on Windows platforms, see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows-source" title="22.2.3.2 Compiling and Installing NDB Cluster from Source on Windows">Section 22.2.3.2, “Compiling and Installing NDB Cluster from Source on Windows”</a>.
      </p><p>
        Building MySQL NDB Cluster 8.0 requires using the MySQL Server
        8.0 sources. These are available from the MySQL downloads page
        at <a class="ulink" href="https://dev.mysql.com/downloads/" target="_top">https://dev.mysql.com/downloads/</a>. The archived source file
        should have a name similar to
        <code class="filename">mysql-8.0.17.tar.gz</code>. You
        can also obtain MySQL development sources from
        <a class="ulink" href="launchpad.net" target="_top">launchpad.net</a>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          In previous versions, building of NDB Cluster from standard
          MySQL Server sources was not supported. In MySQL 8.0 and NDB
          Cluster 8.0, this is no longer the case—<span class="emphasis"><em>both
          products are now built from the same sources</em></span>.
</p>
</div>
<p>
        The <a class="link" href="installing.html#option_cmake_with_ndbcluster"><code class="option">WITH_NDBCLUSTER</code></a> option for
        <span class="command"><strong>CMake</strong></span> causes the binaries for the management
        nodes, data nodes, and other NDB Cluster programs to be built;
        it also causes <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> to be compiled with
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine support. This
        option (or one of its aliases
        <code class="option">WITH_NDBCLUSTER_STORAGE_ENGINE</code> and
        <code class="option">WITH_PLUGIN_NDBCLUSTER</code>) is required when
        building NDB Cluster.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
          The <a class="link" href="installing.html#option_cmake_with_ndb_java"><code class="option">WITH_NDB_JAVA</code></a> option is
          enabled by default. This means that, by default, if
          <span class="command"><strong>CMake</strong></span> cannot find the location of Java on
          your system, the configuration process fails; if you do not
          wish to enable Java and ClusterJ support, you must indicate
          this explicitly by configuring the build using
          <code class="option">-DWITH_NDB_JAVA=OFF</code>. Use
          <a class="link" href="installing.html#option_cmake_with_classpath"><code class="option">WITH_CLASSPATH</code></a> to provide the
          Java classpath if needed.
</p>
</div>
<p>
        For more information about <span class="command"><strong>CMake</strong></span> options
        specific to building NDB Cluster, see
        <a class="link" href="installing.html#cmake-mysql-cluster-options" title="CMake Options for Compiling NDB Cluster">Options for
        Compiling NDB Cluster</a>.
      </p><p>
        After you have run <span class="command"><strong>make &amp;&amp; make
        install</strong></span> (or your system's equivalent), the result
        is similar to what is obtained by unpacking a precompiled binary
        to the same location.
      </p><p><b>Management nodes. </b>
          When building from source and running the default
          <span class="command"><strong>make install</strong></span>, the management server and
          management client binaries (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> and
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a>) can be found in
          <code class="filename">/usr/local/mysql/bin</code>. Only
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> is required to be present on a
          management node host; however, it is also a good idea to have
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> present on the same host machine.
          Neither of these executables requires a specific location on
          the host machine's file system.
        </p><p><b>Data nodes. </b>
          The only executable required on a data node host is the data
          node binary <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> or
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>. (<a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>, for
          example, does not have to be present on the host machine.) By
          default, when building from source, this file is placed in the
          directory <code class="filename">/usr/local/mysql/bin</code>. For
          installing on multiple data node hosts, only
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> or <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> need be
          copied to the other host machine or machines. (This assumes
          that all data node hosts use the same architecture and
          operating system; otherwise you may need to compile separately
          for each different platform.) The data node binary need not be
          in any particular location on the host's file system, as long
          as the location is known.
        </p><p>
        When compiling NDB Cluster from source, no special options are
        required for building multithreaded data node binaries.
        Configuring the build with <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>
        storage engine support causes <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> to be
        built automatically; <span class="command"><strong>make install</strong></span> places the
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> binary in the installation
        <code class="filename">bin</code> directory along with
        <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>, <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>, and
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a>.
      </p><p><b>SQL nodes. </b>
          If you compile MySQL with clustering support, and perform the
          default installation (using <span class="command"><strong>make install</strong></span> as
          the system <code class="literal">root</code> user),
          <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> is placed in
          <code class="filename">/usr/local/mysql/bin</code>. Follow the steps
          given in <a class="xref" href="installing.html#source-installation" title="2.9 Installing MySQL from Source">Section 2.9, “Installing MySQL from Source”</a> to make
          <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> ready for use. If you want to run
          multiple SQL nodes, you can use a copy of the same
          <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> executable and its associated
          support files on several machines. The easiest way to do this
          is to copy the entire <code class="filename">/usr/local/mysql</code>
          directory and all directories and files contained within it to
          the other SQL node host or hosts, then repeat the steps from
          <a class="xref" href="installing.html#source-installation" title="2.9 Installing MySQL from Source">Section 2.9, “Installing MySQL from Source”</a> on each machine. If you
          configure the build with a nondefault <code class="option">PREFIX</code>
          option, you must adjust the directory accordingly.
        </p><p>
        In <a class="xref" href="mysql-cluster.html#mysql-cluster-install-configuration" title="22.2.4 Initial Configuration of NDB Cluster">Section 22.2.4, “Initial Configuration of NDB Cluster”</a>, we
        create configuration files for all of the nodes in our example
        NDB Cluster.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-install-windows"></a>22.2.3 Installing NDB Cluster on Windows</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-windows-binary">22.2.3.1 Installing NDB Cluster on Windows from a Binary Release</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-windows-source">22.2.3.2 Compiling and Installing NDB Cluster from Source on Windows</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-windows-initial-start">22.2.3.3 Initial Startup of NDB Cluster on Windows</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-windows-service">22.2.3.4 Installing NDB Cluster Processes as Windows Services</a></span></dt></dl>
</div>
<a class="indexterm" name="idm140091606321120"></a><a class="indexterm" name="idm140091606319632"></a><p>
      This section describes installation procedures for NDB Cluster on
      Windows hosts. NDB Cluster 8.0 binaries for Windows can be
      obtained from <a class="ulink" href="https://dev.mysql.com/downloads/cluster/" target="_top">https://dev.mysql.com/downloads/cluster/</a>. For
      information about installing NDB Cluster on Windows from a binary
      release provided by Oracle, see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows-binary" title="22.2.3.1 Installing NDB Cluster on Windows from a Binary Release">Section 22.2.3.1, “Installing NDB Cluster on Windows from a Binary Release”</a>.
    </p><p>
      It is also possible to compile and install NDB Cluster from source
      on Windows using Microsoft Visual Studio. For more information,
      see <a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows-source" title="22.2.3.2 Compiling and Installing NDB Cluster from Source on Windows">Section 22.2.3.2, “Compiling and Installing NDB Cluster from Source on Windows”</a>.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-install-windows-binary"></a>22.2.3.1 Installing NDB Cluster on Windows from a Binary Release</h4>
</div>
</div>
</div>
<a class="indexterm" name="idm140091606313520"></a><a class="indexterm" name="idm140091606312032"></a><p>
        This section describes a basic installation of NDB Cluster on
        Windows using a binary <span class="quote">“<span class="quote">no-install</span>”</span> NDB Cluster
        release provided by Oracle, using the same 4-node setup outlined
        in the beginning of this section (see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-installation" title="22.2 NDB Cluster Installation">Section 22.2, “NDB Cluster Installation”</a>), as shown in the
        following table:
</p>
<div class="table">
<a name="idm140091606307968"></a><p class="title"><b>Table 22.6 Network addresses of nodes in example cluster</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
            <th scope="col">Node</th>
            <th scope="col">IP Address</th>
          </tr></thead><tbody><tr>
            <td scope="row">Management node (<span class="command"><strong>mgmd</strong></span>)</td>
            <td>198.51.100.10</td>
          </tr><tr>
            <td scope="row">SQL node (<a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>)</td>
            <td>198.51.100.20</td>
          </tr><tr>
            <td scope="row">Data node "A" (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>)</td>
            <td>198.51.100.30</td>
          </tr><tr>
            <td scope="row">Data node "B" (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>)</td>
            <td>198.51.100.40</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        As on other platforms, the NDB Cluster host computer running an
        SQL node must have installed on it a MySQL Server binary
        (<a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld.exe</strong></span></a>). You should also have the MySQL
        client (<a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql.exe</strong></span></a>) on this host. For
        management nodes and data nodes, it is not necessary to install
        the MySQL Server binary; however, each management node requires
        the management server daemon (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd.exe</strong></span></a>);
        each data node requires the data node daemon
        (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd.exe</strong></span></a> or <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd.exe</strong></span></a>).
        For this example, we refer to <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd.exe</strong></span></a> as the
        data node executable, but you can install
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd.exe</strong></span></a>, the multithreaded version of this
        program, instead, in exactly the same way. You should also
        install the management client (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm.exe</strong></span></a>)
        on the management server host. This section covers the steps
        necessary to install the correct Windows binaries for each type
        of NDB Cluster node.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          As with other Windows programs, NDB Cluster executables are
          named with the <code class="filename">.exe</code> file extension.
          However, it is not necessary to include the
          <code class="filename">.exe</code> extension when invoking these
          programs from the command line. Therefore, we often simply
          refer to these programs in this documentation as
          <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>, <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>,
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>, and so on. You should understand
          that, whether we refer (for example) to
          <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> or <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld.exe</strong></span></a>,
          either name means the same thing (the MySQL Server program).
</p>
</div>
<p>
        For setting up an NDB Cluster using Oracles's
        <code class="literal">no-install</code> binaries, the first step in the
        installation process is to download the latest NDB Cluster
        Windows ZIP binary archive from
        <a class="ulink" href="https://dev.mysql.com/downloads/cluster/" target="_top">https://dev.mysql.com/downloads/cluster/</a>. This archive has a
        filename of the
        <code class="filename">mysql-cluster-gpl-<em class="replaceable"><code>ver</code></em>-win<em class="replaceable"><code>arch</code></em>.zip</code>,
        where <em class="replaceable"><code>ver</code></em> is the
        <code class="literal">NDB</code> storage engine version (such as
        <code class="literal">8.0.17</code>), and
        <em class="replaceable"><code>arch</code></em> is the architecture
        (<code class="literal">32</code> for 32-bit binaries, and
        <code class="literal">64</code> for 64-bit binaries). For example, the NDB
        Cluster 8.0.17 archive for 64-bit Windows
        systems is named
        <code class="filename">mysql-cluster-gpl-8.0.17-win64.zip</code>.
      </p><p>
        You can run 32-bit NDB Cluster binaries on both 32-bit and
        64-bit versions of Windows; however, 64-bit NDB Cluster binaries
        can be used only on 64-bit versions of Windows. If you are using
        a 32-bit version of Windows on a computer that has a 64-bit CPU,
        then you must use the 32-bit NDB Cluster binaries.
      </p><p>
        To minimize the number of files that need to be downloaded from
        the Internet or copied between machines, we start with the
        computer where you intend to run the SQL node.
      </p><p><b>SQL node. </b>
          We assume that you have placed a copy of the archive in the
          directory <code class="filename">C:\Documents and
          Settings\<em class="replaceable"><code>username</code></em>\My
          Documents\Downloads</code> on the computer having the IP
          address 198.51.100.20, where
          <em class="replaceable"><code>username</code></em> is the name of the current
          user. (You can obtain this name using <code class="literal">ECHO
          %USERNAME%</code> on the command line.) To install and run
          NDB Cluster executables as Windows services, this user should
          be a member of the <code class="literal">Administrators</code> group.
        </p><p>
        Extract all the files from the archive. The Extraction Wizard
        integrated with Windows Explorer is adequate for this task. (If
        you use a different archive program, be sure that it extracts
        all files and directories from the archive, and that it
        preserves the archive's directory structure.) When you are
        asked for a destination directory, enter
        <code class="filename">C:\</code>, which causes the Extraction Wizard to
        extract the archive to the directory
        <code class="filename">C:\mysql-cluster-gpl-<em class="replaceable"><code>ver</code></em>-win<em class="replaceable"><code>arch</code></em></code>.
        Rename this directory to <code class="filename">C:\mysql</code>.
      </p><p>
        It is possible to install the NDB Cluster binaries to
        directories other than <code class="filename">C:\mysql\bin</code>;
        however, if you do so, you must modify the paths shown in this
        procedure accordingly. In particular, if the MySQL Server (SQL
        node) binary is installed to a location other than
        <code class="filename">C:\mysql</code> or <code class="filename">C:\Program
        Files\MySQL\MySQL Server 8.0</code>, or if the
        SQL node's data directory is in a location other than
        <code class="filename">C:\mysql\data</code> or <code class="filename">C:\Program
        Files\MySQL\MySQL Server 8.0\data</code>, extra
        configuration options must be used on the command line or added
        to the <code class="filename">my.ini</code> or
        <code class="filename">my.cnf</code> file when starting the SQL node. For
        more information about configuring a MySQL Server to run in a
        nonstandard location, see
        <a class="xref" href="installing.html#windows-install-archive" title="2.3.5 Installing MySQL on Microsoft Windows Using a noinstall ZIP Archive">Section 2.3.5, “Installing MySQL on Microsoft Windows Using a
      <code class="literal">noinstall</code> ZIP Archive”</a>.
      </p><p>
        For a MySQL Server with NDB Cluster support to run as part of an
        NDB Cluster, it must be started with the options
        <a class="link" href="mysql-cluster.html#option_mysqld_ndbcluster"><code class="option">--ndbcluster</code></a> and
        <a class="link" href="mysql-cluster.html#option_mysqld_ndb-connectstring"><code class="option">--ndb-connectstring</code></a>. While you
        can specify these options on the command line, it is usually
        more convenient to place them in an option file. To do this,
        create a new text file in Notepad or another text editor. Enter
        the following configuration information into this file:
      </p><pre data-lang="ini" class="programlisting">
[mysqld]
# Options for mysqld process:
ndbcluster                       # run NDB storage engine
ndb-connectstring=198.51.100.10  # location of management server
</pre><p>
        You can add other options used by this MySQL Server if desired
        (see <a class="xref" href="installing.html#windows-create-option-file" title="2.3.5.2 Creating an Option File">Section 2.3.5.2, “Creating an Option File”</a>), but the file
        must contain the options shown, at a minimum. Save this file as
        <code class="filename">C:\mysql\my.ini</code>. This completes the
        installation and setup for the SQL node.
      </p><p><b>Data nodes. </b>
          An NDB Cluster data node on a Windows host requires only a
          single executable, one of either <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd.exe</strong></span></a>
          or <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd.exe</strong></span></a>. For this example, we assume
          that you are using <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd.exe</strong></span></a>, but the same
          instructions apply when using <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd.exe</strong></span></a>.
          On each computer where you wish to run a data node (the
          computers having the IP addresses 198.51.100.30 and
          198.51.100.40), create the directories
          <code class="filename">C:\mysql</code>,
          <code class="filename">C:\mysql\bin</code>, and
          <code class="filename">C:\mysql\cluster-data</code>; then, on the
          computer where you downloaded and extracted the
          <code class="literal">no-install</code> archive, locate
          <code class="filename">ndbd.exe</code> in the
          <code class="filename">C:\mysql\bin</code> directory. Copy this file to
          the <code class="filename">C:\mysql\bin</code> directory on each of the
          two data node hosts.
        </p><p>
        To function as part of an NDB Cluster, each data node must be
        given the address or hostname of the management server. You can
        supply this information on the command line using the
        <a class="link" href="mysql-cluster.html#option_ndb_config_ndb-connectstring"><code class="option">--ndb-connectstring</code></a> or
        <code class="option">-c</code> option when starting each data node process.
        However, it is usually preferable to put this information in an
        option file. To do this, create a new text file in Notepad or
        another text editor and enter the following text:
      </p><pre data-lang="ini" class="programlisting">
[mysql_cluster]
# Options for data node process:
ndb-connectstring=198.51.100.10  # location of management server
</pre><p>
        Save this file as <code class="filename">C:\mysql\my.ini</code> on the
        data node host. Create another text file containing the same
        information and save it on as
        <code class="filename">C:mysql\my.ini</code> on the other data node host,
        or copy the my.ini file from the first data node host to the
        second one, making sure to place the copy in the second data
        node's <code class="filename">C:\mysql</code> directory. Both data
        node hosts are now ready to be used in the NDB Cluster, which
        leaves only the management node to be installed and configured.
      </p><p><b>Management node. </b>
          The only executable program required on a computer used for
          hosting an NDB Cluster management node is the management
          server program <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd.exe</strong></span></a>. However, in
          order to administer the NDB Cluster once it has been started,
          you should also install the NDB Cluster management client
          program <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm.exe</strong></span></a> on the same machine as
          the management server. Locate these two programs on the
          machine where you downloaded and extracted the
          <code class="literal">no-install</code> archive; this should be the
          directory <code class="filename">C:\mysql\bin</code> on the SQL node
          host. Create the directory <code class="filename">C:\mysql\bin</code>
          on the computer having the IP address 198.51.100.10, then copy
          both programs to this directory.
        </p><p>
        You should now create two configuration files for use by
        <code class="filename">ndb_mgmd.exe</code>:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            A local configuration file to supply configuration data
            specific to the management node itself. Typically, this file
            needs only to supply the location of the NDB Cluster global
            configuration file (see item 2).
          </p><p>
            To create this file, start a new text file in Notepad or
            another text editor, and enter the following information:
          </p><pre data-lang="ini" class="programlisting">
[mysql_cluster]
# Options for management node process
config-file=C:/mysql/bin/config.ini
</pre><p>
            Save this file as the text file
            <code class="filename">C:\mysql\bin\my.ini</code>.
          </p></li><li class="listitem"><p>
            A global configuration file from which the management node
            can obtain configuration information governing the NDB
            Cluster as a whole. At a minimum, this file must contain a
            section for each node in the NDB Cluster, and the IP
            addresses or hostnames for the management node and all data
            nodes (<code class="literal">HostName</code> configuration parameter).
            It is also advisable to include the following additional
            information:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                The IP address or hostname of any SQL nodes
              </p></li><li class="listitem"><p>
                The data memory and index memory allocated to each data
                node (<a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a>
                and <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexmemory"><code class="literal">IndexMemory</code></a>
                configuration parameters)
              </p></li><li class="listitem"><p>
                The number of replicas, using the
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-noofreplicas"><code class="literal">NoOfReplicas</code></a>
                configuration parameter (see
                <a class="xref" href="mysql-cluster.html#mysql-cluster-nodes-groups" title="22.1.2 NDB Cluster Nodes, Node Groups, Replicas, and Partitions">Section 22.1.2, “NDB Cluster Nodes, Node Groups, Replicas, and Partitions”</a>)
              </p></li><li class="listitem"><p>
                The directory where each data node stores it data and
                log file, and the directory where the management node
                keeps its log files (in both cases, the
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datadir"><code class="literal">DataDir</code></a>
                configuration parameter)
</p></li></ul>
</div>
<p>
            Create a new text file using a text editor such as Notepad,
            and input the following information:
          </p><pre data-lang="ini" class="programlisting">
[ndbd default]
# Options affecting ndbd processes on all data nodes:
NoOfReplicas=2                      # Number of replicas
DataDir=C:/mysql/cluster-data       # Directory for each data node's data files
                                    # Forward slashes used in directory path,
                                    # rather than backslashes. This is correct;
                                    # see <span class="bold"><strong>Important</strong></span> note in text
DataMemory=80M    # Memory allocated to data storage
IndexMemory=18M   # Memory allocated to index storage
                  # For DataMemory and IndexMemory, we have used the
                  # default values. Since the "world" database takes up
                  # only about 500KB, this should be more than enough for
                  # this example Cluster setup.

[ndb_mgmd]
# Management process options:
HostName=198.51.100.10              # Hostname or IP address of management node
DataDir=C:/mysql/bin/cluster-logs   # Directory for management node log files

[ndbd]
# Options for data node "A":
                                # (one [ndbd] section per data node)
HostName=198.51.100.30          # Hostname or IP address

[ndbd]
# Options for data node "B":
HostName=198.51.100.40          # Hostname or IP address

[mysqld]
# SQL node options:
HostName=198.51.100.20          # Hostname or IP address
</pre><p>
            Save this file as the text file
            <code class="filename">C:\mysql\bin\config.ini</code>.
</p></li></ol>
</div>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Important
</div>
<p>
          A single backslash character (<code class="literal">\</code>) cannot be
          used when specifying directory paths in program options or
          configuration files used by NDB Cluster on Windows. Instead,
          you must either escape each backslash character with a second
          backslash (<code class="literal">\\</code>), or replace the backslash
          with a forward slash character (<code class="literal">/</code>). For
          example, the following line from the
          <code class="literal">[ndb_mgmd]</code> section of an NDB Cluster
          <code class="filename">config.ini</code> file does not work:
        </p><pre data-lang="ini" class="programlisting">
DataDir=C:\mysql\bin\cluster-logs
</pre><p>
          Instead, you may use either of the following:
        </p><pre data-lang="ini" class="programlisting">
DataDir=C:\\mysql\\bin\\cluster-logs  # Escaped backslashes
</pre><pre data-lang="ini" class="programlisting">
DataDir=C:/mysql/bin/cluster-logs     # Forward slashes
</pre><p>
          For reasons of brevity and legibility, we recommend that you
          use forward slashes in directory paths used in NDB Cluster
          program options and configuration files on Windows.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-install-windows-source"></a>22.2.3.2 Compiling and Installing NDB Cluster from Source on Windows</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091606180288"></a><a class="indexterm" name="idm140091606178800"></a><p>
        Oracle provides precompiled NDB Cluster binaries for Windows
        which should be adequate for most users. However, if you wish,
        it is also possible to compile NDB Cluster for Windows from
        source code. The procedure for doing this is almost identical to
        the procedure used to compile the standard MySQL Server binaries
        for Windows, and uses the same tools. However, there are two
        major differences:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            To build NDB Cluster 8.0, use the MySQL Server 8.0 sources,
            which you can obtain from
            <a class="ulink" href="https://dev.mysql.com/downloads/" target="_top">https://dev.mysql.com/downloads/</a>.
          </p><p>
            Formerly, NDB Cluster used its own source code. In MySQL 8.0
            and NDB Cluster 8.0, this is no longer the case, and
            <span class="emphasis"><em>both products are now built from the same
            source</em></span>.
          </p></li><li class="listitem"><p>
            You must configure the build using the
            <a class="link" href="installing.html#option_cmake_with_ndbcluster"><code class="option">WITH_NDBCLUSTER</code></a> option in
            addition to any other build options you wish to use with
            <span class="command"><strong>CMake</strong></span>.
            <code class="option">WITH_NDBCLUSTER_STORAGE_ENGINE</code> and
            <code class="option">WITH_PLUGIN_NDBCLUSTER</code> are supported as
            aliases for <code class="option">WITH_NDBCLUSTER</code>, and work in
            exactly the same way.
</p></li></ul>
</div>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Important
</div>
<p>
          The <a class="link" href="installing.html#option_cmake_with_ndb_java"><code class="option">WITH_NDB_JAVA</code></a> option is
          enabled by default. This means that, by default, if
          <span class="command"><strong>CMake</strong></span> cannot find the location of Java on
          your system, the configuration process fails; if you do not
          wish to enable Java and ClusterJ support, you must indicate
          this explicitly by configuring the build using
          <code class="option">-DWITH_NDB_JAVA=OFF</code>. (Bug #12379735) Use
          <a class="link" href="installing.html#option_cmake_with_classpath"><code class="option">WITH_CLASSPATH</code></a> to provide the
          Java classpath if needed.
</p>
</div>
<p>
        For more information about <span class="command"><strong>CMake</strong></span> options
        specific to building NDB Cluster, see
        <a class="link" href="installing.html#cmake-mysql-cluster-options" title="CMake Options for Compiling NDB Cluster">Options for
        Compiling NDB Cluster</a>.
      </p><p>
        Once the build process is complete, you can create a Zip archive
        containing the compiled binaries;
        <a class="xref" href="installing.html#installing-source-distribution" title="2.9.2 Installing MySQL Using a Standard Source Distribution">Section 2.9.2, “Installing MySQL Using a Standard Source Distribution”</a> provides the
        commands needed to perform this task on Windows systems. The NDB
        Cluster binaries can be found in the <code class="filename">bin</code>
        directory of the resulting archive, which is equivalent to the
        <code class="literal">no-install</code> archive, and which can be
        installed and configured in the same manner. For more
        information, see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows-binary" title="22.2.3.1 Installing NDB Cluster on Windows from a Binary Release">Section 22.2.3.1, “Installing NDB Cluster on Windows from a Binary Release”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-install-windows-initial-start"></a>22.2.3.3 Initial Startup of NDB Cluster on Windows</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091606158080"></a><p>
        Once the NDB Cluster executables and needed configuration files
        are in place, performing an initial start of the cluster is
        simply a matter of starting the NDB Cluster executables for all
        nodes in the cluster. Each cluster node process must be started
        separately, and on the host computer where it resides. The
        management node should be started first, followed by the data
        nodes, and then finally by any SQL nodes.
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            On the management node host, issue the following command
            from the command line to start the management node process.
            The output should appear similar to what is shown here:
          </p><pre data-lang="terminal" class="programlisting">
C:\mysql\bin&gt; <strong class="userinput"><code>ndb_mgmd</code></strong>
2010-06-23 07:53:34 [MgmtSrvr] INFO -- NDB Cluster Management Server. mysql-8.0.17-ndb-8.0.17
2010-06-23 07:53:34 [MgmtSrvr] INFO -- Reading cluster configuration from 'config.ini'
</pre><p>
            The management node process continues to print logging
            output to the console. This is normal, because the
            management node is not running as a Windows service. (If you
            have used NDB Cluster on a Unix-like platform such as Linux,
            you may notice that the management node's default
            behavior in this regard on Windows is effectively the
            opposite of its behavior on Unix systems, where it runs by
            default as a Unix daemon process. This behavior is also true
            of NDB Cluster data node processes running on Windows.) For
            this reason, do not close the window in which
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd.exe</strong></span></a> is running; doing so kills
            the management node process. (See
            <a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows-service" title="22.2.3.4 Installing NDB Cluster Processes as Windows Services">Section 22.2.3.4, “Installing NDB Cluster Processes as Windows Services”</a>,
            where we show how to install and run NDB Cluster processes
            as Windows services.)
          </p><p>
            The required <code class="option">-f</code> option tells the management
            node where to find the global configuration file
            (<code class="filename">config.ini</code>). The long form of this
            option is <a class="link" href="mysql-cluster.html#option_ndb_mgmd_config-file"><code class="option">--config-file</code></a>.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              An NDB Cluster management node caches the configuration
              data that it reads from <code class="filename">config.ini</code>;
              once it has created a configuration cache, it ignores the
              <code class="filename">config.ini</code> file on subsequent starts
              unless forced to do otherwise. This means that, if the
              management node fails to start due to an error in this
              file, you must make the management node re-read
              <code class="filename">config.ini</code> after you have corrected
              any errors in it. You can do this by starting
              <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd.exe</strong></span></a> with the
              <a class="link" href="mysql-cluster.html#option_ndb_mgmd_reload"><code class="option">--reload</code></a> or
              <a class="link" href="mysql-cluster.html#option_ndb_mgmd_initial"><code class="option">--initial</code></a> option on the
              command line. Either of these options works to refresh the
              configuration cache.
            </p><p>
              It is not necessary or advisable to use either of these
              options in the management node's
              <code class="filename">my.ini</code> file.
</p>
</div>
<p>
            For additional information about options which can be used
            with <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>, see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon">Section 22.4.4, “<span class="command"><strong>ndb_mgmd</strong></span> — The NDB Cluster Management Server Daemon”</a>, as well
            as <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
          </p></li><li class="listitem"><p>
            On each of the data node hosts, run the command shown here
            to start the data node processes:
          </p><pre data-lang="terminal" class="programlisting">
C:\mysql\bin&gt; <strong class="userinput"><code>ndbd</code></strong>
2010-06-23 07:53:46 [ndbd] INFO -- Configuration fetched from 'localhost:1186', generation: 1
</pre><p>
            In each case, the first line of output from the data node
            process should resemble what is shown in the preceding
            example, and is followed by additional lines of logging
            output. As with the management node process, this is normal,
            because the data node is not running as a Windows service.
            For this reason, do not close the console window in which
            the data node process is running; doing so kills
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd.exe</strong></span></a>. (For more information, see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows-service" title="22.2.3.4 Installing NDB Cluster Processes as Windows Services">Section 22.2.3.4, “Installing NDB Cluster Processes as Windows Services”</a>.)
          </p></li><li class="listitem"><p>
            Do not start the SQL node yet; it cannot connect to the
            cluster until the data nodes have finished starting, which
            may take some time. Instead, in a new console window on the
            management node host, start the NDB Cluster management
            client <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm.exe</strong></span></a>, which should be in
            <code class="filename">C:\mysql\bin</code> on the management node
            host. (Do not try to re-use the console window where
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd.exe</strong></span></a> is running by typing
            <span class="keycap"><strong>CTRL</strong></span>+<span class="keycap"><strong>C</strong></span>, as this kills the
            management node.) The resulting output should look like
            this:
          </p><pre data-lang="terminal" class="programlisting">
C:\mysql\bin&gt; <strong class="userinput"><code>ndb_mgm</code></strong>
-- NDB Cluster -- Management Client --
ndb_mgm&gt;
</pre><p>
            When the prompt <code class="literal">ndb_mgm&gt;</code> appears, this
            indicates that the management client is ready to receive NDB
            Cluster management commands. You can observe the status of
            the data nodes as they start by entering
            <a class="link" href="mysql-cluster.html#ndbclient-status"><code class="literal">ALL STATUS</code></a> at the
            management client prompt. This command causes a running
            report of the data nodes's startup sequence, which
            should look something like this:
          </p><pre data-lang="ndbmgm" class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>ALL STATUS</code></strong>
Connected to Management Server at: localhost:1186
Node 2: starting (Last completed phase 3) (mysql-8.0.17-ndb-8.0.17)
Node 3: starting (Last completed phase 3) (mysql-8.0.17-ndb-8.0.17)

Node 2: starting (Last completed phase 4) (mysql-8.0.17-ndb-8.0.17)
Node 3: starting (Last completed phase 4) (mysql-8.0.17-ndb-8.0.17)

Node 2: Started (version 8.0.17)
Node 3: Started (version 8.0.17)

ndb_mgm&gt;
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              Commands issued in the management client are not
              case-sensitive; we use uppercase as the canonical form of
              these commands, but you are not required to observe this
              convention when inputting them into the
              <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> client. For more information,
              see <a class="xref" href="mysql-cluster.html#mysql-cluster-mgm-client-commands" title="22.5.2 Commands in the NDB Cluster Management Client">Section 22.5.2, “Commands in the NDB Cluster Management Client”</a>.
</p>
</div>
<p>
            The output produced by <a class="link" href="mysql-cluster.html#ndbclient-status"><code class="literal">ALL
            STATUS</code></a> is likely to vary from what is shown here,
            according to the speed at which the data nodes are able to
            start, the release version number of the NDB Cluster
            software you are using, and other factors. What is
            significant is that, when you see that both data nodes have
            started, you are ready to start the SQL node.
          </p><p>
            You can leave <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm.exe</strong></span></a> running; it has
            no negative impact on the performance of the NDB Cluster,
            and we use it in the next step to verify that the SQL node
            is connected to the cluster after you have started it.
          </p></li><li class="listitem"><p>
            On the computer designated as the SQL node host, open a
            console window and navigate to the directory where you
            unpacked the NDB Cluster binaries (if you are following our
            example, this is <code class="filename">C:\mysql\bin</code>).
          </p><p>
            Start the SQL node by invoking <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld.exe</strong></span></a>
            from the command line, as shown here:
          </p><pre data-lang="terminal" class="programlisting">
C:\mysql\bin&gt; <strong class="userinput"><code>mysqld --console</code></strong>
</pre><p>
            The <a class="link" href="server-administration.html#option_mysqld_console"><code class="option">--console</code></a> option causes
            logging information to be written to the console, which can
            be helpful in the event of problems. (Once you are satisfied
            that the SQL node is running in a satisfactory manner, you
            can stop it and restart it out without the
            <a class="link" href="server-administration.html#option_mysqld_console"><code class="option">--console</code></a> option, so that
            logging is performed normally.)
          </p><p>
            In the console window where the management client
            (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm.exe</strong></span></a>) is running on the
            management node host, enter the
            <a class="link" href="mysql-cluster.html#ndbclient-show"><code class="literal">SHOW</code></a> command, which
            should produce output similar to what is shown here:
          </p><pre data-lang="ndbmgm" class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>SHOW</code></strong>
Connected to Management Server at: localhost:1186
Cluster Configuration
---------------------
[ndbd(NDB)]     2 node(s)
id=2    @198.51.100.30  (Version: 8.0.17-ndb-8.0.17, Nodegroup: 0, *)
id=3    @198.51.100.40  (Version: 8.0.17-ndb-8.0.17, Nodegroup: 0)

[ndb_mgmd(MGM)] 1 node(s)
id=1    @198.51.100.10  (Version: 8.0.17-ndb-8.0.17)

[mysqld(API)]   1 node(s)
id=4    @198.51.100.20  (Version: 8.0.17-ndb-8.0.17)
</pre><p>
            You can also verify that the SQL node is connected to the
            NDB Cluster in the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client
            (<a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql.exe</strong></span></a>) using the
            <a class="link" href="sql-syntax.html#show-engine-ndb-status" title="SHOW ENGINE NDB STATUS"><code class="literal">SHOW ENGINE NDB STATUS</code></a>
            statement.
</p></li></ol>
</div>
<p>
        You should now be ready to work with database objects and data
        using NDB Cluster 's
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> storage engine. See
        <a class="xref" href="mysql-cluster.html#mysql-cluster-install-example-data" title="22.2.6 NDB Cluster Example with Tables and Data">Section 22.2.6, “NDB Cluster Example with Tables and Data”</a>, for more
        information and examples.
      </p><p>
        You can also install <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd.exe</strong></span></a>,
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd.exe</strong></span></a>, and <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd.exe</strong></span></a>
        as Windows services. For information on how to do this, see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows-service" title="22.2.3.4 Installing NDB Cluster Processes as Windows Services">Section 22.2.3.4, “Installing NDB Cluster Processes as Windows Services”</a>).
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-install-windows-service"></a>22.2.3.4 Installing NDB Cluster Processes as Windows Services</h4>

</div>

</div>

</div>
<p>
        Once you are satisfied that NDB Cluster is running as desired,
        you can install the management nodes and data nodes as Windows
        services, so that these processes are started and stopped
        automatically whenever Windows is started or stopped. This also
        makes it possible to control these processes from the command
        line with the appropriate <span class="command"><strong>SC START</strong></span> and
        <span class="command"><strong>SC STOP</strong></span> commands, or using the Windows
        graphical <span class="command"><strong>Services</strong></span> utility. <span class="command"><strong>NET
        START</strong></span> and <span class="command"><strong>NET STOP</strong></span> commands can
        also be used.
      </p><p>
        Installing programs as Windows services usually must be done
        using an account that has Administrator rights on the system.
      </p><p>
        To install the management node as a service on Windows, invoke
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd.exe</strong></span></a> from the command line on the
        machine hosting the management node, using the
        <a class="link" href="mysql-cluster.html#option_ndb_mgmd_install"><code class="option">--install</code></a> option, as shown
        here:
      </p><pre data-lang="terminal" class="programlisting">
C:\&gt; <strong class="userinput"><code>C:\mysql\bin\ndb_mgmd.exe --install</code></strong>
Installing service 'NDB Cluster Management Server'
  as '"C:\mysql\bin\ndbd.exe" "--service=ndb_mgmd"'
Service successfully installed.
</pre>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
          When installing an NDB Cluster program as a Windows service,
          you should always specify the complete path; otherwise the
          service installation may fail with the error <span class="errortext">The
          system cannot find the file specified</span>.
</p>
</div>
<p>
        The <a class="link" href="mysql-cluster.html#option_ndb_mgmd_install"><code class="option">--install</code></a> option must be
        used first, ahead of any other options that might be specified
        for <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd.exe</strong></span></a>. However, it is preferable
        to specify such options in an options file instead. If your
        options file is not in one of the default locations as shown in
        the output of <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd.exe</strong></span></a>
        <a class="link" href="mysql-cluster.html#option_ndb_common_help"><code class="option">--help</code></a>, you can specify the
        location using the
        <a class="link" href="mysql-cluster.html#option_ndb_mgmd_config-file"><code class="option">--config-file</code></a> option.
      </p><p>
        Now you should be able to start and stop the management server
        like this:
      </p><pre data-lang="terminal" class="programlisting">
C:\&gt; <strong class="userinput"><code>SC START ndb_mgmd</code></strong>

C:\&gt; <strong class="userinput"><code>SC STOP ndb_mgmd</code></strong>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          If using <span class="command"><strong>NET</strong></span> commands, you can also start
          or stop the management server as a Windows service using the
          descriptive name, as shown here:
        </p><pre data-lang="terminal" class="programlisting">
C:\&gt; <strong class="userinput"><code>NET START 'NDB Cluster Management Server'</code></strong>
The NDB Cluster Management Server service is starting.
The NDB Cluster Management Server service was started successfully.

C:\&gt; <strong class="userinput"><code>NET STOP  'NDB Cluster Management Server'</code></strong>
The NDB Cluster Management Server service is stopping..
The NDB Cluster Management Server service was stopped successfully.
</pre>
</div>
<p>
        It is usually simpler to specify a short service name or to
        permit the default service name to be used when installing the
        service, and then reference that name when starting or stopping
        the service. To specify a service name other than
        <code class="literal">ndb_mgmd</code>, append it to the
        <a class="link" href="mysql-cluster.html#option_ndb_mgmd_install"><code class="option">--install</code></a> option, as shown in
        this example:
      </p><pre data-lang="terminal" class="programlisting">
C:\&gt; <strong class="userinput"><code>C:\mysql\bin\ndb_mgmd.exe --install=mgmd1</code></strong>
Installing service 'NDB Cluster Management Server'
  as '"C:\mysql\bin\ndb_mgmd.exe" "--service=mgmd1"'
Service successfully installed.
</pre><p>
        Now you should be able to start or stop the service using the
        name you have specified, like this:
      </p><pre data-lang="terminal" class="programlisting">
C:\&gt; <strong class="userinput"><code>SC START mgmd1</code></strong>

C:\&gt; <strong class="userinput"><code>SC STOP mgmd1</code></strong>
</pre><p>
        To remove the management node service, use <span class="command"><strong>SC DELETE
        <em class="replaceable"><code>service_name</code></em></strong></span>:
      </p><pre data-lang="terminal" class="programlisting">
C:\&gt; <strong class="userinput"><code>SC DELETE mgmd1</code></strong>
</pre><p>
        Alternatively, invoke <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd.exe</strong></span></a> with the
        <a class="link" href="mysql-cluster.html#option_ndb_mgmd_remove"><code class="option">--remove</code></a> option, as shown here:
      </p><pre data-lang="terminal" class="programlisting">
C:\&gt; <strong class="userinput"><code>C:\mysql\bin\ndb_mgmd.exe --remove</code></strong>
Removing service 'NDB Cluster Management Server'
Service successfully removed.
</pre><p>
        If you installed the service using a service name other than the
        default, pass the service name as the value of the
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd.exe</strong></span></a>
        <a class="link" href="mysql-cluster.html#option_ndb_mgmd_remove"><code class="option">--remove</code></a> option, like this:
      </p><pre data-lang="terminal" class="programlisting">
C:\&gt; <strong class="userinput"><code>C:\mysql\bin\ndb_mgmd.exe --remove=mgmd1</code></strong>
Removing service 'mgmd1'
Service successfully removed.
</pre><p>
        Installation of an NDB Cluster data node process as a Windows
        service can be done in a similar fashion, using the
        <a class="link" href="mysql-cluster.html#option_ndbd_install"><code class="option">--install</code></a> option for
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd.exe</strong></span></a> (or <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd.exe</strong></span></a>),
        as shown here:
      </p><pre data-lang="terminal" class="programlisting">
C:\&gt; <strong class="userinput"><code>C:\mysql\bin\ndbd.exe --install</code></strong>
Installing service 'NDB Cluster Data Node Daemon' as '"C:\mysql\bin\ndbd.exe" "--service=ndbd"'
Service successfully installed.
</pre><p>
        Now you can start or stop the data node as shown in the
        following example:
      </p><pre data-lang="terminal" class="programlisting">
C:\&gt; <strong class="userinput"><code>SC START ndbd</code></strong>

C:\&gt; <strong class="userinput"><code>SC STOP ndbd</code></strong>
</pre><p>
        To remove the data node service, use <span class="command"><strong>SC DELETE
        <em class="replaceable"><code>service_name</code></em></strong></span>:
      </p><pre data-lang="terminal" class="programlisting">
C:\&gt; <strong class="userinput"><code>SC DELETE ndbd</code></strong>
</pre><p>
        Alternatively, invoke <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd.exe</strong></span></a> with the
        <a class="link" href="mysql-cluster.html#option_ndbd_remove"><code class="option">--remove</code></a> option, as shown here:
      </p><pre data-lang="terminal" class="programlisting">
C:\&gt; <strong class="userinput"><code>C:\mysql\bin\ndbd.exe --remove</code></strong>
Removing service 'NDB Cluster Data Node Daemon'
Service successfully removed.
</pre><p>
        As with <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd.exe</strong></span></a> (and
        <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld.exe</strong></span></a>), when installing
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd.exe</strong></span></a> as a Windows service, you can also
        specify a name for the service as the value of
        <a class="link" href="mysql-cluster.html#option_ndbd_install"><code class="option">--install</code></a>, and then use it when
        starting or stopping the service, like this:
      </p><pre data-lang="terminal" class="programlisting">
C:\&gt; <strong class="userinput"><code>C:\mysql\bin\ndbd.exe --install=dnode1</code></strong>
Installing service 'dnode1' as '"C:\mysql\bin\ndbd.exe" "--service=dnode1"'
Service successfully installed.

C:\&gt; <strong class="userinput"><code>SC START dnode1</code></strong>

C:\&gt; <strong class="userinput"><code>SC STOP dnode1</code></strong>
</pre><p>
        If you specified a service name when installing the data node
        service, you can use this name when removing it as well, as
        shown here:
      </p><pre data-lang="terminal" class="programlisting">
C:\&gt; <strong class="userinput"><code>SC DELETE dnode1</code></strong>
</pre><p>
        Alternatively, you can pass the service name as the value of the
        <code class="filename">ndbd.exe</code>
        <a class="link" href="mysql-cluster.html#option_ndbd_remove"><code class="option">--remove</code></a> option, as shown here:
      </p><pre data-lang="terminal" class="programlisting">
C:\&gt; <strong class="userinput"><code>C:\mysql\bin\ndbd.exe --remove=dnode1</code></strong>
Removing service 'dnode1'
Service successfully removed.
</pre><p>
        Installation of the SQL node as a Windows service, starting the
        service, stopping the service, and removing the service are done
        in a similar fashion, using <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>
        <code class="option">--install</code>, <span class="command"><strong>SC START</strong></span>,
        <span class="command"><strong>SC STOP</strong></span>, and <span class="command"><strong>SC DELETE</strong></span> (or
        <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>
        <a class="link" href="server-administration.html#option_mysqld_remove"><code class="option">--remove</code></a>). <span class="command"><strong>NET</strong></span>
        commands can also be used to start or stop a service. For
        additional information, see
        <a class="xref" href="installing.html#windows-start-service" title="2.3.5.8 Starting MySQL as a Windows Service">Section 2.3.5.8, “Starting MySQL as a Windows Service”</a>.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-install-configuration"></a>22.2.4 Initial Configuration of NDB Cluster</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091605996832"></a><a class="indexterm" name="idm140091605995344"></a><a class="indexterm" name="idm140091605993856"></a><p>
      In this section, we discuss manual configuration of an installed
      NDB Cluster by creating and editing configuration files.
    </p><p>
      NDB Cluster also provides a GUI installer which can be used to
      perform the configuration without the need to edit text files in a
      separate application. For more information, see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-installer" title="22.2.1 The NDB Cluster Auto-Installer">Section 22.2.1, “The NDB Cluster Auto-Installer”</a>.
    </p><p>
      For our four-node, four-host NDB Cluster (see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-install-nodes-hosts" title="Cluster nodes and host computers">Cluster nodes and host computers</a>), it is
      necessary to write four configuration files, one per node host.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Each data node or SQL node requires a
          <code class="filename">my.cnf</code> file that provides two pieces of
          information: a <span class="firstterm">connection
          string</span> that tells the node where to find the
          management node, and a line telling the MySQL server on this
          host (the machine hosting the data node) to enable the
          <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> storage engine.
        </p><p>
          For more information on connection strings, see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-connection-strings" title="22.3.3.3 NDB Cluster Connection Strings">Section 22.3.3.3, “NDB Cluster Connection Strings”</a>.
        </p></li><li class="listitem"><p>
          The management node needs a <code class="filename">config.ini</code>
          file telling it how many replicas to maintain, how much memory
          to allocate for data and indexes on each data node, where to
          find the data nodes, where to save data to disk on each data
          node, and where to find any SQL nodes.
</p></li></ul>
</div>
<p><b>Configuring the data nodes and SQL nodes. </b>
        The <code class="filename">my.cnf</code> file needed for the data nodes
        is fairly simple. The configuration file should be located in
        the <code class="filename">/etc</code> directory and can be edited using
        any text editor. (Create the file if it does not exist.) For
        example:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>vi /etc/my.cnf</code></strong>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        We show <span class="command"><strong>vi</strong></span> being used here to create the
        file, but any text editor should work just as well.
</p>
</div>
<p>
      For each data node and SQL node in our example setup,
      <code class="filename">my.cnf</code> should look like this:
    </p><pre data-lang="ini" class="programlisting">
[mysqld]
# Options for mysqld process:
ndbcluster                      # run NDB storage engine

[mysql_cluster]
# Options for NDB Cluster processes:
ndb-connectstring=198.51.100.10  # location of management server
</pre><p>
      After entering the preceding information, save this file and exit
      the text editor. Do this for the machines hosting data node
      <span class="quote">“<span class="quote">A</span>”</span>, data node <span class="quote">“<span class="quote">B</span>”</span>, and the SQL node.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
        Once you have started a <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> process with
        the <code class="literal">ndbcluster</code> and
        <code class="literal">ndb-connectstring</code> parameters in the
        <code class="literal">[mysqld]</code> and
        <code class="literal">[mysql_cluster]</code> sections of the
        <code class="filename">my.cnf</code> file as shown previously, you cannot
        execute any <a class="link" href="sql-syntax.html#create-table" title="13.1.20 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> or
        <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statements without
        having actually started the cluster. Otherwise, these statements
        will fail with an error. This is by design.
</p>
</div>
<p><b>Configuring the management node. </b>
        The first step in configuring the management node is to create
        the directory in which the configuration file can be found and
        then to create the file itself. For example (running as
        <code class="literal">root</code>):
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>mkdir /var/lib/mysql-cluster</code></strong>
shell&gt; <strong class="userinput"><code>cd /var/lib/mysql-cluster</code></strong>
shell&gt; <strong class="userinput"><code>vi config.ini</code></strong>
</pre><p>
      For our representative setup, the <code class="filename">config.ini</code>
      file should read as follows:
    </p><pre data-lang="ini" class="programlisting">
[ndbd default]
# Options affecting ndbd processes on all data nodes:
NoOfReplicas=2    # Number of replicas
DataMemory=98M    # How much memory to allocate for data storage

[ndb_mgmd]
# Management process options:
HostName=198.51.100.10          # Hostname or IP address of MGM node
DataDir=/var/lib/mysql-cluster  # Directory for MGM node log files

[ndbd]
# Options for data node "A":
                                # (one [ndbd] section per data node)
HostName=198.51.100.30          # Hostname or IP address
NodeId=2                        # Node ID for this data node
DataDir=/usr/local/mysql/data   # Directory for this data node's data files

[ndbd]
# Options for data node "B":
HostName=198.51.100.40          # Hostname or IP address
NodeId=3                        # Node ID for this data node
DataDir=/usr/local/mysql/data   # Directory for this data node's data files

[mysqld]
# SQL node options:
HostName=198.51.100.20          # Hostname or IP address
                                # (additional mysqld connections can be
                                # specified for this node for various
                                # purposes such as running ndb_restore)
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        The <code class="literal">world</code> database can be downloaded from
        <a class="ulink" href="https://dev.mysql.com/doc/index-other.html" target="_top">https://dev.mysql.com/doc/index-other.html</a>.
</p>
</div>
<p>
      After all the configuration files have been created and these
      minimal options have been specified, you are ready to proceed with
      starting the cluster and verifying that all processes are running.
      We discuss how this is done in
      <a class="xref" href="mysql-cluster.html#mysql-cluster-install-first-start" title="22.2.5 Initial Startup of NDB Cluster">Section 22.2.5, “Initial Startup of NDB Cluster”</a>.
    </p><p>
      For more detailed information about the available NDB Cluster
      configuration parameters and their uses, see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-config-file" title="22.3.3 NDB Cluster Configuration Files">Section 22.3.3, “NDB Cluster Configuration Files”</a>, and
      <a class="xref" href="mysql-cluster.html#mysql-cluster-configuration" title="22.3 Configuration of NDB Cluster">Section 22.3, “Configuration of NDB Cluster”</a>. For configuration
      of NDB Cluster as relates to making backups, see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-backup-configuration" title="22.5.3.3 Configuration for NDB Cluster Backups">Section 22.5.3.3, “Configuration for NDB Cluster Backups”</a>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        The default port for Cluster management nodes is 1186; the
        default port for data nodes is 2202. However, the cluster can
        automatically allocate ports for data nodes from those that are
        already free.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-install-first-start"></a>22.2.5 Initial Startup of NDB Cluster</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091605946688"></a><p>
      Starting the cluster is not very difficult after it has been
      configured. Each cluster node process must be started separately,
      and on the host where it resides. The management node should be
      started first, followed by the data nodes, and then finally by any
      SQL nodes:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
          On the management host, issue the following command from the
          system shell to start the management node process:
        </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_mgmd -f /var/lib/mysql-cluster/config.ini</code></strong>
</pre><p>
          The first time that it is started, <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>
          must be told where to find its configuration file, using the
          <code class="option">-f</code> or
          <a class="link" href="mysql-cluster.html#option_ndb_mgmd_config-file"><code class="option">--config-file</code></a> option. (See
          <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon">Section 22.4.4, “<span class="command"><strong>ndb_mgmd</strong></span> — The NDB Cluster Management Server Daemon”</a>, for
          details.)
        </p><p>
          For additional options which can be used with
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>, see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
        </p></li><li class="listitem"><p>
          On each of the data node hosts, run this command to start the
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> process:
        </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndbd</code></strong>
</pre></li><li class="listitem"><p>
          If you used RPM files to install MySQL on the cluster host
          where the SQL node is to reside, you can (and should) use the
          supplied startup script to start the MySQL server process on
          the SQL node.
</p></li></ol>
</div>
<a class="indexterm" name="idm140091605929760"></a><a class="indexterm" name="idm140091605928272"></a><p>
      If all has gone well, and the cluster has been set up correctly,
      the cluster should now be operational. You can test this by
      invoking the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> management node client.
      The output should look like that shown here, although you might
      see some slight differences in the output depending upon the exact
      version of MySQL that you are using:
    </p><pre data-lang="ndbmgm" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_mgm</code></strong>
-- NDB Cluster -- Management Client --
ndb_mgm&gt; <strong class="userinput"><code>SHOW</code></strong>
Connected to Management Server at: localhost:1186
Cluster Configuration
---------------------
[ndbd(NDB)]     2 node(s)
id=2    @198.51.100.30  (Version: 8.0.17-ndb-8.0.17, Nodegroup: 0, *)
id=3    @198.51.100.40  (Version: 8.0.17-ndb-8.0.17, Nodegroup: 0)

[ndb_mgmd(MGM)] 1 node(s)
id=1    @198.51.100.10  (Version: 8.0.17-ndb-8.0.17)

[mysqld(API)]   1 node(s)
id=4    @198.51.100.20  (Version: 8.0.17-ndb-8.0.17)
</pre><p>
      The SQL node is referenced here as
      <code class="literal">[mysqld(API)]</code>, which reflects the fact that the
      <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> process is acting as an NDB Cluster API
      node.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        The IP address shown for a given NDB Cluster SQL or other API
        node in the output of <a class="link" href="mysql-cluster.html#ndbclient-show"><code class="literal">SHOW</code></a>
        is the address used by the SQL or API node to connect to the
        cluster data nodes, and not to any management node.
</p>
</div>
<p>
      You should now be ready to work with databases, tables, and data
      in NDB Cluster. See
      <a class="xref" href="mysql-cluster.html#mysql-cluster-install-example-data" title="22.2.6 NDB Cluster Example with Tables and Data">Section 22.2.6, “NDB Cluster Example with Tables and Data”</a>, for a brief
      discussion.
</p>
</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-install-example-data"></a>22.2.6 NDB Cluster Example with Tables and Data</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091605915024"></a><a class="indexterm" name="idm140091605913568"></a>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        The information in this section applies to NDB Cluster running
        on both Unix and Windows platforms.
</p>
</div>
<p>
      Working with database tables and data in NDB Cluster is not much
      different from doing so in standard MySQL. There are two key
      points to keep in mind:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          For a table to be replicated in the cluster, it must use the
          <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> storage engine. To
          specify this, use the <code class="literal">ENGINE=NDBCLUSTER</code> or
          <code class="literal">ENGINE=NDB</code> option when creating the table:
        </p><pre data-lang="sql" class="programlisting">
CREATE TABLE <em class="replaceable"><code>tbl_name</code></em> (<em class="replaceable"><code>col_name</code></em> <em class="replaceable"><code>column_definitions</code></em>) ENGINE=NDBCLUSTER;
</pre><p>
          Alternatively, for an existing table that uses a different
          storage engine, use <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>
          to change the table to use
          <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a>:
        </p><pre data-lang="sql" class="programlisting">
ALTER TABLE <em class="replaceable"><code>tbl_name</code></em> ENGINE=NDBCLUSTER;
</pre></li><li class="listitem"><p>
          Every <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> table has a
          primary key. If no primary key is defined by the user when a
          table is created, the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a>
          storage engine automatically generates a hidden one. Such a
          key takes up space just as does any other table index. (It is
          not uncommon to encounter problems due to insufficient memory
          for accommodating these automatically created indexes.)
</p></li></ul>
</div>
<p>
      If you are importing tables from an existing database using the
      output of <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a>, you can open the SQL
      script in a text editor and add the <code class="literal">ENGINE</code>
      option to any table creation statements, or replace any existing
      <code class="literal">ENGINE</code> options. Suppose that you have the
      <code class="literal">world</code> sample database on another MySQL server
      that does not support NDB Cluster, and you want to export the
      <code class="literal">City</code> table:
    </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>mysqldump --add-drop-table world City &gt; city_table.sql</code></strong>
</pre><p>
      The resulting <code class="filename">city_table.sql</code> file will
      contain this table creation statement (and the
      <a class="link" href="sql-syntax.html#insert" title="13.2.6 INSERT Syntax"><code class="literal">INSERT</code></a> statements necessary to
      import the table data):
    </p><pre data-lang="sql" class="programlisting">
DROP TABLE IF EXISTS `City`;
CREATE TABLE `City` (
  `ID` int(11) NOT NULL auto_increment,
  `Name` char(35) NOT NULL default '',
  `CountryCode` char(3) NOT NULL default '',
  `District` char(20) NOT NULL default '',
  `Population` int(11) NOT NULL default '0',
  PRIMARY KEY  (`ID`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

INSERT INTO `City` VALUES (1,'Kabul','AFG','Kabol',1780000);
INSERT INTO `City` VALUES (2,'Qandahar','AFG','Qandahar',237500);
INSERT INTO `City` VALUES (3,'Herat','AFG','Herat',186800);
<em class="replaceable"><code>(remaining INSERT statements omitted)</code></em>
</pre><p>
      You need to make sure that MySQL uses the
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> storage engine for this
      table. There are two ways that this can be accomplished. One of
      these is to modify the table definition
      <span class="emphasis"><em>before</em></span> importing it into the Cluster
      database. Using the <code class="literal">City</code> table as an example,
      modify the <code class="literal">ENGINE</code> option of the definition as
      follows:
    </p><pre data-lang="sql" class="programlisting">
DROP TABLE IF EXISTS `City`;
CREATE TABLE `City` (
  `ID` int(11) NOT NULL auto_increment,
  `Name` char(35) NOT NULL default '',
  `CountryCode` char(3) NOT NULL default '',
  `District` char(20) NOT NULL default '',
  `Population` int(11) NOT NULL default '0',
  PRIMARY KEY  (`ID`)
) <span class="bold"><strong>ENGINE=NDBCLUSTER</strong></span> DEFAULT CHARSET=latin1;

INSERT INTO `City` VALUES (1,'Kabul','AFG','Kabol',1780000);
INSERT INTO `City` VALUES (2,'Qandahar','AFG','Qandahar',237500);
INSERT INTO `City` VALUES (3,'Herat','AFG','Herat',186800);
<em class="replaceable"><code>(remaining INSERT statements omitted)</code></em>
</pre><p>
      This must be done for the definition of each table that is to be
      part of the clustered database. The easiest way to accomplish this
      is to do a search-and-replace on the file that contains the
      definitions and replace all instances of
      <code class="literal">TYPE=<em class="replaceable"><code>engine_name</code></em></code> or
      <code class="literal">ENGINE=<em class="replaceable"><code>engine_name</code></em></code>
      with <code class="literal">ENGINE=NDBCLUSTER</code>. If you do not want to
      modify the file, you can use the unmodified file to create the
      tables, and then use <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> to
      change their storage engine. The particulars are given later in
      this section.
    </p><p>
      Assuming that you have already created a database named
      <code class="literal">world</code> on the SQL node of the cluster, you can
      then use the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> command-line client to read
      <code class="filename">city_table.sql</code>, and create and populate the
      corresponding table in the usual manner:
    </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>mysql world &lt; city_table.sql</code></strong>
</pre><p>
      It is very important to keep in mind that the preceding command
      must be executed on the host where the SQL node is running (in
      this case, on the machine with the IP address
      <code class="literal">198.51.100.20</code>).
    </p><p>
      To create a copy of the entire <code class="literal">world</code> database
      on the SQL node, use <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a> on the
      noncluster server to export the database to a file named
      <code class="filename">world.sql</code> (for example, in the
      <code class="filename">/tmp</code> directory). Then modify the table
      definitions as just described and import the file into the SQL
      node of the cluster like this:
    </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>mysql world &lt; /tmp/world.sql</code></strong>
</pre><p>
      If you save the file to a different location, adjust the preceding
      instructions accordingly.
    </p><p>
      Running <a class="link" href="sql-syntax.html#select" title="13.2.10 SELECT Syntax"><code class="literal">SELECT</code></a> queries on the SQL
      node is no different from running them on any other instance of a
      MySQL server. To run queries from the command line, you first need
      to log in to the MySQL Monitor in the usual way (specify the
      <code class="literal">root</code> password at the <code class="literal">Enter
      password:</code> prompt):
    </p><pre data-lang="sql" class="programlisting">
shell&gt; <strong class="userinput"><code>mysql -u root -p</code></strong>
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 1 to server version: 8.0.17-ndb-8.0.17

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

mysql&gt;
</pre><p>
      We simply use the MySQL server's <code class="literal">root</code>
      account and assume that you have followed the standard security
      precautions for installing a MySQL server, including setting a
      strong <code class="literal">root</code> password. For more information, see
      <a class="xref" href="installing.html#default-privileges" title="2.10.4 Securing the Initial MySQL Account">Section 2.10.4, “Securing the Initial MySQL Account”</a>.
    </p><p>
      It is worth taking into account that NDB Cluster nodes do
      <span class="emphasis"><em>not</em></span> make use of the MySQL privilege system
      when accessing one another. Setting or changing MySQL user
      accounts (including the <code class="literal">root</code> account) effects
      only applications that access the SQL node, not interaction
      between nodes. See
      <a class="xref" href="mysql-cluster.html#mysql-cluster-security-mysql-privileges" title="22.5.12.2 NDB Cluster and MySQL Privileges">Section 22.5.12.2, “NDB Cluster and MySQL Privileges”</a>, for
      more information.
    </p><p>
      If you did not modify the <code class="literal">ENGINE</code> clauses in the
      table definitions prior to importing the SQL script, you should
      run the following statements at this point:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>USE world;</code></strong>
mysql&gt; <strong class="userinput"><code>ALTER TABLE City ENGINE=NDBCLUSTER;</code></strong>
mysql&gt; <strong class="userinput"><code>ALTER TABLE Country ENGINE=NDBCLUSTER;</code></strong>
mysql&gt; <strong class="userinput"><code>ALTER TABLE CountryLanguage ENGINE=NDBCLUSTER;</code></strong>
</pre><p>
      Selecting a database and running a <span class="command"><strong>SELECT</strong></span> query
      against a table in that database is also accomplished in the usual
      manner, as is exiting the MySQL Monitor:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>USE world;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT Name, Population FROM City ORDER BY Population DESC LIMIT 5;</code></strong>
+-----------+------------+
| Name      | Population |
+-----------+------------+
| Bombay    |   10500000 |
| Seoul     |    9981619 |
| São Paulo |    9968485 |
| Shanghai  |    9696300 |
| Jakarta   |    9604900 |
+-----------+------------+
5 rows in set (0.34 sec)

mysql&gt; <strong class="userinput"><code>\q</code></strong>
Bye

shell&gt;
</pre><p>
      Applications that use MySQL can employ standard APIs to access
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables. It is important to
      remember that your application must access the SQL node, and not
      the management or data nodes. This brief example shows how we
      might execute the <a class="link" href="sql-syntax.html#select" title="13.2.10 SELECT Syntax"><code class="literal">SELECT</code></a> statement
      just shown by using the PHP 5.X <code class="literal">mysqli</code>
      extension running on a Web server elsewhere on the network:
    </p><pre data-lang="php" class="programlisting">
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta http-equiv="Content-Type"
           content="text/html; charset=iso-8859-1"&gt;
  &lt;title&gt;SIMPLE mysqli SELECT&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;?php
  # connect to SQL node:
  $link = new mysqli('198.51.100.20', 'root', '<em class="replaceable"><code>root_password</code></em>', 'world');
  # parameters for mysqli constructor are:
  #   host, user, password, database

  if( mysqli_connect_errno() )
    die("Connect failed: " . mysqli_connect_error());

  $query = "SELECT Name, Population
            FROM City
            ORDER BY Population DESC
            LIMIT 5";

  # if no errors...
  if( $result = $link-&gt;query($query) )
  {
?&gt;
&lt;table border="1" width="40%" cellpadding="4" cellspacing ="1"&gt;
  &lt;tbody&gt;
  &lt;tr&gt;
    &lt;th width="10%"&gt;City&lt;/th&gt;
    &lt;th&gt;Population&lt;/th&gt;
  &lt;/tr&gt;
&lt;?
    # then display the results...
    while($row = $result-&gt;fetch_object())
      printf("&lt;tr&gt;\n  &lt;td align=\"center\"&gt;%s&lt;/td&gt;&lt;td&gt;%d&lt;/td&gt;\n&lt;/tr&gt;\n",
              $row-&gt;Name, $row-&gt;Population);
?&gt;
  &lt;/tbody
&lt;/table&gt;
&lt;?
  # ...and verify the number of rows that were retrieved
    printf("&lt;p&gt;Affected rows: %d&lt;/p&gt;\n", $link-&gt;affected_rows);
  }
  else
    # otherwise, tell us what went wrong
    echo mysqli_error();

  # free the result set and the mysqli connection object
  $result-&gt;close();
  $link-&gt;close();
?&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre><p>
      We assume that the process running on the Web server can reach the
      IP address of the SQL node.
    </p><p>
      In a similar fashion, you can use the MySQL C API, Perl-DBI,
      Python-mysql, or MySQL Connectors to perform the tasks of data
      definition and manipulation just as you would normally with MySQL.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-install-shutdown-restart"></a>22.2.7 Safe Shutdown and Restart of NDB Cluster</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091605831392"></a><a class="indexterm" name="idm140091605829904"></a><p>
      To shut down the cluster, enter the following command in a shell
      on the machine hosting the management node:
    </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_mgm -e shutdown</code></strong>
</pre><p>
      The <code class="option">-e</code> option here is used to pass a command to
      the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> client from the shell. (See
      <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>, for more
      information about this option.) The command causes the
      <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a>, <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>, and any
      <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> or <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> processes to
      terminate gracefully. Any SQL nodes can be terminated using
      <a class="link" href="programs.html#mysqladmin" title="4.5.2 mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin shutdown</strong></span></a> and other means. On Windows
      platforms, assuming that you have installed the SQL node as a
      Windows service, you can use <span class="command"><strong>SC STOP
      <em class="replaceable"><code>service_name</code></em></strong></span> or <span class="command"><strong>NET
      STOP <em class="replaceable"><code>service_name</code></em></strong></span>.
    </p><p>
      To restart the cluster on Unix platforms, run these commands:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          On the management host (<code class="literal">198.51.100.10</code> in
          our example setup):
        </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_mgmd -f /var/lib/mysql-cluster/config.ini</code></strong>
</pre></li><li class="listitem"><p>
          On each of the data node hosts
          (<code class="literal">198.51.100.30</code> and
          <code class="literal">198.51.100.40</code>):
        </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndbd</code></strong>
</pre></li><li class="listitem"><p>
          Use the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> client to verify that both
          data nodes have started successfully.
        </p></li><li class="listitem"><p>
          On the SQL host (<code class="literal">198.51.100.20</code>):
        </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>mysqld_safe &amp;</code></strong>
</pre></li></ul>
</div>
<p>
      On Windows platforms, assuming that you have installed all NDB
      Cluster processes as Windows services using the default service
      names (see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows-service" title="22.2.3.4 Installing NDB Cluster Processes as Windows Services">Section 22.2.3.4, “Installing NDB Cluster Processes as Windows Services”</a>), you can
      restart the cluster as follows:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          On the management host (<code class="literal">198.51.100.10</code> in
          our example setup), execute the following command:
        </p><pre data-lang="terminal" class="programlisting">
C:\&gt; <strong class="userinput"><code>SC START ndb_mgmd</code></strong>
</pre></li><li class="listitem"><p>
          On each of the data node hosts
          (<code class="literal">198.51.100.30</code> and
          <code class="literal">198.51.100.40</code>), execute the following
          command:
        </p><pre data-lang="terminal" class="programlisting">
C:\&gt; <strong class="userinput"><code>SC START ndbd</code></strong>
</pre></li><li class="listitem"><p>
          On the management node host, use the
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> client to verify that the
          management node and both data nodes have started successfully
          (see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows-initial-start" title="22.2.3.3 Initial Startup of NDB Cluster on Windows">Section 22.2.3.3, “Initial Startup of NDB Cluster on Windows”</a>).
        </p></li><li class="listitem"><p>
          On the SQL node host (<code class="literal">198.51.100.20</code>),
          execute the following command:
        </p><pre data-lang="terminal" class="programlisting">
C:\&gt; <strong class="userinput"><code>SC START mysql</code></strong>
</pre></li></ul>
</div>
<p>
      In a production setting, it is usually not desirable to shut down
      the cluster completely. In many cases, even when making
      configuration changes, or performing upgrades to the cluster
      hardware or software (or both), which require shutting down
      individual host machines, it is possible to do so without shutting
      down the cluster as a whole by performing a
      <span class="firstterm">rolling restart</span> of the
      cluster. For more information about doing this, see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="22.5.5 Performing a Rolling Restart of an NDB Cluster">Section 22.5.5, “Performing a Rolling Restart of an NDB Cluster”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-upgrade-downgrade"></a>22.2.8 Upgrading and Downgrading NDB Cluster</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091605782816"></a><a class="indexterm" name="idm140091605781328"></a><a class="indexterm" name="idm140091605779808"></a><a class="indexterm" name="idm140091605778320"></a><p>
      This section provides information about NDB Cluster software and
      table file compatibility between different NDB Cluster 8.0
      releases with regard to performing upgrades and downgrades as well
      as compatibility matrices and notes. You are expected already to
      be familiar with installing and configuring an NDB Cluster prior
      to attempting an upgrade or downgrade. See
      <a class="xref" href="mysql-cluster.html#mysql-cluster-configuration" title="22.3 Configuration of NDB Cluster">Section 22.3, “Configuration of NDB Cluster”</a>.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
        Only compatibility between MySQL versions with regard to
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> is taken into account in
        this section, and there are likely other issues to be
        considered. <span class="emphasis"><em>As with any other MySQL software upgrade
        or downgrade, you are strongly encouraged to review the relevant
        portions of the MySQL Manual for the MySQL versions from which
        and to which you intend to migrate, before attempting an upgrade
        or downgrade of the NDB Cluster software</em></span>. See
        <a class="xref" href="installing.html#upgrading" title="2.11 Upgrading MySQL">Section 2.11, “Upgrading MySQL”</a>.
</p>
</div>
<p><b>Known Issues. </b>
        The following issues are known to occur when upgrading to or
        between NDB 8.0 releases:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Online downgrades from NDB 8.0.14 to previous releases are not
          supported. Tables created in NDB 8.0.14 are not backwards
          compatible with previous releases. This is due to a change in
          usage of the extra metadata property implemented by
          <code class="literal">NDB</code> tables to provide full support for the
          MySQL data dictionary.
        </p><p>
          For more information, see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-what-is-new-8-0-extra-metadata" title="NDB table extra metadata changes">NDB table extra metadata changes</a>.
          See also <a class="xref" href="data-dictionary.html" title="Chapter 14 MySQL Data Dictionary">Chapter 14, <i>MySQL Data Dictionary</i></a>.
        </p></li><li class="listitem"><p>
          Distributed privileges shared between MySQL servers as
          implemented in prior release series (see
          <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-privilege-distribution.html" target="_top">Distributed MySQL Privileges for NDB Cluster</a>)
          are not supported in NDB Cluster 8.0. When started, the
          <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> supplied with NDB 8.0.16 and later
          checks for the existence of any grant tables which use the
          <code class="literal">NDB</code> storage engine; if it finds any, it
          creates local copies (<span class="quote">“<span class="quote">shadow tables</span>”</span>) of these
          using <code class="literal">InnoDB</code>. This is true for each MySQL
          server connected to NDB Cluster. After this has been performed
          on all MySQL servers acting as NDB Cluster SQL nodes, the NDB
          grant tables may be safely removed using the
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-drop-table" title="22.4.11 ndb_drop_table — Drop an NDB Table"><span class="command"><strong>ndb_drop_table</strong></span></a> utility supplied with the
          NDB Cluster distribution. (It is safe to retain the NDB grant
          tables, but they are not used for access control and are
          effectively ignored.) For more information about the MySQL
          privileges system used in NDB 8.0, see
          <a class="xref" href="security.html#grant-tables" title="6.2.3 Grant Tables">Section 6.2.3, “Grant Tables”</a>.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="mysql-cluster-configuration"></a>22.3 Configuration of NDB Cluster</h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-quick">22.3.1 Quick Test Setup of NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-configuration-overview">22.3.2 Overview of NDB Cluster Configuration Parameters, Options, and Variables</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-config-file">22.3.3 NDB Cluster Configuration Files</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-interconnects">22.3.4 Using High-Speed Interconnects with NDB Cluster</a></span></dt></dl>
</div>
<a class="indexterm" name="idm140091605756880"></a><a class="indexterm" name="idm140091605755808"></a><p>
    A MySQL server that is part of an NDB Cluster differs in one chief
    respect from a normal (nonclustered) MySQL server, in that it
    employs the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine. This
    engine is also referred to sometimes as
    <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a>, although
    <code class="literal">NDB</code> is preferred.
  </p><p>
    To avoid unnecessary allocation of resources, the server is
    configured by default with the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>
    storage engine disabled. To enable <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>,
    you must modify the server's <code class="filename">my.cnf</code>
    configuration file, or start the server with the
    <a class="link" href="mysql-cluster.html#option_mysqld_ndbcluster"><code class="option">--ndbcluster</code></a> option.
  </p><p>
    This MySQL server is a part of the cluster, so it also must know how
    to access a management node to obtain the cluster configuration
    data. The default behavior is to look for the management node on
    <code class="literal">localhost</code>. However, should you need to specify
    that its location is elsewhere, this can be done in
    <code class="filename">my.cnf</code>, or with the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>
    client. Before the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine
    can be used, at least one management node must be operational, as
    well as any desired data nodes.
  </p><p>
    For more information about
    <a class="link" href="mysql-cluster.html#option_mysqld_ndbcluster"><code class="option">--ndbcluster</code></a> and other
    <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> options specific to NDB Cluster, see
    <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-mysqld" title="22.3.3.9.1 MySQL Server Options for NDB Cluster">Section 22.3.3.9.1, “MySQL Server Options for NDB Cluster”</a>.
  </p><p>
    You can use also the NDB Cluster Auto-Installer to set up and deploy
    an NDB Cluster on one or more hosts using a browser-based GUI. For
    more information, see <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-install-auto.html" target="_top">The NDB Cluster Auto-Installer (NDB 7.5)</a>.
  </p><p>
    For general information about installing NDB Cluster, see
    <a class="xref" href="mysql-cluster.html#mysql-cluster-installation" title="22.2 NDB Cluster Installation">Section 22.2, “NDB Cluster Installation”</a>.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-quick"></a>22.3.1 Quick Test Setup of NDB Cluster</h3>
</div>
</div>
</div>
<a class="indexterm" name="idm140091605733952"></a><a class="indexterm" name="idm140091605732496"></a><a class="indexterm" name="idm140091605731008"></a><p>
      To familiarize you with the basics, we will describe the simplest
      possible configuration for a functional NDB Cluster. After this,
      you should be able to design your desired setup from the
      information provided in the other relevant sections of this
      chapter.
    </p><p>
      First, you need to create a configuration directory such as
      <code class="filename">/var/lib/mysql-cluster</code>, by executing the
      following command as the system <code class="literal">root</code> user:
    </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>mkdir /var/lib/mysql-cluster</code></strong>
</pre><p>
      In this directory, create a file named
      <code class="filename">config.ini</code> that contains the following
      information. Substitute appropriate values for
      <code class="literal">HostName</code> and <code class="literal">DataDir</code> as
      necessary for your system.
    </p><pre data-lang="ini" class="programlisting">
# file "config.ini" - showing minimal setup consisting of 1 data node,
# 1 management server, and 3 MySQL servers.
# The empty default sections are not required, and are shown only for
# the sake of completeness.
# Data nodes must provide a hostname but MySQL Servers are not required
# to do so.
# If you don't know the hostname for your machine, use localhost.
# The DataDir parameter also has a default value, but it is recommended to
# set it explicitly.
# Note: [db], [api], and [mgm] are aliases for [ndbd], [mysqld], and [ndb_mgmd],
# respectively. [db] is deprecated and should not be used in new installations.

[ndbd default]
NoOfReplicas= 1

[mysqld  default]
[ndb_mgmd default]
[tcp default]

[ndb_mgmd]
HostName= myhost.example.com

[ndbd]
HostName= myhost.example.com
DataDir= /var/lib/mysql-cluster

[mysqld]
[mysqld]
[mysqld]
</pre><p>
      You can now start the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> management
      server. By default, it attempts to read the
      <code class="filename">config.ini</code> file in its current working
      directory, so change location into the directory where the file is
      located and then invoke <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>:
    </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>cd /var/lib/mysql-cluster</code></strong>
shell&gt; <strong class="userinput"><code>ndb_mgmd</code></strong>
</pre><p>
      Then start a single data node by running <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>:
    </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndbd</code></strong>
</pre><p>
      For command-line options which can be used when starting
      <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>, see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
    </p><p>
      By default, <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> looks for the management
      server at <code class="literal">localhost</code> on port 1186.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        If you have installed MySQL from a binary tarball, you will need
        to specify the path of the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> and
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> servers explicitly. (Normally, these
        will be found in <code class="filename">/usr/local/mysql/bin</code>.)
</p>
</div>
<p>
      Finally, change location to the MySQL data directory (usually
      <code class="filename">/var/lib/mysql</code> or
      <code class="filename">/usr/local/mysql/data</code>), and make sure that
      the <code class="filename">my.cnf</code> file contains the option necessary
      to enable the NDB storage engine:
    </p><pre data-lang="ini" class="programlisting">
[mysqld]
ndbcluster
</pre><p>
      You can now start the MySQL server as usual:
    </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>mysqld_safe --user=mysql &amp;</code></strong>
</pre><p>
      Wait a moment to make sure the MySQL server is running properly.
      If you see the notice <code class="literal">mysql ended</code>, check the
      server's <code class="filename">.err</code> file to find out what went
      wrong.
    </p><p>
      If all has gone well so far, you now can start using the cluster.
      Connect to the server and verify that the
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> storage engine is enabled:
    </p><pre data-lang="sql" class="programlisting">
shell&gt; <strong class="userinput"><code>mysql</code></strong>
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 1 to server version: 8.0.18

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

mysql&gt; <strong class="userinput"><code>SHOW ENGINES\G</code></strong>
...
*************************** 12. row ***************************
Engine: NDBCLUSTER
Support: YES
Comment: Clustered, fault-tolerant, memory-based tables
*************************** 13. row ***************************
Engine: NDB
Support: YES
Comment: Alias for NDBCLUSTER
...
</pre><p>
      The row numbers shown in the preceding example output may be
      different from those shown on your system, depending upon how your
      server is configured.
    </p><p>
      Try to create an <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> table:
    </p><pre data-lang="sql" class="programlisting">
shell&gt; <strong class="userinput"><code>mysql</code></strong>
mysql&gt; <strong class="userinput"><code>USE test;</code></strong>
Database changed

mysql&gt; <strong class="userinput"><code>CREATE TABLE ctest (i INT) ENGINE=NDBCLUSTER;</code></strong>
Query OK, 0 rows affected (0.09 sec)

mysql&gt; <strong class="userinput"><code>SHOW CREATE TABLE ctest \G</code></strong>
*************************** 1. row ***************************
       Table: ctest
Create Table: CREATE TABLE `ctest` (
  `i` int(11) default NULL
) ENGINE=ndbcluster DEFAULT CHARSET=latin1
1 row in set (0.00 sec)
</pre><p>
      To check that your nodes were set up properly, start the
      management client:
    </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_mgm</code></strong>
</pre><a class="indexterm" name="idm140091605680160"></a><p>
      Use the <span class="command"><strong>SHOW</strong></span> command from within the management
      client to obtain a report on the cluster's status:
    </p><pre data-lang="ndbmgm" class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>SHOW</code></strong>
Cluster Configuration
---------------------
[ndbd(NDB)]     1 node(s)
id=2    @127.0.0.1  (Version: 8.0.17-ndb-8.0.17, Nodegroup: 0, *)

[ndb_mgmd(MGM)] 1 node(s)
id=1    @127.0.0.1  (Version: 8.0.17-ndb-8.0.17)

[mysqld(API)]   3 node(s)
id=3    @127.0.0.1  (Version: 8.0.17-ndb-8.0.17)
id=4 (not connected, accepting connect from any host)
id=5 (not connected, accepting connect from any host)
</pre><p>
      At this point, you have successfully set up a working NDB Cluster
      . You can now store data in the cluster by using any table created
      with <code class="literal">ENGINE=NDBCLUSTER</code> or its alias
      <code class="literal">ENGINE=NDB</code>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-configuration-overview"></a>22.3.2 Overview of NDB Cluster Configuration Parameters, Options, and Variables</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-params-ndbd">22.3.2.1 NDB Cluster Data Node Configuration Parameters</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-params-mgmd">22.3.2.2 NDB Cluster Management Node Configuration Parameters</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-params-api">22.3.2.3 NDB Cluster SQL Node and API Node Configuration Parameters</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-params-other">22.3.2.4 Other NDB Cluster Configuration Parameters</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-option-tables">22.3.2.5 NDB Cluster mysqld Option and Variable Reference</a></span></dt></dl>
</div>
<a class="indexterm" name="idm140091605671952"></a><a class="indexterm" name="idm140091605670496"></a><p>
      The next several sections provide summary tables of NDB Cluster
      node configuration parameters used in the
      <code class="filename">config.ini</code> file to govern various aspects of
      node behavior, as well as of options and variables read by
      <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> from a <code class="filename">my.cnf</code> file
      or from the command line when run as an NDB Cluster process. Each
      of the node parameter tables lists the parameters for a given type
      (<code class="literal">ndbd</code>, <code class="literal">ndb_mgmd</code>,
      <code class="literal">mysqld</code>, <code class="literal">computer</code>,
      <code class="literal">tcp</code>, <code class="literal">shm</code>, or
      <code class="literal">sci</code>). All tables include the data type for the
      parameter, option, or variable, as well as its default, mimimum,
      and maximum values as applicable.
    </p><p><b>Considerations when restarting nodes. </b>
        For node parameters, these tables also indicate what type of
        restart is required (node restart or system restart)—and
        whether the restart must be done with
        <code class="option">--initial</code>—to change the value of a given
        configuration parameter. When performing a node restart or an
        initial node restart, all of the cluster's data nodes must
        be restarted in turn (also referred to as a
        <span class="firstterm">rolling restart</span>). It is
        possible to update cluster configuration parameters marked as
        <code class="literal">node</code> online—that is, without shutting
        down the cluster—in this fashion. An initial node restart
        requires restarting each <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> process with
        the <code class="option">--initial</code> option.
      </p><p>
      A system restart requires a complete shutdown and restart of the
      entire cluster. An initial system restart requires taking a backup
      of the cluster, wiping the cluster file system after shutdown, and
      then restoring from the backup following the restart.
    </p><p>
      In any cluster restart, all of the cluster's management servers
      must be restarted for them to read the updated configuration
      parameter values.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
        Values for numeric cluster parameters can generally be increased
        without any problems, although it is advisable to do so
        progressively, making such adjustments in relatively small
        increments. Many of these can be increased online, using a
        rolling restart.
      </p><p>
        However, decreasing the values of such parameters—whether
        this is done using a node restart, node initial restart, or even
        a complete system restart of the cluster—is not to be
        undertaken lightly; it is recommended that you do so only after
        careful planning and testing. This is especially true with
        regard to those parameters that relate to memory usage and disk
        space, such as
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooftables"><code class="literal">MaxNoOfTables</code></a>,
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooforderedindexes"><code class="literal">MaxNoOfOrderedIndexes</code></a>,
        and
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofuniquehashindexes"><code class="literal">MaxNoOfUniqueHashIndexes</code></a>.
        In addition, it is the generally the case that configuration
        parameters relating to memory and disk usage can be raised using
        a simple node restart, but they require an initial node restart
        to be lowered.
</p>
</div>
<p>
      Because some of these parameters can be used for configuring more
      than one type of cluster node, they may appear in more than one of
      the tables.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        <code class="literal">4294967039</code> often appears as a maximum value
        in these tables. This value is defined in the
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> sources as
        <code class="literal">MAX_INT_RNIL</code> and is equal to
        <code class="literal">0xFFFFFEFF</code>, or
        <code class="literal">2<sup>32</sup> −
        2<sup>8</sup> − 1</code>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-params-ndbd"></a>22.3.2.1 NDB Cluster Data Node Configuration Parameters</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091605639280"></a><a class="indexterm" name="idm140091605637824"></a><a class="indexterm" name="idm140091605636752"></a><p>
        The listings in this section provide information about
        parameters used in the <code class="literal">[ndbd]</code> or
        <code class="literal">[ndbd default]</code> sections of a
        <code class="filename">config.ini</code> file for configuring NDB Cluster
        data nodes. For detailed descriptions and other additional
        information about each of these parameters, see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition" title="22.3.3.6 Defining NDB Cluster Data Nodes">Section 22.3.3.6, “Defining NDB Cluster Data Nodes”</a>.
      </p><p>
        These parameters also apply to <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>, the
        multithreaded version of <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>. For more
        information, see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)">Section 22.4.3, “<span class="command"><strong>ndbmtd</strong></span> — The NDB Cluster Data Node Daemon (Multi-Threaded)”</a>.
</p>
<div class="itemizedlist">
<a name="ndbparam-summary-list-ndbd"></a><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-arbitration">Arbitration</a></code>:
            How arbitration should be performed to avoid split-brain
            issues in the event of node failure.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-arbitrationtimeout">ArbitrationTimeout</a></code>:
            Maximum time (milliseconds) database partition waits for
            arbitration signal
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupdatabuffersize">BackupDataBufferSize</a></code>:
            Default size of databuffer for a backup (in bytes)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupdatadir">BackupDataDir</a></code>:
            Path to where to store backups. Note that the string
            '/BACKUP' is always appended to this setting, so that the
            *effective* default is FileSystemPath/BACKUP.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupdiskwritespeedpct">BackupDiskWriteSpeedPct</a></code>:
            Sets the percentage of the data node's allocated maximum
            write speed (MaxDiskWriteSpeed) to reserve for LCPs when
            starting abackup.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-backuplogbuffersize">BackupLogBufferSize</a></code>:
            Default size of log buffer for a backup (in bytes)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupmaxwritesize">BackupMaxWriteSize</a></code>:
            Maximum size of file system writes made by backup (in bytes)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupmemory">BackupMemory</a></code>:
            Total memory allocated for backups per node (in bytes)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupreportfrequency">BackupReportFrequency</a></code>:
            Frequency of backup status reports during backup in seconds
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupwritesize">BackupWriteSize</a></code>:
            Default size of file system writes made by backup (in bytes)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-batchsizeperlocalscan">BatchSizePerLocalScan</a></code>:
            Used to calculate the number of lock records for scan with
            hold lock
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-buildindexthreads">BuildIndexThreads</a></code>:
            Number of threads to use for building ordered indexes during
            a system or node restart. Also applies when running
            ndb_restore --rebuild-indexes. Setting this parameter to 0
            disables multithreaded building of ordered indexes.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-compressedbackup">CompressedBackup</a></code>:
            Use zlib to compress backups as they are written
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-compressedlcp">CompressedLCP</a></code>:
            Write compressed LCPs using zlib
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-connectcheckintervaldelay">ConnectCheckIntervalDelay</a></code>:
            Time between data node connectivity check stages. Data node
            is considered suspect after 1 interval and dead after 2
            intervals with no response.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-crashoncorruptedtuple">CrashOnCorruptedTuple</a></code>:
            When enabled, forces node to shut down whenever it detects a
            corrupted tuple.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-datadir">DataDir</a></code>:
            Data directory for this node
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory">DataMemory</a></code>:
            Number of bytes on each data node allocated for storing
            data; subject to available system RAM.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-defaulthashmapsize">DefaultHashMapSize</a></code>:
            Set size (in buckets) to use for table hash maps. Three
            values are supported: 0, 240, and 3840. Intended primarily
            for upgrades and downgrades within NDB 7.2.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-dicttrace">DictTrace</a></code>:
            Enable DBDICT debugging; for NDB development
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskiothreadpool">DiskIOThreadPool</a></code>:
            Number of unbound threads for file access (currently only
            for Disk Data); known as IOThreadPool before MySQL Cluster
            NDB 6.4.3.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskless">Diskless</a></code>:
            Run without using the disk
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskpagebufferentries">DiskPageBufferEntries</a></code>:
            Number of 32K page entries to allocate in
            DiskPageBufferMemory. Very large disk transactions may
            require increasing this value.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskpagebuffermemory">DiskPageBufferMemory</a></code>:
            Number of bytes on each data node allocated for the disk
            page buffer cache
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-disksyncsize">DiskSyncSize</a></code>:
            Amount of data written to file before a synch is forced
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-enablepartiallcp">EnablePartialLcp</a></code>:
            Enable partial LCP (true); if this disabled (false), all
            LCPs write full checkpoints.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-enableredocontrol">EnableRedoControl</a></code>:
            Enable adaptive checkpointing speed for controlling redo log
            usage
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-eventlogbuffersize">EventLogBufferSize</a></code>:
            Size of circular buffer for NDB log events within data
            nodes.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-executeoncomputer">ExecuteOnComputer</a></code>:
            String referencing an earlier defined COMPUTER
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-extrasendbuffermemory">ExtraSendBufferMemory</a></code>:
            Memory to use for send buffers in addition to any allocated
            by TotalSendBufferMemory or SendBufferMemory. Default (0)
            allows up to 16MB.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempath">FileSystemPath</a></code>:
            Path to directory where the data node stores its data
            (directory must exist)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathdatafiles">FileSystemPathDataFiles</a></code>:
            Path to directory where the data node stores its Disk Data
            files. The default value is FilesystemPathDD, if set;
            otherwise, FilesystemPath is used if it is set; otherwise,
            the value of DataDir is used.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathdd">FileSystemPathDD</a></code>:
            Path to directory where the data node stores its Disk Data
            and undo files. The default value is FileSystemPath, if set;
            otherwise, the value of DataDir is used.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathundofiles">FileSystemPathUndoFiles</a></code>:
            Path to directory where the data node stores its undo files
            for Disk Data. The default value is FilesystemPathDD, if
            set; otherwise, FilesystemPath is used if it is set;
            otherwise, the value of DataDir is used.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-fragmentlogfilesize">FragmentLogFileSize</a></code>:
            Size of each redo log file
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-heartbeatintervaldbapi">HeartbeatIntervalDbApi</a></code>:
            Time between API node-data node heartbeats. (API connection
            closed after 3 missed heartbeats)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-heartbeatintervaldbdb">HeartbeatIntervalDbDb</a></code>:
            Time between data node-to-data node heartbeats; data node
            considered dead after 3 missed heartbeats
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-heartbeatorder">HeartbeatOrder</a></code>:
            Sets the order in which data nodes check each others'
            heartbeats for determining whether a given node is still
            active and connected to the cluster. Must be zero for all
            data nodes or distinct nonzero values for all data nodes;
            see documentation for further guidance.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-hostname">HostName</a></code>:
            Host name or IP address for this data node.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexmemory">IndexMemory</a></code>:
            Deprecated.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstatautocreate">IndexStatAutoCreate</a></code>:
            Enable/disable automatic statistics collection when indexes
            are created.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstatautoupdate">IndexStatAutoUpdate</a></code>:
            Monitor indexes for changes and trigger automatic statistics
            updates
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstatsavescale">IndexStatSaveScale</a></code>:
            Scaling factor used in determining size of stored index
            statistics.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstatsavesize">IndexStatSaveSize</a></code>:
            Maximum size in bytes for saved statistics per index.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstattriggerpct">IndexStatTriggerPct</a></code>:
            Threshold percent change in DML operations for index
            statistics updates. The value is scaled down by
            IndexStatTriggerScale.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstattriggerscale">IndexStatTriggerScale</a></code>:
            Scale down IndexStatTriggerPct by this amount, multiplied by
            the base 2 logarithm of the index size, for a large index.
            Set to 0 to disable scaling.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstatupdatedelay">IndexStatUpdateDelay</a></code>:
            Minimum delay between automatic index statistics updates for
            a given index. 0 means no delay.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-initfragmentlogfiles">InitFragmentLogFiles</a></code>:
            Initialize fragment logfiles (sparse/full)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-initiallogfilegroup">InitialLogFileGroup</a></code>:
            Describes a log file group that is created during an initial
            start. See documentation for format.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-initialnoofopenfiles">InitialNoOfOpenFiles</a></code>:
            Initial number of files open per data node. (One thread is
            created per file)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-initialtablespace">InitialTablespace</a></code>:
            Describes a tablespace that is created during an initial
            start. See documentation for format.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-insertrecoverywork">InsertRecoveryWork</a></code>:
            Percentage of RecoveryWork used for inserted rows; has no
            effect unless partial local checkpoints are in use.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-latealloc">LateAlloc</a></code>:
            Allocate memory after the connection to the management
            server has been established.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-lcpscanprogresstimeout">LcpScanProgressTimeout</a></code>:
            Maximum time that local checkpoint fragment scan can be
            stalled before node is shut down to ensure systemwide LCP
            progress. Use 0 to disable.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-lockexecutethreadtocpu">LockExecuteThreadToCPU</a></code>:
            A comma-delimited list of CPU IDs
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-lockmaintthreadstocpu">LockMaintThreadsToCPU</a></code>:
            CPU ID indicating which CPU runs the maintenance threads
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-lockpagesinmainmemory">LockPagesInMainMemory</a></code>:
            0=disable locking, 1=lock after memory allocation, 2=lock
            before memory allocation
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelcheckpoint">LogLevelCheckpoint</a></code>:
            Log level of local and global checkpoint information printed
            to stdout
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelcongestion">LogLevelCongestion</a></code>:
            Level of congestion information printed to stdout
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelconnection">LogLevelConnection</a></code>:
            Level of node connect/disconnect information printed to
            stdout
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelerror">LogLevelError</a></code>:
            Transporter, heartbeat errors printed to stdout
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelinfo">LogLevelInfo</a></code>:
            Heartbeat and log information printed to stdout
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelnoderestart">LogLevelNodeRestart</a></code>:
            Level of node restart and node failure information printed
            to stdout
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelshutdown">LogLevelShutdown</a></code>:
            Level of node shutdown information printed to stdout
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelstartup">LogLevelStartup</a></code>:
            Level of node startup information printed to stdout
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelstatistic">LogLevelStatistic</a></code>:
            Level of transaction, operation, and transporter information
            printed to stdout
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-longmessagebuffer">LongMessageBuffer</a></code>:
            Number of bytes allocated on each data node for internal
            long messages
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxallocate">MaxAllocate</a></code>:
            Maximum size of allocation to use when allocating memory for
            tables
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxbufferedepochs">MaxBufferedEpochs</a></code>:
            Allowed numbered of epochs that a subscribing node can lag
            behind (unprocessed epochs). Exceeding will cause lagging
            subscribers to be disconnected.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxbufferedepochbytes">MaxBufferedEpochBytes</a></code>:
            Total number of bytes allocated for buffering epochs.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdiskwritespeed">MaxDiskWriteSpeed</a></code>:
            Maximum number of bytes per second that can be written by
            LCP and backup when no restarts are ongoing.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdiskwritespeedothernoderestart">MaxDiskWriteSpeedOtherNodeRestart</a></code>:
            Maximum number of bytes per second that can be written by
            LCP and backup when another node is restarting.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdiskwritespeedownrestart">MaxDiskWriteSpeedOwnRestart</a></code>:
            Maximum number of bytes per second that can be written by
            LCP and backup when this node is restarting.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxfkbuildbatchsize">MaxFKBuildBatchSize</a></code>:
            Maximum scan batch size to use for building foreign keys.
            Increasing this value may speed up builds of foreign keys
            but impacts ongoing traffic as well.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdmloperationspertransaction">MaxDMLOperationsPerTransaction</a></code>:
            Limit size of a transaction; aborts the transaction if it
            requires more than this many DML operations. Set to 0 to
            disable.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxlcpstartdelay">MaxLCPStartDelay</a></code>:
            Time in seconds that LCP polls for checkpoint mutex (to
            allow other data nodes to complete metadata
            synchronization), before putting itself in lock queue for
            parallel recovery of table data.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofattributes">MaxNoOfAttributes</a></code>:
            Suggests a total number of attributes stored in database
            (sum over all tables)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentindexoperations">MaxNoOfConcurrentIndexOperations</a></code>:
            Total number of index operations that can execute
            simultaneously on one data node
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentoperations">MaxNoOfConcurrentOperations</a></code>:
            Maximum number of operation records in transaction
            coordinator
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentscans">MaxNoOfConcurrentScans</a></code>:
            Maximum number of scans executing concurrently on the data
            node
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentsuboperations">MaxNoOfConcurrentSubOperations</a></code>:
            Maximum number of concurrent subscriber operations
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrenttransactions">MaxNoOfConcurrentTransactions</a></code>:
            Maximum number of transactions executing concurrently on
            this data node, the total number of transactions that can be
            executed concurrently is this value times the number of data
            nodes in the cluster.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooffiredtriggers">MaxNoOfFiredTriggers</a></code>:
            Total number of triggers that can fire simultaneously on one
            data node
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooflocaloperations">MaxNoOfLocalOperations</a></code>:
            Maximum number of operation records defined on this data
            node
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooflocalscans">MaxNoOfLocalScans</a></code>:
            Maximum number of fragment scans in parallel on this data
            node
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofopenfiles">MaxNoOfOpenFiles</a></code>:
            Maximum number of files open per data node.(One thread is
            created per file)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooforderedindexes">MaxNoOfOrderedIndexes</a></code>:
            Total number of ordered indexes that can be defined in the
            system
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofsavedmessages">MaxNoOfSavedMessages</a></code>:
            Maximum number of error messages to write in error log and
            maximum number of trace files to retain
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofsubscribers">MaxNoOfSubscribers</a></code>:
            Maximum number of subscribers (default 0 = MaxNoOfTables *
            2)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofsubscriptions">MaxNoOfSubscriptions</a></code>:
            Maximum number of subscriptions (default 0 = MaxNoOfTables)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooftables">MaxNoOfTables</a></code>:
            Suggests a total number of NDB tables stored in the database
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooftriggers">MaxNoOfTriggers</a></code>:
            Total number of triggers that can be defined in the system
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofuniquehashindexes">MaxNoOfUniqueHashIndexes</a></code>:
            Total number of unique hash indexes that can be defined in
            the system
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxparallelcopyinstances">MaxParallelCopyInstances</a></code>:
            Number of parallel copies during node restarts. Default is
            0, which uses number of LDMs on both nodes, to a maximum of
            16.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxparallelscansperfragment">MaxParallelScansPerFragment</a></code>:
            Maximum number of parallel scans per fragment. Once this
            limit is reached, scans are serialized.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxreorgbuildbatchsize">MaxReorgBuildBatchSize</a></code>:
            Maximum scan batch size to use for reorganization of table
            partitions. Increasing this value may speed up table
            partition reorganization but impacts ongoing traffic as
            well.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxstartfailretries">MaxStartFailRetries</a></code>:
            Maximum retries when data node fails on startup, requires
            StopOnError = 0. Setting to 0 causes start attempts to
            continue indefinitely.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxuibuildbatchsize">MaxUIBuildBatchSize</a></code>:
            Maximum scan batch size to use for building unique keys.
            Increasing this value may speed up builds of unique keys but
            impacts ongoing traffic as well.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-memreportfrequency">MemReportFrequency</a></code>:
            Frequency of memory reports in seconds; 0 = report only when
            exceeding percentage limits
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-mindiskwritespeed">MinDiskWriteSpeed</a></code>:
            Minimum number of bytes per second that can be written by
            LCP and backup.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-minfreepct" title="MinFreePct">MinFreePct</a></code>:
            The percentage of memory resources to keep in reserve for
            restarts.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-nodegroup">NodeGroup</a></code>:
            Node group to which the data node belongs; used only during
            initial start of cluster.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-nodeid">NodeId</a></code>:
            Number uniquely identifying the data node among all nodes in
            the cluster.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-nooffragmentlogfiles">NoOfFragmentLogFiles</a></code>:
            Number of 16 MB redo log files in each of 4 file sets
            belonging to the data node
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-noofreplicas">NoOfReplicas</a></code>:
            Number of copies of all data in database; recommended value
            is 2 (default). Values greater than 2 are not supported in
            production.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-numa">Numa</a></code>:
            (Linux only; requires libnuma) Controls NUMA support.
            Setting to 0 permits system to determine use of interleaving
            by data node process; 1 means that it is determined by data
            node.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-odirect">ODirect</a></code>:
            Use O_DIRECT file reads and writes when possible.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-odirectsyncflag">ODirectSyncFlag</a></code>:
            O_DIRECT writes are treated as synchronized writes; ignored
            when ODirect is not enabled, InitFragmentLogFiles is set to
            SPARSE, or both.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-realtimescheduler">RealtimeScheduler</a></code>:
            When true, data node threads are scheduled as real-time
            threads. Default is false.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-recoverywork">RecoveryWork</a></code>:
            Percentage of storage overhead for LCP files: greater value
            means less work in normal operations, more work during
            recovery
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-redobuffer">RedoBuffer</a></code>:
            Number of bytes on each data node allocated for writing redo
            logs
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-redoovercommitcounter">RedoOverCommitCounter</a></code>:
            When RedoOverCommitLimit has been exceeded this many times,
            transactions are aborted, and operations are handled as
            specified by DefaultOperationRedoProblemAction
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-redoovercommitlimit">RedoOverCommitLimit</a></code>:
            Each time that flushing the current redo buffer takes longer
            than this many seconds, the number of times that this has
            happened is compared to RedoOverCommitCounter.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedconcurrentindexoperations">ReservedConcurrentIndexOperations</a></code>:
            Number of simultaneous index operations having dedicated
            resources on one data node
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedconcurrentoperations">ReservedConcurrentOperations</a></code>:
            Number of simultaneous operations having dedicated resources
            in transaction coordinators on one data node
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedconcurrentscans">ReservedConcurrentScans</a></code>:
            Number of simultaneous scans having dedicated resources on
            one data node
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedconcurrenttransactions">ReservedConcurrentTransactions</a></code>:
            Number of simultaneous transactions having dedicated
            resources on one data node
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedfiredtriggers">ReservedFiredTriggers</a></code>:
            Number of triggers having dedicated resources on one data
            node
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedlocalscans">ReservedLocalScans</a></code>:
            Number of simultaneous fragment scans having dedicated
            resources on one data node
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedtransactionbuffermemory">ReservedTransactionBufferMemory</a></code>:
            Dynamic buffer space (in bytes) for key and attribute data
            allocated to each data node
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-restartonerrorinsert">RestartOnErrorInsert</a></code>:
            Control the type of restart caused by inserting an error
            (when StopOnError is enabled)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-schedulerexecutiontimer">SchedulerExecutionTimer</a></code>:
            Number of microseconds to execute in scheduler before
            sending
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-schedulerresponsiveness">SchedulerResponsiveness</a></code>:
            Set NDB scheduler response optimization 0-10; higher values
            provide better response time but lower throughput
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-schedulerspintimer">SchedulerSpinTimer</a></code>:
            Number of microseconds to execute in scheduler before
            sleeping
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-serverport">ServerPort</a></code>:
            Port used to set up transporter for incoming connections
            from API nodes
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-sharedglobalmemory">SharedGlobalMemory</a></code>:
            Total number of bytes on each data node allocated for any
            use
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-startfailretrydelay">StartFailRetryDelay</a></code>:
            Delay in seconds after start failure prior to retry;
            requires StopOnError = 0.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-startfailuretimeout">StartFailureTimeout</a></code>:
            Milliseconds to wait before terminating. (0=Wait forever)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-startnonodegrouptimeout">StartNoNodeGroupTimeout</a></code>:
            Time to wait for nodes without a nodegroup before trying to
            start (0=forever)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-startpartialtimeout">StartPartialTimeout</a></code>:
            Milliseconds to wait before trying to start without all
            nodes. (0=Wait forever)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-startpartitionedtimeout">StartPartitionedTimeout</a></code>:
            Milliseconds to wait before trying to start partitioned.
            (0=Wait forever)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-startupstatusreportfrequency">StartupStatusReportFrequency</a></code>:
            Frequency of status reports during startup
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-stoponerror">StopOnError</a></code>:
            When set to 0, the data node automatically restarts and
            recovers following node failures
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-stringmemory">StringMemory</a></code>:
            Default size of string memory (0 to 100 = % of maximum, 101+
            = actual bytes)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-tcpbind_inaddr_any">TcpBind_INADDR_ANY</a></code>:
            Bind IP_ADDR_ANY so that connections can be made from
            anywhere (for autogenerated connections)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenepochs">TimeBetweenEpochs</a></code>:
            Time between epochs (synchronization used for replication)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenepochstimeout">TimeBetweenEpochsTimeout</a></code>:
            Timeout for time between epochs. Exceeding will cause node
            shutdown.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenglobalcheckpoints">TimeBetweenGlobalCheckpoints</a></code>:
            Time between group commits of transactions to disk
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenglobalcheckpointstimeout">TimeBetweenGlobalCheckpointsTimeout</a></code>:
            Minimum timeout for group commit of transactions to disk
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweeninactivetransactionabortcheck">TimeBetweenInactiveTransactionAbortCheck</a></code>:
            Time between checks for inactive transactions
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenlocalcheckpoints">TimeBetweenLocalCheckpoints</a></code>:
            Time between taking snapshots of the database (expressed in
            base-2 logarithm of bytes)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenwatchdogcheck">TimeBetweenWatchDogCheck</a></code>:
            Time between execution checks inside a data node
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenwatchdogcheckinitial">TimeBetweenWatchDogCheckInitial</a></code>:
            Time between execution checks inside a data node (early
            start phases when memory is allocated)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-totalsendbuffermemory">TotalSendBufferMemory</a></code>:
            Total memory to use for all transporter send buffers.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-transactionbuffermemory">TransactionBufferMemory</a></code>:
            Dynamic buffer space (in bytes) for key and attribute data
            allocated for each data node
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-transactiondeadlockdetectiontimeout">TransactionDeadlockDetectionTimeout</a></code>:
            Time transaction can spend executing within a data node.
            This is the time that the transaction coordinator waits for
            each data node participating in the transaction to execute a
            request. If the data node takes more than this amount of
            time, the transaction is aborted.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-transactioninactivetimeout">TransactionInactiveTimeout</a></code>:
            Milliseconds that the application waits before executing
            another part of the transaction. This is the time the
            transaction coordinator waits for the application to execute
            or send another part (query, statement) of the transaction.
            If the application takes too much time, then the transaction
            is aborted. Timeout = 0 means that the application never
            times out.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-twopassinitialnoderestartcopy">TwoPassInitialNodeRestartCopy</a></code>:
            Copy data in 2 passes during initial node restart, which
            enables multithreaded building of ordered indexes for such
            restarts.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-undodatabuffer">UndoDataBuffer</a></code>:
            Number of bytes on each data node allocated for writing data
            undo logs
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-undoindexbuffer">UndoIndexBuffer</a></code>:
            Number of bytes on each data node allocated for writing
            index undo logs
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-useshm">UseShm</a></code>:
            Use shared memory connections between this data node and API
            node also running on this host
</p></li></ul>
</div>
<p>
        The following parameters are specific to
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>:
</p>
<div class="itemizedlist">
<a name="ndbparam-summary-list-ndbmtd"></a><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-maxnoofexecutionthreads">MaxNoOfExecutionThreads</a></code>:
            For ndbmtd only, specify maximum number of execution threads
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-nooffragmentlogparts">NoOfFragmentLogParts</a></code>:
            Number of redo log file groups belonging to this data node;
            value must be an even multiple of 4.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-threadconfig">ThreadConfig</a></code>:
            Used for configuration of multithreaded data nodes (ndbmtd).
            Default is an empty string; see documentation for syntax and
            other information.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-params-mgmd"></a>22.3.2.2 NDB Cluster Management Node Configuration Parameters</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091605272448"></a><a class="indexterm" name="idm140091605270992"></a><a class="indexterm" name="idm140091605269904"></a><p>
        The listing in this section provides information about
        parameters used in the <code class="literal">[ndb_mgmd]</code> or
        <code class="literal">[mgm]</code> section of a
        <code class="filename">config.ini</code> file for configuring NDB Cluster
        management nodes. For detailed descriptions and other additional
        information about each of these parameters, see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-mgm-definition" title="22.3.3.5 Defining an NDB Cluster Management Server">Section 22.3.3.5, “Defining an NDB Cluster Management Server”</a>.
</p>
<div class="itemizedlist">
<a name="ndbparam-summary-list-mgmd"></a><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-arbitrationdelay">ArbitrationDelay</a></code>:
            When asked to arbitrate, arbitrator waits this long before
            voting (milliseconds)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-arbitrationrank">ArbitrationRank</a></code>:
            If 0, then management node is not arbitrator. Kernel selects
            arbitrators in order 1, 2
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-datadir">DataDir</a></code>:
            Data directory for this node
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-executeoncomputer">ExecuteOnComputer</a></code>:
            String referencing an earlier defined COMPUTER
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="ulink" href="https://dev.mysql.com/doc/refman/5.5/en/mysql-cluster-mgm-definition.html#ndbparam-mgmd-extrasendbuffermemory" target="_top">ExtraSendBufferMemory</a></code>:
            Memory to use for send buffers in addition to any allocated
            by TotalSendBufferMemory or SendBufferMemory. Default (0)
            allows up to 16MB.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-heartbeatintervalmgmdmgmd">HeartbeatIntervalMgmdMgmd</a></code>:
            Time between management node-to-management node heartbeats;
            the connection between management node is considered lost
            after 3 missed heartbeats.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-heartbeatthreadpriority">HeartbeatThreadPriority</a></code>:
            Set heartbeat thread policy and priority for management
            nodes; see manual for allowed values
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-hostname">HostName</a></code>:
            Host name or IP address for this management node.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-id">Id</a></code>:
            Number identifying the management node (Id). Now deprecated;
            use NodeId instead.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-logdestination">LogDestination</a></code>:
            Where to send log messages: console, system log, or
            specified log file
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-nodeid">NodeId</a></code>:
            Number uniquely identifying the management node among all
            nodes in the cluster.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-portnumber">PortNumber</a></code>:
            Port number to send commands to and fetch configuration from
            management server
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-portnumberstats">PortNumberStats</a></code>:
            Port number used to get statistical information from a
            management server
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-totalsendbuffermemory">TotalSendBufferMemory</a></code>:
            Total memory to use for all transporter send buffers
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-wan">wan</a></code>:
            Use WAN TCP setting as default
</p></li></ul>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Note
</div>
<p>
          After making changes in a management node's
          configuration, it is necessary to perform a rolling restart of
          the cluster for the new configuration to take effect. See
          <a class="xref" href="mysql-cluster.html#mysql-cluster-mgm-definition" title="22.3.3.5 Defining an NDB Cluster Management Server">Section 22.3.3.5, “Defining an NDB Cluster Management Server”</a>, for more
          information.
        </p><p>
          To add new management servers to a running NDB Cluster, it is
          also necessary perform a rolling restart of all cluster nodes
          after modifying any existing <code class="filename">config.ini</code>
          files. For more information about issues arising when using
          multiple management nodes, see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-limitations-multiple-nodes" title="22.1.7.10 Limitations Relating to Multiple NDB Cluster Nodes">Section 22.1.7.10, “Limitations Relating to Multiple NDB Cluster Nodes”</a>.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-params-api"></a>22.3.2.3 NDB Cluster SQL Node and API Node Configuration Parameters</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091605224944"></a><a class="indexterm" name="idm140091605223488"></a><a class="indexterm" name="idm140091605222416"></a><p>
        The listing in this section provides information about
        parameters used in the <code class="literal">[mysqld]</code> and
        <code class="literal">[api]</code> sections of a
        <code class="filename">config.ini</code> file for configuring NDB Cluster
        SQL nodes and API nodes. For detailed descriptions and other
        additional information about each of these parameters, see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-api-definition" title="22.3.3.7 Defining SQL and Other API Nodes in an NDB Cluster">Section 22.3.3.7, “Defining SQL and Other API Nodes in an NDB Cluster”</a>.
</p>
<div class="itemizedlist">
<a name="ndbparam-summary-list-api"></a><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-apiverbose" title="API Node Debugging Parameters">ApiVerbose</a></code>:
            Enable NDB API debugging; for NDB development
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-arbitrationdelay">ArbitrationDelay</a></code>:
            When asked to arbitrate, arbitrator waits this many
            milliseconds before voting
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-arbitrationrank">ArbitrationRank</a></code>:
            If 0, then API node is not arbitrator. Kernel selects
            arbitrators in order 1, 2
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-autoreconnect">AutoReconnect</a></code>:
            Specifies whether an API node should reconnect fully when
            disconnected from the cluster
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-batchbytesize">BatchByteSize</a></code>:
            The default batch size in bytes
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-batchsize">BatchSize</a></code>:
            The default batch size in number of records
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-connectbackoffmaxtime">ConnectBackoffMaxTime</a></code>:
            Specifies longest time in milliseconds (~100ms resolution)
            to allow between connection attempts to any given data node
            by this API node. Excludes time elapsed while connection
            attempts are ongoing, which in worst case can take several
            seconds. Disable by setting to 0. If no data nodes are
            currently connected to this API node,
            StartConnectBackoffMaxTime is used instead.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-connectionmap">ConnectionMap</a></code>:
            Specifies which data nodes to connect
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-defaulthashmapsize">DefaultHashMapSize</a></code>:
            Set size (in buckets) to use for table hash maps. Three
            values are supported: 0, 240, and 3840. Intended primarily
            for upgrades and downgrades within NDB 7.2.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-defaultoperationredoproblemaction">DefaultOperationRedoProblemAction</a></code>:
            How operations are handled in the event that
            RedoOverCommitCounter is exceeded
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-executeoncomputer">ExecuteOnComputer</a></code>:
            String referencing an earlier defined COMPUTER
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-extrasendbuffermemory">ExtraSendBufferMemory</a></code>:
            Memory to use for send buffers in addition to any allocated
            by TotalSendBufferMemory or SendBufferMemory. Default (0)
            allows up to 16MB.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-heartbeatthreadpriority">HeartbeatThreadPriority</a></code>:
            Set heartbeat thread policy and priority for API nodes; see
            manual for allowed values
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-hostname">HostName</a></code>:
            Host name or IP address for this SQL or API node.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-id">Id</a></code>:
            Number identifying MySQL server or API node (Id). Now
            deprecated; use NodeId instead.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-maxscanbatchsize">MaxScanBatchSize</a></code>:
            The maximum collective batch size for one scan
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-nodeid">NodeId</a></code>:
            Number uniquely identifying the SQL node or API node among
            all nodes in the cluster.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-startconnectbackoffmaxtime">StartConnectBackoffMaxTime</a></code>:
            Same as ConnectBackoffMaxTime except that this parameter is
            used in its place if no data nodes are connected to this API
            node.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-totalsendbuffermemory">TotalSendBufferMemory</a></code>:
            Total memory to use for all transporter send buffers
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-wan">wan</a></code>:
            Use WAN TCP setting as default
</p></li></ul>
</div>
<p>
        For a discussion of MySQL server options for NDB Cluster, see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-mysqld" title="22.3.3.9.1 MySQL Server Options for NDB Cluster">Section 22.3.3.9.1, “MySQL Server Options for NDB Cluster”</a>. For
        information about MySQL server system variables relating to NDB
        Cluster, see <a class="xref" href="mysql-cluster.html#mysql-cluster-system-variables" title="22.3.3.9.2 NDB Cluster System Variables">Section 22.3.3.9.2, “NDB Cluster System Variables”</a>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          To add new SQL or API nodes to the configuration of a running
          NDB Cluster, it is necessary to perform a rolling restart of
          all cluster nodes after adding new <code class="literal">[mysqld]</code>
          or <code class="literal">[api]</code> sections to the
          <code class="filename">config.ini</code> file (or files, if you are
          using more than one management server). This must be done
          before the new SQL or API nodes can connect to the cluster.
        </p><p>
          It is <span class="emphasis"><em>not</em></span> necessary to perform any
          restart of the cluster if new SQL or API nodes can employ
          previously unused API slots in the cluster configuration to
          connect to the cluster.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-params-other"></a>22.3.2.4 Other NDB Cluster Configuration Parameters</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091605163024"></a><a class="indexterm" name="idm140091605161568"></a><a class="indexterm" name="idm140091605160480"></a><a class="indexterm" name="idm140091605159408"></a><a class="indexterm" name="idm140091605158336"></a><p>
        The listings in this section provide information about
        parameters used in the <code class="literal">[computer]</code>,
        <code class="literal">[tcp]</code>, <code class="literal">[shm]</code>, and
        <code class="literal">[sci]</code> sections of a
        <code class="filename">config.ini</code> file for configuring NDB
        Cluster. For detailed descriptions and additional information
        about individual parameters, see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-tcp-definition" title="22.3.3.10 NDB Cluster TCP/IP Connections">Section 22.3.3.10, “NDB Cluster TCP/IP Connections”</a>,
        <a class="xref" href="mysql-cluster.html#mysql-cluster-shm-definition" title="22.3.3.12 NDB Cluster Shared-Memory Connections">Section 22.3.3.12, “NDB Cluster Shared-Memory Connections”</a>, or
        <a class="xref" href="mysql-cluster.html#mysql-cluster-sci-definition" title="22.3.3.13 SCI Transport Connections in NDB Cluster">Section 22.3.3.13, “SCI Transport Connections in NDB Cluster”</a>, as appropriate.
      </p><p>
        The following parameters apply to the
        <code class="filename">config.ini</code> file's
        <code class="literal">[computer]</code> section:
</p>
<div class="itemizedlist">
<a name="ndbparam-summary-list-computer"></a><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-computer-hostname">HostName</a></code>:
            Host name or IP address of this computer.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-computer-id">Id</a></code>:
            A unique identifier for this computer.
</p></li></ul>
</div>
<p>
        The following parameters apply to the
        <code class="filename">config.ini</code> file's
        <code class="literal">[tcp]</code> section:
</p>
<div class="itemizedlist">
<a name="ndbparam-summary-list-tcp"></a><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-checksum">Checksum</a></code>:
            If checksum is enabled, all signals between nodes are
            checked for errors
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-group">Group</a></code>:
            Used for group proximity; smaller value is interpreted as
            being closer
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-nodeid1">NodeId1</a></code>:
            ID of node (data node, API node, or management node) on one
            side of the connection
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-nodeid2">NodeId2</a></code>:
            ID of node (data node, API node, or management node) on one
            side of the connection
          </p></li><li class="listitem"><p>
            <code class="literal">NodeIdServer</code>: Set server side of TCP
            connection
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-overloadlimit">OverloadLimit</a></code>:
            When more than this many unsent bytes are in the send
            buffer, the connection is considered overloaded.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-presendchecksum">PreSendChecksum</a></code>:
            If this parameter and Checksum are both enabled, perform
            pre-send checksum checks, and check all TCP signals between
            nodes for errors
          </p></li><li class="listitem"><p>
            <code class="literal">Proxy</code>:
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-receivebuffermemory">ReceiveBufferMemory</a></code>:
            Bytes of buffer for signals received by this node
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-sendbuffermemory">SendBufferMemory</a></code>:
            Bytes of TCP buffer for signals sent from this node
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-sendsignalid">SendSignalId</a></code>:
            Sends ID in each signal. Used in trace files. Defaults to
            true in debug builds.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-tcp_maxseg_size">TCP_MAXSEG_SIZE</a></code>:
            Value used for TCP_MAXSEG
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-tcp_rcv_buf_size">TCP_RCV_BUF_SIZE</a></code>:
            Value used for SO_RCVBUF
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-tcp_snd_buf_size">TCP_SND_BUF_SIZE</a></code>:
            Value used for SO_SNDBUF
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-tcpbind_inaddr_any">TcpBind_INADDR_ANY</a></code>:
            Bind InAddrAny instead of host name for server part of
            connection
</p></li></ul>
</div>
<p>
        The following parameters apply to the
        <code class="filename">config.ini</code> file's
        <code class="literal">[shm]</code> section:
</p>
<div class="itemizedlist">
<a name="ndbparam-summary-list-shm"></a><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-checksum">Checksum</a></code>:
            If checksum is enabled, all signals between nodes are
            checked for errors
          </p></li><li class="listitem"><p>
            <code class="literal">Group</code>:
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-nodeid1">NodeId1</a></code>:
            ID of node (data node, API node, or management node) on one
            side of the connection
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-nodeid2">NodeId2</a></code>:
            ID of node (data node, API node, or management node) on one
            side of the connection
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-nodeidserver">NodeIdServer</a></code>:
            Set server side of SHM connection
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-overloadlimit">OverloadLimit</a></code>:
            When more than this many unsent bytes are in the send
            buffer, the connection is considered overloaded.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-presendchecksum">PreSendChecksum</a></code>:
            If this parameter and Checksum are both enabled, perform
            pre-send checksum checks, and check all SHM signals between
            nodes for errors
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-sendbuffermemory">SendBufferMemory</a></code>:
            Bytes in shared memory buffer for signals sent from this
            node
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-sendsignalid">SendSignalId</a></code>:
            Sends ID in each signal. Used in trace files.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-shmkey">ShmKey</a></code>:
            A shared memory key; when set to 1, this is calculated by
            NDB
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-shmspintime">ShmSpinTime</a></code>:
            When receiving, number of microseconds to spin before
            sleeping
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-shmsize">ShmSize</a></code>:
            Size of shared memory segment
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-signum">Signum</a></code>:
            Signal number to be used for signalling
</p></li></ul>
</div>
<p>
        The following parameters apply to the
        <code class="filename">config.ini</code> file's
        <code class="literal">[sci]</code> section:
</p>
<div class="itemizedlist">
<a name="ndbparam-summary-list-sci"></a><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-sci-checksum">Checksum</a></code>:
            If checksum is enabled, all signals between nodes are
            checked for errors
          </p></li><li class="listitem"><p>
            <code class="literal">Group</code>:
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-sci-host1sciid0">Host1SciId0</a></code>:
            SCI-node ID for adapter 0 on Host1 (a computer can have two
            adapters)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-sci-host1sciid1">Host1SciId1</a></code>:
            SCI-node ID for adapter 1 on Host1 (a computer can have two
            adapters)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-sci-host2sciid0">Host2SciId0</a></code>:
            SCI-node ID for adapter 0 on Host2 (a computer can have two
            adapters)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-sci-host2sciid1">Host2SciId1</a></code>:
            SCI-node ID for adapter 1 on Host2 (a computer can have two
            adapters)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-sci-nodeid1">NodeId1</a></code>:
            ID of node (data node, API node, or management node) on one
            side of the connection
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-sci-nodeid2">NodeId2</a></code>:
            ID of node (data node, API node, or management node) on one
            side of the connection
          </p></li><li class="listitem"><p>
            <code class="literal">NodeIdServer</code>:
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-sci-overloadlimit">OverloadLimit</a></code>:
            When more than this many unsent bytes are in the send
            buffer, the connection is considered overloaded.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-sci-sendlimit">SendLimit</a></code>:
            Transporter send buffer contents are sent when this number
            of bytes is buffered
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-sci-sendsignalid">SendSignalId</a></code>:
            Sends ID in each signal. Used in trace files.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-sci-sharedbuffersize">SharedBufferSize</a></code>:
            Size of shared memory segment
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-option-tables"></a>22.3.2.5 NDB Cluster mysqld Option and Variable Reference</h4>

</div>

</div>

</div>
<p>
        The following table provides a list of the command-line options,
        server and status variables applicable within
        <code class="literal">mysqld</code> when it is running as an SQL node in
        an NDB Cluster. For a table showing <span class="emphasis"><em>all</em></span>
        command-line options, server and status variables available for
        use with <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>, see
        <a class="xref" href="server-administration.html#server-option-variable-reference" title="5.1.4 Server Option, System Variable, and Status Variable Reference">Section 5.1.4, “Server Option, System Variable, and Status Variable Reference”</a>.
</p>
<div class="itemizedlist">
<a name="mysql-cluster-mysqld-optvars-summary-list"></a><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal"><a class="link" href="server-administration.html#statvar_Com_xxx">Com_show_ndb_status</a></code>:
            Count of SHOW NDB STATUS statements
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Handler_discover">Handler_discover</a></code>:
            Number of times that tables have been discovered
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-batch-size">ndb-batch-size</a></code>:
            Size (in bytes) to use for NDB transaction batches
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-blob-read-batch-bytes">ndb-blob-read-batch-bytes</a></code>:
            Specifies size in bytes that large BLOB reads should be
            batched into. 0 = no limit.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-blob-write-batch-bytes">ndb-blob-write-batch-bytes</a></code>:
            Specifies size in bytes that large BLOB writes should be
            batched into. 0 = no limit.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-cluster-connection-pool">ndb-cluster-connection-pool</a></code>:
            Number of connections to the cluster used by MySQL
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-cluster-connection-pool-nodeids">ndb-cluster-connection-pool-nodeids</a></code>:
            Comma-separated list of node IDs for connections to the
            cluster used by MySQL; the number of nodes in the list must
            be the same as the value set for
            --ndb-cluster-connection-pool
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-connectstring">ndb-connectstring</a></code>:
            Point to the management server that distributes the cluster
            configuration
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-default-column-format">ndb-default-column-format</a></code>:
            Use this value (FIXED or DYNAMIC) by default for
            COLUMN_FORMAT and ROW_FORMAT options when creating or adding
            columns to a table.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-deferred-constraints">ndb-deferred-constraints</a></code>:
            Specifies that constraint checks on unique indexes (where
            these are supported) should be deferred until commit time.
            Not normally needed or used; for testing purposes only.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-distribution">ndb-distribution</a></code>:
            Default distribution for new tables in NDBCLUSTER (KEYHASH
            or LINHASH, default is KEYHASH)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-apply-status">ndb-log-apply-status</a></code>:
            Cause a MySQL server acting as a slave to log
            mysql.ndb_apply_status updates received from its immediate
            master in its own binary log, using its own server ID.
            Effective only if the server is started with the
            --ndbcluster option.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-empty-epochs">ndb-log-empty-epochs</a></code>:
            When enabled, causes epochs in which there were no changes
            to be written to the ndb_apply_status and ndb_binlog_index
            tables, even when --log-slave-updates is enabled.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-empty-update">ndb-log-empty-update</a></code>:
            When enabled, causes updates that produced no changes to be
            written to the ndb_apply_status and ndb_binlog_index tables,
            even when --log-slave-updates is enabled.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-exclusive-reads">ndb-log-exclusive-reads</a></code>:
            Log primary key reads with exclusive locks; allow conflict
            resolution based on read conflicts
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-orig">ndb-log-orig</a></code>:
            Log originating server id and epoch in
            mysql.ndb_binlog_index table
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-transaction-id">ndb-log-transaction-id</a></code>:
            Write NDB transaction IDs in the binary log. Requires
            --log-bin-v1-events=OFF.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-update-as-write">ndb-log-update-as-write</a></code>:
            Toggles logging of updates on the master between updates
            (OFF) and writes (ON)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-mgmd-host">ndb-mgmd-host</a></code>:
            Set the host (and port, if desired) for connecting to
            management server
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-nodeid">ndb-nodeid</a></code>:
            NDB Cluster node ID for this MySQL server
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-recv-thread-activation-threshold">ndb-recv-thread-activation-threshold</a></code>:
            Activation threshold when receive thread takes over the
            polling of the cluster connection (measured in concurrently
            active threads)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-recv-thread-cpu-mask">ndb-recv-thread-cpu-mask</a></code>:
            CPU mask for locking receiver threads to specific CPUs;
            specified as hexadecimal. See documentation for details.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-transid-mysql-connection-map">ndb-transid-mysql-connection-map</a></code>:
            Enable or disable the ndb_transid_mysql_connection_map
            plugin; that is, enable or disable the INFORMATION_SCHEMA
            table having that name
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-wait-connected">ndb-wait-connected</a></code>:
            Time (in seconds) for the MySQL server to wait for
            connection to cluster management and data nodes before
            accepting MySQL client connections
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-wait-setup">ndb-wait-setup</a></code>:
            Time (in seconds) for the MySQL server to wait for NDB
            engine setup to complete
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-allow-copying-alter-table">ndb-allow-copying-alter-table</a></code>:
            Set to OFF to keep ALTER TABLE from using copying operations
            on NDB tables
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_received_count">Ndb_api_bytes_received_count</a></code>:
            Amount of data (in bytes) received from the data nodes by
            this MySQL Server (SQL node)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_received_count_session">Ndb_api_bytes_received_count_session</a></code>:
            Amount of data (in bytes) received from the data nodes in
            this client session
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_received_count_slave">Ndb_api_bytes_received_count_slave</a></code>:
            Amount of data (in bytes) received from the data nodes by
            this slave
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_sent_count">Ndb_api_bytes_sent_count</a></code>:
            Amount of data (in bytes) sent to the data nodes by this
            MySQL Server (SQL node)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_sent_count_session">Ndb_api_bytes_sent_count_session</a></code>:
            Amount of data (in bytes) sent to the data nodes in this
            client session
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_sent_count_slave">Ndb_api_bytes_sent_count_slave</a></code>:
            Amount of data (in bytes) sent to the data nodes by this
            slave
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_event_bytes_count">Ndb_api_event_bytes_count</a></code>:
            Number of bytes of events received by this MySQL Server (SQL
            node)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_event_bytes_count_injector">Ndb_api_event_bytes_count_injector</a></code>:
            Number of bytes of events received by the NDB binary log
            injector thread
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_event_data_count">Ndb_api_event_data_count</a></code>:
            Number of row change events received by this MySQL Server
            (SQL node)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_event_data_count_injector">Ndb_api_event_data_count_injector</a></code>:
            Number of row change events received by the NDB binary log
            injector thread
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_event_nondata_count">Ndb_api_event_nondata_count</a></code>:
            Number of events received, other than row change events, by
            this MySQL Server (SQL node)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_event_nondata_count_injector">Ndb_api_event_nondata_count_injector</a></code>:
            Number of events received, other than row change events, by
            the NDB binary log injector thread
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_pk_op_count">Ndb_api_pk_op_count</a></code>:
            Number of operations based on or using primary keys by this
            MySQL Server (SQL node)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_pk_op_count_session">Ndb_api_pk_op_count_session</a></code>:
            Number of operations based on or using primary keys in this
            client session
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_pk_op_count_slave">Ndb_api_pk_op_count_slave</a></code>:
            Number of operations based on or using primary keys by this
            slave
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_pruned_scan_count">Ndb_api_pruned_scan_count</a></code>:
            Number of scans that have been pruned to a single partition
            by this MySQL Server (SQL node)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_pruned_scan_count_session">Ndb_api_pruned_scan_count_session</a></code>:
            Number of scans that have been pruned to a single partition
            in this client session
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_pruned_scan_count_slave">Ndb_api_pruned_scan_count_slave</a></code>:
            Number of scans that have been pruned to a single partition
            by this slave
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_range_scan_count">Ndb_api_range_scan_count</a></code>:
            Number of range scans that have been started by this MySQL
            Server (SQL node)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_range_scan_count_session">Ndb_api_range_scan_count_session</a></code>:
            Number of range scans that have been started in this client
            session
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_range_scan_count_slave">Ndb_api_range_scan_count_slave</a></code>:
            Number of range scans that have been started by this slave
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_read_row_count">Ndb_api_read_row_count</a></code>:
            Total number of rows that have been read by this MySQL
            Server (SQL node)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_read_row_count_session">Ndb_api_read_row_count_session</a></code>:
            Total number of rows that have been read in this client
            session
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_read_row_count_slave">Ndb_api_read_row_count_slave</a></code>:
            Total number of rows that have been read by this slave
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_scan_batch_count">Ndb_api_scan_batch_count</a></code>:
            Number of batches of rows received by this MySQL Server (SQL
            node)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_scan_batch_count_session">Ndb_api_scan_batch_count_session</a></code>:
            Number of batches of rows received in this client session
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_scan_batch_count_slave">Ndb_api_scan_batch_count_slave</a></code>:
            Number of batches of rows received by this slave
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_table_scan_count">Ndb_api_table_scan_count</a></code>:
            Number of table scans that have been started, including
            scans of internal tables, by this MySQL Server (SQL node)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_table_scan_count_session">Ndb_api_table_scan_count_session</a></code>:
            Number of table scans that have been started, including
            scans of internal tables, in this client session
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_table_scan_count_slave">Ndb_api_table_scan_count_slave</a></code>:
            Number of table scans that have been started, including
            scans of internal tables, by this slave
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_abort_count">Ndb_api_trans_abort_count</a></code>:
            Number of transactions aborted by this MySQL Server (SQL
            node)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_abort_count_session">Ndb_api_trans_abort_count_session</a></code>:
            Number of transactions aborted in this client session
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_abort_count_slave">Ndb_api_trans_abort_count_slave</a></code>:
            Number of transactions aborted by this slave
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_close_count">Ndb_api_trans_close_count</a></code>:
            Number of transactions aborted (may be greater than the sum
            of TransCommitCount and TransAbortCount) by this MySQL
            Server (SQL node)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_close_count_session">Ndb_api_trans_close_count_session</a></code>:
            Number of transactions aborted (may be greater than the sum
            of TransCommitCount and TransAbortCount) in this client
            session
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_close_count_slave">Ndb_api_trans_close_count_slave</a></code>:
            Number of transactions aborted (may be greater than the sum
            of TransCommitCount and TransAbortCount) by this slave
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_commit_count">Ndb_api_trans_commit_count</a></code>:
            Number of transactions committed by this MySQL Server (SQL
            node)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_commit_count_session">Ndb_api_trans_commit_count_session</a></code>:
            Number of transactions committed in this client session
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_commit_count_slave">Ndb_api_trans_commit_count_slave</a></code>:
            Number of transactions committed by this slave
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_local_read_row_count">Ndb_api_trans_local_read_row_count</a></code>:
            Total number of rows that have been read by this MySQL
            Server (SQL node)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_local_read_row_count_session">Ndb_api_trans_local_read_row_count_session</a></code>:
            Total number of rows that have been read in this client
            session
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_local_read_row_count_slave">Ndb_api_trans_local_read_row_count_slave</a></code>:
            Total number of rows that have been read by this slave
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_start_count">Ndb_api_trans_start_count</a></code>:
            Number of transactions started by this MySQL Server (SQL
            node)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_start_count_session">Ndb_api_trans_start_count_session</a></code>:
            Number of transactions started in this client session
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_start_count_slave">Ndb_api_trans_start_count_slave</a></code>:
            Number of transactions started by this slave
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_uk_op_count">Ndb_api_uk_op_count</a></code>:
            Number of operations based on or using unique keys by this
            MySQL Server (SQL node)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_uk_op_count_session">Ndb_api_uk_op_count_session</a></code>:
            Number of operations based on or using unique keys in this
            client session
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_uk_op_count_slave">Ndb_api_uk_op_count_slave</a></code>:
            Number of operations based on or using unique keys by this
            slave
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_exec_complete_count">Ndb_api_wait_exec_complete_count</a></code>:
            Number of times thread has been blocked while waiting for
            execution of an operation to complete by this MySQL Server
            (SQL node)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_exec_complete_count_session">Ndb_api_wait_exec_complete_count_session</a></code>:
            Number of times thread has been blocked while waiting for
            execution of an operation to complete in this client session
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_exec_complete_count_slave">Ndb_api_wait_exec_complete_count_slave</a></code>:
            Number of times thread has been blocked while waiting for
            execution of an operation to complete by this slave
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_meta_request_count">Ndb_api_wait_meta_request_count</a></code>:
            Number of times thread has been blocked waiting for a
            metadata-based signal by this MySQL Server (SQL node)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_meta_request_count_session">Ndb_api_wait_meta_request_count_session</a></code>:
            Number of times thread has been blocked waiting for a
            metadata-based signal in this client session
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_meta_request_count_slave">Ndb_api_wait_meta_request_count_slave</a></code>:
            Number of times thread has been blocked waiting for a
            metadata-based signal by this slave
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_nanos_count">Ndb_api_wait_nanos_count</a></code>:
            Total time (in nanoseconds) spent waiting for some type of
            signal from the data nodes by this MySQL Server (SQL node)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_nanos_count_session">Ndb_api_wait_nanos_count_session</a></code>:
            Total time (in nanoseconds) spent waiting for some type of
            signal from the data nodes in this client session
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_nanos_count_slave">Ndb_api_wait_nanos_count_slave</a></code>:
            Total time (in nanoseconds) spent waiting for some type of
            signal from the data nodes by this slave
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_scan_result_count">Ndb_api_wait_scan_result_count</a></code>:
            Number of times thread has been blocked while waiting for a
            scan-based signal by this MySQL Server (SQL node)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_scan_result_count_session">Ndb_api_wait_scan_result_count_session</a></code>:
            Number of times thread has been blocked while waiting for a
            scan-based signal in this client session
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_scan_result_count_slave">Ndb_api_wait_scan_result_count_slave</a></code>:
            Number of times thread has been blocked while waiting for a
            scan-based signal by this slave
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_autoincrement_prefetch_sz">ndb_autoincrement_prefetch_sz</a></code>:
            NDB auto-increment prefetch size
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_cache_check_time">ndb_cache_check_time</a></code>:
            Number of milliseconds between checks of cluster SQL nodes
            made by the MySQL query cache
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_clear_apply_status">ndb_clear_apply_status</a></code>:
            Causes RESET SLAVE to clear all rows from the
            ndb_apply_status table; ON by default
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_cluster_node_id">Ndb_cluster_node_id</a></code>:
            If the server is acting as an NDB Cluster node, then the
            value of this variable its node ID in the cluster
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_config_from_host">Ndb_config_from_host</a></code>:
            The host name or IP address of the Cluster management server
            Formerly Ndb_connected_host
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_config_from_port">Ndb_config_from_port</a></code>:
            The port for connecting to Cluster management server.
            Formerly Ndb_connected_port
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_fn_epoch">Ndb_conflict_fn_epoch</a></code>:
            Number of rows that have been found in conflict by the
            NDB$EPOCH() conflict detection function
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_fn_epoch2">Ndb_conflict_fn_epoch2</a></code>:
            Number of rows that have been found in conflict by the
            NDB$EPOCH2() conflict detection function
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_fn_epoch2_trans">Ndb_conflict_fn_epoch2_trans</a></code>:
            Number of rows that have been found in conflict by the
            NDB$EPOCH2_TRANS() conflict detection function
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_fn_epoch_trans">Ndb_conflict_fn_epoch_trans</a></code>:
            Number of rows that have been found in conflict by the
            NDB$EPOCH_TRANS() conflict detection function
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_fn_max">Ndb_conflict_fn_max</a></code>:
            If the server is part of an NDB Cluster involved in cluster
            replication, the value of this variable indicates the number
            of times that conflict resolution based on "greater
            timestamp wins" has been applied
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_fn_old">Ndb_conflict_fn_old</a></code>:
            If the server is part of an NDB Cluster involved in cluster
            replication, the value of this variable indicates the number
            of times that "same timestamp wins" conflict resolution has
            been applied
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_last_conflict_epoch">Ndb_conflict_last_conflict_epoch</a></code>:
            Most recent NDB epoch on this slave in which a conflict was
            detected
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_last_stable_epoch">Ndb_conflict_last_stable_epoch</a></code>:
            Number of rows found to be in conflict by a transactional
            conflict function
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_reflected_op_discard_count">Ndb_conflict_reflected_op_discard_count</a></code>:
            Number of reflected operations that were not applied due an
            error during execution
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_reflected_op_prepare_count">Ndb_conflict_reflected_op_prepare_count</a></code>:
            Number of reflected operations received that have been
            prepared for execution
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_refresh_op_count">Ndb_conflict_refresh_op_count</a></code>:
            Number of refresh operations that have been prepared
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_trans_conflict_commit_count">Ndb_conflict_trans_conflict_commit_count</a></code>:
            Number of epoch transactions committed after requiring
            transactional conflict handling
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_trans_detect_iter_count">Ndb_conflict_trans_detect_iter_count</a></code>:
            Number of internal iterations required to commit an epoch
            transaction. Should be (slightly) greater than or equal to
            Ndb_conflict_trans_conflict_commit_count
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_trans_reject_count">Ndb_conflict_trans_reject_count</a></code>:
            Number of transactions rejected after being found in
            conflict by a transactional conflict function
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_trans_row_conflict_count">Ndb_conflict_trans_row_conflict_count</a></code>:
            Number of rows found in conflict by a transactional conflict
            function. Includes any rows included in or dependent on
            conflicting transactions.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_trans_row_reject_count">Ndb_conflict_trans_row_reject_count</a></code>:
            Total number of rows realigned after being found in conflict
            by a transactional conflict function. Includes
            Ndb_conflict_trans_row_conflict_count and any rows included
            in or dependent on conflicting transactions.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_data_node_neighbour">ndb_data_node_neighbour</a></code>:
            Specifies cluster data node "closest" to this MySQL Server,
            for transaction hinting and fully replicated tables
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_default_column_format">ndb_default_column_format</a></code>:
            Sets default row format and column format (FIXED or DYNAMIC)
            used for new NDB tables
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_deferred_constraints">ndb_deferred_constraints</a></code>:
            Specifies that constraint checks should be deferred (where
            these are supported). Not normally needed or used; for
            testing purposes only.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_distribution">ndb_distribution</a></code>:
            Default distribution for new tables in NDBCLUSTER (KEYHASH
            or LINHASH, default is KEYHASH)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_epoch_delete_delete_count">Ndb_conflict_delete_delete_count</a></code>:
            Number of delete-delete conflicts detected (delete operation
            is applied, but row does not exist)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_eventbuffer_free_percent">ndb_eventbuffer_free_percent</a></code>:
            Percentage of free memory that should be available in event
            buffer before resumption of buffering, after reaching limit
            set by ndb_eventbuffer_max_alloc
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_eventbuffer_max_alloc">ndb_eventbuffer_max_alloc</a></code>:
            Maximum memory that can be allocated for buffering events by
            the NDB API. Defaults to 0 (no limit).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_execute_count">Ndb_execute_count</a></code>:
            Provides the number of round trips to the NDB kernel made by
            operations
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_extra_logging">ndb_extra_logging</a></code>:
            Controls logging of NDB Cluster schema, connection, and data
            distribution events in the MySQL error log
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_force_send">ndb_force_send</a></code>:
            Forces sending of buffers to NDB immediately, without
            waiting for other threads
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_fully_replicated">ndb_fully_replicated</a></code>:
            Whether new NDB tables are fully replicated
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_index_stat_enable">ndb_index_stat_enable</a></code>:
            Use NDB index statistics in query optimization
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_index_stat_option">ndb_index_stat_option</a></code>:
            Comma-separated list of tunable options for NDB index
            statistics; the list should contain no spaces
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_join_pushdown">ndb_join_pushdown</a></code>:
            Enables pushing down of joins to data nodes
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_apply_status">ndb_log_apply_status</a></code>:
            Whether or not a MySQL server acting as a slave logs
            mysql.ndb_apply_status updates received from its immediate
            master in its own binary log, using its own server ID
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_bin">ndb_log_bin</a></code>:
            Write updates to NDB tables in the binary log. Effective
            only if binary logging is enabled with --log-bin.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_binlog_index">ndb_log_binlog_index</a></code>:
            Insert mapping between epochs and binary log positions into
            the ndb_binlog_index table. Defaults to ON. Effective only
            if binary logging is enabled on the server.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_empty_epochs">ndb_log_empty_epochs</a></code>:
            When enabled, epochs in which there were no changes are
            written to the ndb_apply_status and ndb_binlog_index tables,
            even when log_slave_updates is enabled
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_empty_update">ndb_log_empty_update</a></code>:
            When enabled, updates which produce no changes are written
            to the ndb_apply_status and ndb_binlog_index tables, even
            when log_slave_updates is enabled
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_exclusive_reads">ndb_log_exclusive_reads</a></code>:
            Log primary key reads with exclusive locks; allow conflict
            resolution based on read conflicts
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_orig">ndb_log_orig</a></code>:
            Whether the id and epoch of the originating server are
            recorded in the mysql.ndb_binlog_index table. Set using the
            --ndb-log-orig option when starting mysqld.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_transaction_id">ndb_log_transaction_id</a></code>:
            Whether NDB transaction IDs are written into the binary log
            (Read-only.)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-update-minimal">ndb-log-update-minimal</a></code>:
            Log updates in a minimal format.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-updated-only">ndb_log_updated_only</a></code>:
            Log complete rows (ON) or updates only (OFF)
          </p></li><li class="listitem"><p>
            <code class="literal">ndb_metadata_check</code>: Enable auto-detection
            of NDB metadata changes to synchronize with data dictionary
          </p></li><li class="listitem"><p>
            <code class="literal">ndb_metadata_check_interval</code>: Interval in
            seconds to perform check for NDB metadata changes to
            synchronize with data dictionary
          </p></li><li class="listitem"><p>
            <code class="literal">Ndb_metadata_detected_count</code>: Number of
            times NDB metadata change monitor thread has detected
            changes
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_number_of_data_nodes">Ndb_number_of_data_nodes</a></code>:
            If the server is part of an NDB Cluster, the value of this
            variable is the number of data nodes in the cluster
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-optimization-delay">ndb-optimization-delay</a></code>:
            Sets the number of milliseconds to wait between processing
            sets of rows by OPTIMIZE TABLE on NDB tables
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_optimized_node_selection">ndb_optimized_node_selection</a></code>:
            Determines how an SQL node chooses a cluster data node to
            use as transaction coordinator
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_pruned_scan_count">Ndb_pruned_scan_count</a></code>:
            Number of scans executed by NDB since the cluster was last
            started where partition pruning could be used
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_pushed_queries_defined">Ndb_pushed_queries_defined</a></code>:
            Number of joins that API nodes have attempted to push down
            to the data nodes
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_pushed_queries_dropped">Ndb_pushed_queries_dropped</a></code>:
            Number of joins that API nodes have tried to push down, but
            failed
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_pushed_queries_executed">Ndb_pushed_queries_executed</a></code>:
            Number of joins successfully pushed down and executed on the
            data nodes
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_pushed_reads">Ndb_pushed_reads</a></code>:
            Number of reads executed on the data nodes by pushed-down
            joins
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_read_backup">ndb_read_backup</a></code>:
            Enable read from any replica
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_recv_thread_activation_threshold">ndb_recv_thread_activation_threshold</a></code>:
            Activation threshold when receive thread takes over the
            polling of the cluster connection (measured in concurrently
            active threads)
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_recv_thread_cpu_mask">ndb_recv_thread_cpu_mask</a></code>:
            CPU mask for locking receiver threads to specific CPUs;
            specified as hexadecimal. See documentation for details.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_report_thresh_binlog_epoch_slip">ndb_report_thresh_binlog_epoch_slip</a></code>:
            NDB 7.5.4 and later: Threshold for number of epochs
            completely buffered, but not yet consumed by binlog injector
            thread which when exceeded generates
            BUFFERED_EPOCHS_OVER_THRESHOLD event buffer status message;
            prior to NDB 7.5.4: Threshold for number of epochs to lag
            behind before reporting binary log status
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_report_thresh_binlog_mem_usage">ndb_report_thresh_binlog_mem_usage</a></code>:
            This is a threshold on the percentage of free memory
            remaining before reporting binary log status
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_row_checksum">ndb_row_checksum</a></code>:
            When enabled, set row checksums; enabled by default
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_scan_count">Ndb_scan_count</a></code>:
            The total number of scans executed by NDB since the cluster
            was last started
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_show_foreign_key_mock_tables">ndb_show_foreign_key_mock_tables</a></code>:
            Show the mock tables used to support foreign_key_checks=0
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_slave_conflict_role">ndb_slave_conflict_role</a></code>:
            Role for slave to play in conflict detection and resolution.
            Value is one of PRIMARY, SECONDARY, PASS, or NONE (default).
            Can be changed only when slave SQL thread is stopped. See
            documentation for further information.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_slave_max_replicated_epoch">Ndb_slave_max_replicated_epoch</a></code>:
            The most recently committed NDB epoch on this slave. When
            this value is greater than or equal to
            Ndb_conflict_last_conflict_epoch, no conflicts have yet been
            detected.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_system_name">Ndb_system_name</a></code>:
            Configured cluster system name; empty if server not
            connected to NDB
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_table_no_logging">ndb_table_no_logging</a></code>:
            NDB tables created when this setting is enabled are not
            checkpointed to disk (although table schema files are
            created). The setting in effect when the table is created
            with or altered to use NDBCLUSTER persists for the lifetime
            of the table.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_table_temporary">ndb_table_temporary</a></code>:
            NDB tables are not persistent on disk: no schema files are
            created and the tables are not logged
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_use_exact_count">ndb_use_exact_count</a></code>:
            Use exact row count when planning queries
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_use_transactions">ndb_use_transactions</a></code>:
            Forces NDB to use a count of records during SELECT COUNT(*)
            query planning to speed up this type of query
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_version">ndb_version</a></code>:
            Shows build and NDB engine version as an integer
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_version_string">ndb_version_string</a></code>:
            Shows build information including NDB engine version in
            ndb-x.y.z format
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndbcluster">ndbcluster</a></code>:
            Enable NDB Cluster (if this version of MySQL supports it)
            Disabled by <a class="link" href="mysql-cluster.html#option_mysqld_skip-ndbcluster"><code class="option">--skip-ndbcluster</code></a>
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_database">ndbinfo_database</a></code>:
            The name used for the NDB information database; read only
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_max_bytes">ndbinfo_max_bytes</a></code>:
            Used for debugging only
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_max_rows">ndbinfo_max_rows</a></code>:
            Used for debugging only
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_offline">ndbinfo_offline</a></code>:
            Put the ndbinfo database into offline mode, in which no rows
            are returned from tables or views
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_show_hidden">ndbinfo_show_hidden</a></code>:
            Whether to show ndbinfo internal base tables in the mysql
            client. The default is OFF.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_table_prefix">ndbinfo_table_prefix</a></code>:
            The prefix to use for naming ndbinfo internal base tables
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_version">ndbinfo_version</a></code>:
            The version of the ndbinfo engine; read only
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_server-id-bits">server-id-bits</a></code>:
            Sets the number of least significant bits in the server_id
            actually used for identifying the server, permitting NDB API
            applications to store application data in the most
            significant bits. server_id must be less than 2 to the power
            of this value.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_slave_allow_batching">slave_allow_batching</a></code>:
            Turns update batching on and off for a replication slave
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_transaction_allow_batching">transaction_allow_batching</a></code>:
            Allows batching of statements within a transaction. Disable
            AUTOCOMMIT to use.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-config-file"></a>22.3.3 NDB Cluster Configuration Files</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-config-example">22.3.3.1 NDB Cluster Configuration: Basic Example</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-config-starting">22.3.3.2 Recommended Starting Configuration for NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-connection-strings">22.3.3.3 NDB Cluster Connection Strings</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-computer-definition">22.3.3.4 Defining Computers in an NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-mgm-definition">22.3.3.5 Defining an NDB Cluster Management Server</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbd-definition">22.3.3.6 Defining NDB Cluster Data Nodes</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-api-definition">22.3.3.7 Defining SQL and Other API Nodes in an NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-system-definition">22.3.3.8 Defining the System</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-options-variables">22.3.3.9 MySQL Server Options and Variables for NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-tcp-definition">22.3.3.10 NDB Cluster TCP/IP Connections</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-tcp-definition-direct">22.3.3.11 NDB Cluster TCP/IP Connections Using Direct Connections</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-shm-definition">22.3.3.12 NDB Cluster Shared-Memory Connections</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-sci-definition">22.3.3.13 SCI Transport Connections in NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-config-send-buffers">22.3.3.14 Configuring NDB Cluster Send Buffer Parameters</a></span></dt></dl>
</div>
<a class="indexterm" name="idm140091604669536"></a><a class="indexterm" name="idm140091604668048"></a><a class="indexterm" name="idm140091604666560"></a><p>
      Configuring NDB Cluster requires working with two files:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="filename">my.cnf</code>: Specifies options for all NDB
          Cluster executables. This file, with which you should be
          familiar with from previous work with MySQL, must be
          accessible by each executable running in the cluster.
        </p></li><li class="listitem"><p>
          <code class="filename">config.ini</code>: This file, sometimes known as
          the <span class="firstterm">global configuration
          file</span>, is read only by the NDB Cluster management
          server, which then distributes the information contained
          therein to all processes participating in the cluster.
          <code class="filename">config.ini</code> contains a description of each
          node involved in the cluster. This includes configuration
          parameters for data nodes and configuration parameters for
          connections between all nodes in the cluster. For a quick
          reference to the sections that can appear in this file, and
          what sorts of configuration parameters may be placed in each
          section, see
          <a class="link" href="mysql-cluster.html#mysql-cluster-config-ini-sections" title="Sections of the config.ini File">Sections of
          the <code class="filename">config.ini</code> File</a>.
</p></li></ul>
</div>
<p><b>Caching of configuration data. </b>
        <code class="literal">NDB</code> uses <span class="firstterm">stateful
        configuration</span>. Rather than reading the global
        configuration file every time the management server is
        restarted, the management server caches the configuration the
        first time it is started, and thereafter, the global
        configuration file is read only when one of the following
        conditions is true:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>The management server is started using the --initial option. </b>
            When <a class="link" href="mysql-cluster.html#option_ndb_mgmd_initial"><code class="option">--initial</code></a> is used, the
            global configuration file is re-read, any existing cache
            files are deleted, and the management server creates a new
            configuration cache.
          </p></li><li class="listitem"><p><b>The management server is started using the --reload option. </b>
            The <a class="link" href="mysql-cluster.html#option_ndb_mgmd_reload"><code class="option">--reload</code></a> option causes
            the management server to compare its cache with the global
            configuration file. If they differ, the management server
            creates a new configuration cache; any existing
            configuration cache is preserved, but not used. If the
            management server's cache and the global configuration
            file contain the same configuration data, then the existing
            cache is used, and no new cache is created.
          </p></li><li class="listitem"><p><b>The management server is started using --config-cache=FALSE. </b>
            This disables
            <a class="link" href="mysql-cluster.html#option_ndb_mgmd_config-cache"><code class="option">--config-cache</code></a> (enabled by
            default), and can be used to force the management server to
            bypass configuration caching altogether. In this case, the
            management server ignores any configuration files that may
            be present, always reading its configuration data from the
            <code class="filename">config.ini</code> file instead.
          </p></li><li class="listitem"><p><b>No configuration cache is found. </b>
            In this case, the management server reads the global
            configuration file and creates a cache containing the same
            configuration data as found in the file.
</p></li></ul>
</div>
<p><b>Configuration cache files. </b>
        The management server by default creates configuration cache
        files in a directory named <code class="filename">mysql-cluster</code> in
        the MySQL installation directory. (If you build NDB Cluster from
        source on a Unix system, the default location is
        <code class="filename">/usr/local/mysql-cluster</code>.) This can be
        overridden at runtime by starting the management server with the
        <a class="link" href="mysql-cluster.html#option_ndb_mgmd_configdir"><code class="option">--configdir</code></a> option.
        Configuration cache files are binary files named according to
        the pattern
        <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_config.bin.<em class="replaceable"><code>seq_id</code></em></code>,
        where <em class="replaceable"><code>node_id</code></em> is the management
        server's node ID in the cluster, and
        <em class="replaceable"><code>seq_id</code></em> is a cache idenitifer. Cache
        files are numbered sequentially using
        <em class="replaceable"><code>seq_id</code></em>, in the order in which they
        are created. The management server uses the latest cache file as
        determined by the <em class="replaceable"><code>seq_id</code></em>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        It is possible to roll back to a previous configuration by
        deleting later configuration cache files, or by renaming an
        earlier cache file so that it has a higher
        <em class="replaceable"><code>seq_id</code></em>. However, since configuration
        cache files are written in a binary format, you should not
        attempt to edit their contents by hand.
</p>
</div>
<p>
      For more information about the
      <a class="link" href="mysql-cluster.html#option_ndb_mgmd_configdir"><code class="option">--configdir</code></a>,
      <a class="link" href="mysql-cluster.html#option_ndb_mgmd_config-cache"><code class="option">--config-cache</code></a>,
      <a class="link" href="mysql-cluster.html#option_ndb_mgmd_initial"><code class="option">--initial</code></a>, and
      <a class="link" href="mysql-cluster.html#option_ndb_mgmd_reload"><code class="option">--reload</code></a> options for the NDB
      Cluster management server, see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon">Section 22.4.4, “<span class="command"><strong>ndb_mgmd</strong></span> — The NDB Cluster Management Server Daemon”</a>.
    </p><p>
      We are continuously making improvements in Cluster configuration
      and attempting to simplify this process. Although we strive to
      maintain backward compatibility, there may be times when introduce
      an incompatible change. In such cases we will try to let Cluster
      users know in advance if a change is not backward compatible. If
      you find such a change and we have not documented it, please
      report it in the MySQL bugs database using the instructions given
      in <a class="xref" href="introduction.html#bug-reports" title="1.7 How to Report Bugs or Problems">Section 1.7, “How to Report Bugs or Problems”</a>.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-config-example"></a>22.3.3.1 NDB Cluster Configuration: Basic Example</h4>
</div>
</div>
</div>
<a class="indexterm" name="idm140091604625072"></a><a class="indexterm" name="idm140091604623584"></a><a class="indexterm" name="idm140091604622096"></a><p>
        To support NDB Cluster, you will need to update
        <code class="filename">my.cnf</code> as shown in the following example.
        You may also specify these parameters on the command line when
        invoking the executables.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          The options shown here should not be confused with those that
          are used in <code class="filename">config.ini</code> global
          configuration files. Global configuration options are
          discussed later in this section.
</p>
</div>
<pre data-lang="ini" class="programlisting">
# my.cnf
# example additions to my.cnf for NDB Cluster
# (valid in MySQL 8.0)

# enable ndbcluster storage engine, and provide connection string for
# management server host (default port is 1186)
[mysqld]
ndbcluster
ndb-connectstring=ndb_mgmd.mysql.com


# provide connection string for management server host (default port: 1186)
[ndbd]
connect-string=ndb_mgmd.mysql.com

# provide connection string for management server host (default port: 1186)
[ndb_mgm]
connect-string=ndb_mgmd.mysql.com

# provide location of cluster configuration file
[ndb_mgmd]
config-file=/etc/config.ini
</pre><p>
        (For more information on connection strings, see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-connection-strings" title="22.3.3.3 NDB Cluster Connection Strings">Section 22.3.3.3, “NDB Cluster Connection Strings”</a>.)
      </p><pre data-lang="ini" class="programlisting">
# my.cnf
# example additions to my.cnf for NDB Cluster
# (will work on all versions)

# enable ndbcluster storage engine, and provide connection string for management
# server host to the default port 1186
[mysqld]
ndbcluster
ndb-connectstring=ndb_mgmd.mysql.com:1186
</pre>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
          Once you have started a <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> process with
          the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> and
          <code class="literal">ndb-connectstring</code> parameters in the
          <code class="literal">[mysqld]</code> in the <code class="filename">my.cnf</code>
          file as shown previously, you cannot execute any
          <a class="link" href="sql-syntax.html#create-table" title="13.1.20 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> or
          <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statements without
          having actually started the cluster. Otherwise, these
          statements will fail with an error. <span class="emphasis"><em>This is by
          design</em></span>.
</p>
</div>
<p>
        You may also use a separate <code class="literal">[mysql_cluster]</code>
        section in the cluster <code class="filename">my.cnf</code> file for
        settings to be read and used by all executables:
      </p><pre data-lang="ini" class="programlisting">
# cluster-specific settings
[mysql_cluster]
ndb-connectstring=ndb_mgmd.mysql.com:1186
</pre><p>
        For additional <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> variables that
        can be set in the <code class="filename">my.cnf</code> file, see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-system-variables" title="22.3.3.9.2 NDB Cluster System Variables">Section 22.3.3.9.2, “NDB Cluster System Variables”</a>.
      </p><p>
        The NDB Cluster global configuration file is by convention named
        <code class="filename">config.ini</code> (but this is not required). If
        needed, it is read by <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> at startup and
        can be placed in any location that can be read by it. The
        location and name of the configuration are specified using
        <a class="link" href="mysql-cluster.html#option_ndb_mgmd_config-file"><code class="option">--config-file=<em class="replaceable"><code>path_name</code></em></code></a>
        with <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> on the command line. This
        option has no default value, and is ignored if
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> uses the configuration cache.
      </p><p>
        The global configuration file for NDB Cluster uses INI format,
        which consists of sections preceded by section headings
        (surrounded by square brackets), followed by the appropriate
        parameter names and values. One deviation from the standard INI
        format is that the parameter name and value can be separated by
        a colon (<code class="literal">:</code>) as well as the equal sign
        (<code class="literal">=</code>); however, the equal sign is preferred.
        Another deviation is that sections are not uniquely identified
        by section name. Instead, unique sections (such as two different
        nodes of the same type) are identified by a unique ID specified
        as a parameter within the section.
      </p><p>
        Default values are defined for most parameters, and can also be
        specified in <code class="filename">config.ini</code>. To create a
        default value section, simply add the word
        <code class="literal">default</code> to the section name. For example, an
        <code class="literal">[ndbd]</code> section contains parameters that apply
        to a particular data node, whereas an <code class="literal">[ndbd
        default]</code> section contains parameters that apply to all
        data nodes. Suppose that all data nodes should use the same data
        memory size. To configure them all, create an <code class="literal">[ndbd
        default]</code> section that contains a
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a> line to
        specify the data memory size.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          In some older releases of NDB Cluster, there was no default
          value for
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-noofreplicas"><code class="literal">NoOfReplicas</code></a>, which
          always had to be specified explicitly in the <code class="literal">[ndbd
          default]</code> section. Although this parameter now has a
          default value of 2, which is the recommended setting in most
          common usage scenarios, it is still recommended practice to
          set this parameter explicitly.
</p>
</div>
<p>
        The global configuration file must define the computers and
        nodes involved in the cluster and on which computers these nodes
        are located. An example of a simple configuration file for a
        cluster consisting of one management server, two data nodes and
        two MySQL servers is shown here:
      </p><pre data-lang="ini" class="programlisting">
# file "config.ini" - 2 data nodes and 2 SQL nodes
# This file is placed in the startup directory of ndb_mgmd (the
# management server)
# The first MySQL Server can be started from any host. The second
# can be started only on the host mysqld_5.mysql.com

[ndbd default]
NoOfReplicas= 2
DataDir= /var/lib/mysql-cluster

[ndb_mgmd]
Hostname= ndb_mgmd.mysql.com
DataDir= /var/lib/mysql-cluster

[ndbd]
HostName= ndbd_2.mysql.com

[ndbd]
HostName= ndbd_3.mysql.com

[mysqld]
[mysqld]
HostName= mysqld_5.mysql.com
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          The preceding example is intended as a minimal starting
          configuration for purposes of familiarization with NDB Cluster
          , and is almost certain not to be sufficient for production
          settings. See <a class="xref" href="mysql-cluster.html#mysql-cluster-config-starting" title="22.3.3.2 Recommended Starting Configuration for NDB Cluster">Section 22.3.3.2, “Recommended Starting Configuration for NDB Cluster”</a>,
          which provides a more complete example starting configuration.
</p>
</div>
<p>
        Each node has its own section in the
        <code class="filename">config.ini</code> file. For example, this cluster
        has two data nodes, so the preceding configuration file contains
        two <code class="literal">[ndbd]</code> sections defining these nodes.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          Do not place comments on the same line as a section heading in
          the <code class="filename">config.ini</code> file; this causes the
          management server not to start because it cannot parse the
          configuration file in such cases.
</p>
</div>
<h5><a name="mysql-cluster-config-ini-sections"></a>Sections of the config.ini File</h5>
<p>
        There are six different sections that you can use in the
        <code class="filename">config.ini</code> configuration file, as described
        in the following list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">[computer]</code>: Defines cluster hosts. This
            is not required to configure a viable NDB Cluster, but be
            may used as a convenience when setting up a large cluster.
            See <a class="xref" href="mysql-cluster.html#mysql-cluster-computer-definition" title="22.3.3.4 Defining Computers in an NDB Cluster">Section 22.3.3.4, “Defining Computers in an NDB Cluster”</a>, for
            more information.
          </p></li><li class="listitem"><p>
            <code class="literal">[ndbd]</code>: Defines a cluster data node
            (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> process). See
            <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition" title="22.3.3.6 Defining NDB Cluster Data Nodes">Section 22.3.3.6, “Defining NDB Cluster Data Nodes”</a>, for
            details.
          </p></li><li class="listitem"><p>
            <code class="literal">[mysqld]</code>: Defines the cluster's MySQL
            server nodes (also called SQL or API nodes). For a
            discussion of SQL node configuration, see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-api-definition" title="22.3.3.7 Defining SQL and Other API Nodes in an NDB Cluster">Section 22.3.3.7, “Defining SQL and Other API Nodes in an NDB Cluster”</a>.
          </p></li><li class="listitem"><p>
            <code class="literal">[mgm]</code> or <code class="literal">[ndb_mgmd]</code>:
            Defines a cluster management server (MGM) node. For
            information concerning the configuration of management
            nodes, see <a class="xref" href="mysql-cluster.html#mysql-cluster-mgm-definition" title="22.3.3.5 Defining an NDB Cluster Management Server">Section 22.3.3.5, “Defining an NDB Cluster Management Server”</a>.
          </p></li><li class="listitem"><p>
            <code class="literal">[tcp]</code>: Defines a TCP/IP connection
            between cluster nodes, with TCP/IP being the default
            connection protocol. Normally, <code class="literal">[tcp]</code> or
            <code class="literal">[tcp default]</code> sections are not required
            to set up an NDB Cluster, as the cluster handles this
            automatically; however, it may be necessary in some
            situations to override the defaults provided by the cluster.
            See <a class="xref" href="mysql-cluster.html#mysql-cluster-tcp-definition" title="22.3.3.10 NDB Cluster TCP/IP Connections">Section 22.3.3.10, “NDB Cluster TCP/IP Connections”</a>, for
            information about available TCP/IP configuration parameters
            and how to use them. (You may also find
            <a class="xref" href="mysql-cluster.html#mysql-cluster-tcp-definition-direct" title="22.3.3.11 NDB Cluster TCP/IP Connections Using Direct Connections">Section 22.3.3.11, “NDB Cluster TCP/IP Connections Using Direct Connections”</a> to be
            of interest in some cases.)
          </p></li><li class="listitem"><p>
            <code class="literal">[shm]</code>: Defines shared-memory connections
            between nodes. In MySQL 8.0, it is enabled by
            default, but should still be considered experimental. For a
            discussion of SHM interconnects, see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-shm-definition" title="22.3.3.12 NDB Cluster Shared-Memory Connections">Section 22.3.3.12, “NDB Cluster Shared-Memory Connections”</a>.
          </p></li><li class="listitem"><p>
            <code class="literal">[sci]</code>: Defines Scalable Coherent
            Interface connections between cluster data nodes. Not
            supported in NDB 8.0.
</p></li></ul>
</div>
<p>
        You can define <code class="literal">default</code> values for each
        section. NDB Cluster parameter names are case-insensitive,
        unless specified in MySQL Server <code class="filename">my.cnf</code> or
        <code class="filename">my.ini</code> files.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-config-starting"></a>22.3.3.2 Recommended Starting Configuration for NDB Cluster</h4>

</div>

</div>

</div>
<p>
        Achieving the best performance from an NDB Cluster depends on a
        number of factors including the following:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            NDB Cluster software version
          </p></li><li class="listitem"><p>
            Numbers of data nodes and SQL nodes
          </p></li><li class="listitem"><p>
            Hardware
          </p></li><li class="listitem"><p>
            Operating system
          </p></li><li class="listitem"><p>
            Amount of data to be stored
          </p></li><li class="listitem"><p>
            Size and type of load under which the cluster is to operate
</p></li></ul>
</div>
<p>
        Therefore, obtaining an optimum configuration is likely to be an
        iterative process, the outcome of which can vary widely with the
        specifics of each NDB Cluster deployment. Changes in
        configuration are also likely to be indicated when changes are
        made in the platform on which the cluster is run, or in
        applications that use the NDB Cluster 's data. For these
        reasons, it is not possible to offer a single configuration that
        is ideal for all usage scenarios. However, in this section, we
        provide a recommended base configuration.
      </p><p><b>Starting config.ini file. </b>
          The following <code class="filename">config.ini</code> file is a
          recommended starting point for configuring a cluster running
          NDB Cluster 8.0:
        </p><pre data-lang="ini" class="programlisting">
# TCP PARAMETERS

[tcp default]
<a class="link" href="mysql-cluster.html#ndbparam-tcp-sendbuffermemory"><code class="literal">SendBufferMemory</code></a>=2M
<a class="link" href="mysql-cluster.html#ndbparam-tcp-receivebuffermemory"><code class="literal">ReceiveBufferMemory</code></a>=2M

# Increasing the sizes of these 2 buffers beyond the default values
# helps prevent bottlenecks due to slow disk I/O.

# MANAGEMENT NODE PARAMETERS

[ndb_mgmd default]
<a class="link" href="mysql-cluster.html#ndbparam-mgmd-datadir"><code class="literal">DataDir</code></a>=<em class="replaceable"><code>path/to/management/server/data/directory</code></em>

# It is possible to use a different data directory for each management
# server, but for ease of administration it is preferable to be
# consistent.

[ndb_mgmd]
<a class="link" href="mysql-cluster.html#ndbparam-mgmd-hostname"><code class="literal">HostName</code></a>=<em class="replaceable"><code>management-server-A-hostname</code></em>
# <a class="link" href="mysql-cluster.html#ndbparam-mgmd-nodeid"><code class="literal">NodeId</code></a>=<em class="replaceable"><code>management-server-A-nodeid</code></em>

[ndb_mgmd]
<a class="link" href="mysql-cluster.html#ndbparam-mgmd-hostname"><code class="literal">HostName</code></a>=<em class="replaceable"><code>management-server-B-hostname</code></em>
# <a class="link" href="mysql-cluster.html#ndbparam-mgmd-nodeid"><code class="literal">NodeId</code></a>=<em class="replaceable"><code>management-server-B-nodeid</code></em>

# Using 2 management servers helps guarantee that there is always an
# arbitrator in the event of network partitioning, and so is
# recommended for high availability. Each management server must be
# identified by a HostName. You may for the sake of convenience specify
# a NodeId for any management server, although one will be allocated
# for it automatically; if you do so, it must be in the range 1-255
# inclusive and must be unique among all IDs specified for cluster
# nodes.

# DATA NODE PARAMETERS

[ndbd default]
<a class="link" href="mysql-cluster.html#ndbparam-ndbd-noofreplicas"><code class="literal">NoOfReplicas</code></a>=2

# Using 2 replicas is recommended to guarantee availability of data;
# using only 1 replica does not provide any redundancy, which means
# that the failure of a single data node causes the entire cluster to
# shut down. We do not recommend using more than 2 replicas, since 2 is
# sufficient to provide high availability, and we do not currently test
# with greater values for this parameter.

<a class="link" href="mysql-cluster.html#ndbparam-ndbd-lockpagesinmainmemory"><code class="literal">LockPagesInMainMemory</code></a>=1

# On Linux and Solaris systems, setting this parameter locks data node
# processes into memory. Doing so prevents them from swapping to disk,
# which can severely degrade cluster performance.

<a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a>=3456M

# The value provided for DataMemory assumes 4 GB RAM
# per data node. However, for best results, you should first calculate
# the memory that would be used based on the data you actually plan to
# store (you may find the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-size-pl" title="22.4.28 ndb_size.pl — NDBCLUSTER Size Requirement Estimator">ndb_size.pl</a> utility helpful in estimating
# this), then allow an extra 20% over the calculated values. Naturally,
# you should ensure that each data node host has at least as much
# physical memory as the sum of these two values.

# <a class="link" href="mysql-cluster.html#ndbparam-ndbd-odirect"><code class="literal">ODirect</code></a>=1

# Enabling this parameter causes NDBCLUSTER to try using O_DIRECT
# writes for local checkpoints and redo logs; this can reduce load on
# CPUs. We recommend doing so when using NDB Cluster on systems running
# Linux kernel 2.6 or later.

<a class="link" href="mysql-cluster.html#ndbparam-ndbd-nooffragmentlogfiles"><code class="literal">NoOfFragmentLogFiles</code></a>=300
<a class="link" href="mysql-cluster.html#ndbparam-ndbd-datadir"><code class="literal">DataDir</code></a>=<em class="replaceable"><code>path/to/data/node/data/directory</code></em>
<a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentoperations"><code class="literal">MaxNoOfConcurrentOperations</code></a>=100000

<a class="link" href="mysql-cluster.html#ndbparam-ndbd-schedulerspintimer"><code class="literal">SchedulerSpinTimer</code></a>=400
<a class="link" href="mysql-cluster.html#ndbparam-ndbd-schedulerexecutiontimer"><code class="literal">SchedulerExecutionTimer</code></a>=100
<a class="link" href="mysql-cluster.html#ndbparam-ndbd-realtimescheduler"><code class="literal">RealTimeScheduler</code></a>=1
# Setting these parameters allows you to take advantage of real-time scheduling
# of NDB threads to achieve increased throughput when using <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>. They
# are not needed when using <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>; in particular, you should not set
# <a class="link" href="mysql-cluster.html#ndbparam-ndbd-realtimescheduler"><code class="literal">RealTimeScheduler</code></a> for <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> data nodes.

<a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenglobalcheckpoints"><code class="literal">TimeBetweenGlobalCheckpoints</code></a>=1000
<a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenepochs"><code class="literal">TimeBetweenEpochs</code></a>=200
<a class="link" href="mysql-cluster.html#ndbparam-ndbd-redobuffer"><code class="literal">RedoBuffer</code></a>=32M

# <a class="link" href="mysql-cluster.html#ndbparam-ndbd-compressedlcp"><code class="literal">CompressedLCP</code></a>=1
# <a class="link" href="mysql-cluster.html#ndbparam-ndbd-compressedbackup"><code class="literal">CompressedBackup</code></a>=1
# Enabling CompressedLCP and CompressedBackup causes, respectively, local
checkpoint files and backup files to be compressed, which can result in a space
savings of up to 50% over noncompressed LCPs and backups.

# <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooflocalscans"><code class="literal">MaxNoOfLocalScans</code></a>=64
<a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooftables"><code class="literal">MaxNoOfTables</code></a>=1024
<a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooforderedindexes"><code class="literal">MaxNoOfOrderedIndexes</code></a>=256

[ndbd]
<a class="link" href="mysql-cluster.html#ndbparam-ndbd-hostname"><code class="literal">HostName</code></a>=<em class="replaceable"><code>data-node-A-hostname</code></em>
# <a class="link" href="mysql-cluster.html#ndbparam-ndbd-nodeid"><code class="literal">NodeId</code></a>=<em class="replaceable"><code>data-node-A-nodeid</code></em>

<a class="link" href="mysql-cluster.html#ndbparam-ndbd-lockexecutethreadtocpu"><code class="literal">LockExecuteThreadToCPU</code></a>=1
<a class="link" href="mysql-cluster.html#ndbparam-ndbd-lockmaintthreadstocpu"><code class="literal">LockMaintThreadsToCPU</code></a>=0
# On systems with multiple CPUs, these parameters can be used to lock NDBCLUSTER
# threads to specific CPUs

[ndbd]
<a class="link" href="mysql-cluster.html#ndbparam-ndbd-hostname"><code class="literal">HostName</code></a>=<em class="replaceable"><code>data-node-B-hostname</code></em>
# <a class="link" href="mysql-cluster.html#ndbparam-ndbd-nodeid"><code class="literal">NodeId</code></a>=<em class="replaceable"><code>data-node-B-nodeid</code></em>

<a class="link" href="mysql-cluster.html#ndbparam-ndbd-lockexecutethreadtocpu"><code class="literal">LockExecuteThreadToCPU</code></a>=1
<a class="link" href="mysql-cluster.html#ndbparam-ndbd-lockmaintthreadstocpu"><code class="literal">LockMaintThreadsToCPU</code></a>=0

# You must have an [ndbd] section for every data node in the cluster;
# each of these sections must include a HostName. Each section may
# optionally include a NodeId for convenience, but in most cases, it is
# sufficient to allow the cluster to allocate node IDs dynamically. If
# you do specify the node ID for a data node, it must be in the range 1
# to 48 inclusive and must be unique among all IDs specified for
# cluster nodes.

# SQL NODE / API NODE PARAMETERS

[mysqld]
# <a class="link" href="mysql-cluster.html#ndbparam-api-hostname"><code class="literal">HostName</code></a>=<em class="replaceable"><code>sql-node-A-hostname</code></em>
# <a class="link" href="mysql-cluster.html#ndbparam-api-nodeid"><code class="literal">NodeId</code></a>=<em class="replaceable"><code>sql-node-A-nodeid</code></em>

[mysqld]

[mysqld]

# Each API or SQL node that connects to the cluster requires a [mysqld]
# or [api] section of its own. Each such section defines a connection
# <span class="quote">“<span class="quote">slot</span>”</span>; you should have at least as many of these sections in the
# config.ini file as the total number of API nodes and SQL nodes that
# you wish to have connected to the cluster at any given time. There is
# no performance or other penalty for having extra slots available in
# case you find later that you want or need more API or SQL nodes to
# connect to the cluster at the same time.
# If no HostName is specified for a given [mysqld] or [api] section,
# then <span class="emphasis"><em>any</em></span> API or SQL node may use that slot to connect to the
# cluster. You may wish to use an explicit HostName for one connection slot
# to guarantee that an API or SQL node from that host can always
# connect to the cluster. If you wish to prevent API or SQL nodes from
# connecting from other than a desired host or hosts, then use a
# HostName for every [mysqld] or [api] section in the config.ini file.
# You can if you wish define a node ID (NodeId parameter) for any API or
# SQL node, but this is not necessary; if you do so, it must be in the
# range 1 to 255 inclusive and must be unique among all IDs specified
# for cluster nodes.
</pre><p><b>Recommended my.cnf options for SQL nodes. </b>
          MySQL Servers acting as NDB Cluster SQL nodes must always be
          started with the <a class="link" href="mysql-cluster.html#option_mysqld_ndbcluster"><code class="option">--ndbcluster</code></a>
          and <code class="option">--ndb-connectstring</code> options, either on
          the command line or in <code class="filename">my.cnf</code>. In
          addition, set the following options for all
          <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> processes in the cluster, unless
          your setup requires otherwise:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="option">--ndb-use-exact-count=0</code>
          </p></li><li class="listitem"><p>
            <code class="option">--ndb-index-stat-enable=0</code>
          </p></li><li class="listitem"><p>
            <code class="option">--ndb-force-send=1</code>
          </p></li><li class="listitem"><p>
            <code class="option">--engine-condition-pushdown=1</code>
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-connection-strings"></a>22.3.3.3 NDB Cluster Connection Strings</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091604465040"></a><a class="indexterm" name="idm140091604463552"></a><p>
        With the exception of the NDB Cluster management server
        (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>), each node that is part of an NDB
        Cluster requires a <span class="firstterm">connection
        string</span> that points to the management server's
        location. This connection string is used in establishing a
        connection to the management server as well as in performing
        other tasks depending on the node's role in the cluster. The
        syntax for a connection string is as follows:
      </p><pre data-lang="simple" class="programlisting">
[nodeid=<em class="replaceable"><code>node_id</code></em>, ]<em class="replaceable"><code>host-definition</code></em>[, <em class="replaceable"><code>host-definition</code></em>[, ...]]

<em class="replaceable"><code>host-definition</code></em>:
    <em class="replaceable"><code>host_name</code></em>[:<em class="replaceable"><code>port_number</code></em>]
</pre><p>
        <code class="literal">node_id</code> is an integer greater than or equal
        to 1 which identifies a node in <code class="filename">config.ini</code>.
        <em class="replaceable"><code>host_name</code></em> is a string representing a
        valid Internet host name or IP address.
        <em class="replaceable"><code>port_number</code></em> is an integer referring
        to a TCP/IP port number.
      </p><pre data-lang="simple" class="programlisting">
example 1 (long):    "nodeid=2,myhost1:1100,myhost2:1100,198.51.100.3:1200"
example 2 (short):   "myhost1"
</pre><p>
        <code class="literal">localhost:1186</code> is used as the default
        connection string value if none is provided. If
        <em class="replaceable"><code>port_num</code></em> is omitted from the
        connection string, the default port is 1186. This port should
        always be available on the network because it has been assigned
        by IANA for this purpose (see
        <a class="ulink" href="http://www.iana.org/assignments/port-numbers" target="_top">http://www.iana.org/assignments/port-numbers</a> for
        details).
      </p><p>
        By listing multiple host definitions, it is possible to
        designate several redundant management servers. An NDB Cluster
        data or API node attempts to contact successive management
        servers on each host in the order specified, until a successful
        connection has been established.
      </p><p>
        It is also possible to specify in a connection string one or
        more bind addresses to be used by nodes having multiple network
        interfaces for connecting to management servers. A bind address
        consists of a hostname or network address and an optional port
        number. This enhanced syntax for connection strings is shown
        here:
      </p><pre data-lang="simple" class="programlisting">
[nodeid=<em class="replaceable"><code>node_id</code></em>, ]
    [bind-address=<em class="replaceable"><code>host-definition</code></em>, ]
    <em class="replaceable"><code>host-definition</code></em>[; bind-address=<em class="replaceable"><code>host-definition</code></em>]
    <em class="replaceable"><code>host-definition</code></em>[; bind-address=<em class="replaceable"><code>host-definition</code></em>]
    [, ...]]

<em class="replaceable"><code>host-definition</code></em>:
    <em class="replaceable"><code>host_name</code></em>[:<em class="replaceable"><code>port_number</code></em>]
</pre><p>
        If a single bind address is used in the connection string
        <span class="emphasis"><em>prior</em></span> to specifying any management hosts,
        then this address is used as the default for connecting to any
        of them (unless overridden for a given management server; see
        later in this section for an example). For example, the
        following connection string causes the node to use
        <code class="literal">198.51.100.242</code> regardless of the management
        server to which it connects:
      </p><pre data-lang="simple" class="programlisting">
bind-address=198.51.100.242, poseidon:1186, perch:1186
</pre><p>
        If a bind address is specified <span class="emphasis"><em>following</em></span> a
        management host definition, then it is used only for connecting
        to that management node. Consider the following connection
        string:
      </p><pre data-lang="simple" class="programlisting">
poseidon:1186;bind-address=localhost, perch:1186;bind-address=198.51.100.242
</pre><p>
        In this case, the node uses <code class="literal">localhost</code> to
        connect to the management server running on the host named
        <code class="literal">poseidon</code> and
        <code class="literal">198.51.100.242</code> to connect to the management
        server running on the host named <code class="literal">perch</code>.
      </p><p>
        You can specify a default bind address and then override this
        default for one or more specific management hosts. In the
        following example, <code class="literal">localhost</code> is used for
        connecting to the management server running on host
        <code class="literal">poseidon</code>; since
        <code class="literal">198.51.100.242</code> is specified first (before any
        management server definitions), it is the default bind address
        and so is used for connecting to the management servers on hosts
        <code class="literal">perch</code> and <code class="literal">orca</code>:
      </p><pre data-lang="simple" class="programlisting">
bind-address=198.51.100.242,poseidon:1186;bind-address=localhost,perch:1186,orca:2200
</pre><p>
        There are a number of different ways to specify the connection
        string:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Each executable has its own command-line option which
            enables specifying the management server at startup. (See
            the documentation for the respective executable.)
          </p></li><li class="listitem"><p>
            It is also possible to set the connection string for all
            nodes in the cluster at once by placing it in a
            <code class="literal">[mysql_cluster]</code> section in the management
            server's <code class="filename">my.cnf</code> file.
          </p></li><li class="listitem"><p>
            For backward compatibility, two other options are available,
            using the same syntax:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
                Set the <code class="envar">NDB_CONNECTSTRING</code> environment
                variable to contain the connection string.
              </p></li><li class="listitem"><p>
                Write the connection string for each executable into a
                text file named <code class="filename">Ndb.cfg</code> and place
                this file in the executable's startup directory.
</p></li></ol>
</div>
<p>
            However, these are now deprecated and should not be used for
            new installations.
</p></li></ul>
</div>
<p>
        The recommended method for specifying the connection string is
        to set it on the command line or in the
        <code class="filename">my.cnf</code> file for each executable.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-computer-definition"></a>22.3.3.4 Defining Computers in an NDB Cluster</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091604416784"></a><a class="indexterm" name="idm140091604415296"></a><p>
        The <code class="literal">[computer]</code> section has no real
        significance other than serving as a way to avoid the need of
        defining host names for each node in the system. All parameters
        mentioned here are required.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-computer-id"></a>
            <code class="literal">Id</code>
</p>
<div class="table">
<a name="id-computer-table"></a><p class="title"><b>Table 22.7 This table provides type and
value information for the Id computer configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>string</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-computer-definition.html#mysql-cluster-computer-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>IS</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This is a unique identifier, used to refer to the host
            computer elsewhere in the configuration file.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              The computer ID is <span class="emphasis"><em>not</em></span> the same as
              the node ID used for a management, API, or data node.
              Unlike the case with node IDs, you cannot use
              <code class="literal">NodeId</code> in place of
              <code class="literal">Id</code> in the <code class="literal">[computer]</code>
              section of the <code class="filename">config.ini</code> file.
</p>
</div>
</li><li class="listitem"><p><a name="ndbparam-computer-hostname"></a>
            <code class="literal">HostName</code>
</p>
<div class="table">
<a name="hostname-computer-table"></a><p class="title"><b>Table 22.8 This table provides type and
value information for the HostName computer configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>name or IP address</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-computer-definition.html#mysql-cluster-computer-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This is the computer's hostname or IP address.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-mgm-definition"></a>22.3.3.5 Defining an NDB Cluster Management Server</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091604360080"></a><a class="indexterm" name="idm140091604358592"></a><p>
        The <code class="literal">[ndb_mgmd]</code> section is used to configure
        the behavior of the management server. If multiple management
        servers are employed, you can specify parameters common to all
        of them in an <code class="literal">[ndb_mgmd default]</code> section.
        <code class="literal">[mgm]</code> and <code class="literal">[mgm default]</code>
        are older aliases for these, supported for backward
        compatibility.
      </p><p>
        All parameters in the following list are optional and assume
        their default values if omitted.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          If neither the <code class="literal">ExecuteOnComputer</code> nor the
          <code class="literal">HostName</code> parameter is present, the default
          value <code class="literal">localhost</code> will be assumed for both.
</p>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-mgmd-id"></a>
            <a class="indexterm" name="idm140091604348832"></a>

            <code class="literal">Id</code>
</p>
<div class="table">
<a name="id-mgmd-table"></a><p class="title"><b>Table 22.9 This table provides type and
value information for the Id management node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1 - 255</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-mgm-definition.html#mysql-cluster-mgm-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>IS</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Each node in the cluster has a unique identity. For a
            management node, this is represented by an integer value in
            the range 1 to 255, inclusive. This ID is used by all
            internal cluster messages for addressing the node, and so
            must be unique for each NDB Cluster node, regardless of the
            type of node.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              Data node IDs must be less than 49. If you plan to deploy
              a large number of data nodes, it is a good idea to limit
              the node IDs for management nodes (and API nodes) to
              values greater than 48.
</p>
</div>
<p>
            The use of the <code class="literal">Id</code> parameter for
            identifying management nodes is deprecated in favor of
            <a class="link" href="mysql-cluster.html#ndbparam-mgmd-nodeid"><code class="literal">NodeId</code></a>. Although
            <code class="literal">Id</code> continues to be supported for backward
            compatibility, it now generates a warning and is subject to
            removal in a future version of NDB Cluster.
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-nodeid"></a>
            <a class="indexterm" name="idm140091604320000"></a>

            <code class="literal">NodeId</code>
</p>
<div class="table">
<a name="nodeid-mgmd-table"></a><p class="title"><b>Table 22.10 This table provides type and
value information for the NodeId management node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1 - 255</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-mgm-definition.html#mysql-cluster-mgm-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>IS</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Each node in the cluster has a unique identity. For a
            management node, this is represented by an integer value in
            the range 1 to 255 inclusive. This ID is used by all
            internal cluster messages for addressing the node, and so
            must be unique for each NDB Cluster node, regardless of the
            type of node.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              Data node IDs must be less than 49. If you plan to deploy
              a large number of data nodes, it is a good idea to limit
              the node IDs for management nodes (and API nodes) to
              values greater than 48.
</p>
</div>
<p>
            <code class="literal">NodeId</code> is the preferred parameter name to
            use when identifying management nodes. Although the older
            <a class="link" href="mysql-cluster.html#ndbparam-mgmd-id"><code class="literal">Id</code></a> continues to be
            supported for backward compatibility, it is now deprecated
            and generates a warning when used; it is also subject to
            removal in a future NDB Cluster release.
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-executeoncomputer"></a>
            <a class="indexterm" name="idm140091604291728"></a>

            <code class="literal">ExecuteOnComputer</code>
</p>
<div class="table">
<a name="executeoncomputer-mgmd-table"></a><p class="title"><b>Table 22.11 This table provides type and
value information for the ExecuteOnComputer management node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>name</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-mgm-definition.html#mysql-cluster-mgm-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This refers to the <code class="literal">Id</code> set for one of the
            computers defined in a <code class="literal">[computer]</code> section
            of the <code class="filename">config.ini</code> file.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              This parameter is deprecated, and is subject to removal in
              a future release. Use the
              <a class="link" href="mysql-cluster.html#ndbparam-mgmd-hostname"><code class="literal">HostName</code></a> parameter
              instead.
</p>
</div>
</li><li class="listitem"><p><a name="ndbparam-mgmd-portnumber"></a>
            <a class="indexterm" name="idm140091604263088"></a>

            <code class="literal">PortNumber</code>
</p>
<div class="table">
<a name="portnumber-mgmd-table"></a><p class="title"><b>Table 22.12 This table provides type and
value information for the PortNumber management node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>1186</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 64K</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-mgm-definition.html#mysql-cluster-mgm-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This is the port number on which the management server
            listens for configuration requests and management commands.
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-hostname"></a>
            <a class="indexterm" name="idm140091604238752"></a>

            <code class="literal">HostName</code>
</p>
<div class="table">
<a name="hostname-mgmd-table"></a><p class="title"><b>Table 22.13 This table provides type and
value information for the HostName management node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>name or IP address</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-mgm-definition.html#mysql-cluster-mgm-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Specifying this parameter defines the hostname of the
            computer on which the management node is to reside. To
            specify a hostname other than <code class="literal">localhost</code>,
            either this parameter or
            <code class="literal">ExecuteOnComputer</code> is required.
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-locationdomainid"></a>
            <a class="indexterm" name="idm140091604212816"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-mgmd-locationdomainid"><code class="literal">LocationDomainId</code></a>
</p>
<div class="table">
<a name="locationdomainid-mgmd-table"></a><p class="title"><b>Table 22.14 This table provides type and
value information for the LocationDomainId management node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 16</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-mgm-definition.html#mysql-cluster-mgm-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Assigns a management node to a specific
            <a class="ulink" href="https://docs.us-phoenix-1.oraclecloud.com/Content/General/Concepts/regions.htm" target="_top">availability
            domain</a> (also known as an availability zone) within a
            cloud. By informing <code class="literal">NDB</code> which nodes are
            in which availability domains, performance can be improved
            in a cloud environment in the following ways:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                If requested data is not found on the same node, reads
                can be directed to another node in the same availability
                domain.
              </p></li><li class="listitem"><p>
                Communication between nodes in different availability
                domains are guaranteed to use <code class="literal">NDB</code>
                transporters' WAN support without any further
                manual intervention.
              </p></li><li class="listitem"><p>
                The transporter's group number can be based on
                which availability domain is used, such that also SQL
                and other API nodes communicate with local data nodes in
                the same availability domain whenever possible.
              </p></li><li class="listitem"><p>
                The arbitrator can be selected from an availability
                domain in which no data nodes are present, or, if no
                such availability domain can be found, from a third
                availability domain.
</p></li></ul>
</div>
<p>
            <code class="literal">LocationDomainId</code> takes an integer value
            between 0 and 16 inclusive, with 0 being the default; using
            0 is the same as leaving the parameter unset.
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-logdestination"></a>
            <a class="indexterm" name="idm140091604179808"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-mgmd-logdestination"><code class="literal">LogDestination</code></a>
</p>
<div class="table">
<a name="logdestination-mgmd-table"></a><p class="title"><b>Table 22.15 This table provides type and
value information for the LogDestination management node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>{CONSOLE|SYSLOG|FILE}</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[see text]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-mgm-definition.html#mysql-cluster-mgm-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter specifies where to send cluster logging
            information. There are three options in this
            regard—<code class="literal">CONSOLE</code>,
            <code class="literal">SYSLOG</code>, and
            <code class="literal">FILE</code>—with <code class="literal">FILE</code>
            being the default:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">CONSOLE</code> outputs the log to
                <code class="literal">stdout</code>:
              </p><pre data-lang="simple" class="programlisting">
CONSOLE
</pre></li><li class="listitem"><p>
                <code class="literal">SYSLOG</code> sends the log to a
                <code class="literal">syslog</code> facility, possible values
                being one of <code class="literal">auth</code>,
                <code class="literal">authpriv</code>, <code class="literal">cron</code>,
                <code class="literal">daemon</code>, <code class="literal">ftp</code>,
                <code class="literal">kern</code>, <code class="literal">lpr</code>,
                <code class="literal">mail</code>, <code class="literal">news</code>,
                <code class="literal">syslog</code>, <code class="literal">user</code>,
                <code class="literal">uucp</code>, <code class="literal">local0</code>,
                <code class="literal">local1</code>, <code class="literal">local2</code>,
                <code class="literal">local3</code>, <code class="literal">local4</code>,
                <code class="literal">local5</code>, <code class="literal">local6</code>, or
                <code class="literal">local7</code>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
                  Not every facility is necessarily supported by every
                  operating system.
</p>
</div>
<pre data-lang="simple" class="programlisting">
SYSLOG:facility=syslog
</pre></li><li class="listitem"><p>
                <code class="literal">FILE</code> pipes the cluster log output to
                a regular file on the same machine. The following values
                can be specified:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                    <code class="literal">filename</code>: The name of the log
                    file.
                  </p><p>
                    The default log file name used in such cases is
                    <code class="filename">ndb_<em class="replaceable"><code>nodeid</code></em>_cluster.log</code>.
                  </p></li><li class="listitem"><p>
                    <code class="literal">maxsize</code>: The maximum size (in
                    bytes) to which the file can grow before logging
                    rolls over to a new file. When this occurs, the old
                    log file is renamed by appending
                    <em class="replaceable"><code>.N</code></em> to the file name,
                    where <em class="replaceable"><code>N</code></em> is the next
                    number not yet used with this name.
                  </p></li><li class="listitem"><p>
                    <code class="literal">maxfiles</code>: The maximum number of
                    log files.
</p></li></ul>
</div>
<pre data-lang="simple" class="programlisting">
FILE:filename=cluster.log,maxsize=1000000,maxfiles=6
</pre><p>
                The default value for the <code class="literal">FILE</code>
                parameter is
                <code class="literal">FILE:filename=ndb_<em class="replaceable"><code>node_id</code></em>_cluster.log,maxsize=1000000,maxfiles=6</code>,
                where <em class="replaceable"><code>node_id</code></em> is the ID of
                the node.
</p></li></ul>
</div>
<p>
            It is possible to specify multiple log destinations
            separated by semicolons as shown here:
          </p><pre data-lang="simple" class="programlisting">
CONSOLE;SYSLOG:facility=local0;FILE:filename=/var/log/mgmd
</pre></li><li class="listitem"><p><a name="ndbparam-mgmd-arbitrationrank"></a>
            <a class="indexterm" name="idm140091604115088"></a>

            <code class="literal">ArbitrationRank</code>
</p>
<div class="table">
<a name="arbitrationrank-mgmd-table"></a><p class="title"><b>Table 22.16 This table provides type and
value information for the ArbitrationRank management node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>0-2</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>1</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 2</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-mgm-definition.html#mysql-cluster-mgm-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter is used to define which nodes can act as
            arbitrators. Only management nodes and SQL nodes can be
            arbitrators. <code class="literal">ArbitrationRank</code> can take one
            of the following values:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">0</code>: The node will never be used as an
                arbitrator.
              </p></li><li class="listitem"><p>
                <code class="literal">1</code>: The node has high priority; that
                is, it will be preferred as an arbitrator over
                low-priority nodes.
              </p></li><li class="listitem"><p>
                <code class="literal">2</code>: Indicates a low-priority node
                which be used as an arbitrator only if a node with a
                higher priority is not available for that purpose.
</p></li></ul>
</div>
<p>
            Normally, the management server should be configured as an
            arbitrator by setting its <code class="literal">ArbitrationRank</code>
            to 1 (the default for management nodes) and those for all
            SQL nodes to 0 (the default for SQL nodes).
          </p><p>
            You can disable arbitration completely either by setting
            <code class="literal">ArbitrationRank</code> to 0 on all management
            and SQL nodes, or by setting the
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-arbitration"><code class="literal">Arbitration</code></a>
            parameter in the <code class="literal">[ndbd default]</code> section
            of the <code class="filename">config.ini</code> global configuration
            file. Setting
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-arbitration"><code class="literal">Arbitration</code></a> causes
            any settings for <code class="literal">ArbitrationRank</code> to be
            disregarded.
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-arbitrationdelay"></a>
            <a class="indexterm" name="idm140091604077360"></a>

            <code class="literal">ArbitrationDelay</code>
</p>
<div class="table">
<a name="arbitrationdelay-mgmd-table"></a><p class="title"><b>Table 22.17 This table provides type and
value information for the ArbitrationDelay management node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>milliseconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-mgm-definition.html#mysql-cluster-mgm-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            An integer value which causes the management server's
            responses to arbitration requests to be delayed by that
            number of milliseconds. By default, this value is 0; it is
            normally not necessary to change it.
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-datadir"></a>
            <a class="indexterm" name="idm140091604052880"></a>

            <code class="literal">DataDir</code>
</p>
<div class="table">
<a name="datadir-mgmd-table"></a><p class="title"><b>Table 22.18 This table provides type and
value information for the DataDir management node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>path</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>.</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-mgm-definition.html#mysql-cluster-mgm-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This specifies the directory where output files from the
            management server will be placed. These files include
            cluster log files, process output files, and the daemon's
            process ID (PID) file. (For log files, this location can be
            overridden by setting the <code class="literal">FILE</code> parameter
            for <a class="link" href="mysql-cluster.html#ndbparam-mgmd-logdestination"><code class="literal">LogDestination</code></a>
            as discussed previously in this section.)
          </p><p>
            The default value for this parameter is the directory in
            which <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> is located.
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-portnumberstats"></a>
            <a class="indexterm" name="idm140091604024640"></a>

            <code class="literal">PortNumberStats</code>
</p>
<div class="table">
<a name="portnumberstats-mgmd-table"></a><p class="title"><b>Table 22.19 This table provides type and
value information for the PortNumberStats management node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 64K</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-mgm-definition.html#mysql-cluster-mgm-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter specifies the port number used to obtain
            statistical information from an NDB Cluster management
            server. It has no default value.
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-wan"></a>
            <a class="indexterm" name="idm140091604000208"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-mgmd-wan"><code class="literal">Wan</code></a>
</p>
<div class="table">
<a name="wan-mgmd-table"></a><p class="title"><b>Table 22.20 This table provides type and
value information for the wan management node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>boolean</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>true, false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-mgm-definition.html#mysql-cluster-mgm-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Use WAN TCP setting as default.
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-heartbeatthreadpriority"></a>
            <a class="indexterm" name="idm140091603975424"></a>

            <code class="literal">HeartbeatThreadPriority</code>
</p>
<div class="table">
<a name="heartbeatthreadpriority-mgmd-table"></a><p class="title"><b>Table 22.21 This table provides type and
value information for the HeartbeatThreadPriority management node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>string</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-mgm-definition.html#mysql-cluster-mgm-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Set the scheduling policy and priority of heartbeat threads
            for management and API nodes.
          </p><p>
            The syntax for setting this parameter is shown here:
          </p><pre data-lang="ini" class="programlisting">
HeartbeatThreadPriority = <em class="replaceable"><code>policy</code></em>[, <em class="replaceable"><code>priority</code></em>]

<em class="replaceable"><code>policy</code></em>:
  {FIFO | RR}
</pre><p>
            When setting this parameter, you must specify a policy. This
            is one of <code class="literal">FIFO</code> (first in, first out) or
            <code class="literal">RR</code> (round robin). The policy value is
            followed optionally by the priority (an integer).
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-totalsendbuffermemory"></a>
            <a class="indexterm" name="idm140091603946288"></a>

            <code class="literal">TotalSendBufferMemory</code>
</p>
<div class="table">
<a name="totalsendbuffermemory-mgmd-table"></a><p class="title"><b>Table 22.22 This table provides type and
value information for the TotalSendBufferMemory management node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>256K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-mgm-definition.html#mysql-cluster-mgm-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter is used to determine the total amount of
            memory to allocate on this node for shared send buffer
            memory among all configured transporters.
          </p><p>
            If this parameter is set, its minimum permitted value is
            256KB; 0 indicates that the parameter has not been set. For
            more detailed information, see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-config-send-buffers" title="22.3.3.14 Configuring NDB Cluster Send Buffer Parameters">Section 22.3.3.14, “Configuring NDB Cluster Send Buffer Parameters”</a>.
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-heartbeatintervalmgmdmgmd"></a>
            <a class="indexterm" name="idm140091603919936"></a>

            <code class="literal">HeartbeatIntervalMgmdMgmd</code>
</p>
<div class="table">
<a name="heartbeatintervalmgmdmgmd-mgmd-table"></a><p class="title"><b>Table 22.23 This table provides type and
value information for the HeartbeatIntervalMgmdMgmd management node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>milliseconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>1500</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>100 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-mgm-definition.html#mysql-cluster-mgm-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Specify the interval between heartbeat messages used to
            determine whether another management node is on contact with
            this one. The management node waits after 3 of these
            intervals to declare the connection dead; thus, the default
            setting of 1500 milliseconds causes the management node to
            wait for approximately 1600 ms before timing out.
</p></li></ul>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Note
</div>
<p>
          After making changes in a management node's
          configuration, it is necessary to perform a rolling restart of
          the cluster for the new configuration to take effect.
        </p><p>
          To add new management servers to a running NDB Cluster, it is
          also necessary to perform a rolling restart of all cluster
          nodes after modifying any existing
          <code class="filename">config.ini</code> files. For more information
          about issues arising when using multiple management nodes, see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-limitations-multiple-nodes" title="22.1.7.10 Limitations Relating to Multiple NDB Cluster Nodes">Section 22.1.7.10, “Limitations Relating to Multiple NDB Cluster Nodes”</a>.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbd-definition"></a>22.3.3.6 Defining NDB Cluster Data Nodes</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091603891248"></a><a class="indexterm" name="idm140091603889760"></a><p>
        The <code class="literal">[ndbd]</code> and <code class="literal">[ndbd
        default]</code> sections are used to configure the behavior
        of the cluster's data nodes.
      </p><p>
        <code class="literal">[ndbd]</code> and <code class="literal">[ndbd default]</code>
        are always used as the section names whether you are using
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> or <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> binaries
        for the data node processes.
      </p><p>
        There are many parameters which control buffer sizes, pool
        sizes, timeouts, and so forth. The only mandatory parameter is
        either one of <code class="literal">ExecuteOnComputer</code> or
        <code class="literal">HostName</code>; this must be defined in the local
        <code class="literal">[ndbd]</code> section.
      </p><p>
        The parameter
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-noofreplicas"><code class="literal">NoOfReplicas</code></a> should be
        defined in the <code class="literal">[ndbd default]</code> section, as it
        is common to all Cluster data nodes. It is not strictly
        necessary to set
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-noofreplicas"><code class="literal">NoOfReplicas</code></a>, but it is
        good practice to set it explicitly.
      </p><p>
        Most data node parameters are set in the <code class="literal">[ndbd
        default]</code> section. Only those parameters explicitly
        stated as being able to set local values are permitted to be
        changed in the <code class="literal">[ndbd]</code> section. Where present,
        <code class="literal">HostName</code>, <code class="literal">NodeId</code> and
        <code class="literal">ExecuteOnComputer</code> <span class="emphasis"><em>must</em></span>
        be defined in the local <code class="literal">[ndbd]</code> section, and
        not in any other section of <code class="filename">config.ini</code>. In
        other words, settings for these parameters are specific to one
        data node.
      </p><p>
        For those parameters affecting memory usage or buffer sizes, it
        is possible to use <code class="literal">K</code>, <code class="literal">M</code>,
        or <code class="literal">G</code> as a suffix to indicate units of 1024,
        1024×1024, or 1024×1024×1024. (For example,
        <code class="literal">100K</code> means 100 × 1024 = 102400.)
      </p><p>
        Parameter names and values are case-insensitive, unless used in
        a MySQL Server <code class="filename">my.cnf</code> or
        <code class="filename">my.ini</code> file, in which case they are case
        sensitive.
      </p><p>
        Information about configuration parameters specific to NDB
        Cluster Disk Data tables can be found later in this section (see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition-disk-data-parameters" title="Disk Data Configuration Parameters">Disk Data Configuration Parameters</a>).
      </p><p>
        All of these parameters also apply to <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>
        (the multithreaded version of <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>). Three
        additional data node configuration
        parameters—<a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-maxnoofexecutionthreads"><code class="literal">MaxNoOfExecutionThreads</code></a>,
        <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-threadconfig"><code class="literal">ThreadConfig</code></a>, and
        <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-nooffragmentlogparts"><code class="literal">NoOfFragmentLogParts</code></a>—apply
        to <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> only; these have no effect when
        used with <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>. For more information, see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition-ndbmtd-parameters" title="Multi-Threading Configuration Parameters (ndbmtd)">Multi-Threading Configuration Parameters (ndbmtd)</a>.
        See also <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)">Section 22.4.3, “<span class="command"><strong>ndbmtd</strong></span> — The NDB Cluster Data Node Daemon (Multi-Threaded)”</a>.
      </p><p><a name="mysql-cluster-identifying-data-nodes"></a><b>Identifying data nodes. </b>
          The <code class="literal">NodeId</code> or <code class="literal">Id</code> value
          (that is, the data node identifier) can be allocated on the
          command line when the node is started or in the configuration
          file.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-nodeid"></a>
            <a class="indexterm" name="idm140091603846592"></a>

            <code class="literal">NodeId</code>
</p>
<div class="table">
<a name="nodeid-ndbd-table"></a><p class="title"><b>Table 22.24 This table provides type and
value information for the NodeId data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1 - 48</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>IS</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            A unique node ID is used as the node's address for all
            cluster internal messages. For data nodes, this is an
            integer in the range 1 to 48 inclusive. Each node in the
            cluster must have a unique identifier.
          </p><p>
            <code class="literal">NodeId</code> is the only supported parameter
            name to use when identifying data nodes.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-executeoncomputer"></a>
            <a class="indexterm" name="idm140091603820944"></a>

            <code class="literal">ExecuteOnComputer</code>
</p>
<div class="table">
<a name="executeoncomputer-ndbd-table"></a><p class="title"><b>Table 22.25 This table provides type and
value information for the ExecuteOnComputer data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>name</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This refers to the <code class="literal">Id</code> set for one of the
            computers defined in a <code class="literal">[computer]</code>
            section.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              This parameter is deprecated, and is subject to removal in
              a future release. Use the
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-hostname"><code class="literal">HostName</code></a> parameter
              instead.
</p>
</div>
</li><li class="listitem"><p><a name="ndbparam-ndbd-hostname"></a>
            <a class="indexterm" name="idm140091603793088"></a>

            <code class="literal">HostName</code>
</p>
<div class="table">
<a name="hostname-ndbd-table"></a><p class="title"><b>Table 22.26 This table provides type and
value information for the HostName data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>name or IP address</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>localhost</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Specifying this parameter defines the hostname of the
            computer on which the data node is to reside. To specify a
            hostname other than <code class="literal">localhost</code>, either
            this parameter or <code class="literal">ExecuteOnComputer</code> is
            required.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-serverport"></a>
            <a class="indexterm" name="idm140091603767232"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-serverport"><code class="literal">ServerPort</code></a>
</p>
<div class="table">
<a name="serverport-ndbd-table"></a><p class="title"><b>Table 22.27 This table provides type and
value information for the ServerPort data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1 - 64K</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Each node in the cluster uses a port to connect to other
            nodes. By default, this port is allocated dynamically in
            such a way as to ensure that no two nodes on the same host
            computer receive the same port number, so it should normally
            not be necessary to specify a value for this parameter.
          </p><p>
            However, if you need to be able to open specific ports in a
            firewall to permit communication between data nodes and API
            nodes (including SQL nodes), you can set this parameter to
            the number of the desired port in an
            <code class="literal">[ndbd]</code> section or (if you need to do this
            for multiple data nodes) the <code class="literal">[ndbd
            default]</code> section of the
            <code class="filename">config.ini</code> file, and then open the port
            having that number for incoming connections from SQL nodes,
            API nodes, or both.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              Connections from data nodes to management nodes is done
              using the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> management port (the
              management server's
              <a class="link" href="mysql-cluster.html#ndbparam-mgmd-portnumber"><code class="literal">PortNumber</code></a>) so
              outgoing connections to that port from any data nodes
              should always be permitted.
</p>
</div>
</li><li class="listitem"><p><a name="ndbparam-ndbd-tcpbind_inaddr_any"></a>
            <code class="literal">TcpBind_INADDR_ANY</code>
          </p><p>
            Setting this parameter to <code class="literal">TRUE</code> or
            <code class="literal">1</code> binds <code class="literal">IP_ADDR_ANY</code> so
            that connections can be made from anywhere (for
            autogenerated connections). The default is
            <code class="literal">FALSE</code> (<code class="literal">0</code>).
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-nodegroup"></a>
            <a class="indexterm" name="idm140091603729552"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-nodegroup"><code class="literal">NodeGroup</code></a>
</p>
<div class="table">
<a name="nodegroup-ndbd-table"></a><p class="title"><b>Table 22.28 This table provides type and
value information for the NodeGroup data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td></td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 65536</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>IS</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter can be used to assign a data node to a
            specific node group. It is read only when the cluster is
            started for the first time, and cannot be used to reassign a
            data node to a different node group online. It is generally
            not desirable to use this parameter in the <code class="literal">[ndbd
            default]</code> section of the
            <code class="filename">config.ini</code> file, and care must be taken
            not to assign nodes to node groups in such a way that an
            invalid numbers of nodes are assigned to any node groups.
          </p><p>
            The <a class="link" href="mysql-cluster.html#ndbparam-ndbd-nodegroup"><code class="literal">NodeGroup</code></a>
            parameter is chiefly intended for use in adding a new node
            group to a running NDB Cluster without having to perform a
            rolling restart. For this purpose, you should set it to
            65536 (the maximum value). You are not required to set a
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-nodegroup"><code class="literal">NodeGroup</code></a> value for
            all cluster data nodes, only for those nodes which are to be
            started and added to the cluster as a new node group at a
            later time. For more information, see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-online-add-node-example" title="22.5.15.3 Adding NDB Cluster Data Nodes Online: Detailed Example">Section 22.5.15.3, “Adding NDB Cluster Data Nodes Online: Detailed Example”</a>.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-locationdomainid"></a>
            <a class="indexterm" name="idm140091603698704"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-locationdomainid"><code class="literal">LocationDomainId</code></a>
</p>
<div class="table">
<a name="locationdomainid-ndbd-table"></a><p class="title"><b>Table 22.29 This table provides type and
value information for the LocationDomainId data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 16</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Assigns a data node to a specific
            <a class="ulink" href="https://docs.us-phoenix-1.oraclecloud.com/Content/General/Concepts/regions.htm" target="_top">availability
            domain</a> (also known as an availability zone) within a
            cloud. By informing <code class="literal">NDB</code> which nodes are
            in which availability domains, performance can be improved
            in a cloud environment in the following ways:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                If requested data is not found on the same node, reads
                can be directed to another node in the same availability
                domain.
              </p></li><li class="listitem"><p>
                Communication between nodes in different availability
                domains are guaranteed to use <code class="literal">NDB</code>
                transporters' WAN support without any further
                manual intervention.
              </p></li><li class="listitem"><p>
                The transporter's group number can be based on
                which availability domain is used, such that also SQL
                and other API nodes communicate with local data nodes in
                the same availability domain whenever possible.
              </p></li><li class="listitem"><p>
                The arbitrator can be selected from an availability
                domain in which no data nodes are present, or, if no
                such availability domain can be found, from a third
                availability domain.
</p></li></ul>
</div>
<p>
            <code class="literal">LocationDomainId</code> takes an integer value
            between 0 and 16 inclusive, with 0 being the default; using
            0 is the same as leaving the parameter unset.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-noofreplicas"></a>
            <a class="indexterm" name="idm140091603665680"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-noofreplicas"><code class="literal">NoOfReplicas</code></a>
</p>
<div class="table">
<a name="noofreplicas-ndbd-table"></a><p class="title"><b>Table 22.30 This table provides type and
value information for the NoOfReplicas data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>2</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1 - 4</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>IS</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This global parameter can be set only in the <code class="literal">[ndbd
            default]</code> section, and defines the number of
            replicas for each table stored in the cluster. This
            parameter also specifies the size of node groups. A node
            group is a set of nodes all storing the same information.
          </p><p>
            Node groups are formed implicitly. The first node group is
            formed by the set of data nodes with the lowest node IDs,
            the next node group by the set of the next lowest node
            identities, and so on. By way of example, assume that we
            have 4 data nodes and that <code class="literal">NoOfReplicas</code>
            is set to 2. The four data nodes have node IDs 2, 3, 4 and
            5. Then the first node group is formed from nodes 2 and 3,
            and the second node group by nodes 4 and 5. It is important
            to configure the cluster in such a manner that nodes in the
            same node groups are not placed on the same computer because
            a single hardware failure would cause the entire cluster to
            fail.
          </p><p>
            If no node IDs are provided, the order of the data nodes
            will be the determining factor for the node group. Whether
            or not explicit assignments are made, they can be viewed in
            the output of the management client's
            <a class="link" href="mysql-cluster.html#ndbclient-show"><code class="literal">SHOW</code></a> command.
          </p><p>
            The default value for <code class="literal">NoOfReplicas</code> is 2.
            <span class="emphasis"><em>This is the recommended value for most production
            environments</em></span>.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              While the maximum <span class="emphasis"><em>possible</em></span> value for
              this parameter is 4, <span class="bold"><strong>setting
              <code class="literal">NoOfReplicas</code> to a value greater than 2
              is not supported in production</strong></span>.
</p>
</div>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Warning
</div>
<p>
              Setting <code class="literal">NoOfReplicas</code> to 1 means that
              there is only a single copy of all Cluster data; in this
              case, the loss of a single data node causes the cluster to
              fail because there are no additional copies of the data
              stored by that node.
</p>
</div>
<p>
            The value for this parameter must divide evenly into the
            number of data nodes in the cluster. For example, if there
            are two data nodes, then
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-noofreplicas"><code class="literal">NoOfReplicas</code></a> must be
            equal to either 1 or 2, since 2/3 and 2/4 both yield
            fractional values; if there are four data nodes, then
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-noofreplicas"><code class="literal">NoOfReplicas</code></a> must be
            equal to 1, 2, or 4.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-datadir"></a>
            <a class="indexterm" name="idm140091603626704"></a>

            <code class="literal">DataDir</code>
</p>
<div class="table">
<a name="datadir-ndbd-table"></a><p class="title"><b>Table 22.31 This table provides type and
value information for the DataDir data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>path</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>.</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>IN</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter specifies the directory where trace files,
            log files, pid files and error logs are placed.
          </p><p>
            The default is the data node process working directory.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-filesystempath"></a>
            <a class="indexterm" name="idm140091603601952"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempath"><code class="literal">FileSystemPath</code></a>
</p>
<div class="table">
<a name="filesystempath-ndbd-table"></a><p class="title"><b>Table 22.32 This table provides type and
value information for the FileSystemPath data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>path</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>DataDir</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>IN</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter specifies the directory where all files
            created for metadata, REDO logs, UNDO logs (for Disk Data
            tables), and data files are placed. The default is the
            directory specified by <code class="literal">DataDir</code>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              This directory must exist before the
              <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> process is initiated.
</p>
</div>
<p>
            The recommended directory hierarchy for NDB Cluster includes
            <code class="filename">/var/lib/mysql-cluster</code>, under which a
            directory for the node's file system is created. The name of
            this subdirectory contains the node ID. For example, if the
            node ID is 2, this subdirectory is named
            <code class="filename">ndb_2_fs</code>.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-backupdatadir"></a>
            <a class="indexterm" name="idm140091603571952"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupdatadir"><code class="literal">BackupDataDir</code></a>
</p>
<div class="table">
<a name="backupdatadir-ndbd-table"></a><p class="title"><b>Table 22.33 This table provides type and
value information for the BackupDataDir data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>path</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[see text]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>IN</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter specifies the directory in which backups are
            placed.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              The string '<code class="literal">/BACKUP</code>' is always appended
              to this value. For example, if you set the value of
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupdatadir"><code class="literal">BackupDataDir</code></a> to
              <code class="filename">/var/lib/cluster-data</code>, then all
              backups are stored under
              <code class="filename">/var/lib/cluster-data/BACKUP</code>. This
              also means that the <span class="emphasis"><em>effective</em></span> default
              backup location is the directory named
              <code class="filename">BACKUP</code> under the location specified
              by the
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempath"><code class="literal">FileSystemPath</code></a>
              parameter.
</p>
</div>
</li></ul>
</div>
<h5><a name="mysql-cluster-data-memory-index-memory-string-memory"></a>Data Memory, Index Memory, and String Memory</h5>
<p>
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a> and
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexmemory"><code class="literal">IndexMemory</code></a> are
        <code class="literal">[ndbd]</code> parameters specifying the size of
        memory segments used to store the actual records and their
        indexes. In setting values for these, it is important to
        understand how
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a> is used, as
        it usually needs to be updated to reflect actual usage by the
        cluster.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          <code class="literal">IndexMemory</code> is deprecated, and subject to
          removal in a future version of NDB Cluster. See the
          descriptions that follow for further information.
</p>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-datamemory"></a>
            <a class="indexterm" name="idm140091603531632"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a>
</p>
<div class="table">
<a name="datamemory-ndbd-table"></a><p class="title"><b>Table 22.34 This table provides type and
value information for the DataMemory data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>98M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1M - 1T</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter defines the amount of space (in bytes)
            available for storing database records. The entire amount
            specified by this value is allocated in memory, so it is
            extremely important that the machine has sufficient physical
            memory to accommodate it.
          </p><p>
            The memory allocated by
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a> is used
            to store both the actual records and indexes. There is a
            16-byte overhead on each record; an additional amount for
            each record is incurred because it is stored in a 32KB page
            with 128 byte page overhead (see below). There is also a
            small amount wasted per page due to the fact that each
            record is stored in only one page.
          </p><p>
            For variable-size table attributes, the data is stored on
            separate data pages, allocated from
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a>.
            Variable-length records use a fixed-size part with an extra
            overhead of 4 bytes to reference the variable-size part. The
            variable-size part has 2 bytes overhead plus 2 bytes per
            attribute.
          </p><p>
            The maximum record size is 14000 bytes.
          </p><p>
            Resources assigned to <code class="literal">DataMemory</code> are used
            for storing all data and indexes. (Any memory configured as
            <code class="literal">IndexMemory</code> is automatically added to
            that used by <code class="literal">DataMemory</code> to form a common
            resource pool.)
          </p><a class="indexterm" name="idm140091603499520"></a><a class="indexterm" name="idm140091603498016"></a><a class="indexterm" name="idm140091603496928"></a><a class="indexterm" name="idm140091603495856"></a><a class="indexterm" name="idm140091603494784"></a><p>
            Currently, NDB Cluster can use a maximum of 512 MB for hash
            indexes per partition, which means in some cases it is
            possible to get <span class="errortext">Table is full</span> errors
            in MySQL client applications even when <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm -e
            "ALL REPORT MEMORYUSAGE"</strong></span></a> shows significant free
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a>. This can
            also pose a problem with data node restarts on nodes that
            are heavily loaded with data.
          </p><p>
            You can control the number of partitions per local data
            manager for a given table by setting the
            <code class="literal">NDB_TABLE</code> option
            <code class="literal">PARTITION_BALANCE</code> to one of the values
            <code class="literal">FOR_RA_BY_LDM</code>,
            <code class="literal">FOR_RA_BY_LDM_X_2</code>,
            <code class="literal">FOR_RA_BY_LDM_X_3</code>, or
            <code class="literal">FOR_RA_BY_LDM_X_4</code>, for 1, 2, 3, or 4
            partitions per LDM, respectively, when creating the table
            (see
            <a class="xref" href="sql-syntax.html#create-table-ndb-table-comment-options" title="13.1.20.11 Setting NDB_TABLE Options">Section 13.1.20.11, “Setting NDB_TABLE Options”</a>).
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              In previous versions of NDB Cluster it was possible to
              create extra partitions for NDB Cluster tables and thus
              have more memory available for hash indexes by using the
              <code class="literal">MAX_ROWS</code> option for
              <a class="link" href="sql-syntax.html#create-table" title="13.1.20 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>. While still
              supported for backward compatibility, using
              <code class="literal">MAX_ROWS</code> for this purpose is
              deprecated; you should use
              <code class="literal">PARTITION_BALANCE</code> instead.
</p>
</div>
<p>
            You can also use the
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-minfreepct" title="MinFreePct"><code class="literal">MinFreePct</code></a>
            configuration parameter to help avoid problems with node
            restarts.
          </p><p>
            The memory space allocated by
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a> consists
            of 32KB pages, which are allocated to table fragments. Each
            table is normally partitioned into the same number of
            fragments as there are data nodes in the cluster. Thus, for
            each node, there are the same number of fragments as are set
            in <a class="link" href="mysql-cluster.html#ndbparam-ndbd-noofreplicas"><code class="literal">NoOfReplicas</code></a>.
          </p><p>
            Once a page has been allocated, it is currently not possible
            to return it to the pool of free pages, except by deleting
            the table. (This also means that
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a> pages,
            once allocated to a given table, cannot be used by other
            tables.) Performing a data node recovery also compresses the
            partition because all records are inserted into empty
            partitions from other live nodes.
          </p><p>
            <a class="indexterm" name="idm140091603472256"></a>

            The <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a>
            memory space also contains UNDO information: For each
            update, a copy of the unaltered record is allocated in the
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a>. There is
            also a reference to each copy in the ordered table indexes.
            Unique hash indexes are updated only when the unique index
            columns are updated, in which case a new entry in the index
            table is inserted and the old entry is deleted upon commit.
            For this reason, it is also necessary to allocate enough
            memory to handle the largest transactions performed by
            applications using the cluster. In any case, performing a
            few large transactions holds no advantage over using many
            smaller ones, for the following reasons:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                Large transactions are not any faster than smaller ones
              </p></li><li class="listitem"><p>
                Large transactions increase the number of operations
                that are lost and must be repeated in event of
                transaction failure
              </p></li><li class="listitem"><p>
                Large transactions use more memory
</p></li></ul>
</div>
<p>
            The default value for
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a> in NDB
            8.0 is 98MB. The minimum value is 1MB. There is no maximum
            size, but in reality the maximum size has to be adapted so
            that the process does not start swapping when the limit is
            reached. This limit is determined by the amount of physical
            RAM available on the machine and by the amount of memory
            that the operating system may commit to any one process.
            32-bit operating systems are generally limited to
            2−4GB per process; 64-bit operating systems can use
            more. For large databases, it may be preferable to use a
            64-bit operating system for this reason.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-indexmemory"></a>
            <a class="indexterm" name="idm140091603460096"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexmemory"><code class="literal">IndexMemory</code></a>
</p>
<div class="table">
<a name="indexmemory-ndbd-table"></a><p class="title"><b>Table 22.35 This table provides type and
value information for the IndexMemory data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1M - 1T</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The <code class="literal">IndexMemory</code> parameter is deprecated
            (and subject to future removal); any memory assigned to
            <code class="literal">IndexMemory</code> is allocated instead to the
            same pool as
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a>, which is
            solely responsible for all resources needed for storing data
            and indexes in memory. In NDB 8.0, the use of
            <code class="literal">IndexMemory</code> in the cluster configuration
            file triggers a warning from the management server.
          </p><p>
            You can estimate the size of a hash index using this
            formula:
          </p><pre data-lang="simple" class="programlisting">
  size  = ( (<em class="replaceable"><code>fragments</code></em> * 32K) + (<em class="replaceable"><code>rows</code></em> * 18) )
          * <em class="replaceable"><code>replicas</code></em>

          </pre><p>
            <em class="replaceable"><code>fragments</code></em> is the number of
            fragments, <em class="replaceable"><code>replicas</code></em> is the number
            of replicas (normally 2), and
            <em class="replaceable"><code>rows</code></em> is the number of rows. If a
            table has one million rows, 8 fragments, and 2 replicas, the
            expected index memory usage is calculated as shown here:
          </p><pre data-lang="simple" class="programlisting">          
  ((8 * 32K) + (1000000 * 18)) * 2 = ((8 * 32768) + (1000000 * 18)) * 2
  = (262144 + 18000000) * 2
  = 18262144 * 2 = 36524288 bytes = ~35MB
</pre><p>
            Index statistics for ordered indexes (when these are
            enabled) are stored in the
            <code class="literal">mysql.ndb_index_stat_sample</code> table. Since
            this table has a hash index, this adds to index memory
            usage. An upper bound to the number of rows for a given
            ordered index can be calculated as follows:
          </p><pre data-lang="simple" class="programlisting">
  sample_size= key_size + ((key_attributes + 1) * 4)

  sample_rows = <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstatsavesize"><code class="literal">IndexStatSaveSize</code></a>
                * ((0.01 * <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstatsavescale"><code class="literal">IndexStatSaveScale</code></a> * log<sub>2</sub>(rows * sample_size)) + 1)
                / sample_size
</pre><p>
            In the preceding formula,
            <em class="replaceable"><code>key_size</code></em> is the size of the
            ordered index key in bytes,
            <em class="replaceable"><code>key_attributes</code></em> is the number ot
            attributes in the ordered index key, and
            <em class="replaceable"><code>rows</code></em> is the number of rows in the
            base table.
          </p><p>
            Assume that table <code class="literal">t1</code> has 1 million rows
            and an ordered index named <code class="literal">ix1</code> on two
            four-byte integers. Assume in addition that
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstatsavesize"><code class="literal">IndexStatSaveSize</code></a>
            and
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstatsavescale"><code class="literal">IndexStatSaveScale</code></a>
            are set to their default values (32K and 100, respectively).
            Using the previous 2 formulas, we can calculate as follows:
          </p><pre data-lang="simple" class="programlisting">
  sample_size = 8  + ((1 + 2) * 4) = 20 bytes

  sample_rows = 32K
                * ((0.01 * 100 * log<sub>2</sub>(1000000*20)) + 1)
                / 20
                = 32768 * ( (1 * ~16.811) +1) / 20
                = 32768 * ~17.811 / 20
                = ~29182 rows
</pre><p>
            The expected index memory usage is thus 2 * 18 * 29182 =
            ~1050550 bytes.
          </p><p>
            In NDB 8.0, the minimum and default vaue for this parameter
            is 0 (zero).
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-stringmemory"></a>
            <a class="indexterm" name="idm140091603410976"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-stringmemory"><code class="literal">StringMemory</code></a>
</p>
<div class="table">
<a name="stringmemory-ndbd-table"></a><p class="title"><b>Table 22.36 This table provides type and
value information for the StringMemory data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>% or bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>25</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter determines how much memory is allocated for
            strings such as table names, and is specified in an
            <code class="literal">[ndbd]</code> or <code class="literal">[ndbd
            default]</code> section of the
            <code class="filename">config.ini</code> file. A value between
            <code class="literal">0</code> and <code class="literal">100</code> inclusive is
            interpreted as a percent of the maximum default value, which
            is calculated based on a number of factors including the
            number of tables, maximum table name size, maximum size of
            <code class="filename">.FRM</code> files,
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooftriggers"><code class="literal">MaxNoOfTriggers</code></a>,
            maximum column name size, and maximum default column value.
          </p><p>
            A value greater than <code class="literal">100</code> is interpreted
            as a number of bytes.
          </p><p>
            The default value is 25—that is, 25 percent of the
            default maximum.
          </p><p>
            Under most circumstances, the default value should be
            sufficient, but when you have a great many
            <code class="literal">NDB</code> tables (1000 or more), it is possible
            to get Error 773 <span class="errortext">Out of string memory, please
            modify StringMemory config parameter: Permanent error:
            Schema error</span>, in which case you should increase
            this value. <code class="literal">25</code> (25 percent) is not
            excessive, and should prevent this error from recurring in
            all but the most extreme conditions.
</p></li></ul>
</div>
<p>
        The following example illustrates how memory is used for a
        table. Consider this table definition:
      </p><pre data-lang="sql" class="programlisting">
CREATE TABLE example (
  a INT NOT NULL,
  b INT NOT NULL,
  c INT NOT NULL,
  PRIMARY KEY(a),
  UNIQUE(b)
) ENGINE=NDBCLUSTER;
</pre><p>
        For each record, there are 12 bytes of data plus 12 bytes
        overhead. Having no nullable columns saves 4 bytes of overhead.
        In addition, we have two ordered indexes on columns
        <code class="literal">a</code> and <code class="literal">b</code> consuming roughly
        10 bytes each per record. There is a primary key hash index on
        the base table using roughly 29 bytes per record. The unique
        constraint is implemented by a separate table with
        <code class="literal">b</code> as primary key and <code class="literal">a</code> as
        a column. This other table consumes an additional 29 bytes of
        index memory per record in the <code class="literal">example</code> table
        as well 8 bytes of record data plus 12 bytes of overhead.
      </p><p>
        Thus, for one million records, we need 58MB for index memory to
        handle the hash indexes for the primary key and the unique
        constraint. We also need 64MB for the records of the base table
        and the unique index table, plus the two ordered index tables.
      </p><p>
        You can see that hash indexes takes up a fair amount of memory
        space; however, they provide very fast access to the data in
        return. They are also used in NDB Cluster to handle uniqueness
        constraints.
      </p><p>
        Currently, the only partitioning algorithm is hashing and
        ordered indexes are local to each node. Thus, ordered indexes
        cannot be used to handle uniqueness constraints in the general
        case.
      </p><p>
        An important point for both
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexmemory"><code class="literal">IndexMemory</code></a> and
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a> is that the
        total database size is the sum of all data memory and all index
        memory for each node group. Each node group is used to store
        replicated information, so if there are four nodes with two
        replicas, there will be two node groups. Thus, the total data
        memory available is 2 ×
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a> for each data
        node.
      </p><p>
        It is highly recommended that
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a> and
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexmemory"><code class="literal">IndexMemory</code></a> be set to
        the same values for all nodes. Data distribution is even over
        all nodes in the cluster, so the maximum amount of space
        available for any node can be no greater than that of the
        smallest node in the cluster.
      </p><p>
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a> can be
        changed, but decreasing it can be risky; doing so can easily
        lead to a node or even an entire NDB Cluster that is unable to
        restart due to there being insufficient memory space. Increasing
        these values should be acceptable, but it is recommended that
        such upgrades are performed in the same manner as a software
        upgrade, beginning with an update of the configuration file, and
        then restarting the management server followed by restarting
        each data node in turn.
      </p><p><a name="ndbparam-ndbd-minfreepct"></a><b>MinFreePct. </b>
          <a class="indexterm" name="idm140091603356400"></a>

          A proportion (5% by default) of data node resources including
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a> is kept in
          reserve to insure that the data node does not exhaust its
          memory when performing a restart. This can be adjusted using
          the <a class="link" href="mysql-cluster.html#ndbparam-ndbd-minfreepct" title="MinFreePct"><code class="literal">MinFreePct</code></a> data
          node configuration parameter (default 5).
</p>
<div class="table">
<a name="minfreepct-ndbd-table"></a><p class="title"><b>Table 22.37 This table provides type and
value information for the MinFreePct data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
            <th scope="col">Property</th>
            <th scope="col">Value</th>
          </tr></thead><tbody><tr>
            <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
            <td>NDB 8.0.13</td>
          </tr><tr>
            <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
            <td>unsigned</td>
          </tr><tr>
            <td scope="row"><span class="bold"><strong>Default</strong></span></td>
            <td>5</td>
          </tr><tr>
            <td scope="row"><span class="bold"><strong>Range</strong></span></td>
            <td>0 - 100</td>
          </tr><tr>
            <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
              Type</a></strong></span></td>
            <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        Updates do not increase the amount of index memory used. Inserts
        take effect immediately; however, rows are not actually deleted
        until the transaction is committed.
      </p><p><a name="mysql-cluster-transaction-parameters"></a><b>Transaction parameters. </b>
          The next few <code class="literal">[ndbd]</code> parameters that we
          discuss are important because they affect the number of
          parallel transactions and the sizes of transactions that can
          be handled by the system.
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrenttransactions"><code class="literal">MaxNoOfConcurrentTransactions</code></a>
          sets the number of parallel transactions possible in a node.
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentoperations"><code class="literal">MaxNoOfConcurrentOperations</code></a>
          sets the number of records that can be in update phase or
          locked simultaneously.
        </p><p>
        Both of these parameters (especially
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentoperations"><code class="literal">MaxNoOfConcurrentOperations</code></a>)
        are likely targets for users setting specific values and not
        using the default value. The default value is set for systems
        using small transactions, to ensure that these do not use
        excessive memory.
      </p><p>
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdmloperationspertransaction"><code class="literal">MaxDMLOperationsPerTransaction</code></a>
        sets the maximum number of DML operations that can be performed
        in a given transaction.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-maxnoofconcurrenttransactions"></a>
            <a class="indexterm" name="idm140091603320368"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrenttransactions"><code class="literal">MaxNoOfConcurrentTransactions</code></a>
</p>
<div class="table">
<a name="maxnoofconcurrenttransactions-ndbd-table"></a><p class="title"><b>Table 22.38 This table provides type and
value information for the MaxNoOfConcurrentTransactions data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>4096</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>32 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Each cluster data node requires a transaction record for
            each active transaction in the cluster. The task of
            coordinating transactions is distributed among all of the
            data nodes. The total number of transaction records in the
            cluster is the number of transactions in any given node
            times the number of nodes in the cluster.
          </p><p>
            Transaction records are allocated to individual MySQL
            servers. Each connection to a MySQL server requires at least
            one transaction record, plus an additional transaction
            object per table accessed by that connection. This means
            that a reasonable minimum for the total number of
            transactions in the cluster can be expressed as
          </p><pre data-lang="simple" class="programlisting">
TotalNoOfConcurrentTransactions =
    (maximum number of tables accessed in any single transaction + 1)
    * number of SQL nodes
</pre><p>
            Suppose that there are 10 SQL nodes using the cluster. A
            single join involving 10 tables requires 11 transaction
            records; if there are 10 such joins in a transaction, then
            10 * 11 = 110 transaction records are required for this
            transaction, per MySQL server, or 110 * 10 = 1100
            transaction records total. Each data node can be expected to
            handle TotalNoOfConcurrentTransactions / number of data
            nodes. For an NDB Cluster having 4 data nodes, this would
            mean setting
            <code class="literal">MaxNoOfConcurrentTransactions</code> on each
            data node to 1100 / 4 = 275. In addition, you should provide
            for failure recovery by ensuring that a single node group
            can accommodate all concurrent transactions; in other words,
            that each data node's MaxNoOfConcurrentTransactions is
            sufficient to cover a number of transactions equal to
            TotalNoOfConcurrentTransactions / number of node groups. If
            this cluster has a single node group, then
            <code class="literal">MaxNoOfConcurrentTransactions</code> should be
            set to 1100 (the same as the total number of concurrent
            transactions for the entire cluster).
          </p><p>
            In addition, each transaction involves at least one
            operation; for this reason, the value set for
            <code class="literal">MaxNoOfConcurrentTransactions</code> should
            always be no more than the value of
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentoperations"><code class="literal">MaxNoOfConcurrentOperations</code></a>.
          </p><p>
            This parameter must be set to the same value for all cluster
            data nodes. This is due to the fact that, when a data node
            fails, the oldest surviving node re-creates the transaction
            state of all transactions that were ongoing in the failed
            node.
          </p><p>
            It is possible to change this value using a rolling restart,
            but the amount of traffic on the cluster must be such that
            no more transactions occur than the lower of the old and new
            levels while this is taking place.
          </p><p>
            The default value is 4096.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnoofconcurrentoperations"></a>
            <a class="indexterm" name="idm140091603284960"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentoperations"><code class="literal">MaxNoOfConcurrentOperations</code></a>
</p>
<div class="table">
<a name="maxnoofconcurrentoperations-ndbd-table"></a><p class="title"><b>Table 22.39 This table provides type and
value information for the MaxNoOfConcurrentOperations data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>32K</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>32 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            It is a good idea to adjust the value of this parameter
            according to the size and number of transactions. When
            performing transactions which involve only a few operations
            and records, the default value for this parameter is usually
            sufficient. Performing large transactions involving many
            records usually requires that you increase its value.
          </p><p>
            Records are kept for each transaction updating cluster data,
            both in the transaction coordinator and in the nodes where
            the actual updates are performed. These records contain
            state information needed to find UNDO records for rollback,
            lock queues, and other purposes.
          </p><p>
            This parameter should be set at a minimum to the number of
            records to be updated simultaneously in transactions,
            divided by the number of cluster data nodes. For example, in
            a cluster which has four data nodes and which is expected to
            handle one million concurrent updates using transactions,
            you should set this value to 1000000 / 4 = 250000. To help
            provide resiliency against failures, it is suggested that
            you set this parameter to a value that is high enough to
            permit an individual data node to handle the load for its
            node group. In other words, you should set the value equal
            to <code class="literal">total number of concurrent operations / number
            of node groups</code>. (In the case where there is a
            single node group, this is the same as the total number of
            concurrent operations for the entire cluster.)
          </p><p>
            Because each transaction always involves at least one
            operation, the value of
            <code class="literal">MaxNoOfConcurrentOperations</code> should always
            be greater than or equal to the value of
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrenttransactions"><code class="literal">MaxNoOfConcurrentTransactions</code></a>.
          </p><p>
            Read queries which set locks also cause operation records to
            be created. Some extra space is allocated within individual
            nodes to accommodate cases where the distribution is not
            perfect over the nodes.
          </p><p>
            When queries make use of the unique hash index, there are
            actually two operation records used per record in the
            transaction. The first record represents the read in the
            index table and the second handles the operation on the base
            table.
          </p><p>
            The default value is 32768.
          </p><p>
            This parameter actually handles two values that can be
            configured separately. The first of these specifies how many
            operation records are to be placed with the transaction
            coordinator. The second part specifies how many operation
            records are to be local to the database.
          </p><p>
            A very large transaction performed on an eight-node cluster
            requires as many operation records in the transaction
            coordinator as there are reads, updates, and deletes
            involved in the transaction. However, the operation records
            of the are spread over all eight nodes. Thus, if it is
            necessary to configure the system for one very large
            transaction, it is a good idea to configure the two parts
            separately.
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentoperations"><code class="literal">MaxNoOfConcurrentOperations</code></a>
            will always be used to calculate the number of operation
            records in the transaction coordinator portion of the node.
          </p><p>
            It is also important to have an idea of the memory
            requirements for operation records. These consume about 1KB
            per record.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnooflocaloperations"></a>
            <a class="indexterm" name="idm140091603248208"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooflocaloperations"><code class="literal">MaxNoOfLocalOperations</code></a>
</p>
<div class="table">
<a name="maxnooflocaloperations-ndbd-table"></a><p class="title"><b>Table 22.40 This table provides type and
value information for the MaxNoOfLocalOperations data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>UNDEFINED</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>32 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            By default, this parameter is calculated as 1.1 ×
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentoperations"><code class="literal">MaxNoOfConcurrentOperations</code></a>.
            This fits systems with many simultaneous transactions, none
            of them being very large. If there is a need to handle one
            very large transaction at a time and there are many nodes,
            it is a good idea to override the default value by
            explicitly specifying this parameter.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxdmloperationspertransaction"></a>
            <a class="indexterm" name="idm140091603221536"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdmloperationspertransaction"><code class="literal">MaxDMLOperationsPerTransaction</code></a>
</p>
<div class="table">
<a name="maxdmloperationspertransaction-ndbd-table"></a><p class="title"><b>Table 22.41 This table provides type and
value information for the MaxDMLOperationsPerTransaction data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>operations (DML)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>4294967295</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>32 - 4294967295</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter limits the size of a transaction. The
            transaction is aborted if it requires more than this many
            DML operations. The minimum number of operations per
            transaction is 32; however, you can set
            <code class="literal">MaxDMLOperationsPerTransaction</code> to 0 to
            disable any limitation on the number of DML operations per
            transaction. The maximum (and default) is 4294967295.
          </p><p>
            The value of this parameter cannot exceed that set for
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentoperations"><code class="literal">MaxNoOfConcurrentOperations</code></a>.
</p></li></ul>
</div>
<p><a name="mysql-cluster-transaction-temporary-storage"></a><b>Transaction temporary storage. </b>
          The next set of <code class="literal">[ndbd]</code> parameters is used
          to determine temporary storage when executing a statement that
          is part of a Cluster transaction. All records are released
          when the statement is completed and the cluster is waiting for
          the commit or rollback.
        </p><p>
        The default values for these parameters are adequate for most
        situations. However, users with a need to support transactions
        involving large numbers of rows or operations may need to
        increase these values to enable better parallelism in the
        system, whereas users whose applications require relatively
        small transactions can decrease the values to save memory.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-maxnoofconcurrentindexoperations"></a>
            <a class="indexterm" name="idm140091603189664"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentindexoperations"><code class="literal">MaxNoOfConcurrentIndexOperations</code></a>
</p>
<div class="table">
<a name="maxnoofconcurrentindexoperations-ndbd-table"></a><p class="title"><b>Table 22.42 This table provides type and
value information for the MaxNoOfConcurrentIndexOperations data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>8K</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            For queries using a unique hash index, another temporary set
            of operation records is used during a query's execution
            phase. This parameter sets the size of that pool of records.
            Thus, this record is allocated only while executing a part
            of a query. As soon as this part has been executed, the
            record is released. The state needed to handle aborts and
            commits is handled by the normal operation records, where
            the pool size is set by the parameter
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentoperations"><code class="literal">MaxNoOfConcurrentOperations</code></a>.
          </p><p>
            The default value of this parameter is 8192. Only in rare
            cases of extremely high parallelism using unique hash
            indexes should it be necessary to increase this value. Using
            a smaller value is possible and can save memory if the DBA
            is certain that a high degree of parallelism is not required
            for the cluster.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnooffiredtriggers"></a>
            <a class="indexterm" name="idm140091603162112"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooffiredtriggers"><code class="literal">MaxNoOfFiredTriggers</code></a>
</p>
<div class="table">
<a name="maxnooffiredtriggers-ndbd-table"></a><p class="title"><b>Table 22.43 This table provides type and
value information for the MaxNoOfFiredTriggers data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>4000</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The default value of
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooffiredtriggers"><code class="literal">MaxNoOfFiredTriggers</code></a>
            is 4000, which is sufficient for most situations. In some
            cases it can even be decreased if the DBA feels certain the
            need for parallelism in the cluster is not high.
          </p><p>
            A record is created when an operation is performed that
            affects a unique hash index. Inserting or deleting a record
            in a table with unique hash indexes or updating a column
            that is part of a unique hash index fires an insert or a
            delete in the index table. The resulting record is used to
            represent this index table operation while waiting for the
            original operation that fired it to complete. This operation
            is short-lived but can still require a large number of
            records in its pool for situations with many parallel write
            operations on a base table containing a set of unique hash
            indexes.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-transactionbuffermemory"></a>
            <a class="indexterm" name="idm140091603134640"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-transactionbuffermemory"><code class="literal">TransactionBufferMemory</code></a>
</p>
<div class="table">
<a name="transactionbuffermemory-ndbd-table"></a><p class="title"><b>Table 22.44 This table provides type and
value information for the TransactionBufferMemory data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>1M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The memory affected by this parameter is used for tracking
            operations fired when updating index tables and reading
            unique indexes. This memory is used to store the key and
            column information for these operations. It is only very
            rarely that the value for this parameter needs to be altered
            from the default.
          </p><p>
            The default value for
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-transactionbuffermemory"><code class="literal">TransactionBufferMemory</code></a>
            is 1MB.
          </p><p>
            Normal read and write operations use a similar buffer, whose
            usage is even more short-lived. The compile-time parameter
            <code class="literal">ZATTRBUF_FILESIZE</code> (found in
            <code class="filename">ndb/src/kernel/blocks/Dbtc/Dbtc.hpp</code>)
            set to 4000 × 128 bytes (500KB). A similar buffer for
            key information, <code class="literal">ZDATABUF_FILESIZE</code> (also
            in <code class="filename">Dbtc.hpp</code>) contains 4000 × 16 =
            62.5KB of buffer space. <code class="literal">Dbtc</code> is the
            module that handles transaction coordination.
</p></li></ul>
</div>
<p><a name="mysql-cluster-transaction-resource-allocation"></a><b>Transaction resource allocation parameters. </b>
          The parameters in the following list are used to allocate
          transaction resources in the transaction coordinator
          (<code class="literal">DBTC</code>; see
          <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-kernel-blocks-dbtc.html" target="_top">The DBTC Block</a>). Leaving
          any one of these set to the default (0) dedicates transaction
          memory for 25% of estimated total data node usage for the
          corresponding resource. The actual maximum possible values for
          these parameters are typically limited by the amount of memory
          available to the data node; setting them has no impact on the
          total amount of memory allocated to the data node. In
          addition, you should keep in mind that they control numbers of
          reserved internal records for the data node independent of any
          settings for
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdmloperationspertransaction"><code class="literal">MaxDMLOperationsPerTransaction</code></a>,
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentindexoperations"><code class="literal">MaxNoOfConcurrentIndexOperations</code></a>,
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentoperations"><code class="literal">MaxNoOfConcurrentOperations</code></a>,
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentscans"><code class="literal">MaxNoOfConcurrentScans</code></a>,
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrenttransactions"><code class="literal">MaxNoOfConcurrentTransactions</code></a>,
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooffiredtriggers"><code class="literal">MaxNoOfFiredTriggers</code></a>,
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooflocalscans"><code class="literal">MaxNoOfLocalScans</code></a>, or
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-transactionbuffermemory"><code class="literal">TransactionBufferMemory</code></a>
          (see <a class="xref" href="mysql-cluster.html#mysql-cluster-transaction-parameters" title="Transaction parameters">Transaction parameters</a>
          and
          <a class="xref" href="mysql-cluster.html#mysql-cluster-transaction-temporary-storage" title="Transaction temporary storage">Transaction temporary storage</a>).
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-reservedconcurrentindexoperations"></a>
            <a class="indexterm" name="idm140091603086288"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedconcurrentindexoperations"><code class="literal">ReservedConcurrentIndexOperations</code></a>
</p>
<div class="table">
<a name="reservedconcurrentindexoperations-ndbd-table"></a><p class="title"><b>Table 22.45 This table provides type and
value information for the ReservedConcurrentIndexOperations data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.16</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Number of simultaneous index operations having dedicated
            resources on one data node.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-reservedconcurrentoperations"></a>
            <a class="indexterm" name="idm140091603061216"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedconcurrentoperations"><code class="literal">ReservedConcurrentOperations</code></a>
</p>
<div class="table">
<a name="reservedconcurrentoperations-ndbd-table"></a><p class="title"><b>Table 22.46 This table provides type and
value information for the ReservedConcurrentOperations data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.16</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Number of simultaneous operations having dedicated resources
            in transaction coordinators on one data node.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-reservedconcurrentscans"></a>
            <a class="indexterm" name="idm140091603036224"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedconcurrentscans"><code class="literal">ReservedConcurrentScans</code></a>
</p>
<div class="table">
<a name="reservedconcurrentscans-ndbd-table"></a><p class="title"><b>Table 22.47 This table provides type and
value information for the ReservedConcurrentScans data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.16</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Number of simultaneous scans having dedicated resources on
            one data node.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-reservedconcurrenttransactions"></a>
            <a class="indexterm" name="idm140091603011264"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedconcurrenttransactions"><code class="literal">ReservedConcurrentTransactions</code></a>
</p>
<div class="table">
<a name="reservedconcurrenttransactions-ndbd-table"></a><p class="title"><b>Table 22.48 This table provides type and
value information for the ReservedConcurrentTransactions data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.16</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Number of simultaneous transactions having dedicated
            resources on one data node.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-reservedfiredtriggers"></a>
            <a class="indexterm" name="idm140091602986272"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedfiredtriggers"><code class="literal">ReservedFiredTriggers</code></a>
</p>
<div class="table">
<a name="reservedfiredtriggers-ndbd-table"></a><p class="title"><b>Table 22.49 This table provides type and
value information for the ReservedFiredTriggers data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.16</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Number of triggers that have dedicated resources on one
            ndbd(DB) node.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-reservedlocalscans"></a>
            <a class="indexterm" name="idm140091602961360"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedlocalscans"><code class="literal">ReservedLocalScans</code></a>
</p>
<div class="table">
<a name="reservedlocalscans-ndbd-table"></a><p class="title"><b>Table 22.50 This table provides type and
value information for the ReservedLocalScans data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.16</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Number of simultaneous fragment scans having dedicated
            resources on one data node.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-reservedtransactionbuffermemory"></a>
            <a class="indexterm" name="idm140091602936400"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedtransactionbuffermemory"><code class="literal">ReservedTransactionBufferMemory</code></a>
</p>
<div class="table">
<a name="reservedtransactionbuffermemory-ndbd-table"></a><p class="title"><b>Table 22.51 This table provides type and
value information for the ReservedTransactionBufferMemory data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.16</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Dynamic buffer space (in bytes) for key and attribute data
            allocated to each data node.
</p></li></ul>
</div>
<p><a name="mysql-cluster-scans-and-buffering"></a><b>Scans and buffering. </b>
          There are additional <code class="literal">[ndbd]</code> parameters in
          the <code class="literal">Dblqh</code> module (in
          <code class="filename">ndb/src/kernel/blocks/Dblqh/Dblqh.hpp</code>)
          that affect reads and updates. These include
          <code class="literal">ZATTRINBUF_FILESIZE</code>, set by default to
          10000 × 128 bytes (1250KB) and
          <code class="literal">ZDATABUF_FILE_SIZE</code>, set by default to
          10000*16 bytes (roughly 156KB) of buffer space. To date, there
          have been neither any reports from users nor any results from
          our own extensive tests suggesting that either of these
          compile-time limits should be increased.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-batchsizeperlocalscan"></a>
            <a class="indexterm" name="idm140091602905248"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-batchsizeperlocalscan"><code class="literal">BatchSizePerLocalScan</code></a>
</p>
<div class="table">
<a name="batchsizeperlocalscan-ndbd-table"></a><p class="title"><b>Table 22.52 This table provides type and
value information for the BatchSizePerLocalScan data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>256</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1 - 992</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter is used to calculate the number of lock
            records used to handle concurrent scan operations.
          </p><p>
            <code class="literal">BatchSizePerLocalScan</code> has a strong
            connection to the
            <a class="link" href="mysql-cluster.html#ndbparam-api-batchsize"><code class="literal">BatchSize</code></a> defined in
            the SQL nodes.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-longmessagebuffer"></a>
            <a class="indexterm" name="idm140091602877952"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-longmessagebuffer"><code class="literal">LongMessageBuffer</code></a>
</p>
<div class="table">
<a name="longmessagebuffer-ndbd-table"></a><p class="title"><b>Table 22.53 This table provides type and
value information for the LongMessageBuffer data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>64M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>512K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This is an internal buffer used for passing messages within
            individual nodes and between nodes. The default is 64MB.
          </p><p>
            This parameter seldom needs to be changed from the default.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxfkbuildbatchsize"></a>
            <a class="indexterm" name="idm140091602852464"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxfkbuildbatchsize"><code class="literal">MaxFKBuildBatchSize</code></a>
</p>
<div class="table">
<a name="maxfkbuildbatchsize-ndbd-table"></a><p class="title"><b>Table 22.54 This table provides type and
value information for the MaxFKBuildBatchSize data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>64</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>16 - 512</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Maximum scan batch size used for building foreign keys.
            Increasing the value set for this parameter may speed up
            building of foreign key builds at the expense of greater
            impact to ongoing traffic.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnoofconcurrentscans"></a>
            <a class="indexterm" name="idm140091602827424"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentscans"><code class="literal">MaxNoOfConcurrentScans</code></a>
</p>
<div class="table">
<a name="maxnoofconcurrentscans-ndbd-table"></a><p class="title"><b>Table 22.55 This table provides type and
value information for the MaxNoOfConcurrentScans data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>256</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>2 - 500</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter is used to control the number of parallel
            scans that can be performed in the cluster. Each transaction
            coordinator can handle the number of parallel scans defined
            for this parameter. Each scan query is performed by scanning
            all partitions in parallel. Each partition scan uses a scan
            record in the node where the partition is located, the
            number of records being the value of this parameter times
            the number of nodes. The cluster should be able to sustain
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentscans"><code class="literal">MaxNoOfConcurrentScans</code></a>
            scans concurrently from all nodes in the cluster.
          </p><p>
            Scans are actually performed in two cases. The first of
            these cases occurs when no hash or ordered indexes exists to
            handle the query, in which case the query is executed by
            performing a full table scan. The second case is encountered
            when there is no hash index to support the query but there
            is an ordered index. Using the ordered index means executing
            a parallel range scan. The order is kept on the local
            partitions only, so it is necessary to perform the index
            scan on all partitions.
          </p><p>
            The default value of
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentscans"><code class="literal">MaxNoOfConcurrentScans</code></a>
            is 256. The maximum value is 500.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnooflocalscans"></a>
            <a class="indexterm" name="idm140091602797968"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooflocalscans"><code class="literal">MaxNoOfLocalScans</code></a>
</p>
<div class="table">
<a name="maxnooflocalscans-ndbd-table"></a><p class="title"><b>Table 22.56 This table provides type and
value information for the MaxNoOfLocalScans data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[see text]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>32 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Specifies the number of local scan records if many scans are
            not fully parallelized. When the number of local scan
            records is not provided, it is calculated as shown here:
          </p><pre data-lang="simple" class="programlisting">
4 * <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentscans"><code class="literal">MaxNoOfConcurrentScans</code></a> * [# data nodes] + 2
</pre><p>
            The minimum value is 32.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxparallelcopyinstances"></a>
            <a class="indexterm" name="idm140091602770240"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxparallelcopyinstances"><code class="literal">MaxParallelCopyInstances</code></a>
</p>
<div class="table">
<a name="maxparallelcopyinstances-ndbd-table"></a><p class="title"><b>Table 22.57 This table provides type and
value information for the MaxParallelCopyInstances data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 64</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter sets the parallelization used in the copy
            phase of a node restart or system restart, when a node that
            is currently just starting is synchronised with a node that
            already has current data by copying over any changed records
            from the node that is up to date. Because full parallelism
            in such cases can lead to overload situations,
            <code class="literal">MaxParallelCopyInstances</code> provides a means
            to decrease it. This parameter's default value 0. This
            value means that the effective parallelism is equal to the
            number of LDM instances in the node just starting as well as
            the node updating it.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxparallelscansperfragment"></a>
            <a class="indexterm" name="idm140091602743952"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxparallelscansperfragment"><code class="literal">MaxParallelScansPerFragment</code></a>
</p>
<div class="table">
<a name="maxparallelscansperfragment-ndbd-table"></a><p class="title"><b>Table 22.58 This table provides type and
value information for the MaxParallelScansPerFragment data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>256</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            It is possible to configure the maximum number of parallel
            scans (<code class="literal">TUP</code> scans and
            <code class="literal">TUX</code> scans) allowed before they begin
            queuing for serial handling. You can increase this to take
            advantage of any unused CPU when performing large number of
            scans in parallel and improve their performance.
          </p><p>
            The default value for this parameter is 256.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxreorgbuildbatchsize"></a>
            <a class="indexterm" name="idm140091602716832"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxreorgbuildbatchsize"><code class="literal">MaxReorgBuildBatchSize</code></a>
</p>
<div class="table">
<a name="maxreorgbuildbatchsize-ndbd-table"></a><p class="title"><b>Table 22.59 This table provides type and
value information for the MaxReorgBuildBatchSize data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>64</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>16 - 512</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Maximum scan batch size used for reorganization of table
            partitions. Increasing the value set for this parameter may
            speed up reorganization at the expense of greater impact to
            ongoing traffic.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxuibuildbatchsize"></a>
            <a class="indexterm" name="idm140091602691792"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxuibuildbatchsize"><code class="literal">MaxUIBuildBatchSize</code></a>
</p>
<div class="table">
<a name="maxuibuildbatchsize-ndbd-table"></a><p class="title"><b>Table 22.60 This table provides type and
value information for the MaxUIBuildBatchSize data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>64</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>16 - 512</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Maximum scan batch size used for building unique keys.
            Increasing the value set for this parameter may speed up
            such builds at the expense of greater impact to ongoing
            traffic.
</p></li></ul>
</div>
<h5><a name="mysql-cluster-memory-allocation"></a>Memory Allocation</h5>
<p><a name="ndbparam-ndbd-maxallocate"></a>
        <a class="indexterm" name="idm140091602664960"></a>

        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxallocate"><code class="literal">MaxAllocate</code></a>
</p>
<div class="table">
<a name="maxallocate-ndbd-table"></a><p class="title"><b>Table 22.61 This table provides type and
value information for the MaxAllocate data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
            <th scope="col">Property</th>
            <th scope="col">Value</th>
          </tr></thead><tbody><tr>
            <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
            <td>NDB 8.0.13</td>
          </tr><tr>
            <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
            <td>unsigned</td>
          </tr><tr>
            <td scope="row"><span class="bold"><strong>Default</strong></span></td>
            <td>32M</td>
          </tr><tr>
            <td scope="row"><span class="bold"><strong>Range</strong></span></td>
            <td>1M - 1G</td>
          </tr><tr>
            <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
              Type</a></strong></span></td>
            <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        This is the maximum size of the memory unit to use when
        allocating memory for tables. In cases where
        <code class="literal">NDB</code> gives <span class="errortext">Out of
        memory</span> errors, but it is evident by examining the
        cluster logs or the output of <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-dump-commands.html" target="_top"><code class="literal">DUMP
        1000</code></a> that all available memory has not yet been used,
        you can increase the value of this parameter (or
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooftables"><code class="literal">MaxNoOfTables</code></a>, or both)
        to cause <code class="literal">NDB</code> to make sufficient memory
        available.
</p>
<h5><a name="mysql-cluster-hash-map-size"></a>Hash Map Size</h5>
<p><a name="ndbparam-ndbd-defaulthashmapsize"></a>
        <a class="indexterm" name="idm140091602634016"></a>

        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-defaulthashmapsize"><code class="literal">DefaultHashMapSize</code></a>
</p>
<div class="table">
<a name="defaulthashmapsize-ndbd-table"></a><p class="title"><b>Table 22.62 This table provides type and
value information for the DefaultHashMapSize data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
            <th scope="col">Property</th>
            <th scope="col">Value</th>
          </tr></thead><tbody><tr>
            <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
            <td>NDB 8.0.13</td>
          </tr><tr>
            <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
            <td>LDM threads</td>
          </tr><tr>
            <td scope="row"><span class="bold"><strong>Default</strong></span></td>
            <td>3840</td>
          </tr><tr>
            <td scope="row"><span class="bold"><strong>Range</strong></span></td>
            <td>0 - 3840</td>
          </tr><tr>
            <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
              Type</a></strong></span></td>
            <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        The size of the table hash maps used by
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> is configurable using this
        parameter. <code class="literal">DefaultHashMapSize</code> can take any of
        three possible values (0, 240, 3840). These values and their
        effects are described in the following table:
</p>
<div class="table">
<a name="mysql-cluster-defaulthashmapsize-table"></a><p class="title"><b>Table 22.63 DefaultHashMapSize parameters</b></p>
<div class="table-contents">
<table><col width="20%"><col width="80%"><thead><tr>
            <th scope="col">Value</th>
            <th scope="col">Description / Effect</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">0</code></td>
            <td>Use the lowest value set, if any, for this parameter among all data
              nodes and API nodes in the cluster; if it is not set on
              any data or API node, use the default value.</td>
          </tr><tr>
            <td scope="row"><code class="literal">240</code></td>
            <td>Original hash map size (used in older NDB Cluster releases)</td>
          </tr><tr>
            <td scope="row"><code class="literal">3840</code></td>
            <td>Larger hash map size (used by default in NDB 8.0)</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        The original intended use for this parameter was to facilitate
        upgrades and especially downgrades to and from very old releases
        with differing default hash map sizes. This is not an issue when
        upgrading from NDB Cluster 7.6 to NDB Cluster 8.0.
      </p><p><a name="mysql-cluster-logging-and-checkpointing"></a><b>Logging and checkpointing. </b>
          The following <code class="literal">[ndbd]</code> parameters control log
          and checkpoint behavior.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-fragmentlogfilesize"></a>
            <a class="indexterm" name="idm140091602588512"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-fragmentlogfilesize"><code class="literal">FragmentLogFileSize</code></a>
</p>
<div class="table">
<a name="fragmentlogfilesize-ndbd-table"></a><p class="title"><b>Table 22.64 This table provides type and
value information for the FragmentLogFileSize data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>16M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>4M - 1G</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>IN</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Setting this parameter enables you to control directly the
            size of redo log files. This can be useful in situations
            when NDB Cluster is operating under a high load and it is
            unable to close fragment log files quickly enough before
            attempting to open new ones (only 2 fragment log files can
            be open at one time); increasing the size of the fragment
            log files gives the cluster more time before having to open
            each new fragment log file. The default value for this
            parameter is 16M.
          </p><p>
            For more information about fragment log files, see the
            description for
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-nooffragmentlogfiles"><code class="literal">NoOfFragmentLogFiles</code></a>.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-initialnoofopenfiles"></a>
            <a class="indexterm" name="idm140091602561344"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-initialnoofopenfiles"><code class="literal">InitialNoOfOpenFiles</code></a>
</p>
<div class="table">
<a name="initialnoofopenfiles-ndbd-table"></a><p class="title"><b>Table 22.65 This table provides type and
value information for the InitialNoOfOpenFiles data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>files</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>27</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>20 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter sets the initial number of internal threads
            to allocate for open files.
          </p><p>
            The default value is 27.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-initfragmentlogfiles"></a>
            <a class="indexterm" name="idm140091602535968"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-initfragmentlogfiles"><code class="literal">InitFragmentLogFiles</code></a>
</p>
<div class="table">
<a name="initfragmentlogfiles-ndbd-table"></a><p class="title"><b>Table 22.66 This table provides type and
value information for the InitFragmentLogFiles data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>[see values]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>SPARSE</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>SPARSE, FULL</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>IN</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            By default, fragment log files are created sparsely when
            performing an initial start of a data node—that is,
            depending on the operating system and file system in use,
            not all bytes are necessarily written to disk. However, it
            is possible to override this behavior and force all bytes to
            be written, regardless of the platform and file system type
            being used, by means of this parameter.
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-initfragmentlogfiles"><code class="literal">InitFragmentLogFiles</code></a>
            takes either of two values:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">SPARSE</code>. Fragment log files are
                created sparsely. This is the default value.
              </p></li><li class="listitem"><p>
                <code class="literal">FULL</code>. Force all bytes of the fragment
                log file to be written to disk.
</p></li></ul>
</div>
<p>
            Depending on your operating system and file system, setting
            <code class="literal">InitFragmentLogFiles=FULL</code> may help
            eliminate I/O errors on writes to the REDO log.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-enablepartiallcp"></a>
            <a class="indexterm" name="idm140091602504208"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-enablepartiallcp"><code class="literal">EnablePartialLcp</code></a>
</p>
<div class="table">
<a name="enablepartiallcp-ndbd-table"></a><p class="title"><b>Table 22.67 This table provides type and
value information for the EnablePartialLcp data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>boolean</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>true</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            When <code class="literal">true</code>, enable partial local
            checkpoints: This means that each LCP records only part of
            the full database, plus any records containing rows changed
            since the last LCP; if no rows have changed, the LCP updates
            only the LCP control file and does not update any data
            files.
          </p><p>
            If <code class="literal">EnablePartialLcp</code> is disabled
            (<code class="literal">false</code>), each LCP uses only a single file
            and writes a full checkpoint; this requires the least amount
            of disk space for LCPs, but increases the write load for
            each LCP. The default value is enabled
            (<code class="literal">true</code>). The proportion of space used by
            partiaL LCPS can be modified by the setting for the
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-recoverywork"><code class="literal">RecoveryWork</code></a>
            configuration parameter.
          </p><p>
            Setting this parameter to <code class="literal">false</code> also
            disables the calculation of disk write speed used by the
            adaptive LCP control mechanism.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-lcpscanprogresstimeout"></a>
            <a class="indexterm" name="idm140091602472960"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-lcpscanprogresstimeout"><code class="literal">LcpScanProgressTimeout</code></a>
</p>
<div class="table">
<a name="lcpscanprogresstimeout-ndbd-table"></a><p class="title"><b>Table 22.68 This table provides type and
value information for the LcpScanProgressTimeout data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>second</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>60</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            A local checkpoint fragment scan watchdog checks
            periodically for no progress in each fragment scan performed
            as part of a local checkpoint, and shuts down the node if
            there is no progress after a given amount of time has
            elapsed. This interval can be set using the
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-lcpscanprogresstimeout"><code class="literal">LcpScanProgressTimeout</code></a>
            data node configuration parameter, which sets the maximum
            time for which the local checkpoint can be stalled before
            the LCP fragment scan watchdog shuts down the node.
          </p><p>
            The default value is 60 seconds (providing compatibility
            with previous releases). Setting this parameter to 0
            disables the LCP fragment scan watchdog altogether.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnoofopenfiles"></a>
            <a class="indexterm" name="idm140091602445760"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofopenfiles"><code class="literal">MaxNoOfOpenFiles</code></a>
</p>
<div class="table">
<a name="maxnoofopenfiles-ndbd-table"></a><p class="title"><b>Table 22.69 This table provides type and
value information for the MaxNoOfOpenFiles data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>20 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter sets a ceiling on how many internal threads
            to allocate for open files. <span class="emphasis"><em>Any situation
            requiring a change in this parameter should be reported as a
            bug</em></span>.
          </p><p>
            The default value is 0. However, the minimum value to which
            this parameter can be set is 20.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnoofsavedmessages"></a>
            <a class="indexterm" name="idm140091602419792"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofsavedmessages"><code class="literal">MaxNoOfSavedMessages</code></a>
</p>
<div class="table">
<a name="maxnoofsavedmessages-ndbd-table"></a><p class="title"><b>Table 22.70 This table provides type and
value information for the MaxNoOfSavedMessages data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>25</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter sets the maximum number of errors written in
            the error log as well as the maximum number of trace files
            that are kept before overwriting the existing ones. Trace
            files are generated when, for whatever reason, the node
            crashes.
          </p><p>
            The default is 25, which sets these maximums to 25 error
            messages and 25 trace files.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxlcpstartdelay"></a>
            <a class="indexterm" name="idm140091602394144"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxlcpstartdelay"><code class="literal">MaxLCPStartDelay</code></a>
</p>
<div class="table">
<a name="maxlcpstartdelay-ndbd-table"></a><p class="title"><b>Table 22.71 This table provides type and
value information for the MaxLCPStartDelay data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>seconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 600</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            In parallel data node recovery, only table data is actually
            copied and synchronized in parallel; synchronization of
            metadata such as dictionary and checkpoint information is
            done in a serial fashion. In addition, recovery of
            dictionary and checkpoint information cannot be executed in
            parallel with performing of local checkpoints. This means
            that, when starting or restarting many data nodes
            concurrently, data nodes may be forced to wait while a local
            checkpoint is performed, which can result in longer node
            recovery times.
          </p><p>
            It is possible to force a delay in the local checkpoint to
            permit more (and possibly all) data nodes to complete
            metadata synchronization; once each data node's
            metadata synchronization is complete, all of the data nodes
            can recover table data in parallel, even while the local
            checkpoint is being executed. To force such a delay, set
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxlcpstartdelay"><code class="literal">MaxLCPStartDelay</code></a>,
            which determines the number of seconds the cluster can wait
            to begin a local checkpoint while data nodes continue to
            synchronize metadata. This parameter should be set in the
            <code class="literal">[ndbd default]</code> section of the
            <code class="filename">config.ini</code> file, so that it is the same
            for all data nodes. The maximum value is 600; the default is
            0.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-nooffragmentlogfiles"></a>
            <a class="indexterm" name="idm140091602364848"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-nooffragmentlogfiles"><code class="literal">NoOfFragmentLogFiles</code></a>
</p>
<div class="table">
<a name="nooffragmentlogfiles-ndbd-table"></a><p class="title"><b>Table 22.72 This table provides type and
value information for the NoOfFragmentLogFiles data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>16</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>3 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>IN</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter sets the number of REDO log files for the
            node, and thus the amount of space allocated to REDO
            logging. Because the REDO log files are organized in a ring,
            it is extremely important that the first and last log files
            in the set (sometimes referred to as the <span class="quote">“<span class="quote">head</span>”</span>
            and <span class="quote">“<span class="quote">tail</span>”</span> log files, respectively) do not
            meet. When these approach one another too closely, the node
            begins aborting all transactions encompassing updates due to
            a lack of room for new log records.
          </p><p>
            A <code class="literal">REDO</code> log record is not removed until
            both required local checkpoints have been completed since
            that log record was inserted. Checkpointing frequency is
            determined by its own set of configuration parameters
            discussed elsewhere in this chapter.
          </p><p>
            The default parameter value is 16, which by default means 16
            sets of 4 16MB files for a total of 1024MB. The size of the
            individual log files is configurable using the
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-fragmentlogfilesize"><code class="literal">FragmentLogFileSize</code></a>
            parameter. In scenarios requiring a great many updates, the
            value for
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-nooffragmentlogfiles"><code class="literal">NoOfFragmentLogFiles</code></a>
            may need to be set as high as 300 or even higher to provide
            sufficient space for REDO logs.
          </p><p>
            If the checkpointing is slow and there are so many writes to
            the database that the log files are full and the log tail
            cannot be cut without jeopardizing recovery, all updating
            transactions are aborted with internal error code 410
            (<code class="literal">Out of log file space temporarily</code>). This
            condition prevails until a checkpoint has completed and the
            log tail can be moved forward.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              This parameter cannot be changed <span class="quote">“<span class="quote">on the
              fly</span>”</span>; you must restart the node using
              <code class="option">--initial</code>. If you wish to change this
              value for all data nodes in a running cluster, you can do
              so using a rolling node restart (using
              <code class="option">--initial</code> when starting each data node).
</p>
</div>
</li><li class="listitem"><p><a name="ndbparam-ndbd-recoverywork"></a>
            <a class="indexterm" name="idm140091602329904"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-recoverywork"><code class="literal">RecoveryWork</code></a>
</p>
<div class="table">
<a name="recoverywork-ndbd-table"></a><p class="title"><b>Table 22.73 This table provides type and
value information for the RecoveryWork data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>60</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>25 - 100</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Percentage of storage overhead for LCP files. This parameter
            has an effect only when
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-enablepartiallcp"><code class="literal">EnablePartialLcp</code></a> is
            true, that is, only when partial local checkpoints are
            enabled. A higher value means:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                Fewer records are written for each LCP, LCPs use more
                space
              </p></li><li class="listitem"><p>
                More work is needed during restarts
</p></li></ul>
</div>
<p>
            A lower value for <code class="literal">RecoveryWork</code> means:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                More records are written during each LCP, but LCPs
                require less space on disk.
              </p></li><li class="listitem"><p>
                Less work during restart and thus faster restarts, at
                the expense of more work during normal operations
</p></li></ul>
</div>
<p>
            For example, setting <code class="literal">RecoveryWork</code> to 60
            means that the total size of an LCP is roughly 1 + 0.6 = 1.6
            times the size of the data to be checkpointed. This means
            that 60% more work is required during the restore phase of a
            restart compared to the work done during a restart that uses
            full checkpoints. (This is more than compensated for during
            other phases of the restart such that the restart as a whole
            is still faster when using partial LCPs than when using full
            LCPs.) In order not to fill up the redo log, it is necessary
            to write at 1 + (1 / <code class="literal">RecoveryWork</code>) times
            the rate of data changes during checkpoints—thus, when
            <code class="literal">RecoveryWork</code> = 60, it is necessary to
            write at approximately 1 + (1 / 0.6 ) = 2.67 times the
            change rate. In other words, if changes are being written at
            10 MByte per second, the checkpoint needs to be written at
            roughly 26.7 MByte per second.
          </p><p>
            Setting <code class="literal">RecoveryWork</code> = 40 means that only
            1.4 times the total LCP size is needed (and thus the restore
            phase takes 10 to 15 percent less time. In this case, the
            checkpoint write rate is 3.5 times the rate of change.
          </p><a class="indexterm" name="idm140091602293696"></a><p>
            The NDB source distribution includes a test program for
            simulating LCPs. <code class="filename">lcp_simulator.cc</code> can
            be found in
            <code class="filename">storage/ndb/src/kernel/blocks/backup/</code>.
            To compile and run it on Unix platforms, execute the
            commands shown here:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>gcc lcp_simulator.cc</code></strong>
shell&gt; <strong class="userinput"><code>./a.out</code></strong>
</pre><p>
            This program has no dependencies other than
            <code class="filename">stdio.h</code>, and does not require a
            connection to an NDB cluster or a MySQL server. By default,
            it simulates 300 LCPs (three sets of 100 LCPs, each
            consisting of inserts, updates, and deletes, in turn),
            reporting the size of the LCP after each one. You can alter
            the simulation by changing the values of
            <code class="literal">recovery_work</code>,
            <code class="literal">insert_work</code>, and
            <code class="literal">delete_work</code> in the source and
            recompiling. For more information, see the source of the
            program.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-insertrecoverywork"></a>
            <a class="indexterm" name="idm140091602283216"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-insertrecoverywork"><code class="literal">InsertRecoveryWork</code></a>
</p>
<div class="table">
<a name="insertrecoverywork-ndbd-table"></a><p class="title"><b>Table 22.74 This table provides type and
value information for the InsertRecoveryWork data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>40</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 70</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Percentage of
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-recoverywork"><code class="literal">RecoveryWork</code></a> used
            for inserted rows. A higher value increases the number of
            writes during a local checkpoint, and decreases the total
            size of the LCP. A lower value decreases the number of
            writes during an LCP, but results in more space being used
            for the LCP, which means that recovery takes longer. This
            parameter has an effect only when
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-enablepartiallcp"><code class="literal">EnablePartialLcp</code></a> is
            true, that is, only when partial local checkpoints are
            enabled.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-enableredocontrol"></a>
            <a class="indexterm" name="idm140091602255344"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-enableredocontrol"><code class="literal">EnableRedoControl</code></a>
</p>
<div class="table">
<a name="enableredocontrol-ndbd-table"></a><p class="title"><b>Table 22.75 This table provides type and
value information for the EnableRedoControl data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>boolean</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Enable adaptive checkpointing speed for controlling redo log
            usage. Set to <code class="literal">false</code> to disable (the
            default). Setting
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-enablepartiallcp"><code class="literal">EnablePartialLcp</code></a> to
            <code class="literal">false</code> also disables the adaptive
            calculation.
          </p><p>
            When enabled, <code class="literal">EnableRedoControl</code> allows
            the data nodes greater flexibility with regard to the rate
            at which they write LCPs to disk. More specifically,
            enabling this parameter means that higher write rates can be
            employed, so that LCPs can complete and Redo logs be trimmed
            more quickly, thereby reducing recovery time and disk space
            requirements. This functionality allows data nodes to make
            better use of the higher rate of I/O and greater bandwidth
            available from modern solid-state storage devices and
            protocols, such as solid-state drives (SSDs) using
            Non-Volatile Memory Express (NVMe).
          </p><p>
            The parameter currently defaults to <code class="literal">false</code>
            (disabled) due to the fact that <code class="literal">NDB</code> is
            still deployed widely on systems whose I/O or bandwidth is
            constrained relative to those employing solid-state
            technology, such as those using conventional hard disks
            (HDDs). In settings such as these, the
            <code class="literal">EnableRedoControl</code> mechanism can easily
            cause the I/O subsystem to become saturated, increasing wait
            times for data node input and output. In particular, this
            can cause issues with NDB Disk Data tables which have
            tablespaces or log file groups sharing a constrained IO
            subsystem with data node LCP and redo log files; such
            problems potentially include node or cluster failure due to
            GCP stop errors.
</p></li></ul>
</div>
<p><a name="mysql-cluster-metadata-objects"></a><b>Metadata objects. </b>
          The next set of <code class="literal">[ndbd]</code> parameters defines
          pool sizes for metadata objects, used to define the maximum
          number of attributes, tables, indexes, and trigger objects
          used by indexes, events, and replication between clusters.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          These act merely as <span class="quote">“<span class="quote">suggestions</span>”</span> to the cluster,
          and any that are not specified revert to the default values
          shown.
</p>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-maxnoofattributes"></a>
            <a class="indexterm" name="idm140091602218080"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofattributes"><code class="literal">MaxNoOfAttributes</code></a>
</p>
<div class="table">
<a name="maxnoofattributes-ndbd-table"></a><p class="title"><b>Table 22.76 This table provides type and
value information for the MaxNoOfAttributes data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>1000</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>32 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter sets a suggested maximum number of attributes
            that can be defined in the cluster; like
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooftables"><code class="literal">MaxNoOfTables</code></a>, it is
            not intended to function as a hard upper limit.
          </p><p>
            (In older NDB Cluster releases, this parameter was sometimes
            treated as a hard limit for certain operations. This caused
            problems with NDB Cluster Replication, when it was possible
            to create more tables than could be replicated, and
            sometimes led to confusion when it was possible [or not
            possible, depending on the circumstances] to create more
            than <code class="literal">MaxNoOfAttributes</code> attributes.)
          </p><p>
            The default value is 1000, with the minimum possible value
            being 32. The maximum is 4294967039. Each attribute consumes
            around 200 bytes of storage per node due to the fact that
            all metadata is fully replicated on the servers.
          </p><p>
            When setting
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofattributes"><code class="literal">MaxNoOfAttributes</code></a>,
            it is important to prepare in advance for any
            <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statements that
            you might want to perform in the future. This is due to the
            fact, during the execution of <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER
            TABLE</code></a> on a Cluster table, 3 times the number of
            attributes as in the original table are used, and a good
            practice is to permit double this amount. For example, if
            the NDB Cluster table having the greatest number of
            attributes
            (<em class="replaceable"><code>greatest_number_of_attributes</code></em>)
            has 100 attributes, a good starting point for the value of
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofattributes"><code class="literal">MaxNoOfAttributes</code></a>
            would be <code class="literal">6 *
            <em class="replaceable"><code>greatest_number_of_attributes</code></em> =
            600</code>.
          </p><p>
            You should also estimate the average number of attributes
            per table and multiply this by
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooftables"><code class="literal">MaxNoOfTables</code></a>. If
            this value is larger than the value obtained in the previous
            paragraph, you should use the larger value instead.
          </p><p>
            Assuming that you can create all desired tables without any
            problems, you should also verify that this number is
            sufficient by trying an actual <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER
            TABLE</code></a> after configuring the parameter. If this is
            not successful, increase
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofattributes"><code class="literal">MaxNoOfAttributes</code></a> by
            another multiple of
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooftables"><code class="literal">MaxNoOfTables</code></a> and
            test it again.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnooftables"></a>
            <a class="indexterm" name="idm140091602175520"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooftables"><code class="literal">MaxNoOfTables</code></a>
</p>
<div class="table">
<a name="maxnooftables-ndbd-table"></a><p class="title"><b>Table 22.77 This table provides type and
value information for the MaxNoOfTables data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>128</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>8 - 20320</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            A table object is allocated for each table and for each
            unique hash index in the cluster. This parameter sets a
            suggested maximum number of table objects for the cluster as
            a whole; like
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofattributes"><code class="literal">MaxNoOfAttributes</code></a>,
            it is not intended to function as a hard upper limit.
          </p><p>
            (In older NDB Cluster releases, this parameter was sometimes
            treated as a hard limit for certain operations. This caused
            problems with NDB Cluster Replication, when it was possible
            to create more tables than could be replicated, and
            sometimes led to confusion when it was possible [or not
            possible, depending on the circumstances] to create more
            than <code class="literal">MaxNoOfTables</code> tables.)
          </p><p>
            For each attribute that has a
            <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> data type an extra table
            is used to store most of the
            <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> data. These tables also
            must be taken into account when defining the total number of
            tables.
          </p><p>
            The default value of this parameter is 128. The minimum is 8
            and the maximum is 20320. Each table object consumes
            approximately 20KB per node.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              The sum of
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooftables"><code class="literal">MaxNoOfTables</code></a>,
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooforderedindexes"><code class="literal">MaxNoOfOrderedIndexes</code></a>,
              and
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofuniquehashindexes"><code class="literal">MaxNoOfUniqueHashIndexes</code></a>
              must not exceed <code class="literal">2<sup>32</sup>
              − 2</code> (4294967294).
</p>
</div>
</li><li class="listitem"><p><a name="ndbparam-ndbd-maxnooforderedindexes"></a>
            <a class="indexterm" name="idm140091602138112"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooforderedindexes"><code class="literal">MaxNoOfOrderedIndexes</code></a>
</p>
<div class="table">
<a name="maxnooforderedindexes-ndbd-table"></a><p class="title"><b>Table 22.78 This table provides type and
value information for the MaxNoOfOrderedIndexes data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>128</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            For each ordered index in the cluster, an object is
            allocated describing what is being indexed and its storage
            segments. By default, each index so defined also defines an
            ordered index. Each unique index and primary key has both an
            ordered index and a hash index.
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooforderedindexes"><code class="literal">MaxNoOfOrderedIndexes</code></a>
            sets the total number of ordered indexes that can be in use
            in the system at any one time.
          </p><p>
            The default value of this parameter is 128. Each index
            object consumes approximately 10KB of data per node.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              The sum of
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooftables"><code class="literal">MaxNoOfTables</code></a>,
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooforderedindexes"><code class="literal">MaxNoOfOrderedIndexes</code></a>,
              and
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofuniquehashindexes"><code class="literal">MaxNoOfUniqueHashIndexes</code></a>
              must not exceed <code class="literal">2<sup>32</sup>
              − 2</code> (4294967294).
</p>
</div>
</li><li class="listitem"><p><a name="ndbparam-ndbd-maxnoofuniquehashindexes"></a>
            <a class="indexterm" name="idm140091602105264"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofuniquehashindexes"><code class="literal">MaxNoOfUniqueHashIndexes</code></a>
</p>
<div class="table">
<a name="maxnoofuniquehashindexes-ndbd-table"></a><p class="title"><b>Table 22.79 This table provides type and
value information for the MaxNoOfUniqueHashIndexes data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>64</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            For each unique index that is not a primary key, a special
            table is allocated that maps the unique key to the primary
            key of the indexed table. By default, an ordered index is
            also defined for each unique index. To prevent this, you
            must specify the <code class="literal">USING HASH</code> option when
            defining the unique index.
          </p><p>
            The default value is 64. Each index consumes approximately
            15KB per node.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              The sum of
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooftables"><code class="literal">MaxNoOfTables</code></a>,
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooforderedindexes"><code class="literal">MaxNoOfOrderedIndexes</code></a>,
              and
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofuniquehashindexes"><code class="literal">MaxNoOfUniqueHashIndexes</code></a>
              must not exceed <code class="literal">2<sup>32</sup>
              − 2</code> (4294967294).
</p>
</div>
</li><li class="listitem"><p><a name="ndbparam-ndbd-maxnooftriggers"></a>
            <a class="indexterm" name="idm140091602073024"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooftriggers"><code class="literal">MaxNoOfTriggers</code></a>
</p>
<div class="table">
<a name="maxnooftriggers-ndbd-table"></a><p class="title"><b>Table 22.80 This table provides type and
value information for the MaxNoOfTriggers data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>768</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Internal update, insert, and delete triggers are allocated
            for each unique hash index. (This means that three triggers
            are created for each unique hash index.) However, an
            <span class="emphasis"><em>ordered</em></span> index requires only a single
            trigger object. Backups also use three trigger objects for
            each normal table in the cluster.
          </p><p>
            Replication between clusters also makes use of internal
            triggers.
          </p><p>
            This parameter sets the maximum number of trigger objects in
            the cluster.
          </p><p>
            The default value is 768.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnoofsubscriptions"></a>
            <a class="indexterm" name="idm140091602045904"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofsubscriptions"><code class="literal">MaxNoOfSubscriptions</code></a>
</p>
<div class="table">
<a name="maxnoofsubscriptions-ndbd-table"></a><p class="title"><b>Table 22.81 This table provides type and
value information for the MaxNoOfSubscriptions data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Each <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table in an NDB
            Cluster requires a subscription in the NDB kernel. For some
            NDB API applications, it may be necessary or desirable to
            change this parameter. However, for normal usage with MySQL
            servers acting as SQL nodes, there is not any need to do so.
          </p><p>
            The default value for
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofsubscriptions"><code class="literal">MaxNoOfSubscriptions</code></a>
            is 0, which is treated as equal to
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooftables"><code class="literal">MaxNoOfTables</code></a>. Each
            subscription consumes 108 bytes.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnoofsubscribers"></a>
            <a class="indexterm" name="idm140091602016512"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofsubscribers"><code class="literal">MaxNoOfSubscribers</code></a>
</p>
<div class="table">
<a name="maxnoofsubscribers-ndbd-table"></a><p class="title"><b>Table 22.82 This table provides type and
value information for the MaxNoOfSubscribers data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter is of interest only when using NDB Cluster
            Replication. The default value is 0, which is treated as
            <code class="literal">2 * MaxNoOfTables</code>; that is, there is one
            subscription per <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table for
            each of two MySQL servers (one acting as the replication
            master and the other as the slave). Each subscriber uses 16
            bytes of memory.
          </p><p>
            When using circular replication, multi-master replication,
            and other replication setups involving more than 2 MySQL
            servers, you should increase this parameter to the number of
            <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> processes included in replication
            (this is often, but not always, the same as the number of
            clusters). For example, if you have a circular replication
            setup using three NDB Cluster s, with one
            <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> attached to each cluster, and each
            of these <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> processes acts as a
            master and as a slave, you should set
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofsubscribers"><code class="literal">MaxNoOfSubscribers</code></a>
            equal to <code class="literal">3 * MaxNoOfTables</code>.
          </p><p>
            For more information, see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-replication" title="22.6 NDB Cluster Replication">Section 22.6, “NDB Cluster Replication”</a>.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnoofconcurrentsuboperations"></a>
            <a class="indexterm" name="idm140091601981536"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentsuboperations"><code class="literal">MaxNoOfConcurrentSubOperations</code></a>
</p>
<div class="table">
<a name="maxnoofconcurrentsuboperations-ndbd-table"></a><p class="title"><b>Table 22.83 This table provides type and
value information for the MaxNoOfConcurrentSubOperations data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>256</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter sets a ceiling on the number of operations
            that can be performed by all API nodes in the cluster at one
            time. The default value (256) is sufficient for normal
            operations, and might need to be adjusted only in scenarios
            where there are a great many API nodes each performing a
            high volume of operations concurrently.
</p></li></ul>
</div>
<p><a name="mysql-cluster-boolean-parameters"></a><b>Boolean parameters. </b>
          The behavior of data nodes is also affected by a set of
          <code class="literal">[ndbd]</code> parameters taking on boolean values.
          These parameters can each be specified as
          <code class="literal">TRUE</code> by setting them equal to
          <code class="literal">1</code> or <code class="literal">Y</code>, and as
          <code class="literal">FALSE</code> by setting them equal to
          <code class="literal">0</code> or <code class="literal">N</code>.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-compressedbackup"></a>
            <a class="indexterm" name="idm140091601949072"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-compressedbackup"><code class="literal">CompressedBackup</code></a>
</p>
<div class="table">
<a name="compressedbackup-ndbd-table"></a><p class="title"><b>Table 22.84 This table provides type and
value information for the CompressedBackup data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>boolean</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>true, false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Enabling this parameter causes backup files to be
            compressed. The compression used is equivalent to
            <span class="command"><strong>gzip --fast</strong></span>, and can save 50% or more of
            the space required on the data node to store uncompressed
            backup files. Compressed backups can be enabled for
            individual data nodes, or for all data nodes (by setting
            this parameter in the <code class="literal">[ndbd default]</code>
            section of the <code class="filename">config.ini</code> file).
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              You cannot restore a compressed backup to a cluster
              running a MySQL version that does not support this
              feature.
</p>
</div>
<p>
            The default value is <code class="literal">0</code> (disabled).
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-compressedlcp"></a>
            <a class="indexterm" name="idm140091601919680"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-compressedlcp"><code class="literal">CompressedLCP</code></a>
</p>
<div class="table">
<a name="compressedlcp-ndbd-table"></a><p class="title"><b>Table 22.85 This table provides type and
value information for the CompressedLCP data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>boolean</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>true, false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Setting this parameter to <code class="literal">1</code> causes local
            checkpoint files to be compressed. The compression used is
            equivalent to <span class="command"><strong>gzip --fast</strong></span>, and can save
            50% or more of the space required on the data node to store
            uncompressed checkpoint files. Compressed LCPs can be
            enabled for individual data nodes, or for all data nodes (by
            setting this parameter in the <code class="literal">[ndbd
            default]</code> section of the
            <code class="filename">config.ini</code> file).
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              You cannot restore a compressed local checkpoint to a
              cluster running a MySQL version that does not support this
              feature.
</p>
</div>
<p>
            The default value is <code class="literal">0</code> (disabled).
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-crashoncorruptedtuple"></a>
            <a class="indexterm" name="idm140091601889536"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-crashoncorruptedtuple"><code class="literal">CrashOnCorruptedTuple</code></a>
</p>
<div class="table">
<a name="crashoncorruptedtuple-ndbd-table"></a><p class="title"><b>Table 22.86 This table provides type and
value information for the CrashOnCorruptedTuple data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>boolean</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>true</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>true, false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            When this parameter is enabled (the default), it forces a
            data node to shut down whenever it encounters a corrupted
            tuple.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-diskless"></a>
            <a class="indexterm" name="idm140091601864592"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskless"><code class="literal">Diskless</code></a>
</p>
<div class="table">
<a name="diskless-ndbd-table"></a><p class="title"><b>Table 22.87 This table provides type and
value information for the Diskless data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>true|false (1|0)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>true, false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>IS</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            It is possible to specify NDB Cluster tables as
            <span class="firstterm">diskless</span>, meaning that
            tables are not checkpointed to disk and that no logging
            occurs. Such tables exist only in main memory. A consequence
            of using diskless tables is that neither the tables nor the
            records in those tables survive a crash. However, when
            operating in diskless mode, it is possible to run
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> on a diskless computer.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              This feature causes the <span class="emphasis"><em>entire</em></span>
              cluster to operate in diskless mode.
</p>
</div>
<p>
            When this feature is enabled, Cluster online backup is
            disabled. In addition, a partial start of the cluster is not
            possible.
          </p><p>
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskless"><code class="literal">Diskless</code></a> is disabled
            by default.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-latealloc"></a>
            <a class="indexterm" name="idm140091601833920"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-latealloc"><code class="literal">LateAlloc</code></a>
</p>
<div class="table">
<a name="latealloc-ndbd-table"></a><p class="title"><b>Table 22.88 This table provides type and
value information for the LateAlloc data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>1</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 1</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Allocate memory for this data node after a connection to the
            management server has been established. Enabled by default.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-lockpagesinmainmemory"></a>
            <a class="indexterm" name="idm140091601809040"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-lockpagesinmainmemory"><code class="literal">LockPagesInMainMemory</code></a>
</p>
<div class="table">
<a name="lockpagesinmainmemory-ndbd-table"></a><p class="title"><b>Table 22.89 This table provides type and
value information for the LockPagesInMainMemory data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 2</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            For a number of operating systems, including Solaris and
            Linux, it is possible to lock a process into memory and so
            avoid any swapping to disk. This can be used to help
            guarantee the cluster's real-time characteristics.
          </p><p>
            This parameter takes one of the integer values
            <code class="literal">0</code>, <code class="literal">1</code>, or
            <code class="literal">2</code>, which act as shown in the following
            list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">0</code>: Disables locking. This is the
                default value.
              </p></li><li class="listitem"><p>
                <code class="literal">1</code>: Performs the lock after allocating
                memory for the process.
              </p></li><li class="listitem"><p>
                <code class="literal">2</code>: Performs the lock before memory
                for the process is allocated.
</p></li></ul>
</div>
<p>
            If the operating system is not configured to permit
            unprivileged users to lock pages, then the data node process
            making use of this parameter may have to be run as system
            root.
            (<a class="link" href="mysql-cluster.html#ndbparam-ndbd-lockpagesinmainmemory"><code class="literal">LockPagesInMainMemory</code></a>
            uses the <code class="literal">mlockall</code> function. From Linux
            kernel 2.6.9, unprivileged users can lock memory as limited
            by <code class="literal">max locked memory</code>. For more
            information, see <span class="command"><strong>ulimit -l</strong></span> and
            <a class="ulink" href="http://linux.die.net/man/2/mlock" target="_top">http://linux.die.net/man/2/mlock</a>).
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              In older NDB Cluster releases, this parameter was a
              Boolean. <code class="literal">0</code> or <code class="literal">false</code>
              was the default setting, and disabled locking.
              <code class="literal">1</code> or <code class="literal">true</code> enabled
              locking of the process after its memory was allocated. NDB
              Cluster 8.0 treats <code class="literal">true</code> or
              <code class="literal">false</code> for the value of this parameter
              as an error.
</p>
</div>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Important
</div>
<p>
              Beginning with <code class="literal">glibc</code> 2.10,
              <code class="literal">glibc</code> uses per-thread arenas to reduce
              lock contention on a shared pool, which consumes real
              memory. In general, a data node process does not need
              per-thread arenas, since it does not perform any memory
              allocation after startup. (This difference in allocators
              does not appear to affect performance significantly.)
            </p><p>
              The <code class="literal">glibc</code> behavior is intended to be
              configurable via the <code class="literal">MALLOC_ARENA_MAX</code>
              environment variable, but a bug in this mechanism prior to
              <code class="literal">glibc</code> 2.16 meant that this variable
              could not be set to less than 8, so that the wasted memory
              could not be reclaimed. (Bug #15907219; see also
              <a class="ulink" href="http://sourceware.org/bugzilla/show_bug.cgi?id=13137" target="_top">http://sourceware.org/bugzilla/show_bug.cgi?id=13137</a>
              for more information concerning this issue.)
            </p><p>
              One possible workaround for this problem is to use the
              <code class="literal">LD_PRELOAD</code> environment variable to
              preload a <code class="literal">jemalloc</code> memory allocation
              library to take the place of that supplied with
              <code class="literal">glibc</code>.
</p>
</div>
</li><li class="listitem"><p><a name="ndbparam-ndbd-odirect"></a>
            <a class="indexterm" name="idm140091601757472"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-odirect"><code class="literal">ODirect</code></a>
</p>
<div class="table">
<a name="odirect-ndbd-table"></a><p class="title"><b>Table 22.90 This table provides type and
value information for the ODirect data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>boolean</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>true, false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Enabling this parameter causes
            <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> to attempt using
            <code class="literal">O_DIRECT</code> writes for LCP, backups, and
            redo logs, often lowering <span class="command"><strong>kswapd</strong></span> and CPU
            usage. When using NDB Cluster on Linux, enable
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-odirect"><code class="literal">ODirect</code></a> if you are
            using a 2.6 or later kernel.
          </p><p>
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-odirect"><code class="literal">ODirect</code></a> is disabled
            by default.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-odirectsyncflag"></a>
            <a class="indexterm" name="idm140091601726960"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-odirectsyncflag"><code class="literal">ODirectSyncFlag</code></a>
</p>
<div class="table">
<a name="odirectsyncflag-ndbd-table"></a><p class="title"><b>Table 22.91 This table provides type and
value information for the ODirectSyncFlag data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>boolean</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>true, false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            When this parameter is enabled, redo log writes are
            performed such that each completed file system write is
            handled as a call to <code class="literal">fsync</code>. The setting
            for this parameter is ignored if at least one of the
            following conditions is true:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-odirect"><code class="literal">ODirect</code></a> is not
                enabled.
              </p></li><li class="listitem"><p>
                <code class="literal">InitFragmentLogFiles</code>
                is set to <code class="literal">SPARSE</code>.
</p></li></ul>
</div>
<p>
            Disabled by default.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-restartonerrorinsert"></a>
            <a class="indexterm" name="idm140091601695824"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-restartonerrorinsert"><code class="literal">RestartOnErrorInsert</code></a>
</p>
<div class="table">
<a name="restartonerrorinsert-ndbd-table"></a><p class="title"><b>Table 22.92 This table provides type and
value information for the RestartOnErrorInsert data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>error code</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>2</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This feature is accessible only when building the debug
            version where it is possible to insert errors in the
            execution of individual blocks of code as part of testing.
          </p><p>
            This feature is disabled by default.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-stoponerror"></a>
            <a class="indexterm" name="idm140091601670368"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-stoponerror"><code class="literal">StopOnError</code></a>
</p>
<div class="table">
<a name="stoponerror-ndbd-table"></a><p class="title"><b>Table 22.93 This table provides type and
value information for the StopOnError data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>boolean</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>1</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0, 1</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter specifies whether a data node process should
            exit or perform an automatic restart when an error condition
            is encountered.
          </p><p>
            This parameter's default value is 1; this means that,
            by default, an error causes the data node process to halt.
          </p><p>
            When an error is encountered and
            <code class="literal">StopOnError</code> is 0, the data node process
            is restarted.
          </p><p>
            Users of MySQL Cluster Manager should note that, when
            <code class="literal">StopOnError</code> equals 1, this prevents the
            MySQL Cluster Manager agent from restarting any data nodes after it has
            performed its own restart and recovery. See
            <a class="ulink" href="https://dev.mysql.com/doc/mysql-cluster-manager/1.4/en/mcm-using-start-stop-agent-linux.html" target="_top">Starting and Stopping the Agent on Linux</a>, for more
            information.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-useshm"></a>
            <a class="indexterm" name="idm140091601641488"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-useshm"><code class="literal">UseShm</code></a>
</p>
<div class="table">
<a name="useshm-ndbd-table"></a><p class="title"><b>Table 22.94 This table provides type and
value information for the UseShm shared memory configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>boolean</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>true, false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="Restart types">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Enable a shared memory connection between this data node and
            the API node also running on this host. Set to 1 to enable.
</p></li></ul>
</div>
<h5><a name="mysql-cluster-timeouts-intervals-disk-paging"></a>Controlling Timeouts, Intervals, and Disk Paging</h5>
<p>
        There are a number of <code class="literal">[ndbd]</code> parameters
        specifying timeouts and intervals between various actions in
        Cluster data nodes. Most of the timeout values are specified in
        milliseconds. Any exceptions to this are mentioned where
        applicable.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-timebetweenwatchdogcheck"></a>
            <a class="indexterm" name="idm140091601613328"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenwatchdogcheck"><code class="literal">TimeBetweenWatchDogCheck</code></a>
</p>
<div class="table">
<a name="timebetweenwatchdogcheck-ndbd-table"></a><p class="title"><b>Table 22.95 This table provides type and
value information for the TimeBetweenWatchDogCheck data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>milliseconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>6000</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>70 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            To prevent the main thread from getting stuck in an endless
            loop at some point, a <span class="quote">“<span class="quote">watchdog</span>”</span> thread checks
            the main thread. This parameter specifies the number of
            milliseconds between checks. If the process remains in the
            same state after three checks, the watchdog thread
            terminates it.
          </p><p>
            This parameter can easily be changed for purposes of
            experimentation or to adapt to local conditions. It can be
            specified on a per-node basis although there seems to be
            little reason for doing so.
          </p><p>
            The default timeout is 6000 milliseconds (6 seconds).
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-timebetweenwatchdogcheckinitial"></a>
            <a class="indexterm" name="idm140091601586480"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenwatchdogcheckinitial"><code class="literal">TimeBetweenWatchDogCheckInitial</code></a>
</p>
<div class="table">
<a name="timebetweenwatchdogcheckinitial-ndbd-table"></a><p class="title"><b>Table 22.96 This table provides type and
value information for the TimeBetweenWatchDogCheckInitial data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>milliseconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>6000</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>70 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This is similar to the
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenwatchdogcheck"><code class="literal">TimeBetweenWatchDogCheck</code></a>
            parameter, except that
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenwatchdogcheckinitial"><code class="literal">TimeBetweenWatchDogCheckInitial</code></a>
            controls the amount of time that passes between execution
            checks inside a storage node in the early start phases
            during which memory is allocated.
          </p><p>
            The default timeout is 6000 milliseconds (6 seconds).
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-startpartialtimeout"></a>
            <a class="indexterm" name="idm140091601558224"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-startpartialtimeout"><code class="literal">StartPartialTimeout</code></a>
</p>
<div class="table">
<a name="startpartialtimeout-ndbd-table"></a><p class="title"><b>Table 22.97 This table provides type and
value information for the StartPartialTimeout data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>milliseconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>30000</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter specifies how long the Cluster waits for all
            data nodes to come up before the cluster initialization
            routine is invoked. This timeout is used to avoid a partial
            Cluster startup whenever possible.
          </p><p>
            This parameter is overridden when performing an initial
            start or initial restart of the cluster.
          </p><p>
            The default value is 30000 milliseconds (30 seconds). 0
            disables the timeout, in which case the cluster may start
            only if all nodes are available.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-startpartitionedtimeout"></a>
            <a class="indexterm" name="idm140091601532064"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-startpartitionedtimeout"><code class="literal">StartPartitionedTimeout</code></a>
</p>
<div class="table">
<a name="startpartitionedtimeout-ndbd-table"></a><p class="title"><b>Table 22.98 This table provides type and
value information for the StartPartitionedTimeout data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>milliseconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>60000</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            If the cluster is ready to start after waiting for
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-startpartialtimeout"><code class="literal">StartPartialTimeout</code></a>
            milliseconds but is still possibly in a partitioned state,
            the cluster waits until this timeout has also passed. If
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-startpartitionedtimeout"><code class="literal">StartPartitionedTimeout</code></a>
            is set to 0, the cluster waits indefinitely.
          </p><p>
            This parameter is overridden when performing an initial
            start or initial restart of the cluster.
          </p><p>
            The default timeout is 60000 milliseconds (60 seconds).
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-startfailuretimeout"></a>
            <a class="indexterm" name="idm140091601503424"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-startfailuretimeout"><code class="literal">StartFailureTimeout</code></a>
</p>
<div class="table">
<a name="startfailuretimeout-ndbd-table"></a><p class="title"><b>Table 22.99 This table provides type and
value information for the StartFailureTimeout data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>milliseconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            If a data node has not completed its startup sequence within
            the time specified by this parameter, the node startup
            fails. Setting this parameter to 0 (the default value) means
            that no data node timeout is applied.
          </p><p>
            For nonzero values, this parameter is measured in
            milliseconds. For data nodes containing extremely large
            amounts of data, this parameter should be increased. For
            example, in the case of a data node containing several
            gigabytes of data, a period as long as 10−15 minutes
            (that is, 600000 to 1000000 milliseconds) might be required
            to perform a node restart.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-startnonodegrouptimeout"></a>
            <a class="indexterm" name="idm140091601477312"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-startnonodegrouptimeout"><code class="literal">StartNoNodeGroupTimeout</code></a>
</p>
<div class="table">
<a name="startnonodegrouptimeout-ndbd-table"></a><p class="title"><b>Table 22.100 This table provides type and
value information for the StartNoNodeGroupTimeout data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>milliseconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>15000</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            When a data node is configured with
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-nodegroup"><code class="literal">Nodegroup = 65536</code></a>,
            is regarded as not being assigned to any node group. When
            that is done, the cluster waits
            <code class="literal">StartNoNodegroupTimeout</code> milliseconds,
            then treats such nodes as though they had been added to the
            list passed to the
            <a class="link" href="mysql-cluster.html#option_ndbd_nowait-nodes"><code class="option">--nowait-nodes</code></a> option, and
            starts. The default value is <code class="literal">15000</code> (that
            is, the management server waits 15 seconds). Setting this
            parameter equal to <code class="literal">0</code> means that the
            cluster waits indefinitely.
          </p><p>
            <code class="literal">StartNoNodegroupTimeout</code> must be the same
            for all data nodes in the cluster; for this reason, you
            should always set it in the <code class="literal">[ndbd
            default]</code> section of the
            <code class="filename">config.ini</code> file, rather than for
            individual data nodes.
          </p><p>
            See <a class="xref" href="mysql-cluster.html#mysql-cluster-online-add-node" title="22.5.15 Adding NDB Cluster Data Nodes Online">Section 22.5.15, “Adding NDB Cluster Data Nodes Online”</a>, for
            more information.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-heartbeatintervaldbdb"></a>
            <a class="indexterm" name="idm140091601443600"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-heartbeatintervaldbdb"><code class="literal">HeartbeatIntervalDbDb</code></a>
</p>
<div class="table">
<a name="heartbeatintervaldbdb-ndbd-table"></a><p class="title"><b>Table 22.101 This table provides type and
value information for the HeartbeatIntervalDbDb data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>milliseconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>5000</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>10 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            One of the primary methods of discovering failed nodes is by
            the use of heartbeats. This parameter states how often
            heartbeat signals are sent and how often to expect to
            receive them. Heartbeats cannot be disabled.
          </p><p>
            After missing four heartbeat intervals in a row, the node is
            declared dead. Thus, the maximum time for discovering a
            failure through the heartbeat mechanism is five times the
            heartbeat interval.
          </p><p>
            The default heartbeat interval is 5000 milliseconds (5
            seconds). This parameter must not be changed drastically and
            should not vary widely between nodes. If one node uses 5000
            milliseconds and the node watching it uses 1000
            milliseconds, obviously the node will be declared dead very
            quickly. This parameter can be changed during an online
            software upgrade, but only in small increments.
          </p><p>
            See also
            <a class="xref" href="mysql-cluster.html#mysql-cluster-network-latency-issues" title="Network communication and latency">Network communication and latency</a>, as
            well as the description of the
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-connectcheckintervaldelay"><code class="literal">ConnectCheckIntervalDelay</code></a>
            configuration parameter.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-heartbeatintervaldbapi"></a>
            <a class="indexterm" name="idm140091601414400"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-heartbeatintervaldbapi"><code class="literal">HeartbeatIntervalDbApi</code></a>
</p>
<div class="table">
<a name="heartbeatintervaldbapi-ndbd-table"></a><p class="title"><b>Table 22.102 This table provides type and
value information for the HeartbeatIntervalDbApi data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>milliseconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>1500</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>100 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Each data node sends heartbeat signals to each MySQL server
            (SQL node) to ensure that it remains in contact. If a MySQL
            server fails to send a heartbeat in time it is declared
            <span class="quote">“<span class="quote">dead,</span>”</span> in which case all ongoing transactions
            are completed and all resources released. The SQL node
            cannot reconnect until all activities initiated by the
            previous MySQL instance have been completed. The
            three-heartbeat criteria for this determination are the same
            as described for
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-heartbeatintervaldbdb"><code class="literal">HeartbeatIntervalDbDb</code></a>.
          </p><p>
            The default interval is 1500 milliseconds (1.5 seconds).
            This interval can vary between individual data nodes because
            each data node watches the MySQL servers connected to it,
            independently of all other data nodes.
          </p><p>
            For more information, see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-network-latency-issues" title="Network communication and latency">Network communication and latency</a>.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-heartbeatorder"></a>
            <a class="indexterm" name="idm140091601385472"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-heartbeatorder"><code class="literal">HeartbeatOrder</code></a>
</p>
<div class="table">
<a name="heartbeatorder-ndbd-table"></a><p class="title"><b>Table 22.103 This table provides type and
value information for the HeartbeatOrder data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 65535</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Data nodes send heartbeats to one another in a circular
            fashion whereby each data node monitors the previous one. If
            a heartbeat is not detected by a given data node, this node
            declares the previous data node in the circle
            <span class="quote">“<span class="quote">dead</span>”</span> (that is, no longer accessible by the
            cluster). The determination that a data node is dead is done
            globally; in other words; once a data node is declared dead,
            it is regarded as such by all nodes in the cluster.
          </p><p>
            It is possible for heartbeats between data nodes residing on
            different hosts to be too slow compared to heartbeats
            between other pairs of nodes (for example, due to a very low
            heartbeat interval or temporary connection problem), such
            that a data node is declared dead, even though the node can
            still function as part of the cluster. .
          </p><p>
            In this type of situation, it may be that the order in which
            heartbeats are transmitted between data nodes makes a
            difference as to whether or not a particular data node is
            declared dead. If this declaration occurs unnecessarily,
            this can in turn lead to the unnecessary loss of a node
            group and as thus to a failure of the cluster.
          </p><p>
            Consider a setup where there are 4 data nodes A, B, C, and D
            running on 2 host computers <code class="literal">host1</code> and
            <code class="literal">host2</code>, and that these data nodes make up
            2 node groups, as shown in the following table:
</p>
<div class="table">
<a name="idm140091601357184"></a><p class="title"><b>Table 22.104 Four data nodes A, B, C, D running on two host computers
                host1, host2; each data node belongs to one of two node
groups.</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
                <th scope="col">Node Group</th>
                <th scope="col">Nodes Running on <code class="literal">host1</code></th>
                <th scope="col">Nodes Running on <code class="literal">host2</code></th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="emphasis"><em>Node Group 0</em></span>:</td>
                <td>Node A</td>
                <td>Node B</td>
              </tr><tr>
                <td scope="row"><span class="emphasis"><em>Node Group 1</em></span>:</td>
                <td>Node C</td>
                <td>Node D</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Suppose the heartbeats are transmitted in the order
            A-&gt;B-&gt;C-&gt;D-&gt;A. In this case, the loss of the
            heartbeat between the hosts causes node B to declare node A
            dead and node C to declare node B dead. This results in loss
            of Node Group 0, and so the cluster fails. On the other
            hand, if the order of transmission is
            A-&gt;B-&gt;D-&gt;C-&gt;A (and all other conditions remain
            as previously stated), the loss of the heartbeat causes
            nodes A and D to be declared dead; in this case, each node
            group has one surviving node, and the cluster survives.
          </p><p>
            The <a class="link" href="mysql-cluster.html#ndbparam-ndbd-heartbeatorder"><code class="literal">HeartbeatOrder</code></a>
            configuration parameter makes the order of heartbeat
            transmission user-configurable. The default value for
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-heartbeatorder"><code class="literal">HeartbeatOrder</code></a> is
            zero; allowing the default value to be used on all data
            nodes causes the order of heartbeat transmission to be
            determined by <code class="literal">NDB</code>. If this parameter is
            used, it must be set to a nonzero value (maximum 65535) for
            every data node in the cluster, and this value must be
            unique for each data node; this causes the heartbeat
            transmission to proceed from data node to data node in the
            order of their
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-heartbeatorder"><code class="literal">HeartbeatOrder</code></a>
            values from lowest to highest (and then directly from the
            data node having the highest
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-heartbeatorder"><code class="literal">HeartbeatOrder</code></a> to
            the data node having the lowest value, to complete the
            circle). The values need not be consecutive. For example, to
            force the heartbeat transmission order
            A-&gt;B-&gt;D-&gt;C-&gt;A in the scenario outlined
            previously, you could set the
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-heartbeatorder"><code class="literal">HeartbeatOrder</code></a>
            values as shown here:
</p>
<div class="table">
<a name="idm140091601331264"></a><p class="title"><b>Table 22.105 HeartbeatOrder values to force a heartbeat transition order of
A-&gt;B-&gt;D-&gt;C-&gt;A.</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Node</th>
                <th scope="col"><code class="literal">HeartbeatOrder</code> Value</th>
              </tr></thead><tbody><tr>
                <td scope="row">A</td>
                <td>10</td>
              </tr><tr>
                <td scope="row">B</td>
                <td>20</td>
              </tr><tr>
                <td scope="row">C</td>
                <td>30</td>
              </tr><tr>
                <td scope="row">D</td>
                <td>25</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            To use this parameter to change the heartbeat transmission
            order in a running NDB Cluster, you must first set
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-heartbeatorder"><code class="literal">HeartbeatOrder</code></a> for
            each data node in the cluster in the global configuration
            (<code class="filename">config.ini</code>) file (or files). To cause
            the change to take effect, you must perform either of the
            following:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                A complete shutdown and restart of the entire cluster.
              </p></li><li class="listitem"><p>
                2 rolling restarts of the cluster in succession.
                <span class="emphasis"><em>All nodes must be restarted in the same order
                in both rolling restarts</em></span>.
</p></li></ul>
</div>
<p>
            You can use <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-dump-commands.html" target="_top"><code class="literal">DUMP 908</code></a> to
            observe the effect of this parameter in the data node logs.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-connectcheckintervaldelay"></a>
            <a class="indexterm" name="idm140091601307328"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-connectcheckintervaldelay"><code class="literal">ConnectCheckIntervalDelay</code></a>
</p>
<div class="table">
<a name="connectcheckintervaldelay-ndbd-table"></a><p class="title"><b>Table 22.106 This table provides type and
value information for the ConnectCheckIntervalDelay data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>milliseconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter enables connection checking between data
            nodes after one of them has failed heartbeat checks for 5
            intervals of up to
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-heartbeatintervaldbdb"><code class="literal">HeartbeatIntervalDbDb</code></a>
            milliseconds.
          </p><p>
            Such a data node that further fails to respond within an
            interval of <code class="literal">ConnectCheckIntervalDelay</code>
            milliseconds is considered suspect, and is considered dead
            after two such intervals. This can be useful in setups with
            known latency issues.
          </p><p>
            The default value for this parameter is 0 (disabled).
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-timebetweenlocalcheckpoints"></a>
            <a class="indexterm" name="idm140091601279104"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenlocalcheckpoints"><code class="literal">TimeBetweenLocalCheckpoints</code></a>
</p>
<div class="table">
<a name="timebetweenlocalcheckpoints-ndbd-table"></a><p class="title"><b>Table 22.107 This table provides type and
value information for the TimeBetweenLocalCheckpoints data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>number of 4-byte words, as a base-2 logarithm</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>20</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 31</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter is an exception in that it does not specify a
            time to wait before starting a new local checkpoint; rather,
            it is used to ensure that local checkpoints are not
            performed in a cluster where relatively few updates are
            taking place. In most clusters with high update rates, it is
            likely that a new local checkpoint is started immediately
            after the previous one has been completed.
          </p><p>
            The size of all write operations executed since the start of
            the previous local checkpoints is added. This parameter is
            also exceptional in that it is specified as the base-2
            logarithm of the number of 4-byte words, so that the default
            value 20 means 4MB (4 ×
            2<sup>20</sup>) of write operations, 21
            would mean 8MB, and so on up to a maximum value of 31, which
            equates to 8GB of write operations.
          </p><p>
            All the write operations in the cluster are added together.
            Setting
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenlocalcheckpoints"><code class="literal">TimeBetweenLocalCheckpoints</code></a>
            to 6 or less means that local checkpoints will be executed
            continuously without pause, independent of the cluster's
            workload.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-timebetweenglobalcheckpoints"></a>
            <a class="indexterm" name="idm140091601250096"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenglobalcheckpoints"><code class="literal">TimeBetweenGlobalCheckpoints</code></a>
</p>
<div class="table">
<a name="timebetweenglobalcheckpoints-ndbd-table"></a><p class="title"><b>Table 22.108 This table provides type and
value information for the TimeBetweenGlobalCheckpoints data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>milliseconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>2000</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>20 - 32000</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            When a transaction is committed, it is committed in main
            memory in all nodes on which the data is mirrored. However,
            transaction log records are not flushed to disk as part of
            the commit. The reasoning behind this behavior is that
            having the transaction safely committed on at least two
            autonomous host machines should meet reasonable standards
            for durability.
          </p><p>
            It is also important to ensure that even the worst of
            cases—a complete crash of the cluster—is handled
            properly. To guarantee that this happens, all transactions
            taking place within a given interval are put into a global
            checkpoint, which can be thought of as a set of committed
            transactions that has been flushed to disk. In other words,
            as part of the commit process, a transaction is placed in a
            global checkpoint group. Later, this group's log records are
            flushed to disk, and then the entire group of transactions
            is safely committed to disk on all computers in the cluster.
          </p><p>
            This parameter defines the interval between global
            checkpoints. The default is 2000 milliseconds.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-timebetweenglobalcheckpointstimeout"></a>
            <a class="indexterm" name="idm140091601223024"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenglobalcheckpointstimeout"><code class="literal">TimeBetweenGlobalCheckpointsTimeout</code></a>
</p>
<div class="table">
<a name="timebetweenglobalcheckpointstimeout-ndbd-table"></a><p class="title"><b>Table 22.109 This table provides type and
value information for the TimeBetweenGlobalCheckpointsTimeout data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>milliseconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>120000</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>10 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter defines the minimum timeout between global
            checkpoints. The default is 120000 milliseconds.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-timebetweenepochs"></a>
            <a class="indexterm" name="idm140091601197952"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenepochs"><code class="literal">TimeBetweenEpochs</code></a>
</p>
<div class="table">
<a name="timebetweenepochs-ndbd-table"></a><p class="title"><b>Table 22.110 This table provides type and
value information for the TimeBetweenEpochs data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>milliseconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>100</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 32000</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter defines the interval between synchronization
            epochs for NDB Cluster Replication. The default value is 100
            milliseconds.
          </p><p>
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenepochs"><code class="literal">TimeBetweenEpochs</code></a> is
            part of the implementation of <span class="quote">“<span class="quote">micro-GCPs</span>”</span>,
            which can be used to improve the performance of NDB Cluster
            Replication.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-timebetweenepochstimeout"></a>
            <a class="indexterm" name="idm140091601170752"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenepochstimeout"><code class="literal">TimeBetweenEpochsTimeout</code></a>
</p>
<div class="table">
<a name="timebetweenepochstimeout-ndbd-table"></a><p class="title"><b>Table 22.111 This table provides type and
value information for the TimeBetweenEpochsTimeout data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>milliseconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 256000</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter defines a timeout for synchronization epochs
            for NDB Cluster Replication. If a node fails to participate
            in a global checkpoint within the time determined by this
            parameter, the node is shut down. The default value is 0; in
            other words, the timeout is disabled.
          </p><p>
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenepochstimeout"><code class="literal">TimeBetweenEpochsTimeout</code></a>
            is part of the implementation of <span class="quote">“<span class="quote">micro-GCPs</span>”</span>,
            which can be used to improve the performance of NDB Cluster
            Replication.
          </p><p>
            The current value of this parameter and a warning are
            written to the cluster log whenever a GCP save takes longer
            than 1 minute or a GCP commit takes longer than 10 seconds.
          </p><p>
            Setting this parameter to zero has the effect of disabling
            GCP stops caused by save timeouts, commit timeouts, or both.
            The maximum possible value for this parameter is 256000
            milliseconds.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxbufferedepochs"></a>
            <a class="indexterm" name="idm140091601142064"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxbufferedepochs"><code class="literal">MaxBufferedEpochs</code></a>
</p>
<div class="table">
<a name="maxbufferedepochs-ndbd-table"></a><p class="title"><b>Table 22.112 This table provides type and
value information for the MaxBufferedEpochs data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>epochs</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>100</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 100000</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The number of unprocessed epochs by which a subscribing node
            can lag behind. Exceeding this number causes a lagging
            subscriber to be disconnected.
          </p><p>
            The default value of 100 is sufficient for most normal
            operations. If a subscribing node does lag enough to cause
            disconnections, it is usually due to network or scheduling
            issues with regard to processes or threads. (In rare
            circumstances, the problem may be due to a bug in the
            <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> client.) It may be
            desirable to set the value lower than the default when
            epochs are longer.
          </p><p>
            Disconnection prevents client issues from affecting the data
            node service, running out of memory to buffer data, and
            eventually shutting down. Instead, only the client is
            affected as a result of the disconnect (by, for example gap
            events in the binary log), forcing the client to reconnect
            or restart the process.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxbufferedepochbytes"></a>
            <a class="indexterm" name="idm140091601114224"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxbufferedepochbytes"><code class="literal">MaxBufferedEpochBytes</code></a>
</p>
<div class="table">
<a name="maxbufferedepochbytes-ndbd-table"></a><p class="title"><b>Table 22.113 This table provides type and
value information for the MaxBufferedEpochBytes data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>26214400</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>26214400 (0x01900000) - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The total number of bytes allocated for buffering epochs by
            this node.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-timebetweeninactivetransactionabortcheck"></a>
            <a class="indexterm" name="idm140091601089216"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweeninactivetransactionabortcheck"><code class="literal">TimeBetweenInactiveTransactionAbortCheck</code></a>
</p>
<div class="table">
<a name="timebetweeninactivetransactionabortcheck-ndbd-table"></a><p class="title"><b>Table 22.114 This table provides type and
value information for the TimeBetweenInactiveTransactionAbortCheck data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>milliseconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>1000</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1000 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Timeout handling is performed by checking a timer on each
            transaction once for every interval specified by this
            parameter. Thus, if this parameter is set to 1000
            milliseconds, every transaction will be checked for timing
            out once per second.
          </p><p>
            The default value is 1000 milliseconds (1 second).
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-transactioninactivetimeout"></a>
            <a class="indexterm" name="idm140091601063408"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-transactioninactivetimeout"><code class="literal">TransactionInactiveTimeout</code></a>
</p>
<div class="table">
<a name="transactioninactivetimeout-ndbd-table"></a><p class="title"><b>Table 22.115 This table provides type and
value information for the TransactionInactiveTimeout data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>milliseconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[see text]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter states the maximum time that is permitted to
            lapse between operations in the same transaction before the
            transaction is aborted.
          </p><p>
            The default for this parameter is <code class="literal">4G</code>
            (also the maximum). For a real-time database that needs to
            ensure that no transaction keeps locks for too long, this
            parameter should be set to a relatively small value. Setting
            it to 0 means that the application never times out. The unit
            is milliseconds.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-transactiondeadlockdetectiontimeout"></a>
            <a class="indexterm" name="idm140091601036896"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-transactiondeadlockdetectiontimeout"><code class="literal">TransactionDeadlockDetectionTimeout</code></a>
</p>
<div class="table">
<a name="transactiondeadlockdetectiontimeout-ndbd-table"></a><p class="title"><b>Table 22.116 This table provides type and
value information for the TransactionDeadlockDetectionTimeout data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>milliseconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>1200</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>50 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            When a node executes a query involving a transaction, the
            node waits for the other nodes in the cluster to respond
            before continuing. This parameter sets the amount of time
            that the transaction can spend executing within a data node,
            that is, the time that the transaction coordinator waits for
            each data node participating in the transaction to execute a
            request.
          </p><p>
            A failure to respond can occur for any of the following
            reasons:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                The node is <span class="quote">“<span class="quote">dead</span>”</span>
              </p></li><li class="listitem"><p>
                The operation has entered a lock queue
              </p></li><li class="listitem"><p>
                The node requested to perform the action could be
                heavily overloaded.
</p></li></ul>
</div>
<p>
            This timeout parameter states how long the transaction
            coordinator waits for query execution by another node before
            aborting the transaction, and is important for both node
            failure handling and deadlock detection.
          </p><p>
            The default timeout value is 1200 milliseconds (1.2
            seconds).
          </p><p>
            The minimum for this parameter is 50 milliseconds.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-disksyncsize"></a>
            <a class="indexterm" name="idm140091601006000"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-disksyncsize"><code class="literal">DiskSyncSize</code></a>
</p>
<div class="table">
<a name="disksyncsize-ndbd-table"></a><p class="title"><b>Table 22.117 This table provides type and
value information for the DiskSyncSize data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>4M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>32K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This is the maximum number of bytes to store before flushing
            data to a local checkpoint file. This is done to prevent
            write buffering, which can impede performance significantly.
            This parameter is <span class="emphasis"><em>not</em></span> intended to take
            the place of
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenlocalcheckpoints"><code class="literal">TimeBetweenLocalCheckpoints</code></a>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              When <a class="link" href="mysql-cluster.html#ndbparam-ndbd-odirect"><code class="literal">ODirect</code></a> is
              enabled, it is not necessary to set
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-disksyncsize"><code class="literal">DiskSyncSize</code></a>; in
              fact, in such cases its value is simply ignored.
</p>
</div>
<p>
            The default value is 4M (4 megabytes).
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxdiskwritespeed"></a>
            <a class="indexterm" name="idm140091600975376"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdiskwritespeed"><code class="literal">MaxDiskWriteSpeed</code></a>
</p>
<div class="table">
<a name="maxdiskwritespeed-ndbd-table"></a><p class="title"><b>Table 22.118 This table provides type and
value information for the MaxDiskWriteSpeed data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>20M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1M - 1024G</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Set the maximum rate for writing to disk, in bytes per
            second, by local checkpoints and backup operations when no
            restarts (by this data node or any other data node) are
            taking place in this NDB Cluster.
          </p><p>
            For setting the maximum rate of disk writes allowed while
            this data node is restarting, use
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdiskwritespeedownrestart"><code class="literal">MaxDiskWriteSpeedOwnRestart</code></a>.
            For setting the maximum rate of disk writes allowed while
            other data nodes are restarting, use
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdiskwritespeedothernoderestart"><code class="literal">MaxDiskWriteSpeedOtherNodeRestart</code></a>.
            The minimum speed for disk writes by all LCPs and backup
            operations can be adjusted by setting
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-mindiskwritespeed"><code class="literal">MinDiskWriteSpeed</code></a>.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxdiskwritespeedothernoderestart"></a>
            <a class="indexterm" name="idm140091600945552"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdiskwritespeedothernoderestart"><code class="literal">MaxDiskWriteSpeedOtherNodeRestart</code></a>
</p>
<div class="table">
<a name="maxdiskwritespeedothernoderestart-ndbd-table"></a><p class="title"><b>Table 22.119 This table provides type and
value information for the MaxDiskWriteSpeedOtherNodeRestart data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>50M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1M - 1024G</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Set the maximum rate for writing to disk, in bytes per
            second, by local checkpoints and backup operations when one
            or more data nodes in this NDB Cluster are restarting, other
            than this node.
          </p><p>
            For setting the maximum rate of disk writes allowed while
            this data node is restarting, use
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdiskwritespeedownrestart"><code class="literal">MaxDiskWriteSpeedOwnRestart</code></a>.
            For setting the maximum rate of disk writes allowed when no
            data nodes are restarting anywhere in the cluster, use
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdiskwritespeed"><code class="literal">MaxDiskWriteSpeed</code></a>.
            The minimum speed for disk writes by all LCPs and backup
            operations can be adjusted by setting
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-mindiskwritespeed"><code class="literal">MinDiskWriteSpeed</code></a>.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxdiskwritespeedownrestart"></a>
            <a class="indexterm" name="idm140091600915696"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdiskwritespeedownrestart"><code class="literal">MaxDiskWriteSpeedOwnRestart</code></a>
</p>
<div class="table">
<a name="maxdiskwritespeedownrestart-ndbd-table"></a><p class="title"><b>Table 22.120 This table provides type and
value information for the MaxDiskWriteSpeedOwnRestart data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>200M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1M - 1024G</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Set the maximum rate for writing to disk, in bytes per
            second, by local checkpoints and backup operations while
            this data node is restarting.
          </p><p>
            For setting the maximum rate of disk writes allowed while
            other data nodes are restarting, use
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdiskwritespeedothernoderestart"><code class="literal">MaxDiskWriteSpeedOtherNodeRestart</code></a>.
            For setting the maximum rate of disk writes allowed when no
            data nodes are restarting anywhere in the cluster, use
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdiskwritespeed"><code class="literal">MaxDiskWriteSpeed</code></a>.
            The minimum speed for disk writes by all LCPs and backup
            operations can be adjusted by setting
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-mindiskwritespeed"><code class="literal">MinDiskWriteSpeed</code></a>.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-mindiskwritespeed"></a>
            <a class="indexterm" name="idm140091600886048"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-mindiskwritespeed"><code class="literal">MinDiskWriteSpeed</code></a>
</p>
<div class="table">
<a name="mindiskwritespeed-ndbd-table"></a><p class="title"><b>Table 22.121 This table provides type and
value information for the MinDiskWriteSpeed data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>10M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1M - 1024G</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Set the minimum rate for writing to disk, in bytes per
            second, by local checkpoints and backup operations.
          </p><p>
            The maximum rates of disk writes allowed for LCPs and
            backups under various conditions are adjustable using the
            parameters
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdiskwritespeed"><code class="literal">MaxDiskWriteSpeed</code></a>,
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdiskwritespeedownrestart"><code class="literal">MaxDiskWriteSpeedOwnRestart</code></a>,
            and
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdiskwritespeedothernoderestart"><code class="literal">MaxDiskWriteSpeedOtherNodeRestart</code></a>.
            See the descriptions of these parameters for more
            information.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-arbitrationtimeout"></a>
            <a class="indexterm" name="idm140091600856512"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-arbitrationtimeout"><code class="literal">ArbitrationTimeout</code></a>
</p>
<div class="table">
<a name="arbitrationtimeout-ndbd-table"></a><p class="title"><b>Table 22.122 This table provides type and
value information for the ArbitrationTimeout data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>milliseconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>7500</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>10 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter specifies how long data nodes wait for a
            response from the arbitrator to an arbitration message. If
            this is exceeded, the network is assumed to have split.
          </p><p>
            The default value is 7500 milliseconds (7.5 seconds).
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-arbitration"></a>
            <a class="indexterm" name="idm140091600831024"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-arbitration"><code class="literal">Arbitration</code></a>
</p>
<div class="table">
<a name="arbitration-ndbd-table"></a><p class="title"><b>Table 22.123 This table provides type and
value information for the Arbitration data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>enumeration</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>Default</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>Default, Disabled, WaitExternal</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The <a class="link" href="mysql-cluster.html#ndbparam-ndbd-arbitration"><code class="literal">Arbitration</code></a>
            parameter enables a choice of arbitration schemes,
            corresponding to one of 3 possible values for this
            parameter:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><b>Default. </b>
                  This enables arbitration to proceed normally, as
                  determined by the <code class="literal">ArbitrationRank</code>
                  settings for the management and API nodes. This is the
                  default value.
                </p></li><li class="listitem"><p><b>Disabled. </b>
                  Setting <code class="literal">Arbitration = Disabled</code> in
                  the <code class="literal">[ndbd default]</code> section of the
                  <code class="filename">config.ini</code> file to accomplishes
                  the same task as setting
                  <code class="literal">ArbitrationRank</code> to 0 on all
                  management and API nodes. When
                  <code class="literal">Arbitration</code> is set in this way, any
                  <code class="literal">ArbitrationRank</code> settings are
                  ignored.
                </p></li><li class="listitem"><p><b>WaitExternal. </b>
                  The
                  <a class="link" href="mysql-cluster.html#ndbparam-ndbd-arbitration"><code class="literal">Arbitration</code></a>
                  parameter also makes it possible to configure
                  arbitration in such a way that the cluster waits until
                  after the time determined by
                  <a class="link" href="mysql-cluster.html#ndbparam-ndbd-arbitrationtimeout"><code class="literal">ArbitrationTimeout</code></a>
                  has passed for an external cluster manager application
                  to perform arbitration instead of handling arbitration
                  internally. This can be done by setting
                  <code class="literal">Arbitration = WaitExternal</code> in the
                  <code class="literal">[ndbd default]</code> section of the
                  <code class="filename">config.ini</code> file. For best results
                  with the <code class="literal">WaitExternal</code> setting, it
                  is recommended that
                  <a class="link" href="mysql-cluster.html#ndbparam-ndbd-arbitrationtimeout"><code class="literal">ArbitrationTimeout</code></a>
                  be 2 times as long as the interval required by the
                  external cluster manager to perform arbitration.
</p></li></ul>
</div>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Important
</div>
<p>
              This parameter should be used only in the <code class="literal">[ndbd
              default]</code> section of the cluster configuration
              file. The behavior of the cluster is unspecified when
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-arbitration"><code class="literal">Arbitration</code></a> is set
              to different values for individual data nodes.
</p>
</div>
</li><li class="listitem"><p><a name="ndbparam-ndbd-restartsubscriberconnecttimeout"></a>
            <a class="indexterm" name="idm140091600783696"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-restartsubscriberconnecttimeout"><code class="literal">RestartSubscriberConnectTimeout</code></a>
</p>
<div class="table">
<a name="restartsubscriberconnecttimeout-ndbd-table"></a><p class="title"><b>Table 22.124 This table provides type and
value information for the RestartSubscriberConnectTimeout data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>ms</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>12000</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter determines the time that a data node waits
            for subscribing API nodes to connect. Once this timeout
            expires, any <span class="quote">“<span class="quote">missing</span>”</span> API nodes are
            disconnected from the cluster. To disable this timeout, set
            <code class="literal">RestartSubscriberConnectTimeout</code> to 0.
          </p><p>
            While this parameter is specified in milliseconds, the
            timeout itself is resolved to the next-greatest whole
            second.
</p></li></ul>
</div>
<p><a name="mysql-cluster-buffering-and-logging"></a><b>Buffering and logging. </b>
          Several <code class="literal">[ndbd]</code> configuration parameters
          enable the advanced user to have more control over the
          resources used by node processes and to adjust various buffer
          sizes at need.
        </p><p>
        These buffers are used as front ends to the file system when
        writing log records to disk. If the node is running in diskless
        mode, these parameters can be set to their minimum values
        without penalty due to the fact that disk writes are
        <span class="quote">“<span class="quote">faked</span>”</span> by the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>
        storage engine's file system abstraction layer.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-undoindexbuffer"></a>
            <a class="indexterm" name="idm140091600751424"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-undoindexbuffer"><code class="literal">UndoIndexBuffer</code></a>
</p>
<div class="table">
<a name="undoindexbuffer-ndbd-table"></a><p class="title"><b>Table 22.125 This table provides type and
value information for the UndoIndexBuffer data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>2M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1M - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The UNDO index buffer, whose size is set by this parameter,
            is used during local checkpoints. The
            <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine uses a
            recovery scheme based on checkpoint consistency in
            conjunction with an operational REDO log. To produce a
            consistent checkpoint without blocking the entire system for
            writes, UNDO logging is done while performing the local
            checkpoint. UNDO logging is activated on a single table
            fragment at a time. This optimization is possible because
            tables are stored entirely in main memory.
          </p><p>
            The UNDO index buffer is used for the updates on the primary
            key hash index. Inserts and deletes rearrange the hash
            index; the NDB storage engine writes UNDO log records that
            map all physical changes to an index page so that they can
            be undone at system restart. It also logs all active insert
            operations for each fragment at the start of a local
            checkpoint.
          </p><p>
            Reads and updates set lock bits and update a header in the
            hash index entry. These changes are handled by the
            page-writing algorithm to ensure that these operations need
            no UNDO logging.
          </p><p>
            This buffer is 2MB by default. The minimum value is 1MB,
            which is sufficient for most applications. For applications
            doing extremely large or numerous inserts and deletes
            together with large transactions and large primary keys, it
            may be necessary to increase the size of this buffer. If
            this buffer is too small, the NDB storage engine issues
            internal error code 677 (<code class="literal">Index UNDO buffers
            overloaded</code>).
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              It is not safe to decrease the value of this parameter
              during a rolling restart.
</p>
</div>
</li><li class="listitem"><p><a name="ndbparam-ndbd-undodatabuffer"></a>
            <a class="indexterm" name="idm140091600720768"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-undodatabuffer"><code class="literal">UndoDataBuffer</code></a>
</p>
<div class="table">
<a name="undodatabuffer-ndbd-table"></a><p class="title"><b>Table 22.126 This table provides type and
value information for the UndoDataBuffer data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>16M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1M - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter sets the size of the UNDO data buffer, which
            performs a function similar to that of the UNDO index
            buffer, except the UNDO data buffer is used with regard to
            data memory rather than index memory. This buffer is used
            during the local checkpoint phase of a fragment for inserts,
            deletes, and updates.
          </p><p>
            Because UNDO log entries tend to grow larger as more
            operations are logged, this buffer is also larger than its
            index memory counterpart, with a default value of 16MB.
          </p><p>
            This amount of memory may be unnecessarily large for some
            applications. In such cases, it is possible to decrease this
            size to a minimum of 1MB.
          </p><p>
            It is rarely necessary to increase the size of this buffer.
            If there is such a need, it is a good idea to check whether
            the disks can actually handle the load caused by database
            update activity. A lack of sufficient disk space cannot be
            overcome by increasing the size of this buffer.
          </p><p>
            If this buffer is too small and gets congested, the NDB
            storage engine issues internal error code 891
            (<span class="errortext">Data UNDO buffers overloaded</span>).
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              It is not safe to decrease the value of this parameter
              during a rolling restart.
</p>
</div>
</li><li class="listitem"><p><a name="ndbparam-ndbd-redobuffer"></a>
            <a class="indexterm" name="idm140091600691696"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-redobuffer"><code class="literal">RedoBuffer</code></a>
</p>
<div class="table">
<a name="redobuffer-ndbd-table"></a><p class="title"><b>Table 22.127 This table provides type and
value information for the RedoBuffer data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>32M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1M - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            All update activities also need to be logged. The REDO log
            makes it possible to replay these updates whenever the
            system is restarted. The NDB recovery algorithm uses a
            <span class="quote">“<span class="quote">fuzzy</span>”</span> checkpoint of the data together with
            the UNDO log, and then applies the REDO log to play back all
            changes up to the restoration point.
          </p><p>
            <code class="literal">RedoBuffer</code> sets the size of the buffer in
            which the REDO log is written. The default value is 32MB;
            the minimum value is 1MB.
          </p><p>
            If this buffer is too small, the
            <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine issues error
            code 1221 (<span class="errortext">REDO log buffers
            overloaded</span>). For this reason, you should
            exercise care if you attempt to decrease the value of
            <code class="literal">RedoBuffer</code> as part of an online change in
            the cluster's configuration.
          </p><p>
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> allocates a separate buffer for
            each LDM thread (see
            <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-threadconfig"><code class="literal">ThreadConfig</code></a>). For
            example, with 4 LDM threads, an <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>
            data node actually has 4 buffers and allocates
            <code class="literal">RedoBuffer</code> bytes to each one, for a total
            of <code class="literal">4 * RedoBuffer</code> bytes.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-eventlogbuffersize"></a>
            <a class="indexterm" name="idm140091600656032"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-eventlogbuffersize"><code class="literal">EventLogBufferSize</code></a>
</p>
<div class="table">
<a name="eventlogbuffersize-ndbd-table"></a><p class="title"><b>Table 22.128 This table provides type and
value information for the EventLogBufferSize data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>8192</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 64K</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Controls the size of the circular buffer used for NDB log
            events within data nodes.
</p></li></ul>
</div>
<p><a name="mysql-cluster-controlling-log-messages"></a><b>Controlling log messages. </b>
          In managing the cluster, it is very important to be able to
          control the number of log messages sent for various event
          types to <code class="literal">stdout</code>. For each event category,
          there are 16 possible event levels (numbered 0 through 15).
          Setting event reporting for a given event category to level 15
          means all event reports in that category are sent to
          <code class="literal">stdout</code>; setting it to 0 means that there
          will be no event reports made in that category.
        </p><p>
        By default, only the startup message is sent to
        <code class="literal">stdout</code>, with the remaining event reporting
        level defaults being set to 0. The reason for this is that these
        messages are also sent to the management server's cluster log.
      </p><p>
        An analogous set of levels can be set for the management client
        to determine which event levels to record in the cluster log.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-loglevelstartup"></a>
            <a class="indexterm" name="idm140091600625216"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelstartup"><code class="literal">LogLevelStartup</code></a>
</p>
<div class="table">
<a name="loglevelstartup-ndbd-table"></a><p class="title"><b>Table 22.129 This table provides type and
value information for the LogLevelStartup data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>1</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 15</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The reporting level for events generated during startup of
            the process.
          </p><p>
            The default level is 1.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-loglevelshutdown"></a>
            <a class="indexterm" name="idm140091600599936"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelshutdown"><code class="literal">LogLevelShutdown</code></a>
</p>
<div class="table">
<a name="loglevelshutdown-ndbd-table"></a><p class="title"><b>Table 22.130 This table provides type and
value information for the LogLevelShutdown data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 15</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The reporting level for events generated as part of graceful
            shutdown of a node.
          </p><p>
            The default level is 0.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-loglevelstatistic"></a>
            <a class="indexterm" name="idm140091600574592"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelstatistic"><code class="literal">LogLevelStatistic</code></a>
</p>
<div class="table">
<a name="loglevelstatistic-ndbd-table"></a><p class="title"><b>Table 22.131 This table provides type and
value information for the LogLevelStatistic data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 15</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The reporting level for statistical events such as number of
            primary key reads, number of updates, number of inserts,
            information relating to buffer usage, and so on.
          </p><p>
            The default level is 0.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-loglevelcheckpoint"></a>
            <a class="indexterm" name="idm140091600549152"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelcheckpoint"><code class="literal">LogLevelCheckpoint</code></a>
</p>
<div class="table">
<a name="loglevelcheckpoint-ndbd-table"></a><p class="title"><b>Table 22.132 This table provides type and
value information for the LogLevelCheckpoint data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>log level</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 15</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The reporting level for events generated by local and global
            checkpoints.
          </p><p>
            The default level is 0.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-loglevelnoderestart"></a>
            <a class="indexterm" name="idm140091600523808"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelnoderestart"><code class="literal">LogLevelNodeRestart</code></a>
</p>
<div class="table">
<a name="loglevelnoderestart-ndbd-table"></a><p class="title"><b>Table 22.133 This table provides type and
value information for the LogLevelNodeRestart data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 15</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The reporting level for events generated during node
            restart.
          </p><p>
            The default level is 0.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-loglevelconnection"></a>
            <a class="indexterm" name="idm140091600498512"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelconnection"><code class="literal">LogLevelConnection</code></a>
</p>
<div class="table">
<a name="loglevelconnection-ndbd-table"></a><p class="title"><b>Table 22.134 This table provides type and
value information for the LogLevelConnection data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 15</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The reporting level for events generated by connections
            between cluster nodes.
          </p><p>
            The default level is 0.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-loglevelerror"></a>
            <a class="indexterm" name="idm140091600473168"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelerror"><code class="literal">LogLevelError</code></a>
</p>
<div class="table">
<a name="loglevelerror-ndbd-table"></a><p class="title"><b>Table 22.135 This table provides type and
value information for the LogLevelError data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 15</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The reporting level for events generated by errors and
            warnings by the cluster as a whole. These errors do not
            cause any node failure but are still considered worth
            reporting.
          </p><p>
            The default level is 0.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-loglevelcongestion"></a>
            <a class="indexterm" name="idm140091600447712"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelcongestion"><code class="literal">LogLevelCongestion</code></a>
</p>
<div class="table">
<a name="loglevelcongestion-ndbd-table"></a><p class="title"><b>Table 22.136 This table provides type and
value information for the LogLevelCongestion data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>level</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 15</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The reporting level for events generated by congestion.
            These errors do not cause node failure but are still
            considered worth reporting.
          </p><p>
            The default level is 0.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-loglevelinfo"></a>
            <a class="indexterm" name="idm140091600422288"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelinfo"><code class="literal">LogLevelInfo</code></a>
</p>
<div class="table">
<a name="loglevelinfo-ndbd-table"></a><p class="title"><b>Table 22.137 This table provides type and
value information for the LogLevelInfo data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 15</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The reporting level for events generated for information
            about the general state of the cluster.
          </p><p>
            The default level is 0.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-memreportfrequency"></a>
            <a class="indexterm" name="idm140091600396976"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-memreportfrequency"><code class="literal">MemReportFrequency</code></a>
</p>
<div class="table">
<a name="memreportfrequency-ndbd-table"></a><p class="title"><b>Table 22.138 This table provides type and
value information for the MemReportFrequency data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter controls how often data node memory usage
            reports are recorded in the cluster log; it is an integer
            value representing the number of seconds between reports.
          </p><p>
            Each data node's data memory and index memory usage is
            logged as both a percentage and a number of 32 KB pages of
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a>, as set
            in the <code class="filename">config.ini</code> file. For example, if
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a> is equal
            to 100 MB, and a given data node is using 50 MB for data
            memory storage, the corresponding line in the cluster log
            might look like this:
          </p><pre data-lang="simple" class="programlisting">
2006-12-24 01:18:16 [MgmSrvr] INFO -- Node 2: Data usage is 50%(1280 32K pages of total 2560)
</pre><p>
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-memreportfrequency"><code class="literal">MemReportFrequency</code></a>
            is not a required parameter. If used, it can be set for all
            cluster data nodes in the <code class="literal">[ndbd default]</code>
            section of <code class="filename">config.ini</code>, and can also be
            set or overridden for individual data nodes in the
            corresponding <code class="literal">[ndbd]</code> sections of the
            configuration file. The minimum value—which is also
            the default value—is 0, in which case memory reports
            are logged only when memory usage reaches certain
            percentages (80%, 90%, and 100%), as mentioned in the
            discussion of statistics events in
            <a class="xref" href="mysql-cluster.html#mysql-cluster-log-events" title="22.5.6.2 NDB Cluster Log Events">Section 22.5.6.2, “NDB Cluster Log Events”</a>.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-startupstatusreportfrequency"></a>
            <a class="indexterm" name="idm140091600361248"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-startupstatusreportfrequency"><code class="literal">StartupStatusReportFrequency</code></a>
</p>
<div class="table">
<a name="startupstatusreportfrequency-ndbd-table"></a><p class="title"><b>Table 22.139 This table provides type and
value information for the StartupStatusReportFrequency data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>seconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            When a data node is started with the
            <a class="link" href="mysql-cluster.html#option_ndbd_initial"><code class="option">--initial</code></a>, it initializes the
            redo log file during Start Phase 4 (see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-start-phases" title="22.5.1 Summary of NDB Cluster Start Phases">Section 22.5.1, “Summary of NDB Cluster Start Phases”</a>). When very
            large values are set for
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-nooffragmentlogfiles"><code class="literal">NoOfFragmentLogFiles</code></a>,
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-fragmentlogfilesize"><code class="literal">FragmentLogFileSize</code></a>,
            or both, this initialization can take a long time.You can
            force reports on the progress of this process to be logged
            periodically, by means of the
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-startupstatusreportfrequency"><code class="literal">StartupStatusReportFrequency</code></a>
            configuration parameter. In this case, progress is reported
            in the cluster log, in terms of both the number of files and
            the amount of space that have been initialized, as shown
            here:
          </p><pre data-lang="simple" class="programlisting">
2009-06-20 16:39:23 [MgmSrvr] INFO -- Node 1: Local redo log file initialization status:
#Total files: 80, Completed: 60
#Total MBytes: 20480, Completed: 15557
2009-06-20 16:39:23 [MgmSrvr] INFO -- Node 2: Local redo log file initialization status:
#Total files: 80, Completed: 60
#Total MBytes: 20480, Completed: 15570
</pre><p>
            These reports are logged each
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-startupstatusreportfrequency"><code class="literal">StartupStatusReportFrequency</code></a>
            seconds during Start Phase 4. If
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-startupstatusreportfrequency"><code class="literal">StartupStatusReportFrequency</code></a>
            is 0 (the default), then reports are written to the cluster
            log only when at the beginning and at the completion of the
            redo log file initialization process.
</p></li></ul>
</div>
<h5><a name="mysql-cluster-data-node-debugging-parameters"></a>Data Node Debugging Parameters</h5>
<p>
        The following parameters are intended for use during testing or
        debugging of data nodes, and not for use in production.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-dicttrace"></a>
            <a class="indexterm" name="idm140091600323296"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-dicttrace"><code class="literal">DictTrace</code></a>
</p>
<div class="table">
<a name="dicttrace-ndbd-table"></a><p class="title"><b>Table 22.140 This table provides type and
value information for the DictTrace data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>undefined</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 100</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            It is possible to cause logging of traces for events
            generated by creating and dropping tables using
            <code class="literal">DictTrace</code>. This parameter is useful only
            in debugging NDB kernel code. <code class="literal">DictTrace</code>
            takes an integer value. 0 is the default, and means no
            logging is performed; 1 enables trace logging, and 2 enables
            logging of additional <code class="literal">DBDICT</code> debugging
            output.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-watchdogimmediatekill"></a>
            <a class="indexterm" name="idm140091600295936"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-watchdogimmediatekill"><code class="literal">WatchdogImmediateKill</code></a>
</p>
<div class="table">
<a name="watchdogimmediatekill-ndbd-table"></a><p class="title"><b>Table 22.141 This table provides type and
value information for the WatchDogImmediateKill data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>boolean</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>true, false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            You can cause threads to be killed immediately whenever
            watchdog issues occur by enabling the
            <code class="literal">WatchdogImmediateKill</code> data node
            configuration parameter. This parameter should be used only
            when debugging or troubleshooting, to obtain trace files
            reporting exactly what was occurring the instant that
            execution ceased.
</p></li></ul>
</div>
<p><a name="mysql-cluster-backup-parameters"></a><b>Backup parameters. </b>
          The <code class="literal">[ndbd]</code> parameters discussed in this
          section define memory buffers set aside for execution of
          online backups.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-backupdatabuffersize"></a>
            <a class="indexterm" name="idm140091600266960"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupdatabuffersize"><code class="literal">BackupDataBufferSize</code></a>
</p>
<div class="table">
<a name="backupdatabuffersize-ndbd-table"></a><p class="title"><b>Table 22.142 This table provides type and
value information for the BackupDataBufferSize data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>16M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>512K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            In creating a backup, there are two buffers used for sending
            data to the disk. The backup data buffer is used to fill in
            data recorded by scanning a node's tables. Once this buffer
            has been filled to the level specified as
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupwritesize"><code class="literal">BackupWriteSize</code></a>, the
            pages are sent to disk. While flushing data to disk, the
            backup process can continue filling this buffer until it
            runs out of space. When this happens, the backup process
            pauses the scan and waits until some disk writes have
            completed freeing up memory so that scanning may continue.
          </p><p>
            The default value for this parameter is 16MB. The minimum is
            512K.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-backupdiskwritespeedpct"></a>
            <a class="indexterm" name="idm140091600239760"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupdiskwritespeedpct"><code class="literal">BackupDiskWriteSpeedPct</code></a>
</p>
<div class="table">
<a name="backupdiskwritespeedpct-ndbd-table"></a><p class="title"><b>Table 22.143 This table provides type and
value information for the BackupDiskWriteSpeedPct data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>percent</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>50</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 90</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            During normal operation, data nodes attempt to maximize the
            disk write speed used for local checkpoints and backups
            while remaining within the bounds set by
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-mindiskwritespeed"><code class="literal">MinDiskWriteSpeed</code></a>
            and
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdiskwritespeed"><code class="literal">MaxDiskWriteSpeed</code></a>.
            Disk write throttling gives each LDM thread an equal share
            of the total budget. This allows parallel LCPs to take place
            without exceeding the disk I/O budget. Because a backup is
            executed by only one LDM thread, this effectively caused a
            budget cut, resulting in longer backup completion times,
            and—if the rate of change is sufficiently
            high—in failure to complete the backup when the backup
            log buffer fill rate is higher than the achievable write
            rate.
          </p><p>
            This problem can be addressed by using the
            <code class="literal">BackupDiskWriteSpeedPct</code> configuration
            parameter, which takes a value in the range 0-90 (inclusive)
            which is interpreted as the percentage of the node's
            maximum write rate budget that is reserved prior to sharing
            out the remainder of the budget among LDM threads for LCPs.
            The LDM thread running the backup receives the whole write
            rate budget for the backup, plus its (reduced) share of the
            write rate budget for local checkpoints.
          </p><p>
            The default value for this parameter is 50 (interpreted as
            50%).
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-backuplogbuffersize"></a>
            <a class="indexterm" name="idm140091600208928"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backuplogbuffersize"><code class="literal">BackupLogBufferSize</code></a>
</p>
<div class="table">
<a name="backuplogbuffersize-ndbd-table"></a><p class="title"><b>Table 22.144 This table provides type and
value information for the BackupLogBufferSize data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>16M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>2M - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The backup log buffer fulfills a role similar to that played
            by the backup data buffer, except that it is used for
            generating a log of all table writes made during execution
            of the backup. The same principles apply for writing these
            pages as with the backup data buffer, except that when there
            is no more space in the backup log buffer, the backup fails.
            For that reason, the size of the backup log buffer must be
            large enough to handle the load caused by write activities
            while the backup is being made. See
            <a class="xref" href="mysql-cluster.html#mysql-cluster-backup-configuration" title="22.5.3.3 Configuration for NDB Cluster Backups">Section 22.5.3.3, “Configuration for NDB Cluster Backups”</a>.
          </p><p>
            The default value for this parameter should be sufficient
            for most applications. In fact, it is more likely for a
            backup failure to be caused by insufficient disk write speed
            than it is for the backup log buffer to become full. If the
            disk subsystem is not configured for the write load caused
            by applications, the cluster is unlikely to be able to
            perform the desired operations.
          </p><p>
            It is preferable to configure cluster nodes in such a manner
            that the processor becomes the bottleneck rather than the
            disks or the network connections.
          </p><p>
            The default value for this parameter is 16MB.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-backupmemory"></a>
            <a class="indexterm" name="idm140091600180896"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupmemory"><code class="literal">BackupMemory</code></a>
</p>
<div class="table">
<a name="backupmemory-ndbd-table"></a><p class="title"><b>Table 22.145 This table provides type and
value information for the BackupMemory data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>32M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter is deprecated, and subject to removal in a
            future version of NDB Cluster. Any setting made for it is
            ignored.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-backupreportfrequency"></a>
            <a class="indexterm" name="idm140091600155968"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupreportfrequency"><code class="literal">BackupReportFrequency</code></a>
</p>
<div class="table">
<a name="backupreportfrequency-ndbd-table"></a><p class="title"><b>Table 22.146 This table provides type and
value information for the BackupReportFrequency data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>seconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter controls how often backup status reports are
            issued in the management client during a backup, as well as
            how often such reports are written to the cluster log
            (provided cluster event logging is configured to permit
            it—see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-logging-and-checkpointing" title="Logging and checkpointing">Logging and checkpointing</a>).
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupreportfrequency"><code class="literal">BackupReportFrequency</code></a>
            represents the time in seconds between backup status
            reports.
          </p><p>
            The default value is 0.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-backupwritesize"></a>
            <a class="indexterm" name="idm140091600127920"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupwritesize"><code class="literal">BackupWriteSize</code></a>
</p>
<div class="table">
<a name="backupwritesize-ndbd-table"></a><p class="title"><b>Table 22.147 This table provides type and
value information for the BackupWriteSize data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>256K</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>32K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter specifies the default size of messages
            written to disk by the backup log and backup data buffers.
          </p><p>
            The default value for this parameter is 256KB.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-backupmaxwritesize"></a>
            <a class="indexterm" name="idm140091600102480"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupmaxwritesize"><code class="literal">BackupMaxWriteSize</code></a>
</p>
<div class="table">
<a name="backupmaxwritesize-ndbd-table"></a><p class="title"><b>Table 22.148 This table provides type and
value information for the BackupMaxWriteSize data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>1M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>256K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter specifies the maximum size of messages
            written to disk by the backup log and backup data buffers.
          </p><p>
            The default value for this parameter is 1MB.
</p></li></ul>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Note
</div>
<p>
          The location of the backup files is determined by the
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupdatadir"><code class="literal">BackupDataDir</code></a> data
          node configuration parameter.
</p>
</div>
<p><b>Additional requirements. </b>
          When specifying these parameters, the following relationships
          must hold true. Otherwise, the data node will be unable to
          start.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">BackupDataBufferSize &gt;= BackupWriteSize +
            188KB</code>
          </p></li><li class="listitem"><p>
            <code class="literal">BackupLogBufferSize &gt;= BackupWriteSize +
            16KB</code>
          </p></li><li class="listitem"><p>
            <code class="literal">BackupMaxWriteSize &gt;= BackupWriteSize</code>
</p></li></ul>
</div>
<h5><a name="mysql-cluster-realtime-performance-parameters"></a>NDB Cluster Realtime Performance Parameters</h5>
<p>
        The <code class="literal">[ndbd]</code> parameters discussed in this
        section are used in scheduling and locking of threads to
        specific CPUs on multiprocessor data node hosts.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          To make use of these parameters, the data node process must be
          run as system root.
</p>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-lockexecutethreadtocpu"></a>
            <a class="indexterm" name="idm140091600064624"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-lockexecutethreadtocpu"><code class="literal">LockExecuteThreadToCPU</code></a>
</p>
<div class="table">
<a name="lockexecutethreadtocpu-ndbd-table"></a><p class="title"><b>Table 22.149 This table provides type and
value information for the LockExecuteThreadToCPU data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>set of CPU IDs</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            When used with <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>, this parameter (now
            a string) specifies the ID of the CPU assigned to handle the
            <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> execution thread.
            When used with <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>, the value of this
            parameter is a comma-separated list of CPU IDs assigned to
            handle execution threads. Each CPU ID in the list should be
            an integer in the range 0 to 65535 (inclusive).
          </p><p>
            The number of IDs specified should match the number of
            execution threads determined by
            <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-maxnoofexecutionthreads"><code class="literal">MaxNoOfExecutionThreads</code></a>.
            However, there is no guarantee that threads are assigned to
            CPUs in any given order when using this parameter. You can
            obtain more finely-grained control of this type using
            <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-threadconfig"><code class="literal">ThreadConfig</code></a>.
          </p><p>
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-lockexecutethreadtocpu"><code class="literal">LockExecuteThreadToCPU</code></a>
            has no default value.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-lockmaintthreadstocpu"></a>
            <a class="indexterm" name="idm140091600030848"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-lockmaintthreadstocpu"><code class="literal">LockMaintThreadsToCPU</code></a>
</p>
<div class="table">
<a name="lockmaintthreadstocpu-ndbd-table"></a><p class="title"><b>Table 22.150 This table provides type and
value information for the LockMaintThreadsToCPU data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>CPU ID</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 64K</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter specifies the ID of the CPU assigned to
            handle <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> maintenance
            threads.
          </p><p>
            The value of this parameter is an integer in the range 0 to
            65535 (inclusive). <span class="emphasis"><em>There is no default
            value</em></span>.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-realtimescheduler"></a>
            <a class="indexterm" name="idm140091600003744"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-realtimescheduler"><code class="literal">RealtimeScheduler</code></a>
</p>
<div class="table">
<a name="realtimescheduler-ndbd-table"></a><p class="title"><b>Table 22.151 This table provides type and
value information for the RealtimeScheduler data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>boolean</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>true, false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Setting this parameter to 1 enables real-time scheduling of
            data node threads.
          </p><p>
            The default is 0 (scheduling disabled).
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-schedulerexecutiontimer"></a>
            <a class="indexterm" name="idm140091599978352"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-schedulerexecutiontimer"><code class="literal">SchedulerExecutionTimer</code></a>
</p>
<div class="table">
<a name="schedulerexecutiontimer-ndbd-table"></a><p class="title"><b>Table 22.152 This table provides type and
value information for the SchedulerExecutionTimer data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>µs</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>50</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 11000</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter specifies the time in microseconds for
            threads to be executed in the scheduler before being sent.
            Setting it to 0 minimizes the response time; to achieve
            higher throughput, you can increase the value at the expense
            of longer response times.
          </p><p>
            The default is 50 μsec, which our testing shows to
            increase throughput slightly in high-load cases without
            materially delaying requests.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-schedulerresponsiveness"></a>
            <a class="indexterm" name="idm140091599952464"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-schedulerresponsiveness"><code class="literal">SchedulerResponsiveness</code></a>
</p>
<div class="table">
<a name="schedulerresponsiveness-ndbd-table"></a><p class="title"><b>Table 22.153 This table provides type and
value information for the SchedulerResponsiveness data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>5</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 10</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Set the balance in the <code class="literal">NDB</code> scheduler
            between speed and throughput. This parameter takes an
            integer whose value is in the range 0-10 inclusive, with 5
            as the default. Higher values provide better response times
            relative to throughput. Lower values provide increased
            throughput at the expense of longer response times.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-schedulerspintimer"></a>
            <a class="indexterm" name="idm140091599926672"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-schedulerspintimer"><code class="literal">SchedulerSpinTimer</code></a>
</p>
<div class="table">
<a name="schedulerspintimer-ndbd-table"></a><p class="title"><b>Table 22.154 This table provides type and
value information for the SchedulerSpinTimer data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>µs</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 500</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter specifies the time in microseconds for
            threads to be executed in the scheduler before sleeping.
          </p><p>
            The default value is 0.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-buildindexthreads"></a>
            <a class="indexterm" name="idm140091599901296"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-buildindexthreads"><code class="literal">BuildIndexThreads</code></a>
</p>
<div class="table">
<a name="buildindexthreads-ndbd-table"></a><p class="title"><b>Table 22.155 This table provides type and
value information for the BuildIndexThreads data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>128</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 128</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter determines the number of threads to create
            when rebuilding ordered indexes during a system or node
            start, as well as when running
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>
            <a class="link" href="mysql-cluster.html#option_ndb_restore_rebuild-indexes"><code class="option">--rebuild-indexes</code></a>. It is
            supported only when there is more than one fragment for the
            table per data node (for example, when
            <code class="literal">COMMENT="NDB_TABLE=PARTITION_BALANCE=FOR_RA_BY_LDM_X_2"</code>
            is used with <a class="link" href="sql-syntax.html#create-table" title="13.1.20 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>).
          </p><p>
            Setting this parameter to 0 (the default) disables
            multithreaded building of ordered indexes.
          </p><p>
            This parameter is supported when using
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> or <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>.
          </p><p>
            You can enable multithreaded builds during data node initial
            restarts by setting the
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-twopassinitialnoderestartcopy"><code class="literal">TwoPassInitialNodeRestartCopy</code></a>
            data node configuration parameter to
            <code class="literal">TRUE</code>.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-twopassinitialnoderestartcopy"></a>
            <a class="indexterm" name="idm140091599865840"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-twopassinitialnoderestartcopy"><code class="literal">TwoPassInitialNodeRestartCopy</code></a>
</p>
<div class="table">
<a name="twopassinitialnoderestartcopy-ndbd-table"></a><p class="title"><b>Table 22.156 This table provides type and
value information for the TwoPassInitialNodeRestartCopy data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>boolean</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>true</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>true, false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Multithreaded building of ordered indexes can be enabled for
            initial restarts of data nodes by setting this configuration
            parameter to <code class="literal">true</code> (the default value),
            which enables two-pass copying of data during initial node
            restarts.
          </p><p>
            You must also set
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-buildindexthreads"><code class="literal">BuildIndexThreads</code></a> to
            a nonzero value.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-numa"></a>
            <a class="indexterm" name="idm140091599838192"></a>

            <a class="indexterm" name="idm140091599837152"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-numa"><code class="literal">Numa</code></a>
</p>
<div class="table">
<a name="numa-ndbd-table"></a><p class="title"><b>Table 22.157 This table provides type and
value information for the Numa data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>1</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter determines whether Non-Uniform Memory Access
            (NUMA) is controlled by the operating system or by the data
            node process, whether the data node uses
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> or <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>. By
            default, <code class="literal">NDB</code> attempts to use an
            interleaved NUMA memory allocation policy on any data node
            where the host operating system provides NUMA support.
          </p><p>
            Setting <code class="literal">Numa = 0</code> means that the datanode
            process does not itself attempt to set a policy for memory
            allocation, and permits this behavior to be determined by
            the operating system, which may be further guided by the
            separate <span class="command"><strong>numactl</strong></span> tool. That is,
            <code class="literal">Numa = 0</code> yields the system default
            behavior, which can be customised by
            <span class="command"><strong>numactl</strong></span>. For many Linux systems, the
            system default behavior is to allocate socket-local memory
            to any given process at allocation time. This can be
            problematic when using <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>; this is
            because <span class="command"><strong>nbdmtd</strong></span> allocates all memory at
            startup, leading to an imbalance, giving different access
            speeds for different sockets, especially when locking pages
            in main memory.
          </p><p>
            Setting <code class="literal">Numa = 1</code> means that the data node
            process uses <code class="literal">libnuma</code> to request
            interleaved memory allocation. (This can also be
            accomplished manually, on the operating system level, using
            <span class="command"><strong>numactl</strong></span>.) Using interleaved allocation in
            effect tells the data node process to ignore non-uniform
            memory access but does not attempt to take any advantage of
            fast local memory; instead, the data node process tries to
            avoid imbalances due to slow remote memory. If interleaved
            allocation is not desired, set <code class="literal">Numa</code> to 0
            so that the desired behavior can be determined on the
            operating system level.
          </p><p>
            The <code class="literal">Numa</code> configuration parameter is
            supported only on Linux systems where
            <code class="filename">libnuma.so</code> is available.
</p></li></ul>
</div>
<p><a name="mysql-cluster-ndbd-definition-ndbmtd-parameters"></a><b>Multi-Threading Configuration Parameters (ndbmtd). </b>
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> runs by default as a single-threaded
          process and must be configured to use multiple threads, using
          either of two methods, both of which require setting
          configuration parameters in the
          <code class="filename">config.ini</code> file. The first method is
          simply to set an appropriate value for the
          <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-maxnoofexecutionthreads"><code class="literal">MaxNoOfExecutionThreads</code></a>
          configuration parameter. A second method, makes it possible to
          set up more complex rules for <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>
          multithreading using
          <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-threadconfig"><code class="literal">ThreadConfig</code></a>. The
          next few paragraphs provide information about these parameters
          and their use with multithreaded data nodes.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          A backup using parallelism on the data nodes requires that
          multiple LDMs are in use on all data nodes in the cluster
          prior to taking the backup. For more information, see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-backup-parallel-data-nodes" title="22.5.3.5 Taking an NDB with Parallel Data Nodes">Section 22.5.3.5, “Taking an NDB with Parallel Data Nodes”</a>, as
          well as
          <a class="xref" href="mysql-cluster.html#ndb-restore-parallel-data-node-backup" title="22.4.23.2 Restoring from a backup taken in parallel">Section 22.4.23.2, “Restoring from a backup taken in parallel”</a>.
</p>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbmtd-maxnoofexecutionthreads"></a>
            <a class="indexterm" name="idm140091599785536"></a>

            <a class="indexterm" name="idm140091599784496"></a>

            <a class="indexterm" name="idm140091599783008"></a>

            <a class="indexterm" name="idm140091599781520"></a>

            <code class="literal">MaxNoOfExecutionThreads</code>
</p>
<div class="table">
<a name="maxnoofexecutionthreads-ndbmtd-table"></a><p class="title"><b>Table 22.158 This table provides type and
value information for the MaxNoOfExecutionThreads multi-threaded data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>2</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>2 - 72</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter directly controls the number of execution
            threads used by <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>, up to a maximum
            of 72. Although this parameter is set in
            <code class="literal">[ndbd]</code> or <code class="literal">[ndbd
            default]</code> sections of the
            <code class="filename">config.ini</code> file, it is exclusive to
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> and does not apply to
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>.
          </p><p>
            Setting <code class="literal">MaxNoOfExecutionThreads</code> sets the
            number of threads for each type as determined by a matrix in
            the file
            <code class="filename">storage/ndb/src/kernel/vm/mt_thr_config.cpp</code>.
            This table shows these numbers of threads for possible
            values of <code class="literal">MaxNoOfExecutionThreads</code>.
</p>
<div class="table">
<a name="idm140091599748944"></a><p class="title"><b>Table 22.159 MaxNoOfExecutionThreads values
              and the corresponding number of threads by thread type
(LQH, TC, Send, Receive).</b></p>
<div class="table-contents">
<table><col width="52%"><col width="12%"><col width="12%"><col width="12%"><col width="12%"><thead><tr>
                <th scope="col"><code class="literal">MaxNoOfExecutionThreads</code> Value</th>
                <th scope="col">LDM Threads</th>
                <th scope="col">TC Threads</th>
                <th scope="col">Send Threads</th>
                <th scope="col">Receive Threads</th>
              </tr></thead><tbody><tr>
                <td scope="row">0 .. 3</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
              </tr><tr>
                <td scope="row">4 .. 6</td>
                <td>2</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
              </tr><tr>
                <td scope="row">7 .. 8</td>
                <td>4</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
              </tr><tr>
                <td scope="row">9</td>
                <td>4</td>
                <td>2</td>
                <td>0</td>
                <td>1</td>
              </tr><tr>
                <td scope="row">10</td>
                <td>4</td>
                <td>2</td>
                <td>1</td>
                <td>1</td>
              </tr><tr>
                <td scope="row">11</td>
                <td>4</td>
                <td>3</td>
                <td>1</td>
                <td>1</td>
              </tr><tr>
                <td scope="row">12</td>
                <td>6</td>
                <td>2</td>
                <td>1</td>
                <td>1</td>
              </tr><tr>
                <td scope="row">13</td>
                <td>6</td>
                <td>3</td>
                <td>1</td>
                <td>1</td>
              </tr><tr>
                <td scope="row">14</td>
                <td>6</td>
                <td>3</td>
                <td>1</td>
                <td>2</td>
              </tr><tr>
                <td scope="row">15</td>
                <td>6</td>
                <td>3</td>
                <td>2</td>
                <td>2</td>
              </tr><tr>
                <td scope="row">16</td>
                <td>8</td>
                <td>3</td>
                <td>1</td>
                <td>2</td>
              </tr><tr>
                <td scope="row">17</td>
                <td>8</td>
                <td>4</td>
                <td>1</td>
                <td>2</td>
              </tr><tr>
                <td scope="row">18</td>
                <td>8</td>
                <td>4</td>
                <td>2</td>
                <td>2</td>
              </tr><tr>
                <td scope="row">19</td>
                <td>8</td>
                <td>5</td>
                <td>2</td>
                <td>2</td>
              </tr><tr>
                <td scope="row">20</td>
                <td>10</td>
                <td>4</td>
                <td>2</td>
                <td>2</td>
              </tr><tr>
                <td scope="row">21</td>
                <td>10</td>
                <td>5</td>
                <td>2</td>
                <td>2</td>
              </tr><tr>
                <td scope="row">22</td>
                <td>10</td>
                <td>5</td>
                <td>2</td>
                <td>3</td>
              </tr><tr>
                <td scope="row">23</td>
                <td>10</td>
                <td>6</td>
                <td>2</td>
                <td>3</td>
              </tr><tr>
                <td scope="row">24</td>
                <td>12</td>
                <td>5</td>
                <td>2</td>
                <td>3</td>
              </tr><tr>
                <td scope="row">25</td>
                <td>12</td>
                <td>6</td>
                <td>2</td>
                <td>3</td>
              </tr><tr>
                <td scope="row">26</td>
                <td>12</td>
                <td>6</td>
                <td>3</td>
                <td>3</td>
              </tr><tr>
                <td scope="row">27</td>
                <td>12</td>
                <td>7</td>
                <td>3</td>
                <td>3</td>
              </tr><tr>
                <td scope="row">28</td>
                <td>12</td>
                <td>7</td>
                <td>3</td>
                <td>4</td>
              </tr><tr>
                <td scope="row">29</td>
                <td>12</td>
                <td>8</td>
                <td>3</td>
                <td>4</td>
              </tr><tr>
                <td scope="row">30</td>
                <td>12</td>
                <td>8</td>
                <td>4</td>
                <td>4</td>
              </tr><tr>
                <td scope="row">31</td>
                <td>12</td>
                <td>9</td>
                <td>4</td>
                <td>4</td>
              </tr><tr>
                <td scope="row">32</td>
                <td>16</td>
                <td>8</td>
                <td>3</td>
                <td>3</td>
              </tr><tr>
                <td scope="row">33</td>
                <td>16</td>
                <td>8</td>
                <td>3</td>
                <td>4</td>
              </tr><tr>
                <td scope="row">34</td>
                <td>16</td>
                <td>8</td>
                <td>4</td>
                <td>4</td>
              </tr><tr>
                <td scope="row">35</td>
                <td>16</td>
                <td>9</td>
                <td>4</td>
                <td>4</td>
              </tr><tr>
                <td scope="row">36</td>
                <td>16</td>
                <td>10</td>
                <td>4</td>
                <td>4</td>
              </tr><tr>
                <td scope="row">37</td>
                <td>16</td>
                <td>10</td>
                <td>4</td>
                <td>5</td>
              </tr><tr>
                <td scope="row">38</td>
                <td>16</td>
                <td>11</td>
                <td>4</td>
                <td>5</td>
              </tr><tr>
                <td scope="row">39</td>
                <td>16</td>
                <td>11</td>
                <td>5</td>
                <td>5</td>
              </tr><tr>
                <td scope="row">40</td>
                <td>20</td>
                <td>10</td>
                <td>4</td>
                <td>4</td>
              </tr><tr>
                <td scope="row">41</td>
                <td>20</td>
                <td>10</td>
                <td>4</td>
                <td>5</td>
              </tr><tr>
                <td scope="row">42</td>
                <td>20</td>
                <td>11</td>
                <td>4</td>
                <td>5</td>
              </tr><tr>
                <td scope="row">43</td>
                <td>20</td>
                <td>11</td>
                <td>5</td>
                <td>5</td>
              </tr><tr>
                <td scope="row">44</td>
                <td>20</td>
                <td>12</td>
                <td>5</td>
                <td>5</td>
              </tr><tr>
                <td scope="row">45</td>
                <td>20</td>
                <td>12</td>
                <td>5</td>
                <td>6</td>
              </tr><tr>
                <td scope="row">46</td>
                <td>20</td>
                <td>13</td>
                <td>5</td>
                <td>6</td>
              </tr><tr>
                <td scope="row">47</td>
                <td>20</td>
                <td>13</td>
                <td>6</td>
                <td>6</td>
              </tr><tr>
                <td scope="row">48</td>
                <td>24</td>
                <td>12</td>
                <td>5</td>
                <td>5</td>
              </tr><tr>
                <td scope="row">49</td>
                <td>24</td>
                <td>12</td>
                <td>5</td>
                <td>6</td>
              </tr><tr>
                <td scope="row">50</td>
                <td>24</td>
                <td>13</td>
                <td>5</td>
                <td>6</td>
              </tr><tr>
                <td scope="row">51</td>
                <td>24</td>
                <td>13</td>
                <td>6</td>
                <td>6</td>
              </tr><tr>
                <td scope="row">52</td>
                <td>24</td>
                <td>14</td>
                <td>6</td>
                <td>6</td>
              </tr><tr>
                <td scope="row">53</td>
                <td>24</td>
                <td>14</td>
                <td>6</td>
                <td>7</td>
              </tr><tr>
                <td scope="row">54</td>
                <td>24</td>
                <td>15</td>
                <td>6</td>
                <td>7</td>
              </tr><tr>
                <td scope="row">55</td>
                <td>24</td>
                <td>15</td>
                <td>7</td>
                <td>7</td>
              </tr><tr>
                <td scope="row">56</td>
                <td>24</td>
                <td>16</td>
                <td>7</td>
                <td>7</td>
              </tr><tr>
                <td scope="row">57</td>
                <td>24</td>
                <td>16</td>
                <td>7</td>
                <td>8</td>
              </tr><tr>
                <td scope="row">58</td>
                <td>24</td>
                <td>17</td>
                <td>7</td>
                <td>8</td>
              </tr><tr>
                <td scope="row">59</td>
                <td>24</td>
                <td>17</td>
                <td>8</td>
                <td>8</td>
              </tr><tr>
                <td scope="row">60</td>
                <td>24</td>
                <td>18</td>
                <td>8</td>
                <td>8</td>
              </tr><tr>
                <td scope="row">61</td>
                <td>24</td>
                <td>18</td>
                <td>8</td>
                <td>9</td>
              </tr><tr>
                <td scope="row">62</td>
                <td>24</td>
                <td>19</td>
                <td>8</td>
                <td>9</td>
              </tr><tr>
                <td scope="row">63</td>
                <td>24</td>
                <td>19</td>
                <td>9</td>
                <td>9</td>
              </tr><tr>
                <td scope="row">64</td>
                <td>32</td>
                <td>16</td>
                <td>7</td>
                <td>7</td>
              </tr><tr>
                <td scope="row">65</td>
                <td>32</td>
                <td>16</td>
                <td>7</td>
                <td>8</td>
              </tr><tr>
                <td scope="row">66</td>
                <td>32</td>
                <td>17</td>
                <td>7</td>
                <td>8</td>
              </tr><tr>
                <td scope="row">67</td>
                <td>32</td>
                <td>17</td>
                <td>8</td>
                <td>8</td>
              </tr><tr>
                <td scope="row">68</td>
                <td>32</td>
                <td>18</td>
                <td>8</td>
                <td>8</td>
              </tr><tr>
                <td scope="row">69</td>
                <td>32</td>
                <td>18</td>
                <td>8</td>
                <td>9</td>
              </tr><tr>
                <td scope="row">70</td>
                <td>32</td>
                <td>19</td>
                <td>8</td>
                <td>9</td>
              </tr><tr>
                <td scope="row">71</td>
                <td>32</td>
                <td>20</td>
                <td>8</td>
                <td>9</td>
              </tr><tr>
                <td scope="row">72</td>
                <td>32</td>
                <td>20</td>
                <td>8</td>
                <td>10</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            There is always one SUMA (replication) thread.
          </p><p>
            <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-nooffragmentlogparts"><code class="literal">NoOfFragmentLogParts</code></a>
            should be set equal to the number of LDM threads used by
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>, as determined by the setting for
            this parameter. This ratio should not be any greater than
            4:1; a configuration in which this is the case is
            specifically disallowed.
          </p><p>
            The number of LDM threads also determines the number of
            partitions used by an <code class="literal">NDB</code> table that is
            not explicitly partitioned; this is the number of LDM
            threads times the number of data nodes in the cluster. (If
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> is used on the data nodes rather
            than <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>, then there is always a
            single LDM thread; in this case, the number of partitions
            created automatically is simply equal to the number of data
            nodes. See <a class="xref" href="mysql-cluster.html#mysql-cluster-nodes-groups" title="22.1.2 NDB Cluster Nodes, Node Groups, Replicas, and Partitions">Section 22.1.2, “NDB Cluster Nodes, Node Groups, Replicas, and Partitions”</a>, for
            more information.
          </p><p>
            Adding large tablespaces for Disk Data tables when using
            more than the default number of LDM threads may cause issues
            with resource and CPU usage if the disk page buffer is
            insufficiently large; see the description of the
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskpagebuffermemory"><code class="literal">DiskPageBufferMemory</code></a>
            configuration parameter, for more information.
          </p><p>
            The thread types are described later in this section (see
            <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-threadconfig"><code class="literal">ThreadConfig</code></a>).
          </p><p>
            Setting this parameter outside the permitted range of values
            causes the management server to abort on startup with the
            error <span class="errortext">Error line
            <em class="replaceable"><code>number</code></em>: Illegal value
            <em class="replaceable"><code>value</code></em> for parameter
            MaxNoOfExecutionThreads</span>.
          </p><p>
            For <code class="literal">MaxNoOfExecutionThreads</code>, a value of 0
            or 1 is rounded up internally by
            <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> to 2, so that 2 is
            considered this parameter's default and minimum value.
          </p><p>
            <code class="literal">MaxNoOfExecutionThreads</code> is generally
            intended to be set equal to the number of CPU threads
            available, and to allocate a number of threads of each type
            suitable to typical workloads. It does not assign particular
            threads to specified CPUs. For cases where it is desirable
            to vary from the settings provided, or to bind threads to
            CPUs, you should use
            <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-threadconfig"><code class="literal">ThreadConfig</code></a>
            instead, which allows you to allocate each thread directly
            to a desired type, CPU, or both.
          </p><p>
            The multithreaded data node process always spawns, at a
            minimum, the threads listed here:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                1 local query handler (LDM) thread
              </p></li><li class="listitem"><p>
                1 receive thread
              </p></li><li class="listitem"><p>
                1 subscription manager (SUMA or replication) thread
</p></li></ul>
</div>
<p>
            For a <code class="literal">MaxNoOfExecutionThreads</code> value of 8
            or less, no TC threads are created, and TC handling is
            instead performed by the main thread.
          </p><p>
            Changing the number of LDM threads normally requires a
            system restart, whether it is changed using this parameter
            or <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-threadconfig"><code class="literal">ThreadConfig</code></a>,
            but it is possible to effect the change using a node initial
            restart (<span class="emphasis"><em>NI</em></span>) provided the following two
            conditions are met:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                Each LDM thread handles a maximum of 8 fragments, and
              </p></li><li class="listitem"><p>
                The total number of table fragments is an integer
                multiple of the number of LDM threads.
</p></li></ul>
</div>
<p>
            In NDB 8.0, an initial restart is <span class="emphasis"><em>not</em></span>
            required to effect a change in this parameter, as it was in
            some older versions of NDB Cluster.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbmtd-nooffragmentlogparts"></a>
            <a class="indexterm" name="idm140091599373616"></a>

            <a class="indexterm" name="idm140091599372544"></a>

            <code class="literal">NoOfFragmentLogParts</code>
</p>
<div class="table">
<a name="nooffragmentlogparts-ndbmtd-table"></a><p class="title"><b>Table 22.160 This table provides type and
value information for the NoOfFragmentLogParts multi-threaded data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>4</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>4, 8, 12, 16, 24, 32</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>IN</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Set the number of log file groups for redo logs belonging to
            this <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>. The maximum value is 32; the
            value set must be an even multiple of 4.
          </p><p>
            <code class="literal">NoOfFragmentLogParts</code> should be set equal
            to the number of LDM threads used by
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> as determined by the setting for
            <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-maxnoofexecutionthreads"><code class="literal">MaxNoOfExecutionThreads</code></a>.
            A configuration using more than 4 redo log parts per LDM is
            disallowed.
          </p><p>
            See the description of
            <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-maxnoofexecutionthreads"><code class="literal">MaxNoOfExecutionThreads</code></a>
            for more information.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbmtd-threadconfig"></a>
            <a class="indexterm" name="idm140091599340864"></a>

            <a class="indexterm" name="idm140091599339792"></a>

            <code class="literal">ThreadConfig</code>
</p>
<div class="table">
<a name="threadconfig-ndbmtd-table"></a><p class="title"><b>Table 22.161 This table provides type and
value information for the ThreadConfig multi-threaded data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>string</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>''</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>SI</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter is used with <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> to
            assign threads of different types to different CPUs. Its
            value is a string whose format has the following syntax:
          </p><pre data-lang="simple" class="programlisting">
ThreadConfig := <em class="replaceable"><code>entry</code></em>[,<em class="replaceable"><code>entry</code></em>[,...]]

<em class="replaceable"><code>entry</code></em> := <em class="replaceable"><code>type</code></em>={<em class="replaceable"><code>param</code></em>[,<em class="replaceable"><code>param</code></em>[,...]]}

<em class="replaceable"><code>type</code></em> := ldm | main | recv | send | rep | io | tc | watchdog | idxbld

<em class="replaceable"><code>param</code></em> := count=<em class="replaceable"><code>number</code></em>
  | cpubind=<em class="replaceable"><code>cpu_list</code></em>
  | cpuset=<em class="replaceable"><code>cpu_list</code></em>
  | spintime=<em class="replaceable"><code>number</code></em>
  | realtime={0|1}
  | nosend={0|1}
  | thread_prio={0..10}
  | cpubind_exclusive=<em class="replaceable"><code>cpu_list</code></em>
  | cpuset_exclusive=<em class="replaceable"><code>cpu_list</code></em>
</pre><p>
            The curly braces
            (<code class="literal">{</code>...<code class="literal">}</code>) surrounding
            the list of parameters are required, even if there is only
            one parameter in the list.
          </p><p>
            A <em class="replaceable"><code>param</code></em> (parameter) specifies any
            or all of the following information:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                The number of threads of the given type
                (<code class="literal">count</code>).
              </p></li><li class="listitem"><p>
                The set of CPUs to which the threads of the given type
                are to be nonexclusively bound. This is determined by
                either one of <code class="literal">cpubind</code> or
                <code class="literal">cpuset</code>). <code class="literal">cpubind</code>
                causes each thread to be bound (nonexclusively) to a CPU
                in the set; <code class="literal">cpuset</code> means that each
                thread is bound (nonexclusively) to the set of CPUs
                specified.
              </p><p>
                On Solaris, you can instead specify a set of CPUs to
                which the threads of the given type are to be bound
                exclusively. <code class="literal">cpubind_exclusive</code> causes
                each thread to be bound exclusively to a CPU in the set;
                <code class="literal">cpuset_exclsuive</code> means that each
                thread is bound exclusively to the set of CPUs
                specified.
              </p><p>
                Only one of <code class="literal">cpubind</code>,
                <code class="literal">cpuset</code>,
                <code class="literal">cpubind_exclusive</code>, or
                <code class="literal">cpuset_exclusive</code> can be provided in a
                single configuration.
              </p></li><li class="listitem"><p>
                <code class="literal">spintime</code> determines the wait time in
                microseconds the thread spins before going to sleep.
              </p><p>
                The default value for <code class="literal">spintime</code> is the
                value of the
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-schedulerspintimer"><code class="literal">SchedulerSpinTimer</code></a>
                data node configuration parameter.
              </p><p>
                <code class="literal">spintime</code> does not apply to I/O
                threads, watchdog, or offline index build threads, and
                so cannot be set for these thread types.
              </p></li><li class="listitem"><p>
                <code class="literal">realtime</code> can be set to 0 or 1. If it
                is set to 1, the threads run with real-time priority.
                This also means that <code class="literal">thread_prio</code>
                cannot be set.
              </p><p>
                The <code class="literal">realtime</code> parameter is set by
                default to the value of the
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-realtimescheduler"><code class="literal">RealtimeScheduler</code></a>
                data node configuration parameter.
              </p><p>
                <code class="literal">realtime</code> cannot be set for offline
                index build threads.
              </p></li><li class="listitem"><p>
                By setting <code class="literal">nosend</code> to 1, you can
                prevent a <code class="literal">main</code>,
                <code class="literal">ldm</code>, <code class="literal">rep</code>, or
                <code class="literal">tc</code> thread from assisting the send
                threads. This parameter is 0 by default, and cannot be
                used with other types of threads.
              </p></li><li class="listitem"><p>
                <code class="literal">thread_prio</code> is a thread priority
                level that can be set from 0 to 10, with 10 representing
                the greatest priority. The default is 5. The precise
                effects of this parameter are platform-specific, and are
                described later in this section.
              </p><p>
                The thread priority level cannot be set for offline
                index build threads.
</p></li></ul>
</div>
<p><b>thread_prio settings and effects by platform. </b>
              The implementation of <code class="literal">thread_prio</code>
              differs between Linux/FreeBSD, Solaris, and Windows. In
              the following list, we discuss its effects on each of
              these platforms in turn:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <span class="emphasis"><em>Linux and FreeBSD</em></span>: We map
                <code class="literal">thread_prio</code> to a value to be supplied
                to the <code class="literal">nice</code> system call. Since a
                lower niceness value for a process indicates a higher
                process priority, increasing
                <code class="literal">thread_prio</code> has the effect of
                lowering the <code class="literal">nice</code> value.
</p>
<div class="table">
<a name="idm140091599267600"></a><p class="title"><b>Table 22.162 Mapping of thread_prio to nice values on Linux
and FreeBSD</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                    <th scope="col"><code class="literal">thread_prio</code> value</th>
                    <th scope="col"><code class="literal">nice</code> value</th>
                  </tr></thead><tbody><tr>
                    <td scope="row">0</td>
                    <td>19</td>
                  </tr><tr>
                    <td scope="row">1</td>
                    <td>16</td>
                  </tr><tr>
                    <td scope="row">2</td>
                    <td>12</td>
                  </tr><tr>
                    <td scope="row">3</td>
                    <td>8</td>
                  </tr><tr>
                    <td scope="row">4</td>
                    <td>4</td>
                  </tr><tr>
                    <td scope="row">5</td>
                    <td>0</td>
                  </tr><tr>
                    <td scope="row">6</td>
                    <td>-4</td>
                  </tr><tr>
                    <td scope="row">7</td>
                    <td>-8</td>
                  </tr><tr>
                    <td scope="row">8</td>
                    <td>-12</td>
                  </tr><tr>
                    <td scope="row">9</td>
                    <td>-16</td>
                  </tr><tr>
                    <td scope="row">10</td>
                    <td>-20</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
                Some operating systems may provide for a maximum process
                niceness level of 20, but this is not supported by all
                targeted versions; for this reason, we choose 19 as the
                maximum <code class="literal">nice</code> value that can be set.
              </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Solaris</em></span>: Setting
                <code class="literal">thread_prio</code> on Solaris sets the
                Solaris FX priority, with mappings as shown in the
                following table:
</p>
<div class="table">
<a name="idm140091599231168"></a><p class="title"><b>Table 22.163 Mapping of thread_prio to FX priority on
Solaris</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                    <th scope="col"><code class="literal">thread_prio</code> value</th>
                    <th scope="col">Solaris <code class="literal">FX</code> priority</th>
                  </tr></thead><tbody><tr>
                    <td scope="row">0</td>
                    <td>15</td>
                  </tr><tr>
                    <td scope="row">1</td>
                    <td>20</td>
                  </tr><tr>
                    <td scope="row">2</td>
                    <td>25</td>
                  </tr><tr>
                    <td scope="row">3</td>
                    <td>30</td>
                  </tr><tr>
                    <td scope="row">4</td>
                    <td>35</td>
                  </tr><tr>
                    <td scope="row">5</td>
                    <td>40</td>
                  </tr><tr>
                    <td scope="row">6</td>
                    <td>45</td>
                  </tr><tr>
                    <td scope="row">7</td>
                    <td>50</td>
                  </tr><tr>
                    <td scope="row">8</td>
                    <td>55</td>
                  </tr><tr>
                    <td scope="row">9</td>
                    <td>59</td>
                  </tr><tr>
                    <td scope="row">10</td>
                    <td>60</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
                A <code class="literal">thread_prio</code> setting of 9 is mapped
                on Solaris to the special FX priority value 59, which
                means that the operating system also attempts to force
                the thread to run alone on its own CPU core.
              </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Windows</em></span>: We map
                <code class="literal">thread_prio</code> to a Windows thread
                priority value passed to the Windows API
                <code class="literal">SetThreadPriority()</code> function. This
                mapping is shown in the following table:
</p>
<div class="table">
<a name="idm140091599194080"></a><p class="title"><b>Table 22.164 Mapping of thread_prio to Windows thread
priority</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                    <th scope="col"><code class="literal">thread_prio</code> value</th>
                    <th scope="col">Windows thread priority</th>
                  </tr></thead><tbody><tr>
                    <td scope="row">0 - 1</td>
                    <td><code class="literal">THREAD_PRIORITY_LOWEST</code></td>
                  </tr><tr>
                    <td scope="row">2 - 3</td>
                    <td><code class="literal">THREAD_PRIORITY_BELOW_NORMAL</code></td>
                  </tr><tr>
                    <td scope="row">4 - 5</td>
                    <td><code class="literal">THREAD_PRIORITY_NORMAL</code></td>
                  </tr><tr>
                    <td scope="row">6 - 7</td>
                    <td><code class="literal">THREAD_PRIORITY_ABOVE_NORMAL</code></td>
                  </tr><tr>
                    <td scope="row">8 - 10</td>
                    <td><code class="literal">THREAD_PRIORITY_HIGHEST</code></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"></li></ul>
</div>
<p>
            The <em class="replaceable"><code>type</code></em> attribute represents an
            NDB thread type. The thread types supported, and the range
            of permitted <code class="literal">count</code> values for each, are
            provided in the following list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">ldm</code>: Local query handler
                (<code class="literal">DBLQH</code> kernel block) that handles
                data. The more LDM threads that are used, the more
                highly partitioned the data becomes. Each LDM thread
                maintains its own sets of data and index partitions, as
                well as its own redo log. The value set for
                <code class="literal">ldm</code> must be one of the values 1, 2,
                4, 6, 8, 12, 16, 24, or 32.
              </p><p>
                Changing the number of LDM threads normally requires a
                system restart to be effective and safe for cluster
                operations, this requirement is relaxed in certain
                cases, as explained later in this section. This is also
                true when this is done using
                <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-maxnoofexecutionthreads"><code class="literal">MaxNoOfExecutionThreads</code></a>.
              </p><p>
                Adding large tablespaces (hundreds of gigabytes or more)
                for Disk Data tables when using more than the default
                number of LDMs may cause issues with resource and CPU
                usage if
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskpagebuffermemory"><code class="literal">DiskPageBufferMemory</code></a>
                is not sufficiently large.
              </p></li><li class="listitem"><p>
                <code class="literal">tc</code>: Transaction coordinator thread
                (<code class="literal">DBTC</code> kernel block) containing the
                state of an ongoing transaction. The maximum number of
                TC threads is 32.
              </p><p>
                Optimally, every new transaction can be assigned to a
                new TC thread. In most cases 1 TC thread per 2 LDM
                threads is sufficient to guarantee that this can happen.
                In cases where the number of writes is relatively small
                when compared to the number of reads, it is possible
                that only 1 TC thread per 4 LQH threads is required to
                maintain transaction states. Conversely, in applications
                that perform a great many updates, it may be necessary
                for the ratio of TC threads to LDM threads to approach 1
                (for example, 3 TC threads to 4 LDM threads).
              </p><p>
                Setting <code class="literal">tc</code> to 0 causes TC handling to
                be done by the main thread. In most cases, this is
                effectively the same as setting it to 1.
              </p><p>
                Range: 0 - 32
              </p></li><li class="listitem"><p>
                <code class="literal">main</code>: Data dictionary and transaction
                coordinator (<code class="literal">DBDIH</code> and
                <code class="literal">DBTC</code> kernel blocks), providing schema
                management. This is always handled by a single dedicated
                thread.
              </p><p>
                Range: 1 only.
              </p></li><li class="listitem"><p>
                <code class="literal">recv</code>: Receive thread
                (<code class="literal">CMVMI</code> kernel block). Each receive
                thread handles one or more sockets for communicating
                with other nodes in an NDB Cluster, with one socket per
                node. NDB Cluster supports multiple receive threads; the
                maximum is 16 such threads.
              </p><p>
                Range: 1 - 16
              </p></li><li class="listitem"><p>
                <code class="literal">send</code>: Send thread
                (<code class="literal">CMVMI</code> kernel block). To increase
                throughput, it is possible to perform sends from one or
                more separate, dedicated threads (maximum 8).
              </p><p>
                Previously, all threads handled their own sending
                directly; this can still be made to happen by setting
                the number of send threads to 0 (this also happens when
                <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-maxnoofexecutionthreads"><code class="literal">MaxNoOfExecutionThreads</code></a>
                is set less than 10). While doing so can have an
                adeverse impact on throughput, it can also in some cases
                provide decreased latency.
              </p><p>
                Range: 0 - 16
              </p></li><li class="listitem"><p>
                <code class="literal">rep</code>: Replication thread
                (<code class="literal">SUMA</code> kernel block). Asynchronous
                replication operations are always handled by a single,
                dedicated thread.
              </p><p>
                Range: 1 only.
              </p></li><li class="listitem"><p>
                <code class="literal">io</code>: File system and other
                miscellaneous operations. These are not demanding tasks,
                and are always handled as a group by a single, dedicated
                I/O thread.
              </p><p>
                Range: 1 only.
              </p></li><li class="listitem"><p>
                <code class="literal">watchdog</code>: Parameters settings
                associated with this type are actually applied to
                several threads, each having a specific use. These
                threads include the <code class="literal">SocketServer</code>
                thread, which receives connection setups from other
                nodes; the <code class="literal">SocketClient</code> thread, which
                attempts to set up connections to other nodes; and the
                thread watchdog thread that checks that threads are
                progressing.
              </p><p>
                Range: 1 only.
              </p></li><li class="listitem"><p>
                <code class="literal">idxbld</code>: Offline index build threads.
                Unlike the other thread types listed previously, which
                are permanent, these are temporary threads which are
                created and used only during node or system restarts, or
                when running <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>
                <a class="link" href="mysql-cluster.html#option_ndb_restore_rebuild-indexes"><code class="option">--rebuild-indexes</code></a>.
                They may be bound to CPU sets which overlap with CPU
                sets bound to permanent thread types.
              </p><p>
                <code class="literal">thread_prio</code>,
                <code class="literal">realtime</code>, and
                <code class="literal">spintime</code> values cannot be set for
                offline index build threads. In addition,
                <code class="literal">count</code> is ignored for this type of
                thread.
              </p><p>
                If <code class="literal">idxbld</code> is not specified, the
                default behavior is as follows:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                    Offline index build threads are not bound if the I/O
                    thread is also not bound, and these threads use any
                    available cores.
                  </p></li><li class="listitem"><p>
                    If the I/O thread is bound, then the offline index
                    build threads are bound to the entire set of bound
                    threads, due to the fact that there should be no
                    other tasks for these threads to perform.
</p></li></ul>
</div>
<p>
                Range: 0 - 1.
</p></li></ul>
</div>
</li></ul>
</div>
<p>
        Changing <code class="literal">ThreadCOnfig</code> normally requires a
        system initial restart, but this requirement can be relaxed
        under certain cirumstances:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            If, following the change, the number of LDM threads remains
            the same as before, nothing more than a simple node restart
            (rolling restart, or <span class="emphasis"><em>N</em></span>) is required to
            implement the change.
          </p></li><li class="listitem"><p>
            Otherwise (that is, if the number of LDM threads changes),
            it is still possible to effect the change using a node
            initial restart (<span class="emphasis"><em>NI</em></span>) provided the
            following two conditions are met:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="a"><li class="listitem"><p>
                Each LDM thread handles a maximum of 8 fragments, and
              </p></li><li class="listitem"><p>
                The total number of table fragments is an integer
                multiple of the number of LDM threads.
</p></li></ol>
</div>
</li></ul>
</div>
<p>
        In any other case, a system initial restart is needed to change
        this parameter.
      </p><p>
        <code class="literal">NDB</code> can distinguish between thread types by
        both of the following criteria:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Whether the thread is an execution thread. Threads of type
            <code class="literal">main</code>, <code class="literal">ldm</code>,
            <code class="literal">recv</code>, <code class="literal">rep</code>,
            <code class="literal">tc</code>, and <code class="literal">send</code> are
            execution threads; <code class="literal">io</code>,
            <code class="literal">watchdog</code>, and <code class="literal">idxbld</code>
            threads are not considered execution threads.
          </p></li><li class="listitem"><p>
            Whether the allocation of threads to a given task is
            permanent or temporary. Currently all thread types except
            <code class="literal">idxbld</code> are considered permanent;
            <code class="literal">idxbld</code> threads are regarded as temporary
            threads.
</p></li></ul>
</div>
<p>
        Simple examples:
      </p><pre data-lang="ini" class="programlisting">
# Example 1.

ThreadConfig=ldm={count=2,cpubind=1,2},main={cpubind=12},rep={cpubind=11}

# Example 2.

Threadconfig=main={cpubind=0},ldm={count=4,cpubind=1,2,5,6},io={cpubind=3}
</pre><p>
        It is usually desirable when configuring thread usage for a data
        node host to reserve one or more number of CPUs for operating
        system and other tasks. Thus, for a host machine with 24 CPUs,
        you might want to use 20 CPU threads (leaving 4 for other uses),
        with 8 LDM threads, 4 TC threads (half the number of LDM
        threads), 3 send threads, 3 receive threads, and 1 thread each
        for schema management, asynchronous replication, and I/O
        operations. (This is almost the same distribution of threads
        used when
        <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-maxnoofexecutionthreads"><code class="literal">MaxNoOfExecutionThreads</code></a>
        is set equal to 20.) The following
        <code class="literal">ThreadConfig</code> setting performs these
        assignments, additionally binding all of these threads to
        specific CPUs:
      </p><pre data-lang="ini" class="programlisting">
ThreadConfig=ldm{count=8,cpubind=1,2,3,4,5,6,7,8},main={cpubind=9},io={cpubind=9}, \
rep={cpubind=10},tc{count=4,cpubind=11,12,13,14},recv={count=3,cpubind=15,16,17}, \
send{count=3,cpubind=18,19,20}
</pre><p>
        It should be possible in most cases to bind the main (schema
        management) thread and the I/O thread to the same CPU, as we
        have done in the example just shown.
      </p><p>
        The following example incorporates groups of CPUs defined using
        both <code class="literal">cpuset</code> and <code class="literal">cpubind</code>,
        as well as use of thread prioritization.
      </p><pre data-lang="ini" class="programlisting">
ThreadConfig=ldm={count=4,cpuset=0-3,thread_prio=8,spintime=200}, \
ldm={count=4,cpubind=4-7,thread_prio=8,spintime=200}, \
tc={count=4,cpuset=8-9,thread_prio=6},send={count=2,thread_prio=10,cpubind=10-11}, \
main={count=1,cpubind=10},rep={count=1,cpubind=11}
        </pre><p>
        In this case we create two LDM groups; the first uses
        <code class="literal">cpubind</code> and the second uses
        <code class="literal">cpuset</code>. <code class="literal">thread_prio</code> and
        <code class="literal">spintime</code> are set to the same values for each
        group. This means there are eight LDM threads in total. (You
        should ensure that
        <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-nooffragmentlogparts"><code class="literal">NoOfFragmentLogParts</code></a>
        is also set to 8.) The four TC threads use only two CPUs; it is
        possible when using <code class="literal">cpuset</code> to specify fewer
        CPUs than threads in the group. (This is not true for
        <code class="literal">cpubind</code>.) The send threads use two threads
        using <code class="literal">cpubind</code> to bind these threads to CPUs
        10 and 11. The main and rep threads can reuse these CPUs.
      </p><p>
        This example shows how <code class="literal">ThreadConfig</code> and
        <code class="literal">NoOfFragmentLogParts</code> might be set up for a
        24-CPU host with hyperthreading, leaving CPUs 10, 11, 22, and 23
        available for operating system functions and interrupts:
      </p><pre data-lang="ini" class="programlisting">
NoOfFragmentLogParts=10
ThreadConfig=ldm={count=10,cpubind=0-4,12-16,thread_prio=9,spintime=200}, \
tc={count=4,cpuset=6-7,18-19,thread_prio=8},send={count=1,cpuset=8}, \
recv={count=1,cpuset=20},main={count=1,cpuset=9,21},rep={count=1,cpuset=9,21}, \
io={count=1,cpuset=9,21,thread_prio=8},watchdog={count=1,cpuset=9,21,thread_prio=9}
</pre><p>
        The next few examples include settings for
        <code class="literal">idxbld</code>. The first two of these demonstrate
        how a CPU set defined for <code class="literal">idxbld</code> can overlap
        those specified for other (permanent) thread types, the first
        using <code class="literal">cpuset</code> and the second using
        <code class="literal">cpubind</code>:
      </p><pre data-lang="ini" class="programlisting">
ThreadConfig=main,ldm={count=4,cpuset=1-4},tc={count=4,cpuset=5,6,7}, \
io={cpubind=8},idxbld={cpuset=1-8}

ThreadConfig=main,ldm={count=1,cpubind=1},idxbld={count=1,cpubind=1}
</pre><p>
        The next example specifies a CPU for the I/O thread, but not for
        the index build threads:
      </p><pre data-lang="ini" class="programlisting">
ThreadConfig=main,ldm={count=4,cpuset=1-4},tc={count=4,cpuset=5,6,7}, \
io={cpubind=8}
</pre><p>
        Since the <code class="literal">ThreadConfig</code> setting just shown
        locks threads to eight cores numbered 1 through 8, it is
        equivalent to the setting shown here:
      </p><pre data-lang="ini" class="programlisting">
ThreadConfig=main,ldm={count=4,cpuset=1-4},tc={count=4,cpuset=5,6,7}, \
io={cpubind=8},idxbld={cpuset=1,2,3,4,5,6,7,8}
</pre><p>
        In order to take advantage of the enhanced stability that the
        use of <code class="literal">ThreadConfig</code> offers, it is necessary
        to insure that CPUs are isolated, and that they not subject to
        interrupts, or to being scheduled for other tasks by the
        operating system. On many Linux systems, you can do this by
        setting <code class="literal">IRQBALANCE_BANNED_CPUS</code> in
        <code class="filename">/etc/sysconfig/irqbalance</code> to
        <code class="literal">0xFFFFF0</code>, and by using the
        <code class="literal">isolcpus</code> boot option in
        <code class="filename">grub.conf</code>. For specific information, see
        your operating system or platform documentation.
      </p><p><a name="mysql-cluster-ndbd-definition-disk-data-parameters"></a><b>Disk Data Configuration Parameters. </b>
          Configuration parameters affecting Disk Data behavior include
          the following:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-diskpagebufferentries"></a>
            <a class="indexterm" name="idm140091599071248"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskpagebufferentries"><code class="literal">DiskPageBufferEntries</code></a>
</p>
<div class="table">
<a name="diskpagebufferentries-ndbd-table"></a><p class="title"><b>Table 22.165 This table provides type and
value information for the DiskPageBufferEntries data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>32K pages</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>10</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1 - 1000</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This is the number of page entries (page references) to
            allocate. It is specified as a number of 32K pages in
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskpagebuffermemory"><code class="literal">DiskPageBufferMemory</code></a>.
            The default is sufficient for most cases but you may need to
            increase the value of this parameter if you encounter
            problems with very large transactions on Disk Data tables.
            Each page entry requires approximately 100 bytes.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-diskpagebuffermemory"></a>
            <a class="indexterm" name="idm140091599044848"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskpagebuffermemory"><code class="literal">DiskPageBufferMemory</code></a>
</p>
<div class="table">
<a name="diskpagebuffermemory-ndbd-table"></a><p class="title"><b>Table 22.166 This table provides type and
value information for the DiskPageBufferMemory data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>64M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>4M - 1T</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This determines the amount of space used for caching pages
            on disk, and is set in the <code class="literal">[ndbd]</code> or
            <code class="literal">[ndbd default]</code> section of the
            <code class="filename">config.ini</code> file. It is measured in
            bytes. Each page takes up 32 KB. This means that NDB Cluster
            Disk Data storage always uses <em class="replaceable"><code>N</code></em> *
            32 KB memory where <em class="replaceable"><code>N</code></em> is some
            nonnegative integer.
          </p><p>
            The default value for this parameter is
            <code class="literal">64M</code> (2000 pages of 32 KB each).
          </p><p>
            If the value for <code class="literal">DiskPageBufferMemory</code> is
            set too low in conjunction with using more than the default
            number of LDM threads in
            <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-threadconfig"><code class="literal">ThreadConfig</code></a> (for
            example <code class="literal">{ldm=6...}</code>), problems can arise
            when trying to add a large (for example 500G) data file to a
            disk-based <code class="literal">NDB</code> table, wherein the process
            takes indefinitely long while occupying one of the CPU
            cores.
          </p><p>
            This is due to the fact that, as part of adding a data file
            to a tablespace, extent pages are locked into memory in an
            extra PGMAN worker thread, for quick metadata access. When
            adding a large file, this worker has insufficient memory for
            all of the data file metadata. In such cases, you should
            either increase <code class="literal">DiskPageBufferMemory</code>, or
            add smaller tablespace files. You may also need to adjust
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskpagebufferentries"><code class="literal">DiskPageBufferEntries</code></a>.
          </p><p>
            You can query the
            <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-diskpagebuffer" title="22.5.10.20 The ndbinfo diskpagebuffer Table"><code class="literal">ndbinfo.diskpagebuffer</code></a>
            table to help determine whether the value for this parameter
            should be increased to minimize unnecessary disk seeks. See
            <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbinfo-diskpagebuffer" title="22.5.10.20 The ndbinfo diskpagebuffer Table">Section 22.5.10.20, “The ndbinfo diskpagebuffer Table”</a>, for
            more information.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-sharedglobalmemory"></a>
            <a class="indexterm" name="idm140091599005840"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-sharedglobalmemory"><code class="literal">SharedGlobalMemory</code></a>
</p>
<div class="table">
<a name="sharedglobalmemory-ndbd-table"></a><p class="title"><b>Table 22.167 This table provides type and
value information for the SharedGlobalMemory data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>128M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 64T</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter determines the amount of memory that is used
            for log buffers, disk operations (such as page requests and
            wait queues), and metadata for tablespaces, log file groups,
            <code class="literal">UNDO</code> files, and data files. The shared
            global memory pool also provides memory used for satisfying
            the memory requirements of the
            <code class="literal">UNDO_BUFFER_SIZE</code> option used with
            <a class="link" href="sql-syntax.html#create-logfile-group" title="13.1.16 CREATE LOGFILE GROUP Syntax"><code class="literal">CREATE LOGFILE GROUP</code></a> and
            <a class="link" href="sql-syntax.html#alter-logfile-group" title="13.1.6 ALTER LOGFILE GROUP Syntax"><code class="literal">ALTER LOGFILE GROUP</code></a>
            statements, including any default value implied for this
            options by the setting of the
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-initiallogfilegroup"><code class="literal">InitialLogFileGroup</code></a>
            data node configuration parameter.
            <code class="literal">SharedGlobalMemory</code> can be set in the
            <code class="literal">[ndbd]</code> or <code class="literal">[ndbd
            default]</code> section of the
            <code class="filename">config.ini</code> configuration file, and is
            measured in bytes.
          </p><p>
            The default value is <code class="literal">128M</code>.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-diskiothreadpool"></a>
            <a class="indexterm" name="idm140091598971184"></a>

            <a class="indexterm" name="idm140091598970112"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskiothreadpool"><code class="literal">DiskIOThreadPool</code></a>
</p>
<div class="table">
<a name="diskiothreadpool-ndbd-table"></a><p class="title"><b>Table 22.168 This table provides type and
value information for the DiskIOThreadPool data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>threads</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>2</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter determines the number of unbound threads used
            for Disk Data file access. Before
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskiothreadpool"><code class="literal">DiskIOThreadPool</code></a> was
            introduced, exactly one thread was spawned for each Disk
            Data file, which could lead to performance issues,
            particularly when using very large data files. With
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskiothreadpool"><code class="literal">DiskIOThreadPool</code></a>,
            you can—for example—access a single large data
            file using several threads working in parallel.
          </p><p>
            This parameter applies to Disk Data I/O threads only.
          </p><p>
            The optimum value for this parameter depends on your
            hardware and configuration, and includes these factors:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><b>Physical distribution of Disk Data files. </b>
                  You can obtain better performance by placing data
                  files, undo log files, and the data node file system
                  on separate physical disks. If you do this with some
                  or all of these sets of files, then you can set
                  <a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskiothreadpool"><code class="literal">DiskIOThreadPool</code></a>
                  higher to enable separate threads to handle the files
                  on each disk.
                </p></li><li class="listitem"><p><b>Disk performance and types. </b>
                  The number of threads that can be accommodated for
                  Disk Data file handling is also dependent on the speed
                  and throughput of the disks. Faster disks and higher
                  throughput allow for more disk I/O threads. Our test
                  results indicate that solid-state disk drives can
                  handle many more disk I/O threads than conventional
                  disks, and thus higher values for
                  <a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskiothreadpool"><code class="literal">DiskIOThreadPool</code></a>.
</p></li></ul>
</div>
<p>
            The default value for this parameter is 2.
          </p></li><li class="listitem"><p><a name="mysql-cluster-ndbd-disk-data-filesystem-parameters"></a><b>Disk Data file system parameters. </b>
              The parameters in the following list make it possible to
              place NDB Cluster Disk Data files in specific directories
              without the need for using symbolic links.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><a name="ndbparam-ndbd-filesystempathdd"></a>
                <a class="indexterm" name="idm140091598930800"></a>

                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathdd"><code class="literal">FileSystemPathDD</code></a>
</p>
<div class="table">
<a name="filesystempathdd-ndbd-table"></a><p class="title"><b>Table 22.169 This table provides type and
value information for the FileSystemPathDD data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                    <th scope="col">Property</th>
                    <th scope="col">Value</th>
                  </tr></thead><tbody><tr>
                    <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                    <td>NDB 8.0.13</td>
                  </tr><tr>
                    <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                    <td>filename</td>
                  </tr><tr>
                    <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                    <td>[see text]</td>
                  </tr><tr>
                    <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                    <td>...</td>
                  </tr><tr>
                    <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                      Type</a></strong></span></td>
                    <td>IN</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
                If this parameter is specified, then NDB Cluster Disk
                Data data files and undo log files are placed in the
                indicated directory. This can be overridden for data
                files, undo log files, or both, by specifying values for
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathdatafiles"><code class="literal">FileSystemPathDataFiles</code></a>,
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathundofiles"><code class="literal">FileSystemPathUndoFiles</code></a>,
                or both, as explained for these parameters. It can also
                be overridden for data files by specifying a path in the
                <code class="literal">ADD DATAFILE</code> clause of a
                <a class="link" href="sql-syntax.html#create-tablespace" title="13.1.21 CREATE TABLESPACE Syntax"><code class="literal">CREATE TABLESPACE</code></a> or
                <a class="link" href="sql-syntax.html#alter-tablespace" title="13.1.10 ALTER TABLESPACE Syntax"><code class="literal">ALTER TABLESPACE</code></a>
                statement, and for undo log files by specifying a path
                in the <code class="literal">ADD UNDOFILE</code> clause of a
                <a class="link" href="sql-syntax.html#create-logfile-group" title="13.1.16 CREATE LOGFILE GROUP Syntax"><code class="literal">CREATE LOGFILE GROUP</code></a> or
                <a class="link" href="sql-syntax.html#alter-logfile-group" title="13.1.6 ALTER LOGFILE GROUP Syntax"><code class="literal">ALTER LOGFILE GROUP</code></a>
                statement. If
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathdd"><code class="literal">FileSystemPathDD</code></a>
                is not specified, then
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempath"><code class="literal">FileSystemPath</code></a>
                is used.
              </p><p>
                If a
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathdd"><code class="literal">FileSystemPathDD</code></a>
                directory is specified for a given data node (including
                the case where the parameter is specified in the
                <code class="literal">[ndbd default]</code> section of the
                <code class="filename">config.ini</code> file), then starting
                that data node with <code class="option">--initial</code> causes
                all files in the directory to be deleted.
              </p></li><li class="listitem"><p><a name="ndbparam-ndbd-filesystempathdatafiles"></a>
                <a class="indexterm" name="idm140091598890128"></a>

                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathdatafiles"><code class="literal">FileSystemPathDataFiles</code></a>
</p>
<div class="table">
<a name="filesystempathdatafiles-ndbd-table"></a><p class="title"><b>Table 22.170 This table provides type and
value information for the FileSystemPathDataFiles data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                    <th scope="col">Property</th>
                    <th scope="col">Value</th>
                  </tr></thead><tbody><tr>
                    <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                    <td>NDB 8.0.13</td>
                  </tr><tr>
                    <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                    <td>filename</td>
                  </tr><tr>
                    <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                    <td>[see text]</td>
                  </tr><tr>
                    <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                    <td>...</td>
                  </tr><tr>
                    <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                      Type</a></strong></span></td>
                    <td>IN</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
                If this parameter is specified, then NDB Cluster Disk
                Data data files are placed in the indicated directory.
                This overrides any value set for
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathdd"><code class="literal">FileSystemPathDD</code></a>.
                This parameter can be overridden for a given data file
                by specifying a path in the <code class="literal">ADD
                DATAFILE</code> clause of a
                <a class="link" href="sql-syntax.html#create-tablespace" title="13.1.21 CREATE TABLESPACE Syntax"><code class="literal">CREATE TABLESPACE</code></a> or
                <a class="link" href="sql-syntax.html#alter-tablespace" title="13.1.10 ALTER TABLESPACE Syntax"><code class="literal">ALTER TABLESPACE</code></a>
                statement used to create that data file. If
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathdatafiles"><code class="literal">FileSystemPathDataFiles</code></a>
                is not specified, then
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathdd"><code class="literal">FileSystemPathDD</code></a>
                is used (or
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempath"><code class="literal">FileSystemPath</code></a>,
                if
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathdd"><code class="literal">FileSystemPathDD</code></a>
                has also not been set).
              </p><p>
                If a
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathdatafiles"><code class="literal">FileSystemPathDataFiles</code></a>
                directory is specified for a given data node (including
                the case where the parameter is specified in the
                <code class="literal">[ndbd default]</code> section of the
                <code class="filename">config.ini</code> file), then starting
                that data node with <code class="option">--initial</code> causes
                all files in the directory to be deleted.
              </p></li><li class="listitem"><p><a name="ndbparam-ndbd-filesystempathundofiles"></a>
                <a class="indexterm" name="idm140091598851440"></a>

                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathundofiles"><code class="literal">FileSystemPathUndoFiles</code></a>
</p>
<div class="table">
<a name="filesystempathundofiles-ndbd-table"></a><p class="title"><b>Table 22.171 This table provides type and
value information for the FileSystemPathUndoFiles data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                    <th scope="col">Property</th>
                    <th scope="col">Value</th>
                  </tr></thead><tbody><tr>
                    <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                    <td>NDB 8.0.13</td>
                  </tr><tr>
                    <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                    <td>filename</td>
                  </tr><tr>
                    <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                    <td>[see text]</td>
                  </tr><tr>
                    <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                    <td>...</td>
                  </tr><tr>
                    <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                      Type</a></strong></span></td>
                    <td>IN</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
                If this parameter is specified, then NDB Cluster Disk
                Data undo log files are placed in the indicated
                directory. This overrides any value set for
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathdd"><code class="literal">FileSystemPathDD</code></a>.
                This parameter can be overridden for a given data file
                by specifying a path in the <code class="literal">ADD UNDO</code>
                clause of a <a class="link" href="sql-syntax.html#create-logfile-group" title="13.1.16 CREATE LOGFILE GROUP Syntax"><code class="literal">CREATE LOGFILE
                GROUP</code></a> or <a class="link" href="sql-syntax.html#alter-logfile-group" title="13.1.6 ALTER LOGFILE GROUP Syntax"><code class="literal">ALTER LOGFILE
                GROUP</code></a> statement used to create that data file.
                If
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathundofiles"><code class="literal">FileSystemPathUndoFiles</code></a>
                is not specified, then
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathdd"><code class="literal">FileSystemPathDD</code></a>
                is used (or
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempath"><code class="literal">FileSystemPath</code></a>,
                if
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathdd"><code class="literal">FileSystemPathDD</code></a>
                has also not been set).
              </p><p>
                If a
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathundofiles"><code class="literal">FileSystemPathUndoFiles</code></a>
                directory is specified for a given data node (including
                the case where the parameter is specified in the
                <code class="literal">[ndbd default]</code> section of the
                <code class="filename">config.ini</code> file), then starting
                that data node with <code class="option">--initial</code> causes
                all files in the directory to be deleted.
</p></li></ul>
</div>
<p>
            For more information, see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-disk-data-objects" title="22.5.13.1 NDB Cluster Disk Data Objects">Section 22.5.13.1, “NDB Cluster Disk Data Objects”</a>.
          </p></li><li class="listitem"><p><a name="mysql-cluster-ndbd-disk-data-object-creation-parameters"></a><b>Disk Data object creation parameters. </b>
              The next two parameters enable you—when starting the
              cluster for the first time—to cause a Disk Data log
              file group, tablespace, or both, to be created without the
              use of SQL statements.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><a name="ndbparam-ndbd-initiallogfilegroup"></a>
                <a class="indexterm" name="idm140091598808608"></a>

                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-initiallogfilegroup"><code class="literal">InitialLogFileGroup</code></a>
</p>
<div class="table">
<a name="initiallogfilegroup-ndbd-table"></a><p class="title"><b>Table 22.172 This table provides type and
value information for the InitialLogFileGroup data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                    <th scope="col">Property</th>
                    <th scope="col">Value</th>
                  </tr></thead><tbody><tr>
                    <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                    <td>NDB 8.0.13</td>
                  </tr><tr>
                    <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                    <td>string</td>
                  </tr><tr>
                    <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                    <td>[see text]</td>
                  </tr><tr>
                    <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                    <td>...</td>
                  </tr><tr>
                    <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                      Type</a></strong></span></td>
                    <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
                This parameter can be used to specify a log file group
                that is created when performing an initial start of the
                cluster.
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-initiallogfilegroup"><code class="literal">InitialLogFileGroup</code></a>
                is specified as shown here:
              </p><pre data-lang="simple" class="programlisting">
InitialLogFileGroup = [name=<em class="replaceable"><code>name</code></em>;] [undo_buffer_size=<em class="replaceable"><code>size</code></em>;] <em class="replaceable"><code>file-specification-list</code></em>

<em class="replaceable"><code>file-specification-list</code></em>:
    <em class="replaceable"><code>file-specification</code></em>[; <em class="replaceable"><code>file-specification</code></em>[; ...]]

<em class="replaceable"><code>file-specification</code></em>:
    <em class="replaceable"><code>filename</code></em>:<em class="replaceable"><code>size</code></em>
</pre><p>
                The <code class="literal">name</code> of the log file group is
                optional and defaults to <code class="literal">DEFAULT-LG</code>.
                The <code class="literal">undo_buffer_size</code> is also
                optional; if omitted, it defaults to
                <code class="literal">64M</code>. Each
                <em class="replaceable"><code>file-specification</code></em>
                corresponds to an undo log file, and at least one must
                be specified in the
                <em class="replaceable"><code>file-specification-list</code></em>. Undo
                log files are placed according to any values that have
                been set for
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempath"><code class="literal">FileSystemPath</code></a>,
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathdd"><code class="literal">FileSystemPathDD</code></a>,
                and
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathundofiles"><code class="literal">FileSystemPathUndoFiles</code></a>,
                just as if they had been created as the result of a
                <a class="link" href="sql-syntax.html#create-logfile-group" title="13.1.16 CREATE LOGFILE GROUP Syntax"><code class="literal">CREATE LOGFILE GROUP</code></a> or
                <a class="link" href="sql-syntax.html#alter-logfile-group" title="13.1.6 ALTER LOGFILE GROUP Syntax"><code class="literal">ALTER LOGFILE GROUP</code></a>
                statement.
              </p><p>
                Consider the following:
              </p><pre data-lang="ini" class="programlisting">
InitialLogFileGroup = name=LG1; undo_buffer_size=128M; undo1.log:250M; undo2.log:150M
</pre><p>
                This is equivalent to the following SQL statements:
              </p><pre data-lang="sql" class="programlisting">
CREATE LOGFILE GROUP LG1
    ADD UNDOFILE 'undo1.log'
    INITIAL_SIZE 250M
    UNDO_BUFFER_SIZE 128M
    ENGINE NDBCLUSTER;

ALTER LOGFILE GROUP LG1
    ADD UNDOFILE 'undo2.log'
    INITIAL_SIZE 150M
    ENGINE NDBCLUSTER;
</pre><p>
                This logfile group is created when the data nodes are
                started with <code class="option">--initial</code>.
              </p><p>
                Resources for the initial log file group are added to
                the global memory pool along with those indicated by the
                value of
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-sharedglobalmemory"><code class="literal">SharedGlobalMemory</code></a>.
              </p><p>
                This parameter, if used, should always be set in the
                <code class="literal">[ndbd default]</code> section of the
                <code class="filename">config.ini</code> file. The behavior of an
                NDB Cluster when different values are set on different
                data nodes is not defined.
              </p></li><li class="listitem"><p><a name="ndbparam-ndbd-initialtablespace"></a>
                <a class="indexterm" name="idm140091598758624"></a>

                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-initialtablespace"><code class="literal">InitialTablespace</code></a>
</p>
<div class="table">
<a name="initialtablespace-ndbd-table"></a><p class="title"><b>Table 22.173 This table provides type and
value information for the InitialTablespace data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                    <th scope="col">Property</th>
                    <th scope="col">Value</th>
                  </tr></thead><tbody><tr>
                    <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                    <td>NDB 8.0.13</td>
                  </tr><tr>
                    <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                    <td>string</td>
                  </tr><tr>
                    <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                    <td>[see text]</td>
                  </tr><tr>
                    <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                    <td>...</td>
                  </tr><tr>
                    <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                      Type</a></strong></span></td>
                    <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
                This parameter can be used to specify an NDB Cluster
                Disk Data tablespace that is created when performing an
                initial start of the cluster.
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-initialtablespace"><code class="literal">InitialTablespace</code></a>
                is specified as shown here:
              </p><pre data-lang="ini" class="programlisting">
InitialTablespace = [name=<em class="replaceable"><code>name</code></em>;] [extent_size=<em class="replaceable"><code>size</code></em>;] <em class="replaceable"><code>file-specification-list</code></em>
</pre><p>
                The <code class="literal">name</code> of the tablespace is
                optional and defaults to <code class="literal">DEFAULT-TS</code>.
                The <code class="literal">extent_size</code> is also optional; it
                defaults to <code class="literal">1M</code>. The
                <em class="replaceable"><code>file-specification-list</code></em> uses
                the same syntax as shown with the
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-initiallogfilegroup"><code class="literal">InitialLogfileGroup</code></a>
                parameter, the only difference being that each
                <em class="replaceable"><code>file-specification</code></em> used with
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-initialtablespace"><code class="literal">InitialTablespace</code></a>
                corresponds to a data file. At least one must be
                specified in the
                <em class="replaceable"><code>file-specification-list</code></em>. Data
                files are placed according to any values that have been
                set for
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempath"><code class="literal">FileSystemPath</code></a>,
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathdd"><code class="literal">FileSystemPathDD</code></a>,
                and
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathdatafiles"><code class="literal">FileSystemPathDataFiles</code></a>,
                just as if they had been created as the result of a
                <a class="link" href="sql-syntax.html#create-tablespace" title="13.1.21 CREATE TABLESPACE Syntax"><code class="literal">CREATE TABLESPACE</code></a> or
                <a class="link" href="sql-syntax.html#alter-tablespace" title="13.1.10 ALTER TABLESPACE Syntax"><code class="literal">ALTER TABLESPACE</code></a>
                statement.
              </p><p>
                For example, consider the following line specifying
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-initialtablespace"><code class="literal">InitialTablespace</code></a>
                in the <code class="literal">[ndbd default]</code> section of the
                <code class="filename">config.ini</code> file (as with
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-initiallogfilegroup"><code class="literal">InitialLogfileGroup</code></a>,
                this parameter should always be set in the
                <code class="literal">[ndbd default]</code> section, as the
                behavior of an NDB Cluster when different values are set
                on different data nodes is not defined):
              </p><pre data-lang="ini" class="programlisting">
InitialTablespace = name=TS1; extent_size=8M; data1.dat:2G; data2.dat:4G
</pre><p>
                This is equivalent to the following SQL statements:
              </p><pre data-lang="sql" class="programlisting">
CREATE TABLESPACE TS1
    ADD DATAFILE 'data1.dat'
    EXTENT_SIZE 8M
    INITIAL_SIZE 2G
    ENGINE NDBCLUSTER;

ALTER TABLESPACE TS1
    ADD DATAFILE 'data2.dat'
    INITIAL_SIZE 4G
    ENGINE NDBCLUSTER;
</pre><p>
                This tablespace is created when the data nodes are
                started with <code class="option">--initial</code>, and can be used
                whenever creating NDB Cluster Disk Data tables
                thereafter.
</p></li></ul>
</div>
</li></ul>
</div>
<p><a name="mysql-cluster-ndbd-definition-gcp-stop-errors"></a><b>Disk Data and GCP Stop errors. </b>
          <a class="indexterm" name="idm140091598706224"></a>

          <a class="indexterm" name="idm140091598704736"></a>

          Errors encountered when using Disk Data tables such as
          <span class="errortext">Node <em class="replaceable"><code>nodeid</code></em> killed this
          node because GCP stop was detected</span> (error 2303)
          are often referred to as <span class="quote">“<span class="quote">GCP stop errors</span>”</span>. Such
          errors occur when the redo log is not flushed to disk quickly
          enough; this is usually due to slow disks and insufficient
          disk throughput.
        </p><p>
        You can help prevent these errors from occurring by using faster
        disks, and by placing Disk Data files on a separate disk from
        the data node file system. Reducing the value of
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenglobalcheckpoints"><code class="literal">TimeBetweenGlobalCheckpoints</code></a>
        tends to decrease the amount of data to be written for each
        global checkpoint, and so may provide some protection against
        redo log buffer overflows when trying to write a global
        checkpoint; however, reducing this value also permits less time
        in which to write the GCP, so this must be done with caution.
      </p><a class="indexterm" name="idm140091598699456"></a><a class="indexterm" name="idm140091598698384"></a><a class="indexterm" name="idm140091598697312"></a><p>
        In addition to the considerations given for
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskpagebuffermemory"><code class="literal">DiskPageBufferMemory</code></a> as
        explained previously, it is also very important that the
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskiothreadpool"><code class="literal">DiskIOThreadPool</code></a>
        configuration parameter be set correctly; having
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskiothreadpool"><code class="literal">DiskIOThreadPool</code></a> set too
        high is very likely to cause GCP stop errors (Bug #37227).
      </p><p>
        GCP stops can be caused by save or commit timeouts; the
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenepochstimeout"><code class="literal">TimeBetweenEpochsTimeout</code></a>
        data node configuration parameter determines the timeout for
        commits. However, it is possible to disable both types of
        timeouts by setting this parameter to 0.
      </p><p><b>Parameters for configuring send buffer memory allocation. </b>
          Send buffer memory is allocated dynamically from a memory pool
          shared between all transporters, which means that the size of
          the send buffer can be adjusted as necessary. (Previously, the
          NDB kernel used a fixed-size send buffer for every node in the
          cluster, which was allocated when the node started and could
          not be changed while the node was running.) The
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-totalsendbuffermemory"><code class="literal">TotalSendBufferMemory</code></a>
          and <a class="link" href="mysql-cluster.html#ndbparam-tcp-overloadlimit"><code class="literal">OverLoadLimit</code></a> data
          node configuration parameters permit the setting of limits on
          this memory allocation. For more information about the use of
          these parameters (as well as
          <a class="link" href="mysql-cluster.html#ndbparam-tcp-sendbuffermemory"><code class="literal">SendBufferMemory</code></a>), see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-config-send-buffers" title="22.3.3.14 Configuring NDB Cluster Send Buffer Parameters">Section 22.3.3.14, “Configuring NDB Cluster Send Buffer Parameters”</a>.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-extrasendbuffermemory"></a>
            <a class="indexterm" name="idm140091598682288"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-extrasendbuffermemory"><code class="literal">ExtraSendBufferMemory</code></a>
          </p><p>
            This parameter specifies the amount of transporter send
            buffer memory to allocate in addition to any set using
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-totalsendbuffermemory"><code class="literal">TotalSendBufferMemory</code></a>,
            <a class="link" href="mysql-cluster.html#ndbparam-tcp-sendbuffermemory"><code class="literal">SendBufferMemory</code></a>, or
            both.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-totalsendbuffermemory"></a>
            <a class="indexterm" name="idm140091598675248"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-totalsendbuffermemory"><code class="literal">TotalSendBufferMemory</code></a>
          </p><p>
            This parameter is used to determine the total amount of
            memory to allocate on this node for shared send buffer
            memory among all configured transporters.
          </p><p>
            If this parameter is set, its minimum permitted value is
            256KB; 0 indicates that the parameter has not been set. For
            more detailed information, see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-config-send-buffers" title="22.3.3.14 Configuring NDB Cluster Send Buffer Parameters">Section 22.3.3.14, “Configuring NDB Cluster Send Buffer Parameters”</a>.
</p></li></ul>
</div>
<p>
        See also <a class="xref" href="mysql-cluster.html#mysql-cluster-online-add-node" title="22.5.15 Adding NDB Cluster Data Nodes Online">Section 22.5.15, “Adding NDB Cluster Data Nodes Online”</a>.
      </p><p><a name="mysql-cluster-redo-over-commit-handling"></a><b>Redo log over-commit handling. </b>
          It is possible to control a data node's handling of
          operations when too much time is taken flushing redo logs to
          disk. This occurs when a given redo log flush takes longer
          than
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-redoovercommitlimit"><code class="literal">RedoOverCommitLimit</code></a>
          seconds, more than
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-redoovercommitcounter"><code class="literal">RedoOverCommitCounter</code></a>
          times, causing any pending transactions to be aborted. When
          this happens, the API node that sent the transaction can
          handle the operations that should have been committed either
          by queuing the operations and re-trying them, or by aborting
          them, as determined by
          <a class="link" href="mysql-cluster.html#ndbparam-api-defaultoperationredoproblemaction"><code class="literal">DefaultOperationRedoProblemAction</code></a>.
          The data node configuration parameters for setting the timeout
          and number of times it may be exceeded before the API node
          takes this action are described in the following list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-redoovercommitcounter"></a>
            <a class="indexterm" name="idm140091598661552"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-redoovercommitcounter"><code class="literal">RedoOverCommitCounter</code></a>
</p>
<div class="table">
<a name="redoovercommitcounter-ndbd-table"></a><p class="title"><b>Table 22.174 This table provides type and
value information for the RedoOverCommitCounter data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>3</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            When
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-redoovercommitlimit"><code class="literal">RedoOverCommitLimit</code></a>
            is exceeded when trying to write a given redo log to disk
            this many times or more, any transactions that were not
            committed as a result are aborted, and an API node where any
            of these transactions originated handles the operations
            making up those transactions according to its value for
            <a class="link" href="mysql-cluster.html#ndbparam-api-defaultoperationredoproblemaction"><code class="literal">DefaultOperationRedoProblemAction</code></a>
            (by either queuing the operations to be re-tried, or
            aborting them).
          </p><p>
            <code class="literal">RedoOverCommitCounter</code> defaults to 3. Set
            it to 0 to disable the limit.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-redoovercommitlimit"></a>
            <a class="indexterm" name="idm140091598632176"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-redoovercommitlimit"><code class="literal">RedoOverCommitLimit</code></a>
</p>
<div class="table">
<a name="redoovercommitlimit-ndbd-table"></a><p class="title"><b>Table 22.175 This table provides type and
value information for the RedoOverCommitLimit data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>seconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>20</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter sets an upper limit in seconds for trying to
            write a given redo log to disk before timing out. The number
            of times the data node tries to flush this redo log, but
            takes longer than <code class="literal">RedoOverCommitLimit</code>, is
            kept and compared with
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-redoovercommitcounter"><code class="literal">RedoOverCommitCounter</code></a>,
            and when flushing takes too long more times than the value
            of that parameter, any transactions that were not committed
            as a result of the flush timeout are aborted. When this
            occurs, the API node where any of these transactions
            originated handles the operations making up those
            transactions according to its
            <a class="link" href="mysql-cluster.html#ndbparam-api-defaultoperationredoproblemaction"><code class="literal">DefaultOperationRedoProblemAction</code></a>
            setting (it either queues the operations to be re-tried, or
            aborts them).
          </p><p>
            By default, <code class="literal">RedoOverCommitLimit</code> is 20
            seconds. Set to 0 to disable checking for redo log flush
            timeouts.
</p></li></ul>
</div>
<p><b>Controlling restart attempts. </b>
          It is possible to exercise finely-grained control over restart
          attempts by data nodes when they fail to start using the
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxstartfailretries"><code class="literal">MaxStartFailRetries</code></a>
          and
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-startfailretrydelay"><code class="literal">StartFailRetryDelay</code></a>
          data node configuration parameters.
        </p><p>
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxstartfailretries"><code class="literal">MaxStartFailRetries</code></a>
        limits the total number of retries made before giving up on
        starting the data node,
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-startfailretrydelay"><code class="literal">StartFailRetryDelay</code></a> sets
        the number of seconds between retry attempts. These parameters
        are listed here:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-startfailretrydelay"></a>
            <a class="indexterm" name="idm140091598594224"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-startfailretrydelay"><code class="literal">StartFailRetryDelay</code></a>
</p>
<div class="table">
<a name="startfailretrydelay-ndbd-table"></a><p class="title"><b>Table 22.176 This table provides type and
value information for the StartFailRetryDelay data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Use this parameter to set the number of seconds between
            restart attempts by the data node in the event on failure on
            startup. The default is 0 (no delay).
          </p><p>
            Both this parameter and
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxstartfailretries"><code class="literal">MaxStartFailRetries</code></a>
            are ignored unless
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-stoponerror"><code class="literal">StopOnError</code></a> is equal
            to 0.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxstartfailretries"></a>
            <a class="indexterm" name="idm140091598566192"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxstartfailretries"><code class="literal">MaxStartFailRetries</code></a>
</p>
<div class="table">
<a name="maxstartfailretries-ndbd-table"></a><p class="title"><b>Table 22.177 This table provides type and
value information for the MaxStartFailRetries data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>3</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Use this parameter to limit the number restart attempts made
            by the data node in the event that it fails on startup. The
            default is 3 attempts.
          </p><p>
            Both this parameter and
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-startfailretrydelay"><code class="literal">StartFailRetryDelay</code></a>
            are ignored unless
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-stoponerror"><code class="literal">StopOnError</code></a> is equal
            to 0.
</p></li></ul>
</div>
<p><a name="mysql-cluster-ndbd-definition-index-statistics-parameters"></a><b>NDB index statistics parameters. </b>
          <a class="indexterm" name="idm140091598537520"></a>

          The parameters in the following list relate to NDB index
          statistics generation.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-indexstatautocreate"></a>
            <a class="indexterm" name="idm140091598534400"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstatautocreate"><code class="literal">IndexStatAutoCreate</code></a>
</p>
<div class="table">
<a name="indexstatautocreate-ndbd-table"></a><p class="title"><b>Table 22.178 This table provides type and
value information for the IndexStatAutoCreate data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0, 1</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Enable (set equal to 1) or disable (set equal to 0)
            automatic statistics collection when indexes are created.
            Disabled by default.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-indexstatautoupdate"></a>
            <a class="indexterm" name="idm140091598509024"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstatautoupdate"><code class="literal">IndexStatAutoUpdate</code></a>
</p>
<div class="table">
<a name="indexstatautoupdate-ndbd-table"></a><p class="title"><b>Table 22.179 This table provides type and
value information for the IndexStatAutoUpdate data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0, 1</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Enable (set equal to 1) or disable (set equal to 0)
            monitoring of indexes for changes and trigger automatic
            statistics updates these are detected. The amount and degree
            of change needed to trigger the updates are determined by
            the settings for the
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstattriggerpct"><code class="literal">IndexStatTriggerPct</code></a>
            and
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstattriggerscale"><code class="literal">IndexStatTriggerScale</code></a>
            options.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-indexstatsavesize"></a>
            <a class="indexterm" name="idm140091598480944"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstatsavesize"><code class="literal">IndexStatSaveSize</code></a>
</p>
<div class="table">
<a name="indexstatsavesize-ndbd-table"></a><p class="title"><b>Table 22.180 This table provides type and
value information for the IndexStatSaveSize data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>32768</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>IN</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Maximum space in bytes allowed for the saved statistics of
            any given index in the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>
            system tables and in the <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> memory
            cache.
          </p><p>
            At least one sample is always produced, regardless of any
            size limit. This size is scaled by
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstatsavescale"><code class="literal">IndexStatSaveScale</code></a>.
          </p><p>
            The size specified by
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstatsavesize"><code class="literal">IndexStatSaveSize</code></a> is
            scaled by the value of
            <code class="literal">IndexStatTriggerPct</code> for a large index,
            times 0.01. This is further multiplied by the logarithm to
            the base 2 of the index size. Setting
            <code class="literal">IndexStatTriggerPct</code> equal to 0 disables
            the scaling effect.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-indexstatsavescale"></a>
            <a class="indexterm" name="idm140091598448096"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstatsavescale"><code class="literal">IndexStatSaveScale</code></a>
</p>
<div class="table">
<a name="indexstatsavescale-ndbd-table"></a><p class="title"><b>Table 22.181 This table provides type and
value information for the IndexStatSaveScale data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>percentage</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>100</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>IN</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The size specified by
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstatsavesize"><code class="literal">IndexStatSaveSize</code></a> is
            scaled by the value of
            <code class="literal">IndexStatTriggerPct</code> for a large index,
            times 0.01. This is further multiplied by the logarithm to
            the base 2 of the index size. Setting
            <code class="literal">IndexStatTriggerPct</code> equal to 0 disables
            the scaling effect.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-indexstattriggerpct"></a>
            <a class="indexterm" name="idm140091598419904"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstattriggerpct"><code class="literal">IndexStatTriggerPct</code></a>
</p>
<div class="table">
<a name="indexstattriggerpct-ndbd-table"></a><p class="title"><b>Table 22.182 This table provides type and
value information for the IndexStatTriggerPct data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>percentage</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>100</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>IN</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Percentage change in updates that triggers an index
            statistics update. The value is scaled by
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstattriggerscale"><code class="literal">IndexStatTriggerScale</code></a>.
            You can disable this trigger altogether by setting
            <code class="literal">IndexStatTriggerPct</code> to 0.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-indexstattriggerscale"></a>
            <a class="indexterm" name="idm140091598392512"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstattriggerscale"><code class="literal">IndexStatTriggerScale</code></a>
</p>
<div class="table">
<a name="indexstattriggerscale-ndbd-table"></a><p class="title"><b>Table 22.183 This table provides type and
value information for the IndexStatTriggerScale data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>percentage</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>100</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>IN</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Scale
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstattriggerpct"><code class="literal">IndexStatTriggerPct</code></a>
            by this amount times 0.01 for a large index. A value of 0
            disables scaling.
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-indexstatupdatedelay"></a>
            <a class="indexterm" name="idm140091598365904"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstatupdatedelay"><code class="literal">IndexStatUpdateDelay</code></a>
</p>
<div class="table">
<a name="indexstatupdatedelay-ndbd-table"></a><p class="title"><b>Table 22.184 This table provides type and
value information for the IndexStatUpdateDelay data node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>seconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>60</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>IN</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Minimum delay in seconds between automatic index statistics
            updates for a given index. Setting this variable to 0
            disables any delay. The default is 60 seconds.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-api-definition"></a>22.3.3.7 Defining SQL and Other API Nodes in an NDB Cluster</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091598340032"></a><a class="indexterm" name="idm140091598338544"></a><a class="indexterm" name="idm140091598337056"></a><p>
        The <code class="literal">[mysqld]</code> and <code class="literal">[api]</code>
        sections in the <code class="filename">config.ini</code> file define the
        behavior of the MySQL servers (SQL nodes) and other applications
        (API nodes) used to access cluster data. None of the parameters
        shown is required. If no computer or host name is provided, any
        host can use this SQL or API node.
      </p><p>
        Generally speaking, a <code class="literal">[mysqld]</code> section is
        used to indicate a MySQL server providing an SQL interface to
        the cluster, and an <code class="literal">[api]</code> section is used for
        applications other than <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> processes
        accessing cluster data, but the two designations are actually
        synonymous; you can, for instance, list parameters for a MySQL
        server acting as an SQL node in an <code class="literal">[api]</code>
        section.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          For a discussion of MySQL server options for NDB Cluster, see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-mysqld" title="22.3.3.9.1 MySQL Server Options for NDB Cluster">Section 22.3.3.9.1, “MySQL Server Options for NDB Cluster”</a>. For
          information about MySQL server system variables relating to
          NDB Cluster, see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-system-variables" title="22.3.3.9.2 NDB Cluster System Variables">Section 22.3.3.9.2, “NDB Cluster System Variables”</a>.
</p>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-api-id"></a>
            <a class="indexterm" name="idm140091598325024"></a>

            <code class="literal">Id</code>
</p>
<div class="table">
<a name="id-api-table"></a><p class="title"><b>Table 22.185 This table provides type and
value information for the Id API node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1 - 255</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-api-definition.html#mysql-cluster-api-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>IS</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The <code class="literal">Id</code> is an integer value used to
            identify the node in all cluster internal messages. The
            permitted range of values is 1 to 255 inclusive. This value
            must be unique for each node in the cluster, regardless of
            the type of node.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              Data node IDs must be less than 49, regardless of the NDB
              Cluster version used. If you plan to deploy a large number
              of data nodes, it is a good idea to limit the node IDs for
              API nodes (and management nodes) to values greater than
              48.
</p>
</div>
<p>
            <a class="link" href="mysql-cluster.html#ndbparam-api-nodeid"><code class="literal">NodeId</code></a> is the
            preferred parameter name to use when identifying API nodes.
            (<code class="literal">Id</code> continues to be supported for
            backward compatibility, but is now deprecated and generates
            a warning when used. It is also subject to future removal.)
          </p></li><li class="listitem"><p><a name="ndbparam-api-connectionmap"></a>
            <a class="indexterm" name="idm140091598296256"></a>

            <code class="literal">ConnectionMap</code>
</p>
<div class="table">
<a name="connectionmap-api-table"></a><p class="title"><b>Table 22.186 This table provides type and
value information for the ConnectionMap API node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>string</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-api-definition.html#mysql-cluster-api-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Specifies which data nodes to connect.
          </p></li><li class="listitem"><p><a name="ndbparam-api-nodeid"></a>
            <a class="indexterm" name="idm140091598272048"></a>

            <code class="literal">NodeId</code>
</p>
<div class="table">
<a name="nodeid-api-table"></a><p class="title"><b>Table 22.187 This table provides type and
value information for the NodeId API node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1 - 255</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-api-definition.html#mysql-cluster-api-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>IS</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The <code class="literal">NodeId</code> is an integer value used to
            identify the node in all cluster internal messages. The
            permitted range of values is 1 to 255 inclusive. This value
            must be unique for each node in the cluster, regardless of
            the type of node.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              Data node IDs must be less than 49, regardless of the NDB
              Cluster version used. If you plan to deploy a large number
              of data nodes, it is a good idea to limit the node IDs for
              API nodes (and management nodes) to values greater than
              48.
</p>
</div>
<p>
            <a class="link" href="mysql-cluster.html#ndbparam-api-nodeid"><code class="literal">NodeId</code></a> is the
            preferred parameter name to use when identifying management
            nodes. An alias, <code class="literal">Id</code>, was used for this
            purpose in very old versions of NDB Cluster, and continues
            to be supported for backward compatibility; it is now
            deprecated and generates a warning when used, and is subject
            to removal in a future release of NDB Cluster.
          </p></li><li class="listitem"><p><a name="ndbparam-api-executeoncomputer"></a>
            <a class="indexterm" name="idm140091598243056"></a>

            <code class="literal">ExecuteOnComputer</code>
</p>
<div class="table">
<a name="executeoncomputer-api-table"></a><p class="title"><b>Table 22.188 This table provides type and
value information for the ExecuteOnComputer API node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>name</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-api-definition.html#mysql-cluster-api-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This refers to the <code class="literal">Id</code> set for one of the
            computers (hosts) defined in a <code class="literal">[computer]</code>
            section of the configuration file.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              This parameter is deprecated, and is subject to removal in
              a future release. Use the
              <a class="link" href="mysql-cluster.html#ndbparam-api-hostname"><code class="literal">HostName</code></a> parameter
              instead.
</p>
</div>
</li><li class="listitem"><p><a name="ndbparam-api-hostname"></a>
            <a class="indexterm" name="idm140091598215152"></a>

            <code class="literal">HostName</code>
</p>
<div class="table">
<a name="hostname-api-table"></a><p class="title"><b>Table 22.189 This table provides type and
value information for the HostName API node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>name or IP address</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-api-definition.html#mysql-cluster-api-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Specifying this parameter defines the hostname of the
            computer on which the SQL node (API node) is to reside. To
            specify a hostname, either this parameter or
            <code class="literal">ExecuteOnComputer</code> is required.
          </p><p>
            If no <code class="literal">HostName</code> or
            <code class="literal">ExecuteOnComputer</code> is specified in a given
            <code class="literal">[mysql]</code> or <code class="literal">[api]</code>
            section of the <code class="filename">config.ini</code> file, then an
            SQL or API node may connect using the corresponding
            <span class="quote">“<span class="quote">slot</span>”</span> from any host which can establish a
            network connection to the management server host machine.
            <span class="emphasis"><em>This differs from the default behavior for data
            nodes, where <code class="literal">localhost</code> is assumed for
            <code class="literal">HostName</code> unless otherwise
            specified</em></span>.
          </p></li><li class="listitem"><p><a name="ndbparam-api-locationdomainid"></a>
            <a class="indexterm" name="idm140091598183296"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-api-locationdomainid"><code class="literal">LocationDomainId</code></a>
</p>
<div class="table">
<a name="locationdomainid-api-table"></a><p class="title"><b>Table 22.190 This table provides type and
value information for the LocationDomainId API node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 16</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-api-definition.html#mysql-cluster-api-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Assigns an SQL or other API node to a specific
            <a class="ulink" href="https://docs.us-phoenix-1.oraclecloud.com/Content/General/Concepts/regions.htm" target="_top">availability
            domain</a> (also known as an availability zone) within a
            cloud. By informing <code class="literal">NDB</code> which nodes are
            in which availability domains, performance can be improved
            in a cloud environment in the following ways:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                If requested data is not found on the same node, reads
                can be directed to another node in the same availability
                domain.
              </p></li><li class="listitem"><p>
                Communication between nodes in different availability
                domains are guaranteed to use <code class="literal">NDB</code>
                transporters' WAN support without any further
                manual intervention.
              </p></li><li class="listitem"><p>
                The transporter's group number can be based on
                which availability domain is used, such that also SQL
                and other API nodes communicate with local data nodes in
                the same availability domain whenever possible.
              </p></li><li class="listitem"><p>
                The arbitrator can be selected from an availability
                domain in which no data nodes are present, or, if no
                such availability domain can be found, from a third
                availability domain.
</p></li></ul>
</div>
<p>
            <code class="literal">LocationDomainId</code> takes an integer value
            between 0 and 16 inclusive, with 0 being the default; using
            0 is the same as leaving the parameter unset.
          </p></li><li class="listitem"><p><a name="ndbparam-api-arbitrationrank"></a>
            <a class="indexterm" name="idm140091598150208"></a>

            <code class="literal">ArbitrationRank</code>
</p>
<div class="table">
<a name="arbitrationrank-api-table"></a><p class="title"><b>Table 22.191 This table provides type and
value information for the ArbitrationRank API node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>0-2</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 2</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-api-definition.html#mysql-cluster-api-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter defines which nodes can act as arbitrators.
            Both management nodes and SQL nodes can be arbitrators. A
            value of 0 means that the given node is never used as an
            arbitrator, a value of 1 gives the node high priority as an
            arbitrator, and a value of 2 gives it low priority. A normal
            configuration uses the management server as arbitrator,
            setting its <code class="literal">ArbitrationRank</code> to 1 (the
            default for management nodes) and those for all SQL nodes to
            0 (the default for SQL nodes).
          </p><p>
            By setting <code class="literal">ArbitrationRank</code> to 0 on all
            management and SQL nodes, you can disable arbitration
            completely. You can also control arbitration by overriding
            this parameter; to do so, set the
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-arbitration"><code class="literal">Arbitration</code></a>
            parameter in the <code class="literal">[ndbd default]</code> section
            of the <code class="filename">config.ini</code> global configuration
            file.
          </p></li><li class="listitem"><p><a name="ndbparam-api-arbitrationdelay"></a>
            <a class="indexterm" name="idm140091598120592"></a>

            <code class="literal">ArbitrationDelay</code>
</p>
<div class="table">
<a name="arbitrationdelay-api-table"></a><p class="title"><b>Table 22.192 This table provides type and
value information for the ArbitrationDelay API node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>milliseconds</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-api-definition.html#mysql-cluster-api-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Setting this parameter to any other value than 0 (the
            default) means that responses by the arbitrator to
            arbitration requests will be delayed by the stated number of
            milliseconds. It is usually not necessary to change this
            value.
          </p></li><li class="listitem"><p><a name="ndbparam-api-batchbytesize"></a>
            <a class="indexterm" name="idm140091598096032"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-api-batchbytesize"><code class="literal">BatchByteSize</code></a>
</p>
<div class="table">
<a name="batchbytesize-api-table"></a><p class="title"><b>Table 22.193 This table provides type and
value information for the BatchByteSize API node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>16K</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1K - 1M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-api-definition.html#mysql-cluster-api-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            For queries that are translated into full table scans or
            range scans on indexes, it is important for best performance
            to fetch records in properly sized batches. It is possible
            to set the proper size both in terms of number of records
            (<a class="link" href="mysql-cluster.html#ndbparam-api-batchsize"><code class="literal">BatchSize</code></a>) and in
            terms of bytes (<code class="literal">BatchByteSize</code>). The
            actual batch size is limited by both parameters.
          </p><p>
            The speed at which queries are performed can vary by more
            than 40% depending upon how this parameter is set.
          </p><p>
            This parameter is measured in bytes. The default value is
            16K.
          </p></li><li class="listitem"><p><a name="ndbparam-api-batchsize"></a>
            <a class="indexterm" name="idm140091598067920"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-api-batchsize"><code class="literal">BatchSize</code></a>
</p>
<div class="table">
<a name="batchsize-api-table"></a><p class="title"><b>Table 22.194 This table provides type and
value information for the BatchSize API node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>records</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>256</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1 - 992</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-api-definition.html#mysql-cluster-api-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter is measured in number of records and is by
            default set to 256. The maximum size is 992.
          </p></li><li class="listitem"><p><a name="ndbparam-api-extrasendbuffermemory"></a>
            <a class="indexterm" name="idm140091598043056"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-api-extrasendbuffermemory"><code class="literal">ExtraSendBufferMemory</code></a>
</p>
<div class="table">
<a name="extrasendbuffermemory-api-table"></a><p class="title"><b>Table 22.195 This table provides type and
value information for the ExtraSendBufferMemory API node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-api-definition.html#mysql-cluster-api-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter specifies the amount of transporter send
            buffer memory to allocate in addition to any that has been
            set using
            <a class="link" href="mysql-cluster.html#ndbparam-api-totalsendbuffermemory"><code class="literal">TotalSendBufferMemory</code></a>,
            <a class="link" href="mysql-cluster.html#ndbparam-tcp-sendbuffermemory"><code class="literal">SendBufferMemory</code></a>, or
            both.
          </p></li><li class="listitem"><p><a name="ndbparam-api-heartbeatthreadpriority"></a>
            <a class="indexterm" name="idm140091598015120"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-api-heartbeatthreadpriority"><code class="literal">HeartbeatThreadPriority</code></a>
</p>
<div class="table">
<a name="heartbeatthreadpriority-api-table"></a><p class="title"><b>Table 22.196 This table provides type and
value information for the HeartbeatThreadPriority API node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>string</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-api-definition.html#mysql-cluster-api-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Use this parameter to set the scheduling policy and priority
            of heartbeat threads for management and API nodes. The
            syntax for setting this parameter is shown here:
          </p><pre data-lang="simple" class="programlisting">
HeartbeatThreadPriority = <em class="replaceable"><code>policy</code></em>[, <em class="replaceable"><code>priority</code></em>]

<em class="replaceable"><code>policy</code></em>:
  {FIFO | RR}
</pre><p>
            When setting this parameter, you must specify a policy. This
            is one of <code class="literal">FIFO</code> (first in, first in) or
            <code class="literal">RR</code> (round robin). This followed
            optionally by the priority (an integer).
          </p></li><li class="listitem"><p><a name="ndbparam-api-maxscanbatchsize"></a>
            <a class="indexterm" name="idm140091597985872"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-api-maxscanbatchsize"><code class="literal">MaxScanBatchSize</code></a>
</p>
<div class="table">
<a name="maxscanbatchsize-api-table"></a><p class="title"><b>Table 22.197 This table provides type and
value information for the MaxScanBatchSize API node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>256K</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>32K - 16M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-api-definition.html#mysql-cluster-api-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The batch size is the size of each batch sent from each data
            node. Most scans are performed in parallel to protect the
            MySQL Server from receiving too much data from many nodes in
            parallel; this parameter sets a limit to the total batch
            size over all nodes.
          </p><p>
            The default value of this parameter is set to 256KB. Its
            maximum size is 16MB.
          </p></li><li class="listitem"><p><a name="ndbparam-api-totalsendbuffermemory"></a>
            <a class="indexterm" name="idm140091597960208"></a>

            <code class="literal">TotalSendBufferMemory</code>
</p>
<div class="table">
<a name="totalsendbuffermemory-api-table"></a><p class="title"><b>Table 22.198 This table provides type and
value information for the TotalSendBufferMemory API node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>256K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-api-definition.html#mysql-cluster-api-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter is used to determine the total amount of
            memory to allocate on this node for shared send buffer
            memory among all configured transporters.
          </p><p>
            If this parameter is set, its minimum permitted value is
            256KB; 0 indicates that the parameter has not been set. For
            more detailed information, see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-config-send-buffers" title="22.3.3.14 Configuring NDB Cluster Send Buffer Parameters">Section 22.3.3.14, “Configuring NDB Cluster Send Buffer Parameters”</a>.
          </p></li><li class="listitem"><p><a name="ndbparam-api-autoreconnect"></a>
            <a class="indexterm" name="idm140091597934032"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-api-autoreconnect"><code class="literal">AutoReconnect</code></a>
</p>
<div class="table">
<a name="autoreconnect-api-table"></a><p class="title"><b>Table 22.199 This table provides type and
value information for the AutoReconnect API node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>boolean</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>true, false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-api-definition.html#mysql-cluster-api-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter is <code class="literal">false</code> by default. This
            forces disconnected API nodes (including MySQL Servers
            acting as SQL nodes) to use a new connection to the cluster
            rather than attempting to re-use an existing one, as re-use
            of connections can cause problems when using
            dynamically-allocated node IDs. (Bug #45921)
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              This parameter can be overridden using the NDB API. For
              more information, see
              <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb-cluster-connection-set-auto-reconnect.html" target="_top">Ndb_cluster_connection::set_auto_reconnect()</a>,
              and
              <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb-cluster-connection-get-auto-reconnect.html" target="_top">Ndb_cluster_connection::get_auto_reconnect()</a>.
</p>
</div>
</li><li class="listitem"><p><a name="ndbparam-api-defaultoperationredoproblemaction"></a>
            <a class="indexterm" name="idm140091597905152"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-api-defaultoperationredoproblemaction"><code class="literal">DefaultOperationRedoProblemAction</code></a>
</p>
<div class="table">
<a name="defaultoperationredoproblemaction-api-table"></a><p class="title"><b>Table 22.200 This table provides type and
value information for the DefaultOperationRedoProblemAction API node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>enumeration</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>QUEUE</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>ABORT, QUEUE</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-api-definition.html#mysql-cluster-api-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter (along with
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-redoovercommitlimit"><code class="literal">RedoOverCommitLimit</code></a>
            and
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-redoovercommitcounter"><code class="literal">RedoOverCommitCounter</code></a>)
            controls the data node's handling of operations when
            too much time is taken flushing redo logs to disk. This
            occurs when a given redo log flush takes longer than
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-redoovercommitlimit"><code class="literal">RedoOverCommitLimit</code></a>
            seconds, more than
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-redoovercommitcounter"><code class="literal">RedoOverCommitCounter</code></a>
            times, causing any pending transactions to be aborted.
          </p><p>
            When this happens, the node can respond in either of two
            ways, according to the value of
            <code class="literal">DefaultOperationRedoProblemAction</code>, listed
            here:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">ABORT</code>: Any pending operations from
                aborted transactions are also aborted.
              </p></li><li class="listitem"><p>
                <code class="literal">QUEUE</code>: Pending operations from
                transactions that were aborted are queued up to be
                re-tried. This the default. Pending operations are still
                aborted when the redo log runs out of space—that
                is, when <span class="errorname">P_TAIL_PROBLEM</span> errors
                occur.
</p></li></ul>
</div>
</li><li class="listitem"><p><a name="ndbparam-api-defaulthashmapsize"></a>
            <a class="indexterm" name="idm140091597868720"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-api-defaulthashmapsize"><code class="literal">DefaultHashMapSize</code></a>
</p>
<div class="table">
<a name="defaulthashmapsize-api-table"></a><p class="title"><b>Table 22.201 This table provides type and
value information for the DefaultHashMapSize API node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>buckets</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>3840</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 3840</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-api-definition.html#mysql-cluster-api-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The size of the table hash maps used by
            <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> is configurable using this
            parameter. <code class="literal">DefaultHashMapSize</code> can take
            any of three possible values (0, 240, 3840). These values
            and their effects are described in the following table.
</p>
<div class="table">
<a name="idm140091597842896"></a><p class="title"><b>Table 22.202 DefaultHashMapSize parameter values</b></p>
<div class="table-contents">
<table><col width="20%"><col width="80%"><thead><tr>
                <th scope="col">Value</th>
                <th scope="col">Description / Effect</th>
              </tr></thead><tbody><tr>
                <td scope="row"><code class="literal">0</code></td>
                <td>Use the lowest value set, if any, for this parameter among all data
                  nodes and API nodes in the cluster; if it is not set
                  on any data or API node, use the default value.</td>
              </tr><tr>
                <td scope="row"><code class="literal">240</code></td>
                <td>Old default hash map size</td>
              </tr><tr>
                <td scope="row"><code class="literal">3840</code></td>
                <td>Hash map size used by default in NDB 8.0</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The original intended use for this parameter was to
            facilitate upgrades and downgrades to and from older NDB
            Cluster versions, in which the hash map size differed, due
            to the fact that this change was not otherwise backward
            compatible. This is not an issue when upgrading to or
            downgrading from NDB Cluster 8.0.
          </p></li><li class="listitem"><p><a name="ndbparam-api-wan"></a>
            <a class="indexterm" name="idm140091597826656"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-api-wan"><code class="literal">Wan</code></a>
</p>
<div class="table">
<a name="wan-api-table"></a><p class="title"><b>Table 22.203 This table provides type and
value information for the wan API node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>boolean</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>true, false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-api-definition.html#mysql-cluster-api-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Use WAN TCP setting as default.
          </p></li><li class="listitem"><p><a name="ndbparam-api-connectbackoffmaxtime"></a>
            <a class="indexterm" name="idm140091597801920"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-api-connectbackoffmaxtime"><code class="literal">ConnectBackoffMaxTime</code></a>
</p>
<div class="table">
<a name="connectbackoffmaxtime-api-table"></a><p class="title"><b>Table 22.204 This table provides type and
value information for the ConnectBackoffMaxTime API node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-api-definition.html#mysql-cluster-api-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            In an NDB Cluster with many unstarted data nodes, the value
            of this parameter can be raised to circumvent connection
            attempts to data nodes which have not yet begun to function
            in the cluster, as well as moderate high traffic to
            management nodes. As long as the API node is not connected
            to any new data nodes, the value of the
            <a class="link" href="mysql-cluster.html#ndbparam-api-startconnectbackoffmaxtime"><code class="literal">StartConnectBackoffMaxTime</code></a>
            parameter is applied; otherwise,
            <code class="literal">ConnectBackoffMaxTime</code> is used to
            determine the length of time in milliseconds to wait between
            connection attempts.
          </p><p>
            Time elapsed <span class="emphasis"><em>during</em></span> node connection
            attempts is not taken into account when calculating elapsed
            time for this parameter. The timeout is applied with
            approximately 100 ms resolution, starting with a 100 ms
            delay; for each subsequent attempt, the length of this
            period is doubled until it reaches
            <code class="literal">ConnectBackoffMaxTime</code> milliseconds, up to
            a maximum of 100000 ms (100s).
          </p><p>
            Once the API node is connected to a data node and that node
            reports (in a heartbeat message) that it has connected to
            other data nodes, connection attempts to those data nodes
            are no longer affected by this parameter, and are made every
            100 ms thereafter until connected. Once a data node has
            started, it can take up
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-heartbeatintervaldbapi"><code class="literal">HeartbeatIntervalDbApi</code></a>
            for the API node to be notified that this has occurred.
          </p></li><li class="listitem"><p><a name="ndbparam-api-startconnectbackoffmaxtime"></a>
            <a class="indexterm" name="idm140091597770416"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-api-startconnectbackoffmaxtime"><code class="literal">StartConnectBackoffMaxTime</code></a>
</p>
<div class="table">
<a name="startconnectbackoffmaxtime-api-table"></a><p class="title"><b>Table 22.205 This table provides type and
value information for the StartConnectBackoffMaxTime API node configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-api-definition.html#mysql-cluster-api-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            In an NDB Cluster with many unstarted data nodes, the value
            of this parameter can be raised to circumvent connection
            attempts to data nodes which have not yet begun to function
            in the cluster, as well as moderate high traffic to
            management nodes. As long as the API node is not connected
            to any new data nodes, the value of the
            <code class="literal">StartConnectBackoffMaxTime</code> parameter is
            applied; otherwise,
            <a class="link" href="mysql-cluster.html#ndbparam-api-connectbackoffmaxtime"><code class="literal">ConnectBackoffMaxTime</code></a>
            is used to determine the length of time in milliseconds to
            wait between connection attempts.
          </p><p>
            Time elapsed <span class="emphasis"><em>during</em></span> node connection
            attempts is not taken into account when calculating elapsed
            time for this parameter. The timeout is applied with
            approximately 100 ms resolution, starting with a 100 ms
            delay; for each subsequent attempt, the length of this
            period is doubled until it reaches
            <code class="literal">StartConnectBackoffMaxTime</code> milliseconds,
            up to a maximum of 100000 ms (100s).
          </p><p>
            Once the API node is connected to a data node and that node
            reports (in a heartbeat message) that it has connected to
            other data nodes, connection attempts to those data nodes
            are no longer affected by this parameter, and are made every
            100 ms thereafter until connected. Once a data node has
            started, it can take up
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-heartbeatintervaldbapi"><code class="literal">HeartbeatIntervalDbApi</code></a>
            for the API node to be notified that this has occurred.
</p></li></ul>
</div>
<p><a name="ndbparam-api-apiverbose"></a><b>API Node Debugging Parameters. </b>
          You can use the <code class="literal">ApiVerbose</code> configuration
          parameter to enable debugging output from a given API node.
          This parameter takes an integer value. 0 is the default, and
          disables such debugging; 1 enables debugging output to the
          cluster log; 2 adds <code class="literal">DBDICT</code> debugging output
          as well. (Bug #20638450) See also
          <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-dump-command-1229.html" target="_top">DUMP 1229</a>.
        </p><p>
        You can also obtain information from a MySQL server running as
        an NDB Cluster SQL node using <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW
        STATUS</code></a> in the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client, as
        shown here:
      </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'ndb%';</code></strong>
+-----------------------------+----------------+
| Variable_name               | Value          |
+-----------------------------+----------------+
| Ndb_cluster_node_id         | 5              |
| Ndb_config_from_host        | 198.51.100.112 |
| Ndb_config_from_port        | 1186           |
| Ndb_number_of_storage_nodes | 4              |
+-----------------------------+----------------+
4 rows in set (0.02 sec)
</pre><p>
        For information about the status variables appearing in the
        output from this statement, see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-status-variables" title="22.3.3.9.3 NDB Cluster Status Variables">Section 22.3.3.9.3, “NDB Cluster Status Variables”</a>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          To add new SQL or API nodes to the configuration of a running
          NDB Cluster, it is necessary to perform a rolling restart of
          all cluster nodes after adding new <code class="literal">[mysqld]</code>
          or <code class="literal">[api]</code> sections to the
          <code class="filename">config.ini</code> file (or files, if you are
          using more than one management server). This must be done
          before the new SQL or API nodes can connect to the cluster.
        </p><p>
          It is <span class="emphasis"><em>not</em></span> necessary to perform any
          restart of the cluster if new SQL or API nodes can employ
          previously unused API slots in the cluster configuration to
          connect to the cluster.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-system-definition"></a>22.3.3.8 Defining the System</h4>

</div>

</div>

</div>
<p>
        The <code class="literal">[system]</code> section is used for parameters
        applying to the cluster as a whole. The
        <a class="link" href="mysql-cluster.html#ndbparam-system-name"><code class="literal">Name</code></a> system parameter
        is used with MySQL Enterprise Monitor;
        <a class="link" href="mysql-cluster.html#ndbparam-system-configgenerationnumber"><code class="literal">ConfigGenerationNumber</code></a>
        and <a class="link" href="mysql-cluster.html#ndbparam-system-primarymgmnode"><code class="literal">PrimaryMGMNode</code></a> are
        not used in production environments. Except when using NDB
        Cluster with MySQL Enterprise Monitor, is not necessary to have a
        <code class="literal">[system]</code> section in the
        <code class="filename">config.ini</code> file.
      </p><p>
        More information about these parameters can be found in the
        following list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-system-configgenerationnumber"></a>
            <a class="indexterm" name="idm140091597714560"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-system-configgenerationnumber"><code class="literal">ConfigGenerationNumber</code></a>
</p>
<div class="table">
<a name="configgenerationnumber-system-table"></a><p class="title"><b>Table 22.206 This table provides type and
value information for the ConfigGenerationNumber system configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-system-definition.html#mysql-cluster-system-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Configuration generation number. This parameter is currently
            unused.
          </p></li><li class="listitem"><p><a name="ndbparam-system-name"></a>
            <a class="indexterm" name="idm140091597689680"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-system-name"><code class="literal">Name</code></a>
</p>
<div class="table">
<a name="name-system-table"></a><p class="title"><b>Table 22.207 This table provides type and
value information for the Name system configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>string</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-system-definition.html#mysql-cluster-system-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Set a name for the cluster. This parameter is required for
            deployments with MySQL Enterprise Monitor; it is otherwise unused.
          </p><p>
            You can obtain the value of this parameter by checking the
            <a class="link" href="mysql-cluster.html#statvar_Ndb_system_name"><code class="literal">Ndb_system_name</code></a> status
            variable. In NDB API applications, you can also retrieve it
            using
            <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb-cluster-connection-get-system-name.html" target="_top"><code class="literal">get_system_name()</code></a>.
          </p></li><li class="listitem"><p><a name="ndbparam-system-primarymgmnode"></a>
            <a class="indexterm" name="idm140091597661792"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-system-primarymgmnode"><code class="literal">PrimaryMGMNode</code></a>
</p>
<div class="table">
<a name="primarymgmnode-system-table"></a><p class="title"><b>Table 22.208 This table provides type and
value information for the PrimaryMGMNode system configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-system-definition.html#mysql-cluster-system-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Node ID of the primary management node. This parameter is
            currently unused.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-options-variables"></a>22.3.3.9 MySQL Server Options and Variables for NDB Cluster</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091597636384"></a><a class="indexterm" name="idm140091597634928"></a><p>
        This section provides information about MySQL server options,
        server and status variables that are specific to NDB Cluster.
        For general information on using these, and for other options
        and variables not specific to NDB Cluster, see
        <a class="xref" href="server-administration.html#mysqld-server" title="5.1 The MySQL Server">Section 5.1, “The MySQL Server”</a>.
      </p><p>
        For NDB Cluster configuration parameters used in the cluster
        configuration file (usually named
        <code class="filename">config.ini</code>), see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-configuration" title="22.3 Configuration of NDB Cluster">Section 22.3, “Configuration of NDB Cluster”</a>.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="mysql-cluster-program-options-mysqld"></a>22.3.3.9.1 MySQL Server Options for NDB Cluster</h5>
</div>
</div>
</div>
<a class="indexterm" name="idm140091597628128"></a><a class="indexterm" name="idm140091597626640"></a><a class="indexterm" name="idm140091597625152"></a><a class="indexterm" name="idm140091597623648"></a><a class="indexterm" name="idm140091597622160"></a><p>
          This section provides descriptions of
          <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> server options relating to NDB
          Cluster. For information about <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>
          options not specific to NDB Cluster, and for general
          information about the use of options with
          <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>, see
          <a class="xref" href="server-administration.html#server-options" title="5.1.7 Server Command Options">Section 5.1.7, “Server Command Options”</a>.
        </p><p>
          For information about command-line options used with other NDB
          Cluster processes (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>,
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>, and <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a>),
          see <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
          For information about command-line options used with
          <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> utility programs (such as
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-desc" title="22.4.9 ndb_desc — Describe NDB Tables"><span class="command"><strong>ndb_desc</strong></span></a>, <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-size-pl" title="22.4.28 ndb_size.pl — NDBCLUSTER Size Requirement Estimator"><span class="command"><strong>ndb_size.pl</strong></span></a>,
          and <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-show-tables" title="22.4.27 ndb_show_tables — Display List of NDB Tables"><span class="command"><strong>ndb_show_tables</strong></span></a>), see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-programs" title="22.4 NDB Cluster Programs">Section 22.4, “NDB Cluster Programs”</a>.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_mysqld_ndbcluster"></a>
              <a class="indexterm" name="idm140091597603504"></a>

              <a class="indexterm" name="idm140091597602016"></a>

              <a class="link" href="mysql-cluster.html#option_mysqld_ndbcluster"><code class="option">--ndbcluster</code></a>
</p>
<div class="table">
<a name="ndbcluster-detailtable"></a><p class="title"><b>Table 22.209
Type and value information for ndbcluster</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndbcluster">ndbcluster</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>FALSE (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Enable NDB Cluster (if this version
                      of MySQL supports it)
                    </p><p>
                      Disabled by
                      <a class="link" href="mysql-cluster.html#option_mysqld_skip-ndbcluster"><code class="option">--skip-ndbcluster</code></a>.
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              The <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> storage engine
              is necessary for using NDB Cluster. If a
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> binary includes support for the
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> storage engine,
              the engine is disabled by default. Use the
              <a class="link" href="mysql-cluster.html#option_mysqld_ndbcluster"><code class="option">--ndbcluster</code></a> option to
              enable it. Use <code class="option">--skip-ndbcluster</code> to
              explicitly disable the engine.
            </p><p>
              The <code class="option">--ndbcluster</code> option is ignored (and
              the <code class="literal">NDB</code> storage engine is
              <span class="emphasis"><em>not</em></span> enabled) if
              <a class="link" href="server-administration.html#option_mysqld_initialize"><code class="option">--initialize</code></a> is also used.
              (It is neither necessary nor desirable to use this option
              together with <code class="option">--initialize</code>.)
            </p></li><li class="listitem"><p><a name="option_mysqld_ndb-allow-copying-alter-table"></a>
              <a class="indexterm" name="idm140091597556448"></a>

              <a class="indexterm" name="idm140091597554992"></a>

              <code class="option">--ndb-allow-copying-alter-table=[ON|OFF]</code>
</p>
<div class="table">
<a name="ndb-allow-copying-alter-table-detailtable"></a><p class="title"><b>Table 22.210
Type and value information for ndb-allow-copying-alter-table</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-allow-copying-alter-table">ndb-allow-copying-alter-table</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Both</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>ON (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Set to OFF to keep ALTER TABLE from
                      using copying operations on NDB tables
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Let <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> and other
              DDL statements use copying operations on
              <code class="literal">NDB</code> tables. Set to
              <code class="literal">OFF</code> to keep this from happening; doing
              so may improve performance of critical applications.
            </p></li><li class="listitem"><p><a name="option_mysqld_ndb-batch-size"></a>
              <a class="indexterm" name="idm140091597517216"></a>

              <a class="indexterm" name="idm140091597515728"></a>

              <code class="option">--ndb-batch-size=<em class="replaceable"><code>#</code></em></code>
</p>
<div class="table">
<a name="ndb-batch-size-detailtable"></a><p class="title"><b>Table 22.211
Type and value information for ndb-batch-size</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-batch-size">ndb-batch-size</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>32768 / 0 - 31536000 (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Size (in bytes) to use for NDB
                      transaction batches
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              This sets the size in bytes that is used for NDB
              transaction batches.
            </p></li><li class="listitem"><p><a name="option_mysqld_ndb-cluster-connection-pool"></a>
              <a class="indexterm" name="idm140091597480480"></a>

              <a class="indexterm" name="idm140091597478976"></a>

              <code class="option">--ndb-cluster-connection-pool=<em class="replaceable"><code>#</code></em></code>
</p>
<div class="table">
<a name="ndb-cluster-connection-pool-detailtable"></a><p class="title"><b>Table 22.212
Type and value information for ndb-cluster-connection-pool</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-cluster-connection-pool">ndb-cluster-connection-pool</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>1 / 1 - 63 (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Number of connections to the cluster
                      used by MySQL
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              By setting this option to a value greater than 1 (the
              default), a <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> process can use
              multiple connections to the cluster, effectively mimicking
              several SQL nodes. Each connection requires its own
              <code class="literal">[api]</code> or <code class="literal">[mysqld]</code>
              section in the cluster configuration
              (<code class="filename">config.ini</code>) file, and counts against
              the maximum number of API connections supported by the
              cluster.
            </p><p>
              Suppose that you have 2 cluster host computers, each
              running an SQL node whose <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>
              process was started with
              <code class="option">--ndb-cluster-connection-pool=4</code>; this
              means that the cluster must have 8 API slots available for
              these connections (instead of 2). All of these connections
              are set up when the SQL node connects to the cluster, and
              are allocated to threads in a round-robin fashion.
            </p><p>
              This option is useful only when running
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> on host machines having multiple
              CPUs, multiple cores, or both. For best results, the value
              should be smaller than the total number of cores available
              on the host machine. Setting it to a value greater than
              this is likely to degrade performance severely.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
                Because each SQL node using connection pooling occupies
                multiple API node slots—each slot having its own
                node ID in the cluster—you must
                <span class="emphasis"><em>not</em></span> use a node ID as part of the
                cluster connection string when starting any
                <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> process that employs
                connection pooling.
              </p><p>
                Setting a node ID in the connection string when using
                the <code class="option">--ndb-cluster-connection-pool</code>
                option causes node ID allocation errors when the SQL
                node attempts to connect to the cluster.
</p>
</div>
</li><li class="listitem"><p><a name="option_mysqld_ndb-cluster-connection-pool-nodeids"></a>
              <a class="indexterm" name="idm140091597431344"></a>

              <a class="indexterm" name="idm140091597429888"></a>

              <code class="option">--ndb-cluster-connection-pool-nodeids=<em class="replaceable"><code>list</code></em></code>
</p>
<div class="table">
<a name="ndb-cluster-connection-pool-nodeids-detailtable"></a><p class="title"><b>Table 22.213
Type and value information for ndb-cluster-connection-pool-nodeids</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-cluster-connection-pool-nodeids">ndb-cluster-connection-pool-nodeids</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>/ (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Comma-separated list of node IDs for
                      connections to the cluster used by MySQL; the
                      number of nodes in the list must be the same as
                      the value set for --ndb-cluster-connection-pool
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Specifies a comma-separated list of node IDs for
              connections to the cluster used by an SQL node. The number
              of nodes in this list must be the same as the value set
              for the
              <a class="link" href="mysql-cluster.html#option_mysqld_ndb-cluster-connection-pool"><code class="option">--ndb-cluster-connection-pool</code></a>
              option.
            </p></li><li class="listitem"><p><a name="option_mysqld_ndb-blob-read-batch-bytes"></a>
              <a class="indexterm" name="idm140091597393120"></a>

              <a class="indexterm" name="idm140091597391664"></a>

              <code class="option">--ndb-blob-read-batch-bytes=<em class="replaceable"><code>bytes</code></em></code>
</p>
<div class="table">
<a name="ndb-blob-read-batch-bytes-detailtable"></a><p class="title"><b>Table 22.214
Type and value information for ndb-blob-read-batch-bytes</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-blob-read-batch-bytes">ndb-blob-read-batch-bytes</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Both</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>65536 / 0 - 4294967295 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Specifies size in bytes that large
                      BLOB reads should be batched into. 0 = no limit.
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              This option can be used to set the size (in bytes) for
              batching of <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> data reads
              in NDB Cluster applications. When this batch size is
              exceeded by the amount of
              <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> data to be read within
              the current transaction, any pending
              <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> read operations are
              immediately executed.
            </p><p>
              The maximum value for this option is 4294967295; the
              default is 65536. Setting it to 0 has the effect of
              disabling <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> read
              batching.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
                In NDB API applications, you can control
                <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> write batching with
                the
                <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndbtransaction-setmaxpendingblobreadbytes.html" target="_top"><code class="literal">setMaxPendingBlobReadBytes()</code></a>
                and
                <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndbtransaction-getmaxpendingblobreadbytes.html" target="_top"><code class="literal">getMaxPendingBlobReadBytes()</code></a>
                methods.
</p>
</div>
</li><li class="listitem"><p><a name="option_mysqld_ndb-blob-write-batch-bytes"></a>
              <a class="indexterm" name="idm140091597345952"></a>

              <a class="indexterm" name="idm140091597344448"></a>

              <code class="option">--ndb-blob-write-batch-bytes=<em class="replaceable"><code>bytes</code></em></code>
</p>
<div class="table">
<a name="ndb-blob-write-batch-bytes-detailtable"></a><p class="title"><b>Table 22.215
Type and value information for ndb-blob-write-batch-bytes</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-blob-write-batch-bytes">ndb-blob-write-batch-bytes</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Both</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>65536 / 0 - 4294967295 (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Specifies size in bytes that large
                      BLOB writes should be batched into. 0 = no limit.
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              This option can be used to set the size (in bytes) for
              batching of <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> data
              writes in NDB Cluster applications. When this batch size
              is exceeded by the amount of
              <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> data to be written
              within the current transaction, any pending
              <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> write operations are
              immediately executed.
            </p><p>
              The maximum value for this option is 4294967295; the
              default is 65536. Setting it to 0 has the effect of
              disabling <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> write
              batching.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
                In NDB API applications, you can control
                <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> write batching with
                the
                <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndbtransaction-setmaxpendingblobwritebytes.html" target="_top"><code class="literal">setMaxPendingBlobWriteBytes()</code></a>
                and
                <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndbtransaction-getmaxpendingblobwritebytes.html" target="_top"><code class="literal">getMaxPendingBlobWriteBytes()</code></a>
                methods.
</p>
</div>
</li><li class="listitem"><p><a name="option_mysqld_ndb-connectstring"></a>
              <a class="indexterm" name="idm140091597298784"></a>

              <a class="indexterm" name="idm140091597297328"></a>

              <code class="option">--ndb-connectstring=<em class="replaceable"><code>connection_string</code></em></code>
</p>
<div class="table">
<a name="ndb-connectstring-detailtable"></a><p class="title"><b>Table 22.216
Type and value information for ndb-connectstring</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-connectstring">ndb-connectstring</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>(Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Point to the management server that
                      distributes the cluster configuration
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              When using the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a>
              storage engine, this option specifies the management
              server that distributes cluster configuration data. See
              <a class="xref" href="mysql-cluster.html#mysql-cluster-connection-strings" title="22.3.3.3 NDB Cluster Connection Strings">Section 22.3.3.3, “NDB Cluster Connection Strings”</a>, for
              syntax.
            </p></li><li class="listitem"><p><a name="option_mysqld_ndb-default-column-format"></a>
              <a class="indexterm" name="idm140091597260144"></a>

              <code class="option">--ndb-default-column-format=[FIXED|DYNAMIC]</code>
</p>
<div class="table">
<a name="ndb-default-column-format-detailtable"></a><p class="title"><b>Table 22.217
Type and value information for ndb-default-column-format</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-default-column-format">ndb-default-column-format</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>DYNAMIC / FIXED, DYNAMIC (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>FIXED / FIXED, DYNAMIC (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Use this value (FIXED or DYNAMIC) by
                      default for COLUMN_FORMAT and ROW_FORMAT options
                      when creating or adding columns to a table.
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Sets the default <code class="literal">COLUMN_FORMAT</code> and
              <code class="literal">ROW_FORMAT</code> for new tables (see
              <a class="xref" href="sql-syntax.html#create-table" title="13.1.20 CREATE TABLE Syntax">Section 13.1.20, “CREATE TABLE Syntax”</a>). The default is
              <code class="literal">FIXED</code>.
            </p></li><li class="listitem"><p><a name="option_mysqld_ndb-deferred-constraints"></a>
              <a class="indexterm" name="idm140091597220192"></a>

              <code class="option">--ndb-deferred-constraints=[0|1]</code>
</p>
<div class="table">
<a name="ndb-deferred-constraints-detailtable"></a><p class="title"><b>Table 22.218
Type and value information for ndb-deferred-constraints</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-deferred-constraints">ndb-deferred-constraints</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Both</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>0 / 0 - 1 (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Specifies that constraint checks on
                      unique indexes (where these are supported) should
                      be deferred until commit time. Not normally needed
                      or used; for testing purposes only.
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Controls whether or not constraint checks on unique
              indexes are deferred until commit time, where such checks
              are supported. <code class="literal">0</code> is the default.
            </p><p>
              This option is not normally needed for operation of NDB
              Cluster or NDB Cluster Replication, and is intended
              primarily for use in testing.
            </p></li><li class="listitem"><p><a name="option_mysqld_ndb-schema-dist-timeout"></a>
              <code class="option">--ndb-schema-dist-timeout=#</code>
</p>
<div class="table">
<a name="ndb-schema-dist-timeout-detailtable"></a><p class="title"><b>Table 22.219 Type and value information for ndb-schema-dist-timeout</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-schema-dist-timeout">ndb-schema-dist-timeout</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type: Default, Range</td>
                  <td>integer: 120 / 5 - 1200 (Version: 8.0.17)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: How long to wait before detecting
                      timeout during schema distribution
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Specifies the maximum time in seconds that this
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> waits for a schema operation to
              complete before marking it as having timed out.
            </p></li><li class="listitem"><p><a name="option_mysqld_ndb-distribution"></a>
              <a class="indexterm" name="idm140091597153936"></a>

              <code class="option">--ndb-distribution=[KEYHASH|LINHASH]</code>
</p>
<div class="table">
<a name="ndb-distribution-detailtable"></a><p class="title"><b>Table 22.220
Type and value information for ndb-distribution</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-distribution">ndb-distribution</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>KEYHASH / LINHASH, KEYHASH (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Default distribution for new tables
                      in NDBCLUSTER (KEYHASH or LINHASH, default is
                      KEYHASH)
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Controls the default distribution method for
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables. Can be set to
              either of <code class="literal">KEYHASH</code> (key hashing) or
              <code class="literal">LINHASH</code> (linear hashing).
              <code class="literal">KEYHASH</code> is the default.
            </p></li><li class="listitem"><p><a name="option_mysqld_ndb-log-apply-status"></a>
              <a class="indexterm" name="idm140091597115872"></a>

              <a class="indexterm" name="idm140091597114384"></a>

              <code class="option">--ndb-log-apply-status</code>
</p>
<div class="table">
<a name="ndb-log-apply-status-detailtable"></a><p class="title"><b>Table 22.221
Type and value information for ndb-log-apply-status</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-apply-status">ndb-log-apply-status</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>OFF (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Cause a MySQL server acting as a
                      slave to log mysql.ndb_apply_status updates
                      received from its immediate master in its own
                      binary log, using its own server ID. Effective
                      only if the server is started with the
                      --ndbcluster option.
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Causes a slave <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> to log any
              updates received from its immediate master to the
              <code class="literal">mysql.ndb_apply_status</code> table in its own
              binary log using its own server ID rather than the server
              ID of the master. In a circular or chain replication
              setting, this allows such updates to propagate to the
              <code class="literal">mysql.ndb_apply_status</code> tables of any
              MySQL servers configured as slaves of the current
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>.
            </p><p>
              In a chain replication setup, using this option allows
              downstream (slave) clusters to be aware of their positions
              relative to all of their upstream contributors (masters).
            </p><p>
              In a circular replication setup, this option causes
              changes to <code class="literal">ndb_apply_status</code> tables to
              complete the entire circuit, eventually propagating back
              to the originating NDB Cluster. This also allows a cluster
              acting as a master to see when its changes (epochs) have
              been applied to the other clusters in the circle.
            </p><p>
              This option has no effect unless the MySQL server is
              started with the
              <a class="link" href="mysql-cluster.html#option_mysqld_ndbcluster"><code class="option">--ndbcluster</code></a> option.
            </p></li><li class="listitem"><p><a name="option_mysqld_ndb-log-empty-epochs"></a>
              <a class="indexterm" name="idm140091597071328"></a>

              <a class="indexterm" name="idm140091597069840"></a>

              <code class="option">--ndb-log-empty-epochs=[ON|OFF]</code>
</p>
<div class="table">
<a name="ndb-log-empty-epochs-detailtable"></a><p class="title"><b>Table 22.222
Type and value information for ndb-log-empty-epochs</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-empty-epochs">ndb-log-empty-epochs</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>OFF (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: When enabled, causes epochs in which
                      there were no changes to be written to the
                      ndb_apply_status and ndb_binlog_index tables, even
                      when --log-slave-updates is enabled.
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Causes epochs during which there were no changes to be
              written to the <code class="literal">ndb_apply_status</code> and
              <code class="literal">ndb_binlog_index</code> tables, even when
              <a class="link" href="replication.html#option_mysqld_log-slave-updates"><code class="option">--log-slave-updates</code></a> is
              enabled.
            </p><p>
              By default this option is disabled. Disabling
              <code class="option">--ndb-log-empty-epochs</code> causes epoch
              transactions with no changes not to be written to the
              binary log, although a row is still written even for an
              empty epoch in <code class="literal">ndb_binlog_index</code>.
            </p><p>
              Because <code class="option">--ndb-log-empty-epochs=1</code> causes
              the size of the <code class="literal">ndb_binlog_index</code> table
              to increase independently of the size of the binary log,
              users should be prepared to manage the growth of this
              table, even if they expect the cluster to be idle a large
              part of the time.
            </p></li><li class="listitem"><p><a name="option_mysqld_ndb-log-empty-update"></a>
              <a class="indexterm" name="idm140091597028608"></a>

              <a class="indexterm" name="idm140091597027120"></a>

              <code class="option">--ndb-log-empty-update=[ON|OFF]</code>
</p>
<div class="table">
<a name="ndb-log-empty-update-detailtable"></a><p class="title"><b>Table 22.223
Type and value information for ndb-log-empty-update</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-empty-update">ndb-log-empty-update</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>OFF (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: When enabled, causes updates that
                      produced no changes to be written to the
                      ndb_apply_status and ndb_binlog_index tables, even
                      when --log-slave-updates is enabled.
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Causes updates that produced no changes to be written to
              the <code class="literal">ndb_apply_status</code> and
              <code class="literal">ndb_binlog_index</code> tables, even when
              <a class="link" href="replication.html#option_mysqld_log-slave-updates"><code class="option">--log-slave-updates</code></a> is
              enabled.
            </p><p>
              By default this option is disabled
              (<code class="literal">OFF</code>). Disabling
              <code class="option">--ndb-log-empty-update</code> causes updates
              with no changes not to be written to the binary log.
            </p></li><li class="listitem"><p><a name="option_mysqld_ndb-log-exclusive-reads"></a>
              <a class="indexterm" name="idm140091596987840"></a>

              <a class="indexterm" name="idm140091596986352"></a>

              <code class="option">--ndb-log-exclusive-reads=[0|1]</code>
</p>
<div class="table">
<a name="ndb-log-exclusive-reads-detailtable"></a><p class="title"><b>Table 22.224
Type and value information for ndb-log-exclusive-reads</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-exclusive-reads">ndb-log-exclusive-reads</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Both</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>0 (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Log primary key reads with exclusive
                      locks; allow conflict resolution based on read
                      conflicts
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Starting the server with this option causes primary key
              reads to be logged with exclusive locks, which allows for
              NDB Cluster Replication conflict detection and resolution
              based on read conflicts. You can also enable and disable
              these locks at runtime by setting the value of the
              <a class="link" href="mysql-cluster.html#sysvar_ndb_log_exclusive_reads"><code class="literal">ndb_log_exclusive_reads</code></a>
              system variable to 1 or 0, respectively. 0 (disable
              locking) is the default.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-examples-read-conflicts" title="Read conflict detection and resolution">Read conflict detection and resolution</a>.
            </p></li><li class="listitem"><p><a name="option_mysqld_ndb-log-orig"></a>
              <a class="indexterm" name="idm140091596948352"></a>

              <a class="indexterm" name="idm140091596946864"></a>

              <code class="option">--ndb-log-orig</code>
</p>
<div class="table">
<a name="ndb-log-orig-detailtable"></a><p class="title"><b>Table 22.225
Type and value information for ndb-log-orig</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-orig">ndb-log-orig</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>OFF (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Log originating server id and epoch
                      in mysql.ndb_binlog_index table
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Log the originating server ID and epoch in the
              <code class="literal">ndb_binlog_index</code> table.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
                This makes it possible for a given epoch to have
                multiple rows in <code class="literal">ndb_binlog_index</code>,
                one for each originating epoch.
</p>
</div>
<p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-schema" title="22.6.4 NDB Cluster Replication Schema and Tables">Section 22.6.4, “NDB Cluster Replication Schema and Tables”</a>.
            </p></li><li class="listitem"><p><a name="option_mysqld_ndb-log-transaction-id"></a>
              <a class="indexterm" name="idm140091596908432"></a>

              <a class="indexterm" name="idm140091596906944"></a>

              <code class="option">--ndb-log-transaction-id</code>
</p>
<div class="table">
<a name="ndb-log-transaction-id-detailtable"></a><p class="title"><b>Table 22.226
Type and value information for ndb-log-transaction-id</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-transaction-id">ndb-log-transaction-id</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>OFF (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Write NDB transaction IDs in the
                      binary log. Requires --log-bin-v1-events=OFF.
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Causes a slave <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> to write the NDB
              transaction ID in each row of the binary log. Such logging
              requires the use of the Version 2 event format for the
              binary log; thus,
              <a class="link" href="replication.html#option_mysqld_log-bin-use-v1-row-events"><code class="option">--log-bin-use-v1-row-events</code></a>
              must be set to <code class="literal">FALSE</code> in order to use
              this option.
            </p><p>
              This option is not supported in mainline MySQL Server
              8.0. It is required to enable NDB Cluster
              Replication conflict detection and resolution using the
              <code class="literal">NDB$EPOCH_TRANS()</code> function (see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-epoch-trans" title="NDB$EPOCH_TRANS()">NDB$EPOCH_TRANS()</a>).
            </p><p>
              The default value is <code class="literal">FALSE</code>.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="22.6.11 NDB Cluster Replication Conflict Resolution">Section 22.6.11, “NDB Cluster Replication Conflict Resolution”</a>.
            </p></li><li class="listitem"><p><a name="option_mysqld_ndb-log-update-minimal"></a>
              <a class="indexterm" name="idm140091596864224"></a>

              <code class="option">--ndb-log-update-minimal</code>
</p>
<div class="table">
<a name="ndb-log-update-minimal-detailtable"></a><p class="title"><b>Table 22.227
Type and value information for ndb-log-update-minimal</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-update-minimal">ndb-log-update-minimal</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>OFF (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>OFF (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>OFF (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Log updates in a minimal format.
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Log updates in a minimal fashion, by writing only the
              primary key values in the before image, and only the
              changed columns in the after image. This may cause
              compatibility problems if replicating to storage engines
              other than <code class="literal">NDB</code>.
            </p></li><li class="listitem"><p><a name="option_mysqld_ndb-mgmd-host"></a>
              <a class="indexterm" name="idm140091596823968"></a>

              <code class="option">--ndb-mgmd-host=<em class="replaceable"><code>host</code></em>[:<em class="replaceable"><code>port</code></em>]</code>
</p>
<div class="table">
<a name="ndb-mgmd-host-detailtable"></a><p class="title"><b>Table 22.228
Type and value information for ndb-mgmd-host</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-mgmd-host">ndb-mgmd-host</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>localhost:1186 (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Set the host (and port, if desired)
                      for connecting to management server
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Can be used to set the host and port number of a single
              management server for the program to connect to. If the
              program requires node IDs or references to multiple
              management servers (or both) in its connection
              information, use the
              <a class="link" href="mysql-cluster.html#option_mysqld_ndb-connectstring"><code class="option">--ndb-connectstring</code></a> option
              instead.
            </p></li><li class="listitem"><p><a name="option_mysqld_ndb-nodeid"></a>
              <a class="indexterm" name="idm140091596787504"></a>

              <a class="indexterm" name="idm140091596786016"></a>

              <code class="option">--ndb-nodeid=#</code>
</p>
<div class="table">
<a name="ndb-nodeid-detailtable"></a><p class="title"><b>Table 22.229
Type and value information for ndb-nodeid</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-nodeid">ndb-nodeid</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>/ 1 - 63 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>/ 1 - 255 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: NDB Cluster node ID for this MySQL
                      server
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Set this MySQL server's node ID in an NDB Cluster.
            </p><p>
              The <code class="option">--ndb-nodeid</code> option overrides any
              node ID set with
              <a class="link" href="mysql-cluster.html#option_mysqld_ndb-connectstring"><code class="option">--ndb-connectstring</code></a>,
              regardless of the order in which the two options are used.
            </p><p>
              In addition, if <code class="option">--ndb-nodeid</code> is used,
              then either a matching node ID must be found in a
              <code class="literal">[mysqld]</code> or <code class="literal">[api]</code>
              section of <code class="filename">config.ini</code>, or there must
              be an <span class="quote">“<span class="quote">open</span>”</span> <code class="literal">[mysqld]</code> or
              <code class="literal">[api]</code> section in the file (that is, a
              section without a <code class="literal">NodeId</code> or
              <code class="literal">Id</code> parameter specified). This is also
              true if the node ID is specified as part of the connection
              string.
            </p><p>
              Regardless of how the node ID is determined, its is shown
              as the value of the global status variable
              <code class="literal">Ndb_cluster_node_id</code> in the output of
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW STATUS</code></a>, and as
              <code class="literal">cluster_node_id</code> in the
              <code class="literal">connection</code> row of the output of
              <a class="link" href="sql-syntax.html#show-engine" title="13.7.6.15 SHOW ENGINE Syntax"><code class="literal">SHOW ENGINE
              NDBCLUSTER STATUS</code></a>.
            </p><p>
              For more information about node IDs for NDB Cluster SQL
              nodes, see <a class="xref" href="mysql-cluster.html#mysql-cluster-api-definition" title="22.3.3.7 Defining SQL and Other API Nodes in an NDB Cluster">Section 22.3.3.7, “Defining SQL and Other API Nodes in an NDB Cluster”</a>.
            </p></li><li class="listitem"><p><a name="option_mysqld_ndbinfo"></a>
              <code class="option">--ndbinfo={ON|OFF|FORCE}</code>
</p>
<div class="table">
<a name="ndbinfo-detailtable"></a><p class="title"><b>Table 22.230 Type and value information for ndbinfo</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndbinfo">ndbinfo</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type: Default, Range</td>
                  <td>enumeration: ON, OFF, FORCE (Version: 8.0.13)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Enable ndbinfo plugin, if supported
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Enables the plugin for the
              <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo" title="22.5.10 ndbinfo: The NDB Cluster Information Database"><code class="literal">ndbinfo</code></a> information
              database. By default this is ON whenever
              <code class="literal">NDBCLUSTER</code> is enabled.
            </p></li><li class="listitem"><p><a name="option_mysqld_ndb-optimization-delay"></a>
              <code class="option">--ndb-optimization-delay=<em class="replaceable"><code>milliseconds</code></em></code>
</p>
<div class="table">
<a name="ndb-optimization-delay-detailtable"></a><p class="title"><b>Table 22.231
Type and value information for ndb-optimization-delay</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-optimization-delay">ndb-optimization-delay</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>10 / 0 - 100000 (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Sets the number of milliseconds to
                      wait between processing sets of rows by OPTIMIZE
                      TABLE on NDB tables
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Set the number of milliseconds to wait between sets of
              rows by <a class="link" href="sql-syntax.html#optimize-table" title="13.7.3.4 OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a>
              statements on <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables. The
              default is 10.
            </p></li><li class="listitem"><p><a name="option_mysqld_ndb-recv-thread-activation-threshold"></a>
              <a class="link" href="mysql-cluster.html#option_mysqld_ndb-recv-thread-activation-threshold"><code class="option">--ndb-recv-thread-activation-threshold=<em class="replaceable"><code>threshold</code></em></code></a>
</p>
<div class="table">
<a name="ndb-recv-thread-activation-threshold-detailtable"></a><p class="title"><b>Table 22.232
Type and value information for ndb-recv-thread-activation-threshold</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-recv-thread-activation-threshold">ndb-recv-thread-activation-threshold</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>8 / 0 (MIN_ACTIVATION_THRESHOLD) - 16 (MAX_ACTIVATION_THRESHOLD)
                    (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Activation threshold when receive
                      thread takes over the polling of the cluster
                      connection (measured in concurrently active
                      threads)
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              When this number of concurrently active threads is
              reached, the receive thread takes over polling of the
              cluster connection.
            </p></li><li class="listitem"><p><a name="option_mysqld_ndb-recv-thread-cpu-mask"></a>
              <a class="link" href="mysql-cluster.html#option_mysqld_ndb-recv-thread-cpu-mask"><code class="option">--ndb-recv-thread-cpu-mask=<em class="replaceable"><code>bitmask</code></em></code></a>
</p>
<div class="table">
<a name="ndb-recv-thread-cpu-mask-detailtable"></a><p class="title"><b>Table 22.233
Type and value information for ndb-recv-thread-cpu-mask</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-recv-thread-cpu-mask">ndb-recv-thread-cpu-mask</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>[empty] (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: CPU mask for locking receiver threads
                      to specific CPUs; specified as hexadecimal. See
                      documentation for details.
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Set a CPU mask for locking receiver threads to specific
              CPUs. This is specified as a hexadecimal bitmask; for
              example, <code class="literal">0x33</code> means that one CPU is
              used per receiver thread. An empty string (no locking of
              receiver threads) is the default.
            </p></li><li class="listitem"><p><a name="option_mysqld_ndb-transid-mysql-connection-map"></a>
              <code class="option">ndb-transid-mysql-connection-map=<em class="replaceable"><code>state</code></em></code>
</p>
<div class="table">
<a name="ndb-transid-mysql-connection-map-detailtable"></a><p class="title"><b>Table 22.234
Type and value information for ndb-transid-mysql-connection-map</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-transid-mysql-connection-map">ndb-transid-mysql-connection-map</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>ON / ON, OFF, FORCE (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Enable or disable the
                      ndb_transid_mysql_connection_map plugin; that is,
                      enable or disable the INFORMATION_SCHEMA table
                      having that name
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Enables or disables the plugin that handles the
              <a class="link" href="information-schema.html#ndb-transid-mysql-connection-map-table" title="25.13 The INFORMATION_SCHEMA ndb_transid_mysql_connection_map Table"><code class="literal">ndb_transid_mysql_connection_map</code></a>
              table in the <code class="literal">INFORMATION_SCHEMA</code>
              database. Takes one of the values <code class="literal">ON</code>,
              <code class="literal">OFF</code>, or <code class="literal">FORCE</code>.
              <code class="literal">ON</code> (the default) enables the plugin.
              <code class="literal">OFF</code> disables the plugin, which makes
              <code class="literal">ndb_transid_mysql_connection_map</code>
              inaccessible. <code class="literal">FORCE</code> keeps the MySQL
              Server from starting if the plugin fails to load and
              start.
            </p><p>
              You can see whether the
              <a class="link" href="information-schema.html#ndb-transid-mysql-connection-map-table" title="25.13 The INFORMATION_SCHEMA ndb_transid_mysql_connection_map Table"><code class="literal">ndb_transid_mysql_connection_map</code></a>
              table plugin is running by checking the output of
              <a class="link" href="sql-syntax.html#show-plugins" title="13.7.6.25 SHOW PLUGINS Syntax"><code class="literal">SHOW PLUGINS</code></a>.
            </p></li><li class="listitem"><p><a name="option_mysqld_ndb-wait-connected"></a>
              <code class="option">--ndb-wait-connected=<em class="replaceable"><code>seconds</code></em></code>
</p>
<div class="table">
<a name="ndb-wait-connected-detailtable"></a><p class="title"><b>Table 22.235
Type and value information for ndb-wait-connected</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-wait-connected">ndb-wait-connected</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>0 / 0 - 31536000 (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>30 / 0 - 31536000 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>0 / 0 - 31536000 (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>30 / 0 - 31536000 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Time (in seconds) for the MySQL
                      server to wait for connection to cluster
                      management and data nodes before accepting MySQL
                      client connections
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              This option sets the period of time that the MySQL server
              waits for connections to NDB Cluster management and data
              nodes to be established before accepting MySQL client
              connections. The time is specified in seconds. The default
              value is <code class="literal">30</code>.
            </p></li><li class="listitem"><p><a name="option_mysqld_ndb-wait-setup"></a>
              <code class="option">--ndb-wait-setup=<em class="replaceable"><code>seconds</code></em></code>
</p>
<div class="table">
<a name="ndb-wait-setup-detailtable"></a><p class="title"><b>Table 22.236
Type and value information for ndb-wait-setup</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-wait-setup">ndb-wait-setup</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>15 / 0 - 31536000 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>15 / 0 - 31536000 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>15 / 0 - 31536000 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>30 / 0 - 31536000 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>15 / 0 - 31536000 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>30 / 0 - 31536000 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Time (in seconds) for the MySQL
                      server to wait for NDB engine setup to complete
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              This variable shows the period of time that the MySQL
              server waits for the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>
              storage engine to complete setup before timing out and
              treating <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> as unavailable.
              The time is specified in seconds. The default value is
              <code class="literal">30</code>.
            </p></li><li class="listitem"><p><a name="option_mysqld_server-id-bits"></a>
              <a class="indexterm" name="idm140091596461792"></a>

              <a class="indexterm" name="idm140091596460304"></a>

              <code class="option">--server-id-bits=#</code>
</p>
<div class="table">
<a name="server-id-bits-detailtable"></a><p class="title"><b>Table 22.237
Type and value information for server-id-bits</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_server-id-bits">server-id-bits</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>32 / 7 - 32 (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Sets the number of least significant
                      bits in the server_id actually used for
                      identifying the server, permitting NDB API
                      applications to store application data in the most
                      significant bits. server_id must be less than 2 to
                      the power of this value.
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              This option indicates the number of least significant bits
              within the 32-bit
              <a class="link" href="server-administration.html#sysvar_server_id"><code class="literal">server_id</code></a> which actually
              identify the server. Indicating that the server is
              actually identified by fewer than 32 bits makes it
              possible for some of the remaining bits to be used for
              other purposes, such as storing user data generated by
              applications using the NDB API's Event API within the
              <code class="literal">AnyValue</code> of an
              <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-operationoptions.html" target="_top"><code class="literal">OperationOptions</code></a>
              structure (NDB Cluster uses the
              <code class="literal">AnyValue</code> to store the server ID).
            </p><p>
              When extracting the effective server ID from
              <a class="link" href="server-administration.html#sysvar_server_id"><code class="literal">server_id</code></a> for purposes
              such as detection of replication loops, the server ignores
              the remaining bits. The <code class="option">--server-id-bits</code>
              option is used to mask out any irrelevant bits of
              <a class="link" href="server-administration.html#sysvar_server_id"><code class="literal">server_id</code></a> in the IO and
              SQL threads when deciding whether an event should be
              ignored based on the server ID.
            </p><p>
              This data can be read from the binary log by
              <a class="link" href="programs.html#mysqlbinlog" title="4.6.8 mysqlbinlog — Utility for Processing Binary Log Files"><span class="command"><strong>mysqlbinlog</strong></span></a>, provided that it is run
              with its own
              <a class="link" href="programs.html#option_mysqlbinlog_server-id-bits"><code class="option">--server-id-bits</code></a>
              option set to 32 (the default).
            </p><p>
              The value of <a class="link" href="server-administration.html#sysvar_server_id"><code class="literal">server_id</code></a>
              must be less than 2 ^
              <a class="link" href="mysql-cluster.html#sysvar_server_id_bits"><code class="literal">server_id_bits</code></a>;
              otherwise, <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> refuses to start.
            </p><p>
              This system variable is supported only by NDB Cluster. It
              is not supported in the standard MySQL 8.0
              Server.
            </p></li><li class="listitem"><p><a name="option_mysqld_skip-ndbcluster"></a>
              <a class="indexterm" name="idm140091596409536"></a>

              <a class="indexterm" name="idm140091596408048"></a>

              <code class="option">--skip-ndbcluster</code>
</p>
<div class="table">
<a name="skip-ndbcluster-detailtable"></a><p class="title"><b>Table 22.238
Type and value information for skip-ndbcluster</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_skip-ndbcluster">skip-ndbcluster</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Disable the NDB Cluster storage
                      engine
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Disable the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a>
              storage engine. This is the default for binaries that were
              built with <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> storage
              engine support; the server allocates memory and other
              resources for this storage engine only if the
              <a class="link" href="mysql-cluster.html#option_mysqld_ndbcluster"><code class="option">--ndbcluster</code></a> option is
              given explicitly. See
              <a class="xref" href="mysql-cluster.html#mysql-cluster-quick" title="22.3.1 Quick Test Setup of NDB Cluster">Section 22.3.1, “Quick Test Setup of NDB Cluster”</a>, for an example.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="mysql-cluster-system-variables"></a>22.3.3.9.2 NDB Cluster System Variables</h5>

</div>

</div>

</div>
<p>
          This section provides detailed information about MySQL server
          system variables that are specific to NDB Cluster and the
          <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine. For system
          variables not specific to NDB Cluster, see
          <a class="xref" href="server-administration.html#server-system-variables" title="5.1.8 Server System Variables">Section 5.1.8, “Server System Variables”</a>. For general
          information on using system variables, see
          <a class="xref" href="server-administration.html#using-system-variables" title="5.1.9 Using System Variables">Section 5.1.9, “Using System Variables”</a>.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="sysvar_ndb_autoincrement_prefetch_sz"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_autoincrement_prefetch_sz"><code class="literal">ndb_autoincrement_prefetch_sz</code></a>
</p>
<div class="table">
<a name="ndb_autoincrement_prefetch_sz-detailtable"></a><p class="title"><b>Table 22.239
Type and value information for ndb_autoincrement_prefetch_sz</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_autoincrement_prefetch_sz">ndb_autoincrement_prefetch_sz</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Both</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>32 / 1 - 256 (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>1 / 1 - 256 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>32 / 1 - 256 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>1 / 1 - 256 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>32 / 1 - 256 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>1 / 1 - 256 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>32 / 1 - 256 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>1 / 1 - 256 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>1 / 1 - 65536 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>32 / 1 - 256 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>1 / 1 - 65536 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>1 / 1 - 65536 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: NDB auto-increment prefetch size
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Determines the probability of gaps in an autoincremented
              column. Set it to <code class="literal">1</code> to minimize this.
              Setting it to a high value for optimization makes inserts
              faster, but decreases the likelihood that consecutive
              autoincrement numbers will be used in a batch of inserts.
              The mininum and default value is 1. The maximum value for
              <code class="literal">ndb_autoincrement_prefetch_sz</code> is 65536.
            </p><p>
              This variable affects only the number of
              <code class="literal">AUTO_INCREMENT</code> IDs that are fetched
              between statements; within a given statement, at least 32
              IDs are obtained at a time. The default value is 1.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
                This variable does not affect inserts performed using
                <a class="link" href="sql-syntax.html#insert-select" title="13.2.6.1 INSERT ... SELECT Syntax"><code class="literal">INSERT
                ... SELECT</code></a>.
</p>
</div>
</li><li class="listitem"><p><a name="sysvar_ndb_cache_check_time"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_cache_check_time"><code class="literal">ndb_cache_check_time</code></a>
</p>
<div class="table">
<a name="ndb_cache_check_time-detailtable"></a><p class="title"><b>Table 22.240
Type and value information for ndb_cache_check_time</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_cache_check_time">ndb_cache_check_time</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>0 / - (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Number of milliseconds between checks
                      of cluster SQL nodes made by the MySQL query cache
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              The number of milliseconds that elapse between checks of
              NDB Cluster SQL nodes by the MySQL query cache. Setting
              this to 0 (the default and minimum value) means that the
              query cache checks for validation on every query.
            </p><p>
              The recommended maximum value for this variable is 1000,
              which means that the check is performed once per second. A
              larger value means that the check is performed and
              possibly invalidated due to updates on different SQL nodes
              less often. It is generally not desirable to set this to a
              value greater than 2000.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
                The query cache
                <a class="link" href="mysql-cluster.html#sysvar_ndb_cache_check_time"><code class="literal">ndb_cache_check_time</code></a>
                are deprecated in MySQL 5.7; the query cache was removed
                in MySQL 8.0.
</p>
</div>
</li><li class="listitem"><p><a name="sysvar_ndb_clear_apply_status"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_clear_apply_status"><code class="literal">ndb_clear_apply_status</code></a>
</p>
<div class="table">
<a name="ndb_clear_apply_status-detailtable"></a><p class="title"><b>Table 22.241
Type and value information for ndb_clear_apply_status</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_clear_apply_status">ndb_clear_apply_status</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>ON (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Causes RESET SLAVE to clear all rows
                      from the ndb_apply_status table; ON by default
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              By the default, executing <a class="link" href="sql-syntax.html#reset-slave" title="13.4.2.4 RESET SLAVE Syntax"><code class="literal">RESET
              SLAVE</code></a> causes an NDB Cluster replication slave to
              purge all rows from its
              <code class="literal">ndb_apply_status</code> table. You can disable
              this by setting
              <code class="literal">ndb_clear_apply_status=OFF</code>.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_data_node_neighbour"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_data_node_neighbour"><code class="literal">ndb_data_node_neighbour</code></a>
</p>
<div class="table">
<a name="ndb_data_node_neighbour-detailtable"></a><p class="title"><b>Table 22.242
Type and value information for ndb_data_node_neighbour</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_data_node_neighbour">ndb_data_node_neighbour</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>0 / 0 - 255 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Specifies cluster data node "closest"
                      to this MySQL Server, for transaction hinting and
                      fully replicated tables
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Sets the ID of a <span class="quote">“<span class="quote">nearest</span>”</span> data
              node—that is, a preferred nonlocal data node is
              chosen to execute the transaction, rather than one running
              on the same host as the SQL or API node. This used to
              ensure that when a fully replicated table is accessed, we
              access it on this data node, to ensure that the local copy
              of the table is always used whenever possible. This can
              also be used for providing hints for transactions.
            </p><p>
              This can improve data access times in the case of a node
              that is physically closer than and thus has higher network
              throughput than others on the same host.
            </p><p>
              See
              <a class="xref" href="sql-syntax.html#create-table-ndb-table-comment-options" title="13.1.20.11 Setting NDB_TABLE Options">Section 13.1.20.11, “Setting NDB_TABLE Options”</a>,
              for further information.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
                An equivalent method
                <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb-cluster-connection-set-data-node-neighbour.html" target="_top"><code class="literal">set_data_node_neighbour()</code></a>
                is provided for use in NDB API applications.
</p>
</div>
</li><li class="listitem"><p><a name="sysvar_ndb_default_column_format"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_default_column_format"><code class="literal">ndb_default_column_format</code></a>
</p>
<div class="table">
<a name="ndb_default_column_format-detailtable"></a><p class="title"><b>Table 22.243
Type and value information for ndb_default_column_format</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_default_column_format">ndb_default_column_format</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>DYNAMIC / FIXED, DYNAMIC (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>FIXED / FIXED, DYNAMIC (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Sets default row format and column
                      format (FIXED or DYNAMIC) used for new NDB tables
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Sets the default <code class="literal">COLUMN_FORMAT</code> and
              <code class="literal">ROW_FORMAT</code> for new tables (see
              <a class="xref" href="sql-syntax.html#create-table" title="13.1.20 CREATE TABLE Syntax">Section 13.1.20, “CREATE TABLE Syntax”</a>). The default is
              <code class="literal">FIXED</code>.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_deferred_constraints"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_deferred_constraints"><code class="literal">ndb_deferred_constraints</code></a>
</p>
<div class="table">
<a name="ndb_deferred_constraints-detailtable"></a><p class="title"><b>Table 22.244
Type and value information for ndb_deferred_constraints</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_deferred_constraints">ndb_deferred_constraints</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Both</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>0 / 0 - 1 (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Specifies that constraint checks
                      should be deferred (where these are supported).
                      Not normally needed or used; for testing purposes
                      only.
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Controls whether or not constraint checks are deferred,
              where these are supported. <code class="literal">0</code> is the
              default.
            </p><p>
              This variable is not normally needed for operation of NDB
              Cluster or NDB Cluster Replication, and is intended
              primarily for use in testing.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_distribution"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_distribution"><code class="literal">ndb_distribution</code></a>
</p>
<div class="table">
<a name="ndb_distribution-detailtable"></a><p class="title"><b>Table 22.245
Type and value information for ndb_distribution</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_distribution">ndb_distribution</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>KEYHASH / LINHASH, KEYHASH (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Default distribution for new tables
                      in NDBCLUSTER (KEYHASH or LINHASH, default is
                      KEYHASH)
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Controls the default distribution method for
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables. Can be set to
              either of <code class="literal">KEYHASH</code> (key hashing) or
              <code class="literal">LINHASH</code> (linear hashing).
              <code class="literal">KEYHASH</code> is the default.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_eventbuffer_free_percent"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_eventbuffer_free_percent"><code class="literal">ndb_eventbuffer_free_percent</code></a>
</p>
<div class="table">
<a name="ndb_eventbuffer_free_percent-detailtable"></a><p class="title"><b>Table 22.246
Type and value information for ndb_eventbuffer_free_percent</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_eventbuffer_free_percent">ndb_eventbuffer_free_percent</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>20 / 1 - 99 (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Percentage of free memory that should
                      be available in event buffer before resumption of
                      buffering, after reaching limit set by
                      ndb_eventbuffer_max_alloc
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Sets the percentage of the maximum memory allocated to the
              event buffer (ndb_eventbuffer_max_alloc) that should be
              available in event buffer after reaching the maximum,
              before starting to buffer again.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_eventbuffer_max_alloc"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_eventbuffer_max_alloc"><code class="literal">ndb_eventbuffer_max_alloc</code></a>
</p>
<div class="table">
<a name="ndb_eventbuffer_max_alloc-detailtable"></a><p class="title"><b>Table 22.247
Type and value information for ndb_eventbuffer_max_alloc</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_eventbuffer_max_alloc">ndb_eventbuffer_max_alloc</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>0 / 0 - 4294967295 (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Maximum memory that can be allocated
                      for buffering events by the NDB API. Defaults to 0
                      (no limit).
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Sets the maximum amount memory (in bytes) that can be
              allocated for buffering events by the NDB API. 0 means
              that no limit is imposed, and is the default.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_extra_logging"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_extra_logging"><code class="literal">ndb_extra_logging</code></a>
</p>
<div class="table">
<a name="ndb_extra_logging-detailtable"></a><p class="title"><b>Table 22.248
Type and value information for ndb_extra_logging</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_extra_logging">ndb_extra_logging</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>0 / - (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>1 / - (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Controls logging of NDB Cluster
                      schema, connection, and data distribution events
                      in the MySQL error log
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              This variable enables recording in the MySQL error log of
              information specific to the
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine.
            </p><p>
              When this variable is set to 0, the only information
              specific to <code class="literal">NDB</code> that is written to the
              MySQL error log relates to transaction handling. If it set
              to a value greater than 0 but less than 10,
              <code class="literal">NDB</code> table schema and connection events
              are also logged, as well as whether or not conflict
              resolution is in use, and other <code class="literal">NDB</code>
              errors and information. If the value is set to 10 or more,
              information about <code class="literal">NDB</code> internals, such
              as the progress of data distribution among cluster nodes,
              is also written to the MySQL error log. The default is 1.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_force_send"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_force_send"><code class="literal">ndb_force_send</code></a>
</p>
<div class="table">
<a name="ndb_force_send-detailtable"></a><p class="title"><b>Table 22.249
Type and value information for ndb_force_send</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_force_send">ndb_force_send</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Both</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>TRUE (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Forces sending of buffers to NDB
                      immediately, without waiting for other threads
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Forces sending of buffers to
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> immediately, without
              waiting for other threads. Defaults to
              <code class="literal">ON</code>.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_fully_replicated"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_fully_replicated"><code class="literal">ndb_fully_replicated</code></a>
</p>
<div class="table">
<a name="ndb_fully_replicated-detailtable"></a><p class="title"><b>Table 22.250
Type and value information for ndb_fully_replicated</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_fully_replicated">ndb_fully_replicated</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Both</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>OFF (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Whether new NDB tables are fully
                      replicated
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Determines whether new <code class="literal">NDB</code> tables are
              fully replicated. This setting can be overridden for an
              individual table using
              <code class="literal">COMMENT="NDB_TABLE=FULLY_REPLICATED=..."</code>
              in a <a class="link" href="sql-syntax.html#create-table" title="13.1.20 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> or
              <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statement; see
              <a class="xref" href="sql-syntax.html#create-table-ndb-table-comment-options" title="13.1.20.11 Setting NDB_TABLE Options">Section 13.1.20.11, “Setting NDB_TABLE Options”</a>,
              for syntax and other information.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_index_stat_enable"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_index_stat_enable"><code class="literal">ndb_index_stat_enable</code></a>
</p>
<div class="table">
<a name="ndb_index_stat_enable-detailtable"></a><p class="title"><b>Table 22.251
Type and value information for ndb_index_stat_enable</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_index_stat_enable">ndb_index_stat_enable</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Both</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>OFF (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>ON (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Use NDB index statistics in query
                      optimization
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Use <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> index statistics in
              query optimization. The default is <code class="literal">ON</code>.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_index_stat_option"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_index_stat_option"><code class="literal">ndb_index_stat_option</code></a>
</p>
<div class="table">
<a name="ndb_index_stat_option-detailtable"></a><p class="title"><b>Table 22.252
Type and value information for ndb_index_stat_option</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_index_stat_option">ndb_index_stat_option</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Both</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>loop_enable=1000ms,loop_idle=1000ms,loop_busy=100ms,
                    update_batch=1,read_batch=4,idle_batch=32,check_batch=8,
                    check_delay=10m,delete_batch=8,
                    clean_delay=1m,error_batch=4,
                    error_delay=1m,evict_batch=8,evict_delay=1m,cache_limit=32M,
                    cache_lowpct=90,zero_total=0 (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>loop_checkon=1000ms,loop_idle=1000ms,loop_busy=100ms,
                    update_batch=1,read_batch=4,idle_batch=32,check_batch=32,
                    check_delay=1m,delete_batch=8,clean_delay=0,error_batch=4,
                    error_delay=1m,evict_batch=8,evict_delay=1m,cache_limit=32M,
                    cache_lowpct=90 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Comma-separated list of tunable
                      options for NDB index statistics; the list should
                      contain no spaces
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              This variable is used for providing tuning options for NDB
              index statistics generation. The list consist of
              comma-separated name-value pairs of option names and
              values, and this list must not contain any space
              characters.
            </p><p>
              Options not used when setting
              <code class="literal">ndb_index_stat_option</code> are not changed
              from their default values. For example, you can set
              <code class="literal">ndb_index_stat_option =
              'loop_idle=1000ms,cache_limit=32M'</code>.
            </p><p>
              Time values can be optionally suffixed with
              <code class="literal">h</code> (hours), <code class="literal">m</code>
              (minutes), or <code class="literal">s</code> (seconds). Millisecond
              values can optionally be specified using
              <code class="literal">ms</code>; millisecond values cannot be
              specified using <code class="literal">h</code>,
              <code class="literal">m</code>, or <code class="literal">s</code>.) Integer
              values can be suffixed with <code class="literal">K</code>,
              <code class="literal">M</code>, or <code class="literal">G</code>.
            </p><p>
              The names of the options that can be set using this
              variable are shown in the table that follows. The table
              also provides brief descriptions of the options, their
              default values, and (where applicable) their minimum and
              maximum values.
</p>
<div class="table">
<a name="idm140091595801360"></a><p class="title"><b>Table 22.253 ndb_index_stat_option options
and values</b></p>
<div class="table-contents">
<table><col width="25%"><col width="25%"><col width="25%"><col width="25%"><thead><tr>
                  <th scope="col">Name</th>
                  <th scope="col">Description</th>
                  <th scope="col">Default/Units</th>
                  <th scope="col">Minimum/Maximum</th>
                </tr></thead><tbody><tr>
                  <td scope="row"><code class="literal">loop_enable</code></td>
                  <td></td>
                  <td>1000 ms</td>
                  <td>0/4G</td>
                </tr><tr>
                  <td scope="row"><code class="literal">loop_idle</code></td>
                  <td>Time to sleep when idle</td>
                  <td>1000 ms</td>
                  <td>0/4G</td>
                </tr><tr>
                  <td scope="row"><code class="literal">loop_busy</code></td>
                  <td>Time to sleep when more work is waiting</td>
                  <td>100 ms</td>
                  <td>0/4G</td>
                </tr><tr>
                  <td scope="row"><code class="literal">update_batch</code></td>
                  <td></td>
                  <td>1</td>
                  <td>0/4G</td>
                </tr><tr>
                  <td scope="row"><code class="literal">read_batch</code></td>
                  <td></td>
                  <td>4</td>
                  <td>1/4G</td>
                </tr><tr>
                  <td scope="row"><code class="literal">idle_batch</code></td>
                  <td></td>
                  <td>32</td>
                  <td>1/4G</td>
                </tr><tr>
                  <td scope="row"><code class="literal">check_batch</code></td>
                  <td></td>
                  <td>8</td>
                  <td>1/4G</td>
                </tr><tr>
                  <td scope="row"><code class="literal">check_delay</code></td>
                  <td>How often to check for new statistics</td>
                  <td>10 m</td>
                  <td>1/4G</td>
                </tr><tr>
                  <td scope="row"><code class="literal">delete_batch</code></td>
                  <td></td>
                  <td>8</td>
                  <td>0/4G</td>
                </tr><tr>
                  <td scope="row"><code class="literal">clean_delay</code></td>
                  <td></td>
                  <td>1 m</td>
                  <td>0/4G</td>
                </tr><tr>
                  <td scope="row"><code class="literal">error_batch</code></td>
                  <td></td>
                  <td>4</td>
                  <td>1/4G</td>
                </tr><tr>
                  <td scope="row"><code class="literal">error_delay</code></td>
                  <td></td>
                  <td>1 m</td>
                  <td>1/4G</td>
                </tr><tr>
                  <td scope="row"><code class="literal">evict_batch</code></td>
                  <td></td>
                  <td>8</td>
                  <td>1/4G</td>
                </tr><tr>
                  <td scope="row"><code class="literal">evict_delay</code></td>
                  <td>Clean LRU cache, from read time</td>
                  <td>1 m</td>
                  <td>0/4G</td>
                </tr><tr>
                  <td scope="row"><code class="literal">cache_limit</code></td>
                  <td>Maximum amount of memory in bytes used for cached index statistics by
                    this <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>; clean up the cache
                    when this is exceeded.</td>
                  <td>32 M</td>
                  <td>0/4G</td>
                </tr><tr>
                  <td scope="row"><code class="literal">cache_lowpct</code></td>
                  <td></td>
                  <td>90</td>
                  <td>0/100</td>
                </tr><tr>
                  <td scope="row"><code class="literal">zero_total</code></td>
                  <td>Setting this to 1 resets all accumulating counters in
                    <code class="literal">ndb_index_stat_status</code> to 0. This
                    option value is also reset to 0 when this is done.</td>
                  <td>0</td>
                  <td>0/1</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"></li><li class="listitem"><p><a name="sysvar_ndb_join_pushdown"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_join_pushdown"><code class="literal">ndb_join_pushdown</code></a>
</p>
<div class="table">
<a name="ndb_join_pushdown-detailtable"></a><p class="title"><b>Table 22.254
Type and value information for ndb_join_pushdown</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_join_pushdown">ndb_join_pushdown</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Both</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>TRUE (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Enables pushing down of joins to data
                      nodes
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              This variable controls whether joins on
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables are pushed down to
              the NDB kernel (data nodes). Previously, a join was
              handled using multiple accesses of
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> by the SQL node; however,
              when <a class="link" href="mysql-cluster.html#sysvar_ndb_join_pushdown"><code class="literal">ndb_join_pushdown</code></a> is
              enabled, a pushable join is sent in its entirety to the
              data nodes, where it can be distributed among the data
              nodes and executed in parallel on multiple copies of the
              data, with a single, merged result being returned to
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>. This can reduce greatly the
              number of round trips between an SQL node and the data
              nodes required to handle such a join.
            </p><p>
              By default,
              <a class="link" href="mysql-cluster.html#sysvar_ndb_join_pushdown"><code class="literal">ndb_join_pushdown</code></a> is
              enabled.
            </p><p><a name="ndb_join_pushdown-conditions"></a><b>Conditions for NDB pushdown joins. </b>
                In order for a join to be pushable, it must meet the
                following conditions:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
                  Only columns can be compared, and all columns to be
                  joined must use <span class="emphasis"><em>exactly</em></span> the same
                  data type.
                </p><p>
                  This means that expressions such as <code class="literal">t1.a =
                  t2.a + <em class="replaceable"><code>constant</code></em></code>
                  cannot be pushed down, and that (for example) a join
                  on an <a class="link" href="data-types.html#integer-types" title="11.2.1 Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">INT</code></a> column and a
                  <a class="link" href="data-types.html#integer-types" title="11.2.1 Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a> column also
                  cannot be pushed down.
                </p></li><li class="listitem"><p>
                  Queries referencing
                  <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> or
                  <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> columns are not
                  supported.
                </p></li><li class="listitem"><p>
                  Explicit locking is not supported; however, the
                  <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine's
                  characteristic implicit row-based locking is enforced.
                </p><p>
                  This means that a join using <code class="literal">FOR
                  UPDATE</code> cannot be pushed down.
                </p></li><li class="listitem"><p>
                  In order for a join to be pushed down, child tables in
                  the join must be accessed using one of the
                  <a class="link" href="optimization.html#jointype_ref"><code class="literal">ref</code></a>,
                  <a class="link" href="optimization.html#jointype_eq_ref"><code class="literal">eq_ref</code></a>, or 
                  <a class="link" href="optimization.html#jointype_const"><code class="literal">const</code></a> access methods,
                  or some combination of these methods.
                </p><p>
                  Outer joined child tables can only be pushed using
                  <a class="link" href="optimization.html#jointype_eq_ref"><code class="literal">eq_ref</code></a>.
                </p><p>
                  If the root of the pushed join is an
                  <a class="link" href="optimization.html#jointype_eq_ref"><code class="literal">eq_ref</code></a> or
                  <a class="link" href="optimization.html#jointype_const"><code class="literal">const</code></a>, only child
                  tables joined by
                  <a class="link" href="optimization.html#jointype_eq_ref"><code class="literal">eq_ref</code></a> can be
                  appended. (A table joined by
                  <a class="link" href="optimization.html#jointype_ref"><code class="literal">ref</code></a> is likely to
                  become the root of another pushed join.)
                </p><p>
                  If the query optimizer decides on <code class="literal">Using join
                  cache</code> for a candidate child table, that
                  table cannot be pushed as a child. However, it may be
                  the root of another set of pushed tables.
                </p></li><li class="listitem"><p>
                  Joins referencing tables explicitly partitioned by
                  <code class="literal">[LINEAR] HASH</code>,
                  <code class="literal">LIST</code>, or <code class="literal">RANGE</code>
                  currently cannot be pushed down.
</p></li></ol>
</div>
<p>
              You can see whether a given join can be pushed down by
              checking it with <a class="link" href="sql-syntax.html#explain" title="13.8.2 EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a>;
              when the join can be pushed down, you can see references
              to the <code class="literal">pushed join</code> in the
              <code class="literal">Extra</code> column of the output, as shown in
              this example:
            </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>EXPLAIN</code></strong>
    -&gt;     <strong class="userinput"><code>SELECT e.first_name, e.last_name, t.title, d.dept_name</code></strong>
    -&gt;         <strong class="userinput"><code>FROM employees e</code></strong>
    -&gt;         <strong class="userinput"><code>JOIN dept_emp de ON e.emp_no=de.emp_no</code></strong>
    -&gt;         <strong class="userinput"><code>JOIN departments d ON d.dept_no=de.dept_no</code></strong>
    -&gt;         <strong class="userinput"><code>JOIN titles t ON e.emp_no=t.emp_no\G</code></strong>
*************************** 1. row ***************************
           id: 1
  select_type: SIMPLE
        table: d
         type: ALL
possible_keys: PRIMARY
          key: NULL
      key_len: NULL
          ref: NULL
         rows: 9
        Extra: Parent of 4 pushed join@1
*************************** 2. row ***************************
           id: 1
  select_type: SIMPLE
        table: de
         type: ref
possible_keys: PRIMARY,emp_no,dept_no
          key: dept_no
      key_len: 4
          ref: employees.d.dept_no
         rows: 5305
        Extra: Child of 'd' in pushed join@1
*************************** 3. row ***************************
           id: 1
  select_type: SIMPLE
        table: e
         type: eq_ref
possible_keys: PRIMARY
          key: PRIMARY
      key_len: 4
          ref: employees.de.emp_no
         rows: 1
        Extra: Child of 'de' in pushed join@1
*************************** 4. row ***************************
           id: 1
  select_type: SIMPLE
        table: t
         type: ref
possible_keys: PRIMARY,emp_no
          key: emp_no
      key_len: 4
          ref: employees.de.emp_no
         rows: 19
        Extra: Child of 'e' in pushed join@1
4 rows in set (0.00 sec)
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
                If inner joined child tables are joined by
                <a class="link" href="optimization.html#jointype_ref"><code class="literal">ref</code></a>,
                <span class="emphasis"><em>and</em></span> the result is ordered or
                grouped by a sorted index, this index cannot provide
                sorted rows, which forces writing to a sorted tempfile.
</p>
</div>
<p>
              Two additional sources of information about pushed join
              performance are available:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
                  The status variables
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_pushed_queries_defined"><code class="literal">Ndb_pushed_queries_defined</code></a>,
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_pushed_queries_dropped"><code class="literal">Ndb_pushed_queries_dropped</code></a>,
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_pushed_queries_executed"><code class="literal">Ndb_pushed_queries_executed</code></a>,
                  and
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_pushed_reads"><code class="literal">Ndb_pushed_reads</code></a>.
                </p></li><li class="listitem"><p>
                  The counters in the
                  <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-counters" title="22.5.10.10 The ndbinfo counters Table"><code class="literal">ndbinfo.counters</code></a>
                  table that belong to the <code class="literal">DBSPJ</code>
                  kernel block. See
                  <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbinfo-counters" title="22.5.10.10 The ndbinfo counters Table">Section 22.5.10.10, “The ndbinfo counters Table”</a>, for
                  information about these counters. See also
                  <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-kernel-blocks-dbspj.html" target="_top">The DBSPJ Block</a>,
                  in the <em class="citetitle">NDB Cluster API Developer
                  Guide</em>.
</p></li></ol>
</div>
</li><li class="listitem"><p><a name="sysvar_ndb_log_apply_status"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_log_apply_status"><code class="literal">ndb_log_apply_status</code></a>
</p>
<div class="table">
<a name="ndb_log_apply_status-detailtable"></a><p class="title"><b>Table 22.255
Type and value information for ndb_log_apply_status</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_apply_status">ndb_log_apply_status</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>OFF (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Whether or not a MySQL server acting
                      as a slave logs mysql.ndb_apply_status updates
                      received from its immediate master in its own
                      binary log, using its own server ID
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              A read-only variable which shows whether the server was
              started with the
              <a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-apply-status"><code class="option">--ndb-log-apply-status</code></a>
              option.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_log_bin"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_log_bin"><code class="literal">ndb_log_bin</code></a>
</p>
<div class="table">
<a name="ndb_log_bin-detailtable"></a><p class="title"><b>Table 22.256
Type and value information for ndb_log_bin</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_bin">ndb_log_bin</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Both</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>ON (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Write updates to NDB tables in the
                      binary log. Effective only if binary logging is
                      enabled with --log-bin.
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Causes updates to <code class="literal">NDB</code> tables to be
              written to the binary log. The setting for this variable
              has no effect if binary logging is not already enabled on
              the server using <a class="link" href="replication.html#sysvar_log_bin"><code class="literal">log_bin</code></a>.
              In NDB 8.0.16 and later, <code class="literal">ndb_log_bin</code>
              defaults to 0 (FALSE).
            </p></li><li class="listitem"><p><a name="sysvar_ndb_log_binlog_index"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_log_binlog_index"><code class="literal">ndb_log_binlog_index</code></a>
</p>
<div class="table">
<a name="ndb_log_binlog_index-detailtable"></a><p class="title"><b>Table 22.257
Type and value information for ndb_log_binlog_index</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_binlog_index">ndb_log_binlog_index</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>ON (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Insert mapping between epochs and
                      binary log positions into the ndb_binlog_index
                      table. Defaults to ON. Effective only if binary
                      logging is enabled on the server.
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Causes a mapping of epochs to positions in the binary log
              to be inserted into the
              <code class="literal">ndb_binlog_index</code> table. Setting this
              variable has no effect if binary logging is not already
              enabled for the server using
              <a class="link" href="replication.html#sysvar_log_bin"><code class="literal">log_bin</code></a>. (In addition,
              <a class="link" href="mysql-cluster.html#sysvar_ndb_log_bin"><code class="literal">ndb_log_bin</code></a> must not be
              disabled.) <code class="literal">ndb_log_binlog_index</code>
              defaults to <code class="literal">1</code> (<code class="literal">ON</code>);
              normally, there is never any need to change this value in
              a production environment.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_log_empty_epochs"></a>
              <a class="indexterm" name="idm140091595501904"></a>

              <a class="indexterm" name="idm140091595500864"></a>

              <a class="link" href="mysql-cluster.html#sysvar_ndb_log_empty_epochs"><code class="literal">ndb_log_empty_epochs</code></a>
</p>
<div class="table">
<a name="ndb_log_empty_epochs-detailtable"></a><p class="title"><b>Table 22.258
Type and value information for ndb_log_empty_epochs</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_empty_epochs">ndb_log_empty_epochs</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>OFF (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: When enabled, epochs in which there
                      were no changes are written to the
                      ndb_apply_status and ndb_binlog_index tables, even
                      when log_slave_updates is enabled
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              When this variable is set to 0, epoch transactions with no
              changes are not written to the binary log, although a row
              is still written even for an empty epoch in
              <code class="literal">ndb_binlog_index</code>.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_log_empty_update"></a>
              <a class="indexterm" name="idm140091595464096"></a>

              <a class="indexterm" name="idm140091595463056"></a>

              <a class="link" href="mysql-cluster.html#sysvar_ndb_log_empty_update"><code class="literal">ndb_log_empty_update</code></a>
</p>
<div class="table">
<a name="ndb_log_empty_update-detailtable"></a><p class="title"><b>Table 22.259
Type and value information for ndb_log_empty_update</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_empty_update">ndb_log_empty_update</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>OFF (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: When enabled, updates which produce
                      no changes are written to the ndb_apply_status and
                      ndb_binlog_index tables, even when
                      log_slave_updates is enabled
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              When this variable is set to <code class="literal">ON</code>
              (<code class="literal">1</code>), update transactions with no
              changes are written to the binary log, even when
              <a class="link" href="replication.html#option_mysqld_log-slave-updates"><code class="option">--log-slave-updates</code></a> is
              enabled.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_log_exclusive_reads"></a>
              <a class="indexterm" name="idm140091595424704"></a>

              <a class="indexterm" name="idm140091595423664"></a>

              <a class="link" href="mysql-cluster.html#sysvar_ndb_log_exclusive_reads"><code class="literal">ndb_log_exclusive_reads</code></a>
</p>
<div class="table">
<a name="ndb_log_exclusive_reads-detailtable"></a><p class="title"><b>Table 22.260
Type and value information for ndb_log_exclusive_reads</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_exclusive_reads">ndb_log_exclusive_reads</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Both</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>0 (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Log primary key reads with exclusive
                      locks; allow conflict resolution based on read
                      conflicts
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              This variable determines whether primary key reads are
              logged with exclusive locks, which allows for NDB Cluster
              Replication conflict detection and resolution based on
              read conflicts. To enable these locks, set the value of
              <code class="literal">ndb_log_exclusive_reads</code> to 1. 0, which
              disables such locking, is the default.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-examples-read-conflicts" title="Read conflict detection and resolution">Read conflict detection and resolution</a>.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_log_orig"></a>
              <a class="indexterm" name="idm140091595385712"></a>

              <a class="indexterm" name="idm140091595384656"></a>

              <a class="link" href="mysql-cluster.html#sysvar_ndb_log_orig"><code class="literal">ndb_log_orig</code></a>
</p>
<div class="table">
<a name="ndb_log_orig-detailtable"></a><p class="title"><b>Table 22.261
Type and value information for ndb_log_orig</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_orig">ndb_log_orig</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>OFF (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Whether the id and epoch of the
                      originating server are recorded in the
                      mysql.ndb_binlog_index table. Set using the
                      --ndb-log-orig option when starting mysqld.
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Shows whether the originating server ID and epoch are
              logged in the <code class="literal">ndb_binlog_index</code> table.
              Set using the
              <a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-orig"><code class="option">--ndb-log-orig</code></a> server
              option.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_log_transaction_id"></a>
              <a class="indexterm" name="idm140091595347008"></a>

              <a class="indexterm" name="idm140091595345968"></a>

              <a class="link" href="mysql-cluster.html#sysvar_ndb_log_transaction_id"><code class="literal">ndb_log_transaction_id</code></a>
</p>
<div class="table">
<a name="ndb_log_transaction_id-detailtable"></a><p class="title"><b>Table 22.262
Type and value information for ndb_log_transaction_id</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_transaction_id">ndb_log_transaction_id</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>OFF (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Whether NDB transaction IDs are
                      written into the binary log (Read-only.)
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              This read-only, Boolean system variable shows whether a
              slave <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> writes NDB transaction IDs
              in the binary log (required to use
              <span class="quote">“<span class="quote">active-active</span>”</span> NDB Cluster Replication with
              <code class="literal">NDB$EPOCH_TRANS()</code> conflict detection).
              To change the setting, use the
              <a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-transaction-id"><code class="option">--ndb-log-transaction-id</code></a>
              option.
            </p><p>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_log_transaction_id"><code class="literal">ndb_log_transaction_id</code></a> is
              not supported in mainline MySQL Server 8.0.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="22.6.11 NDB Cluster Replication Conflict Resolution">Section 22.6.11, “NDB Cluster Replication Conflict Resolution”</a>.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_metadata_check"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_metadata_check"><code class="literal">ndb_metadata_check</code></a>
</p>
<div class="table">
<a name="ndb_metadata_check-detailtable"></a><p class="title"><b>Table 22.263
Type and value information for ndb_metadata_check</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal">ndb_metadata_check</code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type: Default, Range</td>
                  <td>boolean: ON (Version: 8.0.16)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Enable auto-detection of NDB metadata
                      changes with respect to MySQL data dictionary;
                      enabled by default
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Beginning with NDB 8.0.16, <code class="literal">NDB</code> uses a
              background thread to check for metadata changes each
              <a class="link" href="mysql-cluster.html#sysvar_ndb_metadata_check_interval"><code class="literal">ndb_metadata_check_interval</code></a>
              seconds as compared with the MySQL data dictionary. This
              metadata change detection thread can be disabled by
              setting <code class="literal">ndb_metadata_check</code> to
              <code class="literal">OFF</code>. The thread is enabled by default.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_metadata_check_interval"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_metadata_check_interval"><code class="literal">ndb_metadata_check_interval</code></a>
</p>
<div class="table">
<a name="ndb_metadata_check_interval-detailtable"></a><p class="title"><b>Table 22.264
Type and value information for ndb_metadata_check_interval</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal">ndb_metadata_check_interval</code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type: Default, Range</td>
                  <td>integer: 60 / 0 - 31536000 (Version: 8.0.16)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Interval in seconds to perform check
                      for NDB metadata changes with respect to MySQL
                      data dictionary
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              In NDB 8.0.16 and later, NDB runs a metadata change
              detection thread in the background to determine when the
              NDB dictionary has changed with respect to the MySQL data
              dictionary. By default,the interval between such checks is
              60 seconds; this can be adjusted by setting the value of
              <code class="literal">ndb_metadata_check_interval</code>. To enable
              or disable the thread, use
              <a class="link" href="mysql-cluster.html#sysvar_ndb_metadata_check"><code class="literal">ndb_metadata_check</code></a>.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_optimized_node_selection"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_optimized_node_selection"><code class="literal">ndb_optimized_node_selection</code></a>
</p>
<div class="table">
<a name="ndb_optimized_node_selection-detailtable"></a><p class="title"><b>Table 22.265
Type and value information for ndb_optimized_node_selection</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_optimized_node_selection">ndb_optimized_node_selection</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>ON (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>3 / 0 - 3 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Determines how an SQL node chooses a
                      cluster data node to use as transaction
                      coordinator
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              There are two forms of optimized node selection, described
              here:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
                  The SQL node uses
                  <span class="firstterm">promixity</span> to
                  determine the transaction coordinator; that is, the
                  <span class="quote">“<span class="quote">closest</span>”</span> data node to the SQL node is
                  chosen as the transaction coordinator. For this
                  purpose, a data node having a shared memory connection
                  with the SQL node is considered to be
                  <span class="quote">“<span class="quote">closest</span>”</span> to the SQL node; the next
                  closest (in order of decreasing proximity) are: TCP
                  connection to <code class="literal">localhost</code>; SCI
                  connection; TCP connection from a host other than
                  <code class="literal">localhost</code>.
                </p></li><li class="listitem"><p>
                  The SQL thread uses
                  <span class="firstterm">distribution
                  awareness</span> to select the data node. That is,
                  the data node housing the cluster partition accessed
                  by the first statement of a given transaction is used
                  as the transaction coordinator for the entire
                  transaction. (This is effective only if the first
                  statement of the transaction accesses no more than one
                  cluster partition.)
</p></li></ol>
</div>
<p>
              This option takes one of the integer values
              <code class="literal">0</code>, <code class="literal">1</code>,
              <code class="literal">2</code>, or <code class="literal">3</code>.
              <code class="literal">3</code> is the default. These values affect
              node selection as follows:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <code class="literal">0</code>: Node selection is not optimized.
                  Each data node is employed as the transaction
                  coordinator 8 times before the SQL thread proceeds to
                  the next data node.
                </p></li><li class="listitem"><p>
                  <code class="literal">1</code>: Proximity to the SQL node is
                  used to determine the transaction coordinator.
                </p></li><li class="listitem"><p>
                  <code class="literal">2</code>: Distribution awareness is used
                  to select the transaction coordinator. However, if the
                  first statement of the transaction accesses more than
                  one cluster partition, the SQL node reverts to the
                  round-robin behavior seen when this option is set to
                  <code class="literal">0</code>.
                </p></li><li class="listitem"><p>
                  <code class="literal">3</code>: If distribution awareness can be
                  employed to determine the transaction coordinator,
                  then it is used; otherwise proximity is used to select
                  the transaction coordinator. (This is the default
                  behavior.)
</p></li></ul>
</div>
<p>
              Proximity is determined as follows:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
                  Start with the value set for the
                  <a class="link" href="mysql-cluster.html#ndbparam-tcp-group"><code class="literal">Group</code></a> parameter
                  (default 55).
                </p></li><li class="listitem"><p>
                  For an API node sharing the same host with other API
                  nodes, decrement the value by 1. Assuming the default
                  value for <code class="literal">Group</code>, the effective
                  value for data nodes on same host as the API node is
                  54, and for remote data nodes 55.
                </p></li><li class="listitem"><p>
                  Setting
                  <a class="link" href="mysql-cluster.html#sysvar_ndb_data_node_neighbour"><code class="literal">ndb_data_node_neighbour</code></a>
                  further decreases the effective
                  <code class="literal">Group</code> value by 50, causing this
                  node to be regarded as the nearest node. This is
                  needed only when all data nodes are on hosts other
                  than that hosts the API node and it is desirable to
                  dedicate one of them to the API node. In normal cases,
                  the default adjustment described previously is
                  sufficient.
</p></li></ol>
</div>
<p>
              Frequent changes in
              <code class="literal">ndb_data_node_neighbour</code> are not
              advisable, since this changes the state of the cluster
              connection and thus may disrupt the selection algorithm
              for new transactions from each thread until it
              stablilizes.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_read_backup"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_read_backup"><code class="literal">ndb_read_backup</code></a>
</p>
<div class="table">
<a name="ndb_read_backup-detailtable"></a><p class="title"><b>Table 22.266
Type and value information for ndb_read_backup</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_read_backup">ndb_read_backup</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>OFF (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Enable read from any replica
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Enable read from any replica for any
              <code class="literal">NDB</code> table subsequently created.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_recv_thread_activation_threshold"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_recv_thread_activation_threshold"><code class="literal">ndb_recv_thread_activation_threshold</code></a>
</p>
<div class="table">
<a name="ndb_recv_thread_activation_threshold-detailtable"></a><p class="title"><b>Table 22.267
Type and value information for ndb_recv_thread_activation_threshold</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_recv_thread_activation_threshold">ndb_recv_thread_activation_threshold</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>8 / 0 (MIN_ACTIVATION_THRESHOLD) - 16 (MAX_ACTIVATION_THRESHOLD)
                    (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Activation threshold when receive
                      thread takes over the polling of the cluster
                      connection (measured in concurrently active
                      threads)
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              When this number of concurrently active threads is
              reached, the receive thread takes over polling of the
              cluster connection.
            </p><p>
              This variable is global in scope. It can also be set on
              startup using the
              <a class="link" href="mysql-cluster.html#option_mysqld_ndb-recv-thread-activation-threshold"><code class="option">--ndb-recv-thread-activation-threshold</code></a>
              option.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_recv_thread_cpu_mask"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_recv_thread_cpu_mask"><code class="literal">ndb_recv_thread_cpu_mask</code></a>
</p>
<div class="table">
<a name="ndb_recv_thread_cpu_mask-detailtable"></a><p class="title"><b>Table 22.268
Type and value information for ndb_recv_thread_cpu_mask</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_recv_thread_cpu_mask">ndb_recv_thread_cpu_mask</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>[empty] (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: CPU mask for locking receiver threads
                      to specific CPUs; specified as hexadecimal. See
                      documentation for details.
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              CPU mask for locking receiver threads to specific CPUs.
              This is specified as a hexadecimal bitmask. For example,
              <code class="literal">0x33</code> means that one CPU is used per
              receiver thread. An empty string is the default; setting
              <code class="literal">ndb_recv_thread_cpu_mask</code> to this value
              removes any receiver thread locks previously set.
            </p><p>
              This variable is global in scope. It can also be set on
              startup using the
              <a class="link" href="mysql-cluster.html#option_mysqld_ndb-recv-thread-cpu-mask"><code class="option">--ndb-recv-thread-cpu-mask</code></a>
              option.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_report_thresh_binlog_epoch_slip"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_report_thresh_binlog_epoch_slip"><code class="literal">ndb_report_thresh_binlog_epoch_slip</code></a>
</p>
<div class="table">
<a name="ndb_report_thresh_binlog_epoch_slip-detailtable"></a><p class="title"><b>Table 22.269
Type and value information for ndb_report_thresh_binlog_epoch_slip</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_report_thresh_binlog_epoch_slip">ndb_report_thresh_binlog_epoch_slip</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>3 / 0 - 256 (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>10 / 0 - 256 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: NDB 7.5.4 and later: Threshold for
                      number of epochs completely buffered, but not yet
                      consumed by binlog injector thread which when
                      exceeded generates BUFFERED_EPOCHS_OVER_THRESHOLD
                      event buffer status message; prior to NDB 7.5.4:
                      Threshold for number of epochs to lag behind
                      before reporting binary log status
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              This represents the threshold for the number of epochs
              completely buffered in the event buffer, but not yet
              consumed by the binlog injector thread. When this degree
              of slippage (lag) is exceeded, an event buffer status
              message is reported, with
              <code class="literal">BUFFERED_EPOCHS_OVER_THRESHOLD</code> supplied
              as the reason (see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-logs-event-buffer" title="22.5.7.3 Event Buffer Reporting in the Cluster Log">Section 22.5.7.3, “Event Buffer Reporting in the Cluster Log”</a>). Slip
              is increased when an epoch is received from data nodes and
              buffered completely in the event buffer; it is decreased
              when an epoch is consumed by the binlog injector thread,
              it is reduced. Empty epochs are buffered and queued, and
              so included in this calculation only when this is enabled
              using the
              <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb-seteventbufferqueueemptyepoch.html" target="_top"><code class="literal">Ndb::setEventBufferQueueEmptyEpoch()</code></a>
              method from the NDB API.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_report_thresh_binlog_mem_usage"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_report_thresh_binlog_mem_usage"><code class="literal">ndb_report_thresh_binlog_mem_usage</code></a>
</p>
<div class="table">
<a name="ndb_report_thresh_binlog_mem_usage-detailtable"></a><p class="title"><b>Table 22.270
Type and value information for ndb_report_thresh_binlog_mem_usage</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_report_thresh_binlog_mem_usage">ndb_report_thresh_binlog_mem_usage</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>10 / 0 - 10 (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: This is a threshold on the percentage
                      of free memory remaining before reporting binary
                      log status
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              This is a threshold on the percentage of free memory
              remaining before reporting binary log status. For example,
              a value of <code class="literal">10</code> (the default) means that
              if the amount of available memory for receiving binary log
              data from the data nodes falls below 10%, a status message
              is sent to the cluster log.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_row_checksum"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_row_checksum"><code class="literal">ndb_row_checksum</code></a>
</p>
<div class="table">
<a name="ndb_row_checksum-detailtable"></a><p class="title"><b>Table 22.271
Type and value information for ndb_row_checksum</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_row_checksum">ndb_row_checksum</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td>integer</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>1 / 0 - 1 (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: When enabled, set row checksums;
                      enabled by default
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Traditionally, <code class="literal">NDB</code> has created tables
              with row checksums, which checks for hardware issues at
              the expense of performance. Setting
              <code class="literal">ndb_row_checksum</code> to 0 means that row
              checksums are <span class="emphasis"><em>not</em></span> used for new or
              altered tables, which has a significant impact on
              performance for all types of queries. This variable is set
              to 1 by default, to provide backward-compatible behavior.
            </p></li><li class="listitem"><p><a name="sysvar_slave_allow_batching"></a>
              <a class="link" href="mysql-cluster.html#sysvar_slave_allow_batching"><code class="literal">slave_allow_batching</code></a>
</p>
<div class="table">
<a name="slave_allow_batching-detailtable"></a><p class="title"><b>Table 22.272
Type and value information for slave_allow_batching</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_slave_allow_batching">slave_allow_batching</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>off (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Turns update batching on and off for
                      a replication slave
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Whether or not batched updates are enabled on NDB Cluster
              replication slaves.
            </p><p>
              Setting this variable has an effect only when using
              replication with the <code class="literal">NDB</code> storage
              engine; in MySQL Server 8.0, it is present
              but does nothing. For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-starting" title="22.6.6 Starting NDB Cluster Replication (Single Replication Channel)">Section 22.6.6, “Starting NDB Cluster Replication (Single Replication Channel)”</a>.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_show_foreign_key_mock_tables"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_show_foreign_key_mock_tables"><code class="literal">ndb_show_foreign_key_mock_tables</code></a>
</p>
<div class="table">
<a name="ndb_show_foreign_key_mock_tables-detailtable"></a><p class="title"><b>Table 22.273
Type and value information for ndb_show_foreign_key_mock_tables</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_show_foreign_key_mock_tables">ndb_show_foreign_key_mock_tables</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>OFF (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Show the mock tables used to support
                      foreign_key_checks=0
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Show the mock tables used by <code class="literal">NDB</code> to
              support
              <a class="link" href="server-administration.html#sysvar_foreign_key_checks"><code class="literal">foreign_key_checks=0</code></a>.
              When this is enabled, extra warnings are shown when
              creating and dropping the tables. The real (internal) name
              of the table can be seen in the output of
              <a class="link" href="sql-syntax.html#show-create-table" title="13.7.6.10 SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE TABLE</code></a>.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_slave_conflict_role"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_slave_conflict_role"><code class="literal">ndb_slave_conflict_role</code></a>
</p>
<div class="table">
<a name="ndb_slave_conflict_role-detailtable"></a><p class="title"><b>Table 22.274
Type and value information for ndb_slave_conflict_role</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_slave_conflict_role">ndb_slave_conflict_role</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>NONE / NONE, PRIMARY, SECONDARY, PASS (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Role for slave to play in conflict
                      detection and resolution. Value is one of PRIMARY,
                      SECONDARY, PASS, or NONE (default). Can be changed
                      only when slave SQL thread is stopped. See
                      documentation for further information.
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Determine the role of this SQL node (and NDB Cluster) in a
              circular (<span class="quote">“<span class="quote">active-active</span>”</span>) replication setup.
              <code class="literal">ndb_slave_conflict_role</code> can take any
              one of the values <code class="literal">PRIMARY</code>,
              <code class="literal">SECONDARY</code>, <code class="literal">PASS</code>, or
              <code class="literal">NULL</code> (the default). The slave SQL
              thread must be stopped before you can change
              <code class="literal">ndb_slave_conflict_role</code>. In addition,
              it is not possible to change directly between
              <code class="literal">PASS</code> and either of
              <code class="literal">PRIMARY</code> or <code class="literal">SECONDARY</code>
              directly; in such cases, you must ensure that the SQL
              thread is stopped, then execute
              <a class="link" href="sql-syntax.html#set-statement" title="13.7.5 SET Syntax"><code class="literal">SET
              @@GLOBAL.ndb_slave_conflict_role = 'NONE'</code></a> first.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="22.6.11 NDB Cluster Replication Conflict Resolution">Section 22.6.11, “NDB Cluster Replication Conflict Resolution”</a>.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_table_no_logging"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_table_no_logging"><code class="literal">ndb_table_no_logging</code></a>
</p>
<div class="table">
<a name="ndb_table_no_logging-detailtable"></a><p class="title"><b>Table 22.275
Type and value information for ndb_table_no_logging</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_table_no_logging">ndb_table_no_logging</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Session</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>FALSE (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: NDB tables created when this setting
                      is enabled are not checkpointed to disk (although
                      table schema files are created). The setting in
                      effect when the table is created with or altered
                      to use NDBCLUSTER persists for the lifetime of the
                      table.
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              When this variable is set to <code class="literal">ON</code> or
              <code class="literal">1</code>, it causes
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables not to be
              checkpointed to disk. More specifically, this setting
              applies to tables which are created or altered using
              <code class="literal">ENGINE NDB</code> when
              <a class="link" href="mysql-cluster.html#sysvar_ndb_table_no_logging"><code class="literal">ndb_table_no_logging</code></a> is
              enabled, and continues to apply for the lifetime of the
              table, even if
              <a class="link" href="mysql-cluster.html#sysvar_ndb_table_no_logging"><code class="literal">ndb_table_no_logging</code></a> is
              later changed. Suppose that <code class="literal">A</code>,
              <code class="literal">B</code>, <code class="literal">C</code>, and
              <code class="literal">D</code> are tables that we create (and
              perhaps also alter), and that we also change the setting
              for <a class="link" href="mysql-cluster.html#sysvar_ndb_table_no_logging"><code class="literal">ndb_table_no_logging</code></a>
              as shown here:
            </p><pre data-lang="sql" class="programlisting">
SET @@ndb_table_no_logging = 1;

CREATE TABLE A ... ENGINE NDB;

CREATE TABLE B ... ENGINE MYISAM;
CREATE TABLE C ... ENGINE MYISAM;

ALTER TABLE B ENGINE NDB;

SET @@ndb_table_no_logging = 0;

CREATE TABLE D ... ENGINE NDB;
ALTER TABLE C ENGINE NDB;

SET @@ndb_table_no_logging = 1;
</pre><p>
              After the previous sequence of events, tables
              <code class="literal">A</code> and <code class="literal">B</code> are not
              checkpointed; <code class="literal">A</code> was created with
              <code class="literal">ENGINE NDB</code> and B was altered to use
              <code class="literal">NDB</code>, both while
              <code class="literal">ndb_table_no_logging</code> was enabled.
              However, tables <code class="literal">C</code> and
              <code class="literal">D</code> are logged; <code class="literal">C</code> was
              altered to use <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> and
              <code class="literal">D</code> was created using <code class="literal">ENGINE
              NDB</code>, both while
              <a class="link" href="mysql-cluster.html#sysvar_ndb_table_no_logging"><code class="literal">ndb_table_no_logging</code></a> was
              disabled. Setting
              <a class="link" href="mysql-cluster.html#sysvar_ndb_table_no_logging"><code class="literal">ndb_table_no_logging</code></a> back
              to <code class="literal">1</code> or <code class="literal">ON</code> does
              <span class="emphasis"><em>not</em></span> cause table <code class="literal">C</code>
              or <code class="literal">D</code> to be checkpointed.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
                <a class="link" href="mysql-cluster.html#sysvar_ndb_table_no_logging"><code class="literal">ndb_table_no_logging</code></a>
                has no effect on the creation of
                <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table schema files; to
                suppress these, use
                <a class="link" href="mysql-cluster.html#sysvar_ndb_table_temporary"><code class="literal">ndb_table_temporary</code></a>
                instead.
</p>
</div>
</li><li class="listitem"><p><a name="sysvar_ndb_table_temporary"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_table_temporary"><code class="literal">ndb_table_temporary</code></a>
</p>
<div class="table">
<a name="ndb_table_temporary-detailtable"></a><p class="title"><b>Table 22.276
Type and value information for ndb_table_temporary</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_table_temporary">ndb_table_temporary</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Session</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>FALSE (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: NDB tables are not persistent on
                      disk: no schema files are created and the tables
                      are not logged
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              When set to <code class="literal">ON</code> or <code class="literal">1</code>,
              this variable causes <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>
              tables not to be written to disk: This means that no table
              schema files are created, and that the tables are not
              logged.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
                Setting this variable currently has no effect. This is a
                known issue; see Bug #34036.
</p>
</div>
</li><li class="listitem"><p><a name="sysvar_ndb_use_copying_alter_table"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_use_copying_alter_table"><code class="literal">ndb_use_copying_alter_table</code></a>
</p>
<div class="table">
<a name="ndb_use_copying_alter_table-detailtable"></a><p class="title"><b>Table 22.277
Type and value information for ndb_use_copying_alter_table</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_use_copying_alter_table">ndb_use_copying_alter_table</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Both</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Use copying ALTER TABLE operations in
                      NDB Cluster
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Forces <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> to use copying of
              tables in the event of problems with online
              <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> operations. The
              default value is <code class="literal">OFF</code>.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_use_exact_count"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_use_exact_count"><code class="literal">ndb_use_exact_count</code></a>
</p>
<div class="table">
<a name="ndb_use_exact_count-detailtable"></a><p class="title"><b>Table 22.278
Type and value information for ndb_use_exact_count</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_use_exact_count">ndb_use_exact_count</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Both</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>ON (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>OFF (Version: NDB 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Use exact row count when planning
                      queries
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Forces <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> to use a count of
              records during <code class="literal">SELECT COUNT(*)</code> query
              planning to speed up this type of query. The default value
              is <code class="literal">OFF</code>, which allows for faster queries
              overall.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_use_transactions"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_use_transactions"><code class="literal">ndb_use_transactions</code></a>
</p>
<div class="table">
<a name="ndb_use_transactions-detailtable"></a><p class="title"><b>Table 22.279
Type and value information for ndb_use_transactions</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_use_transactions">ndb_use_transactions</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Both</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>ON (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Forces NDB to use a count of records
                      during SELECT COUNT(*) query planning to speed up
                      this type of query
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              You can disable <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>
              transaction support by setting this variable's values to
              <code class="literal">OFF</code> (not recommended). The default is
              <code class="literal">ON</code>.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_version"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_version"><code class="literal">ndb_version</code></a>
</p>
<div class="table">
<a name="ndb_version-detailtable"></a><p class="title"><b>Table 22.280
Type and value information for ndb_version</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_version">ndb_version</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>(Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Shows build and NDB engine version as
                      an integer
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              <code class="literal">NDB</code> engine version, as a composite
              integer.
            </p></li><li class="listitem"><p><a name="sysvar_ndb_version_string"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndb_version_string"><code class="literal">ndb_version_string</code></a>
</p>
<div class="table">
<a name="ndb_version_string-detailtable"></a><p class="title"><b>Table 22.281
Type and value information for ndb_version_string</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_version_string">ndb_version_string</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>(Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Shows build information including NDB
                      engine version in ndb-x.y.z format
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              <code class="literal">NDB</code> engine version in
              <code class="literal">ndb-<em class="replaceable"><code>x.y.z</code></em></code>
              format.
            </p></li><li class="listitem"><p><a name="sysvar_server_id_bits"></a>
              <a class="indexterm" name="idm140091594662480"></a>

              <a class="indexterm" name="idm140091594661472"></a>

              <a class="link" href="mysql-cluster.html#sysvar_server_id_bits"><code class="literal">server_id_bits</code></a>
</p>
<div class="table">
<a name="server_id_bits-detailtable"></a><p class="title"><b>Table 22.282
Type and value information for server_id_bits</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_server_id_bits">server_id_bits</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>32 / 7 - 32 (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: The effective value of server_id if
                      the server was started with the --server-id-bits
                      option set to a nondefault value
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              The effective value of
              <a class="link" href="server-administration.html#sysvar_server_id"><code class="literal">server_id</code></a> if the server
              was started with the
              <a class="link" href="mysql-cluster.html#option_mysqld_server-id-bits"><code class="option">--server-id-bits</code></a> option set
              to a nondefault value.
            </p><p>
              If the value of <a class="link" href="server-administration.html#sysvar_server_id"><code class="literal">server_id</code></a>
              greater than or equal to 2 to the power of
              <a class="link" href="mysql-cluster.html#sysvar_server_id_bits"><code class="literal">server_id_bits</code></a>,
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> refuses to start.
            </p><p>
              This system variable is supported only by NDB Cluster.
              <a class="link" href="mysql-cluster.html#sysvar_server_id_bits"><code class="literal">server_id_bits</code></a> is not
              supported by the standard MySQL Server.
            </p></li><li class="listitem"><p><a name="sysvar_transaction_allow_batching"></a>
              <a class="indexterm" name="idm140091594620352"></a>

              <a class="indexterm" name="idm140091594619264"></a>

              <a class="link" href="mysql-cluster.html#sysvar_transaction_allow_batching"><code class="literal">transaction_allow_batching</code></a>
</p>
<div class="table">
<a name="transaction_allow_batching-detailtable"></a><p class="title"><b>Table 22.283
Type and value information for transaction_allow_batching</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_transaction_allow_batching">transaction_allow_batching</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Session</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>FALSE (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Allows batching of statements within
                      a transaction. Disable AUTOCOMMIT to use.
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              When set to <code class="literal">1</code> or <code class="literal">ON</code>,
              this variable enables batching of statements within the
              same transaction. To use this variable,
              <a class="link" href="server-administration.html#sysvar_autocommit"><code class="literal">autocommit</code></a> must first be
              disabled by setting it to <code class="literal">0</code> or
              <code class="literal">OFF</code>; otherwise, setting
              <a class="link" href="mysql-cluster.html#sysvar_transaction_allow_batching"><code class="literal">transaction_allow_batching</code></a>
              has no effect.
            </p><p>
              It is safe to use this variable with transactions that
              performs writes only, as having it enabled can lead to
              reads from the <span class="quote">“<span class="quote">before</span>”</span> image. You should
              ensure that any pending transactions are committed (using
              an explicit <a class="link" href="sql-syntax.html#commit" title="13.3.1 START TRANSACTION, COMMIT, and ROLLBACK Syntax"><code class="literal">COMMIT</code></a> if
              desired) before issuing a
              <a class="link" href="sql-syntax.html#select" title="13.2.10 SELECT Syntax"><code class="literal">SELECT</code></a>.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
                <a class="link" href="mysql-cluster.html#sysvar_transaction_allow_batching"><code class="literal">transaction_allow_batching</code></a>
                should not be used whenever there is the possibility
                that the effects of a given statement depend on the
                outcome of a previous statement within the same
                transaction.
</p>
</div>
<p>
              This variable is currently supported for NDB Cluster only.
</p></li></ul>
</div>
<p>
          The system variables in the following list all relate to the
          <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo" title="22.5.10 ndbinfo: The NDB Cluster Information Database"><code class="literal">ndbinfo</code></a> information
          database.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="sysvar_ndbinfo_database"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndbinfo_database"><code class="literal">ndbinfo_database</code></a>
</p>
<div class="table">
<a name="ndbinfo_database-detailtable"></a><p class="title"><b>Table 22.284
Type and value information for ndbinfo_database</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_database">ndbinfo_database</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>ndbinfo (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: The name used for the NDB information
                      database; read only
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Shows the name used for the <code class="literal">NDB</code>
              information database; the default is
              <code class="literal">ndbinfo</code>. This is a read-only variable
              whose value is determined at compile time; you can set it
              by starting the server using
              <code class="option">--ndbinfo-database=<em class="replaceable"><code>name</code></em></code>,
              which sets the value shown for this variable but does not
              actually change the name used for the NDB information
              database.
            </p></li><li class="listitem"><p><a name="sysvar_ndbinfo_max_bytes"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndbinfo_max_bytes"><code class="literal">ndbinfo_max_bytes</code></a>
</p>
<div class="table">
<a name="ndbinfo_max_bytes-detailtable"></a><p class="title"><b>Table 22.285
Type and value information for ndbinfo_max_bytes</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_max_bytes">ndbinfo_max_bytes</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Both</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>0 / - (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Used for debugging only
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Used in testing and debugging only.
            </p></li><li class="listitem"><p><a name="sysvar_ndbinfo_max_rows"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndbinfo_max_rows"><code class="literal">ndbinfo_max_rows</code></a>
</p>
<div class="table">
<a name="ndbinfo_max_rows-detailtable"></a><p class="title"><b>Table 22.286
Type and value information for ndbinfo_max_rows</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_max_rows">ndbinfo_max_rows</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Both</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>10 / - (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Used for debugging only
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Used in testing and debugging only.
            </p></li><li class="listitem"><p><a name="sysvar_ndbinfo_offline"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndbinfo_offline"><code class="literal">ndbinfo_offline</code></a>
</p>
<div class="table">
<a name="ndbinfo_offline-detailtable"></a><p class="title"><b>Table 22.287
Type and value information for ndbinfo_offline</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_offline">ndbinfo_offline</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>OFF (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Put the ndbinfo database into offline
                      mode, in which no rows are returned from tables or
                      views
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Place the <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo" title="22.5.10 ndbinfo: The NDB Cluster Information Database"><code class="literal">ndbinfo</code></a>
              database into offline mode, in which tables and views can
              be opened even when they do not actually exist, or when
              they exist but have different definitions in
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>. No rows are returned
              from such tables (or views).
            </p></li><li class="listitem"><p><a name="sysvar_ndbinfo_show_hidden"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndbinfo_show_hidden"><code class="literal">ndbinfo_show_hidden</code></a>
</p>
<div class="table">
<a name="ndbinfo_show_hidden-detailtable"></a><p class="title"><b>Table 22.288
Type and value information for ndbinfo_show_hidden</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_show_hidden">ndbinfo_show_hidden</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Both</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>OFF (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: Whether to show ndbinfo internal base
                      tables in the mysql client. The default is OFF.
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Whether or not the
              <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo" title="22.5.10 ndbinfo: The NDB Cluster Information Database"><code class="literal">ndbinfo</code></a> database's
              underlying internal tables are shown in the
              <code class="literal">mysql</code> client. The default is
              <code class="literal">OFF</code>.
            </p></li><li class="listitem"><p><a name="sysvar_ndbinfo_table_prefix"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndbinfo_table_prefix"><code class="literal">ndbinfo_table_prefix</code></a>
</p>
<div class="table">
<a name="ndbinfo_table_prefix-detailtable"></a><p class="title"><b>Table 22.289
Type and value information for ndbinfo_table_prefix</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_table_prefix">ndbinfo_table_prefix</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Both</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>ndb$ (Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: The prefix to use for naming ndbinfo
                      internal base tables
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              The prefix used in naming the ndbinfo database's base
              tables (normally hidden, unless exposed by setting
              <a class="link" href="mysql-cluster.html#sysvar_ndbinfo_show_hidden"><code class="literal">ndbinfo_show_hidden</code></a>).
              This is a read-only variable whose default value is
              <code class="literal">ndb$</code>. You can start the server with the
              <code class="option">--ndbinfo-table-prefix</code> option, but this
              merely sets the variable and does not change the actual
              prefix used to name the hidden base tables; the prefix
              itself is determined at compile time.
            </p></li><li class="listitem"><p><a name="sysvar_ndbinfo_version"></a>
              <a class="link" href="mysql-cluster.html#sysvar_ndbinfo_version"><code class="literal">ndbinfo_version</code></a>
</p>
<div class="table">
<a name="ndbinfo_version-detailtable"></a><p class="title"><b>Table 22.290
Type and value information for ndbinfo_version</b></p>
<div class="table-contents">
<table><col width="35%"><col width="65%"><thead><tr>
                  <th scope="col">Property</th>
                  <th scope="col">Value</th>
                </tr></thead><tbody><tr>
                  <td scope="row">Name</td>
                  <td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_version">ndbinfo_version</a></code></td>
                </tr><tr>
                  <td scope="row">Command Line</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">System Variable</td>
                  <td>Yes</td>
                </tr><tr>
                  <td scope="row">Status Variable</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Option File</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Scope</td>
                  <td>Global</td>
                </tr><tr>
                  <td scope="row">Dynamic</td>
                  <td>No</td>
                </tr><tr>
                  <td scope="row">Type</td>
                  <td></td>
                </tr><tr>
                  <td scope="row">Default, Range</td>
                  <td>(Version: 8.0)</td>
                </tr><tr>
                  <td scope="row">Notes</td>
                  <td><p>
                      DESCRIPTION: The version of the ndbinfo engine;
                      read only
                    </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
              Shows the version of the
              <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo" title="22.5.10 ndbinfo: The NDB Cluster Information Database"><code class="literal">ndbinfo</code></a> engine in use;
              read-only.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="mysql-cluster-status-variables"></a>22.3.3.9.3 NDB Cluster Status Variables</h5>

</div>

</div>

</div>
<a class="indexterm" name="idm140091594333008"></a><a class="indexterm" name="idm140091594331616"></a><p>
          This section provides detailed information about MySQL server
          status variables that relate to NDB Cluster and the
          <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine. For status
          variables not specific to NDB Cluster, and for general
          information on using status variables, see
          <a class="xref" href="server-administration.html#server-status-variables" title="5.1.10 Server Status Variables">Section 5.1.10, “Server Status Variables”</a>.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="statvar_Handler_discover"></a>
              <a class="link" href="mysql-cluster.html#statvar_Handler_discover"><code class="literal">Handler_discover</code></a>
            </p><p>
              The MySQL server can ask the
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> storage engine if
              it knows about a table with a given name. This is called
              discovery.
              <a class="link" href="mysql-cluster.html#statvar_Handler_discover"><code class="literal">Handler_discover</code></a>
              indicates the number of times that tables have been
              discovered using this mechanism.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_bytes_sent_count_session"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_sent_count_session"><code class="literal">Ndb_api_bytes_sent_count_session</code></a>
            </p><p>
              Amount of data (in bytes) sent to the data nodes in this
              client session.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it relates to the current session only,
              and is not affected by any other clients of this
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_bytes_sent_count_slave"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_sent_count_slave"><code class="literal">Ndb_api_bytes_sent_count_slave</code></a>
            </p><p>
              Amount of data (in bytes) sent to the data nodes by this
              slave.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope. If
              this MySQL server does not act as a replication slave, or
              does not use NDB tables, this value is always 0.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_bytes_sent_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_sent_count"><code class="literal">Ndb_api_bytes_sent_count</code></a>
            </p><p>
              Amount of data (in bytes) sent to the data nodes by this
              MySQL Server (SQL node).
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_bytes_received_count_session"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_received_count_session"><code class="literal">Ndb_api_bytes_received_count_session</code></a>
            </p><p>
              Amount of data (in bytes) received from the data nodes in
              this client session.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it relates to the current session only,
              and is not affected by any other clients of this
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_bytes_received_count_slave"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_received_count_slave"><code class="literal">Ndb_api_bytes_received_count_slave</code></a>
            </p><p>
              Amount of data (in bytes) received from the data nodes by
              this slave.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope. If
              this MySQL server does not act as a replication slave, or
              does not use NDB tables, this value is always 0.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_bytes_received_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_received_count"><code class="literal">Ndb_api_bytes_received_count</code></a>
            </p><p>
              Amount of data (in bytes) received from the data nodes by
              this MySQL Server (SQL node).
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_event_data_count_injector"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_event_data_count_injector"><code class="literal">Ndb_api_event_data_count_injector</code></a>
            </p><p>
              The number of row change events received by the NDB binlog
              injector thread.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_event_data_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_event_data_count"><code class="literal">Ndb_api_event_data_count</code></a>
            </p><p>
              The number of row change events received by this MySQL
              Server (SQL node).
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_event_nondata_count_injector"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_event_nondata_count_injector"><code class="literal">Ndb_api_event_nondata_count_injector</code></a>
            </p><p>
              The number of events received, other than row change
              events, by the NDB binary log injector thread.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_event_nondata_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_event_nondata_count"><code class="literal">Ndb_api_event_nondata_count</code></a>
            </p><p>
              The number of events received, other than row change
              events, by this MySQL Server (SQL node).
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_event_bytes_count_injector"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_event_bytes_count_injector"><code class="literal">Ndb_api_event_bytes_count_injector</code></a>
            </p><p>
              The number of bytes of events received by the NDB binlog
              injector thread.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_event_bytes_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_event_bytes_count"><code class="literal">Ndb_api_event_bytes_count</code></a>
            </p><p>
              The number of bytes of events received by this MySQL
              Server (SQL node).
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_pk_op_count_session"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_pk_op_count_session"><code class="literal">Ndb_api_pk_op_count_session</code></a>
            </p><p>
              The number of operations in this client session based on
              or using primary keys. This includes operations on blob
              tables, implicit unlock operations, and auto-increment
              operations, as well as user-visible primary key
              operations.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it relates to the current session only,
              and is not affected by any other clients of this
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_pk_op_count_slave"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_pk_op_count_slave"><code class="literal">Ndb_api_pk_op_count_slave</code></a>
            </p><p>
              The number of operations by this slave based on or using
              primary keys. This includes operations on blob tables,
              implicit unlock operations, and auto-increment operations,
              as well as user-visible primary key operations.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope. If
              this MySQL server does not act as a replication slave, or
              does not use NDB tables, this value is always 0.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_pk_op_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_pk_op_count"><code class="literal">Ndb_api_pk_op_count</code></a>
            </p><p>
              The number of operations by this MySQL Server (SQL node)
              based on or using primary keys. This includes operations
              on blob tables, implicit unlock operations, and
              auto-increment operations, as well as user-visible primary
              key operations.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_pruned_scan_count_session"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_pruned_scan_count_session"><code class="literal">Ndb_api_pruned_scan_count_session</code></a>
            </p><p>
              The number of scans in this client session that have been
              pruned to a single partition.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it relates to the current session only,
              and is not affected by any other clients of this
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_pruned_scan_count_slave"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_pruned_scan_count_slave"><code class="literal">Ndb_api_pruned_scan_count_slave</code></a>
            </p><p>
              The number of scans by this slave that have been pruned to
              a single partition.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope. If
              this MySQL server does not act as a replication slave, or
              does not use NDB tables, this value is always 0.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_pruned_scan_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_pruned_scan_count"><code class="literal">Ndb_api_pruned_scan_count</code></a>
            </p><p>
              The number of scans by this MySQL Server (SQL node) that
              have been pruned to a single partition.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_range_scan_count_session"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_range_scan_count_session"><code class="literal">Ndb_api_range_scan_count_session</code></a>
            </p><p>
              The number of range scans that have been started in this
              client session.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it relates to the current session only,
              and is not affected by any other clients of this
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_range_scan_count_slave"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_range_scan_count_slave"><code class="literal">Ndb_api_range_scan_count_slave</code></a>
            </p><p>
              The number of range scans that have been started by this
              slave.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope. If
              this MySQL server does not act as a replication slave, or
              does not use NDB tables, this value is always 0.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_range_scan_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_range_scan_count"><code class="literal">Ndb_api_range_scan_count</code></a>
            </p><p>
              The number of range scans that have been started by this
              MySQL Server (SQL node).
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_read_row_count_session"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_read_row_count_session"><code class="literal">Ndb_api_read_row_count_session</code></a>
            </p><p>
              The total number of rows that have been read in this
              client session. This includes all rows read by any primary
              key, unique key, or scan operation made in this client
              session.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it relates to the current session only,
              and is not affected by any other clients of this
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_read_row_count_slave"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_read_row_count_slave"><code class="literal">Ndb_api_read_row_count_slave</code></a>
            </p><p>
              The total number of rows that have been read by this
              slave. This includes all rows read by any primary key,
              unique key, or scan operation made by this slave.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope. If
              this MySQL server does not act as a replication slave, or
              does not use NDB tables, this value is always 0.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_read_row_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_read_row_count"><code class="literal">Ndb_api_read_row_count</code></a>
            </p><p>
              The total number of rows that have been read by this MySQL
              Server (SQL node). This includes all rows read by any
              primary key, unique key, or scan operation made by this
              MySQL Server (SQL node).
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_scan_batch_count_session"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_scan_batch_count_session"><code class="literal">Ndb_api_scan_batch_count_session</code></a>
            </p><p>
              The number of batches of rows received in this client
              session. 1 batch is defined as 1 set of scan results from
              a single fragment.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it relates to the current session only,
              and is not affected by any other clients of this
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_scan_batch_count_slave"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_scan_batch_count_slave"><code class="literal">Ndb_api_scan_batch_count_slave</code></a>
            </p><p>
              The number of batches of rows received by this slave. 1
              batch is defined as 1 set of scan results from a single
              fragment.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope. If
              this MySQL server does not act as a replication slave, or
              does not use NDB tables, this value is always 0.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_scan_batch_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_scan_batch_count"><code class="literal">Ndb_api_scan_batch_count</code></a>
            </p><p>
              The number of batches of rows received by this MySQL
              Server (SQL node). 1 batch is defined as 1 set of scan
              results from a single fragment.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_table_scan_count_session"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_table_scan_count_session"><code class="literal">Ndb_api_table_scan_count_session</code></a>
            </p><p>
              The number of table scans that have been started in this
              client session, including scans of internal tables,.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it relates to the current session only,
              and is not affected by any other clients of this
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_table_scan_count_slave"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_table_scan_count_slave"><code class="literal">Ndb_api_table_scan_count_slave</code></a>
            </p><p>
              The number of table scans that have been started by this
              slave, including scans of internal tables,.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope. If
              this MySQL server does not act as a replication slave, or
              does not use NDB tables, this value is always 0.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_table_scan_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_table_scan_count"><code class="literal">Ndb_api_table_scan_count</code></a>
            </p><p>
              The number of table scans that have been started by this
              MySQL Server (SQL node), including scans of internal
              tables,.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_abort_count_session"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_abort_count_session"><code class="literal">Ndb_api_trans_abort_count_session</code></a>
            </p><p>
              The number of transactions aborted in this client session.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it relates to the current session only,
              and is not affected by any other clients of this
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_abort_count_slave"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_abort_count_slave"><code class="literal">Ndb_api_trans_abort_count_slave</code></a>
            </p><p>
              The number of transactions aborted by this slave.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope. If
              this MySQL server does not act as a replication slave, or
              does not use NDB tables, this value is always 0.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_abort_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_abort_count"><code class="literal">Ndb_api_trans_abort_count</code></a>
            </p><p>
              The number of transactions aborted by this MySQL Server
              (SQL node).
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_close_count_session"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_close_count_session"><code class="literal">Ndb_api_trans_close_count_session</code></a>
            </p><p>
              The number of transactions closed in this client session.
              This value may be greater than the sum of
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_commit_count_session"><code class="literal">Ndb_api_trans_commit_count_session</code></a>
              and
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_abort_count_session"><code class="literal">Ndb_api_trans_abort_count_session</code></a>,
              since some transactions may have been rolled back.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it relates to the current session only,
              and is not affected by any other clients of this
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_close_count_slave"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_close_count_slave"><code class="literal">Ndb_api_trans_close_count_slave</code></a>
            </p><p>
              The number of transactions closed by this slave. This
              value may be greater than the sum of
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_commit_count_slave"><code class="literal">Ndb_api_trans_commit_count_slave</code></a>
              and
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_abort_count_slave"><code class="literal">Ndb_api_trans_abort_count_slave</code></a>,
              since some transactions may have been rolled back.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope. If
              this MySQL server does not act as a replication slave, or
              does not use NDB tables, this value is always 0.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_close_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_close_count"><code class="literal">Ndb_api_trans_close_count</code></a>
            </p><p>
              The number of transactions closed by this MySQL Server
              (SQL node). This value may be greater than the sum of
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_commit_count"><code class="literal">Ndb_api_trans_commit_count</code></a>
              and
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_abort_count"><code class="literal">Ndb_api_trans_abort_count</code></a>,
              since some transactions may have been rolled back.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_commit_count_session"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_commit_count_session"><code class="literal">Ndb_api_trans_commit_count_session</code></a>
            </p><p>
              The number of transactions committed in this client
              session.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it relates to the current session only,
              and is not affected by any other clients of this
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_commit_count_slave"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_commit_count_slave"><code class="literal">Ndb_api_trans_commit_count_slave</code></a>
            </p><p>
              The number of transactions committed by this slave.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope. If
              this MySQL server does not act as a replication slave, or
              does not use NDB tables, this value is always 0.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_commit_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_commit_count"><code class="literal">Ndb_api_trans_commit_count</code></a>
            </p><p>
              The number of transactions committed by this MySQL Server
              (SQL node).
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_local_read_row_count_session"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_local_read_row_count_session"><code class="literal">Ndb_api_trans_local_read_row_count_session</code></a>
            </p><p>
              The total number of rows that have been read in this
              client session. This includes all rows read by any primary
              key, unique key, or scan operation made in this client
              session.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it relates to the current session only,
              and is not affected by any other clients of this
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_local_read_row_count_slave"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_local_read_row_count_slave"><code class="literal">Ndb_api_trans_local_read_row_count_slave</code></a>
            </p><p>
              The total number of rows that have been read by this
              slave. This includes all rows read by any primary key,
              unique key, or scan operation made by this slave.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope. If
              this MySQL server does not act as a replication slave, or
              does not use NDB tables, this value is always 0.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_local_read_row_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_local_read_row_count"><code class="literal">Ndb_api_trans_local_read_row_count</code></a>
            </p><p>
              The total number of rows that have been read by this MySQL
              Server (SQL node). This includes all rows read by any
              primary key, unique key, or scan operation made by this
              MySQL Server (SQL node).
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_start_count_session"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_start_count_session"><code class="literal">Ndb_api_trans_start_count_session</code></a>
            </p><p>
              The number of transactions started in this client session.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it relates to the current session only,
              and is not affected by any other clients of this
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_start_count_slave"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_start_count_slave"><code class="literal">Ndb_api_trans_start_count_slave</code></a>
            </p><p>
              The number of transactions started by this slave.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope. If
              this MySQL server does not act as a replication slave, or
              does not use NDB tables, this value is always 0.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_start_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_start_count"><code class="literal">Ndb_api_trans_start_count</code></a>
            </p><p>
              The number of transactions started by this MySQL Server
              (SQL node).
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_uk_op_count_session"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_uk_op_count_session"><code class="literal">Ndb_api_uk_op_count_session</code></a>
            </p><p>
              The number of operations in this client session based on
              or using unique keys.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it relates to the current session only,
              and is not affected by any other clients of this
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_uk_op_count_slave"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_uk_op_count_slave"><code class="literal">Ndb_api_uk_op_count_slave</code></a>
            </p><p>
              The number of operations by this slave based on or using
              unique keys.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope. If
              this MySQL server does not act as a replication slave, or
              does not use NDB tables, this value is always 0.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_uk_op_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_uk_op_count"><code class="literal">Ndb_api_uk_op_count</code></a>
            </p><p>
              The number of operations by this MySQL Server (SQL node)
              based on or using unique keys.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_exec_complete_count_session"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_exec_complete_count_session"><code class="literal">Ndb_api_wait_exec_complete_count_session</code></a>
            </p><p>
              The number of times a thread has been blocked in this
              client session while waiting for execution of an operation
              to complete. This includes all
              <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndbtransaction-execute.html" target="_top"><code class="literal">execute()</code></a>
              calls as well as implicit executes for blob and
              auto-increment operations not visible to clients.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it relates to the current session only,
              and is not affected by any other clients of this
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_exec_complete_count_slave"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_exec_complete_count_slave"><code class="literal">Ndb_api_wait_exec_complete_count_slave</code></a>
            </p><p>
              The number of times a thread has been blocked by this
              slave while waiting for execution of an operation to
              complete. This includes all
              <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndbtransaction-execute.html" target="_top"><code class="literal">execute()</code></a>
              calls as well as implicit executes for blob and
              auto-increment operations not visible to clients.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope. If
              this MySQL server does not act as a replication slave, or
              does not use NDB tables, this value is always 0.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_exec_complete_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_exec_complete_count"><code class="literal">Ndb_api_wait_exec_complete_count</code></a>
            </p><p>
              The number of times a thread has been blocked by this
              MySQL Server (SQL node) while waiting for execution of an
              operation to complete. This includes all
              <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndbtransaction-execute.html" target="_top"><code class="literal">execute()</code></a>
              calls as well as implicit executes for blob and
              auto-increment operations not visible to clients.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_meta_request_count_session"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_meta_request_count_session"><code class="literal">Ndb_api_wait_meta_request_count_session</code></a>
            </p><p>
              The number of times a thread has been blocked in this
              client session waiting for a metadata-based signal, such
              as is expected for DDL requests, new epochs, and seizure
              of transaction records.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it relates to the current session only,
              and is not affected by any other clients of this
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_meta_request_count_slave"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_meta_request_count_slave"><code class="literal">Ndb_api_wait_meta_request_count_slave</code></a>
            </p><p>
              The number of times a thread has been blocked by this
              slave waiting for a metadata-based signal, such as is
              expected for DDL requests, new epochs, and seizure of
              transaction records.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope. If
              this MySQL server does not act as a replication slave, or
              does not use NDB tables, this value is always 0.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_meta_request_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_meta_request_count"><code class="literal">Ndb_api_wait_meta_request_count</code></a>
            </p><p>
              The number of times a thread has been blocked by this
              MySQL Server (SQL node) waiting for a metadata-based
              signal, such as is expected for DDL requests, new epochs,
              and seizure of transaction records.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_nanos_count_session"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_nanos_count_session"><code class="literal">Ndb_api_wait_nanos_count_session</code></a>
            </p><p>
              Total time (in nanoseconds) spent in this client session
              waiting for any type of signal from the data nodes.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it relates to the current session only,
              and is not affected by any other clients of this
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_nanos_count_slave"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_nanos_count_slave"><code class="literal">Ndb_api_wait_nanos_count_slave</code></a>
            </p><p>
              Total time (in nanoseconds) spent by this slave waiting
              for any type of signal from the data nodes.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope. If
              this MySQL server does not act as a replication slave, or
              does not use NDB tables, this value is always 0.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_nanos_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_nanos_count"><code class="literal">Ndb_api_wait_nanos_count</code></a>
            </p><p>
              Total time (in nanoseconds) spent by this MySQL Server
              (SQL node) waiting for any type of signal from the data
              nodes.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_scan_result_count_session"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_scan_result_count_session"><code class="literal">Ndb_api_wait_scan_result_count_session</code></a>
            </p><p>
              The number of times a thread has been blocked in this
              client session while waiting for a scan-based signal, such
              as when waiting for more results from a scan, or when
              waiting for a scan to close.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it relates to the current session only,
              and is not affected by any other clients of this
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_scan_result_count_slave"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_scan_result_count_slave"><code class="literal">Ndb_api_wait_scan_result_count_slave</code></a>
            </p><p>
              The number of times a thread has been blocked by this
              slave while waiting for a scan-based signal, such as when
              waiting for more results from a scan, or when waiting for
              a scan to close.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope. If
              this MySQL server does not act as a replication slave, or
              does not use NDB tables, this value is always 0.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_scan_result_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_scan_result_count"><code class="literal">Ndb_api_wait_scan_result_count</code></a>
            </p><p>
              The number of times a thread has been blocked by this
              MySQL Server (SQL node) while waiting for a scan-based
              signal, such as when waiting for more results from a scan,
              or when waiting for a scan to close.
            </p><p>
              Although this variable can be read using either
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW GLOBAL
              STATUS</code></a> or
              <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW SESSION
              STATUS</code></a>, it is effectively global in scope.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_cluster_node_id"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_cluster_node_id"><code class="literal">Ndb_cluster_node_id</code></a>
            </p><p>
              If the server is acting as an NDB Cluster node, then the
              value of this variable its node ID in the cluster.
            </p><p>
              If the server is not part of an NDB Cluster, then the
              value of this variable is 0.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_config_from_host"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_config_from_host"><code class="literal">Ndb_config_from_host</code></a>
            </p><p>
              If the server is part of an NDB Cluster, the value of this
              variable is the host name or IP address of the Cluster
              management server from which it gets its configuration
              data.
            </p><p>
              If the server is not part of an NDB Cluster, then the
              value of this variable is an empty string.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_config_from_port"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_config_from_port"><code class="literal">Ndb_config_from_port</code></a>
            </p><p>
              If the server is part of an NDB Cluster, the value of this
              variable is the number of the port through which it is
              connected to the Cluster management server from which it
              gets its configuration data.
            </p><p>
              If the server is not part of an NDB Cluster, then the
              value of this variable is 0.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_fn_max_del_win"></a>
              <code class="literal">Ndb_conflict_fn_max_del_win</code>
            </p><p>
              Shows the number of times that a row was rejected on the
              current SQL node due to NDB Cluster Replication conflict
              resolution using <code class="literal">NDB$MAX_DELETE_WIN()</code>,
              since the last time that this <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>
              was started.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="22.6.11 NDB Cluster Replication Conflict Resolution">Section 22.6.11, “NDB Cluster Replication Conflict Resolution”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_fn_max"></a>
              <code class="literal">Ndb_conflict_fn_max</code>
            </p><p>
              Used in NDB Cluster Replication conflict resolution, this
              variable shows the number of times that a row was not
              applied on the current SQL node due to <span class="quote">“<span class="quote">greatest
              timestamp wins</span>”</span> conflict resolution since the last
              time that this <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> was started.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="22.6.11 NDB Cluster Replication Conflict Resolution">Section 22.6.11, “NDB Cluster Replication Conflict Resolution”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_fn_old"></a>
              <code class="literal">Ndb_conflict_fn_old</code>
            </p><p>
              Used in NDB Cluster Replication conflict resolution, this
              variable shows the number of times that a row was not
              applied as the result of <span class="quote">“<span class="quote">same timestamp
              wins</span>”</span> conflict resolution on a given
              <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> since the last time it was
              restarted.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="22.6.11 NDB Cluster Replication Conflict Resolution">Section 22.6.11, “NDB Cluster Replication Conflict Resolution”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_fn_epoch"></a>
              <code class="literal">Ndb_conflict_fn_epoch</code>
            </p><p>
              Used in NDB Cluster Replication conflict resolution, this
              variable shows the number of rows found to be in conflict
              using <code class="literal">NDB$EPOCH()</code> conflict resolution
              on a given <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> since the last time
              it was restarted.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="22.6.11 NDB Cluster Replication Conflict Resolution">Section 22.6.11, “NDB Cluster Replication Conflict Resolution”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_fn_epoch2"></a>
              <code class="literal">Ndb_conflict_fn_epoch2</code>
            </p><p>
              Shows the number of rows found to be in conflict in NDB
              Cluster Replication conflict resolution, when using
              <code class="literal">NDB$EPOCH2()</code>, on the master designated
              as the primary since the last time it was restarted.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-epoch2" title="NDB$EPOCH2()">NDB$EPOCH2()</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_fn_epoch_trans"></a>
              <code class="literal">Ndb_conflict_fn_epoch_trans</code>
            </p><p>
              Used in NDB Cluster Replication conflict resolution, this
              variable shows the number of rows found to be in conflict
              using <code class="literal">NDB$EPOCH_TRANS()</code> conflict
              resolution on a given <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> since the
              last time it was restarted.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="22.6.11 NDB Cluster Replication Conflict Resolution">Section 22.6.11, “NDB Cluster Replication Conflict Resolution”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_fn_epoch2_trans"></a>
              <code class="literal">Ndb_conflict_fn_epoch2_trans</code>
            </p><p>
              Used in NDB Cluster Replication conflict resolution, this
              variable shows the number of rows found to be in conflict
              using <code class="literal">NDB$EPOCH_TRANS2()</code> conflict
              resolution on a given <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> since the
              last time it was restarted.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-epoch2-trans" title="NDB$EPOCH2_TRANS()">NDB$EPOCH2_TRANS()</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_last_conflict_epoch"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_last_conflict_epoch"><code class="literal">Ndb_conflict_last_conflict_epoch</code></a>
            </p><p>
              The most recent epoch in which a conflict was detected on
              this slave. You can compare this value with
              <a class="link" href="mysql-cluster.html#statvar_Ndb_slave_max_replicated_epoch"><code class="literal">Ndb_slave_max_replicated_epoch</code></a>;
              if <code class="literal">Ndb_slave_max_replicated_epoch</code> is
              greater than
              <code class="literal">Ndb_conflict_last_conflict_epoch</code>, no
              conflicts have yet been detected.
            </p><p>
              See
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="22.6.11 NDB Cluster Replication Conflict Resolution">Section 22.6.11, “NDB Cluster Replication Conflict Resolution”</a>,
              for more information.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_reflected_op_discard_count"></a>
              <code class="literal">Ndb_conflict_reflected_op_discard_count</code>
            </p><p>
              When using NDB Cluster Replication conflict resolution,
              this is the number of reflected operations that were not
              applied on the secondary, due to encountering an error
              during execution.
            </p><p>
              See
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="22.6.11 NDB Cluster Replication Conflict Resolution">Section 22.6.11, “NDB Cluster Replication Conflict Resolution”</a>,
              for more information.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_reflected_op_prepare_count"></a>
              <code class="literal">Ndb_conflict_reflected_op_prepare_count</code>
            </p><p>
              When using conflict resolution with NDB Cluster
              Replication, this status variable contains the number of
              reflected operations that have been defined (that is,
              prepared for execution on the secondary).
            </p><p>
              See
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="22.6.11 NDB Cluster Replication Conflict Resolution">Section 22.6.11, “NDB Cluster Replication Conflict Resolution”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_refresh_op_count"></a>
              <code class="literal">Ndb_conflict_refresh_op_count</code>
            </p><p>
              When using conflict resolution with NDB Cluster
              Replication, this gives the number of refresh operations
              that have been prepared for execution on the secondary.
            </p><p>
              See
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="22.6.11 NDB Cluster Replication Conflict Resolution">Section 22.6.11, “NDB Cluster Replication Conflict Resolution”</a>,
              for more information.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_last_stable_epoch"></a>
              <code class="literal">Ndb_conflict_last_stable_epoch</code>
            </p><p>
              Number of rows found to be in conflict by a transactional
              conflict function
            </p><p>
              See
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="22.6.11 NDB Cluster Replication Conflict Resolution">Section 22.6.11, “NDB Cluster Replication Conflict Resolution”</a>,
              for more information.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_trans_row_conflict_count"></a>
              <code class="literal">Ndb_conflict_trans_row_conflict_count</code>
            </p><p>
              Used in NDB Cluster Replication conflict resolution, this
              status variable shows the number of rows found to be
              directly in-conflict by a transactional conflict function
              on a given <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> since the last time
              it was restarted.
            </p><p>
              Currently, the only transactional conflict detection
              function supported by NDB Cluster is NDB$EPOCH_TRANS(), so
              this status variable is effectively the same as
              <a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_fn_epoch_trans"><code class="literal">Ndb_conflict_fn_epoch_trans</code></a>.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="22.6.11 NDB Cluster Replication Conflict Resolution">Section 22.6.11, “NDB Cluster Replication Conflict Resolution”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_trans_row_reject_count"></a>
              <code class="literal">Ndb_conflict_trans_row_reject_count</code>
            </p><p>
              Used in NDB Cluster Replication conflict resolution, this
              status variable shows the total number of rows realigned
              due to being determined as conflicting by a transactional
              conflict detection function. This includes not only
              <a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_trans_row_conflict_count"><code class="literal">Ndb_conflict_trans_row_conflict_count</code></a>,
              but any rows in or dependent on conflicting transactions.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="22.6.11 NDB Cluster Replication Conflict Resolution">Section 22.6.11, “NDB Cluster Replication Conflict Resolution”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_trans_reject_count"></a>
              <code class="literal">Ndb_conflict_trans_reject_count</code>
            </p><p>
              Used in NDB Cluster Replication conflict resolution, this
              status variable shows the number of transactions found to
              be in conflict by a transactional conflict detection
              function.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="22.6.11 NDB Cluster Replication Conflict Resolution">Section 22.6.11, “NDB Cluster Replication Conflict Resolution”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_trans_detect_iter_count"></a>
              <code class="literal">Ndb_conflict_trans_detect_iter_count</code>
            </p><p>
              Used in NDB Cluster Replication conflict resolution, this
              shows the number of internal iterations required to commit
              an epoch transaction. Should be (slightly) greater than or
              equal to
              <a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_trans_conflict_commit_count"><code class="literal">Ndb_conflict_trans_conflict_commit_count</code></a>.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="22.6.11 NDB Cluster Replication Conflict Resolution">Section 22.6.11, “NDB Cluster Replication Conflict Resolution”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_trans_conflict_commit_count"></a>
              <code class="literal">Ndb_conflict_trans_conflict_commit_count</code>
            </p><p>
              Used in NDB Cluster Replication conflict resolution, this
              shows the number of epoch transactions committed after
              they required transactional conflict handling.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="22.6.11 NDB Cluster Replication Conflict Resolution">Section 22.6.11, “NDB Cluster Replication Conflict Resolution”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_epoch_delete_delete_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_epoch_delete_delete_count"><code class="literal">Ndb_epoch_delete_delete_count</code></a>
            </p><p>
              When using delete-delete conflict detection, this is the
              number of delete-delete conflicts detected, where a delete
              operation is applied, but the indicated row does not
              exist.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_execute_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_execute_count"><code class="literal">Ndb_execute_count</code></a>
            </p><p>
              Provides the number of round trips to the
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> kernel made by
              operations.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_last_commit_epoch_server"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_last_commit_epoch_server"><code class="literal">Ndb_last_commit_epoch_server</code></a>
            </p><p>
              The epoch most recently committed by
              <code class="literal">NDB</code>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_last_commit_epoch_session"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_last_commit_epoch_session"><code class="literal">Ndb_last_commit_epoch_session</code></a>
            </p><p>
              The epoch most recently committed by this
              <code class="literal">NDB</code> client.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_metadata_detected_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_metadata_detected_count"><code class="literal">Ndb_metadata_detected_count</code></a>
            </p><p>
              The number of times since this server was last started
              that the NDB metadata change detection thread has
              discovered changes with respect to the MySQL data
              dictionary.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_number_of_data_nodes"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_number_of_data_nodes"><code class="literal">Ndb_number_of_data_nodes</code></a>
            </p><p>
              If the server is part of an NDB Cluster, the value of this
              variable is the number of data nodes in the cluster.
            </p><p>
              If the server is not part of an NDB Cluster, then the
              value of this variable is 0.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_pushed_queries_defined"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_pushed_queries_defined"><code class="literal">Ndb_pushed_queries_defined</code></a>
            </p><p>
              The total number of joins pushed down to the NDB kernel
              for distributed handling on the data nodes.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
                Joins tested using
                <a class="link" href="sql-syntax.html#explain" title="13.8.2 EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a> that can be
                pushed down contribute to this number.
</p>
</div>
</li><li class="listitem"><p><a name="statvar_Ndb_pushed_queries_dropped"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_pushed_queries_dropped"><code class="literal">Ndb_pushed_queries_dropped</code></a>
            </p><p>
              The number of joins that were pushed down to the NDB
              kernel but that could not be handled there.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_pushed_queries_executed"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_pushed_queries_executed"><code class="literal">Ndb_pushed_queries_executed</code></a>
            </p><p>
              The number of joins successfully pushed down to
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> and executed there.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_pushed_reads"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_pushed_reads"><code class="literal">Ndb_pushed_reads</code></a>
            </p><p>
              The number of rows returned to <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>
              from the NDB kernel by joins that were pushed down.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
                Executing <a class="link" href="sql-syntax.html#explain" title="13.8.2 EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a> on
                joins that can be pushed down to
                <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> does not add to this
                number.
</p>
</div>
</li><li class="listitem"><p><a name="statvar_Ndb_pruned_scan_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_pruned_scan_count"><code class="literal">Ndb_pruned_scan_count</code></a>
            </p><p>
              This variable holds a count of the number of scans
              executed by <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> since
              the NDB Cluster was last started where
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> was able to use
              partition pruning.
            </p><p>
              Using this variable together with
              <a class="link" href="mysql-cluster.html#statvar_Ndb_scan_count"><code class="literal">Ndb_scan_count</code></a> can be
              helpful in schema design to maximize the ability of the
              server to prune scans to a single table partition, thereby
              involving only a single data node.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_scan_count"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_scan_count"><code class="literal">Ndb_scan_count</code></a>
            </p><p>
              This variable holds a count of the total number of scans
              executed by <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> since
              the NDB Cluster was last started.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_slave_max_replicated_epoch"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_slave_max_replicated_epoch"><code class="literal">Ndb_slave_max_replicated_epoch</code></a>
            </p><p>
              The most recently committed epoch on this slave. You can
              compare this value with
              <a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_last_conflict_epoch"><code class="literal">Ndb_conflict_last_conflict_epoch</code></a>;
              if <code class="literal">Ndb_slave_max_replicated_epoch</code> is
              the greater of the two, no conflicts have yet been
              detected.
            </p><p>
              For more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="22.6.11 NDB Cluster Replication Conflict Resolution">Section 22.6.11, “NDB Cluster Replication Conflict Resolution”</a>.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_system_name"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_system_name"><code class="literal">Ndb_system_name</code></a>
            </p><p>
              If this MySQL Server is connected to an NDB cluster, this
              read-only variable shows the cluster system name.
              Otherwise, the value is an empty string.
            </p></li><li class="listitem"><p><a name="statvar_Ndb_trans_hint_count_session"></a>
              <a class="link" href="mysql-cluster.html#statvar_Ndb_trans_hint_count_session"><code class="literal">Ndb_trans_hint_count_session</code></a>
            </p><p>
              The number of transactions using hints that have been
              started in the current session. Compare with
              <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_start_count_session"><code class="literal">Ndb_api_trans_start_count_session</code></a>
              to obtain the proportion of all NDB transactions able to
              use hints. Added in NDB 8.0.17.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-tcp-definition"></a>22.3.3.10 NDB Cluster TCP/IP Connections</h4>

</div>

</div>

</div>
<p>
        TCP/IP is the default transport mechanism for all connections
        between nodes in an NDB Cluster. Normally it is not necessary to
        define TCP/IP connections; NDB Cluster automatically sets up
        such connections for all data nodes, management nodes, and SQL
        or API nodes.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          For an exception to this rule, see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-tcp-definition-direct" title="22.3.3.11 NDB Cluster TCP/IP Connections Using Direct Connections">Section 22.3.3.11, “NDB Cluster TCP/IP Connections Using Direct Connections”</a>.
</p>
</div>
<p>
        To override the default connection parameters, it is necessary
        to define a connection using one or more
        <code class="literal">[tcp]</code> sections in the
        <code class="filename">config.ini</code> file. Each
        <code class="literal">[tcp]</code> section explicitly defines a TCP/IP
        connection between two NDB Cluster nodes, and must contain at a
        minimum the parameters
        <a class="link" href="mysql-cluster.html#ndbparam-tcp-nodeid1"><code class="literal">NodeId1</code></a> and
        <a class="link" href="mysql-cluster.html#ndbparam-tcp-nodeid2"><code class="literal">NodeId2</code></a>, as well as any
        connection parameters to override.
      </p><p>
        It is also possible to change the default values for these
        parameters by setting them in the <code class="literal">[tcp
        default]</code> section.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
          Any <code class="literal">[tcp]</code> sections in the
          <code class="filename">config.ini</code> file should be listed
          <span class="emphasis"><em>last</em></span>, following all other sections in the
          file. However, this is not required for a <code class="literal">[tcp
          default]</code> section. This requirement is a known issue
          with the way in which the <code class="filename">config.ini</code> file
          is read by the NDB Cluster management server.
</p>
</div>
<p>
        Connection parameters which can be set in
        <code class="literal">[tcp]</code> and <code class="literal">[tcp default]</code>
        sections of the <code class="filename">config.ini</code> file are listed
        here:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-tcp-nodeid1"></a>
            <a class="indexterm" name="idm140091593781984"></a>

            <code class="literal">NodeId1</code>
</p>
<div class="table">
<a name="nodeid1-tcp-table"></a><p class="title"><b>Table 22.291 This table provides type and
value information for the NodeId1 TCP configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1 - 255</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-tcp-definition.html#mysql-cluster-tcp-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            To identify a connection between two nodes it is necessary
            to provide their node IDs in the <code class="literal">[tcp]</code>
            section of the configuration file as the values of
            <code class="literal">NodeId1</code> and
            <a class="link" href="mysql-cluster.html#ndbparam-tcp-nodeid2"><code class="literal">NodeId2</code></a>. These are
            the same unique <code class="literal">Id</code> values for each of
            these nodes as described in
            <a class="xref" href="mysql-cluster.html#mysql-cluster-api-definition" title="22.3.3.7 Defining SQL and Other API Nodes in an NDB Cluster">Section 22.3.3.7, “Defining SQL and Other API Nodes in an NDB Cluster”</a>.
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-nodeid2"></a>
            <a class="indexterm" name="idm140091593755216"></a>

            <code class="literal">NodeId2</code>
</p>
<div class="table">
<a name="nodeid2-tcp-table"></a><p class="title"><b>Table 22.292 This table provides type and
value information for the NodeId2 TCP configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1 - 255</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-tcp-definition.html#mysql-cluster-tcp-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            To identify a connection between two nodes it is necessary
            to provide their node IDs in the <code class="literal">[tcp]</code>
            section of the configuration file as the values of
            <a class="link" href="mysql-cluster.html#ndbparam-tcp-nodeid1"><code class="literal">NodeId1</code></a> and
            <code class="literal">NodeId2</code>. These are the same unique
            <code class="literal">Id</code> values for each of these nodes as
            described in <a class="xref" href="mysql-cluster.html#mysql-cluster-api-definition" title="22.3.3.7 Defining SQL and Other API Nodes in an NDB Cluster">Section 22.3.3.7, “Defining SQL and Other API Nodes in an NDB Cluster”</a>.
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-hostname1"></a>
            <a class="indexterm" name="idm140091593728464"></a>

            <code class="literal">HostName1</code>
</p>
<div class="table">
<a name="hostname1-tcp-table"></a><p class="title"><b>Table 22.293 This table provides type and
value information for the HostName1 TCP configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>name or IP address</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-tcp-definition.html#mysql-cluster-tcp-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The <code class="literal">HostName1</code> and
            <a class="link" href="mysql-cluster.html#ndbparam-tcp-hostname2"><code class="literal">HostName2</code></a> parameters
            can be used to specify specific network interfaces to be
            used for a given TCP connection between two nodes. The
            values used for these parameters can be host names or IP
            addresses.
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-hostname2"></a>
            <a class="indexterm" name="idm140091593703488"></a>

            <code class="literal">HostName2</code>
</p>
<div class="table">
<a name="hostname2-tcp-table"></a><p class="title"><b>Table 22.294 This table provides type and
value information for the HostName1 TCP configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>name or IP address</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-tcp-definition.html#mysql-cluster-tcp-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The <a class="link" href="mysql-cluster.html#ndbparam-tcp-hostname1"><code class="literal">HostName1</code></a> and
            <code class="literal">HostName2</code> parameters can be used to
            specify specific network interfaces to be used for a given
            TCP connection between two nodes. The values used for these
            parameters can be host names or IP addresses.
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-overloadlimit"></a>
            <a class="indexterm" name="idm140091593678528"></a>

            <code class="literal">OverloadLimit</code>
</p>
<div class="table">
<a name="overloadlimit-tcp-table"></a><p class="title"><b>Table 22.295 This table provides type and
value information for the OverloadLimit TCP configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-tcp-definition.html#mysql-cluster-tcp-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            When more than this many unsent bytes are in the send
            buffer, the connection is considered overloaded.
          </p><p>
            This parameter can be used to determine the amount of unsent
            data that must be present in the send buffer before the
            connection is considered overloaded. See
            <a class="xref" href="mysql-cluster.html#mysql-cluster-config-send-buffers" title="22.3.3.14 Configuring NDB Cluster Send Buffer Parameters">Section 22.3.3.14, “Configuring NDB Cluster Send Buffer Parameters”</a>, for
            more information.
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-sendbuffermemory"></a>
            <a class="indexterm" name="idm140091593654176"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-tcp-sendbuffermemory"><code class="literal">SendBufferMemory</code></a>
</p>
<div class="table">
<a name="sendbuffermemory-tcp-table"></a><p class="title"><b>Table 22.296 This table provides type and
value information for the SendBufferMemory TCP configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>2M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>256K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-tcp-definition.html#mysql-cluster-tcp-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            TCP transporters use a buffer to store all messages before
            performing the send call to the operating system. When this
            buffer reaches 64KB its contents are sent; these are also
            sent when a round of messages have been executed. To handle
            temporary overload situations it is also possible to define
            a bigger send buffer.
          </p><p>
            If this parameter is set explicitly, then the memory is not
            dedicated to each transporter; instead, the value used
            denotes the hard limit for how much memory (out of the total
            available memory—that is,
            <code class="literal">TotalSendBufferMemory</code>) that may be used
            by a single transporter. For more information about
            configuring dynamic transporter send buffer memory
            allocation in NDB Cluster, see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-config-send-buffers" title="22.3.3.14 Configuring NDB Cluster Send Buffer Parameters">Section 22.3.3.14, “Configuring NDB Cluster Send Buffer Parameters”</a>.
          </p><p>
            The default size of the send buffer is 2MB, which is the
            size recommended in most situations. The minimum size is 64
            KB; the theoretical maximum is 4 GB.
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-sendsignalid"></a>
            <a class="indexterm" name="idm140091593627424"></a>

            <code class="literal">SendSignalId</code>
</p>
<div class="table">
<a name="sendsignalid-tcp-table"></a><p class="title"><b>Table 22.297 This table provides type and
value information for the SendSignalId TCP configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>boolean</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[see text]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>true, false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-tcp-definition.html#mysql-cluster-tcp-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            To be able to retrace a distributed message datagram, it is
            necessary to identify each message. When this parameter is
            set to <code class="literal">Y</code>, message IDs are transported
            over the network. This feature is disabled by default in
            production builds, and enabled in <code class="literal">-debug</code>
            builds.
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-checksum"></a>
            <a class="indexterm" name="idm140091593602752"></a>

            <code class="literal">Checksum</code>
</p>
<div class="table">
<a name="checksum-tcp-table"></a><p class="title"><b>Table 22.298 This table provides type and
value information for the Checksum TCP configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>boolean</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>true, false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-tcp-definition.html#mysql-cluster-tcp-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter is a boolean parameter (enabled by setting it
            to <code class="literal">Y</code> or <code class="literal">1</code>, disabled by
            setting it to <code class="literal">N</code> or <code class="literal">0</code>).
            It is disabled by default. When it is enabled, checksums for
            all messages are calculated before they placed in the send
            buffer. This feature ensures that messages are not corrupted
            while waiting in the send buffer, or by the transport
            mechanism.
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-presendchecksum"></a>
            <a class="indexterm" name="idm140091593576720"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-tcp-presendchecksum"><code class="literal">PreSendChecksum</code></a>
</p>
<div class="table">
<a name="presendchecksum-tcp-table"></a><p class="title"><b>Table 22.299 This table provides type and
value information for the PreSendChecksum TCP configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>boolean</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>true, false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-tcp-definition.html#mysql-cluster-tcp-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            If this parameter and
            <a class="link" href="mysql-cluster.html#ndbparam-tcp-checksum"><code class="literal">Checksum</code></a> are both
            enabled, perform pre-send checksum checks, and check all TCP
            signals between nodes for errors. Has no effect if
            <code class="literal">Checksum</code> is not also enabled.
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-receivebuffermemory"></a>
            <a class="indexterm" name="idm140091593551472"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-tcp-receivebuffermemory"><code class="literal">ReceiveBufferMemory</code></a>
</p>
<div class="table">
<a name="receivebuffermemory-tcp-table"></a><p class="title"><b>Table 22.300 This table provides type and
value information for the ReceiveBufferMemory TCP configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>2M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>16K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-tcp-definition.html#mysql-cluster-tcp-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Specifies the size of the buffer used when receiving data
            from the TCP/IP socket.
          </p><p>
            The default value of this parameter is 2MB. The minimum
            possible value is 16KB; the theoretical maximum is 4GB.
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-tcp_rcv_buf_size"></a>
            <a class="indexterm" name="idm140091593527344"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-tcp-tcp_rcv_buf_size"><code class="literal">TCP_RCV_BUF_SIZE</code></a>
</p>
<div class="table">
<a name="tcp_rcv_buf_size-tcp-table"></a><p class="title"><b>Table 22.301 This table provides type and
value information for the TCP_RCV_BUF_SIZE TCP configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 2G</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-tcp-definition.html#mysql-cluster-tcp-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Determines the size of the receive buffer set during TCP
            transporter initialization. The default and minimum value is
            0, which allows the operating system or platform to set this
            value. The default is recommended for most common usage
            cases.
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-tcp_snd_buf_size"></a>
            <a class="indexterm" name="idm140091593503552"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-tcp-tcp_snd_buf_size"><code class="literal">TCP_SND_BUF_SIZE</code></a>
</p>
<div class="table">
<a name="tcp_snd_buf_size-tcp-table"></a><p class="title"><b>Table 22.302 This table provides type and
value information for the TCP_SND_BUF_SIZE TCP configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 2G</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-tcp-definition.html#mysql-cluster-tcp-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Determines the size of the send buffer set during TCP
            transporter initialization. The default and minimum value is
            0, which allows the operating system or platform to set this
            value. The default is recommended for most common usage
            cases.
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-tcp_maxseg_size"></a>
            <a class="indexterm" name="idm140091593479776"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-tcp-tcp_maxseg_size"><code class="literal">TCP_MAXSEG_SIZE</code></a>
</p>
<div class="table">
<a name="tcp_maxseg_size-tcp-table"></a><p class="title"><b>Table 22.303 This table provides type and
value information for the TCP_MAXSEG_SIZE TCP configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 2G</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-tcp-definition.html#mysql-cluster-tcp-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Determines the size of the memory set during TCP transporter
            initialization. The default is recommended for most common
            usage cases.
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-tcpbind_inaddr_any"></a>
            <code class="literal">TcpBind_INADDR_ANY</code>
          </p><p>
            Setting this parameter to <code class="literal">TRUE</code> or
            <code class="literal">1</code> binds <code class="literal">IP_ADDR_ANY</code> so
            that connections can be made from anywhere (for
            autogenerated connections). The default is
            <code class="literal">FALSE</code> (<code class="literal">0</code>).
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-group"></a>
            <code class="literal">Group</code>
          </p><p>
            When
            <a class="link" href="mysql-cluster.html#sysvar_ndb_optimized_node_selection"><code class="literal">ndb_optimized_node_selection</code></a>
            is enabled, node proximity is used in some cases to select
            which node to connect to. This parameter can be used to
            influence proximity by setting it to a lower value, which is
            interpreted as <span class="quote">“<span class="quote">closer</span>”</span>. See the description of
            the system variable for more information.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-tcp-definition-direct"></a>22.3.3.11 NDB Cluster TCP/IP Connections Using Direct Connections</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091593446704"></a><a class="indexterm" name="idm140091593445312"></a><a class="indexterm" name="idm140091593443536"></a><p>
        Setting up a cluster using direct connections between data nodes
        requires specifying explicitly the crossover IP addresses of the
        data nodes so connected in the <code class="literal">[tcp]</code> section
        of the cluster <code class="filename">config.ini</code> file.
      </p><p>
        In the following example, we envision a cluster with at least
        four hosts, one each for a management server, an SQL node, and
        two data nodes. The cluster as a whole resides on the
        <code class="literal">172.23.72.*</code> subnet of a LAN. In addition to
        the usual network connections, the two data nodes are connected
        directly using a standard crossover cable, and communicate with
        one another directly using IP addresses in the
        <code class="literal">1.1.0.*</code> address range as shown:
      </p><pre data-lang="ini" class="programlisting">
# Management Server
[ndb_mgmd]
Id=1
HostName=172.23.72.20

# SQL Node
[mysqld]
Id=2
HostName=172.23.72.21

# Data Nodes
[ndbd]
Id=3
HostName=172.23.72.22

[ndbd]
Id=4
HostName=172.23.72.23

# TCP/IP Connections
[tcp]
NodeId1=3
NodeId2=4
HostName1=1.1.0.1
HostName2=1.1.0.2
</pre><p>
        The <a class="link" href="mysql-cluster.html#ndbparam-tcp-hostname1"><code class="literal">HostName1</code></a> and
        <a class="link" href="mysql-cluster.html#ndbparam-tcp-hostname2"><code class="literal">HostName2</code></a> parameters are
        used only when specifying direct connections.
      </p><p>
        The use of direct TCP connections between data nodes can improve
        the cluster's overall efficiency by enabling the data nodes to
        bypass an Ethernet device such as a switch, hub, or router, thus
        cutting down on the cluster's latency.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          To take the best advantage of direct connections in this
          fashion with more than two data nodes, you must have a direct
          connection between each data node and every other data node in
          the same node group.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-shm-definition"></a>22.3.3.12 NDB Cluster Shared-Memory Connections</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091593431856"></a><a class="indexterm" name="idm140091593430464"></a><a class="indexterm" name="idm140091593429072"></a><a class="indexterm" name="idm140091593427680"></a><p>
        Communications between NDB cluster nodes are normally handled
        using TCP/IP. The shared memory (SHM) transporter is
        distinguished by the fact that signals are transmitted by
        writing in memory rather than on a socket. The shared-memory
        transporter (SHM) can improve performance by negating up to 20%
        of the overhead required by a TCP connection when running an API
        node (usually an SQL node) and a data node together on the same
        host. NDB Cluster attempts to use the shared memory transporter
        and configure it automatically between data nodes and API nodes
        on the same host. You can enable a shared memory connection
        explicitly, by setting the
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-useshm"><code class="literal">UseShm</code></a> data node
        configuration parameter to <code class="literal">1</code>. When explicitly
        defining shared memory as the connection method, it is also
        necessary to set
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-hostname"><code class="literal">HostName</code></a> for the data
        node and <a class="link" href="mysql-cluster.html#ndbparam-api-hostname"><code class="literal">HostName</code></a> for the
        API node, and that these be the same. It is also possible to
        employ multiple SHM connections in the same NDB cluster, on
        different hosts, each having one API node and one data node; see
        later in this section for an exaample of how to do this.
      </p><p>
        Suppose a cluster is running a data node which has node ID 1 and
        an SQL node having node ID 51 on the same host computer at
        10.0.0.1. To enable an SHM connection between these two nodes,
        all that is necessary is to insure that the following entries
        are included in the cluster configuration file:
      </p><pre class="programlisting">
[ndbd]
NodeId=1
HostName=10.0.0.1
UseShm=1

[mysqld]
NodeId=51
HostName=10.0.0.1
</pre>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
          The two entries just shown are in addition to any other
          entries and parameter settings needed by the cluster. A more
          comlete example is shown later in this section.
</p>
</div>
<p>
        Before starting data nodes that use SHM connections, it is also
        necessary to make sure that the operating system on each
        computer hosting such a data node has sufficient memory
        allocated to shared memory segments. See the documentation for
        your operating platform for information regarding this. In
        setups where multiple hosts are each running a data node and an
        API node, it is possible to enable shared memory on all such
        hosts by setting <code class="literal">UseShm</code> in the <code class="literal">[ndbd
        default]</code> section of the configuration file. This is
        shown in the example later in this section.
      </p><p>
        While not strictly required, tuning for all SHM connections in
        the cluster can be done by setting one or more of the following
        parameters in the <code class="literal">[shm default]</code> section of
        the cluster configuration (<code class="filename">config.ini</code>)
        file:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="mysql-cluster.html#ndbparam-shm-shmsize"><code class="literal">ShmSize</code></a>: Shared
            memory size
          </p></li><li class="listitem"><p>
            <a class="link" href="mysql-cluster.html#ndbparam-shm-shmspintime"><code class="literal">ShmSpinTime</code></a>: Time in
            µs to spin before sleeping
          </p></li><li class="listitem"><p>
            <a class="link" href="mysql-cluster.html#ndbparam-shm-sendbuffermemory"><code class="literal">SendBufferMemory</code></a>:
            Size of buffer for signals sent from this node, in bytes.
          </p></li><li class="listitem"><p>
            <a class="link" href="mysql-cluster.html#ndbparam-shm-sendsignalid"><code class="literal">SendSignalId</code></a>:
            Indicates that a signal ID is included in each signal sent
            through the transporter.
          </p></li><li class="listitem"><p>
            <a class="link" href="mysql-cluster.html#ndbparam-shm-checksum"><code class="literal">Checksum</code></a>: Indicates
            that a checksum is included in each signal sent through the
            transporter.
          </p></li><li class="listitem"><p>
            <a class="link" href="mysql-cluster.html#ndbparam-shm-presendchecksum"><code class="literal">PreSendChecksum</code></a>:
            Checks of the checksum are made prior to sending the signal;
            Checksum must also be enabled for this to work
</p></li></ul>
</div>
<p>
        This example shows a simple setup with SHM connections definied
        on multiple hosts, in an NDB Cluster using 3 computers listed
        here by host name, hosting the node types shown:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            <code class="literal">10.0.0.0</code>: The management server
          </p></li><li class="listitem"><p>
            <code class="literal">10.0.0.1</code>: A data node and an SQL node
          </p></li><li class="listitem"><p>
            <code class="literal">10.0.0.2</code>: A data node and an SQL node
</p></li></ol>
</div>
<p>
        In this scenario, each data node communicates with both the
        management server and the other data node using TCP
        transporters; each SQL node uses a shared memory transporter to
        communicate with the data nodes that is local to it, and a TCP
        transporter to communicate with the remote data node. A basic
        configuration reflecting this setup is enabled by the config.ini
        file whose contents are shown here:
      </p><pre class="programlisting">
[ndbd default]
DataDir=<em class="replaceable"><code>/path/to/datadir</code></em>
UseShm=1

[shm default]
ShmSize=8M
ShmSpintime=200
SendBufferMemory=4M

[tcp default]
SendBufferMemory=8M

[ndb_mgmd]
NodeId=49
Hostname=10.0.0.0
DataDir=<em class="replaceable"><code>/path/to/datadir</code></em>

[ndbd]
NodeId=1
Hostname=10.0.0.1
DataDir=<em class="replaceable"><code>/path/to/datadir</code></em>

[ndbd]
NodeId=2
Hostname=10.0.0.2
DataDir=<em class="replaceable"><code>/path/to/datadir</code></em>

[mysqld]
NodeId=51
Hostname=10.0.0.1

[mysqld]
NodeId=52
Hostname=10.0.0.2

[api]
[api]
</pre><p>
        Parameters affecting all shared memory transporters are set in
        the <code class="literal">[shm default]</code> section; these can be
        overridden on a per-connection basis in one or more
        <code class="literal">[shm]</code> sections. Each such section must be
        associated with a given SHM connection using
        <a class="link" href="mysql-cluster.html#ndbparam-shm-nodeid1"><code class="literal">NodeId1</code></a> and
        <a class="link" href="mysql-cluster.html#ndbparam-shm-nodeid2"><code class="literal">NodeId2</code></a>; the values
        required for these parameters are the node IDs of the two nodes
        connected by the transporter. You can also identify the nodes by
        host name using <a class="link" href="mysql-cluster.html#ndbparam-shm-hostname1"><code class="literal">HostName1</code></a>
        and <a class="link" href="mysql-cluster.html#ndbparam-shm-hostname2"><code class="literal">HostName2</code></a>, but these
        parameters are not required.
      </p><p>
        The API nodes for which no host names are set use the TCP
        transporter to communicate with data nodes independent of the
        hosts on which they are started; the parameters and values set
        in the <code class="literal">[tcp default]</code> section of the
        configuration file apply to all TCP transporters in the cluster.
      </p><p>
        For optimum performance, you can define a spin time for the SHM
        transporter (<a class="link" href="mysql-cluster.html#ndbparam-shm-shmspintime"><code class="literal">ShmSpinTime</code></a>
        parameter); this affects both the data node receiver thread and
        the poll owner (receive thread or user thread) in
        <code class="literal">NDB</code>.
      </p><p><a name="mysql-cluster-shm-definition-restart-types"></a><b>Restart types. </b>
          Information about the restart types used by the parameter
          descriptions in this section is shown in the following table:
</p>
<div class="table">
<a name="idm140091593382304"></a><p class="title"><b>Table 22.304 NDB Cluster restart types</b></p>
<div class="table-contents">
<table><col width="10%"><col width="30%"><col width="60%"><thead><tr>
            <th scope="col">Symbol</th>
            <th scope="col">Restart Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><span class="bold"><strong>N</strong></span></td>
            <td scope="row">Node</td>
            <td scope="row">The parameter can be updated using a rolling restart (see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="22.5.5 Performing a Rolling Restart of an NDB Cluster">Section 22.5.5, “Performing a Rolling Restart of an NDB Cluster”</a>)</td>
          </tr><tr>
            <td scope="row"><span class="bold"><strong>S</strong></span></td>
            <td scope="row">System</td>
            <td scope="row">All cluster nodes must be shut down completely, then restarted, to
              effect a change in this parameter</td>
          </tr><tr>
            <td scope="row"><span class="bold"><strong>I</strong></span></td>
            <td scope="row">Initial</td>
            <td scope="row">Data nodes must be restarted using the
              <a class="link" href="mysql-cluster.html#option_ndbd_initial"><code class="option">--initial</code></a> option</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-shm-checksum"></a>
            <a class="indexterm" name="idm140091593360192"></a>

            <code class="literal">Checksum</code>
</p>
<div class="table">
<a name="checksum-shm-table"></a><p class="title"><b>Table 22.305 This table provides type and
value information for the Checksum shared memory configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>boolean</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>true</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>true, false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="Restart types">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter is a boolean
            (<code class="literal">Y</code>/<code class="literal">N</code>) parameter which
            is disabled by default. When it is enabled, checksums for
            all messages are calculated before being placed in the send
            buffer.
          </p><p>
            This feature prevents messages from being corrupted while
            waiting in the send buffer. It also serves as a check
            against data being corrupted during transport.
          </p></li><li class="listitem"><p><a name="ndbparam-shm-group"></a>
            <a class="indexterm" name="idm140091593335168"></a>

            <code class="literal">Group</code>
</p>
<div class="table">
<a name="group-shm-table"></a><p class="title"><b>Table 22.306 This table provides type and
value information for the Group shared memory configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>35</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0-200</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="Restart types">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Determines the group proximity; a smaller value is
            interpreted as being closer. The default value is sufficient
            for most conditions.
          </p></li><li class="listitem"><p><a name="ndbparam-shm-hostname1"></a>
            <a class="indexterm" name="idm140091593312016"></a>

            <code class="literal">HostName1</code>
</p>
<div class="table">
<a name="hostname1-shm-table"></a><p class="title"><b>Table 22.307 This table provides type and
value information for the HostName1 shared memory configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>name or IP address</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="Restart types">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The <code class="literal">HostName1</code> and
            <a class="link" href="mysql-cluster.html#ndbparam-shm-hostname2"><code class="literal">HostName2</code></a> parameters
            can be used to specify specific network interfaces to be
            used for a given SHM connection between two nodes. The
            values used for these parameters can be host names or IP
            addresses.
          </p></li><li class="listitem"><p><a name="ndbparam-shm-hostname2"></a>
            <a class="indexterm" name="idm140091593287168"></a>

            <code class="literal">HostName2</code>
</p>
<div class="table">
<a name="hostname2-shm-table"></a><p class="title"><b>Table 22.308 This table provides type and
value information for the HostName1 shared memory configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>name or IP address</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="Restart types">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The <a class="link" href="mysql-cluster.html#ndbparam-shm-hostname1"><code class="literal">HostName1</code></a> and
            <code class="literal">HostName2</code> parameters can be used to
            specify specific network interfaces to be used for a given
            SHM connection between two nodes. The values used for these
            parameters can be host names or IP addresses.
          </p></li><li class="listitem"><p><a name="ndbparam-shm-nodeid1"></a>
            <a class="indexterm" name="idm140091593262336"></a>

            <a class="indexterm" name="idm140091593261328"></a>

            <code class="literal">NodeId1</code>
</p>
<div class="table">
<a name="nodeid1-shm-table"></a><p class="title"><b>Table 22.309 This table provides type and
value information for the NodeId1 shared memory configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1 - 255</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="Restart types">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            To identify a connection between two nodes it is necessary
            to provide node identifiers for each of them, as
            <code class="literal">NodeId1</code> and
            <a class="link" href="mysql-cluster.html#ndbparam-shm-nodeid2"><code class="literal">NodeId2</code></a>.
          </p></li><li class="listitem"><p><a name="ndbparam-shm-nodeid2"></a>
            <a class="indexterm" name="idm140091593236208"></a>

            <a class="indexterm" name="idm140091593235200"></a>

            <code class="literal">NodeId2</code>
</p>
<div class="table">
<a name="nodeid2-shm-table"></a><p class="title"><b>Table 22.310 This table provides type and
value information for the NodeId2 shared memory configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1 - 255</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="Restart types">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            To identify a connection between two nodes it is necessary
            to provide node identifiers for each of them, as
            <a class="link" href="mysql-cluster.html#ndbparam-shm-nodeid1"><code class="literal">NodeId1</code></a> and
            <code class="literal">NodeId2</code>.
          </p></li><li class="listitem"><p><a name="ndbparam-shm-nodeidserver"></a>
            <a class="indexterm" name="idm140091593210080"></a>

            <code class="literal">NodeIdServer</code>
</p>
<div class="table">
<a name="nodeidserver-shm-table"></a><p class="title"><b>Table 22.311 This table provides type and
value information for the NodeIdServer shared memory configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1 - 63</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="Restart types">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Identify the server end of a shared memory connection. By
            default, this is the node ID of the data node.
          </p></li><li class="listitem"><p><a name="ndbparam-shm-overloadlimit"></a>
            <a class="indexterm" name="idm140091593186944"></a>

            <code class="literal">OverloadLimit</code>
</p>
<div class="table">
<a name="overloadlimit-shm-table"></a><p class="title"><b>Table 22.312 This table provides type and
value information for the OverloadLimit shared memory configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="Restart types">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            When more than this many unsent bytes are in the send
            buffer, the connection is considered overloaded. See
            <a class="xref" href="mysql-cluster.html#mysql-cluster-config-send-buffers" title="22.3.3.14 Configuring NDB Cluster Send Buffer Parameters">Section 22.3.3.14, “Configuring NDB Cluster Send Buffer Parameters”</a>, and
            <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbinfo-transporters" title="22.5.10.44 The ndbinfo transporters Table">Section 22.5.10.44, “The ndbinfo transporters Table”</a>, for
            more information.
          </p></li><li class="listitem"><p><a name="ndbparam-shm-presendchecksum"></a>
            <a class="indexterm" name="idm140091593162816"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-shm-presendchecksum"><code class="literal">PreSendChecksum</code></a>
</p>
<div class="table">
<a name="presendchecksum-shm-table"></a><p class="title"><b>Table 22.313 This table provides type and
value information for the PreSendChecksum shared memory configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>boolean</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>true, false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="Restart types">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            If this parameter and
            <a class="link" href="mysql-cluster.html#ndbparam-shm-checksum"><code class="literal">Checksum</code></a> are both
            enabled, perform pre-send checksum checks, and check all SHM
            signals between nodes for errors. Has no effect if
            <code class="literal">Checksum</code> is not also enabled.
          </p></li><li class="listitem"><p><a name="ndbparam-shm-sendbuffermemory"></a>
            <a class="indexterm" name="idm140091593137680"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-shm-sendbuffermemory"><code class="literal">SendBufferMemory</code></a>
</p>
<div class="table">
<a name="sendbuffermemory-shm-table"></a><p class="title"><b>Table 22.314 This table provides type and
value information for the SendBufferMemory shared memory configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>2M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>256K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="Restart types">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Size (in bytes) of the shared memory buffer for signals sent
            from this node using a shared memory connection.
          </p></li><li class="listitem"><p><a name="ndbparam-shm-sendsignalid"></a>
            <a class="indexterm" name="idm140091593114176"></a>

            <code class="literal">SendSignalId</code>
</p>
<div class="table">
<a name="sendsignalid-shm-table"></a><p class="title"><b>Table 22.315 This table provides type and
value information for the SendSignalId shared memory configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>boolean</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>true, false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="Restart types">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            To retrace the path of a distributed message, it is
            necessary to provide each message with a unique identifier.
            Setting this parameter to <code class="literal">Y</code> causes these
            message IDs to be transported over the network as well. This
            feature is disabled by default in production builds, and
            enabled in <code class="literal">-debug</code> builds.
          </p></li><li class="listitem"><p><a name="ndbparam-shm-shmkey"></a>
            <a class="indexterm" name="idm140091593088672"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-shm-shmkey"><code class="literal">ShmKey</code></a>
</p>
<div class="table">
<a name="shmkey-shm-table"></a><p class="title"><b>Table 22.316 This table provides type and
value information for the ShmKey shared memory configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="Restart types">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            When setting up shared memory segments, a node ID, expressed
            as an integer, is used to identify uniquely the shared
            memory segment to use for the communication. There is no
            default value. If
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-useshm"><code class="literal">UseShm</code></a> is enabled,
            the shared memory key is calculated automatically by
            <code class="literal">NDB</code>.
          </p></li><li class="listitem"><p><a name="ndbparam-shm-shmsize"></a>
            <a class="indexterm" name="idm140091593061712"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-shm-shmsize"><code class="literal">ShmSize</code></a>
</p>
<div class="table">
<a name="shmsize-shm-table"></a><p class="title"><b>Table 22.317 This table provides type and
value information for the ShmSize shared memory configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>4M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>64K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="Restart types">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Each SHM connection has a shared memory segment where
            messages between nodes are placed by the sender and read by
            the reader. The size of this segment is defined by
            <a class="link" href="mysql-cluster.html#ndbparam-shm-shmsize"><code class="literal">ShmSize</code></a>. The default
            value is 4MB.
          </p></li><li class="listitem"><p><a name="ndbparam-shm-shmspintime"></a>
            <a class="indexterm" name="idm140091593035552"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-shm-shmspintime"><code class="literal">ShmSpinTime</code></a>
</p>
<div class="table">
<a name="shmspintime-shm-table"></a><p class="title"><b>Table 22.318 This table provides type and
value information for the ShmSpinTime shared memory configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>integer</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 2000</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="Restart types">Restart
                  Type</a></strong></span></td>
                <td>S</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            When receiving, the time to wait before sleeping, in
            microseconds.
          </p></li><li class="listitem"><p><a name="ndbparam-shm-signum"></a>
            <a class="indexterm" name="idm140091593010800"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-shm-signum"><code class="literal">SigNum</code></a>
</p>
<div class="table">
<a name="signum-shm-table"></a><p class="title"><b>Table 22.319 This table provides type and
value information for the Signum shared memory configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="Restart types">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter was used formerly to override operating
            system signal numbers; in NDB 8.0, it is no longer used, and
            any setting for it is ignored.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-sci-definition"></a>22.3.3.13 SCI Transport Connections in NDB Cluster</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091592985312"></a><a class="indexterm" name="idm140091592983824"></a><a class="indexterm" name="idm140091592982368"></a><a class="indexterm" name="idm140091592980864"></a><p>
        <code class="literal">[sci]</code> sections in the
        <code class="filename">config.ini</code> file explicitly define SCI
        (Scalable Coherent Interface) connections between cluster nodes.
        Using SCI transporters in NDB Cluster requires specialized
        hardware as well as specially-built MySQL binaries; compiling
        such binaries is not supported using an NDB 8.0 distribution.
      </p><p>
        The following parameters are present in <code class="literal">NDB</code>
        source code as well as the output of
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-config" title="22.4.7 ndb_config — Extract NDB Cluster Configuration Information"><span class="command"><strong>ndb_config</strong></span></a> and other <span class="command"><strong>NDB</strong></span>
        programs, but are currently nonfunctional:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-sci-nodeid1"></a>
            <a class="indexterm" name="idm140091592972416"></a>

            <a class="indexterm" name="idm140091592971376"></a>

            <code class="literal">NodeId1</code>
</p>
<div class="table">
<a name="nodeid1-sci-table"></a><p class="title"><b>Table 22.320 This table provides type and
value information for the NodeId1 SCI configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1 - 255</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-sci-definition.html#mysql-cluster-sci-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            To identify a connection between two nodes it is necessary
            to provide node identifiers for each of them, as
            <code class="literal">NodeId1</code> and
            <a class="link" href="mysql-cluster.html#ndbparam-sci-nodeid2"><code class="literal">NodeId2</code></a>.
          </p></li><li class="listitem"><p><a name="ndbparam-sci-nodeid2"></a>
            <a class="indexterm" name="idm140091592944816"></a>

            <a class="indexterm" name="idm140091592943776"></a>

            <code class="literal">NodeId2</code>
</p>
<div class="table">
<a name="nodeid2-sci-table"></a><p class="title"><b>Table 22.321 This table provides type and
value information for the NodeId2 SCI configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>numeric</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>1 - 255</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-sci-definition.html#mysql-cluster-sci-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            To identify a connection between two nodes it is necessary
            to provide node identifiers for each of them, as
            <a class="link" href="mysql-cluster.html#ndbparam-sci-nodeid1"><code class="literal">NodeId1</code></a> and
            <code class="literal">NodeId2</code>.
          </p></li><li class="listitem"><p><a name="ndbparam-sci-host1sciid0"></a>
            <a class="indexterm" name="idm140091592917120"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-sci-host1sciid0"><code class="literal">Host1SciId0</code></a>
</p>
<div class="table">
<a name="host1sciid0-sci-table"></a><p class="title"><b>Table 22.322 This table provides type and
value information for the Host1SciId0 SCI configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-sci-definition.html#mysql-cluster-sci-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This identifies the SCI node ID on the first Cluster node
            (identified by
            <a class="link" href="mysql-cluster.html#ndbparam-sci-nodeid1"><code class="literal">NodeId1</code></a>).
          </p></li><li class="listitem"><p><a name="ndbparam-sci-host1sciid1"></a>
            <a class="link" href="mysql-cluster.html#ndbparam-sci-host1sciid1"><code class="literal">Host1SciId1</code></a>
</p>
<div class="table">
<a name="host1sciid1-sci-table"></a><p class="title"><b>Table 22.323 This table provides type and
value information for the Host1SciId1 SCI configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-sci-definition.html#mysql-cluster-sci-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            It is possible to set up SCI Transporters for failover
            between two SCI cards which then should use separate
            networks between the nodes. This identifies the node ID and
            the second SCI card to be used on the first node.
          </p></li><li class="listitem"><p><a name="ndbparam-sci-host2sciid0"></a>
            <a class="link" href="mysql-cluster.html#ndbparam-sci-host2sciid0"><code class="literal">Host2SciId0</code></a>
</p>
<div class="table">
<a name="host2sciid0-sci-table"></a><p class="title"><b>Table 22.324 This table provides type and
value information for the Host2SciId0 SCI configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-sci-definition.html#mysql-cluster-sci-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This identifies the SCI node ID on the second Cluster node
            (identified by
            <a class="link" href="mysql-cluster.html#ndbparam-sci-nodeid2"><code class="literal">NodeId2</code></a>).
          </p></li><li class="listitem"><p><a name="ndbparam-sci-host2sciid1"></a>
            <a class="link" href="mysql-cluster.html#ndbparam-sci-host2sciid1"><code class="literal">Host2SciId1</code></a>
</p>
<div class="table">
<a name="host2sciid1-sci-table"></a><p class="title"><b>Table 22.325 This table provides type and
value information for the Host2SciId1 SCI configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-sci-definition.html#mysql-cluster-sci-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            When using two SCI cards to provide failover, this parameter
            identifies the second SCI card to be used on the second
            node.
          </p></li><li class="listitem"><p><a name="ndbparam-sci-hostname1"></a>
            <a class="indexterm" name="idm140091592818512"></a>

            <code class="literal">HostName1</code>
</p>
<div class="table">
<a name="hostname1-sci-table"></a><p class="title"><b>Table 22.326 This table provides type and
value information for the HostName1 SCI configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>name or IP address</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-sci-definition.html#mysql-cluster-sci-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The <code class="literal">HostName1</code> and
            <a class="link" href="mysql-cluster.html#ndbparam-sci-hostname2"><code class="literal">HostName2</code></a> parameters
            can be used to specify specific network interfaces to be
            used for a given SCI connection between two nodes. The
            values used for these parameters can be host names or IP
            addresses.
          </p></li><li class="listitem"><p><a name="ndbparam-sci-hostname2"></a>
            <a class="indexterm" name="idm140091592792096"></a>

            <code class="literal">HostName2</code>
</p>
<div class="table">
<a name="hostname2-sci-table"></a><p class="title"><b>Table 22.327 This table provides type and
value information for the HostName1 SCI configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>name or IP address</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>[none]</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>...</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-sci-definition.html#mysql-cluster-sci-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            The <a class="link" href="mysql-cluster.html#ndbparam-sci-hostname1"><code class="literal">HostName1</code></a> and
            <code class="literal">HostName2</code> parameters can be used to
            specify specific network interfaces to be used for a given
            SCI connection between two nodes. The values used for these
            parameters can be host names or IP addresses.
          </p></li><li class="listitem"><p><a name="ndbparam-sci-sharedbuffersize"></a>
            <a class="indexterm" name="idm140091592765632"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-sci-sharedbuffersize"><code class="literal">SharedBufferSize</code></a>
</p>
<div class="table">
<a name="sharedbuffersize-sci-table"></a><p class="title"><b>Table 22.328 This table provides type and
value information for the SharedBufferSize SCI configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>10M</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>64K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-sci-definition.html#mysql-cluster-sci-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Each SCI transporter has a shared memory segment used for
            communication between the two nodes. Setting the size of
            this segment to the default value of 1MB should be
            sufficient for most applications. Using a smaller value can
            lead to problems when performing many parallel inserts; if
            the shared buffer is too small, this can also result in a
            crash of the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> process.
          </p></li><li class="listitem"><p><a name="ndbparam-sci-sendlimit"></a>
            <a class="link" href="mysql-cluster.html#ndbparam-sci-sendlimit"><code class="literal">SendLimit</code></a>

            <a class="indexterm" name="idm140091592738144"></a>
</p>
<div class="table">
<a name="sendlimit-sci-table"></a><p class="title"><b>Table 22.329 This table provides type and
value information for the SendLimit SCI configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>unsigned</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>8K</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>128 - 32K</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-sci-definition.html#mysql-cluster-sci-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            A small buffer in front of the SCI media stores messages
            before transmitting them over the SCI network. By default,
            this is set to 8KB. Our benchmarks show that performance is
            best at 64KB but 16KB reaches within a few percent of this,
            and there was little if any advantage to increasing it
            beyond 8KB.
          </p></li><li class="listitem"><p><a name="ndbparam-sci-sendsignalid"></a>
            <a class="indexterm" name="idm140091592714272"></a>

            <code class="literal">SendSignalId</code>
</p>
<div class="table">
<a name="sendsignalid-sci-table"></a><p class="title"><b>Table 22.330 This table provides type and
value information for the SendSignalId SCI configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>boolean</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>true</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>true, false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-sci-definition.html#mysql-cluster-sci-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            To trace a distributed message it is necessary to identify
            each message uniquely. When this parameter is set to
            <code class="literal">Y</code>, message IDs are transported over the
            network. This feature is disabled by default in production
            builds, and enabled in <code class="literal">-debug</code> builds.
          </p></li><li class="listitem"><p><a name="ndbparam-sci-checksum"></a>
            <a class="indexterm" name="idm140091592688480"></a>

            <code class="literal">Checksum</code>
</p>
<div class="table">
<a name="checksum-sci-table"></a><p class="title"><b>Table 22.331 This table provides type and
value information for the Checksum SCI configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>boolean</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>true, false</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-sci-definition.html#mysql-cluster-sci-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This parameter is a boolean value, and is disabled by
            default. When <code class="literal">Checksum</code> is enabled,
            checksums are calculated for all messages before they are
            placed in the send buffer. This feature prevents messages
            from being corrupted while waiting in the send buffer. It
            also serves as a check against data being corrupted during
            transport.
          </p></li><li class="listitem"><p><a name="ndbparam-sci-overloadlimit"></a>
            <a class="indexterm" name="idm140091592663120"></a>

            <code class="literal">OverloadLimit</code>
</p>
<div class="table">
<a name="overloadlimit-sci-table"></a><p class="title"><b>Table 22.332 This table provides type and
value information for the OverloadLimit SCI configuration parameter</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Property</th>
                <th scope="col">Value</th>
              </tr></thead><tbody><tr>
                <td scope="row"><span class="bold"><strong>Version (or later)</strong></span></td>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Type or units</strong></span></td>
                <td>bytes</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Default</strong></span></td>
                <td>0</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong>Range</strong></span></td>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <td scope="row"><span class="bold"><strong><a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-sci-definition.html#mysql-cluster-sci-definition-restart-types" target="_top">Restart
                  Type</a></strong></span></td>
                <td>N</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            When more than this many unsent bytes are in the send
            buffer, the connection is considered overloaded. See
            <a class="xref" href="mysql-cluster.html#mysql-cluster-config-send-buffers" title="22.3.3.14 Configuring NDB Cluster Send Buffer Parameters">Section 22.3.3.14, “Configuring NDB Cluster Send Buffer Parameters”</a>, for
            more information.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-config-send-buffers"></a>22.3.3.14 Configuring NDB Cluster Send Buffer Parameters</h4>

</div>

</div>

</div>
<p>
        The <code class="literal">NDB</code> kernel employs a unified send buffer
        whose memory is allocated dynamically from a pool shared by all
        transporters. This means that the size of the send buffer can be
        adjusted as necessary. Configuration of the unified send buffer
        can accomplished by setting the following parameters:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>TotalSendBufferMemory. </b>
              This parameter can be set for all types of NDB Cluster
              nodes—that is, it can be set in the
              <code class="literal">[ndbd]</code>, <code class="literal">[mgm]</code>, and
              <code class="literal">[api]</code> (or <code class="literal">[mysql]</code>)
              sections of the <code class="filename">config.ini</code> file. It
              represents the total amount of memory (in bytes) to be
              allocated by each node for which it is set for use among
              all configured transporters. If set, its minimum is 256KB;
              the maximum is 4294967039.
            </p><p>
            To be backward-compatible with existing configurations, this
            parameter takes as its default value the sum of the maximum
            send buffer sizes of all configured transporters, plus an
            additional 32KB (one page) per transporter. The maximum
            depends on the type of transporter, as shown in the
            following table:
</p>
<div class="table">
<a name="idm140091592629680"></a><p class="title"><b>Table 22.333 Transporter types with maximum send buffer sizes</b></p>
<div class="table-contents">
<table><col width="30%"><col width="70%"><thead><tr>
                <th scope="col">Transporter</th>
                <th scope="col">Maximum Send Buffer Size (bytes)</th>
              </tr></thead><tbody><tr>
                <td scope="row">TCP</td>
                <td><a class="link" href="mysql-cluster.html#ndbparam-tcp-sendbuffermemory"><code class="literal">SendBufferMemory</code></a> (default = 2M)</td>
              </tr><tr>
                <td scope="row">SCI</td>
                <td><a class="link" href="mysql-cluster.html#ndbparam-sci-sendlimit"><code class="literal">SendLimit</code></a> (default = 8K) plus 16K</td>
              </tr><tr>
                <td scope="row">SHM</td>
                <td>20K</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            This enables existing configurations to function in close to
            the same way as they did with NDB Cluster 6.3 and earlier,
            with the same amount of memory and send buffer space
            available to each transporter. However, memory that is
            unused by one transporter is not available to other
            transporters.
          </p></li><li class="listitem"><p><b>OverloadLimit. </b>
              This parameter is used in the
              <code class="literal">config.ini</code> file
              <code class="literal">[tcp]</code> section, and denotes the amount
              of unsent data (in bytes) that must be present in the send
              buffer before the connection is considered overloaded.
              When such an overload condition occurs, transactions that
              affect the overloaded connection fail with NDB API Error
              1218 (<span class="errortext">Send Buffers overloaded in NDB
              kernel</span>) until the overload status passes. The
              default value is 0, in which case the effective overload
              limit is calculated as <code class="literal">SendBufferMemory *
              0.8</code> for a given connection. The maximum value
              for this parameter is 4G.
            </p></li><li class="listitem"><p><b>SendBufferMemory. </b>
              This value denotes a hard limit for the amount of memory
              that may be used by a single transporter out of the entire
              pool specified by
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-totalsendbuffermemory"><code class="literal">TotalSendBufferMemory</code></a>.
              However, the sum of <code class="literal">SendBufferMemory</code>
              for all configured transporters may be greater than the
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-totalsendbuffermemory"><code class="literal">TotalSendBufferMemory</code></a>
              that is set for a given node. This is a way to save memory
              when many nodes are in use, as long as the maximum amount
              of memory is never required by all transporters at the
              same time.
</p></li></ul>
</div>
<p>
        You can use the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-transporters" title="22.5.10.44 The ndbinfo transporters Table"><code class="literal">ndbinfo.transporters</code></a> table to
        monitor send buffer memory usage, and to detect slowdown and
        overload conditions that can adversely affect performance.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-interconnects"></a>22.3.4 Using High-Speed Interconnects with NDB Cluster</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091592599968"></a><a class="indexterm" name="idm140091592598480"></a><p>
      Even before design of <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a>
      began in 1996, it was evident that one of the major problems to be
      encountered in building parallel databases would be communication
      between the nodes in the network. For this reason,
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> was designed from the very
      beginning to permit the use of a number of different data
      transport mechanisms. In this Manual, we use the term
      <span class="firstterm">transporter</span> for these.
    </p><p>
      The NDB Cluster codebase provides for four different transporters:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <span class="emphasis"><em>TCP/IP using 100 Mbps or gigabit
          Ethernet</em></span>, as discussed in
          <a class="xref" href="mysql-cluster.html#mysql-cluster-tcp-definition" title="22.3.3.10 NDB Cluster TCP/IP Connections">Section 22.3.3.10, “NDB Cluster TCP/IP Connections”</a>.
        </p></li><li class="listitem"><p>
          <span class="emphasis"><em>Direct (machine-to-machine) TCP/IP</em></span>;
          although this transporter uses the same TCP/IP protocol as
          mentioned in the previous item, it requires setting up the
          hardware differently and is configured differently as well.
          For this reason, it is considered a separate transport
          mechanism for NDB Cluster. See
          <a class="xref" href="mysql-cluster.html#mysql-cluster-tcp-definition-direct" title="22.3.3.11 NDB Cluster TCP/IP Connections Using Direct Connections">Section 22.3.3.11, “NDB Cluster TCP/IP Connections Using Direct Connections”</a>, for
          details.
        </p></li><li class="listitem"><p>
          <span class="emphasis"><em>Shared memory (SHM)</em></span>. For more information
          about SHM, see <a class="xref" href="mysql-cluster.html#mysql-cluster-shm-definition" title="22.3.3.12 NDB Cluster Shared-Memory Connections">Section 22.3.3.12, “NDB Cluster Shared-Memory Connections”</a>.
        </p></li><li class="listitem"><p>
          <span class="emphasis"><em>Scalable Coherent Interface (SCI)</em></span>. For
          more information about SCI, see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-sci-definition" title="22.3.3.13 SCI Transport Connections in NDB Cluster">Section 22.3.3.13, “SCI Transport Connections in NDB Cluster”</a>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
            Using SCI transporters in NDB Cluster requires specialized
            hardware, software, and MySQL binaries not available with
            NDB 8.0.
</p>
</div>
</li></ul>
</div>
<p>
      Most users today employ TCP/IP over Ethernet because it is
      ubiquitous. TCP/IP is also by far the best-tested transporter for
      use with NDB Cluster.
    </p><p>
      We are working to make sure that communication with the
      <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> process is made in <span class="quote">“<span class="quote">chunks</span>”</span>
      that are as large as possible because this benefits all types of
      data transmission.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="mysql-cluster-programs"></a>22.4 NDB Cluster Programs</h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndbd">22.4.1 <span class="command"><strong>ndbd</strong></span> — The NDB Cluster Data Node Daemon</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndbinfo-select-all">22.4.2 <span class="command"><strong>ndbinfo_select_all</strong></span> — Select From ndbinfo Tables</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndbmtd">22.4.3 <span class="command"><strong>ndbmtd</strong></span> — The NDB Cluster Data Node Daemon (Multi-Threaded)</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd">22.4.4 <span class="command"><strong>ndb_mgmd</strong></span> — The NDB Cluster Management Server Daemon</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm">22.4.5 <span class="command"><strong>ndb_mgm</strong></span> — The NDB Cluster Management Client</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-blob-tool">22.4.6 <span class="command"><strong>ndb_blob_tool</strong></span> — Check and Repair BLOB and TEXT columns of NDB Cluster
        Tables</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-config">22.4.7 <span class="command"><strong>ndb_config</strong></span> — Extract NDB Cluster Configuration Information</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-delete-all">22.4.8 <span class="command"><strong>ndb_delete_all</strong></span> — Delete All Rows from an NDB Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-desc">22.4.9 <span class="command"><strong>ndb_desc</strong></span> — Describe NDB Tables</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-drop-index">22.4.10 <span class="command"><strong>ndb_drop_index</strong></span> — Drop Index from an NDB Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-drop-table">22.4.11 <span class="command"><strong>ndb_drop_table</strong></span> — Drop an NDB Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-error-reporter">22.4.12 <span class="command"><strong>ndb_error_reporter</strong></span> — NDB Error-Reporting Utility</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-import">22.4.13 <span class="command"><strong>ndb_import</strong></span> — Import CSV Data Into NDB</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-index-stat">22.4.14 <span class="command"><strong>ndb_index_stat</strong></span> — NDB Index Statistics Utility</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-move-data">22.4.15 <span class="command"><strong>ndb_move_data</strong></span> — NDB Data Copy Utility</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-perror">22.4.16 <span class="command"><strong>ndb_perror</strong></span> — Obtain NDB Error Message Information</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-print-backup-file">22.4.17 <span class="command"><strong>ndb_print_backup_file</strong></span> — Print NDB Backup File Contents</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-print-file">22.4.18 <span class="command"><strong>ndb_print_file</strong></span> — Print NDB Disk Data File Contents</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-print-frag-file">22.4.19 <span class="command"><strong>ndb_print_frag_file</strong></span> — Print NDB Fragment List File Contents</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-print-schema-file">22.4.20 <span class="command"><strong>ndb_print_schema_file</strong></span> — Print NDB Schema File Contents</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-print-sys-file">22.4.21 <span class="command"><strong>ndb_print_sys_file</strong></span> — Print NDB System File Contents</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-redo-log-reader">22.4.22 <span class="command"><strong>ndb_redo_log_reader</strong></span> — Check and Print Content of Cluster Redo Log</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-restore">22.4.23 <span class="command"><strong>ndb_restore</strong></span> — Restore an NDB Cluster Backup</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-select-all">22.4.24 <span class="command"><strong>ndb_select_all</strong></span> — Print Rows from an NDB Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-select-count">22.4.25 <span class="command"><strong>ndb_select_count</strong></span> — Print Row Counts for NDB Tables</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py">22.4.26 <span class="command"><strong>ndb_setup.py</strong></span> — Start browser-based Auto-Installer for
NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-show-tables">22.4.27 <span class="command"><strong>ndb_show_tables</strong></span> — Display List of NDB Tables</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-size-pl">22.4.28 <span class="command"><strong>ndb_size.pl</strong></span> — NDBCLUSTER Size Requirement Estimator</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-top">22.4.29 <span class="command"><strong>ndb_top</strong></span> — View CPU usage information for NDB threads</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-waiter">22.4.30 <span class="command"><strong>ndb_waiter</strong></span> — Wait for NDB Cluster to Reach a Given Status</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-program-options-common">22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs</a></span></dt></dl>
</div>
<a class="indexterm" name="idm140091592576496"></a><a class="indexterm" name="idm140091592575008"></a><a class="indexterm" name="idm140091592573920"></a><a class="indexterm" name="idm140091592572832"></a><a class="indexterm" name="idm140091592571760"></a><a class="indexterm" name="idm140091592570672"></a><a class="indexterm" name="idm140091592569600"></a><a class="indexterm" name="idm140091592568528"></a><a class="indexterm" name="idm140091592567456"></a><a class="indexterm" name="idm140091592566384"></a><a class="indexterm" name="idm140091592565312"></a><a class="indexterm" name="idm140091592564240"></a><a class="indexterm" name="idm140091592563168"></a><a class="indexterm" name="idm140091592562096"></a><a class="indexterm" name="idm140091592561024"></a><a class="indexterm" name="idm140091592559952"></a><a class="indexterm" name="idm140091592558880"></a><a class="indexterm" name="idm140091592557808"></a><a class="indexterm" name="idm140091592556736"></a><a class="indexterm" name="idm140091592555664"></a><a class="indexterm" name="idm140091592554592"></a><a class="indexterm" name="idm140091592553520"></a><a class="indexterm" name="idm140091592552448"></a><a class="indexterm" name="idm140091592551376"></a><a class="indexterm" name="idm140091592550304"></a><a class="indexterm" name="idm140091592549232"></a><a class="indexterm" name="idm140091592548160"></a><a class="indexterm" name="idm140091592547088"></a><a class="indexterm" name="idm140091592546016"></a><a class="indexterm" name="idm140091592544944"></a><a class="indexterm" name="idm140091592543872"></a><a class="indexterm" name="idm140091592542800"></a><a class="indexterm" name="idm140091592541728"></a><a class="indexterm" name="idm140091592540656"></a><a class="indexterm" name="idm140091592539584"></a><p>
    Using and managing an NDB Cluster requires several specialized
    programs, which we describe in this chapter. We discuss the purposes
    of these programs in an NDB Cluster, how to use the programs, and
    what startup options are available for each of them.
  </p><p>
    These programs include the NDB Cluster data, management, and SQL
    node processes (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>, <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>,
    <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>, and <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>) and the
    management client (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a>).
  </p><p>
    Information about the program <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py" title="22.4.26 ndb_setup.py — Start browser-based Auto-Installer for NDB Cluster"><span class="command"><strong>ndb_setup.py</strong></span></a>, used
    to start the NDB Cluster Auto-Installer, is also included in this
    section. You should be aware that
    <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py" title="22.4.26 ndb_setup.py — Start browser-based Auto-Installer for NDB Cluster">Section 22.4.26, “<span class="command"><strong>ndb_setup.py</strong></span> — Start browser-based Auto-Installer for
        NDB Cluster”</a>, contains
    information about the command-line client only; for information
    about using the GUI installer spawned by this program to configure
    and deploy an NDB Cluster, see
    <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-install-auto.html" target="_top">The NDB Cluster Auto-Installer (NDB 7.5)</a>.
  </p><p>
    For information about using <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> as an NDB
    Cluster process, see <a class="xref" href="mysql-cluster.html#mysql-cluster-mysqld" title="22.5.4 MySQL Server Usage for NDB Cluster">Section 22.5.4, “MySQL Server Usage for NDB Cluster”</a>.
  </p><p>
    Other <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> utility, diagnostic, and
    example programs are included with the NDB Cluster distribution.
    These include <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>,
    <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-show-tables" title="22.4.27 ndb_show_tables — Display List of NDB Tables"><span class="command"><strong>ndb_show_tables</strong></span></a>, and
    <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-config" title="22.4.7 ndb_config — Extract NDB Cluster Configuration Information"><span class="command"><strong>ndb_config</strong></span></a>. These programs are also covered in
    this section.
  </p><p>
    The final portion of this section contains tables of options that
    are common to all the various NDB Cluster programs.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndbd"></a>22.4.1 <span class="command"><strong>ndbd</strong></span> — The NDB Cluster Data Node Daemon</h3>
</div>
</div>
</div>
<a class="indexterm" name="idm140091592517376"></a><a class="indexterm" name="idm140091592516432"></a><a class="indexterm" name="idm140091592515072"></a><a class="indexterm" name="idm140091592513712"></a><a class="indexterm" name="idm140091592512800"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> is the process that is used to handle
        all the data in tables using the NDB Cluster storage engine.
        This is the process that empowers a data node to accomplish
        distributed transaction handling, node recovery, checkpointing
        to disk, online backup, and related tasks.
      </p><p>
        In an NDB Cluster, a set of <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> processes
        cooperate in handling data. These processes can execute on the
        same computer (host) or on different computers. The
        correspondences between data nodes and Cluster hosts is
        completely configurable.
      </p><a class="indexterm" name="idm140091592507392"></a><a class="indexterm" name="idm140091592505904"></a><a class="indexterm" name="idm140091592504416"></a><a class="indexterm" name="idm140091592502960"></a><p>
        The following table includes command options specific to the NDB
        Cluster data node program <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>. Additional
        descriptions follow the table. For options common to most NDB
        Cluster programs (including <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>), see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
</p>
<div class="table">
<a name="mysql-cluster-ndbd-options-table"></a><p class="title"><b>Table 22.334 Command-line options for the ndbd program</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndbd_bind-address">--bind-address=name</a>
                </code>
              </p></td>
            <td>Local bind address</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndbd_connect-delay">--connect-delay=#</a>
                </code>
              </p></td>
            <td>Time to wait between attempts to contact a management server, in
              seconds; 0 means do not wait between attempts</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndbd_connect-retries">--connect-retries=#</a>
                </code>
              </p></td>
            <td>Set the number of times to retry a connection before giving up; 0 means
              1 attempt only (and no retries)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndbd_connect-retry-delay">--connect-retry-delay=#</a>
                </code>
              </p></td>
            <td>Time to wait between attempts to contact a management server, in
              seconds; 0 means do not wait between attempts</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndbd_daemon">--daemon</a></code>,
              </p><p>
                <code class="literal"> <a class="link" href="mysql-cluster.html#option_ndbd_daemon">-d</a>
                </code>
              </p></td>
            <td>Start ndbd as daemon (default); override with --nodaemon</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndbd_foreground">--foreground</a>
                </code>
              </p></td>
            <td>Run ndbd in foreground, provided for debugging purposes (implies
              --nodaemon)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndbd_initial">--initial</a>
                </code>
              </p></td>
            <td>Perform initial start of ndbd, including cleaning the file system.
              Consult the documentation before using this option</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndbd_initial-start">--initial-start</a>
                </code>
              </p></td>
            <td>Perform partial initial start (requires --nowait-nodes)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndbd_install">--install[=name]</a>
                </code>
              </p></td>
            <td>Used to install the data node process as a Windows service. Does not
              apply on non-Windows platforms.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndbd_logbuffer-size">--logbuffer-size=#</a>
                </code>
              </p></td>
            <td>Control size of log buffer. For use when debugging with many log
              messages being generated; default is sufficient for normal
              operations.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndbd_nostart">--nostart</a></code>,
              </p><p>
                <code class="literal"> <a class="link" href="mysql-cluster.html#option_ndbd_nostart">-n</a>
                </code>
              </p></td>
            <td>Don't start ndbd immediately; ndbd waits for command to start from
              ndb_mgmd</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndbd_nodaemon">--nodaemon</a>
                </code>
              </p></td>
            <td>Do not start ndbd as daemon; provided for testing purposes</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndbd_nowait-nodes">--nowait-nodes=list</a>
                </code>
              </p></td>
            <td>Do not wait for these data nodes to start (takes comma-separated list of
              node IDs). Also requires --ndb-nodeid to be used.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndbd_remove">--remove[=name]</a>
                </code>
              </p></td>
            <td>Used to remove a data node process that was previously installed as a
              Windows service. Does not apply on non-Windows platforms.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndbd_verbose">--verbose</a></code>,
              </p><p>
                <code class="literal"> <a class="link" href="mysql-cluster.html#option_ndbd_verbose">-v</a>
                </code>
              </p></td>
            <td>Causes the data log to write extra debugging information to the node
              log.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          All of these options also apply to the multithreaded version
          of this program (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>) and you may
          substitute <span class="quote">“<span class="quote"><a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a></span>”</span> for
          <span class="quote">“<span class="quote"><a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a></span>”</span> wherever the latter
          occurs in this section.
</p>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndbd_bind-address"></a>
            <code class="option">--bind-address</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for bind-address"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--bind-address=name</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            Causes <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> to bind to a specific network
            interface (host name or IP address). This option has no
            default value.
          </p></li><li class="listitem"><p><a name="option_ndbd_connect-delay"></a>
            <a class="indexterm" name="idm140091592376944"></a>

            <a class="indexterm" name="idm140091592375904"></a>

            <code class="option">--connect-delay=<em class="replaceable"><code>#</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for connect-delay"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--connect-delay=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Deprecated</strong></span></td>
<td>Yes</td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Numeric</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">5</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">3600</code></td>
</tr></tbody></table>
</div>
<p>
            Determines the time to wait between attempts to contact a
            management server when starting (the number of attempts is
            controlled by the
            <a class="link" href="mysql-cluster.html#option_ndbd_connect-retries"><code class="option">--connect-retries</code></a> option). The
            default is 5 seconds.
          </p><p>
            This option is deprecated, and is subject to removal in a
            future release of NDB Cluster. Use
            <a class="link" href="mysql-cluster.html#option_ndbd_connect-retry-delay"><code class="option">--connect-retry-delay</code></a> instead.
          </p></li><li class="listitem"><p><a name="option_ndbd_connect-retries"></a>
            <a class="indexterm" name="idm140091592346160"></a>

            <a class="indexterm" name="idm140091592345120"></a>

            <code class="option">--connect-retries=<em class="replaceable"><code>#</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for connect-retries"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--connect-retries=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Numeric</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">12</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">65535</code></td>
</tr></tbody></table>
</div>
<p>
            Set the number of times to retry a connection before giving
            up; 0 means 1 attempt only (and no retries). The default is
            12 attempts. The time to wait between attempts is controlled
            by the <a class="link" href="mysql-cluster.html#option_ndbd_connect-retry-delay"><code class="option">--connect-retry-delay</code></a>
            option.
          </p></li><li class="listitem"><p><a name="option_ndbd_connect-retry-delay"></a>
            <a class="indexterm" name="idm140091592319536"></a>

            <a class="indexterm" name="idm140091592318496"></a>

            <code class="option">--connect-retry-delay=<em class="replaceable"><code>#</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for connect-retry-delay"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--connect-retry-delay=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Numeric</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">5</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            Determines the time to wait between attempts to contact a
            management server when starting (the time between attempts
            is controlled by the
            <a class="link" href="mysql-cluster.html#option_ndbd_connect-retries"><code class="option">--connect-retries</code></a> option). The
            default is 5 seconds.
          </p><p>
            This option takes the place of the
            <a class="link" href="mysql-cluster.html#option_ndbd_connect-delay"><code class="option">--connect-delay</code></a> option, which
            is now deprecated and subject to removal in a future release
            of NDB Cluster.
          </p></li><li class="listitem"><p><a name="option_ndbd_daemon"></a>
            <code class="option">--daemon</code>, <code class="option">-d</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for daemon"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--daemon</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table>
</div>
<p>
            Instructs <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> or
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> to execute as a daemon process.
            This is the default behavior.
            <a class="link" href="mysql-cluster.html#option_ndbd_nodaemon"><code class="option">--nodaemon</code></a> can be used to
            prevent the process from running as a daemon.
          </p><p>
            This option has no effect when running
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> or <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> on
            Windows platforms.
          </p></li><li class="listitem"><p><a name="option_ndbd_foreground"></a>
            <code class="option">--foreground</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for foreground"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--foreground</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Causes <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> or <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>
            to execute as a foreground process, primarily for debugging
            purposes. This option implies the
            <a class="link" href="mysql-cluster.html#option_ndbd_nodaemon"><code class="option">--nodaemon</code></a> option.
          </p><p>
            This option has no effect when running
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> or <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> on
            Windows platforms.
          </p></li><li class="listitem"><p><a name="option_ndbd_initial"></a>
            <a class="indexterm" name="idm140091592244288"></a>

            <a class="indexterm" name="idm140091592243248"></a>

            <code class="option">--initial</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for initial"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--initial</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Instructs <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> to perform an initial
            start. An initial start erases any files created for
            recovery purposes by earlier instances of
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>. It also re-creates recovery log
            files. On some operating systems, this process can take a
            substantial amount of time.
          </p><p>
            An <a class="link" href="mysql-cluster.html#option_ndbd_initial"><code class="option">--initial</code></a> start is to be
            used <span class="emphasis"><em>only</em></span> when starting the
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> process under very special
            circumstances; this is because this option causes all files
            to be removed from the NDB Cluster file system and all redo
            log files to be re-created. These circumstances are listed
            here:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                When performing a software upgrade which has changed the
                contents of any files.
              </p></li><li class="listitem"><p>
                When restarting the node with a new version of
                <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>.
              </p></li><li class="listitem"><p>
                As a measure of last resort when for some reason the
                node restart or system restart repeatedly fails. In this
                case, be aware that this node can no longer be used to
                restore data due to the destruction of the data files.
</p></li></ul>
</div>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Warning
</div>
<p>
              To avoid the possibility of eventual data loss, it is
              recommended that you <span class="emphasis"><em>not</em></span> use the
              <code class="option">--initial</code> option together with
              <code class="literal">StopOnError = 0</code>. Instead, set
              <code class="literal">StopOnError</code> to 0 in
              <code class="filename">config.ini</code> only after the cluster has
              been started, then restart the data nodes
              normally—that is, without the
              <code class="option">--initial</code> option. See the description of
              the <a class="link" href="mysql-cluster.html#ndbparam-ndbd-stoponerror"><code class="literal">StopOnError</code></a>
              parameter for a detailed explanation of this issue. (Bug
              #24945638)
</p>
</div>
<p>
            Use of this option prevents the
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-startpartialtimeout"><code class="literal">StartPartialTimeout</code></a>
            and
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-startpartitionedtimeout"><code class="literal">StartPartitionedTimeout</code></a>
            configuration parameters from having any effect.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              This option does <span class="emphasis"><em>not</em></span> affect either of
              the following types of files:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  Backup files that have already been created by the
                  affected node
                </p></li><li class="listitem"><p>
                  NDB Cluster Disk Data files (see
                  <a class="xref" href="mysql-cluster.html#mysql-cluster-disk-data" title="22.5.13 NDB Cluster Disk Data Tables">Section 22.5.13, “NDB Cluster Disk Data Tables”</a>).
</p></li></ul>
</div>
<p>
              This option also has no effect on recovery of data by a
              data node that is just starting (or restarting) from data
              nodes that are already running. This recovery of data
              occurs automatically, and requires no user intervention in
              an NDB Cluster that is running normally.
</p>
</div>
<p>
            It is permissible to use this option when starting the
            cluster for the very first time (that is, before any data
            node files have been created); however, it is
            <span class="emphasis"><em>not</em></span> necessary to do so.
          </p></li><li class="listitem"><p><a name="option_ndbd_initial-start"></a>
            <a class="indexterm" name="idm140091592199680"></a>

            <a class="indexterm" name="idm140091592198640"></a>

            <code class="option">--initial-start</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for initial-start"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--initial-start</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            This option is used when performing a partial initial start
            of the cluster. Each node should be started with this
            option, as well as
            <a class="link" href="mysql-cluster.html#option_ndbd_nowait-nodes"><code class="option">--nowait-nodes</code></a>.
          </p><p>
            Suppose that you have a 4-node cluster whose data nodes have
            the IDs 2, 3, 4, and 5, and you wish to perform a partial
            initial start using only nodes 2, 4, and 5—that is,
            omitting node 3:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndbd --ndb-nodeid=2 --nowait-nodes=3 --initial-start</code></strong>
shell&gt; <strong class="userinput"><code>ndbd --ndb-nodeid=4 --nowait-nodes=3 --initial-start</code></strong>
shell&gt; <strong class="userinput"><code>ndbd --ndb-nodeid=5 --nowait-nodes=3 --initial-start</code></strong>
</pre><p>
            When using this option, you must also specify the node ID
            for the data node being started with the
            <a class="link" href="mysql-cluster.html#option_ndb_common_ndb-nodeid"><code class="option">--ndb-nodeid</code></a> option.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              Do not confuse this option with the
              <a class="link" href="mysql-cluster.html#option_ndb_mgmd_nowait-nodes"><code class="option">--nowait-nodes</code></a> option for
              <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>, which can be used to enable a
              cluster configured with multiple management servers to be
              started without all management servers being online.
</p>
</div>
</li><li class="listitem"><p><a name="option_ndbd_install"></a>
            <a class="indexterm" name="idm140091592170320"></a>

            <a class="indexterm" name="idm140091592169280"></a>

            <code class="option">--install[=<em class="replaceable"><code>name</code></em>]</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for install"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--install[=name]</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Platform Specific</strong></span></td>
<td>Windows</td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">ndbd</code></td>
</tr></tbody></table>
</div>
<p>
            Causes <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> to be installed as a Windows
            service. Optionally, you can specify a name for the service;
            if not set, the service name defaults to
            <code class="literal">ndbd</code>. Although it is preferable to
            specify other <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> program options in a
            <code class="filename">my.ini</code> or <code class="filename">my.cnf</code>
            configuration file, it is possible to use together with
            <code class="option">--install</code>. However, in such cases, the
            <code class="option">--install</code> option must be specified first,
            before any other options are given, for the Windows service
            installation to succeed.
          </p><p>
            It is generally not advisable to use this option together
            with the <a class="link" href="mysql-cluster.html#option_ndbd_initial"><code class="option">--initial</code></a> option,
            since this causes the data node file system to be wiped and
            rebuilt every time the service is stopped and started.
            Extreme care should also be taken if you intend to use any
            of the other <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> options that affect the
            starting of data nodes—including
            <a class="link" href="mysql-cluster.html#option_ndbd_initial-start"><code class="option">--initial-start</code></a>,
            <a class="link" href="mysql-cluster.html#option_ndbd_nostart"><code class="option">--nostart</code></a>, and
            <a class="link" href="mysql-cluster.html#option_ndbd_nowait-nodes"><code class="option">--nowait-nodes</code></a>—together
            with <a class="link" href="mysql-cluster.html#option_ndbd_install"><code class="option">--install</code></a>, and you should
            make absolutely certain you fully understand and allow for
            any possible consequences of doing so.
          </p><p>
            The <a class="link" href="mysql-cluster.html#option_ndbd_install"><code class="option">--install</code></a> option has no
            effect on non-Windows platforms.
          </p></li><li class="listitem"><p><a name="option_ndbd_logbuffer-size"></a>
            <a class="indexterm" name="idm140091592133712"></a>

            <a class="indexterm" name="idm140091592132672"></a>

            <code class="option">--logbuffer-size=<em class="replaceable"><code>#</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for logbuffer-size"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--logbuffer-size=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">32768</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">2048</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            Sets the size of the data node log buffer. When debugging
            with high amounts of extra logging, it is possible for the
            log buffer to run out of space if there are too many log
            messages, in which case some log messages can be lost. This
            should not occur during normal operations.
          </p></li><li class="listitem"><p><a name="option_ndbd_nodaemon"></a>
            <code class="option">--nodaemon</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for nodaemon"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--nodaemon</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Prevents <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> or
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> from executing as a daemon
            process. This option overrides the
            <a class="link" href="mysql-cluster.html#option_ndbd_daemon"><code class="option">--daemon</code></a> option. This is useful
            for redirecting output to the screen when debugging the
            binary.
          </p><p>
            The default behavior for <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> and
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> on Windows is to run in the
            foreground, making this option unnecessary on Windows
            platforms, where it has no effect.
          </p></li><li class="listitem"><p><a name="option_ndbd_nostart"></a>
            <a class="indexterm" name="idm140091592084416"></a>

            <a class="indexterm" name="idm140091592083376"></a>

            <a class="indexterm" name="idm140091592082304"></a>

            <a class="indexterm" name="idm140091592081232"></a>

            <code class="option">--nostart</code>, <code class="option">-n</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for nostart"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--nostart</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Instructs <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> not to start
            automatically. When this option is used,
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> connects to the management server,
            obtains configuration data from it, and initializes
            communication objects. However, it does not actually start
            the execution engine until specifically requested to do so
            by the management server. This can be accomplished by
            issuing the proper <a class="link" href="mysql-cluster.html#ndbclient-start"><code class="literal">START</code></a>
            command in the management client (see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-mgm-client-commands" title="22.5.2 Commands in the NDB Cluster Management Client">Section 22.5.2, “Commands in the NDB Cluster Management Client”</a>).
          </p></li><li class="listitem"><p><a name="option_ndbd_nowait-nodes"></a>
            <a class="indexterm" name="idm140091592057936"></a>

            <a class="indexterm" name="idm140091592056896"></a>

            <code class="option">--nowait-nodes=<em class="replaceable"><code>node_id_1</code></em>[,
            <em class="replaceable"><code>node_id_2</code></em>[, ...]]</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for nowait-nodes"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--nowait-nodes=list</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            This option takes a list of data nodes which for which the
            cluster will not wait for before starting.
          </p><p>
            This can be used to start the cluster in a partitioned
            state. For example, to start the cluster with only half of
            the data nodes (nodes 2, 3, 4, and 5) running in a 4-node
            cluster, you can start each <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> process
            with <code class="option">--nowait-nodes=3,5</code>. In this case, the
            cluster starts as soon as nodes 2 and 4 connect, and does
            <span class="emphasis"><em>not</em></span> wait
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-startpartitionedtimeout"><code class="literal">StartPartitionedTimeout</code></a>
            milliseconds for nodes 3 and 5 to connect as it would
            otherwise.
          </p><p>
            If you wanted to start up the same cluster as in the
            previous example without one <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> (say,
            for example, that the host machine for node 3 has suffered a
            hardware failure) then start nodes 2, 4, and 5 with
            <code class="option">--nowait-nodes=3</code>. Then the cluster will
            start as soon as nodes 2, 4, and 5 connect and will not wait
            for node 3 to start.
          </p></li><li class="listitem"><p><a name="option_ndbd_remove"></a>
            <a class="indexterm" name="idm140091592031392"></a>

            <a class="indexterm" name="idm140091592030352"></a>

            <a class="link" href="mysql-cluster.html#option_ndbd_remove"><code class="option">--remove[=<em class="replaceable"><code>name</code></em>]</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for remove"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--remove[=name]</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Platform Specific</strong></span></td>
<td>Windows</td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">ndbd</code></td>
</tr></tbody></table>
</div>
<p>
            Causes an <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> process that was
            previously installed as a Windows service to be removed.
            Optionally, you can specify a name for the service to be
            uninstalled; if not set, the service name defaults to
            <code class="literal">ndbd</code>.
          </p><p>
            The <a class="link" href="mysql-cluster.html#option_ndbd_remove"><code class="option">--remove</code></a> option has no
            effect on non-Windows platforms.
          </p></li><li class="listitem"><p><a name="option_ndbd_verbose"></a>
            <a class="indexterm" name="idm140091592005312"></a>

            <a class="indexterm" name="idm140091592004272"></a>

            <code class="option">--verbose</code>, <code class="option">-v</code>
          </p><p>
            Causes extra debug output to be written to the node log.
          </p><p>
            You can also use <a class="link" href="mysql-cluster.html#ndbclient-nodelog-debug"><code class="literal">NODELOG DEBUG
            ON</code></a> and <a class="link" href="mysql-cluster.html#ndbclient-nodelog-debug"><code class="literal">NODELOG DEBUG
            OFF</code></a> to enable and disable this extra logging while
            the data node is running.
</p></li></ul>
</div>
<a class="indexterm" name="idm140091591998352"></a><a class="indexterm" name="idm140091591996864"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> generates a set of log files which are
        placed in the directory specified by
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datadir"><code class="literal">DataDir</code></a> in the
        <code class="filename">config.ini</code> configuration file.
      </p><p>
        These log files are listed below.
        <em class="replaceable"><code>node_id</code></em> is and represents the node's
        unique identifier. For example,
        <code class="filename">ndb_2_error.log</code> is the error log generated
        by the data node whose node ID is <code class="literal">2</code>.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="indexterm" name="idm140091591988912"></a>

            <a class="indexterm" name="idm140091591987424"></a>

            <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_error.log</code>
            is a file containing records of all crashes which the
            referenced <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> process has encountered.
            Each record in this file contains a brief error string and a
            reference to a trace file for this crash. A typical entry in
            this file might appear as shown here:
          </p><pre data-lang="simple" class="programlisting">
Date/Time: Saturday 30 July 2004 - 00:20:01
Type of error: error
Message: Internal program error (failed ndbrequire)
Fault ID: 2341
Problem data: DbtupFixAlloc.cpp
Object of reference: DBTUP (Line: 173)
ProgramName: NDB Kernel
ProcessID: 14909
TraceFile: ndb_2_trace.log.2
***EOM***
</pre><p>
            Listings of possible <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> exit codes and
            messages generated when a data node process shuts down
            prematurely can be found in
            <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-node-error-messages.html" target="_top">Data Node Error Messages</a>.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              <span class="emphasis"><em>The last entry in the error log file is not
              necessarily the newest one</em></span> (nor is it likely to
              be). Entries in the error log are <span class="emphasis"><em>not</em></span>
              listed in chronological order; rather, they correspond to
              the order of the trace files as determined in the
              <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_trace.log.next</code>
              file (see below). Error log entries are thus overwritten
              in a cyclical and not sequential fashion.
</p>
</div>
</li><li class="listitem"><p>
            <a class="indexterm" name="idm140091591975840"></a>

            <a class="indexterm" name="idm140091591974352"></a>

            <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_trace.log.<em class="replaceable"><code>trace_id</code></em></code>
            is a trace file describing exactly what happened just before
            the error occurred. This information is useful for analysis
            by the NDB Cluster development team.
          </p><p>
            It is possible to configure the number of these trace files
            that will be created before old files are overwritten.
            <em class="replaceable"><code>trace_id</code></em> is a number which is
            incremented for each successive trace file.
          </p></li><li class="listitem"><p>
            <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_trace.log.next</code>
            is the file that keeps track of the next trace file number
            to be assigned.
          </p></li><li class="listitem"><p>
            <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_out.log</code>
            is a file containing any data output by the
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> process. This file is created only
            if <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> is started as a daemon, which is
            the default behavior.
          </p></li><li class="listitem"><p>
            <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>.pid</code>
            is a file containing the process ID of the
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> process when started as a daemon. It
            also functions as a lock file to avoid the starting of nodes
            with the same identifier.
          </p></li><li class="listitem"><p>
            <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_signal.log</code>
            is a file used only in debug versions of
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>, where it is possible to trace all
            incoming, outgoing, and internal messages with their data in
            the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> process.
</p></li></ul>
</div>
<p>
        It is recommended not to use a directory mounted through NFS
        because in some environments this can cause problems whereby the
        lock on the <code class="filename">.pid</code> file remains in effect
        even after the process has terminated.
      </p><p>
        To start <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>, it may also be necessary to
        specify the host name of the management server and the port on
        which it is listening. Optionally, one may also specify the node
        ID that the process is to use.
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndbd --connect-string="nodeid=2;host=ndb_mgmd.mysql.com:1186"</code></strong>
</pre><p>
        See <a class="xref" href="mysql-cluster.html#mysql-cluster-connection-strings" title="22.3.3.3 NDB Cluster Connection Strings">Section 22.3.3.3, “NDB Cluster Connection Strings”</a>, for
        additional information about this issue.
        <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>,
        describes other command-line options which can be used with
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>. For information about data node
        configuration parameters, see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition" title="22.3.3.6 Defining NDB Cluster Data Nodes">Section 22.3.3.6, “Defining NDB Cluster Data Nodes”</a>.
      </p><p>
        When <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> starts, it actually initiates two
        processes. The first of these is called the <span class="quote">“<span class="quote">angel
        process</span>”</span>; its only job is to discover when the execution
        process has been completed, and then to restart the
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> process if it is configured to do so.
        Thus, if you attempt to kill <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> using the
        Unix <a class="link" href="sql-syntax.html#kill" title="13.7.7.4 KILL Syntax"><span class="command"><strong>kill</strong></span></a> command, it is necessary to kill
        both processes, beginning with the angel process. The preferred
        method of terminating an <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> process is to
        use the management client and stop the process from there.
      </p><p>
        The execution process uses one thread for reading, writing, and
        scanning data, as well as all other activities. This thread is
        implemented asynchronously so that it can easily handle
        thousands of concurrent actions. In addition, a watch-dog thread
        supervises the execution thread to make sure that it does not
        hang in an endless loop. A pool of threads handles file I/O,
        with each thread able to handle one open file. Threads can also
        be used for transporter connections by the transporters in the
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> process. In a multi-processor system
        performing a large number of operations (including updates), the
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> process can consume up to 2 CPUs if
        permitted to do so.
      </p><p>
        For a machine with many CPUs it is possible to use several
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> processes which belong to different node
        groups; however, such a configuration is still considered
        experimental and is not supported for MySQL 8.0 in
        a production setting. See
        <a class="xref" href="mysql-cluster.html#mysql-cluster-limitations" title="22.1.7 Known Limitations of NDB Cluster">Section 22.1.7, “Known Limitations of NDB Cluster”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndbinfo-select-all"></a>22.4.2 <span class="command"><strong>ndbinfo_select_all</strong></span> — Select From ndbinfo Tables</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091591930880"></a><a class="indexterm" name="idm140091591929936"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbinfo-select-all" title="22.4.2 ndbinfo_select_all — Select From ndbinfo Tables"><span class="command"><strong>ndbinfo_select_all</strong></span></a> is a client program that
        selects all rows and columns from one or more tables in the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo" title="22.5.10 ndbinfo: The NDB Cluster Information Database"><code class="literal">ndbinfo</code></a> database
      </p><p>
        Not all <code class="literal">ndbinfo</code> tables available in the
        <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client can be read by this program. In
        addition, <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbinfo-select-all" title="22.4.2 ndbinfo_select_all — Select From ndbinfo Tables"><span class="command"><strong>ndbinfo_select_all</strong></span></a> can show
        information about some tables internal to
        <code class="literal">ndbinfo</code> which cannot be accessed using SQL,
        including the <code class="literal">tables</code> and
        <code class="literal">columns</code> metadata tables.
      </p><p>
        To select from one or more <code class="literal">ndbinfo</code> tables
        using <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbinfo-select-all" title="22.4.2 ndbinfo_select_all — Select From ndbinfo Tables"><span class="command"><strong>ndbinfo_select_all</strong></span></a>, it is necessary to
        supply the names of the tables when invoking the program as
        shown here:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndbinfo_select_all <em class="replaceable"><code>table_name1</code></em>  [<em class="replaceable"><code>table_name2</code></em>] [...]</code></strong>
</pre><p>
        For example:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndbinfo_select_all logbuffers logspaces</code></strong>
== logbuffers ==
node_id log_type        log_id  log_part        total   used    high
5       0       0       0       33554432        262144  0
6       0       0       0       33554432        262144  0
7       0       0       0       33554432        262144  0
8       0       0       0       33554432        262144  0
== logspaces ==
node_id log_type        log_id  log_part        total   used    high
5       0       0       0       268435456       0       0
5       0       0       1       268435456       0       0
5       0       0       2       268435456       0       0
5       0       0       3       268435456       0       0
6       0       0       0       268435456       0       0
6       0       0       1       268435456       0       0
6       0       0       2       268435456       0       0
6       0       0       3       268435456       0       0
7       0       0       0       268435456       0       0
7       0       0       1       268435456       0       0
7       0       0       2       268435456       0       0
7       0       0       3       268435456       0       0
8       0       0       0       268435456       0       0
8       0       0       1       268435456       0       0
8       0       0       2       268435456       0       0
8       0       0       3       268435456       0       0
shell&gt;                     
</pre><a class="indexterm" name="idm140091591909504"></a><p>
        The following table includes options that are specific to
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbinfo-select-all" title="22.4.2 ndbinfo_select_all — Select From ndbinfo Tables"><span class="command"><strong>ndbinfo_select_all</strong></span></a>. Additional descriptions
        follow the table. For options common to most NDB Cluster
        programs (including <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbinfo-select-all" title="22.4.2 ndbinfo_select_all — Select From ndbinfo Tables"><span class="command"><strong>ndbinfo_select_all</strong></span></a>), see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
</p>
<div class="table">
<a name="mysql-cluster-ndbinfo_select_all-options-table"></a><p class="title"><b>Table 22.335 Command-line options for the ndbinfo_select_all program</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndbinfo_select_all_delay">--delay=#</a>
                </code>
              </p></td>
            <td>Set the delay in seconds between loops. Default is 5.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndbinfo_select_all_loops">--loops=#</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndbinfo_select_all_loops">-l</a>
                </code>
              </p></td>
            <td>Set the number of times to perform the select. Default is 1.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_select_all_database">--database=db_name</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_database">-d</a>
                </code>
              </p></td>
            <td>Name of the database where the table located.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_select_all_parallelism">--parallelism=#</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_parallelism">-p</a>
                </code>
              </p></td>
            <td>Set the degree of parallelism.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndbinfo_select_all_delay"></a>
            <a class="indexterm" name="idm140091591868192"></a>

            <code class="option">--delay=<code class="literal">seconds</code></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for delay"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--delay=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Numeric</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">5</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">MAX_INT</code></td>
</tr></tbody></table>
</div>
<p>
            This option sets the number of seconds to wait between
            executing loops. Has no effect if
            <a class="link" href="mysql-cluster.html#option_ndbinfo_select_all_loops"><code class="option">--loops</code></a> is set to
            0 or 1.
          </p></li><li class="listitem"><p><a name="option_ndbinfo_select_all_loops"></a>
            <a class="indexterm" name="idm140091591842528"></a>

            <a class="indexterm" name="idm140091591841488"></a>

            <code class="option">--loops=<code class="literal">number</code></code>,
            <code class="option">-l <em class="replaceable"><code>number</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for loops"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--loops=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Numeric</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">MAX_INT</code></td>
</tr></tbody></table>
</div>
<p>
            This option sets the number of times to execute the select.
            Use <a class="link" href="mysql-cluster.html#option_ndbinfo_select_all_delay"><code class="option">--delay</code></a> to
            set the time between loops.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndbmtd"></a>22.4.3 <span class="command"><strong>ndbmtd</strong></span> — The NDB Cluster Data Node Daemon (Multi-Threaded)</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091591814096"></a><a class="indexterm" name="idm140091591813152"></a><a class="indexterm" name="idm140091591811792"></a><a class="indexterm" name="idm140091591810432"></a><a class="indexterm" name="idm140091591809520"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> is a multithreaded version of
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>, the process that is used to handle all
        the data in tables using the
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> storage engine.
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> is intended for use on host computers
        having multiple CPU cores. Except where otherwise noted,
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> functions in the same way as
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>; therefore, in this section, we
        concentrate on the ways in which <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>
        differs from <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>, and you should consult
        <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon">Section 22.4.1, “<span class="command"><strong>ndbd</strong></span> — The NDB Cluster Data Node Daemon”</a>, for additional
        information about running NDB Cluster data nodes that apply to
        both the single-threaded and multithreaded versions of the data
        node process.
      </p><p>
        Command-line options and configuration parameters used with
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> also apply to <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>.
        For more information about these options and parameters, see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon">Section 22.4.1, “<span class="command"><strong>ndbd</strong></span> — The NDB Cluster Data Node Daemon”</a>, and
        <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition" title="22.3.3.6 Defining NDB Cluster Data Nodes">Section 22.3.3.6, “Defining NDB Cluster Data Nodes”</a>, respectively.
      </p><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> is also file system-compatible with
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>. In other words, a data node running
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> can be stopped, the binary replaced with
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>, and then restarted without any loss
        of data. (However, when doing this, you must make sure that
        <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-maxnoofexecutionthreads"><code class="literal">MaxNoOfExecutionThreads</code></a>
        is set to an apppriate value before restarting the node if you
        wish for <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> to run in multithreaded
        fashion.) Similarly, an <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> binary can be
        replaced with <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> simply by stopping the
        node and then starting <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> in place of the
        multithreaded binary. It is not necessary when switching between
        the two to start the data node binary using
        <a class="link" href="mysql-cluster.html#option_ndbd_initial"><code class="option">--initial</code></a>.
      </p><p>
        Using <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> differs from using
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> in two key respects:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Because <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> runs by default in
            single-threaded mode (that is, it behaves like
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>), you must configure it to use
            multiple threads. This can be done by setting an appropriate
            value in the <code class="filename">config.ini</code> file for the
            <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-maxnoofexecutionthreads"><code class="literal">MaxNoOfExecutionThreads</code></a>
            configuration parameter or the
            <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-threadconfig"><code class="literal">ThreadConfig</code></a>
            configuration parameter. Using
            <code class="literal">MaxNoOfExecutionThreads</code> is simpler, but
            <code class="literal">ThreadConfig</code> offers more flexibility. For
            more information about these configuration parameters and
            their use, see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition-ndbmtd-parameters" title="Multi-Threading Configuration Parameters (ndbmtd)">Multi-Threading Configuration Parameters (ndbmtd)</a>.
          </p></li><li class="listitem"><p>
            Trace files are generated by critical errors in
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> processes in a somewhat different
            fashion from how these are generated by
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> failures. These differences are
            discussed in more detail in the next few paragraphs.
</p></li></ol>
</div>
<a class="indexterm" name="idm140091591761872"></a><a class="indexterm" name="idm140091591760384"></a><a class="indexterm" name="idm140091591758896"></a><a class="indexterm" name="idm140091591757408"></a><a class="indexterm" name="idm140091591755920"></a><p>
        Like <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>, <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>
        generates a set of log files which are placed in the directory
        specified by <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datadir"><code class="literal">DataDir</code></a> in
        the <code class="filename">config.ini</code> configuration file. Except
        for trace files, these are generated in the same way and have
        the same names as those generated by <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>.
      </p><p>
        In the event of a critical error, <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>
        generates trace files describing what happened just prior to the
        error' occurrence. These files, which can be found in the
        data node's
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datadir"><code class="literal">DataDir</code></a>, are useful for
        analysis of problems by the NDB Cluster Development and Support
        teams. One trace file is generated for each
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> thread. The names of these files have
        the following pattern:
      </p><pre data-lang="terminal" class="programlisting">        
<code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_trace.log.<em class="replaceable"><code>trace_id</code></em>_t<em class="replaceable"><code>thread_id</code></em></code>,
</pre><p>
        In this pattern, <em class="replaceable"><code>node_id</code></em> stands for
        the data node's unique node ID in the cluster,
        <em class="replaceable"><code>trace_id</code></em> is a trace sequence number,
        and <em class="replaceable"><code>thread_id</code></em> is the thread ID. For
        example, in the event of the failure of an
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> process running as an NDB Cluster data
        node having the node ID 3 and with
        <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-maxnoofexecutionthreads"><code class="literal">MaxNoOfExecutionThreads</code></a>
        equal to 4, four trace files are generated in the data
        node's data directory. If the is the first time this node
        has failed, then these files are named
        <code class="filename">ndb_3_trace.log.1_t1</code>,
        <code class="filename">ndb_3_trace.log.1_t2</code>,
        <code class="filename">ndb_3_trace.log.1_t3</code>, and
        <code class="filename">ndb_3_trace.log.1_t4</code>. Internally, these
        trace files follow the same format as <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>
        trace files.
      </p><p>
        The <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> exit codes and messages that are
        generated when a data node process shuts down prematurely are
        also used by <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>. See
        <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-node-error-messages.html" target="_top">Data Node Error Messages</a>, for a listing of
        these.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          It is possible to use <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> and
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> concurrently on different data nodes
          in the same NDB Cluster. However, such configurations have not
          been tested extensively; thus, we cannot recommend doing so in
          a production setting at this time.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-mgmd"></a>22.4.4 <span class="command"><strong>ndb_mgmd</strong></span> — The NDB Cluster Management Server Daemon</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091591722608"></a><a class="indexterm" name="idm140091591721696"></a><a class="indexterm" name="idm140091591720336"></a><a class="indexterm" name="idm140091591718976"></a><a class="indexterm" name="idm140091591717600"></a><p>
        The management server is the process that reads the cluster
        configuration file and distributes this information to all nodes
        in the cluster that request it. It also maintains a log of
        cluster activities. Management clients can connect to the
        management server and check the cluster's status.
      </p><a class="indexterm" name="idm140091591715376"></a><a class="indexterm" name="idm140091591713888"></a><a class="indexterm" name="idm140091591712400"></a><a class="indexterm" name="idm140091591710896"></a><p>
        The following table includes options that are specific to the
        NDB Cluster management server program
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>. Additional descriptions follow the
        table. For options common to most NDB Cluster programs
        (including <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>), see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
</p>
<div class="table">
<a name="mysql-cluster-ndb_mgmd-options-table"></a><p class="title"><b>Table 22.336 Command-line options for the ndb_mgmd program</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_bind-address">--bind-address=host</a>
                </code>
              </p></td>
            <td>Local bind address</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_config-cache">--config-cache[=TRUE|FALSE]</a>
                </code>
              </p></td>
            <td>Enable the management server configuration cache; TRUE by default.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_mgmd_config-file">--config-file=file</a></code>
                (&gt;=),
              </p><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_mgmd_config-file">-f</a></code>
                (&gt;=)
              </p></td>
            <td>Specify the cluster configuration file; in NDB-6.4.0 and later, needs
              --reload or --initial to override configuration cache if
              present</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_mgmd_configdir">--configdir=directory</a></code>,
              </p><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_mgmd_configdir">--config-dir=directory</a></code>
                (&gt;=7.0.8)
              </p></td>
            <td>Specify the cluster management server's configuration cache directory</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_mgmd_daemon">--daemon</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_daemon">-d</a>
                </code>
              </p></td>
            <td>Run ndb_mgmd in daemon mode (default)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_initial">--initial</a>
                </code>
              </p></td>
            <td>Causes the management server reload its configuration data from the
              configuration file, bypassing the configuration cache</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_install">--install[=name]</a>
                </code>
              </p></td>
            <td>Used to install the management server process as a Windows service. Does
              not apply on non-Windows platforms.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_interactive">--interactive</a>
                </code>
              </p></td>
            <td>Run ndb_mgmd in interactive mode (not officially supported in
              production; for testing purposes only)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_log-name">--log-name=name</a>
                </code>
              </p></td>
            <td>A name to use when writing messages applying to this node in the cluster
              log.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_mycnf">--mycnf</a>
                </code>
              </p></td>
            <td>Read cluster configuration data from the my.cnf file</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_no-nodeid-checks">--no-nodeid-checks</a>
                </code>
              </p></td>
            <td>Do not provide any node id checks</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_nodaemon">--nodaemon</a>
                </code>
              </p></td>
            <td>Do not run ndb_mgmd as a daemon</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_nowait-nodes">--nowait-nodes=list</a>
                </code>
              </p></td>
            <td>Do not wait for these management nodes when starting this management
              server. Also requires --ndb-nodeid to be used.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_mgmd_print-full-config">--print-full-config</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_print-full-config">-P</a>
                </code>
              </p></td>
            <td>Print full configuration and exit</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_reload">--reload</a>
                </code>
              </p></td>
            <td>Causes the management server to compare the configuration file with its
              configuration cache</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_remove">--remove[=name]</a>
                </code>
              </p></td>
            <td>Used to remove a management server process that was previously installed
              as a Windows service, optionally specifying the name of
              the service to be removed. Does not apply on non-Windows
              platforms.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_mgmd_verbose">--verbose</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_verbose">-v</a>
                </code>
              </p></td>
            <td>Write additional information to the log.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_mgmd_bind-address"></a>
            <a class="indexterm" name="idm140091591600448"></a>

            <code class="option">--bind-address=<em class="replaceable"><code>host</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for bind-address"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--bind-address=host</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">[none]</code></td>
</tr></tbody></table>
</div>
<p>
            Causes the management server to bind to a specific network
            interface (host name or IP address). This option has no
            default value.
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_config-cache"></a>
            <a class="indexterm" name="idm140091591582096"></a>

            <code class="option">--config-cache</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for config-cache"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--config-cache[=TRUE|FALSE]</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table>
</div>
<p>
            This option, whose default value is <code class="literal">1</code> (or
            <code class="literal">TRUE</code>, or <code class="literal">ON</code>), can be
            used to disable the management server's configuration
            cache, so that it reads its configuration from
            <code class="filename">config.ini</code> every time it starts (see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-config-file" title="22.3.3 NDB Cluster Configuration Files">Section 22.3.3, “NDB Cluster Configuration Files”</a>). You can do
            this by starting the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> process
            with any one of the following options:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="option">--config-cache=0</code>
              </p></li><li class="listitem"><p>
                <code class="option">--config-cache=FALSE</code>
              </p></li><li class="listitem"><p>
                <code class="option">--config-cache=OFF</code>
              </p></li><li class="listitem"><p><a name="option_ndb_mgmd_skip_config-cache"></a>
                <code class="option">--skip-config-cache</code>
</p></li></ul>
</div>
<p>
            Using one of the options just listed is effective only if
            the management server has no stored configuration at the
            time it is started. If the management server finds any
            configuration cache files, then the
            <code class="option">--config-cache</code> option or the
            <code class="option">--skip-config-cache</code> option is ignored.
            Therefore, to disable configuration caching, the option
            should be used the <span class="emphasis"><em>first</em></span> time that the
            management server is started. Otherwise—that is, if
            you wish to disable configuration caching for a management
            server that has <span class="emphasis"><em>already</em></span> created a
            configuration cache—you must stop the management
            server, delete any existing configuration cache files
            manually, then restart the management server with
            <code class="option">--skip-config-cache</code> (or with
            <code class="option">--config-cache</code> set equal to 0,
            <code class="literal">OFF</code>, or <code class="literal">FALSE</code>).
          </p><p>
            Configuration cache files are normally created in a
            directory named <code class="filename">mysql-cluster</code> under the
            installation directory (unless this location has been
            overridden using the
            <a class="link" href="mysql-cluster.html#option_ndb_mgmd_configdir"><code class="option">--configdir</code></a> option). Each
            time the management server updates its configuration data,
            it writes a new cache file. The files are named sequentially
            in order of creation using the following format:
          </p><pre data-lang="simple" class="programlisting">
ndb_<em class="replaceable"><code>node-id</code></em>_config.bin.<em class="replaceable"><code>seq-number</code></em>
</pre><p>
            <em class="replaceable"><code>node-id</code></em> is the management
            server's node ID; <em class="replaceable"><code>seq-number</code></em>
            is a sequence number, beginning with 1. For example, if the
            management server's node ID is 5, then the first three
            configuration cache files would, when they are created, be
            named <code class="filename">ndb_5_config.bin.1</code>,
            <code class="filename">ndb_5_config.bin.2</code>, and
            <code class="filename">ndb_5_config.bin.3</code>.
          </p><p>
            If your intent is to purge or reload the configuration cache
            without actually disabling caching, you should start
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> with one of the options
            <a class="link" href="mysql-cluster.html#option_ndb_mgmd_reload"><code class="option">--reload</code></a> or
            <a class="link" href="mysql-cluster.html#option_ndb_mgmd_initial"><code class="option">--initial</code></a> instead of
            <code class="option">--skip-config-cache</code>.
          </p><p>
            To re-enable the configuration cache, simply restart the
            management server, but without the
            <code class="option">--config-cache</code> or
            <code class="option">--skip-config-cache</code> option that was used
            previously to disable the configuration cache.
          </p><p>
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> does not check for the
            configuration directory
            (<a class="link" href="mysql-cluster.html#option_ndb_mgmd_configdir"><code class="option">--configdir</code></a>) or attempts
            to create one when <code class="option">--skip-config-cache</code> is
            used. (Bug #13428853)
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_config-file"></a>
            <a class="indexterm" name="idm140091591530912"></a>

            <a class="indexterm" name="idm140091591529872"></a>

            <a class="indexterm" name="idm140091591528800"></a>

            <code class="option">--config-file=<em class="replaceable"><code>filename</code></em></code>,
            <code class="option">-f <em class="replaceable"><code>filename</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for config-file"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--config-file=file</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>File name</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">[none]</code></td>
</tr></tbody></table>
</div>
<p>
            Instructs the management server as to which file it should
            use for its configuration file. By default, the management
            server looks for a file named
            <code class="filename">config.ini</code> in the same directory as the
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> executable; otherwise the file
            name and location must be specified explicitly.
          </p><p>
            This option has no default value, and is ignored unless the
            management server is forced to read the configuration file,
            either because <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> was started with
            the <a class="link" href="mysql-cluster.html#option_ndb_mgmd_reload"><code class="option">--reload</code></a> or
            <a class="link" href="mysql-cluster.html#option_ndb_mgmd_initial"><code class="option">--initial</code></a> option, or
            because the management server could not find any
            configuration cache. This option is also read if
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> was started with
            <a class="link" href="mysql-cluster.html#option_ndb_mgmd_config-cache"><code class="option">--config-cache=OFF</code></a>. See
            <a class="xref" href="mysql-cluster.html#mysql-cluster-config-file" title="22.3.3 NDB Cluster Configuration Files">Section 22.3.3, “NDB Cluster Configuration Files”</a>, for more
            information.
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_configdir"></a>
            <a class="indexterm" name="idm140091591500704"></a>

            <code class="option">--configdir=<em class="replaceable"><code>dir_name</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for configdir"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><p class="valid-value"><code class="literal">--configdir=directory</code></p><p class="valid-value"><code class="literal">--config-dir=directory</code></p></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>File name</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">$INSTALLDIR/mysql-cluster</code></td>
</tr></tbody></table>
</div>
<p>
            Specifies the cluster management server's configuration
            cache directory. <code class="option">--config-dir</code> is an alias
            for this option.
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_daemon"></a>
            <a class="indexterm" name="idm140091591480656"></a>

            <a class="indexterm" name="idm140091591479600"></a>

            <code class="option">--daemon</code>, <code class="option">-d</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for daemon"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--daemon</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table>
</div>
<p>
            Instructs <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> to start as a daemon
            process. This is the default behavior.
          </p><p>
            This option has no effect when running
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> on Windows platforms.
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_initial"></a>
            <a class="indexterm" name="idm140091591458304"></a>

            <code class="option">--initial</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for initial"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--initial</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Configuration data is cached internally, rather than being
            read from the cluster global configuration file each time
            the management server is started (see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-config-file" title="22.3.3 NDB Cluster Configuration Files">Section 22.3.3, “NDB Cluster Configuration Files”</a>). Using the
            <code class="option">--initial</code> option overrides this behavior,
            by forcing the management server to delete any existing
            cache files, and then to re-read the configuration data from
            the cluster configuration file and to build a new cache.
          </p><p>
            This differs in two ways from the
            <a class="link" href="mysql-cluster.html#option_ndb_mgmd_reload"><code class="option">--reload</code></a> option. First,
            <code class="option">--reload</code> forces the server to check the
            configuration file against the cache and reload its data
            only if the contents of the file are different from the
            cache. Second, <code class="option">--reload</code> does not delete any
            existing cache files.
          </p><p>
            If <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> is invoked with
            <code class="option">--initial</code> but cannot find a global
            configuration file, the management server cannot start.
          </p><p>
            When a management server starts, it checks for another
            management server in the same NDB Cluster and tries to use
            the other management server's configuration data. This
            behavior has implications when performing a rolling restart
            of an NDB Cluster with multiple management nodes. See
            <a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="22.5.5 Performing a Rolling Restart of an NDB Cluster">Section 22.5.5, “Performing a Rolling Restart of an NDB Cluster”</a>, for more
            information.
          </p><p>
            When used together with the
            <a class="link" href="mysql-cluster.html#option_ndb_mgmd_config-file"><code class="option">--config-file</code></a> option, the
            cache is cleared only if the configuration file is actually
            found.
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_install"></a>
            <a class="indexterm" name="idm140091591431008"></a>

            <code class="option">--install[=<em class="replaceable"><code>name</code></em>]</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for install"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--install[=name]</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Platform Specific</strong></span></td>
<td>Windows</td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">ndb_mgmd</code></td>
</tr></tbody></table>
</div>
<p>
            Causes <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> to be installed as a
            Windows service. Optionally, you can specify a name for the
            service; if not set, the service name defaults to
            <code class="literal">ndb_mgmd</code>. Although it is preferable to
            specify other <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> program options in
            a <code class="filename">my.ini</code> or <code class="filename">my.cnf</code>
            configuration file, it is possible to use them together with
            <a class="link" href="mysql-cluster.html#option_ndb_mgmd_install"><code class="option">--install</code></a>. However, in such
            cases, the <a class="link" href="mysql-cluster.html#option_ndb_mgmd_install"><code class="option">--install</code></a> option
            must be specified first, before any other options are given,
            for the Windows service installation to succeed.
          </p><p>
            It is generally not advisable to use this option together
            with the <a class="link" href="mysql-cluster.html#option_ndbd_initial"><code class="option">--initial</code></a> option,
            since this causes the configuration cache to be wiped and
            rebuilt every time the service is stopped and started. Care
            should also be taken if you intend to use any other
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> options that affect the starting
            of the management server, and you should make absolutely
            certain you fully understand and allow for any possible
            consequences of doing so.
          </p><p>
            The <a class="link" href="mysql-cluster.html#option_ndb_mgmd_install"><code class="option">--install</code></a> option has no
            effect on non-Windows platforms.
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_interactive"></a>
            <a class="indexterm" name="idm140091591398448"></a>

            <code class="option">--interactive</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for interactive"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--interactive</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Starts <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> in interactive mode; that
            is, an <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> client session is started
            as soon as the management server is running. This option
            does not start any other NDB Cluster nodes.
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_log-name"></a>
            <a class="indexterm" name="idm140091591377872"></a>

            <code class="option">--log-name=<em class="replaceable"><code>name</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for log-name"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--log-name=name</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">MgmtSrvr</code></td>
</tr></tbody></table>
</div>
<p>
            Provides a name to be used for this node in the cluster log.
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_mycnf"></a>
            <a class="indexterm" name="idm140091591359648"></a>

            <a class="indexterm" name="idm140091591358192"></a>

            <code class="option">--mycnf</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for mycnf"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--mycnf</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Read configuration data from the <code class="filename">my.cnf</code>
            file.
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_no-nodeid-checks"></a>
            <a class="indexterm" name="idm140091591339056"></a>

            <code class="option">--no-nodeid-checks</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for no-nodeid-checks"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--no-nodeid-checks</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Do not perform any checks of node IDs.
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_nodaemon"></a>
            <a class="indexterm" name="idm140091591321136"></a>

            <code class="option">--nodaemon</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for nodaemon"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--nodaemon</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Instructs <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> not to start as a
            daemon process.
          </p><p>
            The default behavior for <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> on
            Windows is to run in the foreground, making this option
            unnecessary on Windows platforms.
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_nowait-nodes"></a>
            <a class="indexterm" name="idm140091591300096"></a>

            <code class="option">--nowait-nodes</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for nowait-nodes"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--nowait-nodes=list</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Numeric</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal"></code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">255</code></td>
</tr></tbody></table>
</div>
<p>
            When starting an NDB Cluster is configured with two
            management nodes, each management server normally checks to
            see whether the other <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> is also
            operational and whether the other management server's
            configuration is identical to its own. However, it is
            sometimes desirable to start the cluster with only one
            management node (and perhaps to allow the other
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> to be started later). This
            option causes the management node to bypass any checks for
            any other management nodes whose node IDs are passed to this
            option, permitting the cluster to start as though configured
            to use only the management node that was started.
          </p><p>
            For purposes of illustration, consider the following portion
            of a <code class="filename">config.ini</code> file (where we have
            omitted most of the configuration parameters that are not
            relevant to this example):
          </p><pre data-lang="ini" class="programlisting">
[ndbd]
NodeId = 1
HostName = 198.51.100.101

[ndbd]
NodeId = 2
HostName = 198.51.100.102

[ndbd]
NodeId = 3
HostName = 198.51.100.103

[ndbd]
NodeId = 4
HostName = 198.51.100.104

[ndb_mgmd]
NodeId = 10
HostName = 198.51.100.150

[ndb_mgmd]
NodeId = 11
HostName = 198.51.100.151

[api]
NodeId = 20
HostName = 198.51.100.200

[api]
NodeId = 21
HostName = 198.51.100.201
</pre><p>
            Assume that you wish to start this cluster using only the
            management server having node ID <code class="literal">10</code> and
            running on the host having the IP address 198.51.100.150.
            (Suppose, for example, that the host computer on which you
            intend to the other management server is temporarily
            unavailable due to a hardware failure, and you are waiting
            for it to be repaired.) To start the cluster in this way,
            use a command line on the machine at 198.51.100.150 to enter
            the following command:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_mgmd --ndb-nodeid=10 --nowait-nodes=11</code></strong>
</pre><p>
            As shown in the preceding example, when using
            <a class="link" href="mysql-cluster.html#option_ndb_mgmd_nowait-nodes"><code class="option">--nowait-nodes</code></a>, you must
            also use the <a class="link" href="mysql-cluster.html#option_ndb_common_ndb-nodeid"><code class="option">--ndb-nodeid</code></a>
            option to specify the node ID of this
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> process.
          </p><p>
            You can then start each of the cluster's data nodes in
            the usual way. If you wish to start and use the second
            management server in addition to the first management server
            at a later time without restarting the data nodes, you must
            start each data node with a connection string that
            references both management servers, like this:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndbd -c 198.51.100.150,198.51.100.151</code></strong>
</pre><p>
            The same is true with regard to the connection string used
            with any <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> processes that you wish
            to start as NDB Cluster SQL nodes connected to this cluster.
            See <a class="xref" href="mysql-cluster.html#mysql-cluster-connection-strings" title="22.3.3.3 NDB Cluster Connection Strings">Section 22.3.3.3, “NDB Cluster Connection Strings”</a>, for
            more information.
          </p><p>
            When used with <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>, this option
            affects the behavior of the management node with regard to
            other management nodes only. Do not confuse it with the
            <a class="link" href="mysql-cluster.html#option_ndbd_nowait-nodes"><code class="option">--nowait-nodes</code></a> option used with
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> or <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> to
            permit a cluster to start with fewer than its full
            complement of data nodes; when used with data nodes, this
            option affects their behavior only with regard to other data
            nodes.
          </p><p>
            Multiple management node IDs may be passed to this option as
            a comma-separated list. Each node ID must be no less than 1
            and no greater than 255. In practice, it is quite rare to
            use more than two management servers for the same NDB
            Cluster (or to have any need for doing so); in most cases
            you need to pass to this option only the single node ID for
            the one management server that you do not wish to use when
            starting the cluster.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              When you later start the <span class="quote">“<span class="quote">missing</span>”</span> management
              server, its configuration must match that of the
              management server that is already in use by the cluster.
              Otherwise, it fails the configuration check performed by
              the existing management server, and does not start.
</p>
</div>
</li><li class="listitem"><p><a name="option_ndb_mgmd_print-full-config"></a>
            <a class="indexterm" name="idm140091591250080"></a>

            <a class="indexterm" name="idm140091591249040"></a>

            <code class="option">--print-full-config</code>, <code class="option">-P</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for print-full-config"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--print-full-config</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Shows extended information regarding the configuration of
            the cluster. With this option on the command line the
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> process prints information about
            the cluster setup including an extensive list of the cluster
            configuration sections as well as parameters and their
            values. Normally used together with the
            <a class="link" href="mysql-cluster.html#option_ndb_mgmd_config-file"><code class="option">--config-file</code></a>
            (<code class="option">-f</code>) option.
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_reload"></a>
            <a class="indexterm" name="idm140091591227664"></a>

            <code class="option">--reload</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for reload"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--reload</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            NDB Cluster configuration data is stored internally rather
            than being read from the cluster global configuration file
            each time the management server is started (see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-config-file" title="22.3.3 NDB Cluster Configuration Files">Section 22.3.3, “NDB Cluster Configuration Files”</a>). Using this
            option forces the management server to check its internal
            data store against the cluster configuration file and to
            reload the configuration if it finds that the configuration
            file does not match the cache. Existing configuration cache
            files are preserved, but not used.
          </p><p>
            This differs in two ways from the
            <a class="link" href="mysql-cluster.html#option_ndb_mgmd_initial"><code class="option">--initial</code></a> option. First,
            <code class="option">--initial</code> causes all cache files to be
            deleted. Second, <code class="option">--initial</code> forces the
            management server to re-read the global configuration file
            and construct a new cache.
          </p><p>
            If the management server cannot find a global configuration
            file, then the <code class="option">--reload</code> option is ignored.
          </p><p>
            When <code class="option">--reload</code> is used, the management
            server must be able to communicate with data nodes and any
            other management servers in the cluster before it attempts
            to read the global configuration file; otherwise, the
            management server fails to start. This can happen due to
            changes in the networking environment, such as new IP
            addresses for nodes or an altered firewall configuration. In
            such cases, you must use
            <a class="link" href="mysql-cluster.html#option_ndb_mgmd_initial"><code class="option">--initial</code></a> instead to force
            the exsiting cached configuration to be discarded and
            reloaded from the file. See
            <a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="22.5.5 Performing a Rolling Restart of an NDB Cluster">Section 22.5.5, “Performing a Rolling Restart of an NDB Cluster”</a>, for
            additional information.
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_remove"></a>
            <a class="indexterm" name="idm140091591201920"></a>

            <code class="option">--remove{=name]</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for remove"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--remove[=name]</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Platform Specific</strong></span></td>
<td>Windows</td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">ndb_mgmd</code></td>
</tr></tbody></table>
</div>
<p>
            Remove a management server process that has been installed
            as a Windows service, optionally specifying the name of the
            service to be removed. Applies only to Windows platforms.
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_verbose"></a>
            <a class="indexterm" name="idm140091591181248"></a>

            <a class="indexterm" name="idm140091591180192"></a>

            <code class="option">--verbose</code>, <code class="option">-v</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for verbose"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--verbose</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Remove a management server process that has been installed
            as a Windows service, optionally specifying the name of the
            service to be removed. Applies only to Windows platforms.
</p></li></ul>
</div>
<p>
        It is not strictly necessary to specify a connection string when
        starting the management server. However, if you are using more
        than one management server, a connection string should be
        provided and each node in the cluster should specify its node ID
        explicitly.
      </p><p>
        See <a class="xref" href="mysql-cluster.html#mysql-cluster-connection-strings" title="22.3.3.3 NDB Cluster Connection Strings">Section 22.3.3.3, “NDB Cluster Connection Strings”</a>, for
        information about using connection strings.
        <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon">Section 22.4.4, “<span class="command"><strong>ndb_mgmd</strong></span> — The NDB Cluster Management Server Daemon”</a>, describes
        other options for <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>.
      </p><p>
        The following files are created or used by
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> in its starting directory, and are
        placed in the <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datadir"><code class="literal">DataDir</code></a> as
        specified in the <code class="filename">config.ini</code> configuration
        file. In the list that follows,
        <em class="replaceable"><code>node_id</code></em> is the unique node
        identifier.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="indexterm" name="idm140091591153648"></a>

            <a class="indexterm" name="idm140091591152160"></a>

            <a class="indexterm" name="idm140091591151088"></a>

            <code class="filename">config.ini</code> is the configuration file
            for the cluster as a whole. This file is created by the user
            and read by the management server.
            <a class="xref" href="mysql-cluster.html#mysql-cluster-configuration" title="22.3 Configuration of NDB Cluster">Section 22.3, “Configuration of NDB Cluster”</a>, discusses how
            to set up this file.
          </p></li><li class="listitem"><p>
            <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_cluster.log</code>
            is the cluster events log file. Examples of such events
            include checkpoint startup and completion, node startup
            events, node failures, and levels of memory usage. A
            complete listing of cluster events with descriptions may be
            found in <a class="xref" href="mysql-cluster.html#mysql-cluster-management" title="22.5 Management of NDB Cluster">Section 22.5, “Management of NDB Cluster”</a>.
          </p><p>
            By default, when the size of the cluster log reaches one
            million bytes, the file is renamed to
            <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_cluster.log.<em class="replaceable"><code>seq_id</code></em></code>,
            where <em class="replaceable"><code>seq_id</code></em> is the sequence
            number of the cluster log file. (For example: If files with
            the sequence numbers 1, 2, and 3 already exist, the next log
            file is named using the number <code class="literal">4</code>.) You
            can change the size and number of files, and other
            characteristics of the cluster log, using the
            <a class="link" href="mysql-cluster.html#ndbparam-mgmd-logdestination"><code class="literal">LogDestination</code></a>
            configuration parameter.
          </p></li><li class="listitem"><p>
            <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_out.log</code>
            is the file used for <code class="literal">stdout</code> and
            <code class="literal">stderr</code> when running the management server
            as a daemon.
          </p></li><li class="listitem"><p>
            <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>.pid</code>
            is the process ID file used when running the management
            server as a daemon.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-mgm"></a>22.4.5 <span class="command"><strong>ndb_mgm</strong></span> — The NDB Cluster Management Client</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091591132960"></a><a class="indexterm" name="idm140091591132016"></a><a class="indexterm" name="idm140091591130656"></a><a class="indexterm" name="idm140091591129328"></a><a class="indexterm" name="idm140091591127936"></a><a class="indexterm" name="idm140091591126608"></a><a class="indexterm" name="idm140091591125248"></a><p>
        The <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> management client process is
        actually not needed to run the cluster. Its value lies in
        providing a set of commands for checking the cluster's status,
        starting backups, and performing other administrative functions.
        The management client accesses the management server using a C
        API. Advanced users can also employ this API for programming
        dedicated management processes to perform tasks similar to those
        performed by <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a>.
      </p><p>
        To start the management client, it is necessary to supply the
        host name and port number of the management server:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_mgm [<em class="replaceable"><code>host_name</code></em> [<em class="replaceable"><code>port_num</code></em>]]</code></strong>
</pre><p>
        For example:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_mgm ndb_mgmd.mysql.com 1186</code></strong>
</pre><p>
        The default host name and port number are
        <code class="literal">localhost</code> and 1186, respectively.
      </p><a class="indexterm" name="idm140091591114432"></a><a class="indexterm" name="idm140091591112944"></a><a class="indexterm" name="idm140091591111456"></a><a class="indexterm" name="idm140091591109952"></a><p>
        The following table includes options that are specific to the
        NDB Cluster management client program
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a>. Additional descriptions follow the
        table. For options common to most NDB Cluster programs
        (including <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a>), see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
</p>
<div class="table">
<a name="mysql-cluster-ndb_mgm-options-table"></a><p class="title"><b>Table 22.337 Command-line options for the ndb_mgm program</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_mgm_try-reconnect">--try-reconnect=#</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_mgm_try-reconnect">-t</a>
                </code>
              </p></td>
            <td>Set the number of times to retry a connection before giving up; synonym
              for --connect-retries</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_mgm_execute">--execute=name</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_mgm_execute">-e</a>
                </code>
              </p></td>
            <td>Execute command and exit</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_mgm_connect-retries"></a>
            <a class="indexterm" name="idm140091591081248"></a>

            <code class="option">--connect-retries=<em class="replaceable"><code>#</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for connect-retries"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--connect-retries=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Numeric</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">3</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            This option specifies the number of times following the
            first attempt to retry a connection before giving up (the
            client always tries the connection at least once). The
            length of time to wait per attempt is set using
            <a class="link" href="mysql-cluster.html#option_ndb_common_connect-retry-delay"><code class="option">--connect-retry-delay</code></a>.
          </p><p>
            This option is synonymous with the
            <a class="link" href="mysql-cluster.html#option_ndb_mgm_try-reconnect"><code class="option">--try-reconnect</code></a> option,
            which is now deprecated.
          </p><p>
            The default for this option this option differs from its
            default when used with other <code class="literal">NDB</code>
            programs. See
            <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>, for
            more information.
          </p></li><li class="listitem"><p><a name="option_ndb_mgm_execute"></a>
            <a class="indexterm" name="idm140091591052160"></a>

            <a class="indexterm" name="idm140091591051152"></a>

            <code class="option">--execute=<code class="literal">command</code></code>,
            <code class="option">-e <code class="literal">command</code></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for execute"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--execute=name</code></td>
</tr></tbody></table>
</div>
<p>
            This option can be used to send a command to the NDB Cluster
            management client from the system shell. For example, either
            of the following is equivalent to executing
            <a class="link" href="mysql-cluster.html#ndbclient-show"><code class="literal">SHOW</code></a> in the management
            client:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_mgm -e "SHOW"</code></strong>

shell&gt; <strong class="userinput"><code>ndb_mgm --execute="SHOW"</code></strong>
</pre><p>
            This is analogous to how the
            <a class="link" href="programs.html#option_mysql_execute"><code class="option">--execute</code></a> or
            <code class="option">-e</code> option works with the
            <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> command-line client. See
            <a class="xref" href="programs.html#command-line-options" title="4.2.2.1 Using Options on the Command Line">Section 4.2.2.1, “Using Options on the Command Line”</a>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              If the management client command to be passed using this
              option contains any space characters, then the command
              <span class="emphasis"><em>must</em></span> be enclosed in quotation marks.
              Either single or double quotation marks may be used. If
              the management client command contains no space
              characters, the quotation marks are optional.
</p>
</div>
</li><li class="listitem"><p><a name="option_ndb_mgm_try-reconnect"></a>
            <code class="option">--try-reconnect=<em class="replaceable"><code>number</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for try-reconnect"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--try-reconnect=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Deprecated</strong></span></td>
<td>Yes</td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Numeric</td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">12</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">3</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            If the connection to the management server is broken, the
            node tries to reconnect to it every 5 seconds until it
            succeeds. By using this option, it is possible to limit the
            number of attempts to <em class="replaceable"><code>number</code></em>
            before giving up and reporting an error instead.
          </p><p>
            This option is deprecated and subject to removal in a future
            release. Use
            <a class="link" href="mysql-cluster.html#option_ndb_mgm_connect-retries"><code class="option">--connect-retries</code></a>, instead.
</p></li></ul>
</div>
<p>
        Additional information about using <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a>
        can be found in
        <a class="xref" href="mysql-cluster.html#mysql-cluster-mgm-client-commands" title="22.5.2 Commands in the NDB Cluster Management Client">Section 22.5.2, “Commands in the NDB Cluster Management Client”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-blob-tool"></a>22.4.6 <span class="command"><strong>ndb_blob_tool</strong></span> — Check and Repair BLOB and TEXT columns of NDB Cluster
Tables</h3>
</div>
</div>
</div>
<a class="indexterm" name="idm140091590990816"></a><p>
        This tool can be used to check for and remove orphaned BLOB
        column parts from <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables, as
        well as to generate a file listing any orphaned parts. It is
        sometimes useful in diagnosing and repairing corrupted or
        damaged <code class="literal">NDB</code> tables containing
        <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> or
        <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> columns.
      </p><p>
        The basic syntax for <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-blob-tool" title="22.4.6 ndb_blob_tool — Check and Repair BLOB and TEXT columns of NDB Cluster Tables"><span class="command"><strong>ndb_blob_tool</strong></span></a> is shown
        here:
      </p><pre data-lang="simple" class="programlisting">
ndb_blob_tool [<em class="replaceable"><code>options</code></em>] <em class="replaceable"><code>table</code></em> [<em class="replaceable"><code>column</code></em>, ...]
</pre><p>
        Unless you use the <a class="link" href="mysql-cluster.html#option_ndb_common_help"><code class="option">--help</code></a>
        option, you must specify an action to be performed by including
        one or more of the options
        <a class="link" href="mysql-cluster.html#option_ndb_blob_tool_check-orphans"><code class="option">--check-orphans</code></a>,
        <a class="link" href="mysql-cluster.html#option_ndb_blob_tool_delete-orphans"><code class="option">--delete-orphans</code></a>, or
        <a class="link" href="mysql-cluster.html#option_ndb_blob_tool_dump-file"><code class="option">--dump-file</code></a>. These options
        cause <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-blob-tool" title="22.4.6 ndb_blob_tool — Check and Repair BLOB and TEXT columns of NDB Cluster Tables"><span class="command"><strong>ndb_blob_tool</strong></span></a> to check for orphaned
        BLOB parts, remove any orphaned BLOB parts, and generate a dump
        file listing orphaned BLOB parts, respectively, and are
        described in more detail later in this section.
      </p><p>
        You must also specify the name of a table when invoking
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-blob-tool" title="22.4.6 ndb_blob_tool — Check and Repair BLOB and TEXT columns of NDB Cluster Tables"><span class="command"><strong>ndb_blob_tool</strong></span></a>. In addition, you can
        optionally follow the table name with the (comma-separated)
        names of one or more <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> or
        <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> columns from that table. If
        no columns are listed, the tool works on all of the table's
        <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> and
        <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> columns. If you need to
        specify a database, use the
        <a class="link" href="mysql-cluster.html#option_ndb_blob_tool_database"><code class="option">--database</code></a>
        (<code class="option">-d</code>) option.
      </p><p>
        The <a class="link" href="mysql-cluster.html#option_ndb_blob_tool_verbose"><code class="option">--verbose</code></a> option
        provides additional information in the output about the
        tool's progress.
      </p><p>
        The following table includes options that are specific to
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-blob-tool" title="22.4.6 ndb_blob_tool — Check and Repair BLOB and TEXT columns of NDB Cluster Tables"><span class="command"><strong>ndb_blob_tool</strong></span></a>. Additional descriptions follow
        the table. For options common to most NDB Cluster programs
        (including <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-blob-tool" title="22.4.6 ndb_blob_tool — Check and Repair BLOB and TEXT columns of NDB Cluster Tables"><span class="command"><strong>ndb_blob_tool</strong></span></a>), see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
</p>
<div class="table">
<a name="mysql-cluster-ndb_blob_tool-options-table"></a><p class="title"><b>Table 22.338 Command-line options for the ndb_blob_tool program</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_blob_tool_check-orphans">--check-orphans</a>
                </code>
              </p></td>
            <td>Check for orphan blob parts</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_blob_tool_database">--database=db_name</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_blob_tool_database">-d</a>
                </code>
              </p></td>
            <td>Database to find the table in.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_blob_tool_delete-orphans">--delete-orphans</a>
                </code>
              </p></td>
            <td>Delete orphan blob parts</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_blob_tool_dump-file">--dump-file=file</a>
                </code>
              </p></td>
            <td>Write orphan keys to specified file</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_blob_tool_verbose">--verbose</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_blob_tool_verbose">-v</a>
                </code>
              </p></td>
            <td>Verbose output</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_blob_tool_check-orphans"></a>
            <a class="indexterm" name="idm140091590921120"></a>

            <a class="indexterm" name="idm140091590919632"></a>

            <code class="option">--check-orphans</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for check-orphans"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--check-orphans</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Check for orphaned BLOB parts in NDB Cluster tables.
          </p></li><li class="listitem"><p><a name="option_ndb_blob_tool_database"></a>
            <a class="indexterm" name="idm140091590901296"></a>

            <a class="indexterm" name="idm140091590899808"></a>

            <code class="option">--database=<em class="replaceable"><code>db_name</code></em></code>,
            <code class="option">-d</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for database"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--database=db_name</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">[none]</code></td>
</tr></tbody></table>
</div>
<p>
            Specify the database to find the table in.
          </p></li><li class="listitem"><p><a name="option_ndb_blob_tool_delete-orphans"></a>
            <a class="indexterm" name="idm140091590880800"></a>

            <a class="indexterm" name="idm140091590879312"></a>

            <code class="option">--delete-orphans</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for delete-orphans"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--delete-orphans</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Remove orphaned BLOB parts from NDB Cluster tables.
          </p></li><li class="listitem"><p><a name="option_ndb_blob_tool_dump-file"></a>
            <a class="indexterm" name="idm140091590860912"></a>

            <a class="indexterm" name="idm140091590859424"></a>

            <code class="option">--dump-file=<em class="replaceable"><code>file</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for dump-file"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--dump-file=file</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>File name</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">[none]</code></td>
</tr></tbody></table>
</div>
<p>
            Writes a list of orphaned BLOB column parts to
            <em class="replaceable"><code>file</code></em>. The information written to
            the file includes the table key and BLOB part number for
            each orphaned BLOB part.
          </p></li><li class="listitem"><p><a name="option_ndb_blob_tool_verbose"></a>
            <a class="indexterm" name="idm140091590840224"></a>

            <a class="indexterm" name="idm140091590838736"></a>

            <code class="option">--verbose</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for verbose"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--verbose</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Provide extra information in the tool's output
            regarding its progress.
</p></li></ul>
</div>
<h4><a name="idm140091590821168"></a>Example</h4>
<p>
        First we create an <code class="literal">NDB</code> table in the
        <code class="literal">test</code> database, using the
        <a class="link" href="sql-syntax.html#create-table" title="13.1.20 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statement shown
        here:
      </p><pre data-lang="sql" class="programlisting">
USE test;

CREATE TABLE btest (
    c0 BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    c1 TEXT,
    c2 BLOB
)   ENGINE=NDB;
</pre><p>
        Then we insert a few rows into this table, using a series of
        statements similar to this one:
      </p><pre data-lang="sql" class="programlisting">
INSERT INTO btest VALUES (NULL, 'x', REPEAT('x', 1000));
</pre><p>
        When run with
        <a class="link" href="mysql-cluster.html#option_ndb_blob_tool_check-orphans"><code class="option">--check-orphans</code></a> against
        this table, <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-blob-tool" title="22.4.6 ndb_blob_tool — Check and Repair BLOB and TEXT columns of NDB Cluster Tables"><span class="command"><strong>ndb_blob_tool</strong></span></a> generates the
        following output:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_blob_tool --check-orphans --verbose -d test btest</code></strong>
connected
processing 2 blobs
processing blob #0 c1 NDB$BLOB_19_1
NDB$BLOB_19_1: nextResult: res=1
total parts: 0
orphan parts: 0
processing blob #1 c2 NDB$BLOB_19_2
NDB$BLOB_19_2: nextResult: res=0
NDB$BLOB_19_2: nextResult: res=0
NDB$BLOB_19_2: nextResult: res=0
NDB$BLOB_19_2: nextResult: res=0
NDB$BLOB_19_2: nextResult: res=0
NDB$BLOB_19_2: nextResult: res=0
NDB$BLOB_19_2: nextResult: res=0
NDB$BLOB_19_2: nextResult: res=0
NDB$BLOB_19_2: nextResult: res=0
NDB$BLOB_19_2: nextResult: res=0
NDB$BLOB_19_2: nextResult: res=1
total parts: 10
orphan parts: 0
disconnected

NDBT_ProgramExit: 0 - OK
</pre><p>
        The tool reports that there are no <code class="literal">NDB</code> BLOB
        column parts associated with column <code class="literal">c1</code>, even
        though <code class="literal">c1</code> is a
        <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> column. This is due to the
        fact that, in an <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table, only
        the first 256 bytes of a <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> or
        <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> column value are stored
        inline, and only the excess, if any, is stored separately; thus,
        if there are no values using more than 256 bytes in a given
        column of one of these types, no <code class="literal">BLOB</code> column
        parts are created by <code class="literal">NDB</code> for this column. See
        <a class="xref" href="data-types.html#storage-requirements" title="11.8 Data Type Storage Requirements">Section 11.8, “Data Type Storage Requirements”</a>, for more information.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-config"></a>22.4.7 <span class="command"><strong>ndb_config</strong></span> — Extract NDB Cluster Configuration Information</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091590798208"></a><p>
        This tool extracts current configuration information for data
        nodes, SQL nodes, and API nodes from one of a number of sources:
        an NDB Cluster management node, or its
        <code class="filename">config.ini</code> or <code class="filename">my.cnf</code>
        file. By default, the management node is the source for the
        configuration data; to override the default, execute ndb_config
        with the <a class="link" href="mysql-cluster.html#option_ndb_config_config-file"><code class="option">--config-file</code></a> or
        <a class="link" href="mysql-cluster.html#option_ndb_config_mycnf"><code class="option">--mycnf</code></a> option. It is also
        possible to use a data node as the source by specifying its node
        ID with
        <a class="link" href="mysql-cluster.html#option_ndb_config_config_from_node"><code class="option">--config_from_node=<em class="replaceable"><code>node_id</code></em></code></a>.
      </p><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-config" title="22.4.7 ndb_config — Extract NDB Cluster Configuration Information"><span class="command"><strong>ndb_config</strong></span></a> can also provide an offline dump
        of all configuration parameters which can be used, along with
        their default, maximum, and minimum values and other
        information. The dump can be produced in either text or XML
        format; for more information, see the discussion of the
        <a class="link" href="mysql-cluster.html#option_ndb_config_configinfo"><code class="option">--configinfo</code></a> and
        <a class="link" href="mysql-cluster.html#option_ndb_config_xml"><code class="option">--xml</code></a> options later in this
        section).
      </p><p>
        You can filter the results by section (<code class="literal">DB</code>,
        <code class="literal">SYSTEM</code>, or <code class="literal">CONNECTIONS</code>)
        using one of the options
        <a class="link" href="mysql-cluster.html#option_ndb_config_nodes"><code class="option">--nodes</code></a>,
        <a class="link" href="mysql-cluster.html#option_ndb_config_system"><code class="option">--system</code></a>, or
        <a class="link" href="mysql-cluster.html#option_ndb_config_connections"><code class="option">--connections</code></a>.
      </p><p>
        The following table includes options that are specific to
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-config" title="22.4.7 ndb_config — Extract NDB Cluster Configuration Information"><span class="command"><strong>ndb_config</strong></span></a>. Additional descriptions follow
        the table. For options common to most NDB Cluster programs
        (including <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-config" title="22.4.7 ndb_config — Extract NDB Cluster Configuration Information"><span class="command"><strong>ndb_config</strong></span></a>), see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
</p>
<div class="table">
<a name="mysql-cluster-ndb_config-options-table"></a><p class="title"><b>Table 22.339 Command-line options for the ndb_config program</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_config_config-file">--config-file=file_name</a>
                </code>
              </p></td>
            <td>Set the path to config.ini file</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_config_config_from_node">--config_from_node=#</a>
                </code>
              </p></td>
            <td>Obtain configuration data from the node having this ID (must be a data
              node).</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_config_configinfo">--configinfo</a>
                </code>
              </p></td>
            <td>Dumps information about all NDB configuration parameters in text format
              with default, maximum, and minimum values. Use with --xml
              to obtain XML output.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_config_connections">--connections</a>
                </code>
              </p></td>
            <td>Print connections information ([tcp], [tcp default], [sci], [sci
              default], [shm], or [shm default] sections of cluster
              configuration file) only. Cannot be used with --system or
              --nodes.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_config_diff-default">--diff-default</a>
                </code>
              </p></td>
            <td>Print only configuration parameters that have non-default values</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_config_fields">--fields=string</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_config_fields">-f</a>
                </code>
              </p></td>
            <td>Field separator</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_config_host">--host=name</a>
                </code>
              </p></td>
            <td>Specify host</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_config_mycnf">--mycnf</a>
                </code>
              </p></td>
            <td>Read configuration data from my.cnf file</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_config_nodeid">--nodeid</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_config_nodeid">--id</a>
                </code>
              </p></td>
            <td>Get configuration of node with this ID</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_config_nodes">--nodes</a>
                </code>
              </p></td>
            <td>Print node information ([ndbd] or [ndbd default] section of cluster
              configuration file) only. Cannot be used with --system or
              --connections.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_common_ndb-connectstring">-c</a>
                </code>
              </p></td>
            <td>Short form for --ndb-connectstring</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_config_query">--query=string</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_config_query">-q</a>
                </code>
              </p></td>
            <td>One or more query options (attributes)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_config_query-all">--query-all</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_config_query-all">-a</a>
                </code>
              </p></td>
            <td>Dumps all parameters and values to a single comma-delimited string.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_config_rows">--rows=string</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_config_rows">-r</a>
                </code>
              </p></td>
            <td>Row separator</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_config_system">--system</a>
                </code>
              </p></td>
            <td>Print SYSTEM section information only (see ndb_config --configinfo
              output). Cannot be used with --nodes or --connections.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_config_type">--type=name</a>
                </code>
              </p></td>
            <td>Specify node type</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_config_xml">--configinfo
                --xml</a> </code>
              </p></td>
            <td>Use --xml with --configinfo to obtain a dump of all NDB configuration
              parameters in XML format with default, maximum, and
              minimum values.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_config_configinfo"></a>
            <a class="indexterm" name="idm140091590665904"></a>

            <a class="indexterm" name="idm140091590664448"></a>

            <code class="option">--configinfo</code>
          </p><p>
            The <code class="option">--configinfo</code> option causes
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-config" title="22.4.7 ndb_config — Extract NDB Cluster Configuration Information"><span class="command"><strong>ndb_config</strong></span></a> to dump a list of each NDB
            Cluster configuration parameter supported by the NDB Cluster
            distribution of which <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-config" title="22.4.7 ndb_config — Extract NDB Cluster Configuration Information"><span class="command"><strong>ndb_config</strong></span></a> is a
            part, including the following information:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                A brief description of each parameter's purpose,
                effects, and usage
              </p></li><li class="listitem"><p>
                The section of the <code class="filename">config.ini</code> file
                where the parameter may be used
              </p></li><li class="listitem"><p>
                The parameter's data type or unit of measurement
              </p></li><li class="listitem"><p>
                Where applicable, the parameter's default, minimum,
                and maximum values
              </p></li><li class="listitem"><p>
                NDB Cluster release version and build information
</p></li></ul>
</div>
<p>
            By default, this output is in text format. Part of this
            output is shown here:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_config --configinfo</code></strong>

****** SYSTEM ******

Name (String)
Name of system (NDB Cluster)
MANDATORY

PrimaryMGMNode (Non-negative Integer)
Node id of Primary ndb_mgmd(MGM) node
Default: 0 (Min: 0, Max: 4294967039)

ConfigGenerationNumber (Non-negative Integer)
Configuration generation number
Default: 0 (Min: 0, Max: 4294967039)

****** DB ******

MaxNoOfSubscriptions (Non-negative Integer)
Max no of subscriptions (default 0 == MaxNoOfTables)
Default: 0 (Min: 0, Max: 4294967039)

MaxNoOfSubscribers (Non-negative Integer)
Max no of subscribers (default 0 == 2 * MaxNoOfTables)
Default: 0 (Min: 0, Max: 4294967039)

…
</pre><p>
            Use this option together with the
            <a class="link" href="mysql-cluster.html#option_ndb_config_xml"><code class="option">--xml</code></a> option to obtain
            output in XML format.
          </p></li><li class="listitem"><p><a name="option_ndb_config_config-file"></a>
            <a class="indexterm" name="idm140091590647472"></a>

            <a class="indexterm" name="idm140091590645984"></a>

            <code class="option">--config-file=<em class="replaceable"><code>path-to-file</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for config-file"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--config-file=file_name</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>File name</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            Gives the path to the management server's configuration file
            (<code class="filename">config.ini</code>). This may be a relative or
            absolute path. If the management node resides on a different
            host from the one on which <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-config" title="22.4.7 ndb_config — Extract NDB Cluster Configuration Information"><span class="command"><strong>ndb_config</strong></span></a> is
            invoked, then an absolute path must be used.
          </p></li><li class="listitem"><p><a name="option_ndb_config_config_from_node"></a>
            <a class="indexterm" name="idm140091590625296"></a>

            <a class="indexterm" name="idm140091590623808"></a>

            <code class="option">--config_from_node=#</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for config_from_node"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--config-from-node=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Numeric</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">none</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">48</code></td>
</tr></tbody></table>
</div>
<p>
            Obtain the cluster's configuration data from the data
            node that has this ID.
          </p><p>
            If the node having this ID is not a data node,
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-config" title="22.4.7 ndb_config — Extract NDB Cluster Configuration Information"><span class="command"><strong>ndb_config</strong></span></a> fails with an error. (To
            obtain configuration data from the management node instead,
            simply omit this option.)
          </p></li><li class="listitem"><p><a name="option_ndb_config_connections"></a>
            <a class="indexterm" name="idm140091590597456"></a>

            <a class="indexterm" name="idm140091590595968"></a>

            <code class="option">--connections</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for connections"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--connections</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Tells <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-config" title="22.4.7 ndb_config — Extract NDB Cluster Configuration Information"><span class="command"><strong>ndb_config</strong></span></a> to print
            <code class="literal">CONNECTIONS</code> information only—that
            is, information about parameters found in the
            <code class="literal">[tcp]</code>, <code class="literal">[tcp default]</code>,
            <code class="literal">[sci]</code>, <code class="literal">[sci default]</code>,
            <code class="literal">[shm]</code>, or <code class="literal">[shm
            default]</code> sections of the cluster configuration
            file (see <a class="xref" href="mysql-cluster.html#mysql-cluster-tcp-definition" title="22.3.3.10 NDB Cluster TCP/IP Connections">Section 22.3.3.10, “NDB Cluster TCP/IP Connections”</a>,
            <a class="xref" href="mysql-cluster.html#mysql-cluster-sci-definition" title="22.3.3.13 SCI Transport Connections in NDB Cluster">Section 22.3.3.13, “SCI Transport Connections in NDB Cluster”</a>, and
            <a class="xref" href="mysql-cluster.html#mysql-cluster-shm-definition" title="22.3.3.12 NDB Cluster Shared-Memory Connections">Section 22.3.3.12, “NDB Cluster Shared-Memory Connections”</a>, for more
            information).
          </p><p>
            This option is mutually exclusive with
            <a class="link" href="mysql-cluster.html#option_ndb_config_nodes"><code class="option">--nodes</code></a> and
            <a class="link" href="mysql-cluster.html#option_ndb_config_system"><code class="option">--system</code></a>; only one of
            these 3 options can be used.
          </p></li><li class="listitem"><p><a name="option_ndb_config_diff-default"></a>
            <a class="indexterm" name="idm140091590566608"></a>

            <a class="indexterm" name="idm140091590565120"></a>

            <code class="option">--diff-default</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for diff-default"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--diff-default</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Print only configuration parameters that have non-default
            values.
          </p></li><li class="listitem"><p><a name="option_ndb_config_fields"></a>
            <a class="indexterm" name="idm140091590546704"></a>

            <a class="indexterm" name="idm140091590545216"></a>

            <code class="option">--fields=<em class="replaceable"><code>delimiter</code></em></code>,
            <code class="option">-f</code> <em class="replaceable"><code>delimiter</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for fields"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--fields=string</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            Specifies a <em class="replaceable"><code>delimiter</code></em> string used
            to separate the fields in the result. The default is
            <code class="literal">,</code> (the comma character).
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              If the <em class="replaceable"><code>delimiter</code></em> contains
              spaces or escapes (such as <code class="literal">\n</code> for the
              linefeed character), then it must be quoted.
</p>
</div>
</li><li class="listitem"><p><a name="option_ndb_config_host"></a>
            <a class="indexterm" name="idm140091590522704"></a>

            <a class="indexterm" name="idm140091590521248"></a>

            <code class="option">--host=<em class="replaceable"><code>hostname</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for host"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--host=name</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            Specifies the host name of the node for which configuration
            information is to be obtained.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              While the hostname <code class="literal">localhost</code> usually
              resolves to the IP address <code class="literal">127.0.0.1</code>,
              this may not necessarily be true for all operating
              platforms and configurations. This means that it is
              possible, when <code class="literal">localhost</code> is used in
              <code class="filename">config.ini</code>, for <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-config" title="22.4.7 ndb_config — Extract NDB Cluster Configuration Information"><span class="command"><strong>ndb_config
              <code class="option">--host=localhost</code></strong></span></a> to fail if
              <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-config" title="22.4.7 ndb_config — Extract NDB Cluster Configuration Information"><span class="command"><strong>ndb_config</strong></span></a> is run on a different host
              where <code class="literal">localhost</code> resolves to a different
              address (for example, on some versions of SUSE Linux, this
              is <code class="literal">127.0.0.2</code>). In general, for best
              results, you should use numeric IP addresses for all NDB
              Cluster configuration values relating to hosts, or verify
              that all NDB Cluster hosts handle
              <code class="literal">localhost</code> in the same fashion.
</p>
</div>
</li><li class="listitem"><p><a name="option_ndb_config_mycnf"></a>
            <a class="indexterm" name="idm140091590493440"></a>

            <a class="indexterm" name="idm140091590491984"></a>

            <code class="option">--mycnf</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for mycnf"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--mycnf</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Read configuration data from the <code class="filename">my.cnf</code>
            file.
          </p></li><li class="listitem"><p><a name="option_ndb_config_ndb-connectstring"></a>
            <a class="indexterm" name="idm140091590472848"></a>

            <a class="indexterm" name="idm140091590471392"></a>

            <code class="option">--ndb-connectstring=<em class="replaceable"><code>connection_string</code></em></code>,
            <code class="option">-c
            <em class="replaceable"><code>connection_string</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for ndb-connectstring"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><p class="valid-value"><code class="literal">--ndb-connectstring=connectstring</code></p><p class="valid-value"><code class="literal">--connect-string=connectstring</code></p></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">localhost:1186</code></td>
</tr></tbody></table>
</div>
<p>
            Specifies the connection string to use in connecting to the
            management server. The format for the connection string is
            the same as described in
            <a class="xref" href="mysql-cluster.html#mysql-cluster-connection-strings" title="22.3.3.3 NDB Cluster Connection Strings">Section 22.3.3.3, “NDB Cluster Connection Strings”</a>, and
            defaults to <code class="literal">localhost:1186</code>.
          </p></li><li class="listitem"><p><a name="option_ndb_config_nodeid"></a>
            <a class="indexterm" name="idm140091590449024"></a>

            <a class="indexterm" name="idm140091590447536"></a>

            <code class="option">--nodeid=<em class="replaceable"><code>node_id</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for ndb-nodeid"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--ndb-nodeid=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Numeric</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr></tbody></table>
</div>
<p>
            Specify the node ID of the node for which configuration
            information is to be obtained.
          </p></li><li class="listitem"><p><a name="option_ndb_config_nodes"></a>
            <a class="indexterm" name="idm140091590428944"></a>

            <a class="indexterm" name="idm140091590427488"></a>

            <code class="option">--nodes</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for nodes"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--nodes</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Tells <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-config" title="22.4.7 ndb_config — Extract NDB Cluster Configuration Information"><span class="command"><strong>ndb_config</strong></span></a> to print information
            relating only to parameters defined in an
            <code class="literal">[ndbd]</code> or <code class="literal">[ndbd
            default]</code> section of the cluster configuration file
            (see <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition" title="22.3.3.6 Defining NDB Cluster Data Nodes">Section 22.3.3.6, “Defining NDB Cluster Data Nodes”</a>).
          </p><p>
            This option is mutually exclusive with
            <a class="link" href="mysql-cluster.html#option_ndb_config_connections"><code class="option">--connections</code></a> and
            <a class="link" href="mysql-cluster.html#option_ndb_config_system"><code class="option">--system</code></a>; only one of
            these 3 options can be used.
          </p></li><li class="listitem"><p><a name="option_ndb_config_query"></a>
            <a class="indexterm" name="idm140091590403072"></a>

            <a class="indexterm" name="idm140091590401616"></a>

            <code class="option">--query=<em class="replaceable"><code>query-options</code></em></code>,
            <code class="option">-q</code> <em class="replaceable"><code>query-options</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for query"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--query=string</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            This is a comma-delimited list of
            <span class="firstterm">query
            options</span>—that is, a list of one or more node
            attributes to be returned. These include
            <code class="literal">nodeid</code> (node ID), type (node
            type—that is, <code class="literal">ndbd</code>,
            <code class="literal">mysqld</code>, or <code class="literal">ndb_mgmd</code>),
            and any configuration parameters whose values are to be
            obtained.
          </p><p>
            For example,

            <a class="indexterm" name="idm140091590379264"></a>

            <a class="indexterm" name="idm140091590377776"></a>

            <code class="option">--query=nodeid,type,datamemory,datadir</code>
            returns the node ID, node type,
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a>, and
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datadir"><code class="literal">DataDir</code></a> for each
            node.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              If a given parameter is not applicable to a certain type
              of node, than an empty string is returned for the
              corresponding value. See the examples later in this
              section for more information.
</p>
</div>
</li><li class="listitem"><p><a name="option_ndb_config_query-all"></a>
            <a class="indexterm" name="idm140091590371008"></a>

            <a class="indexterm" name="idm140091590369520"></a>

            <code class="option">--query-all</code>, <code class="option">-a</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for query-all"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--query-all</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            Returns a comma-delimited list of all query options (node
            attributes; note that this list is a single string.
          </p></li><li class="listitem"><p><a name="option_ndb_config_rows"></a>
            <a class="indexterm" name="idm140091590350928"></a>

            <a class="indexterm" name="idm140091590349472"></a>

            <code class="option">--rows=<em class="replaceable"><code>separator</code></em></code>,
            <code class="option">-r</code> <em class="replaceable"><code>separator</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for rows"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--rows=string</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            Specifies a <em class="replaceable"><code>separator</code></em> string used
            to separate the rows in the result. The default is a space
            character.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              If the <em class="replaceable"><code>separator</code></em> contains
              spaces or escapes (such as <code class="literal">\n</code> for the
              linefeed character), then it must be quoted.
</p>
</div>
</li><li class="listitem"><p><a name="option_ndb_config_system"></a>
            <a class="indexterm" name="idm140091590327616"></a>

            <a class="indexterm" name="idm140091590326128"></a>

            <code class="option">--system</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for system"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--system</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Tells <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-config" title="22.4.7 ndb_config — Extract NDB Cluster Configuration Information"><span class="command"><strong>ndb_config</strong></span></a> to print
            <code class="literal">SYSTEM</code> information only. This consists of
            system variables that cannot be changed at run time; thus,
            there is no corresponding section of the cluster
            configuration file for them. They can be seen (prefixed with
            <code class="literal">****** SYSTEM ******</code>) in the output of
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-config" title="22.4.7 ndb_config — Extract NDB Cluster Configuration Information"><span class="command"><strong>ndb_config</strong></span></a>
            <a class="link" href="mysql-cluster.html#option_ndb_config_configinfo"><code class="option">--configinfo</code></a>.
          </p><p>
            This option is mutually exclusive with
            <a class="link" href="mysql-cluster.html#option_ndb_config_nodes"><code class="option">--nodes</code></a> and
            <a class="link" href="mysql-cluster.html#option_ndb_config_connections"><code class="option">--connections</code></a>; only one
            of these 3 options can be used.
          </p></li><li class="listitem"><p><a name="option_ndb_config_type"></a>
            <a class="indexterm" name="idm140091590300224"></a>

            <a class="indexterm" name="idm140091590298768"></a>

            <code class="option">--type=<em class="replaceable"><code>node_type</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for type"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--type=name</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Enumeration</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">[none]</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Valid Values</strong></span></td>
<td><p class="valid-value"><code class="literal">ndbd</code></p><p class="valid-value"><code class="literal">mysqld</code></p><p class="valid-value"><code class="literal">ndb_mgmd</code></p></td>
</tr></tbody></table>
</div>
<p>
            Filters results so that only configuration values applying
            to nodes of the specified
            <em class="replaceable"><code>node_type</code></em>
            (<code class="literal">ndbd</code>, <code class="literal">mysqld</code>, or
            <code class="literal">ndb_mgmd</code>) are returned.
          </p></li><li class="listitem"><p><a name="option_ndb_config_usage"></a>
            <a class="indexterm" name="idm140091590272112"></a>

            <a class="indexterm" name="idm140091590270656"></a>

            <code class="option">--usage</code>, <code class="option">--help</code>, or
            <code class="option">-?</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for help"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><p class="valid-value"><code class="literal">--help</code></p><p class="valid-value"><code class="literal">--usage</code></p></td>
</tr></tbody></table>
</div>
<p>
            Causes <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-config" title="22.4.7 ndb_config — Extract NDB Cluster Configuration Information"><span class="command"><strong>ndb_config</strong></span></a> to print a list of
            available options, and then exit.
          </p></li><li class="listitem"><p><a name="option_ndb_config_version"></a>
            <a class="indexterm" name="idm140091590254496"></a>

            <a class="indexterm" name="idm140091590253008"></a>

            <code class="option">--version</code>, <code class="option">-V</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for version"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--version</code></td>
</tr></tbody></table>
</div>
<p>
            Causes <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-config" title="22.4.7 ndb_config — Extract NDB Cluster Configuration Information"><span class="command"><strong>ndb_config</strong></span></a> to print a version
            information string, and then exit.
          </p></li><li class="listitem"><p><a name="option_ndb_config_xml"></a>
            <a class="indexterm" name="idm140091590238816"></a>

            <a class="indexterm" name="idm140091590237360"></a>

            <code class="option">--configinfo</code> <code class="option">--xml</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for xml"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--configinfo --xml</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">false</code></td>
</tr></tbody></table>
</div>
<p>
            Cause <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-config" title="22.4.7 ndb_config — Extract NDB Cluster Configuration Information"><span class="command"><strong>ndb_config</strong></span></a>
            <a class="link" href="mysql-cluster.html#option_ndb_config_configinfo"><code class="option">--configinfo</code></a> to provide
            output as XML by adding this option. A portion of such
            output is shown in this example:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_config --configinfo --xml</code></strong>

&lt;configvariables protocolversion="1" ndbversionstring="5.7.26-ndb-7.5.15"
                    ndbversion="460032" ndbversionmajor="7" ndbversionminor="5"
                    ndbversionbuild="0"&gt;
  &lt;section name="SYSTEM"&gt;
    &lt;param name="Name" comment="Name of system (NDB Cluster)" type="string"
              mandatory="true"/&gt;
    &lt;param name="PrimaryMGMNode" comment="Node id of Primary ndb_mgmd(MGM) node"
              type="unsigned" default="0" min="0" max="4294967039"/&gt;
    &lt;param name="ConfigGenerationNumber" comment="Configuration generation number"
              type="unsigned" default="0" min="0" max="4294967039"/&gt;
  &lt;/section&gt;
  &lt;section name="MYSQLD" primarykeys="NodeId"&gt;
    &lt;param name="wan" comment="Use WAN TCP setting as default" type="bool"
              default="false"/&gt;
    &lt;param name="HostName" comment="Name of computer for this node"
              type="string" default=""/&gt;
    &lt;param name="Id" comment="NodeId" type="unsigned" mandatory="true"
              min="1" max="255" deprecated="true"/&gt;
    &lt;param name="NodeId" comment="Number identifying application node (mysqld(API))"
              type="unsigned" mandatory="true" min="1" max="255"/&gt;
    &lt;param name="ExecuteOnComputer" comment="HostName" type="string"
              deprecated="true"/&gt;

    …

  &lt;/section&gt;

  …

&lt;/configvariables&gt;
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              Normally, the XML output produced by
              <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-config" title="22.4.7 ndb_config — Extract NDB Cluster Configuration Information"><span class="command"><strong>ndb_config</strong></span></a>
              <code class="option">--configinfo</code> <code class="option">--xml</code> is
              formatted using one line per element; we have added extra
              whitespace in the previous example, as well as the next
              one, for reasons of legibility. This should not make any
              difference to applications using this output, since most
              XML processors either ignore nonessential whitespace as a
              matter of course, or can be instructed to do so.
</p>
</div>
<p>
            The XML output also indicates when changing a given
            parameter requires that data nodes be restarted using the
            <a class="link" href="mysql-cluster.html#option_ndbd_initial"><code class="option">--initial</code></a> option. This is shown
            by the presence of an <code class="literal">initial="true"</code>
            attribute in the corresponding
            <code class="literal">&lt;param&gt;</code> element. In addition, the
            restart type (<code class="literal">system</code> or
            <code class="literal">node</code>) is also shown; if a given parameter
            requires a system restart, this is indicated by the presence
            of a <code class="literal">restart="system"</code> attribute in the
            corresponding <code class="literal">&lt;param&gt;</code> element. For
            example, changing the value set for the
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskless"><code class="literal">Diskless</code></a> parameter
            requires a system initial restart, as shown here (with the
            <code class="literal">restart</code> and <code class="literal">initial</code>
            attributes highlighted for visibility):
          </p><pre data-lang="xml" class="programlisting">
&lt;param name="Diskless" comment="Run wo/ disk" type="bool" default="false"
          <span class="emphasis"><em>restart="system" initial="true"</em></span>/&gt;
</pre><p>
            Currently, no <code class="literal">initial</code> attribute is
            included in the XML output for
            <code class="literal">&lt;param&gt;</code> elements corresponding to
            parameters which do not require initial restarts; in other
            words, <code class="literal">initial="false"</code> is the default,
            and the value <code class="literal">false</code> should be assumed if
            the attribute is not present. Similarly, the default restart
            type is <code class="literal">node</code> (that is, an online or
            <span class="quote">“<span class="quote">rolling</span>”</span> restart of the cluster), but the
            <code class="literal">restart</code> attribute is included only if the
            restart type is <code class="literal">system</code> (meaning that all
            cluster nodes must be shut down at the same time, then
            restarted).
          </p><p>
            Deprecated parameters are indicated in the XML output by the
            <code class="literal">deprecated</code> attribute, as shown here:
          </p><pre data-lang="xml" class="programlisting">
&lt;param name="NoOfDiskPagesToDiskAfterRestartACC" comment="DiskCheckpointSpeed"
       type="unsigned" default="20" min="1" max="4294967039" <span class="emphasis"><em>deprecated="true"</em></span>/&gt;
</pre><p>
            In such cases, the <code class="literal">comment</code> refers to one
            or more parameters that supersede the deprecated parameter.
            Similarly to <code class="literal">initial</code>, the
            <code class="literal">deprecated</code> attribute is indicated only
            when the parameter is deprecated, with
            <code class="literal">deprecated="true"</code>, and does not appear at
            all for parameters which are not deprecated. (Bug #21127135)
          </p><p>
            Beginning with NDB 7.5.0, parameters that are required are
            indicated with <code class="literal">mandatory="true"</code>, as shown
            here:
          </p><pre data-lang="xml" class="programlisting">
&lt;param name="NodeId"
          comment="Number identifying application node (mysqld(API))"
          type="unsigned" <span class="emphasis"><em>mandatory="true"</em></span> min="1" max="255"/&gt;
</pre><p>
            In much the same way that the <code class="literal">initial</code> or
            <code class="literal">deprecated</code> attribute is displayed only
            for a parameter that requires an intial restart or that is
            deprecated, the <code class="literal">mandatory</code> attribute is
            included only if the given parameter is actually required.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              The <code class="option">--xml</code> option can be used only with
              the <code class="option">--configinfo</code> option. Using
              <code class="option">--xml</code> without
              <code class="option">--configinfo</code> fails with an error.
</p>
</div>
<p>
            Unlike the options used with this program to obtain current
            configuration data, <code class="option">--configinfo</code> and
            <code class="option">--xml</code> use information obtained from the NDB
            Cluster sources when <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-config" title="22.4.7 ndb_config — Extract NDB Cluster Configuration Information"><span class="command"><strong>ndb_config</strong></span></a> was
            compiled. For this reason, no connection to a running NDB
            Cluster or access to a <code class="filename">config.ini</code> or
            <code class="filename">my.cnf</code> file is required for these two
            options.
</p></li></ul>
</div>
<p>
        Combining other <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-config" title="22.4.7 ndb_config — Extract NDB Cluster Configuration Information"><span class="command"><strong>ndb_config</strong></span></a> options (such as
        <a class="link" href="mysql-cluster.html#option_ndb_config_query"><code class="option">--query</code></a> or
        <a class="link" href="mysql-cluster.html#option_ndb_config_type"><code class="option">--type</code></a>) with
        <code class="option">--configinfo</code> (with or without the
        <code class="option">--xml</code> option is not supported. Currently, if
        you attempt to do so, the usual result is that all other options
        besides <code class="option">--configinfo</code> or <code class="option">--xml</code>
        are simply ignored. <span class="emphasis"><em>However, this behavior is not
        guaranteed and is subject to change at any time</em></span>. In
        addition, since <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-config" title="22.4.7 ndb_config — Extract NDB Cluster Configuration Information"><span class="command"><strong>ndb_config</strong></span></a>, when used with
        the <code class="option">--configinfo</code> option, does not access the
        NDB Cluster or read any files, trying to specify additional
        options such as <code class="option">--ndb-connectstring</code> or
        <code class="option">--config-file</code> with
        <code class="option">--configinfo</code> serves no purpose.
</p>
<h4><a name="idm140091590164368"></a>Examples</h4>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            To obtain the node ID and type of each node in the cluster:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>./ndb_config --query=nodeid,type --fields=':' --rows='\n'</code></strong>
1:ndbd
2:ndbd
3:ndbd
4:ndbd
5:ndb_mgmd
6:mysqld
7:mysqld
8:mysqld
9:mysqld
</pre><p>
            In this example, we used the
            <a class="link" href="mysql-cluster.html#option_ndb_config_fields"><code class="option">--fields</code></a> options to
            separate the ID and type of each node with a colon character
            (<code class="literal">:</code>), and the
            <a class="link" href="mysql-cluster.html#option_ndb_config_rows"><code class="option">--rows</code></a> options to place
            the values for each node on a new line in the output.
          </p></li><li class="listitem"><p>
            To produce a connection string that can be used by data,
            SQL, and API nodes to connect to the management server:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>./ndb_config --config-file=usr/local/mysql/cluster-data/config.ini \
--query=hostname,portnumber --fields=: --rows=, --type=ndb_mgmd</code></strong>
198.51.100.179:1186
</pre></li><li class="listitem"><p>
            This invocation of <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-config" title="22.4.7 ndb_config — Extract NDB Cluster Configuration Information"><span class="command"><strong>ndb_config</strong></span></a> checks only
            data nodes (using the
            <a class="link" href="mysql-cluster.html#option_ndb_config_type"><code class="option">--type</code></a> option), and shows
            the values for each node's ID and host name, as well as
            the values set for its
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a> and
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datadir"><code class="literal">DataDir</code></a> parameters:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>./ndb_config --type=ndbd --query=nodeid,host,datamemory,datadir -f ' : ' -r '\n'</code></strong>
1 : 198.51.100.193 : 83886080 : /usr/local/mysql/cluster-data
2 : 198.51.100.112 : 83886080 : /usr/local/mysql/cluster-data
3 : 198.51.100.176 : 83886080 : /usr/local/mysql/cluster-data
4 : 198.51.100.119 : 83886080 : /usr/local/mysql/cluster-data
</pre><p>
            In this example, we used the short options
            <code class="option">-f</code> and <code class="option">-r</code> for setting the
            field delimiter and row separator, respectively, as well as
            the short option <code class="option">-q</code> to pass a list of
            parameters to be obtained.
          </p></li><li class="listitem"><p>
            To exclude results from any host except one in particular,
            use the <a class="link" href="mysql-cluster.html#option_ndb_config_host"><code class="option">--host</code></a> option:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>./ndb_config --host=198.51.100.176 -f : -r '\n' -q id,type</code></strong>
3:ndbd
5:ndb_mgmd
</pre><p>
            In this example, we also used the short form
            <code class="option">-q</code> to determine the attributes to be
            queried.
          </p><p>
            Similarly, you can limit results to a node with a specific
            ID using the <a class="link" href="mysql-cluster.html#option_ndb_config_nodeid"><code class="option">--nodeid</code></a>
            option.
</p></li></ol>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-delete-all"></a>22.4.8 <span class="command"><strong>ndb_delete_all</strong></span> — Delete All Rows from an NDB Table</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091590136736"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-delete-all" title="22.4.8 ndb_delete_all — Delete All Rows from an NDB Table"><span class="command"><strong>ndb_delete_all</strong></span></a> deletes all rows from the
        given <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table. In some cases,
        this can be much faster than
        <a class="link" href="sql-syntax.html#delete" title="13.2.2 DELETE Syntax"><code class="literal">DELETE</code></a> or even
        <a class="link" href="sql-syntax.html#truncate-table" title="13.1.37 TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE TABLE</code></a>.
</p>
<h4><a name="idm140091590130192"></a>Usage</h4>
<pre data-lang="terminal" class="programlisting">
ndb_delete_all -c <em class="replaceable"><code>connection_string</code></em> <em class="replaceable"><code>tbl_name</code></em> -d <em class="replaceable"><code>db_name</code></em>
</pre><p>
        This deletes all rows from the table named
        <em class="replaceable"><code>tbl_name</code></em> in the database named
        <em class="replaceable"><code>db_name</code></em>. It is exactly equivalent to
        executing <code class="literal">TRUNCATE
        <em class="replaceable"><code>db_name</code></em>.<em class="replaceable"><code>tbl_name</code></em></code>
        in MySQL.
      </p><p>
        The following table includes options that are specific to
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-delete-all" title="22.4.8 ndb_delete_all — Delete All Rows from an NDB Table"><span class="command"><strong>ndb_delete_all</strong></span></a>. Additional descriptions
        follow the table. For options common to most NDB Cluster
        programs (including <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-delete-all" title="22.4.8 ndb_delete_all — Delete All Rows from an NDB Table"><span class="command"><strong>ndb_delete_all</strong></span></a>), see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
</p>
<div class="table">
<a name="mysql-cluster-ndb_delete_all-options-table"></a><p class="title"><b>Table 22.340 Command-line options for the ndb_delete_all program</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="literal">--database=dbname</code>,
              </p><p>
                <code class="literal">-d</code>
              </p></td>
            <td>Name of the database in which the table is found</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_delete_all_transactional">--transactional</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_delete_all_transactional">-t</a>
                </code>
              </p></td>
            <td>Perform the delete in a single transaction (may run out of operations)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">--tupscan</code>
              </p></td>
            <td>Run tup scan</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">--diskscan</code>
              </p></td>
            <td>Run disk scan</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_delete_all_transactional"></a>
            <a class="indexterm" name="idm140091590089616"></a>

            <a class="indexterm" name="idm140091590088128"></a>

            <code class="option">--transactional</code>, <code class="option">-t</code>
          </p><p>
            Use of this option causes the delete operation to be
            performed as a single transaction.
</p>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Warning
</div>
<p>
              With very large tables, using this option may cause the
              number of operations available to the cluster to be
              exceeded.
</p>
</div>
</li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-desc"></a>22.4.9 <span class="command"><strong>ndb_desc</strong></span> — Describe NDB Tables</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091590082304"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-desc" title="22.4.9 ndb_desc — Describe NDB Tables"><span class="command"><strong>ndb_desc</strong></span></a> provides a detailed description of
        one or more <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables.
</p>
<h4><a name="idm140091590078384"></a>Usage</h4>
<pre data-lang="terminal" class="programlisting">
ndb_desc -c <em class="replaceable"><code>connection_string</code></em> <em class="replaceable"><code>tbl_name</code></em> -d <em class="replaceable"><code>db_name</code></em> [<em class="replaceable"><code>options</code></em>]
    
ndb_desc -c <em class="replaceable"><code>connection_string</code></em> <em class="replaceable"><code>index_name</code></em> -d <em class="replaceable"><code>db_name</code></em> -t <em class="replaceable"><code>tbl_name</code></em>
</pre><p>
        Additional options that can be used with
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-desc" title="22.4.9 ndb_desc — Describe NDB Tables"><span class="command"><strong>ndb_desc</strong></span></a> are listed later in this section.
</p>
<h4><a name="idm140091590071472"></a>Sample Output</h4>
<p>
        MySQL table creation and population statements:
      </p><pre data-lang="sql" class="programlisting">
USE test;

CREATE TABLE fish (
    id INT(11) NOT NULL AUTO_INCREMENT,
    name VARCHAR(20) NOT NULL,
    length_mm INT(11) NOT NULL,
    weight_gm INT(11) NOT NULL,

    PRIMARY KEY pk (id),
    UNIQUE KEY uk (name)
) ENGINE=NDB;

INSERT INTO fish VALUES
    (NULL, 'guppy', 35, 2), (NULL, 'tuna', 2500, 150000),
    (NULL, 'shark', 3000, 110000), (NULL, 'manta ray', 1500, 50000),
    (NULL, 'grouper', 900, 125000), (NULL ,'puffer', 250, 2500);
</pre><p>
        Output from <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-desc" title="22.4.9 ndb_desc — Describe NDB Tables"><span class="command"><strong>ndb_desc</strong></span></a>:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>./ndb_desc -c localhost fish -d test -p</code></strong>
-- fish --
Version: 2
Fragment type: HashMapPartition
K Value: 6
Min load factor: 78
Max load factor: 80
Temporary table: no
Number of attributes: 4
Number of primary keys: 1
Length of frm data: 337
Max Rows: 0
Row Checksum: 1
Row GCI: 1
SingleUserMode: 0
ForceVarPart: 1
PartitionCount: 2
FragmentCount: 2
PartitionBalance: FOR_RP_BY_LDM
ExtraRowGciBits: 0
ExtraRowAuthorBits: 0
TableStatus: Retrieved
Table options:
HashMap: DEFAULT-HASHMAP-3840-2
-- Attributes --
id Int PRIMARY KEY DISTRIBUTION KEY AT=FIXED ST=MEMORY AUTO_INCR
name Varchar(20;latin1_swedish_ci) NOT NULL AT=SHORT_VAR ST=MEMORY DYNAMIC
length_mm Int NOT NULL AT=FIXED ST=MEMORY DYNAMIC
weight_gm Int NOT NULL AT=FIXED ST=MEMORY DYNAMIC
-- Indexes --
PRIMARY KEY(id) - UniqueHashIndex
PRIMARY(id) - OrderedIndex
uk(name) - OrderedIndex
uk$unique(name) - UniqueHashIndex
-- Per partition info --
Partition       Row count       Commit count    Frag fixed memory       Frag varsized memory    Extent_space    Free extent_space
0               2               2               32768                   32768                   0               0               
1               4               4               32768                   32768                   0               0               


NDBT_ProgramExit: 0 - OK
</pre><p>
        Information about multiple tables can be obtained in a single
        invocation of <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-desc" title="22.4.9 ndb_desc — Describe NDB Tables"><span class="command"><strong>ndb_desc</strong></span></a> by using their names,
        separated by spaces. All of the tables must be in the same
        database.
      </p><p>
        You can obtain additional information about a specific index
        using the <code class="option">--table</code> (short form:
        <code class="option">-t</code>) option and supplying the name of the index
        as the first argument to <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-desc" title="22.4.9 ndb_desc — Describe NDB Tables"><span class="command"><strong>ndb_desc</strong></span></a>, as shown
        here:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>./ndb_desc uk -d test -t fish</code></strong>
-- uk --
Version: 2
Base table: fish
Number of attributes: 1
Logging: 0
Index type: OrderedIndex
Index status: Retrieved
-- Attributes --
name Varchar(20;latin1_swedish_ci) NOT NULL AT=SHORT_VAR ST=MEMORY
-- IndexTable 10/uk --
Version: 2
Fragment type: FragUndefined
K Value: 6
Min load factor: 78
Max load factor: 80
Temporary table: yes
Number of attributes: 2
Number of primary keys: 1
Length of frm data: 0
Max Rows: 0
Row Checksum: 1
Row GCI: 1
SingleUserMode: 2
ForceVarPart: 0
PartitionCount: 2
FragmentCount: 2
FragmentCountType: ONE_PER_LDM_PER_NODE
ExtraRowGciBits: 0
ExtraRowAuthorBits: 0
TableStatus: Retrieved
Table options:
-- Attributes --
name Varchar(20;latin1_swedish_ci) NOT NULL AT=SHORT_VAR ST=MEMORY
NDB$TNODE Unsigned [64] PRIMARY KEY DISTRIBUTION KEY AT=FIXED ST=MEMORY
-- Indexes --
PRIMARY KEY(NDB$TNODE) - UniqueHashIndex

NDBT_ProgramExit: 0 - OK
</pre><p>
        When an index is specified in this way, the
        <a class="link" href="mysql-cluster.html#option_ndb_desc_extra-partition-info"><code class="option">--extra-partition-info</code></a> and
        <a class="link" href="mysql-cluster.html#option_ndb_desc_extra-node-info"><code class="option">--extra-node-info</code></a> options have
        no effect.
      </p><p>
        The <code class="literal">Version</code> column in the output contains the
        table's schema object version. For information about
        interpreting this value, see
        <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-schema-object-versions.html" target="_top">NDB Schema Object Versions</a>.
      </p><p>
        Three of the table properties that can be set using
        <code class="literal">NDB_TABLE</code> comments embedded in
        <a class="link" href="sql-syntax.html#create-table" title="13.1.20 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> and
        <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statements are also
        visible in <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-desc" title="22.4.9 ndb_desc — Describe NDB Tables"><span class="command"><strong>ndb_desc</strong></span></a> output. The table's
        <code class="literal">FRAGMENT_COUNT_TYPE</code> is always shown in the
        <code class="literal">FragmentCountType</code> column.
        <code class="literal">READ_ONLY</code> and
        <code class="literal">FULLY_REPLICATED</code>, if set to 1, are shown in
        the <code class="literal">Table options</code> column. You can see this
        after executing the following <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER
        TABLE</code></a> statement in the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>
        client:
      </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>ALTER TABLE fish COMMENT='NDB_TABLE=READ_ONLY=1,FULLY_REPLICATED=1';</code></strong>
1 row in set, 1 warning (0.00 sec)

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS\G</code></strong>
+---------+------+---------------------------------------------------------------------------------------------------------+
| Level   | Code | Message                                                                                                 |
+---------+------+---------------------------------------------------------------------------------------------------------+
| Warning | 1296 | Got error 4503 'Table property is FRAGMENT_COUNT_TYPE=ONE_PER_LDM_PER_NODE but not in comment' from NDB |
+---------+------+---------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)
</pre><p>
        The warning is issued because <code class="literal">READ_ONLY=1</code>
        requires that the table's fragment count type is (or be set
        to) <code class="literal">ONE_PER_LDM_PER_NODE_GROUP</code>;
        <code class="literal">NDB</code> sets this automatically in such cases.
        You can check that the <code class="literal">ALTER TABLE</code> statement
        has the desired effect using <a class="link" href="sql-syntax.html#show-create-table" title="13.7.6.10 SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE
        TABLE</code></a>:
      </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW CREATE TABLE fish\G</code></strong>
*************************** 1. row ***************************
       Table: fish
Create Table: CREATE TABLE `fish` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) NOT NULL,
  `length_mm` int(11) NOT NULL,
  `weight_gm` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk` (`name`)
) ENGINE=ndbcluster DEFAULT CHARSET=latin1
COMMENT='NDB_TABLE=READ_BACKUP=1,FULLY_REPLICATED=1'
1 row in set (0.01 sec)
</pre><p>
        Because <code class="literal">FRAGMENT_COUNT_TYPE</code> was not set
        explicitly, its value is not shown in the comment text printed
        by <code class="literal">SHOW CREATE TABLE</code>.
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-desc" title="22.4.9 ndb_desc — Describe NDB Tables"><span class="command"><strong>ndb_desc</strong></span></a>, however, displays the updated value
        for this attribute. The <code class="literal">Table options</code> column
        shows the binary properties just enabled. You can see this in
        the output shown here (emphasized text):
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>./ndb_desc -c localhost fish -d test -p</code></strong>
-- fish --
Version: 4
Fragment type: HashMapPartition
K Value: 6
Min load factor: 78
Max load factor: 80
Temporary table: no
Number of attributes: 4
Number of primary keys: 1
Length of frm data: 380
Max Rows: 0
Row Checksum: 1
Row GCI: 1
SingleUserMode: 0
ForceVarPart: 1
PartitionCount: 1
FragmentCount: 1
<span class="emphasis"><em>FragmentCountType: ONE_PER_LDM_PER_NODE_GROUP</em></span>
ExtraRowGciBits: 0
ExtraRowAuthorBits: 0
TableStatus: Retrieved
<span class="emphasis"><em>Table options: readbackup, fullyreplicated</em></span>
HashMap: DEFAULT-HASHMAP-3840-1
-- Attributes --
id Int PRIMARY KEY DISTRIBUTION KEY AT=FIXED ST=MEMORY AUTO_INCR
name Varchar(20;latin1_swedish_ci) NOT NULL AT=SHORT_VAR ST=MEMORY DYNAMIC
length_mm Int NOT NULL AT=FIXED ST=MEMORY DYNAMIC
weight_gm Int NOT NULL AT=FIXED ST=MEMORY DYNAMIC
-- Indexes --
PRIMARY KEY(id) - UniqueHashIndex
PRIMARY(id) - OrderedIndex
uk(name) - OrderedIndex
uk$unique(name) - UniqueHashIndex
-- Per partition info --
Partition       Row count       Commit count    Frag fixed memory       Frag varsized memory    Extent_space    Free extent_space

NDBT_ProgramExit: 0 - OK
</pre><p>
        For more information about these table properties, see
        <a class="xref" href="sql-syntax.html#create-table-ndb-table-comment-options" title="13.1.20.11 Setting NDB_TABLE Options">Section 13.1.20.11, “Setting NDB_TABLE Options”</a>.
      </p><p>
        The <code class="literal">Extent_space</code> and <code class="literal">Free
        extent_space</code> columns are applicable only to
        <code class="literal">NDB</code> tables having columns on disk; for tables
        having only in-memory columns, these columns always contain the
        value <code class="literal">0</code>.
      </p><p>
        To illustrate their use, we modify the previous example. First,
        we must create the necessary Disk Data objects, as shown here:
      </p><pre data-lang="sql" class="programlisting">
CREATE LOGFILE GROUP lg_1
    ADD UNDOFILE 'undo_1.log'
    INITIAL_SIZE 16M
    UNDO_BUFFER_SIZE 2M
    ENGINE NDB;

ALTER LOGFILE GROUP lg_1
    ADD UNDOFILE 'undo_2.log'
    INITIAL_SIZE 12M
    ENGINE NDB;

CREATE TABLESPACE ts_1
    ADD DATAFILE 'data_1.dat'
    USE LOGFILE GROUP lg_1
    INITIAL_SIZE 32M
    ENGINE NDB;

ALTER TABLESPACE ts_1
    ADD DATAFILE 'data_2.dat'
    INITIAL_SIZE 48M
    ENGINE NDB;
</pre><p>
        (For more information on the statements just shown and the
        objects created by them, see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-disk-data-objects" title="22.5.13.1 NDB Cluster Disk Data Objects">Section 22.5.13.1, “NDB Cluster Disk Data Objects”</a>, as well as
        <a class="xref" href="sql-syntax.html#create-logfile-group" title="13.1.16 CREATE LOGFILE GROUP Syntax">Section 13.1.16, “CREATE LOGFILE GROUP Syntax”</a>, and
        <a class="xref" href="sql-syntax.html#create-tablespace" title="13.1.21 CREATE TABLESPACE Syntax">Section 13.1.21, “CREATE TABLESPACE Syntax”</a>.)
      </p><p>
        Now we can create and populate a version of the
        <code class="literal">fish</code> table that stores 2 of its columns on
        disk (deleting the previous version of the table first, if it
        already exists):
      </p><pre data-lang="sql" class="programlisting">
CREATE TABLE fish (
    id INT(11) NOT NULL AUTO_INCREMENT,
    name VARCHAR(20) NOT NULL,
    length_mm INT(11) NOT NULL,
    weight_gm INT(11) NOT NULL,

    PRIMARY KEY pk (id),
    UNIQUE KEY uk (name)
) TABLESPACE ts_1 STORAGE DISK
ENGINE=NDB;

INSERT INTO fish VALUES
    (NULL, 'guppy', 35, 2), (NULL, 'tuna', 2500, 150000),
    (NULL, 'shark', 3000, 110000), (NULL, 'manta ray', 1500, 50000),
    (NULL, 'grouper', 900, 125000), (NULL ,'puffer', 250, 2500);
</pre><p>
        When run against this version of the table,
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-desc" title="22.4.9 ndb_desc — Describe NDB Tables"><span class="command"><strong>ndb_desc</strong></span></a> displays the following output:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>./ndb_desc -c localhost fish -d test -p</code></strong>
-- fish --
Version: 1
Fragment type: HashMapPartition
K Value: 6
Min load factor: 78
Max load factor: 80
Temporary table: no
Number of attributes: 4
Number of primary keys: 1
Length of frm data: 346
Max Rows: 0
Row Checksum: 1
Row GCI: 1
SingleUserMode: 0
ForceVarPart: 1
PartitionCount: 2
FragmentCount: 2
FragmentCountType: ONE_PER_LDM_PER_NODE
ExtraRowGciBits: 0
ExtraRowAuthorBits: 0
TableStatus: Retrieved
Table options:
HashMap: DEFAULT-HASHMAP-3840-2
-- Attributes --
id Int PRIMARY KEY DISTRIBUTION KEY AT=FIXED ST=MEMORY AUTO_INCR
name Varchar(20;latin1_swedish_ci) NOT NULL AT=SHORT_VAR ST=MEMORY
length_mm Int NOT NULL AT=FIXED ST=DISK
weight_gm Int NOT NULL AT=FIXED ST=DISK
-- Indexes --
PRIMARY KEY(id) - UniqueHashIndex
PRIMARY(id) - OrderedIndex
uk(name) - OrderedIndex
uk$unique(name) - UniqueHashIndex
-- Per partition info --
Partition       Row count       Commit count    Frag fixed memory       Frag varsized memory    Extent_space    Free extent_space
0               2               2               32768                   32768                   1048576         1044440        
1               4               4               32768                   32768                   1048576         1044400        


NDBT_ProgramExit: 0 - OK
</pre><p>
        This means that 1048576 bytes are allocated from the tablespace
        for this table on each partition, of which 1044440 bytes remain
        free for additional storage. In other words, 1048576 - 1044440 =
        4136 bytes per partition is currently being used to store the
        data from this table's disk-based columns. The number of
        bytes shown as <code class="literal">Free extent_space</code> is available
        for storing on-disk column data from the <code class="literal">fish</code>
        table only; for this reason, it is not visible when selecting
        from the <a class="link" href="information-schema.html#files-table" title="25.11 The INFORMATION_SCHEMA FILES Table"><code class="literal">INFORMATION_SCHEMA.FILES</code></a>
        table.
      </p><p>
        For fully replicated tables, <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-desc" title="22.4.9 ndb_desc — Describe NDB Tables"><span class="command"><strong>ndb_desc</strong></span></a> shows
        only the nodes holding primary partition fragment replicas;
        nodes with copy fragment replicas (only) are ignored. Beginning
        with NDB 7.5.4, you can obtain such information, using the
        <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client, from the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-table-distribution-status" title="22.5.10.36 The ndbinfo table_distribution_status Table"><code class="literal">table_distribution_status</code></a>,
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-table-fragments" title="22.5.10.37 The ndbinfo table_fragments Table"><code class="literal">table_fragments</code></a>,
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-table-info" title="22.5.10.38 The ndbinfo table_info Table"><code class="literal">table_info</code></a>, and
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-table-replicas" title="22.5.10.39 The ndbinfo table_replicas Table"><code class="literal">table_replicas</code></a> tables in the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo" title="22.5.10 ndbinfo: The NDB Cluster Information Database"><code class="literal">ndbinfo</code></a> database.
      </p><p>
        The following table includes options that are specific to
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-desc" title="22.4.9 ndb_desc — Describe NDB Tables"><span class="command"><strong>ndb_desc</strong></span></a>. Additional descriptions follow the
        table. For options common to most NDB Cluster programs
        (including <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-desc" title="22.4.9 ndb_desc — Describe NDB Tables"><span class="command"><strong>ndb_desc</strong></span></a>), see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
</p>
<div class="table">
<a name="mysql-cluster-ndb_desc-options-table"></a><p class="title"><b>Table 22.341 Command-line options for the ndb_desc program</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_desc_blob-info">--blob-info</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_desc_blob-info">-b</a>
                </code>
              </p></td>
            <td>Include partition information for BLOB tables in output. Requires that
              the -p option also be used</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_desc_database">--database=dbname</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_desc_database">-d</a>
                </code>
              </p></td>
            <td>Name of database containing table</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_desc_extra-node-info">--extra-node-info</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_desc_extra-node-info">-n</a>
                </code>
              </p></td>
            <td>Include partition-to-data-node mappings in output. Requires that the -p
              option also be used</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_desc_extra-partition-info">--extra-partition-info</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_desc_extra-partition-info">-p</a>
                </code>
              </p></td>
            <td>Display information about partitions</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_desc_retries">--retries=#</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_desc_retries">-r</a>
                </code>
              </p></td>
            <td>Number of times to retry the connection (once per second)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_desc_table">--table=tbl_name</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_desc_table">-t</a>
                </code>
              </p></td>
            <td>Specify the table in which to find an index. When this option is used,
              -p and -n have no effect and are ignored.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_desc_unqualified">--unqualified</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_desc_unqualified">-u</a>
                </code>
              </p></td>
            <td>Use unqualified table names</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_desc_blob-info"></a>
            <a class="indexterm" name="idm140091589930000"></a>

            <a class="indexterm" name="idm140091589928512"></a>

            <code class="option">--blob-info</code>, <code class="option">-b</code>
          </p><p>
            Include information about subordinate
            <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> and
            <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> columns.
          </p><p>
            Use of this option also requires the use of the
            <a class="link" href="mysql-cluster.html#option_ndb_desc_extra-partition-info"><code class="option">--extra-partition-info</code></a>
            (<code class="option">-p</code>) option.
          </p></li><li class="listitem"><p><a name="option_ndb_desc_database"></a>
            <a class="indexterm" name="idm140091589920240"></a>

            <a class="indexterm" name="idm140091589918752"></a>

            <code class="option">--database=<em class="replaceable"><code>db_name</code></em></code>,
            <code class="option">-d</code>
          </p><p>
            Specify the database in which the table should be found.
          </p></li><li class="listitem"><p><a name="option_ndb_desc_extra-node-info"></a>
            <a class="indexterm" name="idm140091589914432"></a>

            <a class="indexterm" name="idm140091589912944"></a>

            <code class="option">--extra-node-info</code>, <code class="option">-n</code>
          </p><p>
            Include information about the mappings between table
            partitions and the data nodes upon which they reside. This
            information can be useful for verifying distribution
            awareness mechanisms and supporting more efficient
            application access to the data stored in NDB Cluster.
          </p><p>
            Use of this option also requires the use of the
            <a class="link" href="mysql-cluster.html#option_ndb_desc_extra-partition-info"><code class="option">--extra-partition-info</code></a>
            (<code class="option">-p</code>) option.
          </p></li><li class="listitem"><p><a name="option_ndb_desc_extra-partition-info"></a>
            <a class="indexterm" name="idm140091589906864"></a>

            <a class="indexterm" name="idm140091589905408"></a>

            <code class="option">--extra-partition-info</code>, <code class="option">-p</code>
          </p><p>
            Print additional information about the table's
            partitions.
          </p></li><li class="listitem"><p><a name="option_ndb_desc_retries"></a>
            <a class="indexterm" name="idm140091589901440"></a>

            <a class="indexterm" name="idm140091589899984"></a>

            <code class="option">--retries=<em class="replaceable"><code>#</code></em></code>,
            <code class="option">-r</code>
          </p><p>
            Try to connect this many times before giving up. One connect
            attempt is made per second.
          </p></li><li class="listitem"><p><a name="option_ndb_desc_table"></a>
            <a class="indexterm" name="idm140091589895648"></a>

            <a class="indexterm" name="idm140091589894192"></a>

            <code class="option">--table=<em class="replaceable"><code>tbl_name</code></em></code>,
            <code class="option">-t</code>
          </p><p>
            Specify the table in which to look for an index.
          </p></li><li class="listitem"><p><a name="option_ndb_desc_unqualified"></a>
            <a class="indexterm" name="idm140091589889888"></a>

            <a class="indexterm" name="idm140091589888400"></a>

            <code class="option">--unqualified</code>, <code class="option">-u</code>
          </p><p>
            Use unqualified table names.
</p></li></ul>
</div>
<p>
        In NDB 7.5.3 and later, table indexes listed in the output are
        ordered by ID. Previously, this was not deterministic and could
        vary between platforms. (Bug #81763, Bug #23547742)
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-drop-index"></a>22.4.10 <span class="command"><strong>ndb_drop_index</strong></span> — Drop Index from an NDB Table</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091589882880"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-drop-index" title="22.4.10 ndb_drop_index — Drop Index from an NDB Table"><span class="command"><strong>ndb_drop_index</strong></span></a> drops the specified index from
        an <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table. <span class="emphasis"><em>It is
        recommended that you use this utility only as an example for
        writing NDB API applications</em></span>—see the Warning
        later in this section for details.
</p>
<h4><a name="idm140091589878256"></a>Usage</h4>
<pre data-lang="terminal" class="programlisting">
ndb_drop_index -c <em class="replaceable"><code>connection_string</code></em> <em class="replaceable"><code>table_name</code></em> <em class="replaceable"><code>index</code></em> -d <em class="replaceable"><code>db_name</code></em>
</pre><p>
        The statement shown above drops the index named
        <em class="replaceable"><code>index</code></em> from the
        <em class="replaceable"><code>table</code></em> in the
        <em class="replaceable"><code>database</code></em>.
      </p><p>
        The following table includes options that are specific to
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-drop-index" title="22.4.10 ndb_drop_index — Drop Index from an NDB Table"><span class="command"><strong>ndb_drop_index</strong></span></a>. Additional descriptions
        follow the table. For options common to most NDB Cluster
        programs (including <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-drop-index" title="22.4.10 ndb_drop_index — Drop Index from an NDB Table"><span class="command"><strong>ndb_drop_index</strong></span></a>), see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
</p>
<div class="table">
<a name="mysql-cluster-ndb_drop_index-options-table"></a><p class="title"><b>Table 22.342 Command-line options for the ndb_drop_index program</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="literal">--database=dbname</code>,
              </p><p>
                <code class="literal">-d</code>
              </p></td>
            <td>Name of the database in which the table is found</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Warning
</div>
<p>
          <span class="emphasis"><em>Operations performed on Cluster table indexes using
          the NDB API are not visible to MySQL and make the table
          unusable by a MySQL server</em></span>. If you use this program
          to drop an index, then try to access the table from an SQL
          node, an error results, as shown here:
</p>
</div>
<pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>./ndb_drop_index -c localhost dogs ix -d ctest1</code></strong>
Dropping index dogs/idx...OK

NDBT_ProgramExit: 0 - OK

shell&gt; <strong class="userinput"><code>./mysql -u jon -p ctest1</code></strong>
Enter password: *******
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 7 to server version: 5.7.26-ndb-7.5.15

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

mysql&gt; <strong class="userinput"><code>SHOW TABLES;</code></strong>
+------------------+
| Tables_in_ctest1 |
+------------------+
| a                |
| bt1              |
| bt2              |
| dogs             |
| employees        |
| fish             |
+------------------+
6 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM dogs;</code></strong>
<span class="errortext">ERROR 1296 (HY000): Got error 4243 'Index not found' from NDBCLUSTER</span>
</pre><p>
        In such a case, your <span class="emphasis"><em>only</em></span> option for making
        the table available to MySQL again is to drop the table and
        re-create it. You can use either the SQL
        statement<a class="link" href="sql-syntax.html#drop-table" title="13.1.32 DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a> or the
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-drop-table" title="22.4.11 ndb_drop_table — Drop an NDB Table"><span class="command"><strong>ndb_drop_table</strong></span></a> utility (see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-drop-table" title="22.4.11 ndb_drop_table — Drop an NDB Table">Section 22.4.11, “<span class="command"><strong>ndb_drop_table</strong></span> — Drop an NDB Table”</a>) to drop
        the table.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-drop-table"></a>22.4.11 <span class="command"><strong>ndb_drop_table</strong></span> — Drop an NDB Table</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091589842864"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-drop-table" title="22.4.11 ndb_drop_table — Drop an NDB Table"><span class="command"><strong>ndb_drop_table</strong></span></a> drops the specified
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table. (If you try to use this
        on a table created with a storage engine other than
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>, the attempt fails with the
        error <span class="errortext">723: No such table exists</span>.) This
        operation is extremely fast; in some cases, it can be an order
        of magnitude faster than using a MySQL <a class="link" href="sql-syntax.html#drop-table" title="13.1.32 DROP TABLE Syntax"><code class="literal">DROP
        TABLE</code></a> statement on an <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>
        table.
</p>
<h4><a name="idm140091589834656"></a>Usage</h4>
<pre data-lang="terminal" class="programlisting">
ndb_drop_table -c <em class="replaceable"><code>connection_string</code></em> <em class="replaceable"><code>tbl_name</code></em> -d <em class="replaceable"><code>db_name</code></em>
</pre><p>
        The following table includes options that are specific to
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-drop-table" title="22.4.11 ndb_drop_table — Drop an NDB Table"><span class="command"><strong>ndb_drop_table</strong></span></a>. Additional descriptions
        follow the table. For options common to most NDB Cluster
        programs (including <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-drop-table" title="22.4.11 ndb_drop_table — Drop an NDB Table"><span class="command"><strong>ndb_drop_table</strong></span></a>), see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
</p>
<div class="table">
<a name="mysql-cluster-ndb_drop_table-options-table"></a><p class="title"><b>Table 22.343 Command-line options for the ndb_drop_table program</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="literal">--database=dbname</code>,
              </p><p>
                <code class="literal">-d</code>
              </p></td>
            <td>Name of the database in which the table is found</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        Prior to NDB 8.0.17, an <code class="literal">NDB</code> table dropped
        using this utility persisted in the MySQL data dictionary but
        could not be dropped using <code class="literal">DROP TABLE</code> in the
        <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client. In NDB 8.0.17 and later, such
        <span class="quote">“<span class="quote">orphan</span>”</span> tables can be dropped using <code class="literal">DROP
        TABLE</code>. (Bug #29125206, Bug #93672)
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-error-reporter"></a>22.4.12 <span class="command"><strong>ndb_error_reporter</strong></span> — NDB Error-Reporting Utility</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091589808272"></a><a class="indexterm" name="idm140091589807328"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-error-reporter" title="22.4.12 ndb_error_reporter — NDB Error-Reporting Utility"><span class="command"><strong>ndb_error_reporter</strong></span></a> creates an archive from
        data node and management node log files that can be used to help
        diagnose bugs or other problems with a cluster. <span class="emphasis"><em>It is
        highly recommended that you make use of this utility when filing
        reports of bugs in NDB Cluster</em></span>.
      </p><p>
        The following table includes command options specific to the NDB
        Cluster program <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-error-reporter" title="22.4.12 ndb_error_reporter — NDB Error-Reporting Utility"><span class="command"><strong>ndb_error_reporter</strong></span></a>.
        Additional descriptions follow the table. For options common to
        most NDB Cluster programs (including
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-error-reporter" title="22.4.12 ndb_error_reporter — NDB Error-Reporting Utility"><span class="command"><strong>ndb_error_reporter</strong></span></a>), see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
</p>
<div class="table">
<a name="mysql-cluster-ndb_error_reporter-options-table"></a><p class="title"><b>Table 22.344 Command-line options for the ndb_error_reporter program</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_error_reporter_connection-timeout">--connection-timeout=timeout</a>
                </code>
              </p></td>
            <td>Number of seconds to wait when connecting to nodes before timing out.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_error_reporter_dry-scp">--dry-scp</a>
                </code>
              </p></td>
            <td>Disable scp with remote hosts; used only for testing.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_error_reporter_fs">--fs</a>
                </code>
              </p></td>
            <td>Include file system data in error report; can use a large amount of disk
              space</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_error_reporter_skip-nodegroup">--skip-nodegroup=nodegroup_id</a>
                </code>
              </p></td>
            <td>Skip all nodes in the node group having this ID.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<h4><a name="idm140091589768672"></a>Usage</h4>
<pre data-lang="terminal" class="programlisting">
ndb_error_reporter <em class="replaceable"><code>path/to/config-file</code></em> [<em class="replaceable"><code>username</code></em>] [<em class="replaceable"><code>options</code></em>]
</pre><p>
        This utility is intended for use on a management node host, and
        requires the path to the management host configuration file
        (usually named <code class="filename">config.ini</code>). Optionally, you
        can supply the name of a user that is able to access the
        cluster's data nodes using SSH, to copy the data node log files.
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-error-reporter" title="22.4.12 ndb_error_reporter — NDB Error-Reporting Utility"><span class="command"><strong>ndb_error_reporter</strong></span></a> then includes all of these
        files in archive that is created in the same directory in which
        it is run. The archive is named
        <code class="filename">ndb_error_report_<em class="replaceable"><code>YYYYMMDDhhmmss</code></em>.tar.bz2</code>,
        where <em class="replaceable"><code>YYYYMMDDhhmmss</code></em> is a datetime
        string.
      </p><p>
        <a class="indexterm" name="idm140091589760976"></a>

        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-error-reporter" title="22.4.12 ndb_error_reporter — NDB Error-Reporting Utility"><span class="command"><strong>ndb_error_reporter</strong></span></a> also accepts the options
        listed here:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_error_reporter_connection-timeout"></a>
            <a class="indexterm" name="idm140091589756832"></a>

            <code class="option">--connection-timeout=<em class="replaceable"><code>timeout</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for connection-timeout"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--connection-timeout=timeout</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr></tbody></table>
</div>
<p>
            Wait this many seconds when trying to connect to nodes
            before timing out.
          </p></li><li class="listitem"><p><a name="option_ndb_error_reporter_dry-scp"></a>
            <a class="indexterm" name="idm140091589738528"></a>

            <code class="option">--dry-scp</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for dry-scp"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--dry-scp</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table>
</div>
<p>
            Run <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-error-reporter" title="22.4.12 ndb_error_reporter — NDB Error-Reporting Utility"><span class="command"><strong>ndb_error_reporter</strong></span></a> without using scp
            from remote hosts. Used for testing only.
          </p></li><li class="listitem"><p><a name="option_ndb_error_reporter_fs"></a>
            <a class="indexterm" name="idm140091589719248"></a>

            <code class="option">--fs</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for fs"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--fs</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Copy the data node file systems to the management host and
            include them in the archive.
          </p><p>
            Because data node file systems can be extremely large, even
            after being compressed, we ask that you please do
            <span class="emphasis"><em>not</em></span> send archives created using this
            option to Oracle unless you are specifically requested to do
            so.
          </p></li><li class="listitem"><p><a name="option_ndb_error_reporter_skip-nodegroup"></a>
            <a class="indexterm" name="idm140091589700160"></a>

            <code class="option">--skip-nodegroup=<em class="replaceable"><code>nodegroup_id</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for connection-timeout"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--connection-timeout=timeout</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr></tbody></table>
</div>
<p>
            Skip all nodes belong to the node group having the supplied
            node group ID.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-import"></a>22.4.13 <span class="command"><strong>ndb_import</strong></span> — Import CSV Data Into NDB</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091589680976"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-import" title="22.4.13 ndb_import — Import CSV Data Into NDB"><span class="command"><strong>ndb_import</strong></span></a> imports CSV-formatted data, such
        as that produced by <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a>
        <a class="link" href="programs.html#option_mysqldump_tab"><code class="option">--tab</code></a>, directly into
        <code class="literal">NDB</code> using the NDB API.
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-import" title="22.4.13 ndb_import — Import CSV Data Into NDB"><span class="command"><strong>ndb_import</strong></span></a> requires a connection to an NDB
        management server (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>) to function; it
        does not require a connection to a MySQL Server.
</p>
<h4><a name="idm140091589672560"></a>Usage</h4>
<pre data-lang="terminal" class="programlisting">
ndb_import <em class="replaceable"><code>db_name</code></em> <em class="replaceable"><code>file_name</code></em> <em class="replaceable"><code>options</code></em>
</pre><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-import" title="22.4.13 ndb_import — Import CSV Data Into NDB"><span class="command"><strong>ndb_import</strong></span></a> requires two arguments.
        <em class="replaceable"><code>db_name</code></em> is the name of the database
        where the table into which to import the data is found;
        <em class="replaceable"><code>file_name</code></em> is the name of the CSV file
        from which to read the data; this must include the path to this
        file if it is not in the current directory. The name of the file
        must match that of the table; the file's extension, if any,
        is not taken into consideration. Options supported by
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-import" title="22.4.13 ndb_import — Import CSV Data Into NDB"><span class="command"><strong>ndb_import</strong></span></a> include those for specifying field
        separators, escapes, and line terminators, and are described
        later in this section. <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-import" title="22.4.13 ndb_import — Import CSV Data Into NDB"><span class="command"><strong>ndb_import</strong></span></a> must be
        able to connect to an NDB Cluster management server; for this
        reason, there must be an unused <code class="literal">[api]</code> slot in
        the cluster <code class="filename">config.ini</code> file.
      </p><p>
        To duplicate an existing table that uses a different storage
        engine, such as <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>, as an
        <code class="literal">NDB</code> table, use the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>
        client to perform a
        <a class="link" href="sql-syntax.html#select-into" title="13.2.10.1 SELECT ... INTO Syntax"><code class="literal">SELECT INTO
        OUTFILE</code></a> statement to export the existing table to a
        CSV file, then to execute a
        <a class="link" href="sql-syntax.html#create-table-like" title="13.1.20.4 CREATE TABLE ... LIKE Syntax"><code class="literal">CREATE TABLE
        LIKE</code></a> statement to create a new table having the same
        structure as the existing table, then perform
        <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE ...
        ENGINE=NDB</code></a> on the new table; after this, from the
        system shell, invoke <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-import" title="22.4.13 ndb_import — Import CSV Data Into NDB"><span class="command"><strong>ndb_import</strong></span></a> to load the
        data into the new <code class="literal">NDB</code> table. For example, an
        existing <code class="literal">InnoDB</code> table named
        <code class="literal">myinnodb_table</code> in a database named
        <code class="literal">myinnodb</code> can be exported into an
        <code class="literal">NDB</code> table named
        <code class="literal">myndb_table</code> in a database named
        <code class="literal">myndb</code> as shown here, assuming that you are
        already logged in as a MySQL user with the appropriate
        privileges:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            In the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client:
          </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>USE myinnodb;</code></strong>

mysql&gt; <strong class="userinput"><code>SELECT * INTO OUTFILE '/tmp/myndb_table.csv'</code></strong>
     &gt;  <strong class="userinput"><code>FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' ESCAPED BY '\\'</code></strong>
     &gt;  <strong class="userinput"><code>LINES TERMINATED BY '\n'</code></strong>
     &gt;  <strong class="userinput"><code>FROM myinnodbtable;</code></strong>

mysql&gt; <strong class="userinput"><code>CREATE DATABASE myndb;</code></strong>

mysql&gt; <strong class="userinput"><code>USE myndb;</code></strong>

mysql&gt; <strong class="userinput"><code>CREATE TABLE myndb_table LIKE myinnodb.myinnodb_table;</code></strong>

mysql&gt; <strong class="userinput"><code>ALTER TABLE myndb_table ENGINE=NDB;</code></strong>

mysql&gt; <strong class="userinput"><code>EXIT;</code></strong>
Bye
shell&gt;
</pre><p>
            Once the target database and table have been created, a
            running <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> is no longer required. You
            can stop it using <a class="link" href="programs.html#mysqladmin" title="4.5.2 mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin shutdown</strong></span></a> or
            another method before proceeding, if you wish.
          </p></li><li class="listitem"><p>
            In the system shell:
          </p><pre data-lang="terminal" class="programlisting">
# if you are not already in the MySQL bin directory:
shell&gt; <strong class="userinput"><code>cd <em class="replaceable"><code>path-to-mysql-bin-dir</code></em></code></strong>

shell&gt; <strong class="userinput"><code>ndb_import myndb /tmp/myndb_table.csv --fields-optionally-enclosed-by='"' \</code></strong>
    <strong class="userinput"><code>--fields-terminated-by="," --fields-escaped-by='\\'</code></strong>
</pre><p>
            The output should resemble what is shown here:
          </p><pre data-lang="terminal" class="programlisting">
job-1 import myndb.myndb_table from /tmp/myndb_table.csv
job-1 [running] import myndb.myndb_table from /tmp/myndb_table.csv
job-1 [success] import myndb.myndb_table from /tmp/myndb_table.csv
job-1 imported 19984 rows in 0h0m9s at 2277 rows/s
jobs summary: defined: 1 run: 1 with success: 1 with failure: 0
shell&gt;
</pre></li></ol>
</div>
<p>
        The following table includes options that are specific to
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-import" title="22.4.13 ndb_import — Import CSV Data Into NDB"><span class="command"><strong>ndb_import</strong></span></a>. Additional descriptions follow
        the table. For options common to most NDB Cluster programs
        (including <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-import" title="22.4.13 ndb_import — Import CSV Data Into NDB"><span class="command"><strong>ndb_import</strong></span></a>), see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
</p>
<div class="table">
<a name="mysql-cluster-ndb_import-options-table"></a><p class="title"><b>Table 22.345 Command-line options for the ndb_import program</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_abort-on-error">--abort-on-error</a>
                </code>
              </p></td>
            <td>Dump core on any fatal error; used for debugging</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_ai-increment">--ai-increment=#</a>
                </code>
              </p></td>
            <td>For table with hidden PK, specify autoincrement increment. See mysqld</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_ai-offset">--ai-offset=#</a>
                </code>
              </p></td>
            <td>For table with hidden PK, specify autoincrement offset. See mysqld</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_ai-prefetch-sz">--ai-prefetch-sz=#</a>
                </code>
              </p></td>
            <td>For table with hidden PK, specify number of autoincrement values that
              are prefetched. See mysqld</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_connections">--connections=#</a>
                </code>
              </p></td>
            <td>Number of cluster connections to create</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_continue">--continue</a>
                </code>
              </p></td>
            <td>When job fails, continue to next job</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_db-workers">--db-workers=#</a>
                </code>
              </p></td>
            <td>Number of threads, per data node, executing database operations</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_errins-type">--errins-type=name</a>
                </code>
              </p></td>
            <td>Error insert type, for testing purposes; use "list" to obtain all
              possible values</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_errins-delay">--errins-delay=#</a>
                </code>
              </p></td>
            <td>Error insert delay in milliseconds; random variation is added</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_fields-enclosed-by">--fields-enclosed-by=char</a>
                </code>
              </p></td>
            <td>Same as FIELDS ENCLOSED BY option for LOAD DATA statements. For CSV
              input this is same as using
              --fields-optionally-enclosed-by</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_fields-escaped-by">--fields-escaped-by=name</a>
                </code>
              </p></td>
            <td>Same as FIELDS ESCAPED BY option for LOAD DATA statements</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_fields-optionally-enclosed-by">--fields-optionally-enclosed-by=char</a>
                </code>
              </p></td>
            <td>Same as FIELDS OPTIONALLY ENCLOSED BY option for LOAD DATA statements</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_fields-terminated-by">--fields-terminated-by=char</a>
                </code>
              </p></td>
            <td>Same as FIELDS TERMINATED BY option for LOAD DATA statements.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_idlesleep">--idlesleep=#</a>
                </code>
              </p></td>
            <td>Number of milliseconds to sleep waiting for more to do</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_idlespin">--idlespin=#</a>
                </code>
              </p></td>
            <td>Number of times to re-try before idlesleep</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_ignore-lines">--ignore-lines=#</a>
                </code>
              </p></td>
            <td>Ignore first # lines in input file. Used to skip a non-data header.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_input-type">--input-type=name</a>
                </code>
              </p></td>
            <td>Input type: random or csv</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_input-workers">--input-workers=#</a>
                </code>
              </p></td>
            <td>Number of threads processing input. Must be 2 or more if --input-type is
              csv.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_keep-state">--keep-state</a>
                </code>
              </p></td>
            <td>Preserve state files</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_lines-terminated-by">--lines-terminated-by=name</a>
                </code>
              </p></td>
            <td>Same as LINES TERMINATED BY option for LOAD DATA statements</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_log-level">--log-level=#</a>
                </code>
              </p></td>
            <td>Set internal logging level; for debugging and development</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_max-rows">--max-rows=#</a>
                </code>
              </p></td>
            <td>Import only this number of input data rows; default is 0, which imports
              all rows</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_monitor">--monitor=#</a>
                </code>
              </p></td>
            <td>Periodically print status of running job if something has changed
              (status, rejected rows, temporary errors). Value 0
              disables. Value 1 prints any change seen. Higher values
              reduce status printing exponentially up to some
              pre-defined limit.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_no-asynch">--no-asynch</a>
                </code>
              </p></td>
            <td>Run database operations as batches, in single transactions</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_no-hint">--no-hint</a>
                </code>
              </p></td>
            <td>Do not use distribution key hint to select data node (TC)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_opbatch">--opbatch=#</a>
                </code>
              </p></td>
            <td>A db execution batch is a set of transactions and operations sent to NDB
              kernel. This option limits NDB operations (including blob
              operations) in a db execution batch. Therefore it also
              limits number of asynch transactions. Value 0 is not valid</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_opbytes">--opbytes=#</a>
                </code>
              </p></td>
            <td>Limit bytes in execution batch (default 0 = no limit)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_output-type">--output-type=name</a>
                </code>
              </p></td>
            <td>Output type: ndb is default, null used for testing</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_output-workers">--output-workers=#</a>
                </code>
              </p></td>
            <td>Number of threads processing output or relaying database operations</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_pagesize">--pagesize=#</a>
                </code>
              </p></td>
            <td>Align I/O buffers to given size</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_pagecnt">--pagecnt=#</a>
                </code>
              </p></td>
            <td>Size of I/O buffers as multiple of page size. CSV input worker allocates
              a double-sized buffer</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_polltimeout">--polltimeout=#</a>
                </code>
              </p></td>
            <td>Timeout per poll for completed asynchonous transactions; polling
              continues until all polls are completed, or error occurs</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_rejects">--rejects=#</a>
                </code>
              </p></td>
            <td>Limit number of rejected rows (rows with permanent error) in data load.
              Default is 0 which means that any rejected row causes a
              fatal error. The row exceeding the limit is also added to
              *.rej</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_resume">--resume</a>
                </code>
              </p></td>
            <td>If job aborted (temporary error, user interrupt), resume with rows not
              yet processed</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_rowbatch">--rowbatch=#</a>
                </code>
              </p></td>
            <td>Limit rows in row queues (default 0 = no limit); must be 1 or more if
              --input-type is random</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_rowbytes">--rowbytes=#</a>
                </code>
              </p></td>
            <td>Limit bytes in row queues (0 = no limit)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_state-dir">--state-dir=name</a>
                </code>
              </p></td>
            <td>Where to write state files; currect directory is default</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_stats">--stats</a>
                </code>
              </p></td>
            <td>Save performance and statistics information in
              <code class="filename">*.sto</code> and <code class="filename">*.stt</code>
              files</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_tempdelay">--tempdelay=#</a>
                </code>
              </p></td>
            <td>Number of milliseconds to sleep between temporary errors</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_temperrors">--temperrors=#</a>
                </code>
              </p></td>
            <td>Number of times a transaction can fail due to a temporary error, per
              execution batch; 0 means any temporary error is fatal.
              Such errors do not cause any rows to be written to .rej
              file</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_import_verbose">--verbose=#</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_import_verbose">-v</a>
                </code>
              </p></td>
            <td>Enable verbose output</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_import_abort-on-error"></a>
            <a class="indexterm" name="idm140091589378480"></a>

            <a class="indexterm" name="idm140091589376992"></a>

            <code class="option">--abort-on-error</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for abort-on-error"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--abort-on-error</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Dump core on any fatal error; used for debugging only.
          </p></li><li class="listitem"><p><a name="option_ndb_import_ai-increment"></a>
            <a class="indexterm" name="idm140091589358656"></a>

            <a class="indexterm" name="idm140091589357168"></a>

            <code class="option">--ai-increment</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for ai-increment"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--ai-increment=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            For a table with a hidden primary key, specify the
            autoincrement increment, like the
            <a class="link" href="replication.html#sysvar_auto_increment_increment"><code class="literal">auto_increment_increment</code></a>
            system variable does in the MySQL Server.
          </p></li><li class="listitem"><p><a name="option_ndb_import_ai-offset"></a>
            <a class="indexterm" name="idm140091589330896"></a>

            <a class="indexterm" name="idm140091589329408"></a>

            <code class="option">--ai-offset</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for ai-offset"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--ai-offset=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            For a table with hidden primary key, specify the
            autoincrement offset. Similar to the
            <a class="link" href="replication.html#sysvar_auto_increment_offset"><code class="literal">auto_increment_offset</code></a>
            system variable.
          </p></li><li class="listitem"><p><a name="option_ndb_import_ai-prefetch-sz"></a>
            <a class="indexterm" name="idm140091589303232"></a>

            <a class="indexterm" name="idm140091589301744"></a>

            <code class="option">--ai-prefetch-sz</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for ai-prefetch-sz"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--ai-prefetch-sz=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">1024</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            For a table with a hidden primary key, specify the number of
            autoincrement values that are prefetched. Behaves like the
            <a class="link" href="mysql-cluster.html#sysvar_ndb_autoincrement_prefetch_sz"><code class="literal">ndb_autoincrement_prefetch_sz</code></a>
            system variable does in the MySQL Server.
          </p></li><li class="listitem"><p><a name="option_ndb_import_connections"></a>
            <a class="indexterm" name="idm140091589275408"></a>

            <a class="indexterm" name="idm140091589273920"></a>

            <code class="option">--connections</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for connections"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--connections=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            Number of cluster connections to create.
          </p></li><li class="listitem"><p><a name="option_ndb_import_continue"></a>
            <a class="indexterm" name="idm140091589249104"></a>

            <a class="indexterm" name="idm140091589247616"></a>

            <code class="option">--continue</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for continue"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--continue</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            When a job fails, continue to the next job.
          </p></li><li class="listitem"><p><a name="option_ndb_import_db-workers"></a>
            <a class="indexterm" name="idm140091589229248"></a>

            <a class="indexterm" name="idm140091589227760"></a>

            <code class="option">--db-workers</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for db-workers"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--db-workers=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">4</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            Number of threads, per data node, executing database
            operations.
          </p></li><li class="listitem"><p><a name="option_ndb_import_errins-type"></a>
            <a class="indexterm" name="idm140091589202848"></a>

            <a class="indexterm" name="idm140091589201360"></a>

            <code class="option">--errins-type</code>=<em class="replaceable"><code>name</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for errins-type"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--errins-type=name</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Enumeration</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">[none]</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Valid Values</strong></span></td>
<td><p class="valid-value"><code class="literal">stopjob</code></p><p class="valid-value"><code class="literal">stopall</code></p><p class="valid-value"><code class="literal">sighup</code></p><p class="valid-value"><code class="literal">sigint</code></p><p class="valid-value"><code class="literal">list</code></p></td>
</tr></tbody></table>
</div>
<p>
            Error insert type; use <code class="literal">list</code> as the
            <em class="replaceable"><code>name</code></em> value to obtain all possible
            values. This option is used for testing purposes only.
          </p></li><li class="listitem"><p><a name="option_ndb_import_errins-delay"></a>
            <a class="indexterm" name="idm140091589174064"></a>

            <a class="indexterm" name="idm140091589172576"></a>

            <code class="option">--errins-delay</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for errins-delay"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--errins-delay=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">1000</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            Error insert delay in milliseconds; random variation is
            added. This option is used for testing purposes only.
          </p></li><li class="listitem"><p><a name="option_ndb_import_fields-enclosed-by"></a>
            <a class="indexterm" name="idm140091589147648"></a>

            <a class="indexterm" name="idm140091589146192"></a>

            <code class="option">--fields-enclosed-by</code>=<em class="replaceable"><code>char</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for fields-enclosed-by"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--fields-enclosed-by=char</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">[none]</code></td>
</tr></tbody></table>
</div>
<p>
            This works in the same way as the <code class="literal">FIELDS ENCLOSED
            BY</code> option does for the <a class="link" href="sql-syntax.html#load-data" title="13.2.7 LOAD DATA Syntax"><code class="literal">LOAD
            DATA</code></a> statement, specifying a character to be
            interpeted as quoting field values. For CSV input, this is
            the same as
            <a class="link" href="mysql-cluster.html#option_ndb_import_fields-optionally-enclosed-by"><code class="option">--fields-optionally-enclosed-by</code></a>.
          </p></li><li class="listitem"><p><a name="option_ndb_import_fields-escaped-by"></a>
            <a class="indexterm" name="idm140091589124256"></a>

            <a class="indexterm" name="idm140091589122800"></a>

            <code class="option">--fields-escaped-by</code>=<em class="replaceable"><code>name</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for fields-escaped-by"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--fields-escaped-by=name</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">\</code></td>
</tr></tbody></table>
</div>
<p>
            Specify an escape character in the same way as the
            <code class="literal">FIELDS ESCAPED BY</code> option does for the SQL
            <a class="link" href="sql-syntax.html#load-data" title="13.2.7 LOAD DATA Syntax"><code class="literal">LOAD DATA</code></a> statement.
          </p></li><li class="listitem"><p><a name="option_ndb_import_fields-optionally-enclosed-by"></a>
            <a class="indexterm" name="idm140091589101984"></a>

            <a class="indexterm" name="idm140091589100480"></a>

            <code class="option">--fields-optionally-enclosed-by</code>=<em class="replaceable"><code>char</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for fields-optionally-enclosed-by"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--fields-optionally-enclosed-by=char</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">[none]</code></td>
</tr></tbody></table>
</div>
<p>
            This works in the same way as the <code class="literal">FIELDS OPTIONALLY
            ENCLOSED BY</code> option does for the
            <a class="link" href="sql-syntax.html#load-data" title="13.2.7 LOAD DATA Syntax"><code class="literal">LOAD DATA</code></a> statement,
            specifying a character to be interpeted as optionally
            quoting field values. For CSV input, this is the same as
            <a class="link" href="mysql-cluster.html#option_ndb_import_fields-enclosed-by"><code class="option">--fields-enclosed-by</code></a>.
          </p></li><li class="listitem"><p><a name="option_ndb_import_fields-terminated-by"></a>
            <a class="indexterm" name="idm140091589078512"></a>

            <a class="indexterm" name="idm140091589077056"></a>

            <code class="option">--fields-terminated-by</code>=<em class="replaceable"><code>char</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for fields-terminated-by"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--fields-terminated-by=char</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">\t</code></td>
</tr></tbody></table>
</div>
<p>
            This works in the same way as the <code class="literal">FIELDS TERMINATED
            BY</code> option does for the <a class="link" href="sql-syntax.html#load-data" title="13.2.7 LOAD DATA Syntax"><code class="literal">LOAD
            DATA</code></a> statement, specifying a character to be
            interpeted as the field separator.
          </p></li><li class="listitem"><p><a name="option_ndb_import_idlesleep"></a>
            <a class="indexterm" name="idm140091589056240"></a>

            <a class="indexterm" name="idm140091589054752"></a>

            <code class="option">--idlesleep</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for idlesleep"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--idlesleep=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            Number of milliseconds to sleep waiting for more work to
            perform.
          </p></li><li class="listitem"><p><a name="option_ndb_import_idlespin"></a>
            <a class="indexterm" name="idm140091589029904"></a>

            <a class="indexterm" name="idm140091589028416"></a>

            <code class="option">--idlespin</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for idlespin"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--idlespin=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            Number of times to retry before sleeping.
          </p></li><li class="listitem"><p><a name="option_ndb_import_ignore-lines"></a>
            <a class="indexterm" name="idm140091589003536"></a>

            <a class="indexterm" name="idm140091589002048"></a>

            <code class="option">--ignore-lines</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for ignore-lines"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--ignore-lines=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            Cause ndb_import to ignore the first
            <em class="replaceable"><code>#</code></em> lines of the input file. This
            can be employed to skip a file header that does not contain
            any data.
          </p></li><li class="listitem"><p><a name="option_ndb_import_input-type"></a>
            <a class="indexterm" name="idm140091588976704"></a>

            <a class="indexterm" name="idm140091588975216"></a>

            <code class="option">--input-type</code>=<em class="replaceable"><code>name</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for input-type"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--input-type=name</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Enumeration</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">csv</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Valid Values</strong></span></td>
<td><p class="valid-value"><code class="literal">random</code></p><p class="valid-value"><code class="literal">csv</code></p></td>
</tr></tbody></table>
</div>
<p>
            Set the type of input type. The default is
            <code class="literal">csv</code>; <code class="literal">random</code> is
            intended for testing purposes only. .
          </p></li><li class="listitem"><p><a name="option_ndb_import_input-workers"></a>
            <a class="indexterm" name="idm140091588950608"></a>

            <a class="indexterm" name="idm140091588949120"></a>

            <code class="option">--input-workers</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for input-workers"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--input-workers=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">4</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            Set the number of threads processing input.
          </p></li><li class="listitem"><p><a name="option_ndb_import_keep-state"></a>
            <a class="indexterm" name="idm140091588924304"></a>

            <a class="indexterm" name="idm140091588922816"></a>

            <code class="option">--keep-state</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for keep-state"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--keep-state</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">false</code></td>
</tr></tbody></table>
</div>
<p>
            By default, ndb_import removes all state files (except
            non-empty <code class="filename">*.rej</code> files) when it
            completes a job. Specify this option (nor argument is
            required) to force the program to retain all state files
            instead.
          </p></li><li class="listitem"><p><a name="option_ndb_import_lines-terminated-by"></a>
            <a class="indexterm" name="idm140091588903520"></a>

            <a class="indexterm" name="idm140091588902064"></a>

            <code class="option">--lines-terminated-by</code>=<em class="replaceable"><code>name</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for lines-terminated-by"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--lines-terminated-by=name</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">\n</code></td>
</tr></tbody></table>
</div>
<p>
            This works in the same way as the <code class="literal">LINES TERMINATED
            BY</code> option does for the <a class="link" href="sql-syntax.html#load-data" title="13.2.7 LOAD DATA Syntax"><code class="literal">LOAD
            DATA</code></a> statement, specifying a character to be
            interpeted as end-of-line.
          </p></li><li class="listitem"><p><a name="option_ndb_import_log-level"></a>
            <a class="indexterm" name="idm140091588881184"></a>

            <a class="indexterm" name="idm140091588879696"></a>

            <code class="option">--log-level</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for log-level"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--log-level=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">2</code></td>
</tr></tbody></table>
</div>
<p>
            Performs internal logging at the given level. This option is
            intended primarily for internal and development use.
          </p><p>
            In debug builds of NDB only, the logging level can be set
            using this option to a maximum of 4.
          </p></li><li class="listitem"><p><a name="option_ndb_import_max-rows"></a>
            <a class="indexterm" name="idm140091588854304"></a>

            <a class="indexterm" name="idm140091588852816"></a>

            <code class="option">--max-rows</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for max-rows"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--max-rows=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            Import only this number of input data rows; the default is
            0, which imports all rows.
          </p></li><li class="listitem"><p><a name="option_ndb_import_monitor"></a>
            <a class="indexterm" name="idm140091588827888"></a>

            <a class="indexterm" name="idm140091588826400"></a>

            <code class="option">--monitor</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for monitor"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--monitor=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">2</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            Periodically print the status of a running job if something
            has changed (status, rejected rows, temporary errors). Set
            to 0 to disable this reporting. Setting to 1 prints any
            change that is seen. Higher values reduce the frequency of
            this status reporting.
          </p></li><li class="listitem"><p><a name="option_ndb_import_no-asynch"></a>
            <a class="indexterm" name="idm140091588801328"></a>

            <a class="indexterm" name="idm140091588799840"></a>

            <code class="option">--no-asynch</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for no-asynch"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--no-asynch</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Run database operations as batches, in single transactions.
          </p></li><li class="listitem"><p><a name="option_ndb_import_no-hint"></a>
            <a class="indexterm" name="idm140091588781504"></a>

            <a class="indexterm" name="idm140091588780016"></a>

            <code class="option">--no-hint</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for no-hint"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--no-hint</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Do not use distribution key hinting to select a data node.
          </p></li><li class="listitem"><p><a name="option_ndb_import_opbatch"></a>
            <a class="indexterm" name="idm140091588761632"></a>

            <a class="indexterm" name="idm140091588760144"></a>

            <code class="option">--opbatch</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for opbatch"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--opbatch=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">256</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            Set a limit on the number of operations (including blob
            operations), and thus the number of asynchronous
            transactions, per execution batch.
          </p></li><li class="listitem"><p><a name="option_ndb_import_opbytes"></a>
            <a class="indexterm" name="idm140091588735200"></a>

            <a class="indexterm" name="idm140091588733712"></a>

            <code class="option">--opbytes</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for opbytes"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--opbytes=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            Set a limit on the number of bytes per execution batch. Use
            0 for no limit.
          </p></li><li class="listitem"><p><a name="option_ndb_import_output-type"></a>
            <a class="indexterm" name="idm140091588708864"></a>

            <a class="indexterm" name="idm140091588707376"></a>

            <code class="option">--output-type</code>=<em class="replaceable"><code>name</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for output-type"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--output-type=name</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Enumeration</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">ndb</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Valid Values</strong></span></td>
<td><code class="literal">null</code></td>
</tr></tbody></table>
</div>
<p>
            Set the output type. <code class="literal">ndb</code> is the default.
            <code class="literal">null</code> is used only for testing.
          </p></li><li class="listitem"><p><a name="option_ndb_import_output-workers"></a>
            <a class="indexterm" name="idm140091588684128"></a>

            <a class="indexterm" name="idm140091588682640"></a>

            <code class="option">--output-workers</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for output-workers"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--output-workers=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">2</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            Set the number of threads processing output or relaying
            database operations.
          </p></li><li class="listitem"><p><a name="option_ndb_import_pagesize"></a>
            <a class="indexterm" name="idm140091588657776"></a>

            <a class="indexterm" name="idm140091588656288"></a>

            <code class="option">--pagesize</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for pagesize"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--pagesize=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">4096</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            Align I/O buffers to the given size.
          </p></li><li class="listitem"><p><a name="option_ndb_import_pagecnt"></a>
            <a class="indexterm" name="idm140091588631456"></a>

            <a class="indexterm" name="idm140091588629968"></a>

            <code class="option">--pagecnt</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for pagecnt"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--pagecnt=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">64</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            Set the size of I/O buffers as multiple of page size. The
            CSV input worker allocates buffer that is doubled in size.
          </p></li><li class="listitem"><p><a name="option_ndb_import_polltimeout"></a>
            <a class="indexterm" name="idm140091588604992"></a>

            <a class="indexterm" name="idm140091588603504"></a>

            <code class="option">--polltimeout</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for polltimeout"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--polltimeout=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">1000</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            Set a timeout per poll for completed asynchonous
            transactions; polling continues until all polls are
            completed, or until an error occurs.
          </p></li><li class="listitem"><p><a name="option_ndb_import_rejects"></a>
            <a class="indexterm" name="idm140091588578464"></a>

            <a class="indexterm" name="idm140091588576976"></a>

            <code class="option">--rejects</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for rejects"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--rejects=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            Limit the number of rejected rows (rows with permanent
            errors) in the data load. The default is 0, which means that
            any rejected row causes a fatal error. Any rows causing the
            limit to be exceeded are added to the
            <code class="filename">.rej</code> file.
          </p><p>
            The limit imposed by this option is effective for the
            duration of the current run. A run restarted using
            <a class="link" href="mysql-cluster.html#option_ndb_import_resume"><code class="option">--resume</code></a> is considered a
            <span class="quote">“<span class="quote">new</span>”</span> run for this purpose.
          </p></li><li class="listitem"><p><a name="option_ndb_import_resume"></a>
            <a class="indexterm" name="idm140091588549200"></a>

            <a class="indexterm" name="idm140091588547712"></a>

            <code class="option">--resume</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for resume"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--resume</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            If a job is aborted (due to a temporary db error or when
            interrupted by the user), resume with any rows not yet
            processed.
          </p></li><li class="listitem"><p><a name="option_ndb_import_rowbatch"></a>
            <a class="indexterm" name="idm140091588529296"></a>

            <a class="indexterm" name="idm140091588527808"></a>

            <code class="option">--rowbatch</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for rowbatch"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--rowbatch=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            Set a limit on the number of rows per row queue. Use 0 for
            no limit.
          </p></li><li class="listitem"><p><a name="option_ndb_import_rowbytes"></a>
            <a class="indexterm" name="idm140091588502896"></a>

            <a class="indexterm" name="idm140091588501408"></a>

            <code class="option">--rowbytes</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for rowbytes"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--rowbytes=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">262144</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            Set a limit on the number of bytes per row queue. Use 0 for
            no limit.
          </p></li><li class="listitem"><p><a name="option_ndb_import_stats"></a>
            <a class="indexterm" name="idm140091588476560"></a>

            <a class="indexterm" name="idm140091588475104"></a>

            <code class="option">--stats</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for stats"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--stats</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">false</code></td>
</tr></tbody></table>
</div>
<p>
            Save information about options related to performance and
            other internal statistics in files named
            <code class="filename">*.sto</code> and <code class="filename">*.stt</code>.
            These files are always kept on successful completion (even
            if <a class="link" href="mysql-cluster.html#option_ndb_import_keep-state"><code class="option">--keep-state</code></a> is not
            also specified).
          </p></li><li class="listitem"><p><a name="option_ndb_import_state-dir"></a>
            <a class="indexterm" name="idm140091588454128"></a>

            <a class="indexterm" name="idm140091588452640"></a>

            <code class="option">
            --state-dir</code>=<em class="replaceable"><code>name</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for state-dir"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--state-dir=name</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">.</code></td>
</tr></tbody></table>
</div>
<p>
            Where to write the state files
            (<code class="filename"><em class="replaceable"><code>tbl_name</code></em>.map</code>,
            <code class="filename"><em class="replaceable"><code>tbl_name</code></em>.rej</code>,
            <code class="filename"><em class="replaceable"><code>tbl_name</code></em>.res</code>,
            and
            <code class="filename"><em class="replaceable"><code>tbl_name</code></em>.stt</code>)
            produced by a run of the program; the default is the current
            directory.
          </p></li><li class="listitem"><p><a name="option_ndb_import_tempdelay"></a>
            <a class="indexterm" name="idm140091588429712"></a>

            <a class="indexterm" name="idm140091588428224"></a>

            <code class="option">--tempdelay</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for tempdelay"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--tempdelay=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">10</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            Number of milliseconds to sleep between temporary errors.
          </p></li><li class="listitem"><p><a name="option_ndb_import_temperrors"></a>
            <a class="indexterm" name="idm140091588403328"></a>

            <a class="indexterm" name="idm140091588401840"></a>

            <code class="option">--temperrors</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for temperrors"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--temperrors=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            Number of times a transaction can fail due to a temporary
            error, per execution batch. The default is 0, which means
            that any temporary error is fatal. Temporary errors do not
            cause any rows to be added to the <code class="filename">.rej</code>
            file.
          </p></li><li class="listitem"><p><a name="option_ndb_import_verbose"></a>
            <a class="indexterm" name="idm140091588376032"></a>

            <a class="indexterm" name="idm140091588374544"></a>

            <code class="option">--verbose</code>, <code class="option">-v</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for verbose"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--verbose</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">false</code></td>
</tr></tbody></table>
</div>
<p>
            Enable verbose output.
</p></li></ul>
</div>
<p>
        As with <a class="link" href="sql-syntax.html#load-data" title="13.2.7 LOAD DATA Syntax"><code class="literal">LOAD DATA</code></a>, options for
        field and line formatting much match those used to create the
        CSV file, whether this was done using
        <a class="link" href="sql-syntax.html#select-into" title="13.2.10.1 SELECT ... INTO Syntax"><code class="literal">SELECT INTO ...
        OUTFILE</code></a>, or by some other means. There is no
        equivalent to the <a class="link" href="sql-syntax.html#load-data" title="13.2.7 LOAD DATA Syntax"><code class="literal">LOAD DATA</code></a>
        statement <code class="literal">STARTING WITH</code> option.
      </p><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-import" title="22.4.13 ndb_import — Import CSV Data Into NDB"><span class="command"><strong>ndb_import</strong></span></a> was added in NDB 7.6.2.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-index-stat"></a>22.4.14 <span class="command"><strong>ndb_index_stat</strong></span> — NDB Index Statistics Utility</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091588348240"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-index-stat" title="22.4.14 ndb_index_stat — NDB Index Statistics Utility"><span class="command"><strong>ndb_index_stat</strong></span></a> provides per-fragment
        statistical information about indexes on <code class="literal">NDB</code>
        tables. This includes cache version and age, number of index
        entries per partition, and memory consumption by indexes.
</p>
<h4><a name="idm140091588344512"></a>Usage</h4>
<p>
        To obtain basic index statistics about a given
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table, invoke
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-index-stat" title="22.4.14 ndb_index_stat — NDB Index Statistics Utility"><span class="command"><strong>ndb_index_stat</strong></span></a> as shown here, with the name
        of the table as the first argument and the name of the database
        containing this table specified immediately following it, using
        the <a class="link" href="mysql-cluster.html#option_ndb_index_stat_database"><code class="option">--database</code></a>
        (<code class="option">-d</code>) option:
      </p><pre data-lang="terminal" class="programlisting">
ndb_index_stat <em class="replaceable"><code>table</code></em> -d <em class="replaceable"><code>database</code></em>
</pre><p>
        In this example, we use <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-index-stat" title="22.4.14 ndb_index_stat — NDB Index Statistics Utility"><span class="command"><strong>ndb_index_stat</strong></span></a> to
        obtain such information about an <code class="literal">NDB</code> table
        named <code class="literal">mytable</code> in the <code class="literal">test</code>
        database:
      </p><a class="indexterm" name="idm140091588333488"></a><a class="indexterm" name="idm140091588332000"></a><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_index_stat -d test mytable</code></strong>
table:City index:PRIMARY fragCount:2
sampleVersion:3 loadTime:1399585986 sampleCount:1994 keyBytes:7976
query cache: valid:1 sampleCount:1994 totalBytes:27916
times in ms: save: 7.133 sort: 1.974 sort per sample: 0.000

NDBT_ProgramExit: 0 - OK
</pre><p>
        <code class="literal">sampleVersion</code> is the version number of the
        cache from which the statistics data is taken. Running
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-index-stat" title="22.4.14 ndb_index_stat — NDB Index Statistics Utility"><span class="command"><strong>ndb_index_stat</strong></span></a> with the
        <a class="link" href="mysql-cluster.html#option_ndb_index_stat_update"><code class="option">--update</code></a> option causes
        sampleVersion to be incremented.
      </p><p>
        <code class="literal">loadTime</code> shows when the cache was last
        updated. This is expressed as seconds since the Unix Epoch.
      </p><p>
        <code class="literal">sampleCount</code> is the number of index entries
        found per partition. You can estimate the total number of
        entries by multiplying this by the number of fragments (shown as
        <code class="literal">fragCount</code>).
      </p><p>
        <code class="literal">sampleCount</code> can be compared with the
        cardinality of <a class="link" href="sql-syntax.html#show-index" title="13.7.6.22 SHOW INDEX Syntax"><code class="literal">SHOW INDEX</code></a> or
        <a class="link" href="information-schema.html#statistics-table" title="25.26 The INFORMATION_SCHEMA STATISTICS Table"><code class="literal">INFORMATION_SCHEMA.STATISTICS</code></a>,
        although the latter two provide a view of the table as a whole,
        while <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-index-stat" title="22.4.14 ndb_index_stat — NDB Index Statistics Utility"><span class="command"><strong>ndb_index_stat</strong></span></a> provides a per-fragment
        average.
      </p><p>
        <code class="literal">keyBytes</code> is the number of bytes used by the
        index. In this example, the primary key is an integer, which
        requires four bytes for each index, so
        <code class="literal">keyBytes</code> can be calculated in this case as
        shown here:
      </p><pre data-lang="simple" class="programlisting">
    keyBytes = sampleCount * (4 bytes per index) = 1994 * 4 = 7976
</pre><p>
        This information can also be obtained using the corresponding
        column definitions from
        <a class="link" href="information-schema.html#columns-table" title="25.6 The INFORMATION_SCHEMA COLUMNS Table"><code class="literal">INFORMATION_SCHEMA.COLUMNS</code></a> (this
        requires a MySQL Server and a MySQL client application).
      </p><p>
        <code class="literal">totalBytes</code> is the total memory consumed by
        all indexes on the table, in bytes.
      </p><p>
        Timings shown in the preceding examples are specific to each
        invocation of <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-index-stat" title="22.4.14 ndb_index_stat — NDB Index Statistics Utility"><span class="command"><strong>ndb_index_stat</strong></span></a>.
      </p><p>
        The <a class="link" href="mysql-cluster.html#option_ndb_index_stat_verbose"><code class="option">--verbose</code></a> option
        provides some additional output, as shown here:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_index_stat -d test mytable --verbose</code></strong>
random seed 1337010518
connected
loop 1 of 1
table:mytable index:PRIMARY fragCount:4
sampleVersion:2 loadTime:1336751773 sampleCount:0 keyBytes:0
read stats
query cache created
query cache: valid:1 sampleCount:0 totalBytes:0
times in ms: save: 20.766 sort: 0.001
disconnected

NDBT_ProgramExit: 0 - OK

shell&gt;
</pre><p>
        If the only output from the program is
        <code class="literal">NDBT_ProgramExit: 0 - OK</code>, this may indicate
        that no statistics yet exist. To force them to be created (or
        updated if they already exist), invoke
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-index-stat" title="22.4.14 ndb_index_stat — NDB Index Statistics Utility"><span class="command"><strong>ndb_index_stat</strong></span></a> with the
        <a class="link" href="mysql-cluster.html#option_ndb_index_stat_update"><code class="option">--update</code></a> option, or
        execute <a class="link" href="sql-syntax.html#analyze-table" title="13.7.3.1 ANALYZE TABLE Syntax"><code class="literal">ANALYZE TABLE</code></a> on the
        table in the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client.
</p>
<h4><a name="idm140091588299008"></a>Options</h4>
<p>
        The following table includes options that are specific to the
        NDB Cluster <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-index-stat" title="22.4.14 ndb_index_stat — NDB Index Statistics Utility"><span class="command"><strong>ndb_index_stat</strong></span></a> utility.
        Additional descriptions are listed following the table. For
        options common to most NDB Cluster programs (including
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-index-stat" title="22.4.14 ndb_index_stat — NDB Index Statistics Utility"><span class="command"><strong>ndb_index_stat</strong></span></a>), see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
</p>
<div class="table">
<a name="mysql-cluster-ndb_index_stat-options-table"></a><p class="title"><b>Table 22.346 Command-line options for the ndb_index_stat program</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_index_stat_database">--database=name</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_database">-d</a>
                </code>
              </p></td>
            <td>Name of the database containing the table.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_delete">--delete</a>
                </code>
              </p></td>
            <td>Delete index statistics for the given table, stopping any auto-update
              previously configured.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_update">--update</a>
                </code>
              </p></td>
            <td>Update index statistics for the given table, restarting any auto-update
              previously configured.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_dump">--dump</a>
                </code>
              </p></td>
            <td>Print the query cache.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_query">--query=#</a>
                </code>
              </p></td>
            <td>Perform a number of random range queries on first key attr (must be int
              unsigned).</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_sys-drop">--sys-drop</a>
                </code>
              </p></td>
            <td>Drop any statistics tables and events in NDB kernel (all statistics are
              lost)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_sys-create">--sys-create</a>
                </code>
              </p></td>
            <td>Create all statistics tables and events in NDB kernel, if none of them
              already exist</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_sys-create-if-not-exist">--sys-create-if-not-exist</a>
                </code>
              </p></td>
            <td>Create any statistics tables and events in NDB kernel that do not
              already exist.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_sys-create-if-not-valid">--sys-create-if-not-valid</a>
                </code>
              </p></td>
            <td>Create any statistics tables or events that do not already exist in the
              NDB kernel. after dropping any that are invalid.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_sys-check">--sys-check</a>
                </code>
              </p></td>
            <td>Verify that NDB system index statistics and event tables exist.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_sys-skip-tables">--sys-skip-tables</a>
                </code>
              </p></td>
            <td>Do not apply sys-* options to tables.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_sys-skip-events">--sys-skip-events</a>
                </code>
              </p></td>
            <td>Do not apply sys-* options to events.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_index_stat_verbose">--verbose</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_verbose">-v</a>
                </code>
              </p></td>
            <td>Turn on verbose output</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_loops">--loops=#</a>
                </code>
              </p></td>
            <td>Set the number of times to perform a given command. Default is 0.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p><a name="ndb-index-stat-options-statistics"></a><b>ndb_index_stat statistics options. </b>
          The following options are used to generate index statistics.
          They work with a given table and database. They cannot be
          mixed with system options (see
          <a class="xref" href="mysql-cluster.html#ndb-index-stat-options-system" title="ndb_index_stat system options">ndb_index_stat system options</a>).
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_index_stat_database"></a>
            <a class="indexterm" name="idm140091588200848"></a>

            <a class="indexterm" name="idm140091588199808"></a>

            <code class="option">--database=<em class="replaceable"><code>name</code></em></code>,
            <code class="option">-d <em class="replaceable"><code>name</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for database"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--database=name</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">[none]</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal"></code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            The name of the database that contains the table being
            queried.
          </p></li><li class="listitem"><p><a name="option_ndb_index_stat_delete"></a>
            <a class="indexterm" name="idm140091588174912"></a>

            <code class="option">--delete</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for delete"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--delete</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">false</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal"></code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            Delete the index statistics for the given table, stopping
            any auto-update that was previously configured.
          </p></li><li class="listitem"><p><a name="option_ndb_index_stat_update"></a>
            <a class="indexterm" name="idm140091588151072"></a>

            <code class="option">--update</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for update"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--update</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">false</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal"></code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            Update the index statistics for the given table, and restart
            any auto-update that was previously configured.
          </p></li><li class="listitem"><p><a name="option_ndb_index_stat_dump"></a>
            <a class="indexterm" name="idm140091588127232"></a>

            <code class="option">--dump</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for dump"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--dump</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">false</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal"></code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            Dump the contents of the query cache.
          </p></li><li class="listitem"><p><a name="option_ndb_index_stat_query"></a>
            <a class="indexterm" name="idm140091588103408"></a>

            <code class="option">--query=<em class="replaceable"><code>#</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for query"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--query=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Numeric</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">MAX_INT</code></td>
</tr></tbody></table>
</div>
<p>
            Perform random range queries on first key attribute (must be
            int unsigned).
</p></li></ul>
</div>
<p><a name="ndb-index-stat-options-system"></a><b>ndb_index_stat system options. </b>
          The following options are used to generate and update the
          statistics tables in the NDB kernel. None of these options can
          be mixed with statistics options (see
          <a class="xref" href="mysql-cluster.html#ndb-index-stat-options-statistics" title="ndb_index_stat statistics options">ndb_index_stat statistics options</a>).
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_index_stat_sys-drop"></a>
            <a class="indexterm" name="idm140091588076048"></a>

            <code class="option">--sys-drop</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for sys-drop"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--sys-drop</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">false</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal"></code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            Drop all statistics tables and events in the NDB kernel.
            <span class="emphasis"><em>This causes all statistics to be lost</em></span>.
          </p></li><li class="listitem"><p><a name="option_ndb_index_stat_sys-create"></a>
            <a class="indexterm" name="idm140091588051808"></a>

            <code class="option">--sys-create</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for sys-create"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--sys-create</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">false</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal"></code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            Create all statistics tables and events in the NDB kernel.
            This works only if none of them exist previously.
          </p></li><li class="listitem"><p><a name="option_ndb_index_stat_sys-create-if-not-exist"></a>
            <a class="indexterm" name="idm140091588027904"></a>

            <code class="option">sys-create-if-not-exist</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for sys-create-if-not-exist"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--sys-create-if-not-exist</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">false</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal"></code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            Create any NDB system statistics tables or events (or both)
            that do not already exist when the program is invoked.
          </p></li><li class="listitem"><p><a name="option_ndb_index_stat_sys-create-if-not-valid"></a>
            <a class="indexterm" name="idm140091588003920"></a>

            <code class="option">--sys-create-if-not-valid</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for sys-create-if-not-valid"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--sys-create-if-not-valid</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">false</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal"></code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            Create any NDB system statistics tables or events that do
            not already exist, after dropping any that are invalid.
          </p></li><li class="listitem"><p><a name="option_ndb_index_stat_sys-check"></a>
            <a class="indexterm" name="idm140091587980032"></a>

            <code class="option">--sys-check</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for sys-check"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--sys-check</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">false</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal"></code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            Verify that all required system statistics tables and events
            exist in the NDB kernel.
          </p></li><li class="listitem"><p><a name="option_ndb_index_stat_sys-skip-tables"></a>
            <a class="indexterm" name="idm140091587956128"></a>

            <code class="option">--sys-skip-tables</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for sys-skip-tables"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--sys-skip-tables</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">false</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal"></code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            Do not apply any <code class="option">--sys-*</code> options to any
            statistics tables.
          </p></li><li class="listitem"><p><a name="option_ndb_index_stat_sys-skip-events"></a>
            <a class="indexterm" name="idm140091587931888"></a>

            <code class="option">--sys-skip-events</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for sys-skip-events"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--sys-skip-events</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">false</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal"></code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            Do not apply any <code class="option">--sys-*</code> options to any
            events.
          </p></li><li class="listitem"><p><a name="option_ndb_index_stat_verbose"></a>
            <a class="indexterm" name="idm140091587907664"></a>

            <code class="option">--verbose</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for verbose"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--verbose</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">false</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal"></code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            Turn on verbose output.
          </p></li><li class="listitem"><p><a name="option_ndb_index_stat_loops"></a>
            <a class="indexterm" name="idm140091587883856"></a>

            <code class="option">--loops=<em class="replaceable"><code>#</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for loops"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--loops=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Numeric</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">MAX_INT</code></td>
</tr></tbody></table>
</div>
<p>
            Repeat commands this number of times (for use in testing).
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-move-data"></a>22.4.15 <span class="command"><strong>ndb_move_data</strong></span> — NDB Data Copy Utility</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091587858576"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-move-data" title="22.4.15 ndb_move_data — NDB Data Copy Utility"><span class="command"><strong>ndb_move_data</strong></span></a> copies data from one NDB table
        to another.
</p>
<h4><a name="idm140091587855680"></a>Usage</h4>
<p>
        The program is invoked with the names of the source and target
        tables; either or both of these may be qualified optionally with
        the database name. Both tables must use the NDB storage engine.
      </p><pre data-lang="terminal" class="programlisting">
ndb_move_data <em class="replaceable"><code>options</code></em> <em class="replaceable"><code>source</code></em> <em class="replaceable"><code>target</code></em>
</pre><p>
        The following table includes options that are specific to
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-move-data" title="22.4.15 ndb_move_data — NDB Data Copy Utility"><span class="command"><strong>ndb_move_data</strong></span></a>. Additional descriptions follow
        the table. For options common to most NDB Cluster programs
        (including <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-move-data" title="22.4.15 ndb_move_data — NDB Data Copy Utility"><span class="command"><strong>ndb_move_data</strong></span></a>), see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
</p>
<div class="table">
<a name="mysql-cluster-ndb_move_data-options-table"></a><p class="title"><b>Table 22.347 Command-line options for the ndb_move_data program</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_move_data_abort-on-error">--abort-on-error</a>
                </code>
              </p></td>
            <td>Dump core on permanent error (debug option)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_move_data_character-sets-dir">--character-sets-dir=name</a>
                </code>
              </p></td>
            <td>Directory where character sets are</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_move_data_database">--database=dbname</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_move_data_database">-d</a>
                </code>
              </p></td>
            <td>Name of the database in which the table is found</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_move_data_drop-source">--drop-source</a>
                </code>
              </p></td>
            <td>Drop source table after all rows have been moved</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_move_data_error-insert">--error-insert</a>
                </code>
              </p></td>
            <td>Insert random temporary errors (testing option)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_move_data_exclude-missing-columns">--exclude-missing-columns</a>
                </code>
              </p></td>
            <td>Ignore extra columns in source or target table</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_move_data_lossy-conversions">--lossy-conversions</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_move_data_lossy-conversions">-l</a>
                </code>
              </p></td>
            <td>Allow attribute data to be truncated when converted to a smaller type</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_move_data_promote-attributes">--promote-attributes</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_move_data_promote-attributes">-A</a>
                </code>
              </p></td>
            <td>Allow attribute data to be converted to a larger type</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_move_data_staging-tries">--staging-tries=x[,y[,z]]</a>
                </code>
              </p></td>
            <td>Specify tries on temporary errors. Format is x[,y[,z]] where x=max tries
              (0=no limit), y=min delay (ms), z=max delay (ms)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_move_data_verbose">--verbose</a>
                </code>
              </p></td>
            <td>Enable verbose messages</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_move_data_abort-on-error"></a>
            <a class="indexterm" name="idm140091587778336"></a>

            <a class="indexterm" name="idm140091587776848"></a>

            <code class="option">--abort-on-error</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for abort-on-error"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--abort-on-error</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Dump core on permanent error (debug option).
          </p></li><li class="listitem"><p><a name="option_ndb_move_data_character-sets-dir"></a>
            <a class="indexterm" name="idm140091587758528"></a>

            <a class="indexterm" name="idm140091587757072"></a>

            <code class="option">--character-sets-dir</code>=<em class="replaceable"><code>name</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for character-sets-dir"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--character-sets-dir=name</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">[none]</code></td>
</tr></tbody></table>
</div>
<p>
            Directory where character sets are.
          </p></li><li class="listitem"><p><a name="option_ndb_move_data_database"></a>
            <a class="indexterm" name="idm140091587738256"></a>

            <a class="indexterm" name="idm140091587736768"></a>

            <code class="option">--database</code>=<em class="replaceable"><code>dbname</code></em>,
            <code class="option">-d</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for database"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--database=dbname</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">TEST_DB</code></td>
</tr></tbody></table>
</div>
<p>
            Name of the database in which the table is found.
          </p></li><li class="listitem"><p><a name="option_ndb_move_data_drop-source"></a>
            <a class="indexterm" name="idm140091587717616"></a>

            <a class="indexterm" name="idm140091587716128"></a>

            <code class="option">--drop-source</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for drop-source"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--drop-source</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Drop source table after all rows have been moved.
          </p></li><li class="listitem"><p><a name="option_ndb_move_data_error-insert"></a>
            <a class="indexterm" name="idm140091587697792"></a>

            <a class="indexterm" name="idm140091587696304"></a>

            <code class="option">--error-insert</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for error-insert"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--error-insert</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Insert random temporary errors (testing option).
          </p></li><li class="listitem"><p><a name="option_ndb_move_data_exclude-missing-columns"></a>
            <a class="indexterm" name="idm140091587677920"></a>

            <a class="indexterm" name="idm140091587676416"></a>

            <code class="option">--exclude-missing-columns</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for exclude-missing-columns"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--exclude-missing-columns</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Ignore extra columns in source or target table.
          </p></li><li class="listitem"><p><a name="option_ndb_move_data_lossy-conversions"></a>
            <a class="indexterm" name="idm140091587658064"></a>

            <a class="indexterm" name="idm140091587656608"></a>

            <code class="option">--lossy-conversions</code>, <code class="option">-l</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for lossy-conversions"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--lossy-conversions</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Allow attribute data to be truncated when converted to a
            smaller type.
          </p></li><li class="listitem"><p><a name="option_ndb_move_data_promote-attributes"></a>
            <a class="indexterm" name="idm140091587637728"></a>

            <a class="indexterm" name="idm140091587636272"></a>

            <code class="option">--promote-attributes</code>, <code class="option">-A</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for promote-attributes"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--promote-attributes</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Allow attribute data to be converted to a larger type.
          </p></li><li class="listitem"><p><a name="option_ndb_move_data_staging-tries"></a>
            <a class="indexterm" name="idm140091587617488"></a>

            <a class="indexterm" name="idm140091587616000"></a>

            <code class="option">--staging-tries</code>=<em class="replaceable"><code>x[,y[,z]]</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for staging-tries"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--staging-tries=x[,y[,z]]</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">0,1000,60000</code></td>
</tr></tbody></table>
</div>
<p>
            Specify tries on temporary errors. Format is x[,y[,z]] where
            x=max tries (0=no limit), y=min delay (ms), z=max delay
            (ms).
          </p></li><li class="listitem"><p><a name="option_ndb_move_data_verbose"></a>
            <a class="indexterm" name="idm140091587597136"></a>

            <a class="indexterm" name="idm140091587595648"></a>

            <code class="option">--verbose</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for verbose"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--verbose</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Enable verbose messages.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-perror"></a>22.4.16 <span class="command"><strong>ndb_perror</strong></span> — Obtain NDB Error Message Information</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091587576448"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-perror" title="22.4.16 ndb_perror — Obtain NDB Error Message Information"><span class="command"><strong>ndb_perror</strong></span></a> shows information about an NDB
        error, given its error code. This includes the error message,
        the type of error, and whether the error is permanent or
        temporary. Added to the MySQL NDB Cluster distribution in NDB
        7.6.4, it is intended as a drop-in replacement for
        <a class="link" href="programs.html#perror" title="4.8.2 perror — Display MySQL Error Message Information"><span class="command"><strong>perror</strong></span></a> <a class="link" href="programs.html#option_perror_ndb"><code class="option">--ndb</code></a>.
</p>
<h4><a name="idm140091587571328"></a>Usage</h4>
<pre data-lang="terminal" class="programlisting">
ndb_perror [<em class="replaceable"><code>options</code></em>] <em class="replaceable"><code>error_code</code></em>
</pre><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-perror" title="22.4.16 ndb_perror — Obtain NDB Error Message Information"><span class="command"><strong>ndb_perror</strong></span></a> does not need to access a running
        NDB Cluster, or any nodes (including SQL nodes). To view
        information about a given NDB error, invoke the program, using
        the error code as an argument, like this:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_perror 323</code></strong>
NDB error code 323: Invalid nodegroup id, nodegroup already existing: Permanent error: Application error
</pre><p>
        To display only the error message, invoke
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-perror" title="22.4.16 ndb_perror — Obtain NDB Error Message Information"><span class="command"><strong>ndb_perror</strong></span></a> with the
        <a class="link" href="mysql-cluster.html#option_ndb_perror_silent"><code class="option">--silent</code></a> option (short form
        <code class="option">-s</code>), as shown here:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_perror -s 323</code></strong>
Invalid nodegroup id, nodegroup already existing: Permanent error: Application error
</pre><p>
        Like <a class="link" href="programs.html#perror" title="4.8.2 perror — Display MySQL Error Message Information"><span class="command"><strong>perror</strong></span></a>, <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-perror" title="22.4.16 ndb_perror — Obtain NDB Error Message Information"><span class="command"><strong>ndb_perror</strong></span></a>
        accepts multiple error codes:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_perror 321 1001</code></strong>
NDB error code 321: Invalid nodegroup id: Permanent error: Application error
NDB error code 1001: Illegal connect string
</pre><p>
        Additional program options for <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-perror" title="22.4.16 ndb_perror — Obtain NDB Error Message Information"><span class="command"><strong>ndb_perror</strong></span></a> are
        described later in this section.
      </p><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-perror" title="22.4.16 ndb_perror — Obtain NDB Error Message Information"><span class="command"><strong>ndb_perror</strong></span></a> replaces <a class="link" href="programs.html#perror" title="4.8.2 perror — Display MySQL Error Message Information"><span class="command"><strong>perror</strong></span></a>
        <code class="option">--ndb</code>, which is deprecated as of NDB 7.6.4 and
        subject to removal in a future release of MySQL NDB Cluster. To
        make substitution easier in scripts and other applications that
        might depend on <a class="link" href="programs.html#perror" title="4.8.2 perror — Display MySQL Error Message Information"><span class="command"><strong>perror</strong></span></a> for obtaining NDB
        error information, <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-perror" title="22.4.16 ndb_perror — Obtain NDB Error Message Information"><span class="command"><strong>ndb_perror</strong></span></a> supports its
        own <span class="quote">“<span class="quote">dummy</span>”</span>
        <a class="link" href="mysql-cluster.html#option_ndb_perror_ndb"><code class="option">--ndb</code></a> option, which does
        nothing.
      </p><p>
        The following table includes all options that are specific to
        the NDB Cluster program <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-perror" title="22.4.16 ndb_perror — Obtain NDB Error Message Information"><span class="command"><strong>ndb_perror</strong></span></a>.
        Additional descriptions follow the table.
</p>
<div class="table">
<a name="mysql-cluster-ndb_perror-options-table"></a><p class="title"><b>Table 22.348 Command-line options for the ndb_perror program</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_perror_help">--help</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_perror_help">-?</a>
                </code>
              </p></td>
            <td>Display help text</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_perror_ndb">--ndb</a>
                </code>
              </p></td>
            <td>For compatibility with applications depending on old versions of perror;
              does nothing</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_perror_silent">--silent</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_perror_silent">-s</a>
                </code>
              </p></td>
            <td>Show error message only</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_perror_version">--version</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_perror_version">-V</a>
                </code>
              </p></td>
            <td>Print program version information and exit</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_perror_verbose">--verbose</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_perror_verbose">-v</a>
                </code>
              </p></td>
            <td>Verbose output; disable with --silent</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<h4><a name="mysql-cluster-programs-ndb-perror-additional-options"></a>Additional Options</h4>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_perror_help"></a>
            <a class="indexterm" name="idm140091587500512"></a>

            <a class="indexterm" name="idm140091587499056"></a>

            <code class="option">--help</code>, <code class="option">-?</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for help"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--help</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table>
</div>
<p>
            Display program help text and exit.
          </p></li><li class="listitem"><p><a name="option_ndb_perror_ndb"></a>
            <a class="indexterm" name="idm140091587480368"></a>

            <a class="indexterm" name="idm140091587478912"></a>

            <code class="option">--ndb</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for ndb"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--ndb</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table>
</div>
<p>
            For compatibility with applications depending on old
            versions of <a class="link" href="programs.html#perror" title="4.8.2 perror — Display MySQL Error Message Information"><span class="command"><strong>perror</strong></span></a> that use that
            program's <a class="link" href="programs.html#option_perror_ndb"><code class="option">--ndb</code></a> option.
            The option when used with <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-perror" title="22.4.16 ndb_perror — Obtain NDB Error Message Information"><span class="command"><strong>ndb_perror</strong></span></a> does
            nothing, and is ignored by it.
          </p></li><li class="listitem"><p><a name="option_ndb_perror_silent"></a>
            <a class="indexterm" name="idm140091587456976"></a>

            <a class="indexterm" name="idm140091587455488"></a>

            <code class="option">--silent</code>, <code class="option">-s</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for silent"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--silent</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table>
</div>
<p>
            Show error message only.
          </p></li><li class="listitem"><p><a name="option_ndb_perror_version"></a>
            <a class="indexterm" name="idm140091587436816"></a>

            <a class="indexterm" name="idm140091587435328"></a>

            <code class="option">--version</code>, <code class="option">-V</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for version"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--version</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table>
</div>
<p>
            Print program version information and exit.
          </p></li><li class="listitem"><p><a name="option_ndb_perror_verbose"></a>
            <a class="indexterm" name="idm140091587416640"></a>

            <a class="indexterm" name="idm140091587415152"></a>

            <code class="option">--verbose</code>, <code class="option">-v</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for verbose"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--verbose</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table>
</div>
<p>
            Verbose output; disable with
            <a class="link" href="mysql-cluster.html#option_ndb_perror_silent"><code class="option">--silent</code></a>.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-print-backup-file"></a>22.4.17 <span class="command"><strong>ndb_print_backup_file</strong></span> — Print NDB Backup File Contents</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091587394496"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-backup-file" title="22.4.17 ndb_print_backup_file — Print NDB Backup File Contents"><span class="command"><strong>ndb_print_backup_file</strong></span></a> obtains diagnostic
        information from a cluster backup file.
</p>
<h4><a name="idm140091587391552"></a>Usage</h4>
<pre data-lang="terminal" class="programlisting">
ndb_print_backup_file <em class="replaceable"><code>file_name</code></em>
</pre><p>
        <em class="replaceable"><code>file_name</code></em> is the name of a cluster
        backup file. This can be any of the files
        (<code class="filename">.Data</code>, <code class="filename">.ctl</code>, or
        <code class="filename">.log</code> file) found in a cluster backup
        directory. These files are found in the data node's backup
        directory under the subdirectory
        <code class="filename">BACKUP-<em class="replaceable"><code>#</code></em></code>, where
        <em class="replaceable"><code>#</code></em> is the sequence number for the
        backup. For more information about cluster backup files and
        their contents, see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-backup-concepts" title="22.5.3.1 NDB Cluster Backup Concepts">Section 22.5.3.1, “NDB Cluster Backup Concepts”</a>.
      </p><p>
        Like <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-schema-file" title="22.4.20 ndb_print_schema_file — Print NDB Schema File Contents"><span class="command"><strong>ndb_print_schema_file</strong></span></a> and
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-sys-file" title="22.4.21 ndb_print_sys_file — Print NDB System File Contents"><span class="command"><strong>ndb_print_sys_file</strong></span></a> (and unlike most of the
        other <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> utilities that are
        intended to be run on a management server host or to connect to
        a management server) <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-backup-file" title="22.4.17 ndb_print_backup_file — Print NDB Backup File Contents"><span class="command"><strong>ndb_print_backup_file</strong></span></a>
        must be run on a cluster data node, since it accesses the data
        node file system directly. Because it does not make use of the
        management server, this utility can be used when the management
        server is not running, and even when the cluster has been
        completely shut down.
      </p><p>
        In NDB 8.0.17 and later, this program can also be used to read
        undo log files.
</p>
<h4><a name="idm140091587377152"></a>Additional Options</h4>
<p>
        None.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-print-file"></a>22.4.18 <span class="command"><strong>ndb_print_file</strong></span> — Print NDB Disk Data File Contents</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091587374304"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-file" title="22.4.18 ndb_print_file — Print NDB Disk Data File Contents"><span class="command"><strong>ndb_print_file</strong></span></a> obtains information from an
        NDB Cluster Disk Data file.
</p>
<h4><a name="idm140091587371408"></a>Usage</h4>
<pre data-lang="terminal" class="programlisting">
ndb_print_file [-v] [-q] <em class="replaceable"><code>file_name</code></em>+
</pre><p>
        <em class="replaceable"><code>file_name</code></em> is the name of an NDB
        Cluster Disk Data file. Multiple filenames are accepted,
        separated by spaces.
      </p><p>
        Like <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-schema-file" title="22.4.20 ndb_print_schema_file — Print NDB Schema File Contents"><span class="command"><strong>ndb_print_schema_file</strong></span></a> and
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-sys-file" title="22.4.21 ndb_print_sys_file — Print NDB System File Contents"><span class="command"><strong>ndb_print_sys_file</strong></span></a> (and unlike most of the
        other <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> utilities that are
        intended to be run on a management server host or to connect to
        a management server) <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-file" title="22.4.18 ndb_print_file — Print NDB Disk Data File Contents"><span class="command"><strong>ndb_print_file</strong></span></a> must be
        run on an NDB Cluster data node, since it accesses the data node
        file system directly. Because it does not make use of the
        management server, this utility can be used when the management
        server is not running, and even when the cluster has been
        completely shut down.
</p>
<h4><a name="idm140091587362368"></a>Additional Options</h4>
<p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-file" title="22.4.18 ndb_print_file — Print NDB Disk Data File Contents"><span class="command"><strong>ndb_print_file</strong></span></a> supports the following
        options:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="option">-v</code>: Make output verbose.
          </p></li><li class="listitem"><p>
            <code class="option">-q</code>: Suppress output (quiet mode).
          </p></li><li class="listitem"><p>
            <code class="option">--help</code>, <code class="option">-h</code>,
            <code class="option">-?</code>: Print help message.
</p></li></ul>
</div>
<p>
        For more information, see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-disk-data" title="22.5.13 NDB Cluster Disk Data Tables">Section 22.5.13, “NDB Cluster Disk Data Tables”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-print-frag-file"></a>22.4.19 <span class="command"><strong>ndb_print_frag_file</strong></span> — Print NDB Fragment List File Contents</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091587352256"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-frag-file" title="22.4.19 ndb_print_frag_file — Print NDB Fragment List File Contents"><span class="command"><strong>ndb_print_frag_file</strong></span></a> obtains information from
        a cluster fragment list file. It is intended for use in helping
        to diagnose issues with data node restarts.
</p>
<h4><a name="idm140091587349232"></a>Usage</h4>
<pre data-lang="terminal" class="programlisting">
ndb_print_frag_file <em class="replaceable"><code>file_name</code></em>
</pre><p>
        <em class="replaceable"><code>file_name</code></em> is the name of a cluster
        fragment list file, which matches the pattern
        <code class="filename">S<em class="replaceable"><code>X</code></em>.FragList</code>,
        where <em class="replaceable"><code>X</code></em> is a digit in the range 2-9
        inclusive, and are found in the data node file system of the
        data node having the node ID <em class="replaceable"><code>nodeid</code></em>,
        in directories named
        <code class="filename">ndb_<em class="replaceable"><code>nodeid</code></em>_fs/D<em class="replaceable"><code>N</code></em>/DBDIH/</code>,
        where <em class="replaceable"><code>N</code></em> is <code class="literal">1</code> or
        <code class="literal">2</code>. Each fragment file contains records of the
        fragments belonging to each <code class="literal">NDB</code> table. For
        more information about cluster fragment files, see
        <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-ndbd-filesystemdir-files.html" target="_top">NDB Cluster Data Node File System Directory Files</a>.
      </p><p>
        Like <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-backup-file" title="22.4.17 ndb_print_backup_file — Print NDB Backup File Contents"><span class="command"><strong>ndb_print_backup_file</strong></span></a>,
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-sys-file" title="22.4.21 ndb_print_sys_file — Print NDB System File Contents"><span class="command"><strong>ndb_print_sys_file</strong></span></a>, and
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-schema-file" title="22.4.20 ndb_print_schema_file — Print NDB Schema File Contents"><span class="command"><strong>ndb_print_schema_file</strong></span></a> (and unlike most of the
        other <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> utilities that are
        intended to be run on a management server host or to connect to
        a management server), <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-frag-file" title="22.4.19 ndb_print_frag_file — Print NDB Fragment List File Contents"><span class="command"><strong>ndb_print_frag_file</strong></span></a>
        must be run on a cluster data node, since it accesses the data
        node file system directly. Because it does not make use of the
        management server, this utility can be used when the management
        server is not running, and even when the cluster has been
        completely shut down.
</p>
<h4><a name="idm140091587331920"></a>Additional Options</h4>
<p>
        None.
</p>
<h4><a name="idm140091587330816"></a>Sample Output</h4>
<pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_print_frag_file /usr/local/mysqld/data/ndb_3_fs/D1/DBDIH/S2.FragList</code></strong> 
Filename: /usr/local/mysqld/data/ndb_3_fs/D1/DBDIH/S2.FragList with size 8192
noOfPages = 1 noOfWords = 182
Table Data
----------
Num Frags: 2 NoOfReplicas: 2 hashpointer: 4294967040
kvalue: 6 mask: 0x00000000 method: HashMap
Storage is on Logged and checkpointed, survives SR
------ Fragment with FragId: 0 --------
Preferred Primary: 2 numStoredReplicas: 2 numOldStoredReplicas: 0 distKey: 0 LogPartId: 0
-------Stored Replica----------
Replica node is: 2 initialGci: 2 numCrashedReplicas = 0 nextLcpNo = 1
LcpNo[0]: maxGciCompleted: 1 maxGciStarted: 2 lcpId: 1 lcpStatus: valid
LcpNo[1]: maxGciCompleted: 0 maxGciStarted: 0 lcpId: 0 lcpStatus: invalid
-------Stored Replica----------
Replica node is: 3 initialGci: 2 numCrashedReplicas = 0 nextLcpNo = 1
LcpNo[0]: maxGciCompleted: 1 maxGciStarted: 2 lcpId: 1 lcpStatus: valid
LcpNo[1]: maxGciCompleted: 0 maxGciStarted: 0 lcpId: 0 lcpStatus: invalid
------ Fragment with FragId: 1 --------
Preferred Primary: 3 numStoredReplicas: 2 numOldStoredReplicas: 0 distKey: 0 LogPartId: 1
-------Stored Replica----------
Replica node is: 3 initialGci: 2 numCrashedReplicas = 0 nextLcpNo = 1
LcpNo[0]: maxGciCompleted: 1 maxGciStarted: 2 lcpId: 1 lcpStatus: valid
LcpNo[1]: maxGciCompleted: 0 maxGciStarted: 0 lcpId: 0 lcpStatus: invalid
-------Stored Replica----------
Replica node is: 2 initialGci: 2 numCrashedReplicas = 0 nextLcpNo = 1
LcpNo[0]: maxGciCompleted: 1 maxGciStarted: 2 lcpId: 1 lcpStatus: valid
LcpNo[1]: maxGciCompleted: 0 maxGciStarted: 0 lcpId: 0 lcpStatus: invalid
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-print-schema-file"></a>22.4.20 <span class="command"><strong>ndb_print_schema_file</strong></span> — Print NDB Schema File Contents</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091587325152"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-schema-file" title="22.4.20 ndb_print_schema_file — Print NDB Schema File Contents"><span class="command"><strong>ndb_print_schema_file</strong></span></a> obtains diagnostic
        information from a cluster schema file.
</p>
<h4><a name="idm140091587322336"></a>Usage</h4>
<pre data-lang="terminal" class="programlisting">
ndb_print_schema_file <em class="replaceable"><code>file_name</code></em>
</pre><p>
        <em class="replaceable"><code>file_name</code></em> is the name of a cluster
        schema file. For more information about cluster schema files,
        see <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-ndbd-filesystemdir-files.html" target="_top">NDB Cluster Data Node File System Directory Files</a>.
      </p><p>
        Like <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-backup-file" title="22.4.17 ndb_print_backup_file — Print NDB Backup File Contents"><span class="command"><strong>ndb_print_backup_file</strong></span></a> and
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-sys-file" title="22.4.21 ndb_print_sys_file — Print NDB System File Contents"><span class="command"><strong>ndb_print_sys_file</strong></span></a> (and unlike most of the
        other <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> utilities that are
        intended to be run on a management server host or to connect to
        a management server) <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-schema-file" title="22.4.20 ndb_print_schema_file — Print NDB Schema File Contents"><span class="command"><strong>ndb_print_schema_file</strong></span></a>
        must be run on a cluster data node, since it accesses the data
        node file system directly. Because it does not make use of the
        management server, this utility can be used when the management
        server is not running, and even when the cluster has been
        completely shut down.
</p>
<h4><a name="idm140091587312592"></a>Additional Options</h4>
<p>
        None.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-print-sys-file"></a>22.4.21 <span class="command"><strong>ndb_print_sys_file</strong></span> — Print NDB System File Contents</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091587309776"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-sys-file" title="22.4.21 ndb_print_sys_file — Print NDB System File Contents"><span class="command"><strong>ndb_print_sys_file</strong></span></a> obtains diagnostic
        information from an NDB Cluster system file.
</p>
<h4><a name="idm140091587306960"></a>Usage</h4>
<pre data-lang="terminal" class="programlisting">
ndb_print_sys_file <em class="replaceable"><code>file_name</code></em>
</pre><p>
        <em class="replaceable"><code>file_name</code></em> is the name of a cluster
        system file (sysfile). Cluster system files are located in a
        data node's data directory
        (<a class="link" href="mysql-cluster.html#ndbparam-ndbd-datadir"><code class="literal">DataDir</code></a>); the path
        under this directory to system files matches the pattern
        <code class="filename">ndb_<em class="replaceable"><code>#</code></em>_fs/D<em class="replaceable"><code>#</code></em>/DBDIH/P<em class="replaceable"><code>#</code></em>.sysfile</code>.
        In each case, the <em class="replaceable"><code>#</code></em> represents a
        number (not necessarily the same number). For more information,
        see <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-ndbd-filesystemdir-files.html" target="_top">NDB Cluster Data Node File System Directory Files</a>.
      </p><p>
        Like <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-backup-file" title="22.4.17 ndb_print_backup_file — Print NDB Backup File Contents"><span class="command"><strong>ndb_print_backup_file</strong></span></a> and
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-schema-file" title="22.4.20 ndb_print_schema_file — Print NDB Schema File Contents"><span class="command"><strong>ndb_print_schema_file</strong></span></a> (and unlike most of the
        other <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> utilities that are
        intended to be run on a management server host or to connect to
        a management server) <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-backup-file" title="22.4.17 ndb_print_backup_file — Print NDB Backup File Contents"><span class="command"><strong>ndb_print_backup_file</strong></span></a>
        must be run on a cluster data node, since it accesses the data
        node file system directly. Because it does not make use of the
        management server, this utility can be used when the management
        server is not running, and even when the cluster has been
        completely shut down.
</p>
<h4><a name="idm140091587293408"></a>Additional Options</h4>
<p>
        None.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-redo-log-reader"></a>22.4.22 <span class="command"><strong>ndb_redo_log_reader</strong></span> — Check and Print Content of Cluster Redo Log</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091587290448"></a><p>
        Reads a redo log file, checking it for errors, printing its
        contents in a human-readable format, or both.
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-redo-log-reader" title="22.4.22 ndb_redo_log_reader — Check and Print Content of Cluster Redo Log"><span class="command"><strong>ndb_redo_log_reader</strong></span></a> is intended for use
        primarily by NDB Cluster developers and Support personnel in
        debugging and diagnosing problems.
      </p><p>
        This utility remains under development, and its syntax and
        behavior are subject to change in future NDB Cluster releases.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          Prior to NDB 7.2, this utility was named
          <span class="command"><strong>ndbd_redo_log_reader</strong></span>.
</p>
</div>
<p>
        The C++ source files for <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-redo-log-reader" title="22.4.22 ndb_redo_log_reader — Check and Print Content of Cluster Redo Log"><span class="command"><strong>ndb_redo_log_reader</strong></span></a>
        can be found in the directory
        <code class="filename">/storage/ndb/src/kernel/blocks/dblqh/redoLogReader</code>.
      </p><p>
        The following table includes options that are specific to the
        NDB Cluster program <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-redo-log-reader" title="22.4.22 ndb_redo_log_reader — Check and Print Content of Cluster Redo Log"><span class="command"><strong>ndb_redo_log_reader</strong></span></a>.
        Additional descriptions follow the table. For options common to
        most NDB Cluster programs (including
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-redo-log-reader" title="22.4.22 ndb_redo_log_reader — Check and Print Content of Cluster Redo Log"><span class="command"><strong>ndb_redo_log_reader</strong></span></a>), see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
</p>
<div class="table">
<a name="mysql-cluster-ndb_redo_log_reader-options-table"></a><p class="title"><b>Table 22.349 Command-line options for the ndb_redo_log_reader program</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_redo_log_reader_dump">-dump</a>
                </code>
              </p></td>
            <td>Print dump info</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_redo_log_reader_filedescriptors">-filedescriptors</a>
                </code>
              </p></td>
            <td>Print file descriptors only</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_redo_log_reader_help">--help</a>
                </code>
              </p></td>
            <td>Print usage information</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_redo_log_reader_lap">-lap</a>
                </code>
              </p></td>
            <td>Provide lap info, with max GCI started and completed</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_redo_log_reader_mbyte">-mbyte
                #</a> </code>
              </p></td>
            <td>Starting megabyte</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_redo_log_reader_mbyteheaders">-mbyteheaders</a>
                </code>
              </p></td>
            <td>Show only the first page header of every megabyte in the file</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_redo_log_reader_nocheck">-nocheck</a>
                </code>
              </p></td>
            <td>Do not check records for errors</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_redo_log_reader_noprint">-noprint</a>
                </code>
              </p></td>
            <td>Do not print records</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_redo_log_reader_page">-page
                #</a> </code>
              </p></td>
            <td>Start with this page</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_redo_log_reader_pageheaders">-pageheaders</a>
                </code>
              </p></td>
            <td>Show page headers only</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_redo_log_reader_pageindex">-pageindex
                #</a> </code>
              </p></td>
            <td>Start with this page index</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_redo_log_reader_twiddle">-twiddle</a>
                </code>
              </p></td>
            <td>Bit-shifted dump</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<h4><a name="idm140091587203424"></a>Usage</h4>
<pre data-lang="terminal" class="programlisting">
ndb_redo_log_reader <em class="replaceable"><code>file_name</code></em> [<em class="replaceable"><code>options</code></em>]
</pre><p>
        <em class="replaceable"><code>file_name</code></em> is the name of a cluster
        redo log file. redo log files are located in the numbered
        directories under the data node's data directory
        (<a class="link" href="mysql-cluster.html#ndbparam-ndbd-datadir"><code class="literal">DataDir</code></a>); the path
        under this directory to the redo log files matches the pattern
        <code class="filename">ndb_<em class="replaceable"><code>nodeid</code></em>_fs/D<em class="replaceable"><code>#</code></em>/DBLQH/S<em class="replaceable"><code>#</code></em>.FragLog</code>.
        <em class="replaceable"><code>nodeid</code></em> is the data node's node
        ID. The two instances of <em class="replaceable"><code>#</code></em> each
        represent a number (not necessarily the same number); the number
        following <code class="literal">D</code> is in the range 8-39 inclusive;
        the range of the number following <code class="literal">S</code> varies
        according to the value of the
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-nooffragmentlogfiles"><code class="literal">NoOfFragmentLogFiles</code></a>
        configuration parameter, whose default value is 16; thus, the
        default range of the number in the file name is 0-15 inclusive.
        For more information, see
        <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-ndbd-filesystemdir-files.html" target="_top">NDB Cluster Data Node File System Directory Files</a>.
      </p><p>
        The name of the file to be read may be followed by one or more
        of the options listed here:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_redo_log_reader_dump"></a>
            <a class="indexterm" name="idm140091587190256"></a>

            <a class="indexterm" name="idm140091587188768"></a>

            <code class="option">-dump</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for dump"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">-dump</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Print dump info.
</p></li><li class="listitem"><a name="option_ndb_redo_log_reader_filedescriptors"></a>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for filedescriptors"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">-filedescriptors</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            <code class="option">-filedescriptors</code>: Print file descriptors
            only.
</p></li><li class="listitem"><a name="option_ndb_redo_log_reader_help"></a>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for help"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--help</code></td>
</tr></tbody></table>
</div>
<p>
            <code class="option">--help</code>: Print usage information.
          </p></li><li class="listitem"><p><a name="option_ndb_redo_log_reader_lap"></a>
            <a class="indexterm" name="idm140091587143392"></a>

            <a class="indexterm" name="idm140091587141904"></a>

            <code class="option">-lap</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for lap"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">-lap</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Provide lap info, with max GCI started and completed.
</p></li><li class="listitem"><a name="option_ndb_redo_log_reader_mbyte"></a>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for mbyte"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">-mbyte #</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Numeric</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">15</code></td>
</tr></tbody></table>
</div>
<p>
            <code class="option">-mbyte <em class="replaceable"><code>#</code></em></code>:
            Starting megabyte.
          </p><p>
            <em class="replaceable"><code>#</code></em> is an integer in the range 0 to
            15, inclusive.
</p></li><li class="listitem"><a name="option_ndb_redo_log_reader_mbyteheaders"></a>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for mbyteheaders"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">-mbyteheaders</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            <code class="option">-mbyteheaders</code>: Show only the first page
            header of every megabyte in the file.
</p></li><li class="listitem"><a name="option_ndb_redo_log_reader_noprint"></a>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for noprint"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">-noprint</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            <code class="option">-noprint</code>: Do not print the contents of the
            log file.
</p></li><li class="listitem"><a name="option_ndb_redo_log_reader_nocheck"></a>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for nocheck"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">-nocheck</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            <code class="option">-nocheck</code>: Do not check the log file for
            errors.
</p></li><li class="listitem"><a name="option_ndb_redo_log_reader_page"></a>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for page"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">-page #</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">31</code></td>
</tr></tbody></table>
</div>
<p>
            <code class="option">-page <em class="replaceable"><code>#</code></em></code>: Start
            at this page.
          </p><p>
            <em class="replaceable"><code>#</code></em> is an integer in the range 0 to
            31, inclusive.
</p></li><li class="listitem"><a name="option_ndb_redo_log_reader_pageheaders"></a>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for pageheaders"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">-pageheaders</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            <code class="option">-pageheaders</code>: Show page headers only.
</p></li><li class="listitem"><a name="option_ndb_redo_log_reader_pageindex"></a>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for pageindex"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">-pageindex #</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">12</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">12</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">8191</code></td>
</tr></tbody></table>
</div>
<p>
            <code class="option">-pageindex <em class="replaceable"><code>#</code></em></code>:
            Start at this page index.
          </p><p>
            <em class="replaceable"><code>#</code></em> is an integer between 12 and
            8191, inclusive.
          </p></li><li class="listitem"><p><a name="option_ndb_redo_log_reader_twiddle"></a>
            <a class="indexterm" name="idm140091586986672"></a>

            <a class="indexterm" name="idm140091586985184"></a>

            <code class="option">-twiddle</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for twiddle"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">-twiddle</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Bit-shifted dump.
</p></li></ul>
</div>
<p>
        Like <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-backup-file" title="22.4.17 ndb_print_backup_file — Print NDB Backup File Contents"><span class="command"><strong>ndb_print_backup_file</strong></span></a> and
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-schema-file" title="22.4.20 ndb_print_schema_file — Print NDB Schema File Contents"><span class="command"><strong>ndb_print_schema_file</strong></span></a> (and unlike most of the
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> utilities that are intended to
        be run on a management server host or to connect to a management
        server) <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-redo-log-reader" title="22.4.22 ndb_redo_log_reader — Check and Print Content of Cluster Redo Log"><span class="command"><strong>ndb_redo_log_reader</strong></span></a> must be run on a
        cluster data node, since it accesses the data node file system
        directly. Because it does not make use of the management server,
        this utility can be used when the management server is not
        running, and even when the cluster has been completely shut
        down.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-restore"></a>22.4.23 <span class="command"><strong>ndb_restore</strong></span> — Restore an NDB Cluster Backup</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#ndb-restore-different-number-nodes">22.4.23.1 Restoring to a different number of data nodes</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#ndb-restore-parallel-data-node-backup">22.4.23.2 Restoring from a backup taken in parallel</a></span></dt></dl>
</div>
<a class="indexterm" name="idm140091586960000"></a><a class="indexterm" name="idm140091586958640"></a><a class="indexterm" name="idm140091586957280"></a><a class="indexterm" name="idm140091586955920"></a><a class="indexterm" name="idm140091586954560"></a><p>
        The cluster restoration program is implemented as a separate
        command-line utility <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>, which can
        normally be found in the MySQL <code class="filename">bin</code>
        directory. This program reads the files created as a result of
        the backup and inserts the stored information into the database.
      </p><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> must be executed once for each of
        the backup files that were created by the
        <a class="link" href="mysql-cluster.html#mysql-cluster-backup-using-management-client" title="22.5.3.2 Using The NDB Cluster Management Client to Create a Backup"><code class="literal">START BACKUP</code></a> command used to
        create the backup (see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-backup-using-management-client" title="22.5.3.2 Using The NDB Cluster Management Client to Create a Backup">Section 22.5.3.2, “Using The NDB Cluster Management Client to Create a Backup”</a>).
        This is equal to the number of data nodes in the cluster at the
        time that the backup was created.
</p><a class="indexterm" name="idm140091586946944"></a>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          Before using <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>, it is recommended
          that the cluster be running in single user mode, unless you
          are restoring multiple data nodes in parallel. See
          <a class="xref" href="mysql-cluster.html#mysql-cluster-single-user-mode" title="22.5.8 NDB Cluster Single User Mode">Section 22.5.8, “NDB Cluster Single User Mode”</a>, for more
          information.
</p>
</div>
<p>
        The following table includes options that are specific to the
        NDB Cluster native backup restoration program
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>. Additional descriptions follow
        the table. For options common to most NDB Cluster programs
        (including <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>), see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
</p>
<div class="table">
<a name="mysql-cluster-ndb_restore-options-table"></a><p class="title"><b>Table 22.350 Command-line options for the ndb_restore program</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_append">--append</a>
                </code>
              </p></td>
            <td>Append data to a tab-delimited file</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_backup_path">--backup_path=dir_name</a>
                </code>
              </p></td>
            <td>Path to backup files directory</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_restore_backupid">--backupid=#</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_backupid">-b</a>
                </code>
              </p></td>
            <td>Restore from the backup with the given ID</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_restore_connect">--connect</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_connect">-c</a>
                </code>
              </p></td>
            <td>Alias for --connectstring.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_disable-indexes">--disable-indexes</a>
                </code>
              </p></td>
            <td>Causes indexes from a backup to be ignored; may decrease time needed to
              restore data.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_restore_dont-ignore-systab-0">--dont-ignore-systab-0</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_dont-ignore-systab-0">-f</a>
                </code>
              </p></td>
            <td>Do not ignore system table during restore. Experimental only; not for
              production use</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_exclude-databases">--exclude-databases=db-list</a>
                </code>
              </p></td>
            <td>List of one or more databases to exclude (includes those not named)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_exclude-intermediate-sql-tables">--exclude-intermediate-sql-tables[=TRUE|FALSE]</a>
                </code>
              </p></td>
            <td>If TRUE (the default), do not restore any intermediate tables (having
              names prefixed with '#sql-') that were left over from
              copying ALTER TABLE operations.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_exclude-missing-columns">--exclude-missing-columns</a>
                </code>
              </p></td>
            <td>Causes columns from the backup version of a table that are missing from
              the version of the table in the database to be ignored.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_exclude-missing-tables">--exclude-missing-tables</a>
                </code>
              </p></td>
            <td>Causes tables from the backup that are missing from the database to be
              ignored.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_exclude-tables">--exclude-tables=table-list</a>
                </code>
              </p></td>
            <td>List of one or more tables to exclude (includes those in the same
              database that are not named); each table reference must
              include the database name</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_fields-enclosed-by">--fields-enclosed-by=char</a>
                </code>
              </p></td>
            <td>Fields are enclosed with the indicated character</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_fields-optionally-enclosed-by">--fields-optionally-enclosed-by</a>
                </code>
              </p></td>
            <td>Fields are optionally enclosed with the indicated character</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_fields-terminated-by">--fields-terminated-by=char</a>
                </code>
              </p></td>
            <td>Fields are terminated by the indicated character</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_hex">--hex</a>
                </code>
              </p></td>
            <td>Print binary types in hexadecimal format</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_include-databases">--include-databases=db-list</a>
                </code>
              </p></td>
            <td>List of one or more databases to restore (excludes those not named)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_include-tables">--include-tables=table-list</a>
                </code>
              </p></td>
            <td>List of one or more tables to restore (excludes those in same database
              that are not named); each table reference must include the
              database name</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_lines-terminated-by">--lines-terminated-by=char</a>
                </code>
              </p></td>
            <td>Lines are terminated by the indicated character</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_restore_lossy-conversions">--lossy-conversions</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_lossy-conversions">-L</a>
                </code>
              </p></td>
            <td>Allow lossy conversions of column values (type demotions or changes in
              sign) when restoring data from backup</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_no-binlog">--no-binlog</a>
                </code>
              </p></td>
            <td>If a mysqld is connected and using binary logging, do not log the
              restored data</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_restore_no-restore-disk-objects">--no-restore-disk-objects</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_no-restore-disk-objects">-d</a>
                </code>
              </p></td>
            <td>Do not restore objects relating to Disk Data</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_restore_no-upgrade">--no-upgrade</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_no-upgrade">-u</a>
                </code>
              </p></td>
            <td>Do not upgrade array type for varsize attributes which do not already
              resize VAR data, and do not change column attributes</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_restore_ndb-nodegroup-map">--ndb-nodegroup-map=map</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_ndb-nodegroup-map">-z</a>
                </code>
              </p></td>
            <td>Nodegroup map for NDBCLUSTER storage engine. Syntax: list of
              (source_nodegroup, destination_nodegroup)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_restore_nodeid">--nodeid=#</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_nodeid">-n</a>
                </code>
              </p></td>
            <td>ID of node where backup was taken</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_restore_parallelism">--parallelism=#</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_parallelism">-p</a>
                </code>
              </p></td>
            <td>Number of parallel transactions to use while restoring data</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_restore_preserve-trailing-spaces">--preserve-trailing-spaces</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_preserve-trailing-spaces">-P</a>
                </code>
              </p></td>
            <td>Allow preservation of trailing spaces (including padding) when promoting
              fixed-width string types to variable-width types</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_print">--print</a>
                </code>
              </p></td>
            <td>Print metadata, data and log to stdout (equivalent to --print-meta
              --print-data --print-log)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_print-data">--print-data</a>
                </code>
              </p></td>
            <td>Print data to stdout</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_print-log">--print-log</a>
                </code>
              </p></td>
            <td>Print to stdout</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_print-meta">--print-meta</a>
                </code>
              </p></td>
            <td>Print metadata to stdout</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_print-sql-log">print-sql-log</a>
                </code>
              </p></td>
            <td>Write SQL log to stdout; default is FALSE</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_progress-frequency">--progress-frequency=#</a>
                </code>
              </p></td>
            <td>Print status of restoration each given number of seconds</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_restore_promote-attributes">--promote-attributes</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_promote-attributes">-A</a>
                </code>
              </p></td>
            <td>Allow attributes to be promoted when restoring data from backup</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_rebuild-indexes">--rebuild-indexes</a>
                </code>
              </p></td>
            <td>Causes multithreaded rebuilding of ordered indexes found in the backup.
              Number of threads used is determined by setting
              BuildIndexThreads parameter.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_restore_restore-data">--restore-data</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_restore-data">-r</a>
                </code>
              </p></td>
            <td>Restore table data and logs into NDB Cluster using the NDB API</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_restore_restore-epoch">--restore-epoch</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_restore-epoch">-e</a>
                </code>
              </p></td>
            <td>Restore epoch info into the status table. Convenient on a MySQL Cluster
              replication slave for starting replication. The row in
              mysql.ndb_apply_status with id 0 will be updated/inserted.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_restore_restore-meta">--restore-meta</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_restore-meta">-m</a>
                </code>
              </p></td>
            <td>Restore metadata to NDB Cluster using the NDB API</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_restore-privilege-tables">--restore-privilege-tables</a>
                </code>
              </p></td>
            <td>Restore MySQL privilege tables that were previously moved to NDB.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_rewrite-database">--rewrite-database=olddb,newdb</a>
                </code>
              </p></td>
            <td>Restores to a database with a different name than the original</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_skip-broken-objects">--skip-broken-objects</a>
                </code>
              </p></td>
            <td>Causes missing blob tables in the backup file to be ignored.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_restore_skip-table-check">--skip-table-check</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_skip-table-check">-s</a>
                </code>
              </p></td>
            <td>Skip table structure check during restoring of data</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_skip-unknown-objects">--skip-unknown-objects</a>
                </code>
              </p></td>
            <td>Causes schema objects not recognized by ndb_restore to be ignored when
              restoring a backup made from a newer MySQL Cluster version
              to an older version.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_restore_tab">--tab=dir_name</a></code>,
              </p><p>
                <code class="literal"> <a class="link" href="mysql-cluster.html#option_ndb_restore_tab">-T
                dir_name</a> </code>
              </p></td>
            <td>Creates a tab-separated .txt file for each table in the given path</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_verbose">--verbose=#</a>
                </code>
              </p></td>
            <td>Level of verbosity in output</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><a class="indexterm" name="idm140091586657568"></a><p>
        Typical options for this utility are shown here:
      </p><pre data-lang="terminal" class="programlisting">
ndb_restore [-c <em class="replaceable"><code>connection_string</code></em>] -n <em class="replaceable"><code>node_id</code></em> -b <em class="replaceable"><code>backup_id</code></em> \
      [-m] -r --backup_path=<em class="replaceable"><code>/path/to/backup/files</code></em>
</pre><p>
        Normally, when restoring from an NDB Cluster backup,
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> requires at a minimum the
        <a class="link" href="mysql-cluster.html#option_ndb_restore_nodeid"><code class="option">--nodeid</code></a> (short form:
        <code class="option">-n</code>),
        <a class="link" href="mysql-cluster.html#option_ndb_restore_backupid"><code class="option">--backupid</code></a> (short form:
        <code class="option">-b</code>), and
        <a class="link" href="mysql-cluster.html#option_ndb_restore_backup_path"><code class="option">--backup_path</code></a> options. In
        addition, when <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> is used to restore
        any tables containing unique indexes, you must include
        <a class="link" href="mysql-cluster.html#option_ndb_restore_disable-indexes"><code class="option">--disable-indexes</code></a> or
        <a class="link" href="mysql-cluster.html#option_ndb_restore_rebuild-indexes"><code class="option">--rebuild-indexes</code></a>. (Bug
        #57782, Bug #11764893)
      </p><p>
        The <code class="option">-c</code> option is used to specify a connection
        string which tells <code class="literal">ndb_restore</code> where to
        locate the cluster management server (see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-connection-strings" title="22.3.3.3 NDB Cluster Connection Strings">Section 22.3.3.3, “NDB Cluster Connection Strings”</a>). If this
        option is not used, then <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> attempts
        to connect to a management server on
        <code class="literal">localhost:1186</code>. This utility acts as a
        cluster API node, and so requires a free connection
        <span class="quote">“<span class="quote">slot</span>”</span> to connect to the cluster management server.
        This means that there must be at least one
        <code class="literal">[api]</code> or <code class="literal">[mysqld]</code> section
        that can be used by it in the cluster
        <code class="filename">config.ini</code> file. It is a good idea to keep
        at least one empty <code class="literal">[api]</code> or
        <code class="literal">[mysqld]</code> section in
        <code class="filename">config.ini</code> that is not being used for a
        MySQL server or other application for this reason (see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-api-definition" title="22.3.3.7 Defining SQL and Other API Nodes in an NDB Cluster">Section 22.3.3.7, “Defining SQL and Other API Nodes in an NDB Cluster”</a>).
      </p><p>
        You can verify that <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> is connected
        to the cluster by using the <span class="command"><strong>SHOW</strong></span> command in
        the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> management client. You can also
        accomplish this from a system shell, as shown here:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_mgm -e "SHOW"</code></strong>
</pre><p>
        More detailed information about all options used by ndb_restore
        can be found in the following list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_restore_append"></a>
            <a class="indexterm" name="idm140091586626432"></a>

            <a class="indexterm" name="idm140091586624944"></a>

            <code class="option">--append</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for append"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--append</code></td>
</tr></tbody></table>
</div>
<p>
            When used with the <a class="link" href="mysql-cluster.html#option_ndb_restore_tab"><code class="option">--tab</code></a>
            and <a class="link" href="mysql-cluster.html#option_ndb_restore_print-data"><code class="option">--print-data</code></a>
            options, this causes the data to be appended to any existing
            files having the same names.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_backup_path"></a>
            <a class="indexterm" name="idm140091586610384"></a>

            <a class="indexterm" name="idm140091586608896"></a>

            <code class="option">--backup_path</code>=<em class="replaceable"><code>dir_name</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for backup_path"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--backup-path=dir_name</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Directory name</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">./</code></td>
</tr></tbody></table>
</div>
<p>
            The path to the backup directory is required; this is
            supplied to <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> using the
            <code class="option">--backup_path</code> option, and must include the
            subdirectory corresponding to the ID backup of the backup to
            be restored. For example, if the data node's
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datadir"><code class="literal">DataDir</code></a> is
            <code class="filename">/var/lib/mysql-cluster</code>, then the backup
            directory is
            <code class="filename">/var/lib/mysql-cluster/BACKUP</code>, and the
            backup files for the backup with the ID 3 can be found in
            <code class="filename">/var/lib/mysql-cluster/BACKUP/BACKUP-3</code>.
            The path may be absolute or relative to the directory in
            which the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> executable is
            located, and may be optionally prefixed with
            <code class="option">backup_path=</code>.
          </p><p>
            It is possible to restore a backup to a database with a
            different configuration than it was created from. For
            example, suppose that a backup with backup ID
            <code class="literal">12</code>, created in a cluster with two storage
            nodes having the node IDs <code class="literal">2</code> and
            <code class="literal">3</code>, is to be restored to a cluster with
            four nodes. Then <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> must be run
            twice—once for each storage node in the cluster where
            the backup was taken. However,
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> cannot always restore backups
            made from a cluster running one version of MySQL to a
            cluster running a different MySQL version.


</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              It is not possible to restore a backup made from a newer
              version of NDB Cluster using an older version of
              <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>. You can restore a backup
              made from a newer version of MySQL to an older cluster,
              but you must use a copy of <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>
              from the newer NDB Cluster version to do so.
            </p><p>
              For example, to restore a cluster backup taken from a
              cluster running NDB Cluster 7.5.15 to a
              cluster running NDB Cluster 7.4.25, you
              must use the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> that comes
              with the NDB Cluster 7.5.15
              distribution.
</p>
</div>
<p>
            For more rapid restoration, the data may be restored in
            parallel, provided that there is a sufficient number of
            cluster connections available. That is, when restoring to
            multiple nodes in parallel, you must have an
            <code class="literal">[api]</code> or <code class="literal">[mysqld]</code>
            section in the cluster <code class="filename">config.ini</code> file
            available for each concurrent <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>
            process. However, the data files must always be applied
            before the logs.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_backupid"></a>
            <a class="indexterm" name="idm140091586567264"></a>

            <a class="indexterm" name="idm140091586565776"></a>

            <code class="option">--backupid</code>=<em class="replaceable"><code>#</code></em>,
            <code class="option">-b</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for backupid"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--backupid=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Numeric</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">none</code></td>
</tr></tbody></table>
</div>
<p>
            This option is used to specify the ID or sequence number of
            the backup, and is the same number shown by the management
            client in the <code class="literal">Backup
            <em class="replaceable"><code>backup_id</code></em> completed</code>
            message displayed upon completion of a backup. (See
            <a class="xref" href="mysql-cluster.html#mysql-cluster-backup-using-management-client" title="22.5.3.2 Using The NDB Cluster Management Client to Create a Backup">Section 22.5.3.2, “Using The NDB Cluster Management Client to Create a Backup”</a>.)
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              When restoring cluster backups, you must be sure to
              restore all data nodes from backups having the same backup
              ID. Using files from different backups will at best result
              in restoring the cluster to an inconsistent state, and may
              fail altogether.
</p>
</div>
<p>
            In NDB 8.0.15 and later, this option is required.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_connect"></a>
            <a class="indexterm" name="idm140091586542928"></a>

            <a class="indexterm" name="idm140091586541440"></a>

            <code class="option">--connect</code>, <code class="option">-c</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for connect"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--connect</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">localhost:1186</code></td>
</tr></tbody></table>
</div>
<p>
            Alias for
            <a class="link" href="mysql-cluster.html#option_ndb_common_ndb-connectstring"><code class="option">--ndb-connectstring</code></a>.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_disable-indexes"></a>
            <a class="indexterm" name="idm140091586521792"></a>

            <a class="indexterm" name="idm140091586520304"></a>

            <code class="option">--disable-indexes</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for disable-indexes"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--disable-indexes</code></td>
</tr></tbody></table>
</div>
<p>
            Disable restoration of indexes during restoration of the
            data from a native <code class="literal">NDB</code> backup.
            Afterwards, you can restore indexes for all tables at once
            with multithreaded building of indexes using
            <a class="link" href="mysql-cluster.html#option_ndb_restore_rebuild-indexes"><code class="option">--rebuild-indexes</code></a>, which
            should be faster than rebuilding indexes concurrently for
            very large tables.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_dont-ignore-systab-0"></a>
            <a class="indexterm" name="idm140091586505824"></a>

            <a class="indexterm" name="idm140091586504368"></a>

            <code class="option">--dont-ignore-systab-0</code>, <code class="option">-f</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for dont-ignore-systab-0"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--dont-ignore-systab-0</code></td>
</tr></tbody></table>
</div>
<p>
            Normally, when restoring table data and metadata,
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> ignores the copy of the
            <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> system table that is
            present in the backup.
            <code class="option">--dont-ignore-systab-0</code> causes the system
            table to be restored. <span class="emphasis"><em>This option is intended for
            experimental and development use only, and is not
            recommended in a production environment</em></span>.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_exclude-databases"></a>
            <a class="indexterm" name="idm140091586487712"></a>

            <a class="indexterm" name="idm140091586486256"></a>

            <code class="option">--exclude-databases</code>=<em class="replaceable"><code>db-list</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for exclude-databases"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--exclude-databases=db-list</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            Comma-delimited list of one or more databases which should
            not be restored.
          </p><p>
            This option is often used in combination with
            <a class="link" href="mysql-cluster.html#option_ndb_restore_exclude-tables"><code class="option">--exclude-tables</code></a>; see
            that option's description for further information and
            examples.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_exclude-intermediate-sql-tables"></a>
            <a class="indexterm" name="idm140091586465840"></a>

            <a class="indexterm" name="idm140091586464384"></a>

            <code class="option">--exclude-intermediate-sql-tables[</code>=<em class="replaceable"><code>TRUE|FALSE]</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for exclude-intermediate-sql-tables"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--exclude-intermediate-sql-tables[=TRUE|FALSE]</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table>
</div>
<p>
            When performing copying <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER
            TABLE</code></a> operations, <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>
            creates intermediate tables (whose names are prefixed with
            <code class="literal">#sql-</code>). When <code class="literal">TRUE</code>, the
            <code class="option">--exclude-intermediate-sql-tables</code> option
            keeps <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> from restoring such
            tables that may have been left over from these operations.
            This option is <code class="literal">TRUE</code> by default.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_exclude-missing-columns"></a>
            <a class="indexterm" name="idm140091586438992"></a>

            <a class="indexterm" name="idm140091586437536"></a>

            <code class="option">--exclude-missing-columns</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for exclude-missing-columns"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--exclude-missing-columns</code></td>
</tr></tbody></table>
</div>
<p>
            It is possible to restore only selected table columns using
            this option, which causes <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> to
            ignore any columns missing from tables being restored as
            compared to the versions of those tables found in the
            backup. This option applies to all tables being restored. If
            you wish to apply this option only to selected tables or
            databases, you can use it in combination with one or more of
            the <code class="option">--include-*</code> or
            <code class="option">--exclude-*</code> options described elsewhere in
            this section to do so, then restore data to the remaining
            tables using a complementary set of these options.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_exclude-missing-tables"></a>
            <a class="indexterm" name="idm140091586422144"></a>

            <a class="indexterm" name="idm140091586420688"></a>

            <code class="option">--exclude-missing-tables</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for exclude-missing-tables"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--exclude-missing-tables</code></td>
</tr></tbody></table>
</div>
<p>
            It is possible to restore only selected tables using this
            option, which causes <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> to
            ignore any tables from the backup that are not found in the
            target database.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_exclude-tables"></a>
            <a class="indexterm" name="idm140091586406640"></a>

            <a class="indexterm" name="idm140091586405152"></a>

            <code class="option">--exclude-tables</code>=<em class="replaceable"><code>table-list</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for exclude-tables"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--exclude-tables=table-list</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            List of one or more tables to exclude; each table reference
            must include the database name. Often used together with
            <a class="link" href="mysql-cluster.html#option_ndb_restore_exclude-databases"><code class="option">--exclude-databases</code></a>.
          </p><p>
            When <code class="option">--exclude-databases</code> or
            <code class="option">--exclude-tables</code> is used, only those
            databases or tables named by the option are excluded; all
            other databases and tables are restored by
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>.
          </p><p>
            This table shows several invocations of
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> usng
            <code class="option">--exclude-*</code> options (other options possibly
            required have been omitted for clarity), and the effects
            these options have on restoring from an NDB Cluster backup:
</p>
<div class="table">
<a name="idm140091586381440"></a><p class="title"><b>Table 22.351 Several invocations of ndb_restore using --exclude-*
                options, and the effects these options have on restoring from an
NDB Cluster backup.</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Option</th>
                <th scope="col">Result</th>
              </tr></thead><tbody><tr>
                <td scope="row"><code class="option">--exclude-databases=db1</code></td>
                <td>All tables in all databases except <code class="literal">db1</code> are restored;
                  no tables in <code class="literal">db1</code> are restored</td>
              </tr><tr>
                <td scope="row"><code class="option">--exclude-databases=db1,db2</code> (or
                  <code class="option">--exclude-databases=db1</code>
                  <code class="option">--exclude-databases=db2</code>)</td>
                <td>All tables in all databases except <code class="literal">db1</code> and
                  <code class="literal">db2</code> are restored; no tables in
                  <code class="literal">db1</code> or <code class="literal">db2</code> are
                  restored</td>
              </tr><tr>
                <td scope="row"><code class="option">--exclude-tables=db1.t1</code></td>
                <td>All tables except <code class="literal">t1</code> in database
                  <code class="literal">db1</code> are restored; all other tables
                  in <code class="literal">db1</code> are restored; all tables in
                  all other databases are restored</td>
              </tr><tr>
                <td scope="row"><code class="option">--exclude-tables=db1.t2,db2.t1</code> (or
                  <code class="option">--exclude-tables=db1.t2</code>
                  <code class="option">--exclude-tables=db2.t1)</code></td>
                <td>All tables in database <code class="literal">db1</code> except for
                  <code class="literal">t2</code> and all tables in database
                  <code class="literal">db2</code> except for table
                  <code class="literal">t1</code> are restored; no other tables in
                  <code class="literal">db1</code> or <code class="literal">db2</code> are
                  restored; all tables in all other databases are
                  restored</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            You can use these two options together. For example, the
            following causes all tables in all databases
            <span class="emphasis"><em>except for</em></span> databases
            <code class="literal">db1</code> and <code class="literal">db2</code>, and
            tables <code class="literal">t1</code> and <code class="literal">t2</code> in
            database <code class="literal">db3</code>, to be restored:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_restore [...] --exclude-databases=db1,db2 --exclude-tables=db3.t1,db3.t2</code></strong>
</pre><p>
            (Again, we have omitted other possibly necessary options in
            the interest of clarity and brevity from the example just
            shown.)
          </p><p>
            You can use <code class="option">--include-*</code> and
            <code class="option">--exclude-*</code> options together, subject to
            the following rules:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                The actions of all <code class="option">--include-*</code> and
                <code class="option">--exclude-*</code> options are cumulative.
              </p></li><li class="listitem"><p>
                All <code class="option">--include-*</code> and
                <code class="option">--exclude-*</code> options are evaluated in
                the order passed to ndb_restore, from right to left.
              </p></li><li class="listitem"><p>
                In the event of conflicting options, the first
                (rightmost) option takes precedence. In other words, the
                first option (going from right to left) that matches
                against a given database or table <span class="quote">“<span class="quote">wins</span>”</span>.
</p></li></ul>
</div>
<p>
            For example, the following set of options causes
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> to restore all tables from
            database <code class="literal">db1</code> except
            <code class="literal">db1.t1</code>, while restoring no other tables
            from any other databases:
          </p><pre data-lang="terminal" class="programlisting">        
--include-databases=db1 --exclude-tables=db1.t1
</pre><p>
            However, reversing the order of the options just given
            simply causes all tables from database
            <code class="literal">db1</code> to be restored (including
            <code class="literal">db1.t1</code>, but no tables from any other
            database), because the
            <a class="link" href="mysql-cluster.html#option_ndb_restore_include-databases"><code class="option">--include-databases</code></a>
            option, being farthest to the right, is the first match
            against database <code class="literal">db1</code> and thus takes
            precedence over any other option that matches
            <code class="literal">db1</code> or any tables in
            <code class="literal">db1</code>:
          </p><pre data-lang="terminal" class="programlisting">        
--exclude-tables=db1.t1 --include-databases=db1
</pre></li><li class="listitem"><p><a name="option_ndb_restore_fields-enclosed-by"></a>
            <a class="indexterm" name="idm140091586327696"></a>

            <a class="indexterm" name="idm140091586326240"></a>

            <code class="option">--fields-enclosed-by</code>=<em class="replaceable"><code>char</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for fields-enclosed-by"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--fields-enclosed-by=char</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            Each column value is enclosed by the string passed to this
            option (regardless of data type; see the description of
            <a class="link" href="mysql-cluster.html#option_ndb_restore_fields-optionally-enclosed-by"><code class="option">--fields-optionally-enclosed-by</code></a>).
          </p></li><li class="listitem"><p><a name="option_ndb_restore_fields-optionally-enclosed-by"></a>
            <a class="indexterm" name="idm140091586306336"></a>

            <a class="indexterm" name="idm140091586304832"></a>

            <code class="option">--fields-optionally-enclosed-by</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for fields-optionally-enclosed-by"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--fields-optionally-enclosed-by</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            The string passed to this option is used to enclose column
            values containing character data (such as
            <a class="link" href="data-types.html#char" title="11.4.1 The CHAR and VARCHAR Types"><code class="literal">CHAR</code></a>,
            <a class="link" href="data-types.html#char" title="11.4.1 The CHAR and VARCHAR Types"><code class="literal">VARCHAR</code></a>,
            <a class="link" href="data-types.html#binary-varbinary" title="11.4.2 The BINARY and VARBINARY Types"><code class="literal">BINARY</code></a>,
            <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a>, or
            <a class="link" href="data-types.html#enum" title="11.4.4 The ENUM Type"><code class="literal">ENUM</code></a>).
          </p></li><li class="listitem"><p><a name="option_ndb_restore_fields-terminated-by"></a>
            <a class="indexterm" name="idm140091586280384"></a>

            <a class="indexterm" name="idm140091586278928"></a>

            <code class="option">--fields-terminated-by</code>=<em class="replaceable"><code>char</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for fields-terminated-by"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--fields-terminated-by=char</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">\t (tab)</code></td>
</tr></tbody></table>
</div>
<p>
            The string passed to this option is used to separate column
            values. The default value is a tab character
            (<code class="literal">\t</code>).
          </p></li><li class="listitem"><p><a name="option_ndb_restore_hex"></a>
            <a class="indexterm" name="idm140091586259328"></a>

            <a class="indexterm" name="idm140091586257872"></a>

            <code class="option">--hex</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for hex"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--hex</code></td>
</tr></tbody></table>
</div>
<p>
            If this option is used, all binary values are output in
            hexadecimal format.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_include-databases"></a>
            <a class="indexterm" name="idm140091586245184"></a>

            <a class="indexterm" name="idm140091586243728"></a>

            <code class="option">--include-databases</code>=<em class="replaceable"><code>db-list</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for include-databases"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--include-databases=db-list</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            Comma-delimited list of one or more databases to restore.
            Often used together with
            <a class="link" href="mysql-cluster.html#option_ndb_restore_include-tables"><code class="option">--include-tables</code></a>; see
            the description of that option for further information and
            examples.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_include-tables"></a>
            <a class="indexterm" name="idm140091586223920"></a>

            <a class="indexterm" name="idm140091586222432"></a>

            <code class="option">--include-tables</code>=<em class="replaceable"><code>table-list</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for include-tables"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--include-tables=table-list</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            Comma-delimited list of tables to restore; each table
            reference must include the database name.
          </p><p>
            When <code class="option">--include-databases</code> or
            <code class="option">--include-tables</code> is used, only those
            databases or tables named by the option are restored; all
            other databases and tables are excluded by
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>, and are not restored.
          </p><p>
            The following table shows several invocations of
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> using
            <code class="option">--include-*</code> options (other options possibly
            required have been omitted for clarity), and the effects
            these have on restoring from an NDB Cluster backup:
</p>
<div class="table">
<a name="idm140091586199728"></a><p class="title"><b>Table 22.352 Several invocations of ndb_restore using --include-*
                options, and their effects on restoring from an NDB Cluster
backup.</b></p>
<div class="table-contents">
<table><col width="50%"><col width="50%"><thead><tr>
                <th scope="col">Option</th>
                <th scope="col">Result</th>
              </tr></thead><tbody><tr>
                <td scope="row"><code class="option">--include-databases=db1</code></td>
                <td>Only tables in database <code class="literal">db1</code> are restored; all tables
                  in all other databases are ignored</td>
              </tr><tr>
                <td scope="row"><code class="option">--include-databases=db1,db2</code> (or
                  <code class="option">--include-databases=db1</code>
                  <code class="option">--include-databases=db2</code>)</td>
                <td>Only tables in databases <code class="literal">db1</code> and
                  <code class="literal">db2</code> are restored; all tables in all
                  other databases are ignored</td>
              </tr><tr>
                <td scope="row"><code class="option">--include-tables=db1.t1</code></td>
                <td>Only table <code class="literal">t1</code> in database <code class="literal">db1</code> is
                  restored; no other tables in <code class="literal">db1</code> or
                  in any other database are restored</td>
              </tr><tr>
                <td scope="row"><code class="option">--include-tables=db1.t2,db2.t1</code> (or
                  <code class="option">--include-tables=db1.t2</code>
                  <code class="option">--include-tables=db2.t1</code>)</td>
                <td>Only the table <code class="literal">t2</code> in database <code class="literal">db1</code>
                  and the table <code class="literal">t1</code> in database
                  <code class="literal">db2</code> are restored; no other tables
                  in <code class="literal">db1</code>, <code class="literal">db2</code>, or
                  any other database are restored</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            You can also use these two options together. For example,
            the following causes all tables in databases
            <code class="literal">db1</code> and <code class="literal">db2</code>, together
            with the tables <code class="literal">t1</code> and
            <code class="literal">t2</code> in database <code class="literal">db3</code>, to
            be restored (and no other databases or tables):
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_restore [...] --include-databases=db1,db2 --include-tables=db3.t1,db3.t2</code></strong>
</pre><p>
            (Again we have omitted other, possibly required, options in
            the example just shown.)
          </p><p>
            It also possible to restore only selected databases, or
            selected tables from a single database, without any
            <code class="option">--include-*</code> (or
            <code class="option">--exclude-*</code>) options, using the syntax
            shown here:
          </p><pre data-lang="terminal" class="programlisting">
ndb_restore <em class="replaceable"><code>other_options</code></em> <em class="replaceable"><code>db_name</code></em>,[<em class="replaceable"><code>db_name</code></em>[,...] | <em class="replaceable"><code>tbl_name</code></em>[,<em class="replaceable"><code>tbl_name</code></em>][,...]]
</pre><p>
            In other words, you can specify either of the following to
            be restored:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                All tables from one or more databases
              </p></li><li class="listitem"><p>
                One or more tables from a single database
</p></li></ul>
</div>
</li><li class="listitem"><p><a name="option_ndb_restore_lines-terminated-by"></a>
            <a class="indexterm" name="idm140091586158544"></a>

            <a class="indexterm" name="idm140091586157088"></a>

            <code class="option">--lines-terminated-by</code>=<em class="replaceable"><code>char</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for lines-terminated-by"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--lines-terminated-by=char</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">\n (linebreak)</code></td>
</tr></tbody></table>
</div>
<p>
            Specifies the string used to end each line of output. The
            default is a linefeed character (<code class="literal">\n</code>).
          </p></li><li class="listitem"><p><a name="option_ndb_restore_lossy-conversions"></a>
            <a class="indexterm" name="idm140091586137536"></a>

            <a class="indexterm" name="idm140091586136080"></a>

            <code class="option">--lossy-conversions</code>, <code class="option">-L</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for lossy-conversions"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--lossy-conversions</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code> (If option is not used)</td>
</tr></tbody></table>
</div>
<p>
            This option is intended to complement the
            <a class="link" href="mysql-cluster.html#option_ndb_restore_promote-attributes"><code class="option">--promote-attributes</code></a>
            option. Using <code class="option">--lossy-conversions</code> allows
            lossy conversions of column values (type demotions or
            changes in sign) when restoring data from backup. With some
            exceptions, the rules governing demotion are the same as for
            MySQL replication; see
            <a class="xref" href="replication.html#replication-features-different-data-types" title="17.4.1.9.2 Replication of Columns Having Different Data Types">Section 17.4.1.9.2, “Replication of Columns Having Different Data Types”</a>,
            for information about specific type conversions currently
            supported by attribute demotion.
          </p><p>
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> reports any truncation of
            data that it performs during lossy conversions once per
            attribute and column.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_no-binlog"></a>
            <a class="indexterm" name="idm140091586112672"></a>

            <a class="indexterm" name="idm140091586111184"></a>

            <code class="option">--no-binlog</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for no-binlog"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--no-binlog</code></td>
</tr></tbody></table>
</div>
<p>
            This option prevents any connected SQL nodes from writing
            data restored by <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> to their
            binary logs.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_no-restore-disk-objects"></a>
            <a class="indexterm" name="idm140091586097152"></a>

            <a class="indexterm" name="idm140091586095696"></a>

            <code class="option">--no-restore-disk-objects</code>,
            <code class="option">-d</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for no-restore-disk-objects"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--no-restore-disk-objects</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            This option stops <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> from
            restoring any NDB Cluster Disk Data objects, such as
            tablespaces and log file groups; see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-disk-data" title="22.5.13 NDB Cluster Disk Data Tables">Section 22.5.13, “NDB Cluster Disk Data Tables”</a>, for more
            information about these.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_no-upgrade"></a>
            <a class="indexterm" name="idm140091586074832"></a>

            <a class="indexterm" name="idm140091586073376"></a>

            <code class="option">--no-upgrade</code>, <code class="option">-u</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for no-upgrade"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--no-upgrade</code></td>
</tr></tbody></table>
</div>
<p>
            When using <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> to restore a
            backup, <a class="link" href="data-types.html#char" title="11.4.1 The CHAR and VARCHAR Types"><code class="literal">VARCHAR</code></a> columns
            created using the old fixed format are resized and recreated
            using the variable-width format now employed. This behavior
            can be overridden by specifying
            <code class="option">--no-upgrade</code>.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_ndb-nodegroup-map"></a>
            <a class="indexterm" name="idm140091586057328"></a>

            <a class="indexterm" name="idm140091586055872"></a>

            <code class="option">--ndb-nodegroup-map</code>=<em class="replaceable"><code>map</code></em>,
            <code class="option">-z</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for ndb-nodegroup-map"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--ndb-nodegroup-map=map</code></td>
</tr></tbody></table>
</div>
<p>
            This option can be used to restore a backup taken from one
            node group to a different node group. Its argument is a list
            of the form
            <code class="literal"><em class="replaceable"><code>source_node_group</code></em>,
            <em class="replaceable"><code>target_node_group</code></em></code>.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_nodeid"></a>
            <a class="indexterm" name="idm140091586040992"></a>

            <a class="indexterm" name="idm140091586039504"></a>

            <code class="option">--nodeid</code>=<em class="replaceable"><code>#</code></em>,
            <code class="option">-n</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for nodeid"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--nodeid=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Numeric</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">none</code></td>
</tr></tbody></table>
</div>
<p>
            Specify the node ID of the data node on which the backup was
            taken.
          </p><p>
            When restoring to a cluster with different number of data
            nodes from that where the backup was taken, this information
            helps identify the correct set or sets of files to be
            restored to a given node. (In such cases, multiple files
            usually need to be restored to a single data node.) See
            <a class="xref" href="mysql-cluster.html#ndb-restore-different-number-nodes" title="22.4.23.1 Restoring to a different number of data nodes">Section 22.4.23.1, “Restoring to a different number of data nodes”</a>, for
            additional information and examples.
          </p><p>
            In NDB 8.0.15 and later, this option is required.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_parallelism"></a>
            <a class="indexterm" name="idm140091586018208"></a>

            <a class="indexterm" name="idm140091586016720"></a>

            <code class="option">--parallelism</code>=<em class="replaceable"><code>#</code></em>,
            <code class="option">-p</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for parallelism"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--parallelism=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Numeric</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">128</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">1024</code></td>
</tr></tbody></table>
</div>
<p>
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> uses single-row transactions
            to apply many rows concurrently. This parameter determines
            the number of parallel transactions (concurrent rows) that
            an instance of <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> tries to use.
            By default, this is 128; the minimum is 1, and the maximum
            is 1024.
          </p><p>
            The work of performing the inserts is parallelized across
            the threads in the data nodes involved. This mechanism is
            employed for restoring bulk data from the
            <code class="filename">.Data</code> file—that is, the fuzzy
            snapshot of the data; it is not used for building or
            rebuilding indexes. The change log is applied serially;
            index drops and builds are DDL operations and handled
            separately. There is no thread-level parallelism on the
            client side of the restore.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_preserve-trailing-spaces"></a>
            <a class="indexterm" name="idm140091585986752"></a>

            <a class="indexterm" name="idm140091585985296"></a>

            <code class="option">--preserve-trailing-spaces</code>,
            <code class="option">-P</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for preserve-trailing-spaces"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--preserve-trailing-spaces</code></td>
</tr></tbody></table>
</div>
<p>
            Cause trailing spaces to be preserved when promoting a
            fixed-width character data type to its variable-width
            equivalent—that is, when promoting a
            <a class="link" href="data-types.html#char" title="11.4.1 The CHAR and VARCHAR Types"><code class="literal">CHAR</code></a> column value to
            <a class="link" href="data-types.html#char" title="11.4.1 The CHAR and VARCHAR Types"><code class="literal">VARCHAR</code></a>, or a
            <code class="literal">BINARY</code> column value to
            <a class="link" href="data-types.html#binary-varbinary" title="11.4.2 The BINARY and VARBINARY Types"><code class="literal">VARBINARY</code></a>. Otherwise, any
            trailing spaces are dropped from such column values when
            they are inserted into the new columns.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              Although you can promote
              <a class="link" href="data-types.html#char" title="11.4.1 The CHAR and VARCHAR Types"><code class="literal">CHAR</code></a> columns to
              <a class="link" href="data-types.html#char" title="11.4.1 The CHAR and VARCHAR Types"><code class="literal">VARCHAR</code></a> and
              <code class="literal">BINARY</code> columns to
              <a class="link" href="data-types.html#binary-varbinary" title="11.4.2 The BINARY and VARBINARY Types"><code class="literal">VARBINARY</code></a>, you cannot
              promote <a class="link" href="data-types.html#char" title="11.4.1 The CHAR and VARCHAR Types"><code class="literal">VARCHAR</code></a> columns to
              <a class="link" href="data-types.html#char" title="11.4.1 The CHAR and VARCHAR Types"><code class="literal">CHAR</code></a> or
              <a class="link" href="data-types.html#binary-varbinary" title="11.4.2 The BINARY and VARBINARY Types"><code class="literal">VARBINARY</code></a> columns to
              <code class="literal">BINARY</code>.
</p>
</div>
</li><li class="listitem"><p><a name="option_ndb_restore_print"></a>
            <a class="indexterm" name="idm140091585957648"></a>

            <a class="indexterm" name="idm140091585956160"></a>

            <code class="option">--print</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for print"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--print</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Causes <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> to print all data,
            metadata, and logs to <code class="literal">stdout</code>. Equivalent
            to using the
            <a class="link" href="mysql-cluster.html#option_ndb_restore_print-data"><code class="option">--print-data</code></a>,
            <a class="link" href="mysql-cluster.html#option_ndb_restore_print-meta"><code class="option">--print-meta</code></a>, and
            <a class="link" href="mysql-cluster.html#option_ndb_restore_print-log"><code class="option">--print-log</code></a> options
            together.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              Use of <code class="option">--print</code> or any of the
              <code class="option">--print_*</code> options is in effect performing
              a dry run. Including one or more of these options causes
              any output to be redirected to <code class="literal">stdout</code>;
              in such cases, <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> makes no
              attempt to restore data or metadata to an NDB Cluster.
</p>
</div>
</li><li class="listitem"><p><a name="option_ndb_restore_print-data"></a>
            <a class="indexterm" name="idm140091585928928"></a>

            <a class="indexterm" name="idm140091585927440"></a>

            <code class="option">--print-data</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for print-data"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--print-data</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Cause <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> to direct its output to
            <code class="literal">stdout</code>. Often used together with one or
            more of <a class="link" href="mysql-cluster.html#option_ndb_restore_tab"><code class="option">--tab</code></a>,
            <a class="link" href="mysql-cluster.html#option_ndb_restore_fields-enclosed-by"><code class="option">--fields-enclosed-by</code></a>,
            <a class="link" href="mysql-cluster.html#option_ndb_restore_fields-optionally-enclosed-by"><code class="option">--fields-optionally-enclosed-by</code></a>,
            <a class="link" href="mysql-cluster.html#option_ndb_restore_fields-terminated-by"><code class="option">--fields-terminated-by</code></a>,
            <a class="link" href="mysql-cluster.html#option_ndb_restore_hex"><code class="option">--hex</code></a>, and
            <a class="link" href="mysql-cluster.html#option_ndb_restore_append"><code class="option">--append</code></a>.
          </p><p>
            <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> and
            <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> column values are always
            truncated. Such values are truncated to the first 256 bytes
            in the output. This cannot currently be overridden when
            using <code class="option">--print-data</code>.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_print-log"></a>
            <a class="indexterm" name="idm140091585897728"></a>

            <a class="indexterm" name="idm140091585896240"></a>

            <code class="option">--print-log</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for print-log"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--print-log</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Cause <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> to output its log to
            <code class="literal">stdout</code>.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_print-meta"></a>
            <a class="indexterm" name="idm140091585875968"></a>

            <a class="indexterm" name="idm140091585874480"></a>

            <code class="option">--print-meta</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for print-meta"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--print-meta</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Print all metadata to <code class="literal">stdout</code>.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_print-sql-log"></a>
            <a class="indexterm" name="idm140091585855472"></a>

            <a class="indexterm" name="idm140091585853984"></a>

            <code class="option">print-sql-log</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for print-sql-log"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--print-sql-log</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Log SQL statements to <code class="literal">stdout</code>. Use the
            option to enable; normally this behavior is disabled. The
            option checks before attempting to log whether all the
            tables being restored have explicitly defined primary keys;
            queries on a table having only the hidden primary key
            implemented by <code class="literal">NDB</code> cannot be converted to
            valid SQL.
          </p><p>
            This option does not work with tables having
            <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> columns.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_progress-frequency"></a>
            <a class="indexterm" name="idm140091585832240"></a>

            <a class="indexterm" name="idm140091585830784"></a>

            <code class="option">--progress-frequency</code>=<em class="replaceable"><code>N</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for progress-frequency"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--progress-frequency=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Numeric</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">65535</code></td>
</tr></tbody></table>
</div>
<p>
            Print a status report each <em class="replaceable"><code>N</code></em>
            seconds while the backup is in progress. 0 (the default)
            causes no status reports to be printed. The maximum is
            65535.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_promote-attributes"></a>
            <a class="indexterm" name="idm140091585805360"></a>

            <a class="indexterm" name="idm140091585803904"></a>

            <code class="option">--promote-attributes</code>, <code class="option">-A</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for promote-attributes"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--promote-attributes</code></td>
</tr></tbody></table>
</div>
<p>
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> supports limited
            <span class="firstterm">attribute promotion</span> in
            much the same way that it is supported by MySQL replication;
            that is, data backed up from a column of a given type can
            generally be restored to a column using a <span class="quote">“<span class="quote">larger,
            similar</span>”</span> type. For example, data from a
            <code class="literal">CHAR(20)</code> column can be restored to a
            column declared as <code class="literal">VARCHAR(20)</code>,
            <code class="literal">VARCHAR(30)</code>, or
            <code class="literal">CHAR(30)</code>; data from a
            <a class="link" href="data-types.html#integer-types" title="11.2.1 Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">MEDIUMINT</code></a> column can be
            restored to a column of type
            <a class="link" href="data-types.html#integer-types" title="11.2.1 Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">INT</code></a> or
            <a class="link" href="data-types.html#integer-types" title="11.2.1 Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a>. See
            <a class="xref" href="replication.html#replication-features-different-data-types" title="17.4.1.9.2 Replication of Columns Having Different Data Types">Section 17.4.1.9.2, “Replication of Columns Having Different Data Types”</a>,
            for a table of type conversions currently supported by
            attribute promotion.
          </p><p>
            Attribute promotion by <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> must
            be enabled explicitly, as follows:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
                Prepare the table to which the backup is to be restored.
                <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> cannot be used to
                re-create the table with a different definition from the
                original; this means that you must either create the
                table manually, or alter the columns which you wish to
                promote using <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>
                after restoring the table metadata but before restoring
                the data.
              </p></li><li class="listitem"><p>
                Invoke <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> with the
                <a class="link" href="mysql-cluster.html#option_ndb_restore_promote-attributes"><code class="option">--promote-attributes</code></a>
                option (short form <code class="option">-A</code>) when restoring
                the table data. Attribute promotion does not occur if
                this option is not used; instead, the restore operation
                fails with an error.
</p></li></ol>
</div>
<p>
            When converting between character data types and
            <code class="literal">TEXT</code> or <code class="literal">BLOB</code>, only
            conversions between character types
            (<a class="link" href="data-types.html#char" title="11.4.1 The CHAR and VARCHAR Types"><code class="literal">CHAR</code></a> and
            <a class="link" href="data-types.html#char" title="11.4.1 The CHAR and VARCHAR Types"><code class="literal">VARCHAR</code></a>) and binary types
            (<a class="link" href="data-types.html#binary-varbinary" title="11.4.2 The BINARY and VARBINARY Types"><code class="literal">BINARY</code></a> and
            <a class="link" href="data-types.html#binary-varbinary" title="11.4.2 The BINARY and VARBINARY Types"><code class="literal">VARBINARY</code></a>) can be performed
            at the same time. For example, you cannot promote an
            <a class="link" href="data-types.html#integer-types" title="11.2.1 Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">INT</code></a> column to
            <a class="link" href="data-types.html#integer-types" title="11.2.1 Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a> while promoting a
            <code class="literal">VARCHAR</code> column to <code class="literal">TEXT</code>
            in the same invocation of <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>.
          </p><p>
            Converting between <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a>
            columns using different character sets is not supported, and
            is expressly disallowed.
          </p><p>
            When performing conversions of character or binary types to
            <code class="literal">TEXT</code> or <code class="literal">BLOB</code> with
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>, you may notice that it
            creates and uses one or more staging tables named
            <code class="literal"><em class="replaceable"><code>table_name</code></em>$ST<em class="replaceable"><code>node_id</code></em></code>.
            These tables are not needed afterwards, and are normally
            deleted by <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> following a
            successful restoration.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_rebuild-indexes"></a>
            <a class="indexterm" name="idm140091585750848"></a>

            <a class="indexterm" name="idm140091585749360"></a>

            <code class="option">--rebuild-indexes</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for rebuild-indexes"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--rebuild-indexes</code></td>
</tr></tbody></table>
</div>
<p>
            Enable multithreaded rebuilding of the ordered indexes while
            restoring a native <code class="literal">NDB</code> backup. The number
            of threads used for building ordered indexes by
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> with this option is
            controlled by the
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-buildindexthreads"><code class="literal">BuildIndexThreads</code></a>
            data node configuration parameter and the number of LDMs.
          </p><a class="indexterm" name="idm140091585734400"></a><p>
            It is necessary to use this option only for the first run of
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>; this causes all ordered
            indexes to be rebuilt without using
            <code class="option">--rebuild-indexes</code> again when restoring
            subsequent nodes. You should use this option prior to
            inserting new rows into the database; otherwise, it is
            possible for a row to be inserted that later causes a unique
            constraint violation when trying to rebuild the indexes.
          </p><p>
            Building of ordered indices is parallelized with the number
            of LDMs by default. Offline index builds performed during
            node and system restarts can be made faster using the
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-buildindexthreads"><code class="literal">BuildIndexThreads</code></a>
            data node configuration parameter; this parameter has no
            effect on dropping and rebuilding of indexes by
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>, which is performed online.
          </p><p>
            Rebuilding of unique indexes uses disk write bandwidth for
            redo logging and local checkpointing. An insufficient amount
            of this bandwith can lead to redo buffer overload or log
            overload errors. In such cases you can run
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>
            <code class="option">--rebuild-indexes</code> again; the process
            resumes at the point where the error occurred. You can also
            do this when you have encountered temporary errors. You can
            repeat execution of <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>
            <code class="option">--rebuild-indexes</code> indefinitely; you may be
            able to stop such errors by reducing the value of
            <a class="link" href="mysql-cluster.html#option_ndb_restore_parallelism"><code class="option">--parallelism</code></a>. If the
            problem is insufficient space, you can increase the size of
            the redo log
            (<a class="link" href="mysql-cluster.html#ndbparam-ndbd-fragmentlogfilesize"><code class="literal">FragmentLogFileSize</code></a>
            node configuration parameter), or you can increase the speed
            at which LCPs are performed
            (<a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdiskwritespeed"><code class="literal">MaxDiskWriteSpeed</code></a>
            and related parameters), in order to free space more
            quickly.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_restore-data"></a>
            <a class="indexterm" name="idm140091585717920"></a>

            <a class="indexterm" name="idm140091585716432"></a>

            <code class="option">--restore-data</code>, <code class="option">-r</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for restore-data"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--restore-data</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Output <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table data and logs.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_restore-epoch"></a>
            <a class="indexterm" name="idm140091585696496"></a>

            <a class="indexterm" name="idm140091585695008"></a>

            <code class="option">--restore-epoch</code>, <code class="option">-e</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for restore-epoch"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--restore-epoch</code></td>
</tr></tbody></table>
</div>
<p>
            Add (or restore) epoch information to the cluster
            replication status table. This is useful for starting
            replication on an NDB Cluster replication slave. When this
            option is used, the row in the
            <code class="literal">mysql.ndb_apply_status</code> having
            <code class="literal">0</code> in the <code class="literal">id</code> column is
            updated if it already exists; such a row is inserted if it
            does not already exist. (See
            <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-backups" title="22.6.9 NDB Cluster Backups With NDB Cluster Replication">Section 22.6.9, “NDB Cluster Backups With NDB Cluster Replication”</a>.)
          </p></li><li class="listitem"><p><a name="option_ndb_restore_restore-meta"></a>
            <a class="indexterm" name="idm140091585678800"></a>

            <a class="indexterm" name="idm140091585677312"></a>

            <code class="option">--restore-meta</code>, <code class="option">-m</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for restore-meta"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--restore-meta</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            This option causes <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> to print
            <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table metadata.
          </p><p>
            The first time you run the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>
            restoration program, you also need to restore the metadata.
            In other words, you must re-create the database
            tables—this can be done by running it with the
            <code class="option">--restore-meta</code> (<code class="option">-m</code>)
            option. Restoring the metadata need be done only on a single
            data node; this is sufficient to restore it to the entire
            cluster.
          </p><p>
            In older versions of NDB Cluster, tables whose schemas were
            restored using this option used the same number of
            partitions as they did on the original cluster, even if it
            had a differing number of data nodes from the new cluster.
            In NDB 7.5.2 and later, when restoring metadata, this is no
            longer an issue; <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> now uses the
            default number of partitions for the target cluster, unless
            the number of local data manager threads is also changed
            from what it was for data nodes in the original cluster.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              The cluster should have an empty database when starting to
              restore a backup. (In other words, you should start the
              data nodes with <a class="link" href="mysql-cluster.html#option_ndbd_initial"><code class="option">--initial</code></a>
              prior to performing the restore.)
</p>
</div>
</li><li class="listitem"><p><a name="option_ndb_restore_restore-privilege-tables"></a>
            <a class="indexterm" name="idm140091585648336"></a>

            <a class="indexterm" name="idm140091585646832"></a>

            <code class="option">--restore-privilege-tables</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for restore-privilege-tables"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--restore-privilege-tables</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code> (If option is not used)</td>
</tr></tbody></table>
</div>
<p>
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> does not by default restore
            distributed MySQL privilege tables created in releases of
            NDB Cluster prior to version 8.0, which does not support
            distrubuted privileges as implemented in NDB 7.6 and
            earlier. This option causes <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>
            to restore them.
          </p><p>
            In NDB 8.0.16 and later, such tables are not used for access
            control; as part of the MySQL server's upgrade process,
            the server creates <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>
            copies of these tables local to itself. For more
            information, see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-upgrade-downgrade" title="22.2.8 Upgrading and Downgrading NDB Cluster">Section 22.2.8, “Upgrading and Downgrading NDB Cluster”</a>, as well
            as <a class="xref" href="security.html#grant-tables" title="6.2.3 Grant Tables">Section 6.2.3, “Grant Tables”</a>.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_rewrite-database"></a>
            <a class="indexterm" name="idm140091585622288"></a>

            <a class="indexterm" name="idm140091585620800"></a>

            <code class="option">--rewrite-database</code>=<em class="replaceable"><code>olddb,newdb</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for rewrite-database"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--rewrite-database=olddb,newdb</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">none</code></td>
</tr></tbody></table>
</div>
<p>
            This option makes it possible to restore to a database
            having a different name from that used in the backup. For
            example, if a backup is made of a database named
            <code class="literal">products</code>, you can restore the data it
            contains to a database named <code class="literal">inventory</code>,
            use this option as shown here (omitting any other options
            that might be required):
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; ndb_restore --rewrite-database=product,inventory
</pre><p>
            The option can be employed multiple times in a single
            invocation of <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>. Thus it is
            possible to restore simultaneously from a database named
            <code class="literal">db1</code> to a database named
            <code class="literal">db2</code> and from a database named
            <code class="literal">db3</code> to one named <code class="literal">db4</code>
            using <code class="option">--rewrite-database=db1,db2
            --rewrite-database=db3,db4</code>. Other
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> options may be used between
            multiple occurrences of <code class="option">--rewrite-database</code>.
          </p><p>
            In the event of conflicts between multiple
            <code class="option">--rewrite-database</code> options, the last
            <code class="option">--rewrite-database</code> option used, reading
            from left to right, is the one that takes effect. For
            example, if <code class="option">--rewrite-database=db1,db2
            --rewrite-database=db1,db3</code> is used, only
            <code class="option">--rewrite-database=db1,db3</code> is honored, and
            <code class="option">--rewrite-database=db1,db2</code> is ignored. It
            is also possible to restore from multiple databases to a
            single database, so that <code class="option">--rewrite-database=db1,db3
            --rewrite-database=db2,db3</code> restores all tables and
            data from databases <code class="literal">db1</code> and
            <code class="literal">db2</code> into database <code class="literal">db3</code>.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              When restoring from multiple backup databases into a
              single target database using
              <code class="option">--rewrite-database</code>, no check is made for
              collisions between table or other object names, and the
              order in which rows are restored is not guaranteed. This
              means that it is possible in such cases for rows to be
              overwritten and updates to be lost.
</p>
</div>
</li><li class="listitem"><p><a name="option_ndb_restore_skip-broken-objects"></a>
            <a class="indexterm" name="idm140091585585040"></a>

            <a class="indexterm" name="idm140091585583584"></a>

            <code class="option">--skip-broken-objects</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for skip-broken-objects"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--skip-broken-objects</code></td>
</tr></tbody></table>
</div>
<p>
            This option causes <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> to ignore
            corrupt tables while reading a native
            <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> backup, and to continue
            restoring any remaining tables (that are not also
            corrupted). Currently, the
            <code class="option">--skip-broken-objects</code> option works only in
            the case of missing blob parts tables.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_skip-table-check"></a>
            <a class="indexterm" name="idm140091585567776"></a>

            <a class="indexterm" name="idm140091585566288"></a>

            <code class="option">--skip-table-check</code>, <code class="option">-s</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for skip-table-check"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--skip-table-check</code></td>
</tr></tbody></table>
</div>
<p>
            It is possible to restore data without restoring table
            metadata. By default when doing this,
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> fails with an error if a
            mismatch is found between the table data and the table
            schema; this option overrides that behavior.
          </p><p>
            Some of the restrictions on mismatches in column definitions
            when restoring data using <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> are
            relaxed; when one of these types of mismatches is
            encountered, <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> does not stop
            with an error as it did previously, but rather accepts the
            data and inserts it into the target table while issuing a
            warning to the user that this is being done. This behavior
            occurs whether or not either of the options
            <code class="option">--skip-table-check</code> or
            <a class="link" href="mysql-cluster.html#option_ndb_restore_promote-attributes"><code class="option">--promote-attributes</code></a> is
            in use. These differences in column definitions are of the
            following types:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                Different <code class="literal">COLUMN_FORMAT</code> settings
                (<code class="literal">FIXED</code>, <code class="literal">DYNAMIC</code>,
                <code class="literal">DEFAULT</code>)
              </p></li><li class="listitem"><p>
                Different <code class="literal">STORAGE</code> settings
                (<code class="literal">MEMORY</code>, <code class="literal">DISK</code>)
              </p></li><li class="listitem"><p>
                Different default values
              </p></li><li class="listitem"><p>
                Different distribution key settings
</p></li></ul>
</div>
</li><li class="listitem"><p><a name="option_ndb_restore_skip-unknown-objects"></a>
            <a class="indexterm" name="idm140091585538240"></a>

            <a class="indexterm" name="idm140091585536784"></a>

            <code class="option">--skip-unknown-objects</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for skip-unknown-objects"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--skip-unknown-objects</code></td>
</tr></tbody></table>
</div>
<p>
            This option causes <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> to ignore
            any schema objects it does not recognize while reading a
            native <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> backup. This can be
            used for restoring a backup made from a cluster running (for
            example) NDB 7.6 to a cluster running NDB Cluster 7.5.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_tab"></a>
            <a class="indexterm" name="idm140091585521488"></a>

            <a class="indexterm" name="idm140091585520032"></a>

            <code class="option">--tab</code>=<em class="replaceable"><code>dir_name</code></em>,
            <code class="option">-T</code> <em class="replaceable"><code>dir_name</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for tab"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--tab=dir_name</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Directory name</td>
</tr></tbody></table>
</div>
<p>
            Causes <a class="link" href="mysql-cluster.html#option_ndb_restore_print-data"><code class="option">--print-data</code></a> to
            create dump files, one per table, each named
            <code class="filename"><em class="replaceable"><code>tbl_name</code></em>.txt</code>.
            It requires as its argument the path to the directory where
            the files should be saved; use <code class="literal">.</code> for the
            current directory.
          </p></li><li class="listitem"><p><a name="option_ndb_restore_verbose"></a>
            <a class="indexterm" name="idm140091585500672"></a>

            <a class="indexterm" name="idm140091585499184"></a>

            <code class="option">--verbose</code>=<em class="replaceable"><code>#</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for verbose"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--verbose=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Numeric</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">255</code></td>
</tr></tbody></table>
</div>
<p>
            Sets the level for the verbosity of the output. The minimum
            is 0; the maximum is 255. The default value is 1.
</p></li></ul>
</div>
<p><b>Error reporting. </b><a class="indexterm" name="idm140091585474448"></a>
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> reports both temporary and
          permanent errors. In the case of temporary errors, it may able
          to recover from them, and reports <code class="literal">Restore successful,
          but encountered temporary error, please look at
          configuration</code> in such cases.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
          After using <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> to initialize an
          NDB Cluster for use in circular replication, binary logs on
          the SQL node acting as the replication slave are not
          automatically created, and you must cause them to be created
          manually. To cause the binary logs to be created, issue a
          <a class="link" href="sql-syntax.html#show-tables" title="13.7.6.37 SHOW TABLES Syntax"><code class="literal">SHOW TABLES</code></a> statement on that
          SQL node before running <a class="link" href="sql-syntax.html#start-slave" title="13.4.2.6 START SLAVE Syntax"><code class="literal">START
          SLAVE</code></a>. This is a known issue in NDB Cluster.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="ndb-restore-different-number-nodes"></a>22.4.23.1 Restoring to a different number of data nodes</h4>

</div>

</div>

</div>
<p>
          It is possible to restore from an NDB backup to a cluster
          having a different number of data nodes than the original from
          which the backup was taken. The following two sections
          discuss, respectively, the cases where the target cluster has
          a lesser or greater number of data nodes than the source of
          the backup.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="ndb-restore-to-fewer-nodes"></a>22.4.23.1.1 Restoring to Fewer Nodes Than the Original</h5>
</div>
</div>
</div>
<p>
            You can restore to a cluster having fewer data nodes than
            the original provided that the larger number of nodes is an
            even multiple of the smaller number. In the following
            example, we use a backup taken on a cluster having four data
            nodes to a cluster having two data nodes.
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
                The management server for the original cluster is on
                host <code class="literal">host10</code>. The original cluster has
                four data nodes, with the node IDs and host names shown
                in the following extract from the management
                server's <code class="filename">config.ini</code> file:
              </p><pre data-lang="ini" class="programlisting">
[ndbd]
<a class="link" href="mysql-cluster.html#ndbparam-ndbd-nodeid"><code class="literal">NodeId</code></a>=2
<a class="link" href="mysql-cluster.html#ndbparam-ndbd-hostname"><code class="literal">HostName</code></a>=host2

[ndbd]
NodeId=4
HostName=host4

[ndbd]
NodeId=6
HostName=host6

[ndbd]
NodeId=8
HostName=host8
</pre><p>
                We assume that each data node was originally started
                with <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>
                <a class="link" href="mysql-cluster.html#option_ndb_common_ndb-connectstring"><code class="option">--ndb-connectstring=host10</code></a>
                or the equivalent.
              </p></li><li class="listitem"><p>
                Perform a backup in the normal manner. See
                <a class="xref" href="mysql-cluster.html#mysql-cluster-backup-using-management-client" title="22.5.3.2 Using The NDB Cluster Management Client to Create a Backup">Section 22.5.3.2, “Using The NDB Cluster Management Client to Create a Backup”</a>,
                for information about how to do this.
              </p></li><li class="listitem"><p>
                The files created by the backup on each data node are
                listed here, where <em class="replaceable"><code>N</code></em> is the
                node ID and <em class="replaceable"><code>B</code></em> is the backup
                ID.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <code class="filename">BACKUP-<em class="replaceable"><code>B</code></em>-0.<em class="replaceable"><code>N</code></em>.Data</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-<em class="replaceable"><code>B</code></em>.<em class="replaceable"><code>N</code></em>.ctl</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-<em class="replaceable"><code>B</code></em>.<em class="replaceable"><code>N</code></em>.log</code>
</p></li></ul>
</div>
<p>
                These files are found under
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupdatadir"><code class="literal">BackupDataDir</code></a><code class="filename">/BACKUP/BACKUP-<em class="replaceable"><code>B</code></em></code>,
                on each data node. For the rest of this example, we
                assume that the backup ID is 1.
              </p><p>
                Have all of these files available for later copying to
                the new data nodes (where they can be accessed on the
                data node's local file system by
                <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>). It is simplest to copy
                them all to a single location; we assume that this is
                what you have done.
              </p></li><li class="listitem"><p>
                The management server for the target cluster is on host
                <code class="literal">host20</code>, and the target has two data
                nodes, with the node IDs and host names shown, from the
                management server <code class="filename">config.ini</code> file
                on <code class="literal">host20</code>:
              </p><pre data-lang="ini" class="programlisting">
[ndbd]
NodeId=3
hostname=host3

[ndbd]
NodeId=5
hostname=host5
</pre><p>
                Each of the data node processes on
                <code class="literal">host3</code> and <code class="literal">host5</code>
                should be started with <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>
                <code class="option">-c host20</code>
                <a class="link" href="mysql-cluster.html#option_ndbd_initial"><code class="option">--initial</code></a> or the
                equivalent, so that the new (target) cluster starts with
                clean data node file systems.
              </p></li><li class="listitem"><p>
                Copy two different sets of two backup files to each of
                the target data nodes. For this example, copy the backup
                files from nodes 2 and 4 from the original cluster to
                node 3 in the target cluster. These files are listed
                here:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <code class="filename">BACKUP-1-0.2.Data</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-1.2.ctl</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-1.2.log</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-1-0.6.Data</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-1.6.ctl</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-1.6.log</code>
</p></li></ul>
</div>
<p>
                Then copy the backup files from nodes 6 and 8 to node 5;
                these files are shown in the following list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <code class="filename">BACKUP-1-0.4.Data</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-1.4.ctl</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-1.4.log</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-1-0.8.Data</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-1.8.ctl</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-1.8.log</code>
</p></li></ul>
</div>
<p>
                For the remainder of this example, we assume that the
                respective backup files have been saved to the directory
                <code class="filename">/BACKUP-1</code> on each of nodes 3 and 5.
              </p></li><li class="listitem"><p>
                On each of the two target data nodes, you must restore
                from both sets of backups. First, restore the backups
                from nodes 2 and 4 to node 3 by invoking
                <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> on
                <code class="literal">host3</code> as shown here:
              </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_restore -c host20 <a class="link" href="mysql-cluster.html#option_ndb_restore_nodeid"><code class="option">--nodeid=2</code></a> <a class="link" href="mysql-cluster.html#option_ndb_restore_backupid"><code class="option">--backupid=1</code></a> <a class="link" href="mysql-cluster.html#option_ndb_restore_restore-data"><code class="option">--restore-data</code></a> <a class="link" href="mysql-cluster.html#option_ndb_restore_backup_path"><code class="option">--backup_path=/BACKUP-1</code></a></code></strong>

shell&gt; <strong class="userinput"><code>ndb_restore -c host20 --nodeid=4 --backupid=1 --restore-data --backup_path=/BACKUP-1</code></strong>
</pre><p>
                Then restore the backups from nodes 6 and 8 to node 5 by
                invoking <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> on
                <code class="literal">host5</code>, like this:
              </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_restore -c host20 --nodeid=6 --backupid=1 --restore-data --backup_path=/BACKUP-1</code></strong>

shell&gt; <strong class="userinput"><code>ndb_restore -c host20 --nodeid=8 --backupid=1 --restore-data --backup_path=/BACKUP-1</code></strong>
</pre></li></ol>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="ndb-restore-to-more-nodes"></a>22.4.23.1.2 Restoring to More Nodes Than the Original</h5>

</div>

</div>

</div>
<p>
            The node ID specified for a given
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> command is that of the node
            in the original backup and not that of the data node to
            restore it to. When performing a backup using the method
            described in this section, <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>
            connects to the management server and obtains a list of data
            nodes in the cluster the backup is being restored to. The
            restored data is distributed accordingly, so that the number
            of nodes in the target cluster does not need to be to be
            known or calculated when performing the backup.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              When changing the total number of LCP threads or LQH
              threads per node group, you should recreate the schema
              from backup created using <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a>.
</p>
</div>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
                <span class="emphasis"><em>Create the backup of the data</em></span>. You
                can do this by invoking the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a>
                client <code class="literal">START BACKUP</code> command from the
                system shell, like this:
              </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_mgm -e "START BACKUP 1"</code></strong>
</pre><p>
                This assumes that the desired backup ID is 1.
              </p></li><li class="listitem"><p>
                Create a backup of the schema. This step is necessary
                only if the total number of LCP threads or LQH threads
                per node group is changed.
              </p><pre data-lang="terminal" class="programlisting">      
shell&gt; <strong class="userinput"><code>mysqldump --no-data --routines --events --triggers --databases &gt; myschema.sql</code></strong>
</pre>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
                  Once you have created the <code class="literal">NDB</code>
                  native backup using <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a>, you
                  must not make any schema changes before creating the
                  backup of the schema, if you do so.
</p>
</div>
</li><li class="listitem"><p>
                Copy the backup directory to the new cluster. For
                example if the backup you want to restore has ID 1 and
                <code class="literal">BackupDataDir</code> =
                <code class="filename">/backups/node_<em class="replaceable"><code>nodeid</code></em></code>,
                then the path to the backup on this node is
                <code class="filename">/backups/node_1/BACKUP/BACKUP-1</code>.
                Inside this directory there are three files, listed
                here:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <code class="filename">BACKUP-1-0.1.Data</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-1.1.ctl</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-1.1.log</code>
</p></li></ul>
</div>
<p>
                You should copy the entire directory to the new node.
              </p><p>
                If you needed to create a schema file, copy this to a
                location on an SQL node where it can be read by
                <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>.
</p></li></ol>
</div>
<p>
            There is no requirement for the backup to be restored from a
            specific node or nodes.
          </p><p>
            To restore from the backup just created, perform the
            following steps:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
                <span class="emphasis"><em>Restore the schema</em></span>.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    If you created a separate schema backup file using
                    <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a>, import this file using
                    the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client, similar to what
                    is shown here:
                  </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>mysql &lt; myschema.sql</code></strong>
</pre><p>
                    When importing the schema file, you may need to
                    specify the <a class="link" href="programs.html#option_mysql_user"><code class="option">--user</code></a> and
                    <a class="link" href="programs.html#option_mysql_password"><code class="option">--password</code></a> options
                    (and possibly others) in addition to what is shown,
                    in order for the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client to
                    be able to connect to the MySQL server.
                  </p></li><li class="listitem"><p>
                    If you did <span class="emphasis"><em>not</em></span> need to create a
                    schema file, you can re-create the schema using
                    <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>
                    <a class="link" href="mysql-cluster.html#option_ndb_restore_restore-meta"><code class="option">--restore-meta</code></a>
                    (short form <code class="option">-m</code>), similar to what is
                    shown here:
                  </p><pre data-lang="terminal" class="programlisting">
shell&gt; ndb_restore --nodeid=1 --backupid=1 --restore-meta --backup_path=/backups/node_1/BACKUP/BACKUP-1
</pre><p>
                    <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> must be able to
                    contact the management server; add the
                    <a class="link" href="mysql-cluster.html#option_ndb_common_ndb-connectstring"><code class="option">--ndb-connectstring</code></a>
                    option if and as needed to make this possible.
</p></li></ul>
</div>
</li><li class="listitem"><p>
                <span class="emphasis"><em>Restore the data</em></span>. This needs to be
                done once for each data node in the original cluster,
                each time using that data node's node ID. Assuming
                that there were 4 data nodes originally, the set of
                commands required would look something like this:
              </p><pre data-lang="terminal" class="programlisting">
ndb_restore --nodeid=1 --backupid=1 --restore-data --backup_path=/backups/node_1/BACKUP/BACKUP-1 --disable-indexes
ndb_restore --nodeid=2 --backupid=1 --restore-data --backup_path=/backups/node_2/BACKUP/BACKUP-1 --disable-indexes
ndb_restore --nodeid=3 --backupid=1 --restore-data --backup_path=/backups/node_3/BACKUP/BACKUP-1 --disable-indexes
ndb_restore --nodeid=4 --backupid=1 --restore-data --backup_path=/backups/node_4/BACKUP/BACKUP-1 --disable-indexes
</pre><p>
                These can be run in parallel.
              </p><p>
                Be sure to add the
                <a class="link" href="mysql-cluster.html#option_ndb_common_ndb-connectstring"><code class="option">--ndb-connectstring</code></a>
                option as needed.
              </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Rebuild the indexes</em></span>. These were
                disabled by the
                <a class="link" href="mysql-cluster.html#option_ndb_restore_disable-indexes"><code class="option">--disable-indexes</code></a>
                option used in the commands just shown. Recreating the
                indexes avoids errors due to the restore not being
                consistent at all points. Rebuilding the indexes can
                also improve performance in some cases. To rebuild the
                indexes, execute the following command once, on a single
                node:
              </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_restore --nodeid=1 --backupid=1 --backup_path=/backups/node_1/BACKUP/BACKUP-1 --rebuild-indexes</code></strong>
</pre><p>
                As mentioned previously, you may need to add the
                <a class="link" href="mysql-cluster.html#option_ndb_common_ndb-connectstring"><code class="option">--ndb-connectstring</code></a>
                option, so that <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> can
                contact the management server.
</p></li></ol>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="ndb-restore-parallel-data-node-backup"></a>22.4.23.2 Restoring from a backup taken in parallel</h4>

</div>

</div>

</div>
<p>
          Beginning with NDB Cluster 8.0.16, it is possible to take
          parallel backups on each data node using
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> with multiple LDMs (see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-backup-parallel-data-nodes" title="22.5.3.5 Taking an NDB with Parallel Data Nodes">Section 22.5.3.5, “Taking an NDB with Parallel Data Nodes”</a>).
          The next two sections describe how to restore backups that
          were taken in this fashion.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="ndb-restore-parallel-backup-in-paprallel"></a>22.4.23.2.1 Restoring a parallel backup in parallel</h5>
</div>
</div>
</div>
<p>
            Restoring a parallel backup in parallel requires an
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> binary from an NDB Cluster
            distribution version 8.0.16 or later. The process is not
            substantially different from that outlined in the general
            usage section under the description of the
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> program, and consists of
            executing <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> twice, similarly to
            what is shown here:
          </p><pre class="programlisting">
shell&gt; ndb_restore -n 1 -b 1 -m --backup_path=<em class="replaceable"><code>path/to/backup_dir</code></em>/BACKUP/BACKUP-<em class="replaceable"><code>backup_id</code></em> 
shell&gt; ndb_restore -n 1 -b 1 -r --backup_path=<em class="replaceable"><code>path/to/backup_dir</code></em>/BACKUP/BACKUP-<em class="replaceable"><code>backup_id</code></em> 
</pre><p>
            <em class="replaceable"><code>backup_id</code></em> is the ID of the backup
            to be restored. In the general case, no additional special
            arguments are required; <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>
            always checks for the existence of parallel subdirectories
            under the directory indicated by the
            <a class="link" href="mysql-cluster.html#option_ndb_restore_backup_path"><code class="option">--backup_path</code></a> option and
            restores the metadata (serially) and then the table data (in
            parallel).
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="ndb-restore-parallel-backup-serial"></a>22.4.23.2.2 Restoring a parallel backup serially</h5>

</div>

</div>

</div>
<p>
            It is possible to restore a backup that was made using
            parallelism on the data nodes in serial fashion. To do this,
            invoke <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> with
            <a class="link" href="mysql-cluster.html#option_ndb_restore_backup_path"><code class="option">--backup_path</code></a> pointing
            to the subdirectories created by each LDM under the main
            backup directory, once to any one of the subdirectories to
            restore the metadata (it does not matter which one, since
            each subdirectory contains a complete copy of the metadata),
            then to each of the subdirectories in turn to restore the
            data. Suppose that we want to restore the backup having
            backup ID 100 that was taken with four LDMs, and that the
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupdatadir"><code class="literal">BackupDataDir</code></a> is
            <code class="filename">/opt</code>. To restore the metadata in this
            case, we can invoke <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> like
            this:
          </p><pre class="programlisting">
shell&gt; ndb_restore -n 1 -b 1 -m --backup_path=opt/BACKUP/BACKUP-100/BACKUP-100-PART-1-OF-4
</pre><p>
            To restore the table data, execute
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> four times, each time using
            one of the subdirectories in turn, as shown here:
          </p><pre class="programlisting">
shell&gt; ndb_restore -n 1 -b 1 -r --backup_path=opt/BACKUP/BACKUP-100/BACKUP-100-PART-1-OF-4
shell&gt; ndb_restore -n 1 -b 1 -r --backup_path=opt/BACKUP/BACKUP-100/BACKUP-100-PART-2-OF-4
shell&gt; ndb_restore -n 1 -b 1 -r --backup_path=opt/BACKUP/BACKUP-100/BACKUP-100-PART-3-OF-4
shell&gt; ndb_restore -n 1 -b 1 -r --backup_path=opt/BACKUP/BACKUP-100/BACKUP-100-PART-4-OF-4
</pre><p>
            You can employ the same technique to restore a parallel
            backup to an older version of NDB Cluster (prior to NDB
            8.0.16) that does not support parallel backups, using the
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> binary supplied with the
            older version of the NDB Cluster software.
</p>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-select-all"></a>22.4.24 <span class="command"><strong>ndb_select_all</strong></span> — Print Rows from an NDB Table</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091585298464"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-select-all" title="22.4.24 ndb_select_all — Print Rows from an NDB Table"><span class="command"><strong>ndb_select_all</strong></span></a> prints all rows from an
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table to
        <code class="literal">stdout</code>.
</p>
<h4><a name="idm140091585293728"></a>Usage</h4>
<pre data-lang="terminal" class="programlisting">
ndb_select_all -c <em class="replaceable"><code>connection_string</code></em> <em class="replaceable"><code>tbl_name</code></em> -d <em class="replaceable"><code>db_name</code></em> [&gt; <em class="replaceable"><code>file_name</code></em>]
</pre><p>
        The following table includes options that are specific to the
        NDB Cluster native backup restoration program
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-select-all" title="22.4.24 ndb_select_all — Print Rows from an NDB Table"><span class="command"><strong>ndb_select_all</strong></span></a>. Additional descriptions
        follow the table. For options common to most NDB Cluster
        programs (including <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-select-all" title="22.4.24 ndb_select_all — Print Rows from an NDB Table"><span class="command"><strong>ndb_select_all</strong></span></a>), see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
</p>
<div class="table">
<a name="mysql-cluster-ndb_select_all-options-table"></a><p class="title"><b>Table 22.353 Command-line options for the ndb_select_all program</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_select_all_database">--database=dbname</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_database">-d</a>
                </code>
              </p></td>
            <td>Name of the database in which the table is found</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_select_all_parallelism">--parallelism=#</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_parallelism">-p</a>
                </code>
              </p></td>
            <td>Degree of parallelism</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_select_all_lock">--lock=#</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_lock">-l</a>
                </code>
              </p></td>
            <td>Lock type</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_select_all_order">--order=index</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_order">-o</a>
                </code>
              </p></td>
            <td>Sort resultset according to index whose name is supplied</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_select_all_descending">--descending</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_descending">-z</a>
                </code>
              </p></td>
            <td>Sort resultset in descending order (requires order flag)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_select_all_header">--header</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_header">-h</a>
                </code>
              </p></td>
            <td>Print header (set to 0|FALSE to disable headers in output)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_select_all_useHexFormat">--useHexFormat</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_useHexFormat">-x</a>
                </code>
              </p></td>
            <td>Output numbers in hexadecimal format</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_select_all_delimiter">--delimiter=char</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_delimiter">-D</a>
                </code>
              </p></td>
            <td>Set a column delimiter</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_disk">--disk</a>
                </code>
              </p></td>
            <td>Print disk references (useful only for Disk Data tables having
              nonindexed columns)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_rowid">--rowid</a>
                </code>
              </p></td>
            <td>Print rowid</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_gci">--gci</a>
                </code>
              </p></td>
            <td>Include GCI in output</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_gci64">--gci64</a>
                </code>
              </p></td>
            <td>Include GCI and row epoch in output</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_select_all_tupscan">--tupscan</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_tupscan">-t</a>
                </code>
              </p></td>
            <td>Scan in tup order</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_nodata">--nodata</a>
                </code>
              </p></td>
            <td>Do not print table column data</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_select_all_database"></a>
            <a class="indexterm" name="idm140091585185584"></a>

            <code class="option">--database=<em class="replaceable"><code>dbname</code></em></code>,
            <code class="option">-d</code> <em class="replaceable"><code>dbname</code></em>
          </p><p>
            Name of the database in which the table is found. The
            default value is <code class="literal">TEST_DB</code>.
          </p></li><li class="listitem"><p><a name="option_ndb_select_all_parallelism"></a>
            <a class="indexterm" name="idm140091585180112"></a>

            <code class="option">parallelism=<em class="replaceable"><code>#</code></em></code>,
            <code class="option">-p</code> <em class="replaceable"><code>#</code></em>
          </p><p>
            Specifies the degree of parallelism.
          </p></li><li class="listitem"><p><a name="option_ndb_select_all_lock"></a>
            <a class="indexterm" name="idm140091585175520"></a>

            <a class="indexterm" name="idm140091585174032"></a>

            <code class="option">--lock=<em class="replaceable"><code>lock_type</code></em></code>,
            <code class="option">-l <em class="replaceable"><code>lock_type</code></em></code>
          </p><p>
            Employs a lock when reading the table. Possible values for
            <em class="replaceable"><code>lock_type</code></em> are:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">0</code>: Read lock
              </p></li><li class="listitem"><p>
                <code class="literal">1</code>: Read lock with hold
              </p></li><li class="listitem"><p>
                <code class="literal">2</code>: Exclusive read lock
</p></li></ul>
</div>
<p>
            There is no default value for this option.
          </p></li><li class="listitem"><p><a name="option_ndb_select_all_order"></a>
            <a class="indexterm" name="idm140091585163776"></a>

            <a class="indexterm" name="idm140091585162288"></a>

            <code class="option">--order=<em class="replaceable"><code>index_name</code></em></code>,
            <code class="option">-o <em class="replaceable"><code>index_name</code></em></code>
          </p><p>
            Orders the output according to the index named
            <em class="replaceable"><code>index_name</code></em>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              This is the name of an index, not of a column; the index
              must have been explicitly named when created.
</p>
</div>
</li><li class="listitem"><p><a name="option_ndb_select_all_descending"></a>
            <a class="indexterm" name="idm140091585156368"></a>

            <a class="indexterm" name="idm140091585154880"></a>

            <code class="option">--descending</code>, <code class="option">-z</code>
          </p><p>
            Sorts the output in descending order. This option can be
            used only in conjunction with the <code class="option">-o</code>
            (<a class="link" href="mysql-cluster.html#option_ndb_select_all_order"><code class="option">--order</code></a>) option.
          </p></li><li class="listitem"><p><a name="option_ndb_select_all_header"></a>
            <a class="indexterm" name="idm140091585149440"></a>

            <a class="indexterm" name="idm140091585147952"></a>

            <code class="option">--header=FALSE</code>
          </p><p>
            Excludes column headers from the output.
          </p></li><li class="listitem"><p><a name="option_ndb_select_all_useHexFormat"></a>
            <a class="indexterm" name="idm140091585144416"></a>

            <a class="indexterm" name="idm140091585142928"></a>

            <code class="option">--useHexFormat</code> <code class="option">-x</code>
          </p><p>
            Causes all numeric values to be displayed in hexadecimal
            format. This does not affect the output of numerals
            contained in strings or datetime values.
          </p></li><li class="listitem"><p><a name="option_ndb_select_all_delimiter"></a>
            <a class="indexterm" name="idm140091585138816"></a>

            <a class="indexterm" name="idm140091585137328"></a>

            <code class="option">--delimiter=<em class="replaceable"><code>character</code></em></code>,
            <code class="option">-D <em class="replaceable"><code>character</code></em></code>
          </p><p>
            Causes the <em class="replaceable"><code>character</code></em> to be used
            as a column delimiter. Only table data columns are separated
            by this delimiter.
          </p><p>
            The default delimiter is the tab character.
          </p></li><li class="listitem"><p><a name="option_ndb_select_all_disk"></a>
            <a class="indexterm" name="idm140091585131808"></a>

            <a class="indexterm" name="idm140091585130320"></a>

            <code class="option">--disk</code>
          </p><p>
            Adds a disk reference column to the output. The column is
            nonempty only for Disk Data tables having nonindexed
            columns.
          </p></li><li class="listitem"><p><a name="option_ndb_select_all_rowid"></a>
            <a class="indexterm" name="idm140091585126624"></a>

            <a class="indexterm" name="idm140091585125136"></a>

            <code class="option">--rowid</code>
          </p><p>
            Adds a <code class="literal">ROWID</code> column providing information
            about the fragments in which rows are stored.
          </p></li><li class="listitem"><p><a name="option_ndb_select_all_gci"></a>
            <a class="indexterm" name="idm140091585120784"></a>

            <a class="indexterm" name="idm140091585119296"></a>

            <code class="option">--gci</code>
          </p><p>
            Adds a <code class="literal">GCI</code> column to the output showing
            the global checkpoint at which each row was last updated.
            See <a class="xref" href="mysql-cluster.html#mysql-cluster-overview" title="22.1 NDB Cluster Overview">Section 22.1, “NDB Cluster Overview”</a>, and
            <a class="xref" href="mysql-cluster.html#mysql-cluster-log-events" title="22.5.6.2 NDB Cluster Log Events">Section 22.5.6.2, “NDB Cluster Log Events”</a>, for more
            information about checkpoints.
          </p></li><li class="listitem"><p><a name="option_ndb_select_all_gci64"></a>
            <a class="indexterm" name="idm140091585113424"></a>

            <a class="indexterm" name="idm140091585111936"></a>

            <code class="option">--gci64</code>
          </p><p>
            Adds a <code class="literal">ROW$GCI64</code> column to the output
            showing the global checkpoint at which each row was last
            updated, as well as the number of the epoch in which this
            update occurred.
          </p></li><li class="listitem"><p><a name="option_ndb_select_all_tupscan"></a>
            <a class="indexterm" name="idm140091585107536"></a>

            <a class="indexterm" name="idm140091585106048"></a>

            <code class="option">--tupscan</code>, <code class="option">-t</code>
          </p><p>
            Scan the table in the order of the tuples.
          </p></li><li class="listitem"><p><a name="option_ndb_select_all_nodata"></a>
            <a class="indexterm" name="idm140091585102128"></a>

            <a class="indexterm" name="idm140091585100640"></a>

            <code class="option">--nodata</code>
          </p><p>
            Causes any table data to be omitted.
</p></li></ul>
</div>
<h4><a name="idm140091585097888"></a>Sample Output</h4>
<p>
        Output from a MySQL <a class="link" href="sql-syntax.html#select" title="13.2.10 SELECT Syntax"><code class="literal">SELECT</code></a>
        statement:
      </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT * FROM ctest1.fish;</code></strong>
+----+-----------+
| id | name      |
+----+-----------+
|  3 | shark     |
|  6 | puffer    |
|  2 | tuna      |
|  4 | manta ray |
|  5 | grouper   |
|  1 | guppy     |
+----+-----------+
6 rows in set (0.04 sec)
</pre><p>
        Output from the equivalent invocation of
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-select-all" title="22.4.24 ndb_select_all — Print Rows from an NDB Table"><span class="command"><strong>ndb_select_all</strong></span></a>:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>./ndb_select_all -c localhost fish -d ctest1</code></strong>
id      name
3       [shark]
6       [puffer]
2       [tuna]
4       [manta ray]
5       [grouper]
1       [guppy]
6 rows returned

NDBT_ProgramExit: 0 - OK
</pre><p>
        All string values are enclosed by square brackets
        (<code class="literal">[</code>...<code class="literal">]</code>) in the output of
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-select-all" title="22.4.24 ndb_select_all — Print Rows from an NDB Table"><span class="command"><strong>ndb_select_all</strong></span></a>. For another example, consider
        the table created and populated as shown here:
      </p><pre data-lang="sql" class="programlisting">
CREATE TABLE dogs (
    id INT(11) NOT NULL AUTO_INCREMENT,
    name VARCHAR(25) NOT NULL,
    breed VARCHAR(50) NOT NULL,
    PRIMARY KEY pk (id),
    KEY ix (name)
)
TABLESPACE ts STORAGE DISK
ENGINE=NDBCLUSTER;

INSERT INTO dogs VALUES
    ('', 'Lassie', 'collie'),
    ('', 'Scooby-Doo', 'Great Dane'),
    ('', 'Rin-Tin-Tin', 'Alsatian'),
    ('', 'Rosscoe', 'Mutt');
</pre><p>
        This demonstrates the use of several additional
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-select-all" title="22.4.24 ndb_select_all — Print Rows from an NDB Table"><span class="command"><strong>ndb_select_all</strong></span></a> options:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>./ndb_select_all -d ctest1 dogs -o ix -z --gci --disk</code></strong>
GCI     id name          breed        DISK_REF
834461  2  [Scooby-Doo]  [Great Dane] [ m_file_no: 0 m_page: 98 m_page_idx: 0 ]
834878  4  [Rosscoe]     [Mutt]       [ m_file_no: 0 m_page: 98 m_page_idx: 16 ]
834463  3  [Rin-Tin-Tin] [Alsatian]   [ m_file_no: 0 m_page: 34 m_page_idx: 0 ]
835657  1  [Lassie]      [Collie]     [ m_file_no: 0 m_page: 66 m_page_idx: 0 ]
4 rows returned

NDBT_ProgramExit: 0 - OK
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-select-count"></a>22.4.25 <span class="command"><strong>ndb_select_count</strong></span> — Print Row Counts for NDB Tables</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091585079616"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-select-count" title="22.4.25 ndb_select_count — Print Row Counts for NDB Tables"><span class="command"><strong>ndb_select_count</strong></span></a> prints the number of rows in
        one or more <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables. With a
        single table, the result is equivalent to that obtained by using
        the MySQL statement <code class="literal">SELECT COUNT(*) FROM
        <em class="replaceable"><code>tbl_name</code></em></code>.
</p>
<h4><a name="idm140091585074464"></a>Usage</h4>
<pre data-lang="terminal" class="programlisting">
ndb_select_count [-c <em class="replaceable"><code>connection_string</code></em>] -d<em class="replaceable"><code>db_name</code></em> <em class="replaceable"><code>tbl_name</code></em>[, <em class="replaceable"><code>tbl_name2</code></em>[, ...]]
</pre><p>
        The following table includes options that are specific to the
        NDB Cluster native backup restoration program
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-select-count" title="22.4.25 ndb_select_count — Print Row Counts for NDB Tables"><span class="command"><strong>ndb_select_count</strong></span></a>. Additional descriptions
        follow the table. For options common to most NDB Cluster
        programs (including <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-select-count" title="22.4.25 ndb_select_count — Print Row Counts for NDB Tables"><span class="command"><strong>ndb_select_count</strong></span></a>), see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
</p>
<div class="table">
<a name="mysql-cluster-ndb_select_count-options-table"></a><p class="title"><b>Table 22.354 Command-line options for the ndb_select_count program</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="literal">--database=dbname</code>,
              </p><p>
                <code class="literal">-d</code>
              </p></td>
            <td>Name of the database in which the table is found</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">--parallelism=#</code>,
              </p><p>
                <code class="literal">-p</code>
              </p></td>
            <td>Degree of parallelism</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">--lock=#</code>,
              </p><p>
                <code class="literal">-l</code>
              </p></td>
            <td>Lock type</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        You can obtain row counts from multiple tables in the same
        database by listing the table names separated by spaces when
        invoking this command, as shown under
        <span class="bold"><strong>Sample Output</strong></span>.
</p>
<h4><a name="idm140091585041424"></a>Sample Output</h4>
<pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>./ndb_select_count -c localhost -d ctest1 fish dogs</code></strong>
6 records in table fish
4 records in table dogs

NDBT_ProgramExit: 0 - OK
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-setup-py"></a>22.4.26 <span class="command"><strong>ndb_setup.py</strong></span> — Start browser-based Auto-Installer for
NDB Cluster</h3>
</div>
</div>
</div>
<a class="indexterm" name="idm140091585037168"></a><a class="indexterm" name="idm140091585036096"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py" title="22.4.26 ndb_setup.py — Start browser-based Auto-Installer for NDB Cluster"><span class="command"><strong>ndb_setup.py</strong></span></a> starts the NDB Cluster
        Auto-Installer and opens the installer's Start page in the
        default Web browser.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
          This program is intended to be invoked as a normal user, and
          not with the <code class="literal">mysql</code>, system
          <code class="literal">root</code> or other administrative account.
</p>
</div>
<p>
        This section describes usage of and program options for the
        command-line tool only. For information about using the
        Auto-Installer GUI that is spawned when
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py" title="22.4.26 ndb_setup.py — Start browser-based Auto-Installer for NDB Cluster"><span class="command"><strong>ndb_setup.py</strong></span></a> is invoked, see
        <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-install-auto.html" target="_top">The NDB Cluster Auto-Installer (NDB 7.5)</a>.
</p>
<h4><a name="idm140091585027856"></a>Usage</h4>
<p>
        All platforms:
      </p><pre data-lang="terminal" class="programlisting">
ndb_setup.py [<em class="replaceable"><code>options</code></em>]
</pre><a class="indexterm" name="idm140091585025360"></a><a class="indexterm" name="idm140091585023872"></a><p>
        Additionally, on Windows platforms only:
      </p><pre data-lang="terminal" class="programlisting">
setup.bat [<em class="replaceable"><code>options</code></em>]
</pre><p>
        The following table includes all options that are supported by
        the NDB Cluster installation and configuration program
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py" title="22.4.26 ndb_setup.py — Start browser-based Auto-Installer for NDB Cluster"><span class="command"><strong>ndb_setup.py</strong></span></a>. Additional descriptions follow
        the table.
</p>
<div class="table">
<a name="mysql-cluster-ndb_setup_py-options-table"></a><p class="title"><b>Table 22.355 Command-line options for the ndb_setup.py program</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_setup_py_browser-start-page">--browser-start-page=filename</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_setup_py_browser-start-page">-s</a>
                </code>
              </p></td>
            <td>Page that the web browser opens when starting.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_setup_py_ca-certs-file">--ca-certs-file=filename</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_setup_py_ca-certs-file">-a</a>
                </code>
              </p></td>
            <td>File containing list of client certificates allowed to connect to the
              server</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_setup_py_cert-file">--cert-file=filename</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_setup_py_cert-file">-c</a>
                </code>
              </p></td>
            <td>File containing X509 certificate that identifies the server. (Default:
              cfg.pem)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_setup_py_debug-level">--debug-level=level</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_setup_py_debug-level">-d</a>
                </code>
              </p></td>
            <td>Python logging module debug level. One of DEBUG, INFO, WARNING
              (default), ERROR, or CRITICAL.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_setup_py_help">--help</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_setup_py_help">-h</a>
                </code>
              </p></td>
            <td>Print help message</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_setup_py_key-file">--key-file=file</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_setup_py_key-file">-k</a>
                </code>
              </p></td>
            <td>Specify file containing private key (if not included in --cert-file)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_setup_py_no-browser">--no-browser</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_setup_py_no-browser">-n</a>
                </code>
              </p></td>
            <td>Do not open the start page in a browser, merely start the tool</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_setup_py_port">--port=#</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_setup_py_port">-p</a>
                </code>
              </p></td>
            <td>Specify the port used by the web server</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_setup_py_server-log-file">--server-log-file=file</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_setup_py_server-log-file">o</a>
                </code>
              </p></td>
            <td>Log requests to this file. Use '-' to force logging to stderr instead.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_setup_py_server-name">--server-name=name</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_setup_py_server-name">-N</a>
                </code>
              </p></td>
            <td>The name of the server to connect with</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_setup_py_use-http">--use-http</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_setup_py_use-https">-H</a>
                </code>
              </p></td>
            <td>Use unencrypted (HTTP) client/server connection</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_setup_py_use-https">--use-https</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_setup_py_use-https">-S</a>
                </code>
              </p></td>
            <td>Use encrypted (HTTPS) client/server connection</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_setup_py_browser-start-page"></a>
            <a class="indexterm" name="idm140091584924320"></a>

            <a class="indexterm" name="idm140091584922864"></a>

            <code class="option">--browser-start-page=<em class="replaceable"><code>file</code></em></code>,
            <code class="option">-s</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for browser-start-page"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--browser-start-page=filename</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">index.html</code></td>
</tr></tbody></table>
</div>
<p>
            Specify the file to open in the browser as the installation
            and configuration Start page. The default is
            <code class="filename">index.html</code>.
          </p></li><li class="listitem"><p><a name="option_ndb_setup_py_ca-certs-file"></a>
            <a class="indexterm" name="idm140091584902960"></a>

            <a class="indexterm" name="idm140091584901472"></a>

            <code class="option">--ca-certs-file=<em class="replaceable"><code>file</code></em></code>,
            <code class="option">-a</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for ca-certs-file"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--ca-certs-file=filename</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>File name</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">[none]</code></td>
</tr></tbody></table>
</div>
<p>
            Specify a file containing a list of client certificates
            which are allowed to connect to the server. The default is
            an empty string, which means that no client authentication
            is used.
          </p></li><li class="listitem"><p><a name="option_ndb_setup_py_cert-file"></a>
            <a class="indexterm" name="idm140091584882192"></a>

            <a class="indexterm" name="idm140091584880704"></a>

            <code class="option">--cert-file=<em class="replaceable"><code>file</code></em></code>,
            <code class="option">-c</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for cert-file"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--cert-file=filename</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>File name</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">/usr/share/mysql/mcc/cfg.pem</code></td>
</tr></tbody></table>
</div>
<p>
            Specify a file containing an X509 certificate which
            identifies the server. It is possible for the certificate to
            be self-signed. The default is <code class="filename">cfg.pem</code>.
          </p></li><li class="listitem"><p><a name="option_ndb_setup_py_debug-level"></a>
            <a class="indexterm" name="idm140091584860832"></a>

            <a class="indexterm" name="idm140091584859344"></a>

            <code class="option">--debug-level=<em class="replaceable"><code>level</code></em></code>,
            <code class="option">-d</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for debug-level"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--debug-level=level</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Enumeration</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">WARNING</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Valid Values</strong></span></td>
<td><p class="valid-value"><code class="literal">WARNING</code></p><p class="valid-value"><code class="literal">DEBUG</code></p><p class="valid-value"><code class="literal">INFO</code></p><p class="valid-value"><code class="literal">ERROR</code></p><p class="valid-value"><code class="literal">CRITICAL</code></p></td>
</tr></tbody></table>
</div>
<p>
            Set the Python logging module debug level. This is one of
            <code class="literal">DEBUG</code>, <code class="literal">INFO</code>,
            <code class="literal">WARNING</code>, <code class="literal">ERROR</code>, or
            <code class="literal">CRITICAL</code>. <code class="literal">WARNING</code> is
            the default.
          </p></li><li class="listitem"><p><a name="option_ndb_setup_py_help"></a>
            <a class="indexterm" name="idm140091584828736"></a>

            <a class="indexterm" name="idm140091584827280"></a>

            <code class="option">--help</code>, <code class="option">-h</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for help"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--help</code></td>
</tr></tbody></table>
</div>
<p>
            Print a help message.
          </p></li><li class="listitem"><p><a name="option_ndb_setup_py_key-file"></a>
            <a class="indexterm" name="idm140091584814336"></a>

            <a class="indexterm" name="idm140091584812848"></a>

            <code class="option">--key-file=<em class="replaceable"><code>file</code></em></code>,
            <code class="option">-d</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for key-file"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--key-file=file</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>File name</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">[none]</code></td>
</tr></tbody></table>
</div>
<p>
            Specify a file containing the private key if this is not
            included in the X509 certificate file
            (<a class="link" href="mysql-cluster.html#option_ndb_setup_py_cert-file"><code class="option">--cert-file</code></a>). The
            default is an empty string, which means that no such file is
            used.
          </p></li><li class="listitem"><p><a name="option_ndb_setup_py_no-browser"></a>
            <a class="indexterm" name="idm140091584792688"></a>

            <a class="indexterm" name="idm140091584791200"></a>

            <code class="option">--no-browser</code>, <code class="option">-n</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for no-browser"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--no-browser</code></td>
</tr></tbody></table>
</div>
<p>
            Start the installation and configuration tool, but do not
            open the Start page in a browser.
          </p></li><li class="listitem"><p><a name="option_ndb_setup_py_port"></a>
            <a class="indexterm" name="idm140091584778144"></a>

            <a class="indexterm" name="idm140091584776656"></a>

            <code class="option">--port=<em class="replaceable"><code>#</code></em></code>,
            <code class="option">-p</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for port"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--port=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Numeric</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">8081</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">65535</code></td>
</tr></tbody></table>
</div>
<p>
            Set the port used by the web server. The default is 8081.
          </p></li><li class="listitem"><p><a name="option_ndb_setup_py_server-log-file"></a>
            <a class="indexterm" name="idm140091584751520"></a>

            <a class="indexterm" name="idm140091584750032"></a>

            <code class="option">--server-log-file=<em class="replaceable"><code>file</code></em></code>,
            <code class="option">-o</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for server-log-file"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><p class="valid-value"><code class="literal">--server-log-file=file</code></p><p class="valid-value"><code class="literal">o</code></p></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>File name</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">ndb_setup.log</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Valid Values</strong></span></td>
<td><p class="valid-value"><code class="literal">ndb_setup.log</code></p><p class="valid-value"><code class="literal">-</code> (Log to stderr)</p></td>
</tr></tbody></table>
</div>
<p>
            Log requests to this file. The default is
            <code class="filename">ndb_setup.log</code>. To specify logging to
            <code class="literal">stderr</code>, rather than to a file, use a
            <code class="literal">-</code> (dash character) for the file name.
          </p></li><li class="listitem"><p><a name="option_ndb_setup_py_server-name"></a>
            <a class="indexterm" name="idm140091584722896"></a>

            <a class="indexterm" name="idm140091584721408"></a>

            <code class="option">--server-name=<em class="replaceable"><code>host</code></em></code>,
            <code class="option">-N</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for server-name"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--server-name=name</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">localhost</code></td>
</tr></tbody></table>
</div>
<p>
            Specify the host name or IP address for the browser to use
            when connecting. The default is
            <code class="literal">localhost</code>.
          </p></li><li class="listitem"><p><a name="option_ndb_setup_py_use-http"></a>
            <a class="indexterm" name="idm140091584701600"></a>

            <a class="indexterm" name="idm140091584700112"></a>

            <code class="option">--use-http</code>, <code class="option">-H</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for use-http"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--use-http</code></td>
</tr></tbody></table>
</div>
<p>
            Make the browser use HTTP to connect with the server. This
            means that the connection is unencrypted and not secured in
            any way.
          </p></li><li class="listitem"><p><a name="option_ndb_setup_py_use-https"></a>
            <a class="indexterm" name="idm140091584687008"></a>

            <a class="indexterm" name="idm140091584685520"></a>

            <code class="option">--use-https</code>, <code class="option">-S</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for use-https"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--use-https</code></td>
</tr></tbody></table>
</div>
<p>
            Make the browser use a secure (HTTPS) connection with the
            server.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-show-tables"></a>22.4.27 <span class="command"><strong>ndb_show_tables</strong></span> — Display List of NDB Tables</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091584671664"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-show-tables" title="22.4.27 ndb_show_tables — Display List of NDB Tables"><span class="command"><strong>ndb_show_tables</strong></span></a> displays a list of all
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> database objects in the
        cluster. By default, this includes not only both user-created
        tables and <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> system tables, but
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>-specific indexes, internal
        triggers, and NDB Cluster Disk Data objects as well.
      </p><p>
        The following table includes options that are specific to the
        NDB Cluster native backup restoration program
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-show-tables" title="22.4.27 ndb_show_tables — Display List of NDB Tables"><span class="command"><strong>ndb_show_tables</strong></span></a>. Additional descriptions
        follow the table. For options common to most NDB Cluster
        programs (including <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-show-tables" title="22.4.27 ndb_show_tables — Display List of NDB Tables"><span class="command"><strong>ndb_show_tables</strong></span></a>), see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
</p>
<div class="table">
<a name="mysql-cluster-ndb_show_tables-options-table"></a><p class="title"><b>Table 22.356 Command-line options for the ndb_show_tables program</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_show_tables_database">--database=string</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_show_tables_database">-d</a>
                </code>
              </p></td>
            <td>Specifies the database in which the table is found</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_show_tables_loops">--loops=#</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_show_tables_loops">-l</a>
                </code>
              </p></td>
            <td>Number of times to repeat output</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_show_tables_parsable">--parsable</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_show_tables_parsable">-p</a>
                </code>
              </p></td>
            <td>Return output suitable for MySQL LOAD DATA INFILE statement</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_show_tables_show-temp-status">--show-temp-status</a>
                </code>
              </p></td>
            <td>Show table temporary flag</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_show_tables_type">--type=#</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_show_tables_type">-t</a>
                </code>
              </p></td>
            <td>Limit output to objects of this type</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_show_tables_unqualified">--unqualified</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_show_tables_unqualified">-u</a>
                </code>
              </p></td>
            <td>Do not qualify table names</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<h4><a name="idm140091584612272"></a>Usage</h4>
<pre data-lang="terminal" class="programlisting">
ndb_show_tables [-c <em class="replaceable"><code>connection_string</code></em>]
</pre>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_show_tables_database"></a>
            <a class="indexterm" name="idm140091584608928"></a>

            <a class="indexterm" name="idm140091584607440"></a>

            <code class="option">--database</code>, <code class="option">-d</code>
          </p><p>
            Specifies the name of the database in which the tables are
            found. If this option has not been specified, and no tables
            are found in the <code class="literal">TEST_DB</code> database,
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-show-tables" title="22.4.27 ndb_show_tables — Display List of NDB Tables"><span class="command"><strong>ndb_show_tables</strong></span></a> issues a warning.
          </p></li><li class="listitem"><p><a name="option_ndb_show_tables_loops"></a>
            <a class="indexterm" name="idm140091584601408"></a>

            <a class="indexterm" name="idm140091584599920"></a>

            <code class="option">--loops</code>, <code class="option">-l</code>
          </p><p>
            Specifies the number of times the utility should execute.
            This is 1 when this option is not specified, but if you do
            use the option, you must supply an integer argument for it.
          </p></li><li class="listitem"><p><a name="option_ndb_show_tables_parsable"></a>
            <a class="indexterm" name="idm140091584595840"></a>

            <a class="indexterm" name="idm140091584594352"></a>

            <code class="option">--parsable</code>, <code class="option">-p</code>
          </p><p>
            Using this option causes the output to be in a format
            suitable for use with <a class="link" href="sql-syntax.html#load-data" title="13.2.7 LOAD DATA Syntax"><code class="literal">LOAD
            DATA</code></a>.
          </p></li><li class="listitem"><p><a name="option_ndb_show_tables_show-temp-status"></a>
            <a class="indexterm" name="idm140091584589168"></a>

            <a class="indexterm" name="idm140091584587680"></a>

            <code class="option">--show-temp-status</code>
          </p><p>
            If specified, this causes temporary tables to be displayed.
          </p></li><li class="listitem"><p><a name="option_ndb_show_tables_type"></a>
            <a class="indexterm" name="idm140091584584128"></a>

            <a class="indexterm" name="idm140091584582640"></a>

            <code class="option">--type</code>, <code class="option">-t</code>
          </p><p>
            Can be used to restrict the output to one type of object,
            specified by an integer type code as shown here:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">1</code>: System table
              </p></li><li class="listitem"><p>
                <code class="literal">2</code>: User-created table
              </p></li><li class="listitem"><p>
                <code class="literal">3</code>: Unique hash index
</p></li></ul>
</div>
<p>
            Any other value causes all <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>
            database objects to be listed (the default).
          </p></li><li class="listitem"><p><a name="option_ndb_show_tables_unqualified"></a>
            <a class="indexterm" name="idm140091584572080"></a>

            <a class="indexterm" name="idm140091584570592"></a>

            <code class="option">--unqualified</code>, <code class="option">-u</code>
          </p><p>
            If specified, this causes unqualified object names to be
            displayed.
</p></li></ul>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Note
</div>
<p>
          Only user-created NDB Cluster tables may be accessed from
          MySQL; system tables such as <code class="literal">SYSTAB_0</code> are
          not visible to <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>. However, you can
          examine the contents of system tables using
          <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> API applications such as
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-select-all" title="22.4.24 ndb_select_all — Print Rows from an NDB Table"><span class="command"><strong>ndb_select_all</strong></span></a> (see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-select-all" title="22.4.24 ndb_select_all — Print Rows from an NDB Table">Section 22.4.24, “<span class="command"><strong>ndb_select_all</strong></span> — Print Rows from an NDB Table”</a>).
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-size-pl"></a>22.4.28 <span class="command"><strong>ndb_size.pl</strong></span> — NDBCLUSTER Size Requirement Estimator</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091584559552"></a><p>
        This is a Perl script that can be used to estimate the amount of
        space that would be required by a MySQL database if it were
        converted to use the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a>
        storage engine. Unlike the other utilities discussed in this
        section, it does not require access to an NDB Cluster (in fact,
        there is no reason for it to do so). However, it does need to
        access the MySQL server on which the database to be tested
        resides.
</p>
<h4><a name="idm140091584556432"></a>Requirements</h4>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            A running MySQL server. The server instance does not have to
            provide support for NDB Cluster.
          </p></li><li class="listitem"><p>
            A working installation of Perl.
          </p></li><li class="listitem"><p>
            The <code class="literal">DBI</code> module, which can be obtained
            from CPAN if it is not already part of your Perl
            installation. (Many Linux and other operating system
            distributions provide their own packages for this library.)
          </p></li><li class="listitem"><p>
            A MySQL user account having the necessary privileges. If you
            do not wish to use an existing account, then creating one
            using <code class="literal">GRANT USAGE ON
            <em class="replaceable"><code>db_name</code></em>.*</code>—where
            <em class="replaceable"><code>db_name</code></em> is the name of the
            database to be examined—is sufficient for this
            purpose.
</p></li></ul>
</div>
<p>
        <code class="filename">ndb_size.pl</code> can also be found in the MySQL
        sources in <code class="filename">storage/ndb/tools</code>.
      </p><p>
        The following table includes options that are specific to the
        NDB Cluster program <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-size-pl" title="22.4.28 ndb_size.pl — NDBCLUSTER Size Requirement Estimator"><span class="command"><strong>ndb_size.pl</strong></span></a>. Additional
        descriptions follow the table. For options common to most NDB
        Cluster programs (including <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-size-pl" title="22.4.28 ndb_size.pl — NDBCLUSTER Size Requirement Estimator"><span class="command"><strong>ndb_size.pl</strong></span></a>), see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
</p>
<div class="table">
<a name="mysql-cluster-ndb_size_pl-options-table"></a><p class="title"><b>Table 22.357 Command-line options for the ndb_size.pl program</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_size_pl_options">--database=dbname</a>
                </code>
              </p></td>
            <td>The database or databases to examine; accepts a comma-delimited list;
              the default is ALL (use all databases found on the server)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_size_pl_options">--hostname[:port]</a>
                </code>
              </p></td>
            <td>Specify host and optional port as host[:port]</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_size_pl_options">--socket=file_name</a>
                </code>
              </p></td>
            <td>Specify a socket to connect to</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_size_pl_options">--user=string</a>
                </code>
              </p></td>
            <td>Specify a MySQL user name</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_size_pl_options">--password=string</a>
                </code>
              </p></td>
            <td>Specify a MySQL user password</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_size_pl_format">--format=string</a>
                </code>
              </p></td>
            <td>Set output format (text or HTML)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_size_pl_options">--excludetables=tbl_list</a>
                </code>
              </p></td>
            <td>Skip any tables in a comma-separated list of tables</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_size_pl_options">--excludedbs=db_list</a>
                </code>
              </p></td>
            <td>Skip any databases in a comma-separated list of databases</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_size_pl_debugging">--savequeries=file</a>
                </code>
              </p></td>
            <td>Saves all queries to the database into the file specified</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_size_pl_debugging">--loadqueries=file</a>
                </code>
              </p></td>
            <td>Loads all queries from the file specified; does not connect to a
              database</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_size_pl_options">--real_table_name=table</a>
                </code>
              </p></td>
            <td>Designates a table to handle unique index size calculations</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<h4><a name="idm140091584474896"></a>Usage</h4>
<pre data-lang="terminal" class="programlisting">
perl ndb_size.pl [--database={<em class="replaceable"><code>db_name</code></em>|ALL}] [--hostname=<em class="replaceable"><code>host</code></em>[:<em class="replaceable"><code>port</code></em>]] [--socket=<em class="replaceable"><code>socket</code></em>] \
      [--user=<em class="replaceable"><code>user</code></em>] [--password=<em class="replaceable"><code>password</code></em>]  \
      [--help|-h] [--format={html|text}] \
      [--loadqueries=<em class="replaceable"><code>file_name</code></em>] [--savequeries=<em class="replaceable"><code>file_name</code></em>]
</pre><p><a name="option_ndb_size_pl_options"></a>
        By default, this utility attempts to analyze all databases on
        the server. You can specify a single database using the
        <code class="option">--database</code> option; the default behavior can be
        made explicit by using <code class="literal">ALL</code> for the name of
        the database. You can also exclude one or more databases by
        using the <code class="option">--excludedbs</code> option with a
        comma-separated list of the names of the databases to be
        skipped. Similarly, you can cause specific tables to be skipped
        by listing their names, separated by commas, following the
        optional <code class="option">--excludetables</code> option. A host name
        can be specified using <code class="option">--hostname</code>; the default
        is <code class="literal">localhost</code>. You can specify a port in
        addition to the host using
        <em class="replaceable"><code>host</code></em>:<em class="replaceable"><code>port</code></em>
        format for the value of <code class="option">--hostname</code>. The default
        port number is 3306. If necessary, you can also specify a
        socket; the default is <code class="filename">/var/lib/mysql.sock</code>.
        A MySQL user name and password can be specified the
        corresponding options shown. It also possible to control the
        format of the output using the <code class="option">--format</code> option;
        this can take either of the values <code class="literal">html</code> or
        <code class="literal">text</code>, with <code class="literal">text</code> being the
        default. An example of the text output is shown here:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_size.pl --database=test --socket=/tmp/mysql.sock</code></strong>
ndb_size.pl report for database: 'test' (1 tables)
--------------------------------------------------
Connected to: DBI:mysql:host=localhost;mysql_socket=/tmp/mysql.sock

Including information for versions: 4.1, 5.0, 5.1

test.t1
-------

DataMemory for Columns (* means varsized DataMemory):
         Column Name            Type  Varsized   Key  4.1  5.0   5.1
     HIDDEN_NDB_PKEY          bigint             PRI    8    8     8
                  c2     varchar(50)         Y         52   52    4*
                  c1         int(11)                    4    4     4
                                                       --   --    --
Fixed Size Columns DM/Row                              64   64    12
   Varsize Columns DM/Row                               0    0     4

DataMemory for Indexes:
   Index Name                 Type        4.1        5.0        5.1
      PRIMARY                BTREE         16         16         16
                                           --         --         --
       Total Index DM/Row                  16         16         16

IndexMemory for Indexes:
               Index Name        4.1        5.0        5.1
                  PRIMARY         33         16         16
                                  --         --         --
           Indexes IM/Row         33         16         16

Summary (for THIS table):
                                 4.1        5.0        5.1
    Fixed Overhead DM/Row         12         12         16
           NULL Bytes/Row          4          4          4
           DataMemory/Row         96         96         48
                    (Includes overhead, bitmap and indexes)

  Varsize Overhead DM/Row          0          0          8
   Varsize NULL Bytes/Row          0          0          4
       Avg Varside DM/Row          0          0         16

                 No. Rows          0          0          0

        Rows/32kb DM Page        340        340        680
Fixedsize DataMemory (KB)          0          0          0

Rows/32kb Varsize DM Page          0          0       2040
  Varsize DataMemory (KB)          0          0          0

         Rows/8kb IM Page        248        512        512
         IndexMemory (KB)          0          0          0

Parameter Minimum Requirements
------------------------------
* indicates greater than default

                Parameter     Default        4.1         5.0         5.1
          DataMemory (KB)       81920          0           0           0
       NoOfOrderedIndexes         128          1           1           1
               NoOfTables         128          1           1           1
         IndexMemory (KB)       18432          0           0           0
    NoOfUniqueHashIndexes          64          0           0           0
           NoOfAttributes        1000          3           3           3
             NoOfTriggers         768          5           5           5
</pre><p><a name="option_ndb_size_pl_debugging"></a>
        For debugging purposes, the Perl arrays containing the queries
        run by this script can be read from the file specified using can
        be saved to a file using <code class="option">--savequeries</code>; a file
        containing such arrays to be read during script execution can be
        specified using <code class="option">--loadqueries</code>. Neither of these
        options has a default value.
      </p><p><a name="option_ndb_size_pl_format"></a>
        To produce output in HTML format, use the
        <code class="option">--format</code> option and redirect the output to a
        file, as shown here:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_size.pl --database=test --socket=/tmp/mysql.sock --format=html &gt; ndb_size.html</code></strong>
</pre><p>
        (Without the redirection, the output is sent to
        <code class="literal">stdout</code>.)
      </p><p>
        The output from this script includes the following information:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Minimum values for the
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a>,
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexmemory"><code class="literal">IndexMemory</code></a>,
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooftables"><code class="literal">MaxNoOfTables</code></a>,
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofattributes"><code class="literal">MaxNoOfAttributes</code></a>,
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooforderedindexes"><code class="literal">MaxNoOfOrderedIndexes</code></a>,
            and <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooftriggers"><code class="literal">MaxNoOfTriggers</code></a>
            configuration parameters required to accommodate the tables
            analyzed.
          </p></li><li class="listitem"><p>
            Memory requirements for all of the tables, attributes,
            ordered indexes, and unique hash indexes defined in the
            database.
          </p></li><li class="listitem"><p>
            The <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexmemory"><code class="literal">IndexMemory</code></a> and
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a> required
            per table and table row.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-top"></a>22.4.29 <span class="command"><strong>ndb_top</strong></span> — View CPU usage information for NDB threads</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091584430608"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-top" title="22.4.29 ndb_top — View CPU usage information for NDB threads"><span class="command"><strong>ndb_top</strong></span></a> displays running information in the
        terminal about CPU usage by NDB threads on an NDB Cluster data
        node. Each thread is represented by two rows in the output, the
        first showing system statistics, the second showing the measured
        statistics for the thread.
      </p><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-top" title="22.4.29 ndb_top — View CPU usage information for NDB threads"><span class="command"><strong>ndb_top</strong></span></a> is available beginning with MySQL NDB
        Cluster 7.6.3.
</p>
<h4><a name="idm140091584425792"></a>Usage</h4>
<pre data-lang="terminal" class="programlisting">
ndb_top [-h <em class="replaceable"><code>hostname</code></em>] [-t <em class="replaceable"><code>port</code></em>] [-u <em class="replaceable"><code>user</code></em>] [-p <em class="replaceable"><code>pass</code></em>] [-n <em class="replaceable"><code>node_id</code></em>]
</pre><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-top" title="22.4.29 ndb_top — View CPU usage information for NDB threads"><span class="command"><strong>ndb_top</strong></span></a> connects to a MySQL Server running as
        an SQL node of the cluster. By default, it attempts to connect
        to a <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> running on
        <code class="literal">localhost</code> and port 3306, as the MySQL
        <code class="literal">root</code> user with no password specified. You can
        override the default host and port using, respectively,
        <a class="link" href="mysql-cluster.html#option_ndb_top_host"><code class="option">--host</code></a> (<code class="option">-h</code>) and
        <a class="link" href="mysql-cluster.html#option_ndb_top_port"><code class="option">--port</code></a> (<code class="option">-t</code>). To
        specify a MySQL user and password, use the
        <a class="link" href="mysql-cluster.html#option_ndb_top_user"><code class="option">--user</code></a> (<code class="option">-u</code>) and
        <a class="link" href="mysql-cluster.html#option_ndb_top_passwd"><code class="option">--passwd</code></a> (<code class="option">-p</code>)
        options. This user must be able to read tables in the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo" title="22.5.10 ndbinfo: The NDB Cluster Information Database"><code class="literal">ndbinfo</code></a> database
        (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-top" title="22.4.29 ndb_top — View CPU usage information for NDB threads"><span class="command"><strong>ndb_top</strong></span></a> uses information from
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-cpustat" title="22.5.10.11 The ndbinfo cpustat Table"><code class="literal">ndbinfo.cpustat</code></a> and related
        tables).
      </p><p>
        For more information about MySQL user accounts and passwords,
        see <a class="xref" href="security.html#access-control" title="6.2 Access Control and Account Management">Section 6.2, “Access Control and Account Management”</a>.
      </p><p>
        Output is available as plain text or an ASCII graph; you can
        specify this using the <a class="link" href="mysql-cluster.html#option_ndb_top_text"><code class="option">--text</code></a>
        (<code class="option">-x</code>) and
        <a class="link" href="mysql-cluster.html#option_ndb_top_graph"><code class="option">--graph</code></a> (<code class="option">-g</code>)
        options, respectively. These two display modes provide the same
        information; they can be used concurrently. At least one display
        mode must be in use.
      </p><p>
        Color display of the graph is supported and enabled by default
        (<a class="link" href="mysql-cluster.html#option_ndb_top_color"><code class="option">--color</code></a> or <code class="option">-c</code>
        option). With color support enabled, the graph display shows OS
        user time in blue, OS system time in green, and idle time as
        blank. For measured load, blue is used for execution time,
        yellow for send time, red for time spent in send buffer full
        waits, and blank spaces for idle time. The percentage shown in
        the graph display is the sum of percentages for all threads
        which are not idle. Colors are not currently configurable; you
        can use grayscale instead by using
        <code class="option">--skip-color</code>.
      </p><p>
        The sorted view (<a class="link" href="mysql-cluster.html#option_ndb_top_sort"><code class="option">--sort</code></a>,
        <code class="option">-r</code>) is based on the maximum of the measured
        load and the load reported by the OS. Display of these can be
        enabled and disabled using the
        <a class="link" href="mysql-cluster.html#option_ndb_top_measured-load"><code class="option">--measured-load</code></a>
        (<code class="option">-m</code>) and
        <a class="link" href="mysql-cluster.html#option_ndb_top_os-load"><code class="option">--os-load</code></a> (<code class="option">-o</code>)
        options. Display of at least one of these loads must be enabled.
      </p><p>
        The program tries to obtain statistics from a data node having
        the node ID given by the
        <a class="link" href="mysql-cluster.html#option_ndb_top_node-id"><code class="option">--node-id</code></a> (<code class="option">-n</code>)
        option; if unspecified, this is 1. <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-top" title="22.4.29 ndb_top — View CPU usage information for NDB threads"><span class="command"><strong>ndb_top</strong></span></a>
        cannot provide information about other types of nodes.
      </p><p>
        The view adjusts itself to the height and width of the terminal
        window; the minimum supported width is 76 characters.
      </p><p>
        Once started, <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-top" title="22.4.29 ndb_top — View CPU usage information for NDB threads"><span class="command"><strong>ndb_top</strong></span></a> runs continuously until
        forced to exit; you can quit the program using
        <code class="literal">Ctrl-C</code>. The display updates once per second;
        to set a different delay interval, use
        <a class="link" href="mysql-cluster.html#option_ndb_top_sleep-time"><code class="option">--sleep-time</code></a>
        (<code class="option">-s</code>).
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-top" title="22.4.29 ndb_top — View CPU usage information for NDB threads"><span class="command"><strong>ndb_top</strong></span></a> is available on Mac OS X, Linux,
          and Solaris. It is not currently supported on Windows
          platforms.
</p>
</div>
<p>
        The following table includes all options that are specific to
        the NDB Cluster program <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-top" title="22.4.29 ndb_top — View CPU usage information for NDB threads"><span class="command"><strong>ndb_top</strong></span></a>. Additional
        descriptions follow the table.
</p>
<div class="table">
<a name="mysql-cluster-ndb_top-options-table"></a><p class="title"><b>Table 22.358 Command-line options for the ndb_top program</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_top_color">--color</a></code>,
              </p><p>
                <code class="literal"> <a class="link" href="mysql-cluster.html#option_ndb_top_color">-c</a>
                </code>
              </p></td>
            <td>Show ASCII graphs in color; use --skip-colors to disable</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_top_graph">--graph</a></code>,
              </p><p>
                <code class="literal"> <a class="link" href="mysql-cluster.html#option_ndb_top_graph">-g</a>
                </code>
              </p></td>
            <td>Display data using graphs; use --skip-graphs to disable</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_top_help">--help</a></code>,
              </p><p>
                <code class="literal"> <a class="link" href="mysql-cluster.html#option_ndb_top_help">-?</a>
                </code>
              </p></td>
            <td>Show program usage information</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_top_host">--host[=name]</a></code>,
              </p><p>
                <code class="literal"> <a class="link" href="mysql-cluster.html#option_ndb_top_host">-h</a>
                </code>
              </p></td>
            <td>Host name or IP address of MySQL Server to connect to</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_top_measured-load">--measured-load</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_top_measured-load">-m</a>
                </code>
              </p></td>
            <td>Show measured load by thread</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_top_node-id">--node-id[=#]</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_top_node-id">-n</a>
                </code>
              </p></td>
            <td>Watch node having this node ID</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_top_os-load">--os-load</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_top_os-load">-o</a>
                </code>
              </p></td>
            <td>Show load measured by operating system</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_top_passwd">--passwd[=password]</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_top_passwd">-p</a>
                </code>
              </p></td>
            <td>Connect using this password</td>
            <td><p>
                All NDB 8.0 releases
              </p><p>
                REMOVED: NDB 7.6.4
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_top_password">--password[=password]</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_top_password">-p</a>
                </code>
              </p></td>
            <td>Connect using this password</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_top_port">--port[=#]</a></code>,
              </p><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_top_port">-t</a></code>
                (&lt;=7.6.5),
              </p><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_top_port">-P</a></code>
                (&gt;=7.6.6)
              </p></td>
            <td>Port number to use when connecting to MySQL Server</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_top_sleep-time">--sleep-time[=seconds]</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_top_sleep-time">-s</a>
                </code>
              </p></td>
            <td>Time to wait between display refreshes, in seconds</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_top_socket">--socket</a></code>,
              </p><p>
                <code class="option"> <a class="link" href="mysql-cluster.html#option_ndb_top_socket">-S</a>
                </code>
              </p></td>
            <td>Socket file to use for connection.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_top_sort">--sort</a></code>,
              </p><p>
                <code class="literal"> <a class="link" href="mysql-cluster.html#option_ndb_top_sort">-r</a>
                </code>
              </p></td>
            <td>Sort threads by usage; use --skip-sort to disable</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_top_text">--text</a></code>,
              </p><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_top_text">-x</a></code>
                (&lt;=7.6.5),
              </p><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_top_text">-t</a></code>
                (&gt;=7.6.6)
              </p></td>
            <td>Display data using text</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_top_user">--user[=name]</a></code>,
              </p><p>
                <code class="literal"> <a class="link" href="mysql-cluster.html#option_ndb_top_user">-u</a>
                </code>
              </p></td>
            <td>Connect as this MySQL user</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        In NDB 7.6.6 and later, <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-top" title="22.4.29 ndb_top — View CPU usage information for NDB threads"><span class="command"><strong>ndb_top</strong></span></a> also supports
        the common <code class="literal">NDB</code> program options
        <a class="link" href="mysql-cluster.html#option_ndb_common_defaults-file"><code class="option">--defaults-file</code></a>,
        <a class="link" href="mysql-cluster.html#option_ndb_common_defaults-extra-file"><code class="option">--defaults-extra-file</code></a>,
        <a class="link" href="mysql-cluster.html#option_ndb_common_print-defaults"><code class="option">--print-defaults</code></a>,
        <a class="link" href="mysql-cluster.html#option_ndb_common_no-defaults"><code class="option">--no-defaults</code></a>, and
        <a class="link" href="mysql-cluster.html#option_ndb_common_defaults-group-suffix"><code class="option">--defaults-group-suffix</code></a>. (Bug
        #86614, Bug #26236298)
</p>
<h4><a name="mysql-cluster-programs-ndb-top-additional-options"></a>Additional Options</h4>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_top_color"></a>
            <a class="indexterm" name="idm140091584257200"></a>

            <a class="indexterm" name="idm140091584255744"></a>

            <code class="option">--color</code>, <code class="option">-c</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for color"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--color</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table>
</div>
<p>
            Show ASCII graphs in color; use
            <code class="option">--skip-colors</code> to disable.
          </p></li><li class="listitem"><p><a name="option_ndb_top_graph"></a>
            <a class="indexterm" name="idm140091584236608"></a>

            <a class="indexterm" name="idm140091584235152"></a>

            <code class="option">--graph</code>, <code class="option">-g</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for graph"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--graph</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table>
</div>
<p>
            Display data using graphs; use
            <code class="option">--skip-graphs</code> to disable. This option or
            <a class="link" href="mysql-cluster.html#option_ndb_top_text"><code class="option">--text</code></a> must be true; both
            options may be true.
          </p></li><li class="listitem"><p><a name="option_ndb_top_help"></a>
            <a class="indexterm" name="idm140091584214912"></a>

            <a class="indexterm" name="idm140091584213456"></a>

            <code class="option">--help</code>, <code class="option">-?</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for help"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--help</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table>
</div>
<p>
            Show program usage information.
          </p></li><li class="listitem"><p><a name="option_ndb_top_host"></a>
            <a class="indexterm" name="idm140091584194720"></a>

            <a class="indexterm" name="idm140091584193264"></a>

            <code class="option">--host[</code>=<em class="replaceable"><code>name]</code></em>,
            <code class="option">-h</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for host"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--host[=name]</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">localhost</code></td>
</tr></tbody></table>
</div>
<p>
            Host name or IP address of MySQL Server to connect to.
          </p></li><li class="listitem"><p><a name="option_ndb_top_measured-load"></a>
            <a class="indexterm" name="idm140091584174064"></a>

            <a class="indexterm" name="idm140091584172576"></a>

            <code class="option">--measured-load</code>, <code class="option">-m</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for measured-load"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--measured-load</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Show measured load by thread. This option or
            <a class="link" href="mysql-cluster.html#option_ndb_top_os-load"><code class="option">--os-load</code></a> must be true; both
            options may be true.
          </p></li><li class="listitem"><p><a name="option_ndb_top_node-id"></a>
            <a class="indexterm" name="idm140091584152912"></a>

            <a class="indexterm" name="idm140091584151456"></a>

            <code class="option">--node-id[</code>=<em class="replaceable"><code>#]</code></em>,
            <code class="option">-n</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for node-id"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--node-id[=#]</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr></tbody></table>
</div>
<p>
            Watch the data node having this node ID.
          </p></li><li class="listitem"><p><a name="option_ndb_top_os-load"></a>
            <a class="indexterm" name="idm140091584132272"></a>

            <a class="indexterm" name="idm140091584130816"></a>

            <code class="option">--os-load</code>, <code class="option">-o</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for os-load"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--os-load</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table>
</div>
<p>
            Show load measured by operating system. This option or
            <a class="link" href="mysql-cluster.html#option_ndb_top_measured-load"><code class="option">--measured-load</code></a> must be
            true; both options may be true.
          </p></li><li class="listitem"><p><a name="option_ndb_top_passwd"></a>
            <a class="indexterm" name="idm140091584110960"></a>

            <a class="indexterm" name="idm140091584109504"></a>

            <code class="option">--passwd[</code>=<em class="replaceable"><code>password]</code></em>,
            <code class="option">-p</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for passwd"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--passwd[=password]</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">NULL</code></td>
</tr></tbody></table>
</div>
<p>
            Connect using this password.
          </p><p>
            This option is deprecated in NDB 7.6.4. It is removed in NDB
            7.6.6, where it is replaced by the
            <a class="link" href="mysql-cluster.html#option_ndb_top_password"><code class="option">--password</code></a> option. (Bug
            #26907833)
          </p></li><li class="listitem"><p><a name="option_ndb_top_password"></a>
            <a class="indexterm" name="idm140091584088848"></a>

            <a class="indexterm" name="idm140091584087392"></a>

            <code class="option">--password[</code>=<em class="replaceable"><code>password]</code></em>,
            <code class="option">-p</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for password"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--password[=password]</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">NULL</code></td>
</tr></tbody></table>
</div>
<p>
            Connect using this password.
          </p><p>
            This option was added in NDB 7.6.6 as a replacement for the
            <a class="link" href="mysql-cluster.html#option_ndb_top_passwd"><code class="option">--passwd</code></a> option used
            previously. (Bug #26907833)
          </p></li><li class="listitem"><p><a name="option_ndb_top_port"></a>
            <a class="indexterm" name="idm140091584066720"></a>

            <a class="indexterm" name="idm140091584065264"></a>

            <code class="option">--port[</code>=<em class="replaceable"><code>#]</code></em>,
            <code class="option">-t</code> (NDB 7.6.6 and later:
            <code class="option">-P</code>)
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for port"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--port[=#]</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">3306</code></td>
</tr></tbody></table>
</div>
<p>
            Port number to use when connecting to MySQL Server.
          </p><p>
            Beginning with NDB 7.6.6, the short form for this option is
            <code class="option">-P</code>, and <code class="option">-t</code> is repurposed
            as the short form for the
            <a class="link" href="mysql-cluster.html#option_ndb_top_text"><code class="option">--text</code></a> option. (Bug
            #26907833)
          </p></li><li class="listitem"><p><a name="option_ndb_top_sleep-time"></a>
            <a class="indexterm" name="idm140091584043280"></a>

            <a class="indexterm" name="idm140091584041792"></a>

            <code class="option">--sleep-time[</code>=<em class="replaceable"><code>seconds]</code></em>,
            <code class="option">-s</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for sleep-time"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--sleep-time[=seconds]</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Integer</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr></tbody></table>
</div>
<p>
            Time to wait between display refreshes, in seconds.
          </p></li><li class="listitem"><p><a name="option_ndb_top_socket"></a>
            <a class="indexterm" name="idm140091584022640"></a>

            <a class="indexterm" name="idm140091584021184"></a>

            <code class="option">--socket=<em class="replaceable"><code>path/to/file</code></em></code>,
            <em class="replaceable"><code>-S</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for socket"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--socket</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Path name</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">[none]</code></td>
</tr></tbody></table>
</div>
<p>
            Use the specified socket file for the connection.
          </p><p>
            Added in NDB 7.6.6. (Bug #86614, Bug #26236298)
          </p></li><li class="listitem"><p><a name="option_ndb_top_sort"></a>
            <a class="indexterm" name="idm140091584001696"></a>

            <a class="indexterm" name="idm140091584000240"></a>

            <code class="option">--sort</code>, <code class="option">-r</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for sort"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--sort</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table>
</div>
<p>
            Sort threads by usage; use <code class="option">--skip-sort</code> to
            disable.
          </p></li><li class="listitem"><p><a name="option_ndb_top_text"></a>
            <a class="indexterm" name="idm140091583981104"></a>

            <a class="indexterm" name="idm140091583979648"></a>

            <code class="option">--text</code>, <code class="option">-x</code> (NDB 7.6.6 and
            later: <code class="option">-t</code>)
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for text"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--text</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Display data using text. This option or
            <a class="link" href="mysql-cluster.html#option_ndb_top_graph"><code class="option">--graph</code></a> must be true; both
            options may be true.
          </p><p>
            Beginning with NDB 7.6.6, the short form for this option is
            <code class="option">-t</code> and support for <code class="option">-x</code> is
            removed. (Bug #26907833)
          </p></li><li class="listitem"><p><a name="option_ndb_top_user"></a>
            <a class="indexterm" name="idm140091583958080"></a>

            <a class="indexterm" name="idm140091583956624"></a>

            <code class="option">--user[</code>=<em class="replaceable"><code>name]</code></em>,
            <code class="option">-u</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for user"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--user[=name]</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">root</code></td>
</tr></tbody></table>
</div>
<p>
            Connect as this MySQL user.
</p></li></ul>
</div>
<p><b>Sample Output. </b>
          The next figure shows <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-top" title="22.4.29 ndb_top — View CPU usage information for NDB threads"><span class="command"><strong>ndb_top</strong></span></a> running in a
          terminal window on a Linux system with an
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> data node under a moderate load.
          Here, the program has been invoked using
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-top" title="22.4.29 ndb_top — View CPU usage information for NDB threads"><span class="command"><strong>ndb_top</strong></span></a>
          <a class="link" href="mysql-cluster.html#option_ndb_top_node-id"><code class="option">-n8</code></a>
          <a class="link" href="mysql-cluster.html#option_ndb_top_text"><code class="option">-x</code></a> to provide
          both text and graph output:
</p>
<div class="figure">
<a name="ndb_top-running-terminal"></a><p class="title"><b>Figure 22.25 ndb_top Running in Terminal</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/ndb-top-1.png" width="800" height="675" alt="Display from ndb_top, running in a terminal window. Shows information for each node, including the utilized resources.">
</div>

</div>

</div>
<br class="figure-break">
</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-programs-ndb-waiter"></a>22.4.30 <span class="command"><strong>ndb_waiter</strong></span> — Wait for NDB Cluster to Reach a Given Status</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091583922704"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-waiter" title="22.4.30 ndb_waiter — Wait for NDB Cluster to Reach a Given Status"><span class="command"><strong>ndb_waiter</strong></span></a> repeatedly (each 100 milliseconds)
        prints out the status of all cluster data nodes until either the
        cluster reaches a given status or the
        <a class="link" href="mysql-cluster.html#option_ndb_waiter_timeout"><code class="option">--timeout</code></a> limit is exceeded,
        then exits. By default, it waits for the cluster to achieve
        <code class="literal">STARTED</code> status, in which all nodes have
        started and connected to the cluster. This can be overridden
        using the <a class="link" href="mysql-cluster.html#option_ndb_waiter_no-contact"><code class="option">--no-contact</code></a> and
        <a class="link" href="mysql-cluster.html#option_ndb_waiter_not-started"><code class="option">--not-started</code></a> options.
      </p><p>
        The node states reported by this utility are as follows:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">NO_CONTACT</code>: The node cannot be contacted.
          </p></li><li class="listitem"><p>
            <code class="literal">UNKNOWN</code>: The node can be contacted, but
            its status is not yet known. Usually, this means that the
            node has received a
            <a class="link" href="mysql-cluster.html#ndbclient-start"><code class="literal">START</code></a> or
            <a class="link" href="mysql-cluster.html#ndbclient-restart"><code class="literal">RESTART</code></a> command from the
            management server, but has not yet acted on it.
          </p></li><li class="listitem"><p>
            <code class="literal">NOT_STARTED</code>: The node has stopped, but
            remains in contact with the cluster. This is seen when
            restarting the node using the management client's
            <code class="literal">RESTART</code> command.
          </p></li><li class="listitem"><p>
            <code class="literal">STARTING</code>: The node's
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> process has started, but the node
            has not yet joined the cluster.
          </p></li><li class="listitem"><p>
            <code class="literal">STARTED</code>: The node is operational, and has
            joined the cluster.
          </p></li><li class="listitem"><p>
            <code class="literal">SHUTTING_DOWN</code>: The node is shutting down.
          </p></li><li class="listitem"><p>
            <code class="literal">SINGLE USER MODE</code>: This is shown for all
            cluster data nodes when the cluster is in single user mode.
</p></li></ul>
</div>
<p>
        The following table includes options that are specific to the
        NDB Cluster native backup restoration program
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-waiter" title="22.4.30 ndb_waiter — Wait for NDB Cluster to Reach a Given Status"><span class="command"><strong>ndb_waiter</strong></span></a>. Additional descriptions follow
        the table. For options common to most NDB Cluster programs
        (including <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-waiter" title="22.4.30 ndb_waiter — Wait for NDB Cluster to Reach a Given Status"><span class="command"><strong>ndb_waiter</strong></span></a>), see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs">Section 22.4.31, “Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs”</a>.
</p>
<div class="table">
<a name="mysql-cluster-ndb_waiter-options-table"></a><p class="title"><b>Table 22.359 Command-line options for the ndb_waiter program</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_waiter_no-contact">--no-contact</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_waiter_no-contact">-n</a>
                </code>
              </p></td>
            <td>Wait for cluster to reach NO CONTACT state</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_waiter_not-started">--not-started</a>
                </code>
              </p></td>
            <td>Wait for cluster to reach NOT STARTED state</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_waiter_single-user">--single-user</a>
                </code>
              </p></td>
            <td>Wait for cluster to enter single user mode</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_waiter_timeout">--timeout=#</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_waiter_timeout">-t</a>
                </code>
              </p></td>
            <td>Wait this many seconds, then exit whether or not cluster has reached
              desired state; default is 2 minutes (120 seconds)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_waiter_nowait-nodes">--nowait-nodes=list</a>
                </code>
              </p></td>
            <td>List of nodes not to be waited for.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_waiter_wait-nodes">--wait-nodes=list</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_waiter_wait-nodes">-w</a>
                </code>
              </p></td>
            <td>List of nodes to be waited for.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<h4><a name="idm140091583849344"></a>Usage</h4>
<pre data-lang="terminal" class="programlisting">
ndb_waiter [-c <em class="replaceable"><code>connection_string</code></em>]
</pre>
<h4><a name="mysql-cluster-programs-ndb-waiter-additional-options"></a>Additional Options</h4>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_waiter_no-contact"></a>
            <a class="indexterm" name="idm140091583844896"></a>

            <a class="indexterm" name="idm140091583843408"></a>

            <code class="option">--no-contact</code>, <code class="option">-n</code>
          </p><p>
            Instead of waiting for the <code class="literal">STARTED</code> state,
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-waiter" title="22.4.30 ndb_waiter — Wait for NDB Cluster to Reach a Given Status"><span class="command"><strong>ndb_waiter</strong></span></a> continues running until the
            cluster reaches <code class="literal">NO_CONTACT</code> status before
            exiting.
          </p></li><li class="listitem"><p><a name="option_ndb_waiter_not-started"></a>
            <a class="indexterm" name="idm140091583836720"></a>

            <a class="indexterm" name="idm140091583835232"></a>

            <code class="option">--not-started</code>
          </p><p>
            Instead of waiting for the <code class="literal">STARTED</code> state,
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-waiter" title="22.4.30 ndb_waiter — Wait for NDB Cluster to Reach a Given Status"><span class="command"><strong>ndb_waiter</strong></span></a> continues running until the
            cluster reaches <code class="literal">NOT_STARTED</code> status before
            exiting.
          </p></li><li class="listitem"><p><a name="option_ndb_waiter_timeout"></a>
            <a class="indexterm" name="idm140091583828864"></a>

            <a class="indexterm" name="idm140091583827376"></a>

            <code class="option">--timeout=<em class="replaceable"><code>seconds</code></em></code>,
            <code class="option">-t <em class="replaceable"><code>seconds</code></em></code>
          </p><p>
            Time to wait. The program exits if the desired state is not
            achieved within this number of seconds. The default is 120
            seconds (1200 reporting cycles).
          </p></li><li class="listitem"><p><a name="option_ndb_waiter_single-user"></a>
            <a class="indexterm" name="idm140091583822720"></a>

            <a class="indexterm" name="idm140091583821232"></a>

            <code class="option">--single-user</code>
          </p><p>
            The program waits for the cluster to enter single user mode.
          </p></li><li class="listitem"><p><a name="option_ndb_waiter_nowait-nodes"></a>
            <a class="indexterm" name="idm140091583817680"></a>

            <a class="indexterm" name="idm140091583816192"></a>

            <code class="option">--nowait-nodes=<em class="replaceable"><code>list</code></em></code>
          </p><p>
            When this option is used, ndb_waiter does not wait for the
            nodes whose IDs are listed. The list is comma-delimited;
            ranges can be indicated by dashes, as shown here:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_waiter --nowait-nodes=1,3,7-9</code></strong>
</pre>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              Do <span class="emphasis"><em>not</em></span> use this option together with
              the <a class="link" href="mysql-cluster.html#option_ndb_waiter_wait-nodes"><code class="option">--wait-nodes</code></a>
              option.
</p>
</div>
</li><li class="listitem"><p><a name="option_ndb_waiter_wait-nodes"></a>
            <a class="indexterm" name="idm140091583808304"></a>

            <a class="indexterm" name="idm140091583806816"></a>

            <code class="option">--wait-nodes=<em class="replaceable"><code>list</code></em></code>,
            <code class="option">-w <em class="replaceable"><code>list</code></em></code>
          </p><p>
            When this option is used, <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-waiter" title="22.4.30 ndb_waiter — Wait for NDB Cluster to Reach a Given Status"><span class="command"><strong>ndb_waiter</strong></span></a>
            waits only for the nodes whose IDs are listed. The list is
            comma-delimited; ranges can be indicated by dashes, as shown
            here:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_waiter --wait-nodes=2,4-6,10</code></strong>
</pre>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              Do <span class="emphasis"><em>not</em></span> use this option together with
              the <a class="link" href="mysql-cluster.html#option_ndb_waiter_nowait-nodes"><code class="option">--nowait-nodes</code></a>
              option.
</p>
</div>
</li></ul>
</div>
<p><b>Sample Output. </b>
          Shown here is the output from <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-waiter" title="22.4.30 ndb_waiter — Wait for NDB Cluster to Reach a Given Status"><span class="command"><strong>ndb_waiter</strong></span></a>
          when run against a 4-node cluster in which two nodes have been
          shut down and then started again manually. Duplicate reports
          (indicated by <code class="literal">...</code>) are omitted.
        </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>./ndb_waiter -c localhost</code></strong>

Connecting to mgmsrv at (localhost)
State node 1 STARTED
State node 2 NO_CONTACT
State node 3 STARTED
State node 4 NO_CONTACT
Waiting for cluster enter state STARTED

...

State node 1 STARTED
State node 2 UNKNOWN
State node 3 STARTED
State node 4 NO_CONTACT
Waiting for cluster enter state STARTED

...

State node 1 STARTED
State node 2 STARTING
State node 3 STARTED
State node 4 NO_CONTACT
Waiting for cluster enter state STARTED

...

State node 1 STARTED
State node 2 STARTING
State node 3 STARTED
State node 4 UNKNOWN
Waiting for cluster enter state STARTED

...

State node 1 STARTED
State node 2 STARTING
State node 3 STARTED
State node 4 STARTING
Waiting for cluster enter state STARTED

...

State node 1 STARTED
State node 2 STARTED
State node 3 STARTED
State node 4 STARTING
Waiting for cluster enter state STARTED

...

State node 1 STARTED
State node 2 STARTED
State node 3 STARTED
State node 4 STARTED
Waiting for cluster enter state STARTED

NDBT_ProgramExit: 0 - OK
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          If no connection string is specified, then
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-waiter" title="22.4.30 ndb_waiter — Wait for NDB Cluster to Reach a Given Status"><span class="command"><strong>ndb_waiter</strong></span></a> tries to connect to a management
          on <code class="literal">localhost</code>, and reports
          <code class="literal">Connecting to mgmsrv at (null)</code>.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-program-options-common"></a>22.4.31 Options Common to NDB Cluster Programs — Options Common to NDB Cluster Programs</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091583785856"></a><a class="indexterm" name="idm140091583784496"></a><a class="indexterm" name="idm140091583783584"></a><a class="indexterm" name="idm140091583782624"></a><a class="indexterm" name="idm140091583781264"></a><a class="indexterm" name="idm140091583779936"></a><p>
        All NDB Cluster programs accept the options described in this
        section, with the following exceptions:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-backup-file" title="22.4.17 ndb_print_backup_file — Print NDB Backup File Contents"><span class="command"><strong>ndb_print_backup_file</strong></span></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-schema-file" title="22.4.20 ndb_print_schema_file — Print NDB Schema File Contents"><span class="command"><strong>ndb_print_schema_file</strong></span></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-sys-file" title="22.4.21 ndb_print_sys_file — Print NDB System File Contents"><span class="command"><strong>ndb_print_sys_file</strong></span></a>
</p></li></ul>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Note
</div>
<p>
          Users of earlier NDB Cluster versions should note that some of
          these options have been changed to make them consistent with
          one another, and also with <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>. You can
          use the <code class="option">--help</code> option with any NDB Cluster
          program—with the exception of
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-backup-file" title="22.4.17 ndb_print_backup_file — Print NDB Backup File Contents"><span class="command"><strong>ndb_print_backup_file</strong></span></a>,
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-schema-file" title="22.4.20 ndb_print_schema_file — Print NDB Schema File Contents"><span class="command"><strong>ndb_print_schema_file</strong></span></a>, and
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-print-sys-file" title="22.4.21 ndb_print_sys_file — Print NDB System File Contents"><span class="command"><strong>ndb_print_sys_file</strong></span></a>—to view a list of
          the options which the program supports.
</p>
</div>
<p>
        The options in the following table are common to all NDB Cluster
        executables (except those noted previously in this section).
</p>
<div class="table">
<a name="mysql-cluster-ndb_common-options-table"></a><p class="title"><b>Table 22.360 Command-line options common to all MySQL NDB Cluster programs</b></p>
<div class="table-contents">
<table><col width="33%"><col width="34%"><col width="33%"><thead><tr>
            <th scope="col">Format</th>
            <th scope="col">Description</th>
            <th scope="col">Added, Deprecated, or Removed</th>
          </tr></thead><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_common_character-sets-dir">--character-sets-dir=dir_name</a>
                </code>
              </p></td>
            <td>Directory where character sets are installed</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_common_connect-retries">--connect-retries=#</a>
                </code>
              </p></td>
            <td>Set the number of times to retry a connection before giving up</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_common_connect-retry-delay">--connect-retry-delay=#</a>
                </code>
              </p></td>
            <td>Time to wait between attempts to contact a management server, in seconds</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_common_core-file">--core-file</a>
                </code>
              </p></td>
            <td>Write core on errors (defaults to TRUE in debug builds)</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_common_debug">--debug=options</a>
                </code>
              </p></td>
            <td>Enable output from debug calls. Can be used only for versions compiled
              with debugging enabled</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_common_defaults-extra-file">--defaults-extra-file=filename</a>
                </code>
              </p></td>
            <td>Read this file after global option files are read</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_common_defaults-file">--defaults-file=filename</a>
                </code>
              </p></td>
            <td>Read default options from this file</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_common_defaults-group-suffix">--defaults-group-suffix</a>
                </code>
              </p></td>
            <td>Also read groups with names ending in this suffix</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_common_help">--help</a></code>,
              </p><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_common_help">--usage</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_common_help">-?</a>
                </code>
              </p></td>
            <td>Display help message and exit</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_common_login-path">--login-path=path</a>
                </code>
              </p></td>
            <td>Read this path from the login file</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_common_ndb-connectstring">--ndb-connectstring=connectstring</a></code>,
              </p><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_common_ndb-connectstring">--connect-string=connectstring</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_common_ndb-connectstring">-c</a>
                </code>
              </p></td>
            <td>Set connection string for connecting to ndb_mgmd. Syntax:
              [nodeid=&lt;id&gt;;][host=]&lt;hostname&gt;[:&lt;port&gt;].
              Overrides entries specified in NDB_CONNECTSTRING or
              my.cnf.</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_common_ndb-mgmd-host">--ndb-mgmd-host=host[:port]</a>
                </code>
              </p></td>
            <td>Set the host (and port, if desired) for connecting to management server</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_common_ndb-nodeid">--ndb-nodeid=#</a>
                </code>
              </p></td>
            <td>Set node id for this node</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_common_ndb-optimized-node-selection">--ndb-optimized-node-selection</a>
                </code>
              </p></td>
            <td>Select nodes for transactions in a more optimal way</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_common_no-defaults">--no-defaults</a>
                </code>
              </p></td>
            <td>Do not read default options from any option file other than login file</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_common_print-defaults">--print-defaults</a>
                </code>
              </p></td>
            <td>Print the program argument list and exit</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
          </tr></tbody><tbody><tr>
            <td scope="row"><p>
                <code class="literal"><a class="link" href="mysql-cluster.html#option_ndb_common_version">--version</a></code>,
              </p><p>
                <code class="literal">
                <a class="link" href="mysql-cluster.html#option_ndb_common_version">-V</a>
                </code>
              </p></td>
            <td>Output version information and exit</td>
            <td><p>
                All NDB 8.0 releases
              </p></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        For options specific to individual NDB Cluster programs, see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-programs" title="22.4 NDB Cluster Programs">Section 22.4, “NDB Cluster Programs”</a>.
      </p><p>
        See <a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-mysqld" title="22.3.3.9.1 MySQL Server Options for NDB Cluster">Section 22.3.3.9.1, “MySQL Server Options for NDB Cluster”</a>, for
        <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> options relating to NDB Cluster.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_common_character-sets-dir"></a>
            <a class="indexterm" name="idm140091583647440"></a>

            <a class="indexterm" name="idm140091583646336"></a>

            <code class="option">--character-sets-dir=<em class="replaceable"><code>name</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for character-sets-dir"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--character-sets-dir=dir_name</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Directory name</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal"></code></td>
</tr></tbody></table>
</div>
<p>
            Tells the program where to find character set information.
          </p></li><li class="listitem"><p><a name="option_ndb_common_connect-retries"></a>
            <a class="indexterm" name="idm140091583628176"></a>

            <code class="option">--connect-retries=<em class="replaceable"><code>#</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for connect-retries"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--connect-retries=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Numeric</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">12</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            This option specifies the number of times following the
            first attempt to retry a connection before giving up (the
            client always tries the connection at least once). The
            length of time to wait per attempt is set using
            <a class="link" href="mysql-cluster.html#option_ndb_common_connect-retry-delay"><code class="option">--connect-retry-delay</code></a>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              When used with <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a>, this option has
              3 as its default. See
              <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client">Section 22.4.5, “<span class="command"><strong>ndb_mgm</strong></span> — The NDB Cluster Management Client”</a>, for more
              information.
</p>
</div>
</li><li class="listitem"><p><a name="option_ndb_common_connect-retry-delay"></a>
            <a class="indexterm" name="idm140091583599744"></a>

            <code class="option">--connect-retry-delay=<em class="replaceable"><code>#</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for connect-retry-delay"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--connect-retry-delay=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Numeric</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">5</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table>
</div>
<p>
            This option specifies the length of time to wait per attempt
            a connection before giving up. The number of times to try
            connecting is set by
            <a class="link" href="mysql-cluster.html#option_ndb_common_connect-retries"><code class="option">--connect-retries</code></a>.
          </p></li><li class="listitem"><p><a name="option_ndb_common_core-file"></a>
            <a class="indexterm" name="idm140091583571264"></a>

            <code class="option">--core-file</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for core-file"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--core-file</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table>
</div>
<p>
            Write a core file if the program dies. The name and location
            of the core file are system-dependent. (For NDB Cluster
            programs nodes running on Linux, the default location is the
            program's working directory—for a data node, this
            is the node's
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datadir"><code class="literal">DataDir</code></a>.) For some
            systems, there may be restrictions or limitations. For
            example, it might be necessary to execute <span class="command"><strong>ulimit -c
            unlimited</strong></span> before starting the server. Consult your
            system documentation for detailed information.
          </p><p>
            If NDB Cluster was built using the <code class="option">--debug</code>
            option for <span class="command"><strong>configure</strong></span>, then
            <code class="option">--core-file</code> is enabled by default. For
            regular builds, <code class="option">--core-file</code> is disabled by
            default.
          </p></li><li class="listitem"><p><a name="option_ndb_common_debug"></a>
            <a class="indexterm" name="idm140091583548032"></a>

            <code class="option">--debug[=<em class="replaceable"><code>options</code></em>]</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for debug"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--debug=options</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">d:t:O,/tmp/ndb_restore.trace</code></td>
</tr></tbody></table>
</div>
<p>
            This option can be used only for versions compiled with
            debugging enabled. It is used to enable output from debug
            calls in the same manner as for the
            <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> process.
          </p></li><li class="listitem"><p><a name="option_ndb_common_defaults-extra-file"></a>
            <a class="indexterm" name="idm140091583528256"></a>

            <a class="indexterm" name="idm140091583526800"></a>

            <code class="option">--defaults-extra-file</code>=<em class="replaceable"><code>filename</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for defaults-extra-file"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--defaults-extra-file=filename</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">[none]</code></td>
</tr></tbody></table>
</div>
<p>
            Read this file after global option files are read.
          </p><p>
            For additional information about this and other option-file
            options, see <a class="xref" href="programs.html#option-file-options" title="4.2.2.3 Command-Line Options that Affect Option-File Handling">Section 4.2.2.3, “Command-Line Options that Affect Option-File Handling”</a>.
          </p></li><li class="listitem"><p><a name="option_ndb_common_defaults-file"></a>
            <a class="indexterm" name="idm140091583506800"></a>

            <a class="indexterm" name="idm140091583505312"></a>

            <code class="option">--defaults-file</code>=<em class="replaceable"><code>filename</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for defaults-file"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--defaults-file=filename</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">[none]</code></td>
</tr></tbody></table>
</div>
<p>
            Read default options from this file.
          </p><p>
            For additional information about this and other option-file
            options, see <a class="xref" href="programs.html#option-file-options" title="4.2.2.3 Command-Line Options that Affect Option-File Handling">Section 4.2.2.3, “Command-Line Options that Affect Option-File Handling”</a>.
          </p></li><li class="listitem"><p><a name="option_ndb_common_defaults-group-suffix"></a>
            <a class="indexterm" name="idm140091583485328"></a>

            <a class="indexterm" name="idm140091583483872"></a>

            <code class="option">--defaults-group-suffix</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for defaults-group-suffix"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--defaults-group-suffix</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">[none]</code></td>
</tr></tbody></table>
</div>
<p>
            Also read groups with names ending in this suffix.
          </p><p>
            For additional information about this and other option-file
            options, see <a class="xref" href="programs.html#option-file-options" title="4.2.2.3 Command-Line Options that Affect Option-File Handling">Section 4.2.2.3, “Command-Line Options that Affect Option-File Handling”</a>.
          </p></li><li class="listitem"><p><a name="option_ndb_common_help"></a>
            <a class="indexterm" name="idm140091583464352"></a>

            <a class="indexterm" name="idm140091583463296"></a>

            <a class="indexterm" name="idm140091583462208"></a>

            <code class="option">--help</code>, <code class="option">--usage</code>,
            <code class="option">-?</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for help"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><p class="valid-value"><code class="literal">--help</code></p><p class="valid-value"><code class="literal">--usage</code></p></td>
</tr></tbody></table>
</div>
<p>
            Prints a short list with descriptions of the available
            command options.
          </p></li><li class="listitem"><p><a name="option_ndb_common_login-path"></a>
            <a class="indexterm" name="idm140091583447792"></a>

            <a class="indexterm" name="idm140091583446304"></a>

            <code class="option">--login-path</code>=<em class="replaceable"><code>path</code></em>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for login-path"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--login-path=path</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">[none]</code></td>
</tr></tbody></table>
</div>
<p>
            Read this path from the login file.
          </p><p>
            For additional information about this and other option-file
            options, see <a class="xref" href="programs.html#option-file-options" title="4.2.2.3 Command-Line Options that Affect Option-File Handling">Section 4.2.2.3, “Command-Line Options that Affect Option-File Handling”</a>.
          </p></li><li class="listitem"><p><a name="option_ndb_common_ndb-connectstring"></a>
            <a class="indexterm" name="idm140091583426400"></a>

            <a class="indexterm" name="idm140091583425296"></a>

            <a class="indexterm" name="idm140091583424192"></a>

            <code class="option">--ndb-connectstring=<em class="replaceable"><code>connection_string</code></em></code>,
            <code class="option">--connect-string=<em class="replaceable"><code>connection_string</code></em></code>,
            <code class="option">-c
            <em class="replaceable"><code>connection_string</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for ndb-connectstring"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><p class="valid-value"><code class="literal">--ndb-connectstring=connectstring</code></p><p class="valid-value"><code class="literal">--connect-string=connectstring</code></p></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">localhost:1186</code></td>
</tr></tbody></table>
</div>
<p>
            This option takes an NDB Cluster connection string that
            specifies the management server for the application to
            connect to, as shown here:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndbd --ndb-connectstring="nodeid=2;host=ndb_mgmd.mysql.com:1186"</code></strong>
</pre><p>
            For more information, see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-connection-strings" title="22.3.3.3 NDB Cluster Connection Strings">Section 22.3.3.3, “NDB Cluster Connection Strings”</a>.
          </p></li><li class="listitem"><p><a name="option_ndb_common_ndb-mgmd-host"></a>
            <a class="indexterm" name="idm140091583400144"></a>

            <code class="option">--ndb-mgmd-host=<em class="replaceable"><code>host</code></em>[:<em class="replaceable"><code>port</code></em>]</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for ndb-mgmd-host"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--ndb-mgmd-host=host[:port]</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>String</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">localhost:1186</code></td>
</tr></tbody></table>
</div>
<p>
            Can be used to set the host and port number of a single
            management server for the program to connect to. If the
            program requires node IDs or references to multiple
            management servers (or both) in its connection information,
            use the
            <a class="link" href="mysql-cluster.html#option_ndb_common_ndb-connectstring"><code class="option">--ndb-connectstring</code></a>
            option instead.
          </p></li><li class="listitem"><p><a name="option_ndb_common_ndb-nodeid"></a>
            <a class="indexterm" name="idm140091583380048"></a>

            <code class="option">--ndb-nodeid=<em class="replaceable"><code>#</code></em></code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for ndb-nodeid"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--ndb-nodeid=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Numeric</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">0</code></td>
</tr></tbody></table>
</div>
<p>
            Sets this node's NDB Cluster node ID. <span class="emphasis"><em>The
            range of permitted values depends on the node's type
            (data, management, or API) and the NDB Cluster software
            version</em></span>. See
            <a class="xref" href="mysql-cluster.html#mysql-cluster-limitations-limits" title="22.1.7.2 Limits and Differences of NDB Cluster from Standard MySQL Limits">Section 22.1.7.2, “Limits and Differences of NDB Cluster from Standard MySQL Limits”</a>, for more
            information.
          </p></li><li class="listitem"><p><a name="option_ndb_common_no-defaults"></a>
            <a class="indexterm" name="idm140091583360512"></a>

            <a class="indexterm" name="idm140091583359024"></a>

            <code class="option">--no-defaults</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for no-defaults"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--no-defaults</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table>
</div>
<p>
            Do not read default options from any option file other than
            login file.
          </p><p>
            For additional information about this and other option-file
            options, see <a class="xref" href="programs.html#option-file-options" title="4.2.2.3 Command-Line Options that Affect Option-File Handling">Section 4.2.2.3, “Command-Line Options that Affect Option-File Handling”</a>.
          </p></li><li class="listitem"><p><a name="option_ndb_common_ndb-optimized-node-selection"></a>
            <a class="indexterm" name="idm140091583339376"></a>

            <code class="option">--ndb-optimized-node-selection</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for ndb-optimized-node-selection"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--ndb-optimized-node-selection</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table>
</div>
<p>
            Optimize selection of nodes for transactions. Enabled by
            default.
          </p></li><li class="listitem"><p><a name="option_ndb_common_print-defaults"></a>
            <a class="indexterm" name="idm140091583321312"></a>

            <a class="indexterm" name="idm140091583319824"></a>

            <code class="option">--print-defaults</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for print-defaults"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--print-defaults</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table>
</div>
<p>
            Print the program argument list and exit.
          </p><p>
            For additional information about this and other option-file
            options, see <a class="xref" href="programs.html#option-file-options" title="4.2.2.3 Command-Line Options that Affect Option-File Handling">Section 4.2.2.3, “Command-Line Options that Affect Option-File Handling”</a>.
          </p></li><li class="listitem"><p><a name="option_ndb_common_version"></a>
            <a class="indexterm" name="idm140091583300272"></a>

            <a class="indexterm" name="idm140091583299232"></a>

            <code class="option">--version</code>, <code class="option">-V</code>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for version"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--version</code></td>
</tr></tbody></table>
</div>
<p>
            Prints the NDB Cluster version number of the executable. The
            version number is relevant because not all versions can be
            used together, and the NDB Cluster startup process verifies
            that the versions of the binaries being used can co-exist in
            the same cluster. This is also important when performing an
            online (rolling) software upgrade or downgrade of NDB
            Cluster.
          </p><p>
            See <a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="22.5.5 Performing a Rolling Restart of an NDB Cluster">Section 22.5.5, “Performing a Rolling Restart of an NDB Cluster”</a>), for
            more information.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="mysql-cluster-management"></a>22.5 Management of NDB Cluster</h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-start-phases">22.5.1 Summary of NDB Cluster Start Phases</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-mgm-client-commands">22.5.2 Commands in the NDB Cluster Management Client</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-backup">22.5.3 Online Backup of NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-mysqld">22.5.4 MySQL Server Usage for NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-rolling-restart">22.5.5 Performing a Rolling Restart of an NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-event-reports">22.5.6 Event Reports Generated in NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-logs-ndb-messages">22.5.7 NDB Cluster Log Messages</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-single-user-mode">22.5.8 NDB Cluster Single User Mode</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-sql-statements">22.5.9 Quick Reference: NDB Cluster SQL Statements</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo">22.5.10 ndbinfo: The NDB Cluster Information Database</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-i_s-tables">22.5.11 INFORMATION_SCHEMA Tables for NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-security">22.5.12 NDB Cluster Security Issues</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-disk-data">22.5.13 NDB Cluster Disk Data Tables</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-online-operations">22.5.14 Online Operations with ALTER TABLE in NDB Cluster</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-online-add-node">22.5.15 Adding NDB Cluster Data Nodes Online</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-privilege-distribution">22.5.16 Distributed MySQL Privileges (Not Supported)</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndb-api-statistics">22.5.17 NDB API Statistics Counters and Variables</a></span></dt></dl>
</div>
<a class="indexterm" name="idm140091583284544"></a><a class="indexterm" name="idm140091583283056"></a><p>
    Managing an NDB Cluster involves a number of tasks, the first of
    which is to configure and start NDB Cluster. This is covered in
    <a class="xref" href="mysql-cluster.html#mysql-cluster-configuration" title="22.3 Configuration of NDB Cluster">Section 22.3, “Configuration of NDB Cluster”</a>, and
    <a class="xref" href="mysql-cluster.html#mysql-cluster-programs" title="22.4 NDB Cluster Programs">Section 22.4, “NDB Cluster Programs”</a>.
  </p><p>
    The next few sections cover the management of a running NDB Cluster.
  </p><p>
    For information about security issues relating to management and
    deployment of an NDB Cluster, see
    <a class="xref" href="mysql-cluster.html#mysql-cluster-security" title="22.5.12 NDB Cluster Security Issues">Section 22.5.12, “NDB Cluster Security Issues”</a>.
  </p><p>
    There are essentially two methods of actively managing a running NDB
    Cluster. The first of these is through the use of commands entered
    into the management client whereby cluster status can be checked,
    log levels changed, backups started and stopped, and nodes stopped
    and started. The second method involves studying the contents of the
    cluster log
    <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_cluster.log</code>;
    this is usually found in the management server's
    <a class="link" href="mysql-cluster.html#ndbparam-mgmd-datadir"><code class="literal">DataDir</code></a> directory, but this
    location can be overridden using the
    <a class="link" href="mysql-cluster.html#ndbparam-mgmd-logdestination"><code class="literal">LogDestination</code></a> option.
    (Recall that <em class="replaceable"><code>node_id</code></em> represents the
    unique identifier of the node whose activity is being logged.) The
    cluster log contains event reports generated by
    <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>. It is also possible to send cluster log
    entries to a Unix system log.
  </p><p>
    Some aspects of the cluster's operation can be also be monitored
    from an SQL node using the
    <a class="link" href="sql-syntax.html#show-engine" title="13.7.6.15 SHOW ENGINE Syntax"><code class="literal">SHOW ENGINE NDB
    STATUS</code></a> statement.
  </p><p>
    More detailed information about NDB Cluster operations is available
    in real time through an SQL interface using the
    <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo" title="22.5.10 ndbinfo: The NDB Cluster Information Database"><code class="literal">ndbinfo</code></a> database. For more
    information, see <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbinfo" title="22.5.10 ndbinfo: The NDB Cluster Information Database">Section 22.5.10, “ndbinfo: The NDB Cluster Information Database”</a>.
  </p><p>
    NDB statistics counters provide improved monitoring using the
    <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client. These counters, implemented in the
    NDB kernel, relate to operations performed by or affecting
    <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb.html" target="_top"><code class="literal">Ndb</code></a> objects, such as starting,
    closing, and aborting transactions; primary key and unique key
    operations; table, range, and pruned scans; blocked threads waiting
    for various operations to complete; and data and events sent and
    received by NDB Cluster. The counters are incremented by the NDB
    kernel whenever NDB API calls are made or data is sent to or
    received by the data nodes.
  </p><p>
    <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> exposes the NDB API statistics counters as
    system status variables, which can be identified from the prefix
    common to all of their names (<code class="literal">Ndb_api_</code>). The
    values of these variables can be read in the
    <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client from the output of a
    <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW STATUS</code></a> statement, or by querying
    either the
    <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/status-table.html" target="_top"><code class="literal">SESSION_STATUS</code></a> table
    or the <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/status-table.html" target="_top"><code class="literal">GLOBAL_STATUS</code></a>
    table (in the <code class="literal">INFORMATION_SCHEMA</code> database). By
    comparing the values of the status variables before and after the
    execution of an SQL statement that acts on
    <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables, you can observe the actions
    taken on the NDB API level that correspond to this statement, which
    can be beneficial for monitoring and performance tuning of NDB
    Cluster.
  </p><p>
    MySQL Cluster Manager provides an advanced command-line interface that simplifies
    many otherwise complex NDB Cluster management tasks, such as
    starting, stopping, or restarting an NDB Cluster with a large number
    of nodes. The MySQL Cluster Manager client also supports commands for getting and
    setting the values of most node configuration parameters as well as
    <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> server options and variables relating to
    NDB Cluster. See <a class="ulink" href="https://dev.mysql.com/doc/mysql-cluster-manager/1.4/en/" target="_top">MySQL™ Cluster Manager 1.4.7 User Manual</a>, for more information.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-start-phases"></a>22.5.1 Summary of NDB Cluster Start Phases</h3>
</div>
</div>
</div>
<a class="indexterm" name="idm140091583250800"></a><a class="indexterm" name="idm140091583249312"></a><p>
      This section provides a simplified outline of the steps involved
      when NDB Cluster data nodes are started. More complete information
      can be found in <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-start-phases.html" target="_top">NDB Cluster Start Phases</a>, in
      the <em class="citetitle"><code class="literal">NDB</code> Internals Guide</em>.
    </p><p>
      These phases are the same as those reported in the output from the
      <a class="link" href="mysql-cluster.html#ndbclient-status"><code class="literal"><em class="replaceable"><code>node_id</code></em>
      STATUS</code></a> command in the management client (see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-mgm-client-commands" title="22.5.2 Commands in the NDB Cluster Management Client">Section 22.5.2, “Commands in the NDB Cluster Management Client”</a>). These start
      phases are also reported in the <code class="literal">start_phase</code>
      column of the <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-nodes" title="22.5.10.28 The ndbinfo nodes Table"><code class="literal">ndbinfo.nodes</code></a>
      table.
    </p><p><b>Start types. </b>
        There are several different startup types and modes, as shown in
        the following list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Initial start. </b>
            The cluster starts with a clean file system on all data
            nodes. This occurs either when the cluster started for the
            very first time, or when all data nodes are restarted using
            the <a class="link" href="mysql-cluster.html#option_ndbd_initial"><code class="option">--initial</code></a> option.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
            Disk Data files are not removed when restarting a node using
            <a class="link" href="mysql-cluster.html#option_ndbd_initial"><code class="option">--initial</code></a>.
</p>
</div>
</li><li class="listitem"><p><b>System restart. </b>
            The cluster starts and reads data stored in the data nodes.
            This occurs when the cluster has been shut down after having
            been in use, when it is desired for the cluster to resume
            operations from the point where it left off.
          </p></li><li class="listitem"><p><b>Node restart. </b>
            This is the online restart of a cluster node while the
            cluster itself is running.
          </p></li><li class="listitem"><p><b>Initial node restart. </b>
            This is the same as a node restart, except that the node is
            reinitialized and started with a clean file system.
</p></li></ul>
</div>
<p><b>Setup and initialization (phase -1). </b>
        Prior to startup, each data node (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>
        process) must be initialized. Initialization consists of the
        following steps:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
          Obtain a node ID
        </p></li><li class="listitem"><p>
          Fetch configuration data
        </p></li><li class="listitem"><p>
          Allocate ports to be used for inter-node communications
        </p></li><li class="listitem"><p>
          Allocate memory according to settings obtained from the
          configuration file
</p></li></ol>
</div>
<p>
      When a data node or SQL node first connects to the management
      node, it reserves a cluster node ID. To make sure that no other
      node allocates the same node ID, this ID is retained until the
      node has managed to connect to the cluster and at least one
      <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> reports that this node is connected. This
      retention of the node ID is guarded by the connection between the
      node in question and <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>.
    </p><p>
      After each data node has been initialized, the cluster startup
      process can proceed. The stages which the cluster goes through
      during this process are listed here:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Phase 0. </b>
            The <code class="literal">NDBFS</code> and <code class="literal">NDBCNTR</code>
            blocks start (see
            <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-kernel-blocks.html" target="_top">NDB Kernel Blocks</a>). Data node
            file systems are cleared on those data nodes that were
            started with <a class="link" href="mysql-cluster.html#option_ndbd_initial"><code class="option">--initial</code></a> option.
          </p></li><li class="listitem"><p><b>Phase 1. </b>
            In this stage, all remaining
            <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> kernel blocks are started.
            NDB Cluster connections are set up, inter-block
            communications are established, and heartbeats are started.
            In the case of a node restart, API node connections are also
            checked.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
            When one or more nodes hang in Phase 1 while the remaining
            node or nodes hang in Phase 2, this often indicates network
            problems. One possible cause of such issues is one or more
            cluster hosts having multiple network interfaces. Another
            common source of problems causing this condition is the
            blocking of TCP/IP ports needed for communications between
            cluster nodes. In the latter case, this is often due to a
            misconfigured firewall.
</p>
</div>
</li><li class="listitem"><p><b>Phase 2. </b>
            The <code class="literal">NDBCNTR</code> kernel block checks the
            states of all existing nodes. The master node is chosen, and
            the cluster schema file is initialized.
          </p></li><li class="listitem"><p><b>Phase 3. </b>
            The <code class="literal">DBLQH</code> and <code class="literal">DBTC</code>
            kernel blocks set up communications between them. The
            startup type is determined; if this is a restart, the
            <code class="literal">DBDIH</code> block obtains permission to perform
            the restart.
          </p></li><li class="listitem"><p><b>Phase 4. </b>
            For an initial start or initial node restart, the redo log
            files are created. The number of these files is equal to
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-nooffragmentlogfiles"><code class="literal">NoOfFragmentLogFiles</code></a>.
          </p><p>
          For a system restart:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              Read schema or schemas.
            </p></li><li class="listitem"><p>
              Read data from the local checkpoint.
            </p></li><li class="listitem"><p>
              Apply all redo information until the latest restorable
              global checkpoint has been reached.
</p></li></ul>
</div>
<p>
          For a node restart, find the tail of the redo log.
        </p></li><li class="listitem"><p><b>Phase 5. </b>
            Most of the database-related portion of a data node start is
            performed during this phase. For an initial start or system
            restart, a local checkpoint is executed, followed by a
            global checkpoint. Periodic checks of memory usage begin
            during this phase, and any required node takeovers are
            performed.
          </p></li><li class="listitem"><p><b>Phase 6. </b>
            In this phase, node groups are defined and set up.
          </p></li><li class="listitem"><p><b>Phase 7. </b>
            The arbitrator node is selected and begins to function. The
            next backup ID is set, as is the backup disk write speed.
            Nodes reaching this start phase are marked as
            <code class="literal">Started</code>. It is now possible for API nodes
            (including SQL nodes) to connect to the cluster.
          </p></li><li class="listitem"><p><b>Phase 8. </b>
            If this is a system restart, all indexes are rebuilt (by
            <code class="literal">DBDIH</code>).
          </p></li><li class="listitem"><p><b>Phase 9. </b>
            The node internal startup variables are reset.
          </p></li><li class="listitem"><p><b>Phase 100 (OBSOLETE). </b>
            Formerly, it was at this point during a node restart or
            initial node restart that API nodes could connect to the
            node and begin to receive events. Currently, this phase is
            empty.
          </p></li><li class="listitem"><p><b>Phase 101. </b>
            At this point in a node restart or initial node restart,
            event delivery is handed over to the node joining the
            cluster. The newly-joined node takes over responsibility for
            delivering its primary data to subscribers. This phase is
            also referred to as
            <span class="firstterm"><code class="literal">SUMA</code> handover
            phase</span>.
</p></li></ul>
</div>
<p>
      After this process is completed for an initial start or system
      restart, transaction handling is enabled. For a node restart or
      initial node restart, completion of the startup process means that
      the node may now act as a transaction coordinator.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-mgm-client-commands"></a>22.5.2 Commands in the NDB Cluster Management Client</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091583177824"></a><a class="indexterm" name="idm140091583176336"></a><a class="indexterm" name="idm140091583174848"></a><p>
      In addition to the central configuration file, a cluster may also
      be controlled through a command-line interface available through
      the management client <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a>. This is the
      primary administrative interface to a running cluster.
    </p><p>
      Commands for the event logs are given in
      <a class="xref" href="mysql-cluster.html#mysql-cluster-event-reports" title="22.5.6 Event Reports Generated in NDB Cluster">Section 22.5.6, “Event Reports Generated in NDB Cluster”</a>; commands for
      creating backups and restoring from them are provided in
      <a class="xref" href="mysql-cluster.html#mysql-cluster-backup" title="22.5.3 Online Backup of NDB Cluster">Section 22.5.3, “Online Backup of NDB Cluster”</a>.
    </p><p><b>Using ndb_mgm with MySQL Cluster Manager. </b>
        <a class="indexterm" name="idm140091583168656"></a>

        <a class="indexterm" name="idm140091583167152"></a>

        MySQL Cluster Manager handles starting and stopping processes and tracks their
        states internally, so it is not necessary to use
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> for these tasks for an NDB Cluster
        that is under MySQL Cluster Manager control. it is recommended
        <span class="emphasis"><em>not</em></span> to use the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a>
        command-line client that comes with the NDB Cluster distribution
        to perform operations that involve starting or stopping nodes.
        These include but are not limited to the
        <a class="link" href="mysql-cluster.html#ndbclient-start"><code class="literal">START</code></a>,
        <a class="link" href="mysql-cluster.html#ndbclient-stop"><code class="literal">STOP</code></a>,
        <a class="link" href="mysql-cluster.html#ndbclient-restart"><code class="literal">RESTART</code></a>, and
        <a class="link" href="mysql-cluster.html#ndbclient-shutdown"><code class="literal">SHUTDOWN</code></a> commands. For more
        information, see <a class="ulink" href="https://dev.mysql.com/doc/mysql-cluster-manager/1.4/en/mcm-process-commands.html" target="_top">MySQL Cluster Manager Process Commands</a>.
      </p><p>
      The management client has the following basic commands. In the
      listing that follows, <em class="replaceable"><code>node_id</code></em> denotes
      either a data node ID or the keyword <code class="literal">ALL</code>, which
      indicates that the command should be applied to all of the
      cluster's data nodes.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbclient-help"></a>
          <a class="indexterm" name="idm140091583152960"></a>

          <a class="indexterm" name="idm140091583151504"></a>

          <a class="link" href="mysql-cluster.html#ndbclient-help"><code class="literal">HELP</code></a>
        </p><p>
          Displays information on all available commands.
        </p></li><li class="listitem"><p><a name="ndbclient-connect"></a>
          <a class="indexterm" name="idm140091583147392"></a>

          <a class="indexterm" name="idm140091583145936"></a>

          <a class="link" href="mysql-cluster.html#ndbclient-connect"><code class="literal">CONNECT
          <em class="replaceable"><code>connection-string</code></em></code></a>
        </p><p>
          Connects to the management server indicated by the connection
          string. If the client is already connected to this server, the
          client reconnects.
        </p></li><li class="listitem"><p><a name="ndbclient-show"></a>
          <a class="indexterm" name="idm140091583141488"></a>

          <a class="indexterm" name="idm140091583140032"></a>

          <a class="link" href="mysql-cluster.html#ndbclient-show"><code class="literal">SHOW</code></a>
        </p><p>
          Displays information on the cluster's status. Possible
          node status values include <code class="literal">UNKNOWN</code>,
          <code class="literal">NO_CONTACT</code>, <code class="literal">NOT_STARTED</code>,
          <code class="literal">STARTING</code>, <code class="literal">STARTED</code>,
          <code class="literal">SHUTTING_DOWN</code>, and
          <code class="literal">RESTARTING</code>. The output from this command
          also indicates when the cluster is in single user mode (status
          <code class="literal">SINGLE USER MODE</code>), and, in NDB 8.0.17 and
          later, indicates which API or SQL node has exclusive access
          when this mode is in effect.
        </p></li><li class="listitem"><p><a name="ndbclient-start"></a>
          <a class="indexterm" name="idm140091583130160"></a>

          <a class="indexterm" name="idm140091583128704"></a>

          <a class="link" href="mysql-cluster.html#ndbclient-start"><code class="literal"><em class="replaceable"><code>node_id</code></em>
          START</code></a>
        </p><p>
          Brings online the data node identified by
          <em class="replaceable"><code>node_id</code></em> (or all data nodes).
        </p><p>
          <code class="literal">ALL START</code> works on all data nodes only, and
          does not affect management nodes.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
            To use this command to bring a data node online, the data
            node must have been started using
            <a class="link" href="mysql-cluster.html#option_ndbd_nostart"><code class="option">--nostart</code></a> or
            <code class="option">-n</code>.
</p>
</div>
</li><li class="listitem"><p><a name="ndbclient-stop"></a>
          <a class="indexterm" name="idm140091583120512"></a>

          <a class="indexterm" name="idm140091583119056"></a>

          <a class="link" href="mysql-cluster.html#ndbclient-stop"><code class="literal"><em class="replaceable"><code>node_id</code></em>
          STOP [-a] [-f]</code></a>
        </p><p>
          Stops the data or management node identified by
          <em class="replaceable"><code>node_id</code></em>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
            <code class="literal">ALL STOP</code> works to stop all data nodes
            only, and does not affect management nodes.
</p>
</div>
<p>
          A node affected by this command disconnects from the cluster,
          and its associated <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> or
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> process terminates.
        </p><p>
          The <code class="option">-a</code> option causes the node to be stopped
          immediately, without waiting for the completion of any pending
          transactions.
        </p><p>
          Normally, <code class="literal">STOP</code> fails if the result would
          cause an incomplete cluster. The <code class="option">-f</code> option
          forces the node to shut down without checking for this. If
          this option is used and the result is an incomplete cluster,
          the cluster immediately shuts down.
</p>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Warning
</div>
<p>
            Use of the <code class="option">-a</code> option also disables the
            safety check otherwise performed when
            <code class="literal">STOP</code> is invoked to insure that stopping
            the node does not cause an incomplete cluster. In other
            words, you should exercise extreme care when using the
            <code class="option">-a</code> option with the <code class="literal">STOP</code>
            command, due to the fact that this option makes it possible
            for the cluster to undergo a forced shutdown because it no
            longer has a complete copy of all data stored in
            <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>.
</p>
</div>
</li><li class="listitem"><p><a name="ndbclient-restart"></a>
          <a class="indexterm" name="idm140091583102288"></a>

          <a class="indexterm" name="idm140091583100832"></a>

          <a class="link" href="mysql-cluster.html#ndbclient-restart"><code class="literal"><em class="replaceable"><code>node_id</code></em>
          RESTART [-n] [-i] [-a] [-f]</code></a>
        </p><p>
          Restarts the data node identified by
          <em class="replaceable"><code>node_id</code></em> (or all data nodes).
        </p><p>
          Using the <code class="option">-i</code> option with
          <code class="literal">RESTART</code> causes the data node to perform an
          initial restart; that is, the node's file system is deleted
          and recreated. The effect is the same as that obtained from
          stopping the data node process and then starting it again
          using <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>
          <a class="link" href="mysql-cluster.html#option_ndbd_initial"><code class="option">--initial</code></a> from the system shell.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
            Backup files and Disk Data files are not removed when this
            option is used.
</p>
</div>
<p>
          Using the <code class="option">-n</code> option causes the data node
          process to be restarted, but the data node is not actually
          brought online until the appropriate
          <a class="link" href="mysql-cluster.html#ndbclient-start"><code class="literal">START</code></a> command is issued.
          The effect of this option is the same as that obtained from
          stopping the data node and then starting it again using
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> <a class="link" href="mysql-cluster.html#option_ndbd_nostart"><code class="option">--nostart</code></a>
          or <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> <code class="option">-n</code> from the system
          shell.
        </p><p>
          Using the <code class="option">-a</code> causes all current transactions
          relying on this node to be aborted. No GCP check is done when
          the node rejoins the cluster.
        </p><p>
          Normally, <code class="literal">RESTART</code> fails if taking the node
          offline would result in an incomplete cluster. The
          <code class="option">-f</code> option forces the node to restart without
          checking for this. If this option is used and the result is an
          incomplete cluster, the entire cluster is restarted.
        </p></li><li class="listitem"><p><a name="ndbclient-status"></a>
          <a class="indexterm" name="idm140091583082192"></a>

          <a class="indexterm" name="idm140091583080736"></a>

          <a class="link" href="mysql-cluster.html#ndbclient-status"><code class="literal"><em class="replaceable"><code>node_id</code></em>
          STATUS</code></a>
        </p><p>
          Displays status information for the data node identified by
          <em class="replaceable"><code>node_id</code></em> (or for all data nodes).
        </p><p>
          The output from this command also indicates when the cluster
          is in single user mode.
        </p></li><li class="listitem"><p><a name="ndbclient-report"></a>
          <a class="indexterm" name="idm140091583075584"></a>

          <a class="indexterm" name="idm140091583074128"></a>

          <a class="link" href="mysql-cluster.html#ndbclient-report"><code class="literal"><em class="replaceable"><code>node_id</code></em>
          REPORT <em class="replaceable"><code>report-type</code></em></code></a>
        </p><p>
          Displays a report of type
          <em class="replaceable"><code>report-type</code></em> for the data node
          identified by <em class="replaceable"><code>node_id</code></em>, or for all
          data nodes using <code class="literal">ALL</code>.
        </p><p>
          Currently, there are three accepted values for
          <em class="replaceable"><code>report-type</code></em>:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">BackupStatus</code> provides a status report
              on a cluster backup in progress
            </p></li><li class="listitem"><p>
              <code class="literal">MemoryUsage</code> displays how much data
              memory and index memory is being used by each data node as
              shown in this example:
            </p><pre data-lang="ndbmgm" class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>ALL REPORT MEMORY</code></strong>

Node 1: Data usage is 5%(177 32K pages of total 3200)
Node 1: Index usage is 0%(108 8K pages of total 12832)
Node 2: Data usage is 5%(177 32K pages of total 3200)
Node 2: Index usage is 0%(108 8K pages of total 12832)
</pre><p>
              This information is also available from the
              <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-memoryusage" title="22.5.10.26 The ndbinfo memoryusage Table"><code class="literal">ndbinfo.memoryusage</code></a>
              table.
            </p></li><li class="listitem"><p>
              <code class="literal">EventLog</code> reports events from the event
              log buffers of one or more data nodes.
</p></li></ul>
</div>
<p>
          <em class="replaceable"><code>report-type</code></em> is case-insensitive and
          <span class="quote">“<span class="quote">fuzzy</span>”</span>; for <code class="literal">MemoryUsage</code>, you
          can use <code class="literal">MEMORY</code> (as shown in the prior
          example), <code class="literal">memory</code>, or even simply
          <code class="literal">MEM</code> (or <code class="literal">mem</code>). You can
          abbreviate <code class="literal">BackupStatus</code> in a similar
          fashion.
        </p></li><li class="listitem"><p><a name="ndbclient-enter-single-user-mode"></a>
          <a class="indexterm" name="idm140091583052224"></a>

          <a class="indexterm" name="idm140091583050736"></a>

          <a class="indexterm" name="idm140091583049696"></a>

          <a class="indexterm" name="idm140091583048192"></a>

          <a class="link" href="mysql-cluster.html#ndbclient-enter-single-user-mode"><code class="literal">ENTER SINGLE USER MODE
          <em class="replaceable"><code>node_id</code></em></code></a>
        </p><p>
          Enters single user mode, whereby only the MySQL server
          identified by the node ID <em class="replaceable"><code>node_id</code></em>
          is permitted to access the database.
        </p><p>
          Beginning with NDB 8.0.17, the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a>
          client provides a clear acknowledgement that this command has
          been issued and has taken effect, as shown here:
        </p><pre class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>ENTER SINGLE USER MODE 100</code></strong>
Single user mode entered
Access is granted for API node 100 only.
</pre><p>
          Also in NDB 8.0.17 and later, the API or SQL node having
          exclusive access when in single user mode is indicated in the
          output of the <a class="link" href="mysql-cluster.html#ndbclient-show"><code class="literal">SHOW</code></a>
          command, like this:
        </p><pre class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>SHOW</code></strong>
Cluster Configuration
---------------------
[ndbd(NDB)]     2 node(s)
id=5    @127.0.0.1  (mysql-8.0.17 ndb-8.0.17, single user mode, Nodegroup: 0, *)
id=6    @127.0.0.1  (mysql-8.0.17 ndb-8.0.17, single user mode, Nodegroup: 0)

[ndb_mgmd(MGM)] 1 node(s)
id=50   @127.0.0.1  (mysql-8.0.17 ndb-8.0.17)

[mysqld(API)]   2 node(s)
id=100  @127.0.0.1  (mysql-8.0.17 ndb-8.0.17, allowed single user)
id=101 (not connected, accepting connect from any host)
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
            All data and management nodes must be running version 8.0.17
            of the NDB Cluster software for this feature to be enabled.
</p>
</div>
</li><li class="listitem"><p><a name="ndbclient-exit-single-user-mode"></a>
          <a class="indexterm" name="idm140091583035200"></a>

          <a class="indexterm" name="idm140091583033744"></a>

          <a class="link" href="mysql-cluster.html#ndbclient-exit-single-user-mode"><code class="literal">EXIT SINGLE USER MODE</code></a>
        </p><p>
          Exits single user mode, enabling all SQL nodes (that is, all
          running <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> processes) to access the
          database.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
            It is possible to use <code class="literal">EXIT SINGLE USER
            MODE</code> even when not in single user mode, although
            the command has no effect in this case.
</p>
</div>
</li><li class="listitem"><p><a name="ndbclient-quit"></a>
          <a class="indexterm" name="idm140091583026656"></a>

          <a class="indexterm" name="idm140091583025200"></a>

          <a class="indexterm" name="idm140091583024112"></a>

          <a class="indexterm" name="idm140091583022624"></a>

          <a class="link" href="mysql-cluster.html#ndbclient-quit"><code class="literal">QUIT</code></a>,
          <a class="link" href="mysql-cluster.html#ndbclient-quit"><code class="literal">EXIT</code></a>
        </p><p>
          Terminates the management client.
        </p><p>
          This command does not affect any nodes connected to the
          cluster.
        </p></li><li class="listitem"><p><a name="ndbclient-shutdown"></a>
          <a class="indexterm" name="idm140091583016864"></a>

          <a class="indexterm" name="idm140091583015408"></a>

          <a class="link" href="mysql-cluster.html#ndbclient-shutdown"><code class="literal">SHUTDOWN</code></a>
        </p><p>
          Shuts down all cluster data nodes and management nodes. To
          exit the management client after this has been done, use
          <a class="link" href="mysql-cluster.html#ndbclient-quit"><code class="literal">EXIT</code></a> or
          <a class="link" href="mysql-cluster.html#ndbclient-quit"><code class="literal">QUIT</code></a>.
        </p><p>
          This command does <span class="emphasis"><em>not</em></span> shut down any SQL
          nodes or API nodes that are connected to the cluster.
        </p></li><li class="listitem"><p><a name="ndbclient-create-nodegroup"></a>
          <a class="indexterm" name="idm140091583007856"></a>

          <a class="indexterm" name="idm140091583006400"></a>

          <a class="link" href="mysql-cluster.html#ndbclient-create-nodegroup"><code class="literal">CREATE NODEGROUP
          <em class="replaceable"><code>nodeid</code></em>[,
          <em class="replaceable"><code>nodeid</code></em>, ...]</code></a>
        </p><p>
          Creates a new NDB Cluster node group and causes data nodes to
          join it.
        </p><p>
          This command is used after adding new data nodes online to an
          NDB Cluster, and causes them to join a new node group and thus
          to begin participating fully in the cluster. The command takes
          as its sole parameter a comma-separated list of node
          IDs—these are the IDs of the nodes just added and
          started that are to join the new node group. The number of
          nodes must be the same as the number of nodes in each node
          group that is already part of the cluster (each NDB Cluster
          node group must have the same number of nodes). In other
          words, if the NDB Cluster has 2 node groups of 2 data nodes
          each, then the new node group must also have 2 data nodes.
        </p><p>
          The node group ID of the new node group created by this
          command is determined automatically, and always the next
          highest unused node group ID in the cluster; it is not
          possible to set it manually.
        </p><p>
          For more information, see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-online-add-node" title="22.5.15 Adding NDB Cluster Data Nodes Online">Section 22.5.15, “Adding NDB Cluster Data Nodes Online”</a>.
        </p></li><li class="listitem"><p><a name="ndbclient-drop-nodegroup"></a>
          <a class="indexterm" name="idm140091582997904"></a>

          <a class="indexterm" name="idm140091582996416"></a>

          <a class="link" href="mysql-cluster.html#ndbclient-drop-nodegroup"><code class="literal">DROP NODEGROUP
          <em class="replaceable"><code>nodegroup_id</code></em></code></a>
        </p><p>
          Drops the NDB Cluster node group with the given
          <em class="replaceable"><code>nodegroup_id</code></em>.
        </p><p>
          This command can be used to drop a node group from an NDB
          Cluster. <code class="literal">DROP NODEGROUP</code> takes as its sole
          argument the node group ID of the node group to be dropped.
        </p><p>
          <code class="literal">DROP NODEGROUP</code> acts only to remove the data
          nodes in the effected node group from that node group. It does
          not stop data nodes, assign them to a different node group, or
          remove them from the cluster's configuration. A data node
          that does not belong to a node group is indicated in the
          output of the management client
          <a class="link" href="mysql-cluster.html#ndbclient-show"><code class="literal">SHOW</code></a> command with
          <code class="literal">no nodegroup</code> in place of the node group ID,
          like this (indicated using bold text):
        </p><pre data-lang="simple" class="programlisting">
id=3    @10.100.2.67  (8.0.17-ndb-8.0.17, <span class="bold"><strong>no nodegroup</strong></span>)
</pre><p>
          <code class="literal">DROP NODEGROUP</code> works only when all data
          nodes in the node group to be dropped are completely empty of
          any table data and table definitions. Since there is currently
          no way using <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> or the
          <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client to remove all data from a
          specific data node or node group, this means that the command
          succeeds only in the two following cases:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
              After issuing <a class="link" href="mysql-cluster.html#ndbclient-create-nodegroup"><code class="literal">CREATE
              NODEGROUP</code></a> in the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a>
              client, but before issuing any
              <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE
              ... REORGANIZE PARTITION</code></a> statements in the
              <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client.
            </p></li><li class="listitem"><p>
              After dropping all <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a>
              tables using <a class="link" href="sql-syntax.html#drop-table" title="13.1.32 DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a>.
            </p><p>
              <a class="link" href="sql-syntax.html#truncate-table" title="13.1.37 TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE TABLE</code></a> does not
              work for this purpose because this removes only the table
              data; the data nodes continue to store an
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> table's
              definition until a <a class="link" href="sql-syntax.html#drop-table" title="13.1.32 DROP TABLE Syntax"><code class="literal">DROP
              TABLE</code></a> statement is issued that causes the table
              metadata to be dropped.
</p></li></ol>
</div>
<p>
          For more information about <code class="literal">DROP NODEGROUP</code>,
          see <a class="xref" href="mysql-cluster.html#mysql-cluster-online-add-node" title="22.5.15 Adding NDB Cluster Data Nodes Online">Section 22.5.15, “Adding NDB Cluster Data Nodes Online”</a>.
        </p></li><li class="listitem"><p><a name="ndbclient-prompt"></a>
          <a class="indexterm" name="idm140091582964768"></a>

          <a class="indexterm" name="idm140091582963312"></a>

          <a class="link" href="mysql-cluster.html#ndbclient-prompt"><code class="literal">PROMPT
          [<em class="replaceable"><code>prompt</code></em>]</code></a>
        </p><p>
          Changes the prompt shown by <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> to the
          string literal <em class="replaceable"><code>prompt</code></em>.
        </p><p>
          <em class="replaceable"><code>prompt</code></em> should not be quoted (unless
          you want the prompt to include the quotation marks). Unlike
          the case with the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client, special
          character sequences and escapes are not recognized. If called
          without an argument, the command resets the prompt to the
          default value (<code class="literal">ndb_mgm&gt;</code>).
        </p><p>
          Some examples are shown here:
        </p><pre data-lang="ndbmgm" class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>PROMPT mgm#1:</code></strong>
mgm#1: <strong class="userinput"><code>SHOW</code></strong>
Cluster Configuration
...
mgm#1: <strong class="userinput"><code>PROMPT mymgm &gt;</code></strong>
mymgm &gt; <strong class="userinput"><code>PROMPT 'mymgm:'</code></strong>
'mymgm:' <strong class="userinput"><code>PROMPT  mymgm:</code></strong>
mymgm: <strong class="userinput"><code>PROMPT</code></strong>
ndb_mgm&gt; <strong class="userinput"><code>EXIT</code></strong>
jon@valhaj:~/bin&gt;
</pre><p>
          Note that leading spaces and spaces within the
          <em class="replaceable"><code>prompt</code></em> string are not trimmed.
          Trailing spaces are removed.
        </p></li><li class="listitem"><p><a name="ndbclient-nodelog-debug"></a>
          <a class="indexterm" name="idm140091582946560"></a>

          <a class="indexterm" name="idm140091582945104"></a>

          <a class="link" href="mysql-cluster.html#ndbclient-nodelog-debug"><code class="literal"><em class="replaceable"><code>node_id</code></em>
          NODELOG DEBUG {ON|OFF}</code></a>
        </p><p>
          Toggles debug logging in the node log, as though the effected
          data node or nodes had been started with the
          <a class="link" href="mysql-cluster.html#option_ndbd_verbose"><code class="option">--verbose</code></a> option.
          <code class="literal">NODELOG DEBUG ON</code> starts debug logging;
          <code class="literal">NODELOG DEBUG OFF</code> switches debug logging
          off.
</p></li></ul>
</div>
<p><b>Additional commands. </b>
        A number of other commands available in the
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> client are described elsewhere, as
        shown in the following list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <a class="link" href="mysql-cluster.html#mysql-cluster-backup-using-management-client" title="22.5.3.2 Using The NDB Cluster Management Client to Create a Backup"><code class="literal">START BACKUP</code></a> is used to
          perform an online backup in the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a>
          client; the <a class="link" href="mysql-cluster.html#ndbclient-abort-backup" title="Cancelling backups"><code class="literal">ABORT BACKUP</code></a>
          command is used to cancel a backup already in progress. For
          more information, see <a class="xref" href="mysql-cluster.html#mysql-cluster-backup" title="22.5.3 Online Backup of NDB Cluster">Section 22.5.3, “Online Backup of NDB Cluster”</a>.
        </p></li><li class="listitem"><p>
          The <a class="link" href="mysql-cluster.html#mysql-cluster-logging-management-commands" title="22.5.6.1 NDB Cluster Logging Management Commands"><code class="literal">CLUSTERLOG</code></a> command is
          used to perform various logging functions. See
          <a class="xref" href="mysql-cluster.html#mysql-cluster-event-reports" title="22.5.6 Event Reports Generated in NDB Cluster">Section 22.5.6, “Event Reports Generated in NDB Cluster”</a>, for more
          information and examples. <code class="literal">NODELOG DEBUG</code>
          activates or deactivates debug printouts in node logs, as
          described previously in this section.
        </p></li><li class="listitem"><p>
          For testing and diagnostics work, the client supports a
          <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-dump-commands.html" target="_top"><code class="literal">DUMP</code></a> command which can be
          used to execute internal commands on the cluster. It should
          never be used in a production setting unless directed to do so
          by MySQL Support. For more information, see
          <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/" target="_top">MySQL NDB Cluster Internals Manual</a>.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-backup"></a>22.5.3 Online Backup of NDB Cluster</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-backup-concepts">22.5.3.1 NDB Cluster Backup Concepts</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-backup-using-management-client">22.5.3.2 Using The NDB Cluster Management Client to Create a Backup</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-backup-configuration">22.5.3.3 Configuration for NDB Cluster Backups</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-backup-troubleshooting">22.5.3.4 NDB Cluster Backup Troubleshooting</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-backup-parallel-data-nodes">22.5.3.5 Taking an NDB with Parallel Data Nodes</a></span></dt></dl>
</div>
<a class="indexterm" name="idm140091582922496"></a><a class="indexterm" name="idm140091582921040"></a><p>
      The next few sections describe how to prepare for and then to
      create an NDB Cluster backup using the functionality for this
      purpose found in the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> management client.
      To distinguish this type of backup from a backup made using
      <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a>, we sometimes refer to it as a
      <span class="quote">“<span class="quote">native</span>”</span> NDB Cluster backup. (For information about
      the creation of backups with <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a>, see
      <a class="xref" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program">Section 4.5.4, “<span class="command"><strong>mysqldump</strong></span> — A Database Backup Program”</a>.) Restoration of NDB Cluster backups
      is done using the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> utility provided
      with the NDB Cluster distribution; for information about
      <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> and its use in restoring NDB
      Cluster backups, see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup">Section 22.4.23, “<span class="command"><strong>ndb_restore</strong></span> — Restore an NDB Cluster Backup”</a>.
    </p><p>
      Starting with NDB 8.0.16, it is possible to create backups using
      multiple LDMs to achieve parallelism on the data nodes. See
      <a class="xref" href="mysql-cluster.html#mysql-cluster-backup-parallel-data-nodes" title="22.5.3.5 Taking an NDB with Parallel Data Nodes">Section 22.5.3.5, “Taking an NDB with Parallel Data Nodes”</a>.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-backup-concepts"></a>22.5.3.1 NDB Cluster Backup Concepts</h4>
</div>
</div>
</div>
<a class="indexterm" name="idm140091582908224"></a><a class="indexterm" name="idm140091582906736"></a><p>
        A backup is a snapshot of the database at a given time. The
        backup consists of three main parts:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Metadata. </b>
              The names and definitions of all database tables
            </p></li><li class="listitem"><p><b>Table records. </b>
              The data actually stored in the database tables at the
              time that the backup was made
            </p></li><li class="listitem"><p><b>Transaction log. </b>
              A sequential record telling how and when data was stored
              in the database
</p></li></ul>
</div>
<p>
        Each of these parts is saved on all nodes participating in the
        backup. During backup, each node saves these three parts into
        three files on disk:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="filename">BACKUP-<em class="replaceable"><code>backup_id</code></em>.<em class="replaceable"><code>node_id</code></em>.ctl</code>
          </p><p>
            A control file containing control information and metadata.
            Each node saves the same table definitions (for all tables
            in the cluster) to its own version of this file.
          </p></li><li class="listitem"><p>
            <code class="filename">BACKUP-<em class="replaceable"><code>backup_id</code></em>-0.<em class="replaceable"><code>node_id</code></em>.data</code>
          </p><p>
            A data file containing the table records, which are saved on
            a per-fragment basis. That is, different nodes save
            different fragments during the backup. The file saved by
            each node starts with a header that states the tables to
            which the records belong. Following the list of records
            there is a footer containing a checksum for all records.
          </p></li><li class="listitem"><p>
            <code class="filename">BACKUP-<em class="replaceable"><code>backup_id</code></em>.<em class="replaceable"><code>node_id</code></em>.log</code>
          </p><p>
            A log file containing records of committed transactions.
            Only transactions on tables stored in the backup are stored
            in the log. Nodes involved in the backup save different
            records because different nodes host different database
            fragments.
</p></li></ul>
</div>
<p>
        In the listing just shown, <em class="replaceable"><code>backup_id</code></em>
        stands for the backup identifier and
        <em class="replaceable"><code>node_id</code></em> is the unique identifier for
        the node creating the file.
      </p><p>
        The location of the backup files is determined by the
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupdatadir"><code class="literal">BackupDataDir</code></a> parameter.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-backup-using-management-client"></a>22.5.3.2 Using The NDB Cluster Management Client to Create a Backup</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091582884672"></a><a class="indexterm" name="idm140091582883184"></a><p>
        Before starting a backup, make sure that the cluster is properly
        configured for performing one. (See
        <a class="xref" href="mysql-cluster.html#mysql-cluster-backup-configuration" title="22.5.3.3 Configuration for NDB Cluster Backups">Section 22.5.3.3, “Configuration for NDB Cluster Backups”</a>.)
      </p><a class="indexterm" name="idm140091582880464"></a><p>
        The <code class="literal">START BACKUP</code> command is used to create a
        backup:
      </p><pre data-lang="simple" class="programlisting">
START BACKUP [<em class="replaceable"><code>backup_id</code></em>] [<em class="replaceable"><code>wait_option</code></em>] [<em class="replaceable"><code>snapshot_option</code></em>]

<em class="replaceable"><code>wait_option</code></em>:
WAIT {STARTED | COMPLETED} | NOWAIT

<em class="replaceable"><code>snapshot_option</code></em>:
SNAPSHOTSTART | SNAPSHOTEND
</pre><p>
        Successive backups are automatically identified sequentially, so
        the <em class="replaceable"><code>backup_id</code></em>, an integer greater
        than or equal to 1, is optional; if it is omitted, the next
        available value is used. If an existing
        <em class="replaceable"><code>backup_id</code></em> value is used, the backup
        fails with the error <span class="errortext">Backup failed: file already
        exists</span>. If used, the
        <em class="replaceable"><code>backup_id</code></em> must follow <code class="literal">START
        BACKUP</code> immediately, before any other options are used.
      </p><p>
        The <em class="replaceable"><code>wait_option</code></em> can be used to
        determine when control is returned to the management client
        after a <code class="literal">START BACKUP</code> command is issued, as
        shown in the following list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="indexterm" name="idm140091582869072"></a>

            <a class="indexterm" name="idm140091582867584"></a>

            If <code class="literal">NOWAIT</code> is specified, the management
            client displays a prompt immediately, as seen here:
          </p><pre data-lang="ndbmgm" class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>START BACKUP NOWAIT</code></strong>
ndb_mgm&gt;
</pre><p>
            In this case, the management client can be used even while
            it prints progress information from the backup process.
          </p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140091582862656"></a>

            <a class="indexterm" name="idm140091582861168"></a>

            With <code class="literal">WAIT STARTED</code> the management client
            waits until the backup has started before returning control
            to the user, as shown here:
          </p><pre data-lang="ndbmgm" class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>START BACKUP WAIT STARTED</code></strong>
Waiting for started, this may take several minutes
Node 2: Backup 3 started from node 1
ndb_mgm&gt;
</pre></li><li class="listitem"><p>
            <a class="indexterm" name="idm140091582856560"></a>

            <a class="indexterm" name="idm140091582855072"></a>

            <strong class="userinput"><code>WAIT COMPLETED</code></strong> causes the management
            client to wait until the backup process is complete before
            returning control to the user.
</p></li></ul>
</div>
<p>
        <code class="literal">WAIT COMPLETED</code> is the default.
      </p><p>
        <a class="indexterm" name="idm140091582851392"></a>

        <a class="indexterm" name="idm140091582849904"></a>

        <a class="indexterm" name="idm140091582848816"></a>

        <a class="indexterm" name="idm140091582847328"></a>

        A <em class="replaceable"><code>snapshot_option</code></em> can be used to
        determine whether the backup matches the state of the cluster
        when <code class="literal">START BACKUP</code> was issued, or when it was
        completed. <code class="literal">SNAPSHOTSTART</code> causes the backup to
        match the state of the cluster when the backup began;
        <code class="literal">SNAPSHOTEND</code> causes the backup to reflect the
        state of the cluster when the backup was finished.
        <code class="literal">SNAPSHOTEND</code> is the default, and matches the
        behavior found in previous NDB Cluster releases.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          If you use the <code class="literal">SNAPSHOTSTART</code> option with
          <code class="literal">START BACKUP</code>, and the
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-compressedbackup"><code class="literal">CompressedBackup</code></a>
          parameter is enabled, only the data and control files are
          compressed—the log file is not compressed.
</p>
</div>
<p>
        If both a <em class="replaceable"><code>wait_option</code></em> and a
        <em class="replaceable"><code>snapshot_option</code></em> are used, they may be
        specified in either order. For example, all of the following
        commands are valid, assuming that there is no existing backup
        having 4 as its ID:
      </p><pre data-lang="simple" class="programlisting">
START BACKUP WAIT STARTED SNAPSHOTSTART
START BACKUP SNAPSHOTSTART WAIT STARTED
START BACKUP 4 WAIT COMPLETED SNAPSHOTSTART
START BACKUP SNAPSHOTEND WAIT COMPLETED
START BACKUP 4 NOWAIT SNAPSHOTSTART
</pre><p>
        The procedure for creating a backup consists of the following
        steps:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Start the management client (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a>), if
            it not running already.
          </p></li><li class="listitem"><p>
            Execute the <strong class="userinput"><code>START BACKUP</code></strong> command.
            This produces several lines of output indicating the
            progress of the backup, as shown here:
          </p><pre data-lang="ndbmgm" class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>START BACKUP</code></strong>
Waiting for completed, this may take several minutes
Node 2: Backup 1 started from node 1
Node 2: Backup 1 started from node 1 completed
 StartGCP: 177 StopGCP: 180
 #Records: 7362 #LogRecords: 0
 Data: 453648 bytes Log: 0 bytes
ndb_mgm&gt;
</pre></li><li class="listitem"><p>
            <a class="indexterm" name="idm140091582828240"></a>

            <a class="indexterm" name="idm140091582826736"></a>

            When the backup has started the management client displays
            this message:
          </p><pre data-lang="ndbmgm" class="programlisting">
Backup <em class="replaceable"><code>backup_id</code></em> started from node <em class="replaceable"><code>node_id</code></em>
</pre><p>
            <em class="replaceable"><code>backup_id</code></em> is the unique
            identifier for this particular backup. This identifier is
            saved in the cluster log, if it has not been configured
            otherwise. <em class="replaceable"><code>node_id</code></em> is the
            identifier of the management server that is coordinating the
            backup with the data nodes. At this point in the backup
            process the cluster has received and processed the backup
            request. It does not mean that the backup has finished. An
            example of this statement is shown here:
          </p><pre data-lang="ndbmgm" class="programlisting">
Node 2: Backup 1 started from node 1
</pre></li><li class="listitem"><p>
            The management client indicates with a message like this one
            that the backup has started:
          </p><pre data-lang="ndbmgm" class="programlisting">
Backup <em class="replaceable"><code>backup_id</code></em> started from node <em class="replaceable"><code>node_id</code></em> completed
</pre><p>
            As is the case for the notification that the backup has
            started, <em class="replaceable"><code>backup_id</code></em> is the unique
            identifier for this particular backup, and
            <em class="replaceable"><code>node_id</code></em> is the node ID of the
            management server that is coordinating the backup with the
            data nodes. This output is accompanied by additional
            information including relevant global checkpoints, the
            number of records backed up, and the size of the data, as
            shown here:
          </p><pre data-lang="ndbmgm" class="programlisting">
Node 2: Backup 1 started from node 1 completed
 StartGCP: 177 StopGCP: 180
 #Records: 7362 #LogRecords: 0
 Data: 453648 bytes Log: 0 bytes
</pre></li></ol>
</div>
<p>
        It is also possible to perform a backup from the system shell by
        invoking <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> with the <code class="option">-e</code>
        or <a class="link" href="mysql-cluster.html#option_ndb_mgm_execute"><code class="option">--execute</code></a> option, as shown in
        this example:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_mgm -e "START BACKUP 6 WAIT COMPLETED SNAPSHOTSTART"</code></strong>
</pre><p>
        When using <code class="literal">START BACKUP</code> in this way, you must
        specify the backup ID.
      </p><p>
        Cluster backups are created by default in the
        <code class="filename">BACKUP</code> subdirectory of the
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datadir"><code class="literal">DataDir</code></a> on each data
        node. This can be overridden for one or more data nodes
        individually, or for all cluster data nodes in the
        <code class="filename">config.ini</code> file using the
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupdatadir"><code class="literal">BackupDataDir</code></a>
        configuration parameter. The backup files created for a backup
        with a given <em class="replaceable"><code>backup_id</code></em> are stored in
        a subdirectory named
        <code class="filename">BACKUP-<em class="replaceable"><code>backup_id</code></em></code>
        in the backup directory.
      </p><p><a name="ndbclient-abort-backup"></a><b>Cancelling backups. </b>
          To cancel or abort a backup that is already in progress,
          perform the following steps:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Start the management client.
          </p></li><li class="listitem"><p>
            Execute this command:
          </p><pre data-lang="ndbmgm" class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>ABORT BACKUP <em class="replaceable"><code>backup_id</code></em></code></strong>
</pre><p>
            The number <em class="replaceable"><code>backup_id</code></em> is the
            identifier of the backup that was included in the response
            of the management client when the backup was started (in the
            message <code class="literal">Backup <em class="replaceable"><code>backup_id</code></em>
            started from node
            <em class="replaceable"><code>management_node_id</code></em></code>).
          </p></li><li class="listitem"><p>
            The management client will acknowledge the abort request
            with <code class="literal">Abort of backup
            <em class="replaceable"><code>backup_id</code></em> ordered</code>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              At this point, the management client has not yet received
              a response from the cluster data nodes to this request,
              and the backup has not yet actually been aborted.
</p>
</div>
</li><li class="listitem"><p>
            After the backup has been aborted, the management client
            will report this fact in a manner similar to what is shown
            here:
          </p><pre data-lang="ndbmgm" class="programlisting">
Node 1: Backup 3 started from 5 has been aborted.
  Error: 1321 - Backup aborted by user request: Permanent error: User defined error
Node 3: Backup 3 started from 5 has been aborted.
  Error: 1323 - 1323: Permanent error: Internal error
Node 2: Backup 3 started from 5 has been aborted.
  Error: 1323 - 1323: Permanent error: Internal error
Node 4: Backup 3 started from 5 has been aborted.
  Error: 1323 - 1323: Permanent error: Internal error
</pre><p>
            In this example, we have shown sample output for a cluster
            with 4 data nodes, where the sequence number of the backup
            to be aborted is <code class="literal">3</code>, and the management
            node to which the cluster management client is connected has
            the node ID <code class="literal">5</code>. The first node to complete
            its part in aborting the backup reports that the reason for
            the abort was due to a request by the user. (The remaining
            nodes report that the backup was aborted due to an
            unspecified internal error.)
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              There is no guarantee that the cluster nodes respond to an
              <code class="literal">ABORT BACKUP</code> command in any particular
              order.
</p>
</div>
<p>
            The <code class="literal">Backup <em class="replaceable"><code>backup_id</code></em>
            started from node
            <em class="replaceable"><code>management_node_id</code></em> has been
            aborted</code> messages mean that the backup has been
            terminated and that all files relating to this backup have
            been removed from the cluster file system.
</p></li></ol>
</div>
<p>
        It is also possible to abort a backup in progress from a system
        shell using this command:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_mgm -e "ABORT BACKUP <em class="replaceable"><code>backup_id</code></em>"</code></strong>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          If there is no backup having the ID
          <em class="replaceable"><code>backup_id</code></em> running when an
          <code class="literal">ABORT BACKUP</code> is issued, the management
          client makes no response, nor is it indicated in the cluster
          log that an invalid abort command was sent.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-backup-configuration"></a>22.5.3.3 Configuration for NDB Cluster Backups</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091582775888"></a><a class="indexterm" name="idm140091582774400"></a><a class="indexterm" name="idm140091582772912"></a><a class="indexterm" name="idm140091582771424"></a><p>
        Five configuration parameters are essential for backup:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="indexterm" name="idm140091582768704"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupdatabuffersize"><code class="literal">BackupDataBufferSize</code></a>
          </p><p>
            The amount of memory used to buffer data before it is
            written to disk.
          </p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140091582765072"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backuplogbuffersize"><code class="literal">BackupLogBufferSize</code></a>
          </p><p>
            The amount of memory used to buffer log records before these
            are written to disk.
          </p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140091582761488"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupmemory"><code class="literal">BackupMemory</code></a>
          </p><p>
            The total memory allocated in a data node for backups. This
            should be the sum of the memory allocated for the backup
            data buffer and the backup log buffer.
          </p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140091582757808"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupwritesize"><code class="literal">BackupWriteSize</code></a>
          </p><p>
            The default size of blocks written to disk. This applies for
            both the backup data buffer and the backup log buffer.
          </p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140091582754192"></a>

            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupmaxwritesize"><code class="literal">BackupMaxWriteSize</code></a>
          </p><p>
            The maximum size of blocks written to disk. This applies for
            both the backup data buffer and the backup log buffer.
</p></li></ul>
</div>
<p>
        More detailed information about these parameters can be found in
        <a class="link" href="mysql-cluster.html#mysql-cluster-backup-parameters" title="Backup parameters">Backup
        Parameters</a>.
      </p><p>
        You can also set a location for the backup files using the
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupdatadir"><code class="literal">BackupDataDir</code></a>
        configuration parameter. The default is
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempath"><code class="literal">FileSystemPath</code></a><code class="filename">/BACKUP/BACKUP-<em class="replaceable"><code>backup_id</code></em></code>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-backup-troubleshooting"></a>22.5.3.4 NDB Cluster Backup Troubleshooting</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091582744400"></a><a class="indexterm" name="idm140091582742912"></a><a class="indexterm" name="idm140091582741424"></a><p>
        If an error code is returned when issuing a backup request, the
        most likely cause is insufficient memory or disk space. You
        should check that there is enough memory allocated for the
        backup.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
          If you have set
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupdatabuffersize"><code class="literal">BackupDataBufferSize</code></a>
          and
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backuplogbuffersize"><code class="literal">BackupLogBufferSize</code></a>
          and their sum is greater than 4MB, then you must also set
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupmemory"><code class="literal">BackupMemory</code></a> as well.
</p>
</div>
<p>
        You should also make sure that there is sufficient space on the
        hard drive partition of the backup target.
      </p><p>
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> does not support repeatable
        reads, which can cause problems with the restoration process.
        Although the backup process is <span class="quote">“<span class="quote">hot</span>”</span>, restoring an
        NDB Cluster from backup is not a 100% <span class="quote">“<span class="quote">hot</span>”</span>
        process. This is due to the fact that, for the duration of the
        restore process, running transactions get nonrepeatable reads
        from the restored data. This means that the state of the data is
        inconsistent while the restore is in progress.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-backup-parallel-data-nodes"></a>22.5.3.5 Taking an NDB with Parallel Data Nodes</h4>

</div>

</div>

</div>
<p>
        Beginning with NDB 8.0.16, it is possible to take a backup with
        multiple local data managers (LDMs) acting in parallel on the
        data nodes. For this to work, all data nodes in the cluster must
        use multiple LDMs, and each data node must use the same number
        of LDMs. This means that all data nodes must run
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> is
        single-threaded and thus always has only one LDM) and they must
        be configured to use multiple LDMs before taking the backup;
        ndbmtd by default runs in single-threaded mode. You can cause
        them to use multiple LDMs this by choosing an appropriate
        setting for one of the multi-threaded data node configuration
        parameters
        <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-maxnoofexecutionthreads"><code class="literal">MaxNoOfExecutionThreads</code></a>
        or <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-threadconfig"><code class="literal">ThreadConfig</code></a>. Keep
        in mind that changing these parameters requires a restart of the
        cluster; this can be a rolling restart.
      </p><p>
        Depending on the number of LDMs and other factors, you may also
        need to increase
        <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-nooffragmentlogparts"><code class="literal">NoOfFragmentLogParts</code></a>.
        If you are using large Disk Data tables, you may also need to
        increase
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskpagebuffermemory"><code class="literal">DiskPageBufferMemory</code></a>. As
        with single-threaded backups, you also want or need to make
        adjustments to settings for
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupdatabuffersize"><code class="literal">BackupDataBufferSize</code></a>,
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupmemory"><code class="literal">BackupMemory</code></a>, and other
        configuration parameters relating to backups (see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-backup-parameters" title="Backup parameters">Backup parameters</a>).
      </p><p>
        Once all data nodes are using multiple LDMs, you can take the
        parallel backup using the <a class="link" href="mysql-cluster.html#mysql-cluster-backup-using-management-client" title="22.5.3.2 Using The NDB Cluster Management Client to Create a Backup"><code class="literal">START
        BACKUP</code></a> command in the NDB management client just as
        you would if the data nodes were running <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>
        (or <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> in single-threaded mode); no
        additional or special syntax is required, and you can specify a
        backup ID, wait option, or snapshot option in any combination as
        needed or desired.
      </p><p>
        Backups using multiple LDMs create subdirectories, one per LDM,
        under the directory
        <code class="filename">BACKUP/BACKUP-<em class="replaceable"><code>backup_id</code></em>/</code>
        (which in turn resides under the
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupdatadir"><code class="literal">BackupDataDir</code></a>) on each
        data node; these subdirectories are named
        <code class="filename">BACKUP-<em class="replaceable"><code>backup_id</code></em>-PART-1-OF-<em class="replaceable"><code>N</code></em>/</code>,
        <code class="filename">BACKUP-<em class="replaceable"><code>backup_id</code></em>-PART-2-OF-<em class="replaceable"><code>N</code></em>/</code>,
        and so on, up to
        <code class="filename">BACKUP-<em class="replaceable"><code>backup_id</code></em>-PART-<em class="replaceable"><code>N</code></em>-OF-<em class="replaceable"><code>N</code></em>/</code>,
        where <em class="replaceable"><code>backup_id</code></em> is the backup ID used
        for this backup and <em class="replaceable"><code>N</code></em> is the number
        of LDMs per data node. Each of these subdirectories contains the
        usual backup files
        <code class="literal">BACKUP-<em class="replaceable"><code>backup_id</code></em>-0.<em class="replaceable"><code>node_id</code></em>.Data</code>,
        <code class="literal">BACKUP-<em class="replaceable"><code>backup_id</code></em>.<em class="replaceable"><code>node_id</code></em>.ctl</code>,
        and <code class="literal">BACKUP-backup_id.node_id.log</code>, where
        <em class="replaceable"><code>node_id</code></em> is the node ID of this data
        node.
      </p><p>
        In NDB 8.0.16 and later, <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>
        automatically checks for the presence of the subdirectories just
        described; if it finds them, it attempts to restore the backup
        in parallel. For information about restoring backups taken with
        multiple LDMs, see
        <a class="xref" href="mysql-cluster.html#ndb-restore-parallel-data-node-backup" title="22.4.23.2 Restoring from a backup taken in parallel">Section 22.4.23.2, “Restoring from a backup taken in parallel”</a>.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-mysqld"></a>22.5.4 MySQL Server Usage for NDB Cluster</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091582695088"></a><a class="indexterm" name="idm140091582693632"></a><a class="indexterm" name="idm140091582692144"></a><a class="indexterm" name="idm140091582690656"></a><a class="indexterm" name="idm140091582689584"></a><p>
      <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> is the traditional MySQL server process.
      To be used with NDB Cluster, <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> needs to be
      built with support for the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>
      storage engine, as it is in the precompiled binaries available
      from <a class="ulink" href="https://dev.mysql.com/downloads/" target="_top">https://dev.mysql.com/downloads/</a>. If you build MySQL from
      source, you must invoke <span class="command"><strong>CMake</strong></span> with the
      <a class="link" href="installing.html#option_cmake_with_ndbcluster"><code class="option">-DWITH_NDBCLUSTER=1</code></a> option to
      include support for <code class="literal">NDB</code>.
    </p><p>
      For more information about compiling NDB Cluster from source, see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-install-linux-source" title="22.2.2.4 Building NDB Cluster from Source on Linux">Section 22.2.2.4, “Building NDB Cluster from Source on Linux”</a>, and
      <a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows-source" title="22.2.3.2 Compiling and Installing NDB Cluster from Source on Windows">Section 22.2.3.2, “Compiling and Installing NDB Cluster from Source on Windows”</a>.
    </p><p>
      (For information about <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> options and
      variables, in addition to those discussed in this section, which
      are relevant to NDB Cluster, see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-options-variables" title="22.3.3.9 MySQL Server Options and Variables for NDB Cluster">Section 22.3.3.9, “MySQL Server Options and Variables for NDB Cluster”</a>.)
    </p><p>
      If the <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> binary has been built with
      Cluster support, the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a>
      storage engine is still disabled by default. You can use either of
      two possible options to enable this engine:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Use <a class="link" href="mysql-cluster.html#option_mysqld_ndbcluster"><code class="option">--ndbcluster</code></a> as a startup
          option on the command line when starting
          <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>.
        </p></li><li class="listitem"><p>
          Insert a line containing <code class="literal">ndbcluster</code> in the
          <code class="literal">[mysqld]</code> section of your
          <code class="filename">my.cnf</code> file.
</p></li></ul>
</div>
<p>
      An easy way to verify that your server is running with the
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> storage engine enabled is
      to issue the <a class="link" href="sql-syntax.html#show-engines" title="13.7.6.16 SHOW ENGINES Syntax"><code class="literal">SHOW ENGINES</code></a> statement
      in the MySQL Monitor (<a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>). You should see
      the value <code class="literal">YES</code> as the <code class="literal">Support</code>
      value in the row for <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a>. If
      you see <code class="literal">NO</code> in this row or if there is no such
      row displayed in the output, you are not running an
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>-enabled version of MySQL. If you
      see <code class="literal">DISABLED</code> in this row, you need to enable it
      in either one of the two ways just described.
    </p><a class="indexterm" name="idm140091582657168"></a><a class="indexterm" name="idm140091582655680"></a><a class="indexterm" name="idm140091582654608"></a><p>
      To read cluster configuration data, the MySQL server requires at a
      minimum three pieces of information:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          The MySQL server's own cluster node ID
        </p></li><li class="listitem"><p>
          The host name or IP address for the management server (MGM
          node)
        </p></li><li class="listitem"><p>
          The number of the TCP/IP port on which it can connect to the
          management server
</p></li></ul>
</div>
<p>
      Node IDs can be allocated dynamically, so it is not strictly
      necessary to specify them explicitly.
    </p><p>
      The <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> parameter
      <code class="literal">ndb-connectstring</code> is used to specify the
      connection string either on the command line when starting
      <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> or in <code class="filename">my.cnf</code>. The
      connection string contains the host name or IP address where the
      management server can be found, as well as the TCP/IP port it
      uses.
    </p><p>
      In the following example, <code class="literal">ndb_mgmd.mysql.com</code> is
      the host where the management server resides, and the management
      server listens for cluster messages on port 1186:
    </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>mysqld --ndbcluster --ndb-connectstring=ndb_mgmd.mysql.com:1186</code></strong>
</pre><p>
      See <a class="xref" href="mysql-cluster.html#mysql-cluster-connection-strings" title="22.3.3.3 NDB Cluster Connection Strings">Section 22.3.3.3, “NDB Cluster Connection Strings”</a>, for more
      information on connection strings.
    </p><p>
      Given this information, the MySQL server will be a full
      participant in the cluster. (We often refer to a
      <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> process running in this manner as an SQL
      node.) It will be fully aware of all cluster data nodes as well as
      their status, and will establish connections to all data nodes. In
      this case, it is able to use any data node as a transaction
      coordinator and to read and update node data.
    </p><p>
      You can see in the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client whether a MySQL
      server is connected to the cluster using <a class="link" href="sql-syntax.html#show-processlist" title="13.7.6.29 SHOW PROCESSLIST Syntax"><code class="literal">SHOW
      PROCESSLIST</code></a>. If the MySQL server is connected to the
      cluster, and you have the <a class="link" href="security.html#priv_process"><code class="literal">PROCESS</code></a>
      privilege, then the first row of the output is as shown here:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; SHOW PROCESSLIST \G
*************************** 1. row ***************************
     Id: 1
   User: system user
   Host:
     db:
Command: Daemon
   Time: 1
  State: Waiting for event from ndbcluster
   Info: NULL
</pre>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
        To participate in an NDB Cluster, the <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>
        process must be started with <span class="emphasis"><em>both</em></span> the
        options <a class="link" href="mysql-cluster.html#option_mysqld_ndbcluster"><code class="option">--ndbcluster</code></a> and
        <a class="link" href="mysql-cluster.html#option_mysqld_ndb-connectstring"><code class="option">--ndb-connectstring</code></a> (or their
        equivalents in <code class="filename">my.cnf</code>). If
        <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> is started with only the
        <a class="link" href="mysql-cluster.html#option_mysqld_ndbcluster"><code class="option">--ndbcluster</code></a> option, or if it is
        unable to contact the cluster, it is not possible to work with
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables, <span class="emphasis"><em>nor is it
        possible to create any new tables regardless of storage
        engine</em></span>. The latter restriction is a safety measure
        intended to prevent the creation of tables having the same names
        as <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables while the SQL node is
        not connected to the cluster. If you wish to create tables using
        a different storage engine while the <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>
        process is not participating in an NDB Cluster, you must restart
        the server <span class="emphasis"><em>without</em></span> the
        <a class="link" href="mysql-cluster.html#option_mysqld_ndbcluster"><code class="option">--ndbcluster</code></a> option.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-rolling-restart"></a>22.5.5 Performing a Rolling Restart of an NDB Cluster</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091582617904"></a><a class="indexterm" name="idm140091582616416"></a><a class="indexterm" name="idm140091582615312"></a><a class="indexterm" name="idm140091582613824"></a><a class="indexterm" name="idm140091582612336"></a><p>
      This section discusses how to perform a
      <span class="firstterm">rolling restart</span> of an NDB
      Cluster installation, so called because it involves stopping and
      starting (or restarting) each node in turn, so that the cluster
      itself remains operational. This is often done as part of a
      <span class="firstterm">rolling upgrade</span> or
      <span class="firstterm">rolling downgrade</span>, where
      high availability of the cluster is mandatory and no downtime of
      the cluster as a whole is permissible. Where we refer to upgrades,
      the information provided here also generally applies to downgrades
      as well.
    </p><p>
      There are a number of reasons why a rolling restart might be
      desirable. These are described in the next few paragraphs.
    </p><p><b>Configuration change. </b><a class="indexterm" name="idm140091582607040"></a>
        To make a change in the cluster's configuration, such as
        adding an SQL node to the cluster, or setting a configuration
        parameter to a new value.
      </p><p><b>NDB Cluster software upgrade or downgrade. </b>
        To upgrade the cluster to a newer version of the NDB Cluster
        software (or to downgrade it to an older version). This is
        usually referred to as a <span class="quote">“<span class="quote">rolling upgrade</span>”</span> (or
        <span class="quote">“<span class="quote">rolling downgrade</span>”</span>, when reverting to an older
        version of NDB Cluster).
      </p><p><b>Change on node host. </b>
        To make changes in the hardware or operating system on which one
        or more NDB Cluster node processes are running.
      </p><p><b>System reset (cluster reset). </b><a class="indexterm" name="idm140091582600464"></a>
        To reset the cluster because it has reached an undesirable
        state. In such cases it is often desirable to reload the data
        and metadata of one or more data nodes. This can be done in any
        of three ways:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Start each data node process (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> or
          possibly <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>) with the
          <a class="link" href="mysql-cluster.html#option_ndbd_initial"><code class="option">--initial</code></a> option, which forces
          the data node to clear its file system and to reload all NDB
          Cluster data and metadata from the other data nodes.
        </p></li><li class="listitem"><p>
          Create a backup using the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> client
          <a class="link" href="mysql-cluster.html#mysql-cluster-backup-using-management-client" title="22.5.3.2 Using The NDB Cluster Management Client to Create a Backup"><code class="literal">START BACKUP</code></a> command prior
          to performing the restart. Following the upgrade, restore the
          node or nodes using <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>.
        </p><p>
          See <a class="xref" href="mysql-cluster.html#mysql-cluster-backup" title="22.5.3 Online Backup of NDB Cluster">Section 22.5.3, “Online Backup of NDB Cluster”</a>, and
          <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup">Section 22.4.23, “<span class="command"><strong>ndb_restore</strong></span> — Restore an NDB Cluster Backup”</a>, for more
          information.
        </p></li><li class="listitem"><p>
          Use <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a> to create a backup prior to
          the upgrade; afterward, restore the dump using
          <a class="link" href="sql-syntax.html#load-data" title="13.2.7 LOAD DATA Syntax"><code class="literal">LOAD DATA</code></a>.
</p></li></ul>
</div>
<p><b>Resource Recovery. </b><a class="indexterm" name="idm140091582582784"></a>
        To free memory previously allocated to a table by successive
        <a class="link" href="sql-syntax.html#insert" title="13.2.6 INSERT Syntax"><code class="literal">INSERT</code></a> and
        <a class="link" href="sql-syntax.html#delete" title="13.2.2 DELETE Syntax"><code class="literal">DELETE</code></a> operations, for re-use by
        other NDB Cluster tables.
      </p><p>
      The process for performing a rolling restart may be generalized as
      follows:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
          Stop all cluster management nodes (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>
          processes), reconfigure them, then restart them. (See
          <a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart-multiple-ndb-mgmd" title="Rolling restarts with multiple management servers">Rolling restarts with multiple management servers</a>.)
        </p></li><li class="listitem"><p>
          Stop, reconfigure, then restart each cluster data node
          (<a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> process) in turn.
        </p><p>
          Some node configuration parameters can be updated by issuing
          <a class="link" href="mysql-cluster.html#ndbclient-restart"><code class="literal">RESTART</code></a> for each of the
          data nodes in the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> client following
          the previous step; others require that the data node be
          stopped completely using a shell command (such as
          <a class="link" href="sql-syntax.html#kill" title="13.7.7.4 KILL Syntax"><span class="command"><strong>kill</strong></span></a> on most Unix systems) or the
          management client <a class="link" href="mysql-cluster.html#ndbclient-stop"><code class="literal">STOP</code></a>
          command, then started again from a system shell by invoking
          the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> or <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>
          executable as appropriate.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
            On Windows, you can also use <span class="command"><strong>SC STOP</strong></span> and
            <span class="command"><strong>SC START</strong></span> commands, <code class="literal">NET
            STOP</code> and <code class="literal">NET START</code> commands, or
            the Windows Service Manager to stop and start nodes which
            have been installed as Windows services (see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows-service" title="22.2.3.4 Installing NDB Cluster Processes as Windows Services">Section 22.2.3.4, “Installing NDB Cluster Processes as Windows Services”</a>).
</p>
</div>
<p>
          The type of restart required is indicated in the documentation
          for each node configuration parameter. See
          <a class="xref" href="mysql-cluster.html#mysql-cluster-config-file" title="22.3.3 NDB Cluster Configuration Files">Section 22.3.3, “NDB Cluster Configuration Files”</a>.
        </p></li><li class="listitem"><p>
          Stop, reconfigure, then restart each cluster SQL node
          (<a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> process) in turn.
</p></li></ol>
</div>
<a class="indexterm" name="idm140091582555312"></a><p>
      NDB Cluster supports a somewhat flexible order for upgrading
      nodes. When upgrading an NDB Cluster, you may upgrade API nodes
      (including SQL nodes) before upgrading the management nodes, data
      nodes, or both. In other words, you are permitted to upgrade the
      API and SQL nodes in any order. This is subject to the following
      provisions:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          This functionality is intended for use as part of an online
          upgrade only. A mix of node binaries from different NDB
          Cluster releases is neither intended nor supported for
          continuous, long-term use in a production setting.
        </p></li><li class="listitem"><p>
          All management nodes must be upgraded before any data nodes
          are upgraded. This remains true regardless of the order in
          which you upgrade the cluster's API and SQL nodes.
        </p></li><li class="listitem"><p>
          Features specific to the <span class="quote">“<span class="quote">new</span>”</span> version must not
          be used until all management nodes and data nodes have been
          upgraded.
        </p><p>
          This also applies to any MySQL Server version change that may
          apply, in addition to the NDB engine version change, so do not
          forget to take this into account when planning the upgrade.
          (This is true for online upgrades of NDB Cluster in general.)
</p></li></ul>
</div>
<p>
      See also Bug #48528 and Bug #49163.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        It is not possible for any API node to perform schema operations
        (such as data definition statements) during a node restart.
</p>
</div>
<p><a name="mysql-cluster-rolling-restart-multiple-ndb-mgmd"></a><b>Rolling restarts with multiple management servers. </b>
        <a class="indexterm" name="idm140091582545728"></a>

        <a class="indexterm" name="idm140091582544208"></a>

        When performing a rolling restart of an NDB Cluster with
        multiple management nodes, you should keep in mind that
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> checks to see if any other
        management node is running, and, if so, tries to use that
        node's configuration data. To keep this from occurring, and
        to force <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> to reread its configuration
        file, perform the following steps:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
          Stop all NDB Cluster <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> processes.
        </p></li><li class="listitem"><p>
          Update all <code class="filename">config.ini</code> files.
        </p></li><li class="listitem"><p>
          Start a single <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> with
          <a class="link" href="mysql-cluster.html#option_ndb_mgmd_reload"><code class="option">--reload</code></a>,
          <a class="link" href="mysql-cluster.html#option_ndb_mgmd_initial"><code class="option">--initial</code></a>, or both options as
          desired.
        </p></li><li class="listitem"><p>
          If you started the first <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> with the
          <a class="link" href="mysql-cluster.html#option_ndb_mgmd_initial"><code class="option">--initial</code></a> option, you must
          also start any remaining <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> processes
          using <code class="option">--initial</code>.
        </p><p>
          Regardless of any other options used when starting the first
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>, you should not start any
          remaining <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a> processes after the
          first one using <a class="link" href="mysql-cluster.html#option_ndb_mgmd_reload"><code class="option">--reload</code></a>.
        </p></li><li class="listitem"><p>
          Complete the rolling restarts of the data nodes and API nodes
          as normal.
</p></li></ol>
</div>
<p>
      When performing a rolling restart to update the cluster's
      configuration, you can use the
      <code class="literal">config_generation</code> column of the
      <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-nodes" title="22.5.10.28 The ndbinfo nodes Table"><code class="literal">ndbinfo.nodes</code></a> table to keep
      track of which data nodes have been successfully restarted with
      the new configuration. See
      <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbinfo-nodes" title="22.5.10.28 The ndbinfo nodes Table">Section 22.5.10.28, “The ndbinfo nodes Table”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-event-reports"></a>22.5.6 Event Reports Generated in NDB Cluster</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-logging-management-commands">22.5.6.1 NDB Cluster Logging Management Commands</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-log-events">22.5.6.2 NDB Cluster Log Events</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-log-statistics">22.5.6.3 Using CLUSTERLOG STATISTICS in the NDB Cluster Management Client</a></span></dt></dl>
</div>
<a class="indexterm" name="idm140091582516720"></a><a class="indexterm" name="idm140091582515232"></a><a class="indexterm" name="idm140091582514144"></a><a class="indexterm" name="idm140091582513072"></a><a class="indexterm" name="idm140091582512000"></a><a class="indexterm" name="idm140091582510512"></a><p>
      In this section, we discuss the types of event logs provided by
      NDB Cluster, and the types of events that are logged.
    </p><p>
      NDB Cluster provides two types of event log:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          The <span class="firstterm">cluster log</span>, which
          includes events generated by all cluster nodes. The cluster
          log is the log recommended for most uses because it provides
          logging information for an entire cluster in a single
          location.
        </p><p>
          By default, the cluster log is saved to a file named
          <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_cluster.log</code>,
          (where <em class="replaceable"><code>node_id</code></em> is the node ID of
          the management server) in the management server's
          <a class="link" href="mysql-cluster.html#ndbparam-mgmd-datadir"><code class="literal">DataDir</code></a>.
        </p><p>
          Cluster logging information can also be sent to
          <code class="literal">stdout</code> or a <code class="literal">syslog</code>
          facility in addition to or instead of being saved to a file,
          as determined by the values set for the
          <a class="link" href="mysql-cluster.html#ndbparam-mgmd-datadir"><code class="literal">DataDir</code></a> and
          <a class="link" href="mysql-cluster.html#ndbparam-mgmd-logdestination"><code class="literal">LogDestination</code></a>
          configuration parameters. See
          <a class="xref" href="mysql-cluster.html#mysql-cluster-mgm-definition" title="22.3.3.5 Defining an NDB Cluster Management Server">Section 22.3.3.5, “Defining an NDB Cluster Management Server”</a>, for more
          information about these parameters.
        </p></li><li class="listitem"><p>
          <span class="firstterm">Node logs</span> are local to
          each node.
        </p><p>
          Output generated by node event logging is written to the file
          <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_out.log</code>
          (where <em class="replaceable"><code>node_id</code></em> is the node's node
          ID) in the node's
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datadir"><code class="literal">DataDir</code></a>. Node event
          logs are generated for both management nodes and data nodes.
        </p><p>
          Node logs are intended to be used only during application
          development, or for debugging application code.
</p></li></ul>
</div>
<p>
      Both types of event logs can be set to log different subsets of
      events.
    </p><p>
      Each reportable event can be distinguished according to three
      different criteria:
</p><a class="indexterm" name="idm140091582490704"></a><a class="indexterm" name="idm140091582489216"></a>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <span class="emphasis"><em>Category</em></span>: This can be any one of the
          following values: <code class="literal">STARTUP</code>,
          <code class="literal">SHUTDOWN</code>, <code class="literal">STATISTICS</code>,
          <code class="literal">CHECKPOINT</code>, <code class="literal">NODERESTART</code>,
          <code class="literal">CONNECTION</code>, <code class="literal">ERROR</code>, or
          <code class="literal">INFO</code>.
        </p></li><li class="listitem"><p>
          <span class="emphasis"><em>Priority</em></span>: This is represented by one of
          the numbers from 0 to 15 inclusive, where 0 indicates
          <span class="quote">“<span class="quote">most important</span>”</span> and 15 <span class="quote">“<span class="quote">least
          important.</span>”</span>
        </p></li><li class="listitem"><p>
          <span class="emphasis"><em>Severity Level</em></span>: This can be any one of
          the following values: <code class="literal">ALERT</code>,
          <code class="literal">CRITICAL</code>, <code class="literal">ERROR</code>,
          <code class="literal">WARNING</code>, <code class="literal">INFO</code>, or
          <code class="literal">DEBUG</code>.
</p></li></ul>
</div>
<p>
      Both the cluster log and the node log can be filtered on these
      properties.
    </p><p>
      The format used in the cluster log is as shown here:
    </p><pre data-lang="simple" class="programlisting">
2007-01-26 19:35:55 [MgmSrvr] INFO     -- Node 1: Data usage is 2%(60 32K pages of total 2560)
2007-01-26 19:35:55 [MgmSrvr] INFO     -- Node 1: Index usage is 1%(24 8K pages of total 2336)
2007-01-26 19:35:55 [MgmSrvr] INFO     -- Node 1: Resource 0 min: 0 max: 639 curr: 0
2007-01-26 19:35:55 [MgmSrvr] INFO     -- Node 2: Data usage is 2%(76 32K pages of total 2560)
2007-01-26 19:35:55 [MgmSrvr] INFO     -- Node 2: Index usage is 1%(24 8K pages of total 2336)
2007-01-26 19:35:55 [MgmSrvr] INFO     -- Node 2: Resource 0 min: 0 max: 639 curr: 0
2007-01-26 19:35:55 [MgmSrvr] INFO     -- Node 3: Data usage is 2%(58 32K pages of total 2560)
2007-01-26 19:35:55 [MgmSrvr] INFO     -- Node 3: Index usage is 1%(25 8K pages of total 2336)
2007-01-26 19:35:55 [MgmSrvr] INFO     -- Node 3: Resource 0 min: 0 max: 639 curr: 0
2007-01-26 19:35:55 [MgmSrvr] INFO     -- Node 4: Data usage is 2%(74 32K pages of total 2560)
2007-01-26 19:35:55 [MgmSrvr] INFO     -- Node 4: Index usage is 1%(25 8K pages of total 2336)
2007-01-26 19:35:55 [MgmSrvr] INFO     -- Node 4: Resource 0 min: 0 max: 639 curr: 0
2007-01-26 19:39:42 [MgmSrvr] INFO     -- Node 4: Node 9 Connected
2007-01-26 19:39:42 [MgmSrvr] INFO     -- Node 1: Node 9 Connected
2007-01-26 19:39:42 [MgmSrvr] INFO     -- Node 1: Node 9: API 8.0.17-ndb-8.0.17
2007-01-26 19:39:42 [MgmSrvr] INFO     -- Node 2: Node 9 Connected
2007-01-26 19:39:42 [MgmSrvr] INFO     -- Node 2: Node 9: API 8.0.17-ndb-8.0.17
2007-01-26 19:39:42 [MgmSrvr] INFO     -- Node 3: Node 9 Connected
2007-01-26 19:39:42 [MgmSrvr] INFO     -- Node 3: Node 9: API 8.0.17-ndb-8.0.17
2007-01-26 19:39:42 [MgmSrvr] INFO     -- Node 4: Node 9: API 8.0.17-ndb-8.0.17
2007-01-26 19:59:22 [MgmSrvr] ALERT    -- Node 2: Node 7 Disconnected
2007-01-26 19:59:22 [MgmSrvr] ALERT    -- Node 2: Node 7 Disconnected
</pre><p>
      Each line in the cluster log contains the following information:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          A timestamp in
          <code class="literal"><em class="replaceable"><code>YYYY</code></em>-<em class="replaceable"><code>MM</code></em>-<em class="replaceable"><code>DD</code></em>
          <em class="replaceable"><code>HH</code></em>:<em class="replaceable"><code>MM</code></em>:<em class="replaceable"><code>SS</code></em></code>
          format.
        </p></li><li class="listitem"><p>
          The type of node which is performing the logging. In the
          cluster log, this is always <code class="literal">[MgmSrvr]</code>.
        </p></li><li class="listitem"><p>
          The severity of the event.
        </p></li><li class="listitem"><p>
          The ID of the node reporting the event.
        </p></li><li class="listitem"><p>
          A description of the event. The most common types of events to
          appear in the log are connections and disconnections between
          different nodes in the cluster, and when checkpoints occur. In
          some cases, the description may contain status information.
</p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-logging-management-commands"></a>22.5.6.1 NDB Cluster Logging Management Commands</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091582459200"></a><a class="indexterm" name="idm140091582457712"></a><a class="indexterm" name="idm140091582456624"></a><a class="indexterm" name="idm140091582455552"></a><a class="indexterm" name="idm140091582454064"></a><a class="indexterm" name="idm140091582452976"></a><p>
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> supports a number of management
        commands related to the cluster log and node logs. In the
        listing that follows, <em class="replaceable"><code>node_id</code></em> denotes
        either a storage node ID or the keyword <code class="literal">ALL</code>,
        which indicates that the command should be applied to all of the
        cluster's data nodes.
</p><a class="indexterm" name="idm140091582448400"></a><a class="indexterm" name="idm140091582447360"></a>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">CLUSTERLOG ON</code>
          </p><p>
            Turns the cluster log on.
          </p></li><li class="listitem"><p>
            <code class="literal">CLUSTERLOG OFF</code>
          </p><p>
            Turns the cluster log off.
          </p></li><li class="listitem"><p>
            <code class="literal">CLUSTERLOG INFO</code>
          </p><p>
            Provides information about cluster log settings.
          </p></li><li class="listitem"><p>
            <code class="literal"><em class="replaceable"><code>node_id</code></em> CLUSTERLOG
            <em class="replaceable"><code>category</code></em>=<em class="replaceable"><code>threshold</code></em></code>
          </p><p>
            Logs <em class="replaceable"><code>category</code></em> events with
            priority less than or equal to
            <em class="replaceable"><code>threshold</code></em> in the cluster log.
          </p></li><li class="listitem"><p>
            <code class="literal">CLUSTERLOG FILTER
            <em class="replaceable"><code>severity_level</code></em></code>
          </p><p>
            Toggles cluster logging of events of the specified
            <em class="replaceable"><code>severity_level</code></em>.
</p></li></ul>
</div>
<p>
        The following table describes the default setting (for all data
        nodes) of the cluster log category threshold. If an event has a
        priority with a value lower than or equal to the priority
        threshold, it is reported in the cluster log.
</p><a class="indexterm" name="idm140091582432608"></a><a class="indexterm" name="idm140091582431104"></a>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          Events are reported per data node, and that the threshold can
          be set to different values on different nodes.
</p>
</div>

<div class="table">
<a name="idm140091582429088"></a><p class="title"><b>Table 22.361 Cluster log categories, with default threshold setting</b></p>
<div class="table-contents">
<table><col width="30%"><col width="70%"><thead><tr>
            <th scope="col">Category</th>
            <th scope="col">Default threshold (All data nodes)</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">STARTUP</code></td>
            <td><span class="bold"><strong>7</strong></span></td>
          </tr><tr>
            <td scope="row"><code class="literal">SHUTDOWN</code></td>
            <td><span class="bold"><strong>7</strong></span></td>
          </tr><tr>
            <td scope="row"><code class="literal">STATISTICS</code></td>
            <td><span class="bold"><strong>7</strong></span></td>
          </tr><tr>
            <td scope="row"><code class="literal">CHECKPOINT</code></td>
            <td><span class="bold"><strong>7</strong></span></td>
          </tr><tr>
            <td scope="row"><code class="literal">NODERESTART</code></td>
            <td><span class="bold"><strong>7</strong></span></td>
          </tr><tr>
            <td scope="row"><code class="literal">CONNECTION</code></td>
            <td><span class="bold"><strong>7</strong></span></td>
          </tr><tr>
            <td scope="row"><code class="literal">ERROR</code></td>
            <td><span class="bold"><strong>15</strong></span></td>
          </tr><tr>
            <td scope="row"><code class="literal">INFO</code></td>
            <td><span class="bold"><strong>7</strong></span></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        The <code class="literal">STATISTICS</code> category can provide a great
        deal of useful data. See
        <a class="xref" href="mysql-cluster.html#mysql-cluster-log-statistics" title="22.5.6.3 Using CLUSTERLOG STATISTICS in the NDB Cluster Management Client">Section 22.5.6.3, “Using CLUSTERLOG STATISTICS in the NDB Cluster Management Client”</a>, for more
        information.
      </p><p>
        Thresholds are used to filter events within each category. For
        example, a <code class="literal">STARTUP</code> event with a priority of 3
        is not logged unless the threshold for
        <code class="literal">STARTUP</code> is set to 3 or higher. Only events
        with priority 3 or lower are sent if the threshold is 3.
      </p><a class="indexterm" name="idm140091582393696"></a><a class="indexterm" name="idm140091582392208"></a><p>
        The following table shows the event severity levels.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          These correspond to Unix <code class="literal">syslog</code> levels,
          except for <code class="literal">LOG_EMERG</code> and
          <code class="literal">LOG_NOTICE</code>, which are not used or mapped.
</p>
</div>

<div class="table">
<a name="idm140091582387632"></a><p class="title"><b>Table 22.362 Event severity levels</b></p>
<div class="table-contents">
<table><col width="20%"><col width="20%"><col width="60%"><thead><tr>
            <th scope="col">Severity Level Value</th>
            <th scope="col">Severity</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><span class="bold"><strong>1</strong></span></td>
            <td><code class="literal">ALERT</code></td>
            <td>A condition that should be corrected immediately, such as a corrupted
              system database</td>
          </tr><tr>
            <td scope="row"><span class="bold"><strong>2</strong></span></td>
            <td><code class="literal">CRITICAL</code></td>
            <td>Critical conditions, such as device errors or insufficient resources</td>
          </tr><tr>
            <td scope="row"><span class="bold"><strong>3</strong></span></td>
            <td><code class="literal">ERROR</code></td>
            <td>Conditions that should be corrected, such as configuration errors</td>
          </tr><tr>
            <td scope="row"><span class="bold"><strong>4</strong></span></td>
            <td><code class="literal">WARNING</code></td>
            <td>Conditions that are not errors, but that might require special handling</td>
          </tr><tr>
            <td scope="row"><span class="bold"><strong>5</strong></span></td>
            <td><code class="literal">INFO</code></td>
            <td>Informational messages</td>
          </tr><tr>
            <td scope="row"><span class="bold"><strong>6</strong></span></td>
            <td><code class="literal">DEBUG</code></td>
            <td>Debugging messages used for <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a>
              development</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        Event severity levels can be turned on or off (using
        <code class="literal">CLUSTERLOG FILTER</code>—see above). If a
        severity level is turned on, then all events with a priority
        less than or equal to the category thresholds are logged. If the
        severity level is turned off then no events belonging to that
        severity level are logged.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
          Cluster log levels are set on a per
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="22.4.4 ndb_mgmd — The NDB Cluster Management Server Daemon"><span class="command"><strong>ndb_mgmd</strong></span></a>, per subscriber basis. This means
          that, in an NDB Cluster with multiple management servers,
          using a <code class="literal">CLUSTERLOG</code> command in an instance
          of <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> connected to one management
          server affects only logs generated by that management server
          but not by any of the others. This also means that, should one
          of the management servers be restarted, only logs generated by
          that management server are affected by the resetting of log
          levels caused by the restart.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-log-events"></a>22.5.6.2 NDB Cluster Log Events</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091582346832"></a><a class="indexterm" name="idm140091582345344"></a><p>
        An event report reported in the event logs has the following
        format:
      </p><pre data-lang="simple" class="programlisting">
<em class="replaceable"><code>datetime</code></em> [<em class="replaceable"><code>string</code></em>] <em class="replaceable"><code>severity</code></em> -- <em class="replaceable"><code>message</code></em>
</pre><p>
        For example:
      </p><pre data-lang="simple" class="programlisting">
09:19:30 2005-07-24 [NDB] INFO -- Node 4 Start phase 4 completed
</pre><p>
        This section discusses all reportable events, ordered by
        category and severity level within each category.
      </p><p>
        In the event descriptions, GCP and LCP mean <span class="quote">“<span class="quote">Global
        Checkpoint</span>”</span> and <span class="quote">“<span class="quote">Local Checkpoint</span>”</span>,
        respectively.
</p><a class="indexterm" name="idm140091582337840"></a><a class="indexterm" name="idm140091582336352"></a><a class="indexterm" name="idm140091582334352"></a><a class="indexterm" name="idm140091582332864"></a>
<h5><a name="idm140091582331776"></a>CONNECTION Events</h5>
<p>
        These events are associated with connections between Cluster
        nodes.
</p>
<div class="table">
<a name="idm140091582330592"></a><p class="title"><b>Table 22.363 Events associated with connections between
cluster nodes</b></p>
<div class="table-contents">
<table><col width="35%"><col width="10%"><col width="10%"><col width="45%"><thead><tr>
            <th scope="col">Event</th>
            <th scope="col">Priority</th>
            <th scope="col">Severity Level</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">Connected</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
            <td>Data nodes connected</td>
          </tr><tr>
            <td scope="row"><code class="literal">Disconnected</code></td>
            <td>8</td>
            <td><code class="literal">ALERT</code></td>
            <td>Data nodes disconnected</td>
          </tr><tr>
            <td scope="row"><code class="literal">CommunicationClosed</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
            <td>SQL node or data node connection closed</td>
          </tr><tr>
            <td scope="row"><code class="literal">CommunicationOpened</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
            <td>SQL node or data node connection open</td>
          </tr><tr>
            <td scope="row"><code class="literal">ConnectedApiVersion</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
            <td>Connection using API version</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<h5><a name="idm140091582296176"></a>CHECKPOINT Events</h5>
<a class="indexterm" name="idm140091582295488"></a><a class="indexterm" name="idm140091582294000"></a><p>
        The logging messages shown here are associated with checkpoints.
</p>
<div class="table">
<a name="idm140091582292432"></a><p class="title"><b>Table 22.364 Events associated with checkpoints</b></p>
<div class="table-contents">
<table><col width="35%"><col width="10%"><col width="10%"><col width="45%"><thead><tr>
            <th scope="col">Event</th>
            <th scope="col">Priority</th>
            <th scope="col">Severity Level</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">GlobalCheckpointStarted</code></td>
            <td>9</td>
            <td><code class="literal">INFO</code></td>
            <td>Start of GCP: REDO log is written to disk</td>
          </tr><tr>
            <td scope="row"><code class="literal">GlobalCheckpointCompleted</code></td>
            <td>10</td>
            <td><code class="literal">INFO</code></td>
            <td>GCP finished</td>
          </tr><tr>
            <td scope="row"><code class="literal">LocalCheckpointStarted</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>Start of LCP: data written to disk</td>
          </tr><tr>
            <td scope="row"><code class="literal">LocalCheckpointCompleted</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>LCP completed normally</td>
          </tr><tr>
            <td scope="row"><code class="literal">LCPStoppedInCalcKeepGci</code></td>
            <td>0</td>
            <td><code class="literal">ALERT</code></td>
            <td>LCP stopped</td>
          </tr><tr>
            <td scope="row"><code class="literal">LCPFragmentCompleted</code></td>
            <td>11</td>
            <td><code class="literal">INFO</code></td>
            <td>LCP on a fragment has been completed</td>
          </tr><tr>
            <td scope="row"><code class="literal">UndoLogBlocked</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>UNDO logging blocked; buffer near overflow</td>
          </tr><tr>
            <td scope="row"><code class="literal">RedoStatus</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>Redo status</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<h5><a name="idm140091582243040"></a>STARTUP Events</h5>
<a class="indexterm" name="idm140091582242352"></a><a class="indexterm" name="idm140091582240864"></a><p>
        The following events are generated in response to the startup of
        a node or of the cluster and of its success or failure. They
        also provide information relating to the progress of the startup
        process, including information concerning logging activities.
</p>
<div class="table">
<a name="idm140091582239088"></a><p class="title"><b>Table 22.365 Events relating to the startup of a node or cluster</b></p>
<div class="table-contents">
<table><col width="35%"><col width="10%"><col width="10%"><col width="45%"><thead><tr>
            <th scope="col">Event</th>
            <th scope="col">Priority</th>
            <th scope="col">Severity Level</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">NDBStartStarted</code></td>
            <td>1</td>
            <td><code class="literal">INFO</code></td>
            <td>Data node start phases initiated (all nodes starting)</td>
          </tr><tr>
            <td scope="row"><code class="literal">NDBStartCompleted</code></td>
            <td>1</td>
            <td><code class="literal">INFO</code></td>
            <td>Start phases completed, all data nodes</td>
          </tr><tr>
            <td scope="row"><code class="literal">STTORRYRecieved</code></td>
            <td>15</td>
            <td><code class="literal">INFO</code></td>
            <td>Blocks received after completion of restart</td>
          </tr><tr>
            <td scope="row"><code class="literal">StartPhaseCompleted</code></td>
            <td>4</td>
            <td><code class="literal">INFO</code></td>
            <td>Data node start phase <em class="replaceable"><code>X</code></em> completed</td>
          </tr><tr>
            <td scope="row"><code class="literal">CM_REGCONF</code></td>
            <td>3</td>
            <td><code class="literal">INFO</code></td>
            <td>Node has been successfully included into the cluster; shows the node,
              managing node, and dynamic ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">CM_REGREF</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
            <td>Node has been refused for inclusion in the cluster; cannot be included
              in cluster due to misconfiguration, inability to establish
              communication, or other problem</td>
          </tr><tr>
            <td scope="row"><code class="literal">FIND_NEIGHBOURS</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
            <td>Shows neighboring data nodes</td>
          </tr><tr>
            <td scope="row"><code class="literal">NDBStopStarted</code></td>
            <td>1</td>
            <td><code class="literal">INFO</code></td>
            <td>Data node shutdown initiated</td>
          </tr><tr>
            <td scope="row"><code class="literal">NDBStopCompleted</code></td>
            <td>1</td>
            <td><code class="literal">INFO</code></td>
            <td>Data node shutdown complete</td>
          </tr><tr>
            <td scope="row"><code class="literal">NDBStopForced</code></td>
            <td>1</td>
            <td><code class="literal">ALERT</code></td>
            <td>Forced shutdown of data node</td>
          </tr><tr>
            <td scope="row"><code class="literal">NDBStopAborted</code></td>
            <td>1</td>
            <td><code class="literal">INFO</code></td>
            <td>Unable to shut down data node normally</td>
          </tr><tr>
            <td scope="row"><code class="literal">StartREDOLog</code></td>
            <td>4</td>
            <td><code class="literal">INFO</code></td>
            <td>New redo log started; GCI keep <em class="replaceable"><code>X</code></em>, newest
              restorable GCI <em class="replaceable"><code>Y</code></em></td>
          </tr><tr>
            <td scope="row"><code class="literal">StartLog</code></td>
            <td>10</td>
            <td><code class="literal">INFO</code></td>
            <td>New log started; log part <em class="replaceable"><code>X</code></em>, start MB
              <em class="replaceable"><code>Y</code></em>, stop MB
              <em class="replaceable"><code>Z</code></em></td>
          </tr><tr>
            <td scope="row"><code class="literal">UNDORecordsExecuted</code></td>
            <td>15</td>
            <td><code class="literal">INFO</code></td>
            <td>Undo records executed</td>
          </tr><tr>
            <td scope="row"><code class="literal">StartReport</code></td>
            <td>4</td>
            <td><code class="literal">INFO</code></td>
            <td>Report started</td>
          </tr><tr>
            <td scope="row"><code class="literal">LogFileInitStatus</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>Log file initialization status</td>
          </tr><tr>
            <td scope="row"><code class="literal">LogFileInitCompStatus</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>Log file completion status</td>
          </tr><tr>
            <td scope="row"><code class="literal">StartReadLCP</code></td>
            <td>10</td>
            <td><code class="literal">INFO</code></td>
            <td>Start read for local checkpoint</td>
          </tr><tr>
            <td scope="row"><code class="literal">ReadLCPComplete</code></td>
            <td>10</td>
            <td><code class="literal">INFO</code></td>
            <td>Read for local checkpoint completed</td>
          </tr><tr>
            <td scope="row"><code class="literal">RunRedo</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
            <td>Running the redo log</td>
          </tr><tr>
            <td scope="row"><code class="literal">RebuildIndex</code></td>
            <td>10</td>
            <td><code class="literal">INFO</code></td>
            <td>Rebuilding indexes</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<h5><a name="idm140091582122368"></a>NODERESTART Events</h5>
<a class="indexterm" name="idm140091582121680"></a><a class="indexterm" name="idm140091582120192"></a><p>
        The following events are generated when restarting a node and
        relate to the success or failure of the node restart process.
</p>
<div class="table">
<a name="idm140091582118560"></a><p class="title"><b>Table 22.366 Events relating to restarting a node</b></p>
<div class="table-contents">
<table><col width="35%"><col width="10%"><col width="10%"><col width="45%"><thead><tr>
            <th scope="col">Event</th>
            <th scope="col">Priority</th>
            <th scope="col">Severity Level</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">NR_CopyDict</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>Completed copying of dictionary information</td>
          </tr><tr>
            <td scope="row"><code class="literal">NR_CopyDistr</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>Completed copying distribution information</td>
          </tr><tr>
            <td scope="row"><code class="literal">NR_CopyFragsStarted</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>Starting to copy fragments</td>
          </tr><tr>
            <td scope="row"><code class="literal">NR_CopyFragDone</code></td>
            <td>10</td>
            <td><code class="literal">INFO</code></td>
            <td>Completed copying a fragment</td>
          </tr><tr>
            <td scope="row"><code class="literal">NR_CopyFragsCompleted</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>Completed copying all fragments</td>
          </tr><tr>
            <td scope="row"><code class="literal">NodeFailCompleted</code></td>
            <td>8</td>
            <td><code class="literal">ALERT</code></td>
            <td>Node failure phase completed</td>
          </tr><tr>
            <td scope="row"><code class="literal">NODE_FAILREP</code></td>
            <td>8</td>
            <td><code class="literal">ALERT</code></td>
            <td>Reports that a node has failed</td>
          </tr><tr>
            <td scope="row"><code class="literal">ArbitState</code></td>
            <td>6</td>
            <td><code class="literal">INFO</code></td>
            <td>Report whether an arbitrator is found or not; there are seven different
possible outcomes when seeking an arbitrator, listed here:
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    Management server restarts arbitration thread
                    [state=<em class="replaceable"><code>X</code></em>]
                  </p></li><li class="listitem"><p>
                    Prepare arbitrator node <em class="replaceable"><code>X</code></em>
                    [ticket=<em class="replaceable"><code>Y</code></em>]
                  </p></li><li class="listitem"><p>
                    Receive arbitrator node <em class="replaceable"><code>X</code></em>
                    [ticket=<em class="replaceable"><code>Y</code></em>]
                  </p></li><li class="listitem"><p>
                    Started arbitrator node <em class="replaceable"><code>X</code></em>
                    [ticket=<em class="replaceable"><code>Y</code></em>]
                  </p></li><li class="listitem"><p>
                    Lost arbitrator node <em class="replaceable"><code>X</code></em> -
                    process failure [state=<em class="replaceable"><code>Y</code></em>]
                  </p></li><li class="listitem"><p>
                    Lost arbitrator node <em class="replaceable"><code>X</code></em> -
                    process exit [state=<em class="replaceable"><code>Y</code></em>]
                  </p></li><li class="listitem"><p>
                    Lost arbitrator node <em class="replaceable"><code>X</code></em>
                    &lt;error msg&gt;
                    [state=<em class="replaceable"><code>Y</code></em>]
</p></li></ul>
</div>
</td>
          </tr><tr>
            <td scope="row"><code class="literal">ArbitResult</code></td>
            <td>2</td>
            <td><code class="literal">ALERT</code></td>
            <td>Report arbitrator results; there are eight different possible results
for arbitration attempts, listed here:
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    Arbitration check failed: less than 1/2 nodes left
                  </p></li><li class="listitem"><p>
                    Arbitration check succeeded: node group majority
                  </p></li><li class="listitem"><p>
                    Arbitration check failed: missing node group
                  </p></li><li class="listitem"><p>
                    Network partitioning: arbitration required
                  </p></li><li class="listitem"><p>
                    Arbitration succeeded: affirmative response from
                    node <em class="replaceable"><code>X</code></em>
                  </p></li><li class="listitem"><p>
                    Arbitration failed: negative response from node
                    <em class="replaceable"><code>X</code></em>
                  </p></li><li class="listitem"><p>
                    Network partitioning: no arbitrator available
                  </p></li><li class="listitem"><p>
                    Network partitioning: no arbitrator configured
</p></li></ul>
</div>
</td>
          </tr><tr>
            <td scope="row"><code class="literal">GCP_TakeoverStarted</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>GCP takeover started</td>
          </tr><tr>
            <td scope="row"><code class="literal">GCP_TakeoverCompleted</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>GCP takeover complete</td>
          </tr><tr>
            <td scope="row"><code class="literal">LCP_TakeoverStarted</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>LCP takeover started</td>
          </tr><tr>
            <td scope="row"><code class="literal">LCP_TakeoverCompleted</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>LCP takeover complete (state = <em class="replaceable"><code>X</code></em>)</td>
          </tr><tr>
            <td scope="row"><code class="literal">ConnectCheckStarted</code></td>
            <td>6</td>
            <td><code class="literal">INFO</code></td>
            <td>Connection check started</td>
          </tr><tr>
            <td scope="row"><code class="literal">ConnectCheckCompleted</code></td>
            <td>6</td>
            <td><code class="literal">INFO</code></td>
            <td>Connection check completed</td>
          </tr><tr>
            <td scope="row"><code class="literal">NodeFailRejected</code></td>
            <td>6</td>
            <td><code class="literal">ALERT</code></td>
            <td>Node failure phase failed</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<h5><a name="idm140091582008880"></a>STATISTICS Events</h5>
<a class="indexterm" name="idm140091582008192"></a><a class="indexterm" name="idm140091582006704"></a><p>
        The following events are of a statistical nature. They provide
        information such as numbers of transactions and other
        operations, amount of data sent or received by individual nodes,
        and memory usage.
</p>
<div class="table">
<a name="idm140091582004976"></a><p class="title"><b>Table 22.367 Events of a statistical nature</b></p>
<div class="table-contents">
<table><col width="35%"><col width="10%"><col width="10%"><col width="45%"><thead><tr>
            <th scope="col">Event</th>
            <th scope="col">Priority</th>
            <th scope="col">Severity Level</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">TransReportCounters</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
            <td>Report transaction statistics, including numbers of transactions,
              commits, reads, simple reads, writes, concurrent
              operations, attribute information, and aborts</td>
          </tr><tr>
            <td scope="row"><code class="literal">OperationReportCounters</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
            <td>Number of operations</td>
          </tr><tr>
            <td scope="row"><code class="literal">TableCreated</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>Report number of tables created</td>
          </tr><tr>
            <td scope="row"><code class="literal">JobStatistic</code></td>
            <td>9</td>
            <td><code class="literal">INFO</code></td>
            <td>Mean internal job scheduling statistics</td>
          </tr><tr>
            <td scope="row"><code class="literal">ThreadConfigLoop</code></td>
            <td>9</td>
            <td><code class="literal">INFO</code></td>
            <td>Number of thread configuration loops</td>
          </tr><tr>
            <td scope="row"><code class="literal">SendBytesStatistic</code></td>
            <td>9</td>
            <td><code class="literal">INFO</code></td>
            <td>Mean number of bytes sent to node <em class="replaceable"><code>X</code></em></td>
          </tr><tr>
            <td scope="row"><code class="literal">ReceiveBytesStatistic</code></td>
            <td>9</td>
            <td><code class="literal">INFO</code></td>
            <td>Mean number of bytes received from node <em class="replaceable"><code>X</code></em></td>
          </tr><tr>
            <td scope="row"><code class="literal">MemoryUsage</code></td>
            <td>5</td>
            <td><code class="literal">INFO</code></td>
            <td>Data and index memory usage (80%, 90%, and 100%)</td>
          </tr><tr>
            <td scope="row"><code class="literal">MTSignalStatistics</code></td>
            <td>9</td>
            <td><code class="literal">INFO</code></td>
            <td>Multithreaded signals</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<h5><a name="idm140091581949920"></a>SCHEMA Events</h5>
<a class="indexterm" name="idm140091581949232"></a><a class="indexterm" name="idm140091581947744"></a><p>
        These events relate to NDB Cluster schema operations.
</p>
<div class="table">
<a name="idm140091581946192"></a><p class="title"><b>Table 22.368 Events relating to NDB Cluster schema operations</b></p>
<div class="table-contents">
<table><col width="35%"><col width="10%"><col width="10%"><col width="45%"><thead><tr>
            <th scope="col">Event</th>
            <th scope="col">Priority</th>
            <th scope="col">Severity Level</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">CreateSchemaObject</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
            <td>Schema objected created</td>
          </tr><tr>
            <td scope="row"><code class="literal">AlterSchemaObject</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
            <td>Schema object updated</td>
          </tr><tr>
            <td scope="row"><code class="literal">DropSchemaObject</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
            <td>Schema object dropped</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<h5><a name="idm140091581921792"></a>ERROR Events</h5>
<a class="indexterm" name="idm140091581921104"></a><a class="indexterm" name="idm140091581919616"></a><p>
        These events relate to Cluster errors and warnings. The presence
        of one or more of these generally indicates that a major
        malfunction or failure has occurred.
</p>
<div class="table">
<a name="idm140091581917936"></a><p class="title"><b>Table 22.369 Events relating to cluster errors and warnings</b></p>
<div class="table-contents">
<table><col width="35%"><col width="10%"><col width="10%"><col width="45%"><thead><tr>
            <th scope="col">Event</th>
            <th scope="col">Priority</th>
            <th scope="col">Severity Level</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">TransporterError</code></td>
            <td>2</td>
            <td><code class="literal">ERROR</code></td>
            <td>Transporter error</td>
          </tr><tr>
            <td scope="row"><code class="literal">TransporterWarning</code></td>
            <td>8</td>
            <td><code class="literal">WARNING</code></td>
            <td>Transporter warning</td>
          </tr><tr>
            <td scope="row"><code class="literal">MissedHeartbeat</code></td>
            <td>8</td>
            <td><code class="literal">WARNING</code></td>
            <td>Node <em class="replaceable"><code>X</code></em> missed heartbeat number
              <em class="replaceable"><code>Y</code></em></td>
          </tr><tr>
            <td scope="row"><code class="literal">DeadDueToHeartbeat</code></td>
            <td>8</td>
            <td><code class="literal">ALERT</code></td>
            <td>Node <em class="replaceable"><code>X</code></em> declared <span class="quote">“<span class="quote">dead</span>”</span> due to
              missed heartbeat</td>
          </tr><tr>
            <td scope="row"><code class="literal">WarningEvent</code></td>
            <td>2</td>
            <td><code class="literal">WARNING</code></td>
            <td>General warning event</td>
          </tr><tr>
            <td scope="row"><code class="literal">SubscriptionStatus</code></td>
            <td>4</td>
            <td><code class="literal">WARNING</code></td>
            <td>Change in subscription status</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<h5><a name="idm140091581877024"></a>INFO Events</h5>
<a class="indexterm" name="idm140091581876336"></a><a class="indexterm" name="idm140091581874848"></a><p>
        These events provide general information about the state of the
        cluster and activities associated with Cluster maintenance, such
        as logging and heartbeat transmission.
</p>
<div class="table">
<a name="idm140091581873168"></a><p class="title"><b>Table 22.370 Information events</b></p>
<div class="table-contents">
<table><col width="35%"><col width="10%"><col width="10%"><col width="45%"><thead><tr>
            <th scope="col">Event</th>
            <th scope="col">Priority</th>
            <th scope="col">Severity Level</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">SentHeartbeat</code></td>
            <td>12</td>
            <td><code class="literal">INFO</code></td>
            <td>Sent heartbeat</td>
          </tr><tr>
            <td scope="row"><code class="literal">CreateLogBytes</code></td>
            <td>11</td>
            <td><code class="literal">INFO</code></td>
            <td>Create log: Log part, log file, size in MB</td>
          </tr><tr>
            <td scope="row"><code class="literal">InfoEvent</code></td>
            <td>2</td>
            <td><code class="literal">INFO</code></td>
            <td>General informational event</td>
          </tr><tr>
            <td scope="row"><code class="literal">EventBufferStatus</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>Event buffer status</td>
          </tr><tr>
            <td scope="row"><code class="literal">EventBufferStatus2</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>Improved event buffer status information</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          <code class="literal">SentHeartbeat</code> events are available only if
          NDB Cluster was compiled with <code class="literal">VM_TRACE</code>
          enabled.
</p>
</div>
<h5><a name="idm140091581835680"></a>SINGLEUSER Events</h5>
<a class="indexterm" name="idm140091581834992"></a><a class="indexterm" name="idm140091581833504"></a><p>
        These events are associated with entering and exiting single
        user mode.
</p>
<div class="table">
<a name="idm140091581831920"></a><p class="title"><b>Table 22.371 Events relating to single user mode</b></p>
<div class="table-contents">
<table><col width="35%"><col width="10%"><col width="10%"><col width="45%"><thead><tr>
            <th scope="col">Event</th>
            <th scope="col">Priority</th>
            <th scope="col">Severity Level</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">SingleUser</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>Entering or exiting single user mode</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<h5><a name="idm140091581817472"></a>BACKUP Events</h5>
<a class="indexterm" name="idm140091581816784"></a><a class="indexterm" name="idm140091581815296"></a><p>
        These events provide information about backups being created or
        restored.
</p>
<div class="table">
<a name="idm140091581813712"></a><p class="title"><b>Table 22.372 Backup events</b></p>
<div class="table-contents">
<table><col width="35%"><col width="10%"><col width="10%"><col width="45%"><thead><tr>
            <th scope="col">Event</th>
            <th scope="col">Priority</th>
            <th scope="col">Severity Level</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">BackupStarted</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>Backup started</td>
          </tr><tr>
            <td scope="row"><code class="literal">BackupStatus</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>Backup status</td>
          </tr><tr>
            <td scope="row"><code class="literal">BackupCompleted</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>Backup completed</td>
          </tr><tr>
            <td scope="row"><code class="literal">BackupFailedToStart</code></td>
            <td>7</td>
            <td><code class="literal">ALERT</code></td>
            <td>Backup failed to start</td>
          </tr><tr>
            <td scope="row"><code class="literal">BackupAborted</code></td>
            <td>7</td>
            <td><code class="literal">ALERT</code></td>
            <td>Backup aborted by user</td>
          </tr><tr>
            <td scope="row"><code class="literal">RestoreStarted</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>Started restoring from backup</td>
          </tr><tr>
            <td scope="row"><code class="literal">RestoreMetaData</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>Restoring metadata</td>
          </tr><tr>
            <td scope="row"><code class="literal">RestoreData</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>Restoring data</td>
          </tr><tr>
            <td scope="row"><code class="literal">RestoreLog</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>Restoring log files</td>
          </tr><tr>
            <td scope="row"><code class="literal">RestoreCompleted</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>Completed restoring from backup</td>
          </tr><tr>
            <td scope="row"><code class="literal">SavedEvent</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>Event saved</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-log-statistics"></a>22.5.6.3 Using CLUSTERLOG STATISTICS in the NDB Cluster Management Client</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091581748208"></a><a class="indexterm" name="idm140091581746752"></a><a class="indexterm" name="idm140091581745648"></a><a class="indexterm" name="idm140091581744160"></a><a class="indexterm" name="idm140091581742672"></a><a class="indexterm" name="idm140091581741184"></a><p>
        The <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> management client's
        <a class="link" href="mysql-cluster.html#mysql-cluster-logging-management-commands" title="22.5.6.1 NDB Cluster Logging Management Commands"><code class="literal">CLUSTERLOG STATISTICS</code></a>
        command can provide a number of useful statistics in its output.
        Counters providing information about the state of the cluster
        are updated at 5-second reporting intervals by the transaction
        coordinator (TC) and the local query handler (LQH), and written
        to the cluster log.
      </p><p><b>Transaction coordinator statistics. </b>
          Each transaction has one transaction coordinator, which is
          chosen by one of the following methods:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            In a round-robin fashion
          </p></li><li class="listitem"><p>
            By communication proximity
          </p></li><li class="listitem"><p>
            By supplying a data placement hint when the transaction is
            started
</p></li></ul>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Note
</div>
<p>
          You can determine which TC selection method is used for
          transactions started from a given SQL node using the
          <a class="link" href="mysql-cluster.html#sysvar_ndb_optimized_node_selection"><code class="literal">ndb_optimized_node_selection</code></a>
          system variable.
</p>
</div>
<p>
        All operations within the same transaction use the same
        transaction coordinator, which reports the following statistics:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Trans count. </b>
              This is the number transactions started in the last
              interval using this TC as the transaction coordinator. Any
              of these transactions may have committed, have been
              aborted, or remain uncommitted at the end of the reporting
              interval.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              Transactions do not migrate between TCs.
</p>
</div>
</li><li class="listitem"><p><b>Commit count. </b>
              This is the number of transactions using this TC as the
              transaction coordinator that were committed in the last
              reporting interval. Because some transactions committed in
              this reporting interval may have started in a previous
              reporting interval, it is possible for <code class="literal">Commit
              count</code> to be greater than <code class="literal">Trans
              count</code>.
            </p></li><li class="listitem"><p><b>Read count. </b>
              This is the number of primary key read operations using
              this TC as the transaction coordinator that were started
              in the last reporting interval, including simple reads.
              This count also includes reads performed as part of unique
              index operations. A unique index read operation generates
              2 primary key read operations—1 for the hidden
              unique index table, and 1 for the table on which the read
              takes place.
            </p></li><li class="listitem"><p><b>Simple read count. </b>
              This is the number of simple read operations using this TC
              as the transaction coordinator that were started in the
              last reporting interval.
            </p></li><li class="listitem"><p><b>Write count. </b>
              This is the number of primary key write operations using
              this TC as the transaction coordinator that were started
              in the last reporting interval. This includes all inserts,
              updates, writes and deletes, as well as writes performed
              as part of unique index operations.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              A unique index update operation can generate multiple PK
              read and write operations on the index table and on the
              base table.
</p>
</div>
</li><li class="listitem"><p><b>AttrInfoCount. </b>
              This is the number of 32-bit data words received in the
              last reporting interval for primary key operations using
              this TC as the transaction coordinator. For reads, this is
              proportional to the number of columns requested. For
              inserts and updates, this is proportional to the number of
              columns written, and the size of their data. For delete
              operations, this is usually zero.
            </p><p>
            Unique index operations generate multiple PK operations and
            so increase this count. However, data words sent to describe
            the PK operation itself, and the key information sent, are
            <span class="emphasis"><em>not</em></span> counted here. Attribute information
            sent to describe columns to read for scans, or to describe
            ScanFilters, is also not counted in
            <code class="literal">AttrInfoCount</code>.
          </p></li><li class="listitem"><p><b>Concurrent Operations. </b>
              This is the number of primary key or scan operations using
              this TC as the transaction coordinator that were started
              during the last reporting interval but that were not
              completed. Operations increment this counter when they are
              started and decrement it when they are completed; this
              occurs after the transaction commits. Dirty reads and
              writes—as well as failed operations—decrement
              this counter.
            </p><p>
            The maximum value that <code class="literal">Concurrent
            Operations</code> can have is the maximum number of
            operations that a TC block can support; currently, this is
            <code class="literal">(2 * MaxNoOfConcurrentOperations) + 16 +
            MaxNoOfConcurrentTransactions</code>. (For more
            information about these configuration parameters, see the
            <em class="citetitle">Transaction Parameters</em> section of
            <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition" title="22.3.3.6 Defining NDB Cluster Data Nodes">Section 22.3.3.6, “Defining NDB Cluster Data Nodes”</a>.)
          </p></li><li class="listitem"><p><b>Abort count. </b>
              This is the number of transactions using this TC as the
              transaction coordinator that were aborted during the last
              reporting interval. Because some transactions that were
              aborted in the last reporting interval may have started in
              a previous reporting interval, <code class="literal">Abort
              count</code> can sometimes be greater than
              <code class="literal">Trans count</code>.
            </p></li><li class="listitem"><p><b>Scans. </b>
              This is the number of table scans using this TC as the
              transaction coordinator that were started during the last
              reporting interval. This does not include range scans
              (that is, ordered index scans).
            </p></li><li class="listitem"><p><b>Range scans. </b>
              This is the number of ordered index scans using this TC as
              the transaction coordinator that were started in the last
              reporting interval.
            </p></li><li class="listitem"><p><b>Local reads. </b>
              This is the number of primary-key read operations
              performed using a transaction coordinator on a node that
              also holds the primary replica of the record. This count
              can also be obtained from the
              <code class="literal">LOCAL_READS</code> counter in the
              <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-counters" title="22.5.10.10 The ndbinfo counters Table"><code class="literal">ndbinfo.counters</code></a> table.
            </p></li><li class="listitem"><p><b>Local writes. </b>
              This contains the number of primary-key read operations
              that were performed using a transaction coordinator on a
              node that also holds the primary replica of the record.
              This count can also be obtained from the
              <code class="literal">LOCAL_WRITES</code> counter in the
              <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-counters" title="22.5.10.10 The ndbinfo counters Table"><code class="literal">ndbinfo.counters</code></a> table.
</p></li></ul>
</div>
<p><b>Local query handler statistics (Operations). </b>
          There is 1 cluster event per local query handler block (that
          is, 1 per data node process). Operations are recorded in the
          LQH where the data they are operating on resides.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          A single transaction may operate on data stored in multiple
          LQH blocks.
</p>
</div>
<p>
        The <code class="literal">Operations</code> statistic provides the number
        of local operations performed by this LQH block in the last
        reporting interval, and includes all types of read and write
        operations (insert, update, write, and delete operations). This
        also includes operations used to replicate writes. For example,
        in a 2-replica cluster, the write to the primary replica is
        recorded in the primary LQH, and the write to the backup will be
        recorded in the backup LQH. Unique key operations may result in
        multiple local operations; however, this does
        <span class="emphasis"><em>not</em></span> include local operations generated as a
        result of a table scan or ordered index scan, which are not
        counted.
      </p><p><b>Process scheduler statistics. </b>
          <a class="indexterm" name="idm140091581684896"></a>

          In addition to the statistics reported by the transaction
          coordinator and local query handler, each
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> process has a scheduler which also
          provides useful metrics relating to the performance of an NDB
          Cluster. This scheduler runs in an infinite loop; during each
          loop the scheduler performs the following tasks:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Read any incoming messages from sockets into a job buffer.
          </p></li><li class="listitem"><p>
            Check whether there are any timed messages to be executed;
            if so, put these into the job buffer as well.
          </p></li><li class="listitem"><p>
            Execute (in a loop) any messages in the job buffer.
          </p></li><li class="listitem"><p>
            Send any distributed messages that were generated by
            executing the messages in the job buffer.
          </p></li><li class="listitem"><p>
            Wait for any new incoming messages.
</p></li></ol>
</div>
<p>
        Process scheduler statistics include the following:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Mean Loop Counter. </b>
              This is the number of loops executed in the third step
              from the preceding list. This statistic increases in size
              as the utilization of the TCP/IP buffer improves. You can
              use this to monitor changes in performance as you add new
              data node processes.
            </p></li><li class="listitem"><p><b>Mean send size and Mean receive size. </b>
              These statistics enable you to gauge the efficiency of,
              respectively writes and reads between nodes. The values
              are given in bytes. Higher values mean a lower cost per
              byte sent or received; the maximum value is 64K.
</p></li></ul>
</div>
<p>
        To cause all cluster log statistics to be logged, you can use
        the following command in the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>
        management client:
      </p><pre data-lang="ndbmgm" class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>ALL CLUSTERLOG STATISTICS=15</code></strong>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          Setting the threshold for <code class="literal">STATISTICS</code> to 15
          causes the cluster log to become very verbose, and to grow
          quite rapidly in size, in direct proportion to the number of
          cluster nodes and the amount of activity in the NDB Cluster.
</p>
</div>
<p>
        For more information about NDB Cluster management client
        commands relating to logging and reporting, see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-logging-management-commands" title="22.5.6.1 NDB Cluster Logging Management Commands">Section 22.5.6.1, “NDB Cluster Logging Management Commands”</a>.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-logs-ndb-messages"></a>22.5.7 NDB Cluster Log Messages</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-logs-cluster-log">22.5.7.1 NDB Cluster: Messages in the Cluster Log</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-log-startup-messages">22.5.7.2 NDB Cluster Log Startup Messages</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-logs-event-buffer">22.5.7.3 Event Buffer Reporting in the Cluster Log</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndb-transporter-errors">22.5.7.4 NDB Cluster: NDB Transporter Errors</a></span></dt></dl>
</div>
<p>
      This section contains information about the messages written to
      the cluster log in response to different cluster log events. It
      provides additional, more specific information on
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> transporter errors.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-logs-cluster-log"></a>22.5.7.1 NDB Cluster: Messages in the Cluster Log</h4>
</div>
</div>
</div>
<p>
        The following table lists the most common
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> cluster log messages. For
        information about the cluster log, log events, and event types,
        see <a class="xref" href="mysql-cluster.html#mysql-cluster-event-reports" title="22.5.6 Event Reports Generated in NDB Cluster">Section 22.5.6, “Event Reports Generated in NDB Cluster”</a>. These log
        messages also correspond to log event types in the MGM API; see
        <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/mgm-ndb-logevent-type.html" target="_top">The Ndb_logevent_type Type</a>, for related information
        of interest to Cluster API developers.
</p>
<div class="table">
<a name="idm140091581657296"></a><p class="title"><b>Table 22.373 Common NDB cluster log messages</b></p>
<div class="table-contents">
<table><col width="20%"><col width="20%"><col width="25%"><col width="15%"><col width="10%"><col width="10%"><thead><tr>
            <th scope="col">Log Message</th>
            <th scope="col">Description</th>
            <th scope="col">Event Name</th>
            <th scope="col">Event Type</th>
            <th scope="col">Priority</th>
            <th scope="col">Severity</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>mgm_node_id</code></em>: Node
              <em class="replaceable"><code>data_node_id</code></em>
              Connected</code></td>
            <td>The data node having node ID <em class="replaceable"><code>node_id</code></em> has
              connected to the management server (node
              <em class="replaceable"><code>mgm_node_id</code></em>).</td>
            <td><code class="literal">Connected</code></td>
            <td><code class="literal">Connection</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>mgm_node_id</code></em>: Node
              <em class="replaceable"><code>data_node_id</code></em>
              Disconnected</code></td>
            <td>The data node having node ID <em class="replaceable"><code>data_node_id</code></em> has
              disconnected from the management server (node
              <em class="replaceable"><code>mgm_node_id</code></em>).</td>
            <td><code class="literal">Disconnected</code></td>
            <td><code class="literal">Connection</code></td>
            <td>8</td>
            <td><code class="literal">ALERT</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>data_node_id</code></em>: Communication to
              Node <em class="replaceable"><code>api_node_id</code></em>
              closed</code></td>
            <td>The API node or SQL node having node ID
              <em class="replaceable"><code>api_node_id</code></em> is no longer
              communicating with data node
              <em class="replaceable"><code>data_node_id</code></em>.</td>
            <td><code class="literal">CommunicationClosed</code></td>
            <td><code class="literal">Connection</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>data_node_id</code></em>: Communication to
              Node <em class="replaceable"><code>api_node_id</code></em>
              opened</code></td>
            <td>The API node or SQL node having node ID
              <em class="replaceable"><code>api_node_id</code></em> is now
              communicating with data node
              <em class="replaceable"><code>data_node_id</code></em>.</td>
            <td><code class="literal">CommunicationOpened</code></td>
            <td><code class="literal">Connection</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>mgm_node_id</code></em>: Node
              <em class="replaceable"><code>api_node_id</code></em>: API
              <em class="replaceable"><code>version</code></em></code></td>
            <td>The API node having node ID <em class="replaceable"><code>api_node_id</code></em> has
              connected to management node
              <em class="replaceable"><code>mgm_node_id</code></em> using
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> API version
              <em class="replaceable"><code>version</code></em> (generally the same as
              the MySQL version number).</td>
            <td><code class="literal">ConnectedApiVersion</code></td>
            <td><code class="literal">Connection</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Global checkpoint
              <em class="replaceable"><code>gci</code></em> started</code></td>
            <td>A global checkpoint with the ID <em class="replaceable"><code>gci</code></em> has been
              started; node <em class="replaceable"><code>node_id</code></em> is the
              master responsible for this global checkpoint.</td>
            <td><code class="literal">GlobalCheckpointStarted</code></td>
            <td><code class="literal">Checkpoint</code></td>
            <td>9</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Global checkpoint
              <em class="replaceable"><code>gci</code></em> completed</code></td>
            <td>The global checkpoint having the ID <em class="replaceable"><code>gci</code></em> has
              been completed; node <em class="replaceable"><code>node_id</code></em>
              was the master responsible for this global checkpoint.</td>
            <td><code class="literal">GlobalCheckpointCompleted</code></td>
            <td><code class="literal">Checkpoint</code></td>
            <td>10</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Local checkpoint
              <em class="replaceable"><code>lcp</code></em> started. Keep GCI =
              <em class="replaceable"><code>current_gci</code></em> oldest restorable
              GCI = <em class="replaceable"><code>old_gci</code></em></code></td>
            <td>The local checkpoint having sequence ID <em class="replaceable"><code>lcp</code></em>
              has been started on node
              <em class="replaceable"><code>node_id</code></em>. The most recent GCI
              that can be used has the index
              <em class="replaceable"><code>current_gci</code></em>, and the oldest GCI
              from which the cluster can be restored has the index
              <em class="replaceable"><code>old_gci</code></em>.</td>
            <td><code class="literal">LocalCheckpointStarted</code></td>
            <td><code class="literal">Checkpoint</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Local checkpoint
              <em class="replaceable"><code>lcp</code></em> completed</code></td>
            <td>The local checkpoint having sequence ID <em class="replaceable"><code>lcp</code></em>
              on node <em class="replaceable"><code>node_id</code></em> has been
              completed.</td>
            <td><code class="literal">LocalCheckpointCompleted</code></td>
            <td><code class="literal">Checkpoint</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Local Checkpoint
              stopped in CALCULATED_KEEP_GCI</code></td>
            <td>The node was unable to determine the most recent usable GCI.</td>
            <td><code class="literal">LCPStoppedInCalcKeepGci</code></td>
            <td><code class="literal">Checkpoint</code></td>
            <td>0</td>
            <td><code class="literal">ALERT</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Table ID =
              <em class="replaceable"><code>table_id</code></em>, fragment
              <em class="replaceable"><code>ID = fragment_id</code></em> has completed
              LCP on Node <em class="replaceable"><code>node_id</code></em>
              maxGciStarted: <em class="replaceable"><code>started_gci</code></em>
              maxGciCompleted:
              <em class="replaceable"><code>completed_gci</code></em></code></td>
            <td>A table fragment has been checkpointed to disk on node
              <em class="replaceable"><code>node_id</code></em>. The GCI in progress
              has the index <em class="replaceable"><code>started_gci</code></em>, and
              the most recent GCI to have been completed has the index
              <em class="replaceable"><code>completed_gci</code></em>.</td>
            <td><code class="literal">LCPFragmentCompleted</code></td>
            <td><code class="literal">Checkpoint</code></td>
            <td>11</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: ACC Blocked
              <em class="replaceable"><code>num_1</code></em> and TUP Blocked
              <em class="replaceable"><code>num_2</code></em> times last
              second</code></td>
            <td>Undo logging is blocked because the log buffer is close to overflowing.</td>
            <td><code class="literal">UndoLogBlocked</code></td>
            <td><code class="literal">Checkpoint</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Start initiated
              <em class="replaceable"><code>version</code></em></code></td>
            <td>Data node <em class="replaceable"><code>node_id</code></em>, running
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> version
              <em class="replaceable"><code>version</code></em>, is beginning its
              startup process.</td>
            <td><code class="literal">NDBStartStarted</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>1</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Started
              <em class="replaceable"><code>version</code></em></code></td>
            <td>Data node <em class="replaceable"><code>node_id</code></em>, running
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> version
              <em class="replaceable"><code>version</code></em>, has started
              successfully.</td>
            <td><code class="literal">NDBStartCompleted</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>1</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: STTORRY received after
              restart finished</code></td>
            <td>The node has received a signal indicating that a cluster restart has
              completed.</td>
            <td><code class="literal">STTORRYRecieved</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>15</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Start phase
              <em class="replaceable"><code>phase</code></em> completed
              (<em class="replaceable"><code>type</code></em>)</code></td>
            <td>The node has completed start phase <em class="replaceable"><code>phase</code></em> of a
              <em class="replaceable"><code>type</code></em> start. For a listing of
              start phases, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-start-phases" title="22.5.1 Summary of NDB Cluster Start Phases">Section 22.5.1, “Summary of NDB Cluster Start Phases”</a>.
              (<em class="replaceable"><code>type</code></em> is one of
              <code class="literal">initial</code>, <code class="literal">system</code>,
              <code class="literal">node</code>, <code class="literal">initial node</code>,
              or <code class="literal">&lt;Unknown&gt;</code>.)</td>
            <td><code class="literal">StartPhaseCompleted</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>4</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: CM_REGCONF president =
              <em class="replaceable"><code>president_id</code></em>, own Node =
              <em class="replaceable"><code>own_id</code></em>, our dynamic id =
              <em class="replaceable"><code>dynamic_id</code></em></code></td>
            <td>Node <em class="replaceable"><code>president_id</code></em> has been selected as
              <span class="quote">“<span class="quote">president</span>”</span>.
              <em class="replaceable"><code>own_id</code></em> and
              <em class="replaceable"><code>dynamic_id</code></em> should always be the
              same as the ID (<em class="replaceable"><code>node_id</code></em>) of the
              reporting node.</td>
            <td><code class="literal">CM_REGCONF</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>3</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: CM_REGREF from Node
              <em class="replaceable"><code>president_id</code></em> to our Node
              <em class="replaceable"><code>node_id</code></em>. Cause =
              <em class="replaceable"><code>cause</code></em></code></td>
            <td>The reporting node (ID <em class="replaceable"><code>node_id</code></em>) was unable to
              accept node <em class="replaceable"><code>president_id</code></em> as
              president. The <em class="replaceable"><code>cause</code></em> of the
              problem is given as one of <code class="literal">Busy</code>,
              <code class="literal">Election with wait = false</code>,
              <code class="literal">Not president</code>, <code class="literal">Election
              without selecting new candidate</code>, or <code class="literal">No
              such cause</code>.</td>
            <td><code class="literal">CM_REGREF</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: We are Node
              <em class="replaceable"><code>own_id</code></em> with dynamic ID
              <em class="replaceable"><code>dynamic_id</code></em>, our left neighbor
              is Node <em class="replaceable"><code>id_1</code></em>, our right is Node
              <em class="replaceable"><code>id_2</code></em></code></td>
            <td>The node has discovered its neighboring nodes in the cluster (node
              <em class="replaceable"><code>id_1</code></em> and node
              <em class="replaceable"><code>id_2</code></em>).
              <em class="replaceable"><code>node_id</code></em>,
              <em class="replaceable"><code>own_id</code></em>, and
              <em class="replaceable"><code>dynamic_id</code></em> should always be the
              same; if they are not, this indicates a serious
              misconfiguration of the cluster nodes.</td>
            <td><code class="literal">FIND_NEIGHBOURS</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>:
              <em class="replaceable"><code>type</code></em> shutdown
              initiated</code></td>
            <td>The node has received a shutdown signal. The
              <em class="replaceable"><code>type</code></em> of shutdown is either
              <code class="literal">Cluster</code> or <code class="literal">Node</code>.</td>
            <td><code class="literal">NDBStopStarted</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>1</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Node shutdown
              completed </code>[<code class="literal">,
              <em class="replaceable"><code>action</code></em></code>]
              [<code class="literal">Initiated by signal
              <em class="replaceable"><code>signal</code></em>.</code>]</td>
            <td>The node has been shut down. This report may include an
              <em class="replaceable"><code>action</code></em>, which if present is one
              of <code class="literal">restarting</code>, <code class="literal">no
              start</code>, or <code class="literal">initial</code>. The report
              may also include a reference to an
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> Protocol
              <em class="replaceable"><code>signal</code></em>; for possible signals,
              refer to
              <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-ndb-protocol-operations-signals.html" target="_top">Operations and Signals</a>.</td>
            <td><code class="literal">NDBStopCompleted</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>1</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Forced node shutdown
              completed </code>[<code class="literal">,
              action</code>]<code class="literal">.</code> [<code class="literal">Occurred
              during startphase
              <em class="replaceable"><code>start_phase</code></em>.</code>]
              [<code class="literal"> Initiated by
              <em class="replaceable"><code>signal</code></em>.</code>]
              [<code class="literal">Caused by error
              <em class="replaceable"><code>error_code</code></em>:
              '<em class="replaceable"><code>error_message</code></em>(<em class="replaceable"><code>error_classification</code></em>).
              <em class="replaceable"><code>error_status</code></em>'.</code>
              [<code class="literal">(extra info
              <em class="replaceable"><code>extra_code</code></em>)</code>]]</td>
            <td>The node has been forcibly shut down. The
              <em class="replaceable"><code>action</code></em> (one of
              <code class="literal">restarting</code>, <code class="literal">no
              start</code>, or <code class="literal">initial</code>)
              subsequently being taken, if any, is also reported. If the
              shutdown occurred while the node was starting, the report
              includes the <em class="replaceable"><code>start_phase</code></em> during
              which the node failed. If this was a result of a
              <em class="replaceable"><code>signal</code></em> sent to the node, this
              information is also provided (see
              <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-ndb-protocol-operations-signals.html" target="_top">Operations and Signals</a>,
              for more information). If the error causing the failure is
              known, this is also included; for more information about
              <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> error messages and
              classifications, see <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-errors.html" target="_top">NDB Cluster API Errors</a>.</td>
            <td><code class="literal">NDBStopForced</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>1</td>
            <td><code class="literal">ALERT</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Node shutdown
              aborted</code></td>
            <td>The node shutdown process was aborted by the user.</td>
            <td><code class="literal">NDBStopAborted</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>1</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: StartLog: [GCI Keep:
              <em class="replaceable"><code>keep_pos</code></em> LastCompleted:
              <em class="replaceable"><code>last_pos</code></em> NewestRestorable:
              <em class="replaceable"><code>restore_pos</code></em>]</code></td>
            <td>This reports global checkpoints referenced during a node start. The redo
              log prior to <em class="replaceable"><code>keep_pos</code></em> is
              dropped. <em class="replaceable"><code>last_pos</code></em> is the last
              global checkpoint in which data node the participated;
              <em class="replaceable"><code>restore_pos</code></em> is the global
              checkpoint which is actually used to restore all data
              nodes.</td>
            <td><code class="literal">StartREDOLog</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>4</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><em class="replaceable"><code>startup_message</code></em> [<span class="emphasis"><em>Listed separately;
              see below.</em></span>]</td>
            <td>There are a number of possible startup messages that can be logged under
              different circumstances. These are listed separately; see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-log-startup-messages" title="22.5.7.2 NDB Cluster Log Startup Messages">Section 22.5.7.2, “NDB Cluster Log Startup Messages”</a>.</td>
            <td><code class="literal">StartReport</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>4</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Node restart completed
              copy of dictionary information</code></td>
            <td>Copying of data dictionary information to the restarted node has been
              completed.</td>
            <td><code class="literal">NR_CopyDict</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Node restart completed
              copy of distribution information</code></td>
            <td>Copying of data distribution information to the restarted node has been
              completed.</td>
            <td><code class="literal">NR_CopyDistr</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Node restart starting
              to copy the fragments to Node
              <em class="replaceable"><code>node_id</code></em></code></td>
            <td>Copy of fragments to starting data node
              <em class="replaceable"><code>node_id</code></em> has begun</td>
            <td><code class="literal">NR_CopyFragsStarted</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Table ID =
              <em class="replaceable"><code>table_id</code></em>, fragment ID =
              <em class="replaceable"><code>fragment_id</code></em> have been copied to
              Node <em class="replaceable"><code>node_id</code></em></code></td>
            <td>Fragment <em class="replaceable"><code>fragment_id</code></em> from table
              <em class="replaceable"><code>table_id</code></em> has been copied to
              data node <em class="replaceable"><code>node_id</code></em></td>
            <td><code class="literal">NR_CopyFragDone</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>10</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Node restart completed
              copying the fragments to Node
              <em class="replaceable"><code>node_id</code></em></code></td>
            <td>Copying of all table fragments to restarting data node
              <em class="replaceable"><code>node_id</code></em> has been completed</td>
            <td><code class="literal">NR_CopyFragsCompleted</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Node
              <em class="replaceable"><code>node1_id</code></em> completed failure of
              Node <em class="replaceable"><code>node2_id</code></em></code></td>
            <td>Data node <em class="replaceable"><code>node1_id</code></em> has detected the failure
              of data node <em class="replaceable"><code>node2_id</code></em></td>
            <td><code class="literal">NodeFailCompleted</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>8</td>
            <td><code class="literal">ALERT</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">All nodes completed failure of Node
              <em class="replaceable"><code>node_id</code></em></code></td>
            <td>All (remaining) data nodes have detected the failure of data node
              <em class="replaceable"><code>node_id</code></em></td>
            <td><code class="literal">NodeFailCompleted</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>8</td>
            <td><code class="literal">ALERT</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node failure of
              <em class="replaceable"><code>node_id</code></em><em class="replaceable"><code>block</code></em>
              completed</code></td>
            <td>The failure of data node <em class="replaceable"><code>node_id</code></em> has been
              detected in the
              <em class="replaceable"><code>block</code></em><a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>
              kernel block, where block is 1 of <code class="literal">DBTC</code>,
              <code class="literal">DBDICT</code>, <code class="literal">DBDIH</code>, or
              <code class="literal">DBLQH</code>; for more information, see
              <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-kernel-blocks.html" target="_top">NDB Kernel Blocks</a></td>
            <td><code class="literal">NodeFailCompleted</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>8</td>
            <td><code class="literal">ALERT</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>mgm_node_id</code></em>: Node
              <em class="replaceable"><code>data_node_id</code></em> has failed. The
              Node state at failure was
              <em class="replaceable"><code>state_code</code></em></code></td>
            <td>A data node has failed. Its state at the time of failure is described by
              an arbitration state code
              <em class="replaceable"><code>state_code</code></em>: possible state code
              values can be found in the file
              <code class="filename">include/kernel/signaldata/ArbitSignalData.hpp</code>.</td>
            <td><code class="literal">NODE_FAILREP</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>8</td>
            <td><code class="literal">ALERT</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">President restarts arbitration thread
              [state=<em class="replaceable"><code>state_code</code></em>]</code> or
              <code class="literal">Prepare arbitrator node
              <em class="replaceable"><code>node_id</code></em>
              [ticket=<em class="replaceable"><code>ticket_id</code></em>]</code> or
              <code class="literal">Receive arbitrator node
              <em class="replaceable"><code>node_id</code></em>
              [ticket=<em class="replaceable"><code>ticket_id</code></em>]</code> or
              <code class="literal">Started arbitrator node
              <em class="replaceable"><code>node_id</code></em>
              [ticket=<em class="replaceable"><code>ticket_id</code></em>]</code> or
              <code class="literal">Lost arbitrator node
              <em class="replaceable"><code>node_id</code></em> - process failure
              [state=<em class="replaceable"><code>state_code</code></em>]</code> or
              <code class="literal">Lost arbitrator node
              <em class="replaceable"><code>node_id</code></em> - process exit
              [state=<em class="replaceable"><code>state_code</code></em>]</code> or
              <code class="literal">Lost arbitrator node
              <em class="replaceable"><code>node_id</code></em> -
              <em class="replaceable"><code>error_message</code></em>
              [state=<em class="replaceable"><code>state_code</code></em>]</code></td>
            <td>This is a report on the current state and progress of arbitration in the
              cluster. <em class="replaceable"><code>node_id</code></em> is the node ID
              of the management node or SQL node selected as the
              arbitrator. <em class="replaceable"><code>state_code</code></em> is an
              arbitration state code, as found in
              <code class="filename">include/kernel/signaldata/ArbitSignalData.hpp</code>.
              When an error has occurred, an
              <em class="replaceable"><code>error_message</code></em>, also defined in
              <code class="filename">ArbitSignalData.hpp</code>, is provided.
              <em class="replaceable"><code>ticket_id</code></em> is a unique
              identifier handed out by the arbitrator when it is
              selected to all the nodes that participated in its
              selection; this is used to ensure that each node
              requesting arbitration was one of the nodes that took part
              in the selection process.</td>
            <td><code class="literal">ArbitState</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>6</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Arbitration check lost - less than 1/2 nodes left</code> or
              <code class="literal">Arbitration check won - all node groups and more
              than 1/2 nodes left</code> or <code class="literal">Arbitration
              check won - node group majority</code> or
              <code class="literal">Arbitration check lost - missing node
              group</code> or <code class="literal">Network partitioning -
              arbitration required</code> or <code class="literal">Arbitration won
              - positive reply from node
              <em class="replaceable"><code>node_id</code></em></code> or
              <code class="literal">Arbitration lost - negative reply from node
              <em class="replaceable"><code>node_id</code></em></code> or
              <code class="literal">Network partitioning - no arbitrator
              available</code> or <code class="literal">Network partitioning - no
              arbitrator configured</code> or <code class="literal">Arbitration
              failure - <em class="replaceable"><code>error_message</code></em>
              [state=<em class="replaceable"><code>state_code</code></em>]</code></td>
            <td>This message reports on the result of arbitration. In the event of
              arbitration failure, an
              <em class="replaceable"><code>error_message</code></em> and an
              arbitration <em class="replaceable"><code>state_code</code></em> are
              provided; definitions for both of these are found in
              <code class="filename">include/kernel/signaldata/ArbitSignalData.hpp</code>.</td>
            <td><code class="literal">ArbitResult</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>2</td>
            <td><code class="literal">ALERT</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: GCP Take over
              started</code></td>
            <td>This node is attempting to assume responsibility for the next global
              checkpoint (that is, it is becoming the master node)</td>
            <td><code class="literal">GCP_TakeoverStarted</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: GCP Take over
              completed</code></td>
            <td>This node has become the master, and has assumed responsibility for the
              next global checkpoint</td>
            <td><code class="literal">GCP_TakeoverCompleted</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: LCP Take over
              started</code></td>
            <td>This node is attempting to assume responsibility for the next set of
              local checkpoints (that is, it is becoming the master
              node)</td>
            <td><code class="literal">LCP_TakeoverStarted</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: LCP Take over
              completed</code></td>
            <td>This node has become the master, and has assumed responsibility for the
              next set of local checkpoints</td>
            <td><code class="literal">LCP_TakeoverCompleted</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Trans. Count =
              <em class="replaceable"><code>transactions</code></em>, Commit Count =
              <em class="replaceable"><code>commits</code></em>, Read Count =
              <em class="replaceable"><code>reads</code></em>, Simple Read Count =
              <em class="replaceable"><code>simple_reads</code></em>, Write Count =
              <em class="replaceable"><code>writes</code></em>, AttrInfo Count =
              <em class="replaceable"><code>AttrInfo_objects</code></em>, Concurrent
              Operations =
              <em class="replaceable"><code>concurrent_operations</code></em>, Abort
              Count = <em class="replaceable"><code>aborts</code></em>, Scans =
              <em class="replaceable"><code>scans</code></em>, Range scans =
              <em class="replaceable"><code>range_scans</code></em></code></td>
            <td>This report of transaction activity is given approximately once every 10
              seconds</td>
            <td><code class="literal">TransReportCounters</code></td>
            <td><code class="literal">Statistic</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>:
              Operations=<em class="replaceable"><code>operations</code></em></code></td>
            <td>Number of operations performed by this node, provided approximately once
              every 10 seconds</td>
            <td><code class="literal">OperationReportCounters</code></td>
            <td><code class="literal">Statistic</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Table with ID =
              <em class="replaceable"><code>table_id</code></em> created</code></td>
            <td>A table having the table ID shown has been created</td>
            <td><code class="literal">TableCreated</code></td>
            <td><code class="literal">Statistic</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Mean loop Counter in
              doJob last 8192 times =
              <em class="replaceable"><code>count</code></em></code></td>
            <td></td>
            <td><code class="literal">JobStatistic</code></td>
            <td><code class="literal">Statistic</code></td>
            <td>9</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Mean send size to Node = <em class="replaceable"><code>node_id</code></em>
              last 4096 sends = <em class="replaceable"><code>bytes</code></em>
              bytes</code></td>
            <td>This node is sending an average of <em class="replaceable"><code>bytes</code></em>
              bytes per send to node <em class="replaceable"><code>node_id</code></em></td>
            <td><code class="literal">SendBytesStatistic</code></td>
            <td><code class="literal">Statistic</code></td>
            <td>9</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Mean receive size to Node = <em class="replaceable"><code>node_id</code></em>
              last 4096 sends = <em class="replaceable"><code>bytes</code></em>
              bytes</code></td>
            <td>This node is receiving an average of <em class="replaceable"><code>bytes</code></em> of
              data each time it receives data from node
              <em class="replaceable"><code>node_id</code></em></td>
            <td><code class="literal">ReceiveBytesStatistic</code></td>
            <td><code class="literal">Statistic</code></td>
            <td>9</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Data usage is
              <em class="replaceable"><code>data_memory_percentage</code></em>%
              (<em class="replaceable"><code>data_pages_used</code></em> 32K pages of
              total
              <em class="replaceable"><code>data_pages_total</code></em>)</code> /
              <code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Index
              usage is
              <em class="replaceable"><code>index_memory_percentage</code></em>%
              (<em class="replaceable"><code>index_pages_used</code></em> 8K pages of
              total <em class="replaceable"><code>index_pages_total</code></em>)
              </code></td>
            <td>This report is generated when a <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-dump-commands.html" target="_top"><code class="literal">DUMP
              1000</code></a> command is issued in the cluster management
              client; for more information, see
              <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-dump-command-1000.html" target="_top">DUMP 1000</a>, in
              <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/" target="_top">MySQL NDB Cluster Internals Manual</a></td>
            <td><code class="literal">MemoryUsage</code></td>
            <td><code class="literal">Statistic</code></td>
            <td>5</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node1_id</code></em>: Transporter to node
              <em class="replaceable"><code>node2_id</code></em> reported error
              <em class="replaceable"><code>error_code</code></em>:
              <em class="replaceable"><code>error_message</code></em></code></td>
            <td>A transporter error occurred while communicating with node
              <em class="replaceable"><code>node2_id</code></em>; for a listing of
              transporter error codes and messages, see
              <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-transporter-errors.html" target="_top">NDB Transporter Errors</a>, in
              <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/" target="_top">MySQL NDB Cluster Internals Manual</a></td>
            <td><code class="literal">TransporterError</code></td>
            <td><code class="literal">Error</code></td>
            <td>2</td>
            <td><code class="literal">ERROR</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node1_id</code></em>: Transporter to node
              <em class="replaceable"><code>node2_id</code></em> reported error
              <em class="replaceable"><code>error_code</code></em>:
              <em class="replaceable"><code>error_message</code></em></code></td>
            <td>A warning of a potential transporter problem while communicating with
              node <em class="replaceable"><code>node2_id</code></em>; for a listing of
              transporter error codes and messages, see
              <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-transporter-errors.html" target="_top">NDB Transporter Errors</a>, for more
              information</td>
            <td><code class="literal">TransporterWarning</code></td>
            <td><code class="literal">Error</code></td>
            <td>8</td>
            <td><code class="literal">WARNING</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node1_id</code></em>: Node
              <em class="replaceable"><code>node2_id</code></em> missed heartbeat
              <em class="replaceable"><code>heartbeat_id</code></em></code></td>
            <td>This node missed a heartbeat from node
              <em class="replaceable"><code>node2_id</code></em></td>
            <td><code class="literal">MissedHeartbeat</code></td>
            <td><code class="literal">Error</code></td>
            <td>8</td>
            <td><code class="literal">WARNING</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node1_id</code></em>: Node
              <em class="replaceable"><code>node2_id</code></em> declared dead due to
              missed heartbeat</code></td>
            <td>This node has missed at least 3 heartbeats from node
              <em class="replaceable"><code>node2_id</code></em>, and so has declared
              that node <span class="quote">“<span class="quote">dead</span>”</span></td>
            <td><code class="literal">DeadDueToHeartbeat</code></td>
            <td><code class="literal">Error</code></td>
            <td>8</td>
            <td><code class="literal">ALERT</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node1_id</code></em>: Node Sent Heartbeat
              to node = <em class="replaceable"><code>node2_id</code></em></code></td>
            <td>This node has sent a heartbeat to node
              <em class="replaceable"><code>node2_id</code></em></td>
            <td><code class="literal">SentHeartbeat</code></td>
            <td><code class="literal">Info</code></td>
            <td>12</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Event buffer status
              (<em class="replaceable"><code>object_id</code></em>):
              used=<em class="replaceable"><code>bytes_used</code></em>
              (<em class="replaceable"><code>percent_used</code></em>% of alloc)
              alloc=<em class="replaceable"><code>bytes_allocated</code></em>
              max=<em class="replaceable"><code>bytes_available</code></em>
              latest_consumed_epoch=<em class="replaceable"><code>latest_consumed_epoch</code></em>
              latest_buffered_epoch=<em class="replaceable"><code>latest_buffered_epoch</code></em>
              report_reason=<em class="replaceable"><code>report_reason</code></em></code></td>
            <td>This report is seen during heavy event buffer usage, for example, when
              many updates are being applied in a relatively short
              period of time; the report shows the number of bytes and
              the percentage of event buffer memory used, the bytes
              allocated and percentage still available, and the latest
              buffered and consumed epochs; for more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-logs-event-buffer" title="22.5.7.3 Event Buffer Reporting in the Cluster Log">Section 22.5.7.3, “Event Buffer Reporting in the Cluster Log”</a></td>
            <td><code class="literal">EventBufferStatus2</code></td>
            <td><code class="literal">Info</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Entering single user
              mode</code>, <code class="literal">Node
              <em class="replaceable"><code>node_id</code></em>: Entered single user
              mode Node <em class="replaceable"><code>API_node_id</code></em> has
              exclusive access</code>, <code class="literal">Node
              <em class="replaceable"><code>node_id</code></em>: Entering single user
              mode</code></td>
            <td>These reports are written to the cluster log when entering and exiting
              single user mode; <em class="replaceable"><code>API_node_id</code></em>
              is the node ID of the API or SQL having exclusive access
              to the cluster (for more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-single-user-mode" title="22.5.8 NDB Cluster Single User Mode">Section 22.5.8, “NDB Cluster Single User Mode”</a>); the
              message <code class="literal">Unknown single user report
              <em class="replaceable"><code>API_node_id</code></em></code> indicates
              an error has taken place and should never be seen in
              normal operation</td>
            <td><code class="literal">SingleUser</code></td>
            <td><code class="literal">Info</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Backup
              <em class="replaceable"><code>backup_id</code></em> started from node
              <em class="replaceable"><code>mgm_node_id</code></em></code></td>
            <td>A backup has been started using the management node having
              <em class="replaceable"><code>mgm_node_id</code></em>; this message is
              also displayed in the cluster management client when the
              <a class="link" href="mysql-cluster.html#mysql-cluster-backup-using-management-client" title="22.5.3.2 Using The NDB Cluster Management Client to Create a Backup"><code class="literal">START BACKUP</code></a> command
              is issued; for more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-backup-using-management-client" title="22.5.3.2 Using The NDB Cluster Management Client to Create a Backup">Section 22.5.3.2, “Using The NDB Cluster Management Client to Create a Backup”</a></td>
            <td><code class="literal">BackupStarted</code></td>
            <td><code class="literal">Backup</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Backup
              <em class="replaceable"><code>backup_id</code></em> started from node
              <em class="replaceable"><code>mgm_node_id</code></em> completed.
              StartGCP: <em class="replaceable"><code>start_gcp</code></em> StopGCP:
              <em class="replaceable"><code>stop_gcp</code></em> #Records:
              <em class="replaceable"><code>records</code></em> #LogRecords:
              <em class="replaceable"><code>log_records</code></em> Data:
              <em class="replaceable"><code>data_bytes</code></em> bytes Log:
              <em class="replaceable"><code>log_bytes</code></em> bytes</code></td>
            <td>The backup having the ID <em class="replaceable"><code>backup_id</code></em> has been
              completed; for more information, see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-backup-using-management-client" title="22.5.3.2 Using The NDB Cluster Management Client to Create a Backup">Section 22.5.3.2, “Using The NDB Cluster Management Client to Create a Backup”</a></td>
            <td><code class="literal">BackupCompleted</code></td>
            <td><code class="literal">Backup</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Backup request from
              <em class="replaceable"><code>mgm_node_id</code></em> failed to start.
              Error: <em class="replaceable"><code>error_code</code></em></code></td>
            <td>The backup failed to start; for error codes, see
              <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/mgm-errors.html" target="_top">MGM API Errors</a></td>
            <td><code class="literal">BackupFailedToStart</code></td>
            <td><code class="literal">Backup</code></td>
            <td>7</td>
            <td><code class="literal">ALERT</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Backup
              <em class="replaceable"><code>backup_id</code></em> started from
              <em class="replaceable"><code>mgm_node_id</code></em> has been aborted.
              Error: <em class="replaceable"><code>error_code</code></em></code></td>
            <td>The backup was terminated after starting, possibly due to user
              intervention</td>
            <td><code class="literal">BackupAborted</code></td>
            <td><code class="literal">Backup</code></td>
            <td>7</td>
            <td><code class="literal">ALERT</code></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-log-startup-messages"></a>22.5.7.2 NDB Cluster Log Startup Messages</h4>

</div>

</div>

</div>
<p>
        Possible startup messages with descriptions are provided in the
        following list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">Initial start, waiting for %s to connect, nodes [
            all: %s connected: %s no-wait: %s ]</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Waiting until nodes: %s connects, nodes [ all: %s
            connected: %s no-wait: %s ]</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Waiting %u sec for nodes %s to connect, nodes [
            all: %s connected: %s no-wait: %s ]</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Waiting for non partitioned start, nodes [ all: %s
            connected: %s missing: %s no-wait: %s ]</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Waiting %u sec for non partitioned start, nodes [
            all: %s connected: %s missing: %s no-wait: %s ]</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Initial start with nodes %s [ missing: %s no-wait:
            %s ]</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Start with all nodes %s</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Start with nodes %s [ missing: %s no-wait: %s
            ]</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Start potentially partitioned with nodes %s [
            missing: %s no-wait: %s ]</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Unknown startreport: 0x%x [ %s %s %s %s ]</code>
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-logs-event-buffer"></a>22.5.7.3 Event Buffer Reporting in the Cluster Log</h4>

</div>

</div>

</div>
<p>
        <code class="literal">NDB</code> uses one or more memory buffers for
        events received from the data nodes. There is one such buffer
        for each <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb.html" target="_top"><code class="literal">Ndb</code></a> object subscribing
        to table events, which means that there are usually two buffers
        for each <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> performing binary logging
        (one buffer for schema events, and one for data events). Each
        buffer contains epochs made up of events. These events consist
        of operation types (insert, update, delete) and row data (before
        and after images plus metadata).
      </p><p>
        <code class="literal">NDB</code> generates messages in the cluster log to
        describe the state of these buffers. Although these reports
        appear in the cluster log, they refer to buffers on API nodes
        (unlike most other cluster log messages, which are generated by
        data nodes).
      </p><p>
        Event buffer logging reports in the cluster log use the format
        shown here:
      </p><pre data-lang="simple" class="programlisting">
Node <em class="replaceable"><code>node_id</code></em>: Event buffer status (<em class="replaceable"><code>object_id</code></em>):
used=<em class="replaceable"><code>bytes_used</code></em> (<em class="replaceable"><code>percent_used</code></em>% of alloc)
alloc=<em class="replaceable"><code>bytes_allocated</code></em> (<em class="replaceable"><code>percent_alloc</code></em>% of max) max=<em class="replaceable"><code>bytes_available</code></em>
latest_consumed_epoch=<em class="replaceable"><code>latest_consumed_epoch</code></em>
latest_buffered_epoch=<em class="replaceable"><code>latest_buffered_epoch</code></em>
report_reason=<em class="replaceable"><code>report_reason</code></em>
</pre><p>
        The fields making up this report are listed here, with
        descriptions:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <em class="replaceable"><code>node_id</code></em>: ID of the node where the
            report originated.
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>object_id</code></em>: ID of the
            <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb.html" target="_top"><code class="literal">Ndb</code></a> object where the report
            originated.
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>bytes_used</code></em>: Number of bytes used
            by the buffer.
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>percent_used</code></em>: Percentage of
            allocated bytes used.
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>bytes_allocated</code></em>: Number of bytes
            allocated to this buffer.
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>percent_alloc</code></em>: Percentage of
            available bytes used; not printed if
            <a class="link" href="mysql-cluster.html#sysvar_ndb_eventbuffer_max_alloc"><code class="literal">ndb_eventbuffer_max_alloc</code></a>
            is equal to 0 (unlimited).
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>bytes_available</code></em>: Number of bytes
            available; this is 0 if
            <code class="literal">ndb_eventbuffer_max_alloc</code> is 0
            (unlimited).
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>latest_consumed_epoch</code></em>: The epoch
            most recently consumed to completion. (In NDB API
            applications, this is done by calling
            <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb-nextevent.html" target="_top"><code class="literal">nextEvent()</code></a>.)
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>latest_buffered_epoch</code></em>: The epoch
            most recently buffered (completely) in the event buffer.
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>report_reason</code></em>: The reason for
            making the report. Possible reasons are shown later in this
            section.
</p></li></ul>
</div>
<p>
        Possible reasons for reporting are described in the following
        list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">ENOUGH_FREE_EVENTBUFFER</code>: The event buffer
            has sufficient space.
          </p><p>
            <code class="literal">LOW_FREE_EVENTBUFFER</code>: The event buffer is
            running low on free space.
          </p><p>
            The threshold free percentage level triggering these reports
            can be adjusted by setting the
            <a class="link" href="mysql-cluster.html#sysvar_ndb_report_thresh_binlog_mem_usage"><code class="literal">ndb_report_thresh_binlog_mem_usage</code></a>
            server variable.
          </p></li><li class="listitem"><p>
            <code class="literal">BUFFERED_EPOCHS_OVER_THRESHOLD</code>: Whether
            the number of buffered epochs has exceeded the configured
            threshold. This number is the difference between the latest
            epoch that has been received in its entirety and the epoch
            that has most recently been consumed (in NDB API
            applications, this is done by calling
            <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb-nextevent.html" target="_top"><code class="literal">nextEvent()</code></a> or
            <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb-nextevent2.html" target="_top"><code class="literal">nextEvent2()</code></a>). The
            report is generated every second until the number of
            buffered epochs goes below the threshold, which can be
            adjusted by setting the
            <a class="link" href="mysql-cluster.html#sysvar_ndb_report_thresh_binlog_epoch_slip"><code class="literal">ndb_report_thresh_binlog_epoch_slip</code></a>
            server variable. You can also adjust the threshold in NDB
            API applications by calling
            <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb-seteventbufferqueueemptyepoch.html" target="_top"><code class="literal">setEventBufferQueueEmptyEpoch()</code></a>.
          </p></li><li class="listitem"><p>
            <code class="literal">PARTIALLY_DISCARDING</code>: Event buffer memory
            is exhausted—that is, 100% of
            <a class="link" href="mysql-cluster.html#sysvar_ndb_eventbuffer_max_alloc"><code class="literal">ndb_eventbuffer_max_alloc</code></a>
            has been used. Any partially buffered epoch is buffered to
            completion even is usage exceeds 100%, but any new epochs
            received are discarded. This means that a gap has occurred
            in the event stream.
          </p></li><li class="listitem"><p>
            <code class="literal">COMPLETELY_DISCARDING</code>: No epochs are
            buffered.
          </p></li><li class="listitem"><p>
            <code class="literal">PARTIALLY_BUFFERING</code>: The buffer free
            percentage following the gap has risen to the threshold,
            which can be set in the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client
            using the
            <a class="link" href="mysql-cluster.html#sysvar_ndb_eventbuffer_free_percent"><code class="literal">ndb_eventbuffer_free_percent</code></a>
            server system variable or in NDB API applications by calling
            <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb-set-eventbuffer-free-percent.html" target="_top"><code class="literal">set_eventbuffer_free_percent()</code></a>.
            New epochs are buffered. Epochs that could not be completed
            due to the gap are discarded.
          </p></li><li class="listitem"><p>
            <code class="literal">COMPLETELY_BUFFERING</code>: All epochs received
            are being buffered, which means that there is sufficient
            event buffer memory. The gap in the event stream has been
            closed.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndb-transporter-errors"></a>22.5.7.4 NDB Cluster: NDB Transporter Errors</h4>

</div>

</div>

</div>
<p>
        This section lists error codes, names, and messages that are
        written to the cluster log in the event of transporter errors.
</p>
<div class="table">
<a name="idm140091580946832"></a><p class="title"><b>Table 22.374 Error codes generated by transporter errors</b></p>
<div class="table-contents">
<table><col width="10%"><col width="60%"><col width="30%"><thead><tr>
            <th scope="col">Error Code</th>
            <th scope="col">Error Name</th>
            <th scope="col">Error Text</th>
          </tr></thead><tbody><tr>
            <td scope="row"><span class="errorcode">0x00</span></td>
            <td><span class="errorname">TE_NO_ERROR</span></td>
            <td><span class="errortext">No error</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x01</span></td>
            <td><span class="errorname">TE_ERROR_CLOSING_SOCKET</span></td>
            <td><span class="errortext">Error found during closing of socket</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x02</span></td>
            <td><span class="errorname">TE_ERROR_IN_SELECT_BEFORE_ACCEPT</span></td>
            <td><span class="errortext">Error found before accept. The transporter will
              retry</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x03</span></td>
            <td><span class="errorname">TE_INVALID_MESSAGE_LENGTH</span></td>
            <td><span class="errortext">Error found in message (invalid message length)</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x04</span></td>
            <td><span class="errorname">TE_INVALID_CHECKSUM</span></td>
            <td><span class="errortext">Error found in message (checksum)</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x05</span></td>
            <td><span class="errorname">TE_COULD_NOT_CREATE_SOCKET</span></td>
            <td><span class="errortext">Error found while creating socket(can't create
              socket)</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x06</span></td>
            <td><span class="errorname">TE_COULD_NOT_BIND_SOCKET</span></td>
            <td><span class="errortext">Error found while binding server socket</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x07</span></td>
            <td><span class="errorname">TE_LISTEN_FAILED</span></td>
            <td><span class="errortext">Error found while listening to server socket</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x08</span></td>
            <td><span class="errorname">TE_ACCEPT_RETURN_ERROR</span></td>
            <td><span class="errortext">Error found during accept(accept return error)</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x0b</span></td>
            <td><span class="errorname">TE_SHM_DISCONNECT</span></td>
            <td><span class="errortext">The remote node has disconnected</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x0c</span></td>
            <td><span class="errorname">TE_SHM_IPC_STAT</span></td>
            <td><span class="errortext">Unable to check shm segment</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x0d</span></td>
            <td><span class="errorname">TE_SHM_UNABLE_TO_CREATE_SEGMENT</span></td>
            <td><span class="errortext">Unable to create shm segment</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x0e</span></td>
            <td><span class="errorname">TE_SHM_UNABLE_TO_ATTACH_SEGMENT</span></td>
            <td><span class="errortext">Unable to attach shm segment</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x0f</span></td>
            <td><span class="errorname">TE_SHM_UNABLE_TO_REMOVE_SEGMENT</span></td>
            <td><span class="errortext">Unable to remove shm segment</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x10</span></td>
            <td><span class="errorname">TE_TOO_SMALL_SIGID</span></td>
            <td><span class="errortext">Sig ID too small</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x11</span></td>
            <td><span class="errorname">TE_TOO_LARGE_SIGID</span></td>
            <td><span class="errortext">Sig ID too large</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x12</span></td>
            <td><span class="errorname">TE_WAIT_STACK_FULL</span></td>
            <td><span class="errortext">Wait stack was full</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x13</span></td>
            <td><span class="errorname">TE_RECEIVE_BUFFER_FULL</span></td>
            <td><span class="errortext">Receive buffer was full</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x14</span></td>
            <td><span class="errorname">TE_SIGNAL_LOST_SEND_BUFFER_FULL</span></td>
            <td><span class="errortext">Send buffer was full,and trying to force send
              fails</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x15</span></td>
            <td><span class="errorname">TE_SIGNAL_LOST</span></td>
            <td><span class="errortext">Send failed for unknown reason(signal lost)</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x16</span></td>
            <td><span class="errorname">TE_SEND_BUFFER_FULL</span></td>
            <td><span class="errortext">The send buffer was full, but sleeping for a while
              solved</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x0017</span></td>
            <td><span class="errorname">TE_SCI_LINK_ERROR</span></td>
            <td><span class="errortext">There is no link from this node to the switch</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x18</span></td>
            <td><span class="errorname">TE_SCI_UNABLE_TO_START_SEQUENCE</span></td>
            <td><span class="errortext">Could not start a sequence, because system resources are
              exumed or no sequence has been created</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x19</span></td>
            <td><span class="errorname">TE_SCI_UNABLE_TO_REMOVE_SEQUENCE</span></td>
            <td><span class="errortext">Could not remove a sequence</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x1a</span></td>
            <td><span class="errorname">TE_SCI_UNABLE_TO_CREATE_SEQUENCE</span></td>
            <td><span class="errortext">Could not create a sequence, because system resources are
              exempted. Must reboot</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x1b</span></td>
            <td><span class="errorname">TE_SCI_UNRECOVERABLE_DATA_TFX_ERROR</span></td>
            <td><span class="errortext">Tried to send data on redundant link but failed</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x1c</span></td>
            <td><span class="errorname">TE_SCI_CANNOT_INIT_LOCALSEGMENT</span></td>
            <td><span class="errortext">Cannot initialize local segment</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x1d</span></td>
            <td><span class="errorname">TE_SCI_CANNOT_MAP_REMOTESEGMENT</span></td>
            <td><span class="errortext">Cannot map remote segment</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x1e</span></td>
            <td><span class="errorname">TE_SCI_UNABLE_TO_UNMAP_SEGMENT</span></td>
            <td><span class="errortext">Cannot free the resources used by this segment (step
              1)</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x1f</span></td>
            <td><span class="errorname">TE_SCI_UNABLE_TO_REMOVE_SEGMENT</span></td>
            <td><span class="errortext">Cannot free the resources used by this segment (step
              2)</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x20</span></td>
            <td><span class="errorname">TE_SCI_UNABLE_TO_DISCONNECT_SEGMENT</span></td>
            <td><span class="errortext">Cannot disconnect from a remote segment</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x21</span></td>
            <td><span class="errorname">TE_SHM_IPC_PERMANENT</span></td>
            <td><span class="errortext">Shm ipc Permanent error</span></td>
          </tr><tr>
            <td scope="row"><span class="errorcode">0x22</span></td>
            <td><span class="errorname">TE_SCI_UNABLE_TO_CLOSE_CHANNEL</span></td>
            <td><span class="errortext">Unable to close the sci channel and the resources
              allocated</span></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-single-user-mode"></a>22.5.8 NDB Cluster Single User Mode</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091580805744"></a><a class="indexterm" name="idm140091580804256"></a><p>
      <span class="firstterm">Single user mode</span> enables the
      database administrator to restrict access to the database system
      to a single API node, such as a MySQL server (SQL node) or an
      instance of <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>. When entering single
      user mode, connections to all other API nodes are closed
      gracefully and all running transactions are aborted. No new
      transactions are permitted to start.
    </p><p>
      Once the cluster has entered single user mode, only the designated
      API node is granted access to the database.
    </p><p>
      You can use the <code class="literal">ALL STATUS</code> command in the
      <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> client to see when the cluster has
      entered single user mode. You can also check the
      <code class="literal">status</code> column of the
      <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-nodes" title="22.5.10.28 The ndbinfo nodes Table"><code class="literal">ndbinfo.nodes</code></a> table (see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbinfo-nodes" title="22.5.10.28 The ndbinfo nodes Table">Section 22.5.10.28, “The ndbinfo nodes Table”</a>, for more
      information).
    </p><p>
      Example:
    </p><pre data-lang="ndbmgm" class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>ENTER SINGLE USER MODE 5</code></strong>
</pre><p>
      After this command has executed and the cluster has entered single
      user mode, the API node whose node ID is <code class="literal">5</code>
      becomes the cluster's only permitted user.
    </p><p>
      The node specified in the preceding command must be an API node;
      attempting to specify any other type of node will be rejected.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        When the preceding command is invoked, all transactions running
        on the designated node are aborted, the connection is closed,
        and the server must be restarted.
</p>
</div>
<p>
      The command <code class="literal">EXIT SINGLE USER MODE</code> changes the
      state of the cluster's data nodes from single user mode to normal
      mode. API nodes—such as MySQL Servers—waiting for a
      connection (that is, waiting for the cluster to become ready and
      available), are again permitted to connect. The API node denoted
      as the single-user node continues to run (if still connected)
      during and after the state change.
    </p><p>
      Example:
    </p><pre data-lang="ndbmgm" class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>EXIT SINGLE USER MODE</code></strong>
</pre><a class="indexterm" name="idm140091580785920"></a><p>
      There are two recommended ways to handle a node failure when
      running in single user mode:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Method 1:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
              Finish all single user mode transactions
            </p></li><li class="listitem"><p>
              Issue the <code class="literal">EXIT SINGLE USER MODE</code> command
            </p></li><li class="listitem"><p>
              Restart the cluster's data nodes
</p></li></ol>
</div>
</li><li class="listitem"><p>
          Method 2:
        </p><p>
          Restart storage nodes prior to entering single user mode.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-sql-statements"></a>22.5.9 Quick Reference: NDB Cluster SQL Statements</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091580775856"></a><a class="indexterm" name="idm140091580774400"></a><p>
      This section discusses several SQL statements that can prove
      useful in managing and monitoring a MySQL server that is connected
      to an NDB Cluster, and in some cases provide information about the
      cluster itself.
</p>
<div class="itemizedlist">
<a class="indexterm" name="idm140091580772416"></a><a class="indexterm" name="idm140091580770928"></a><a class="indexterm" name="idm140091580769856"></a><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <a class="link" href="sql-syntax.html#show-engine" title="13.7.6.15 SHOW ENGINE Syntax"><code class="literal">SHOW ENGINE NDB
          STATUS</code></a>,
          <a class="link" href="sql-syntax.html#show-engine" title="13.7.6.15 SHOW ENGINE Syntax"><code class="literal">SHOW ENGINE
          NDBCLUSTER STATUS</code></a>
        </p><p>
          The output of this statement contains information about the
          server's connection to the cluster, creation and usage of NDB
          Cluster objects, and binary logging for NDB Cluster
          replication.
        </p><p>
          See <a class="xref" href="sql-syntax.html#show-engine" title="13.7.6.15 SHOW ENGINE Syntax">Section 13.7.6.15, “SHOW ENGINE Syntax”</a>, for a usage example and
          more detailed information.
        </p></li><li class="listitem"><p>
          <a class="indexterm" name="idm140091580763216"></a>

          <a class="link" href="sql-syntax.html#show-engines" title="13.7.6.16 SHOW ENGINES Syntax"><code class="literal">SHOW ENGINES</code></a>
        </p><p>
          This statement can be used to determine whether or not
          clustering support is enabled in the MySQL server, and if so,
          whether it is active.
        </p><p>
          See <a class="xref" href="sql-syntax.html#show-engines" title="13.7.6.16 SHOW ENGINES Syntax">Section 13.7.6.16, “SHOW ENGINES Syntax”</a>, for more detailed
          information.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
            This statement does not support a
            <a class="link" href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause. However, you can
            use <a class="link" href="functions.html#operator_like"><code class="literal">LIKE</code></a> to filter queries
            against the
            <a class="link" href="information-schema.html#engines-table" title="25.9 The INFORMATION_SCHEMA ENGINES Table"><code class="literal">INFORMATION_SCHEMA.ENGINES</code></a>
            table, as discussed in the next item.
</p>
</div>
</li><li class="listitem"><p>
          <a class="indexterm" name="idm140091580753424"></a>

          <code class="literal">SELECT * FROM INFORMATION_SCHEMA.ENGINES [WHERE
          ENGINE LIKE 'NDB%']</code>
        </p><p>
          This is the equivalent of <a class="link" href="sql-syntax.html#show-engines" title="13.7.6.16 SHOW ENGINES Syntax"><code class="literal">SHOW
          ENGINES</code></a>, but uses the
          <a class="link" href="information-schema.html#engines-table" title="25.9 The INFORMATION_SCHEMA ENGINES Table"><code class="literal">ENGINES</code></a> table of the
          <code class="literal">INFORMATION_SCHEMA</code> database. Unlike the
          case with the <a class="link" href="sql-syntax.html#show-engines" title="13.7.6.16 SHOW ENGINES Syntax"><code class="literal">SHOW ENGINES</code></a>
          statement, it is possible to filter the results using a
          <a class="link" href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, and to select
          specific columns to obtain information that may be of use in
          scripts. For example, the following query shows whether the
          server was built with <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> support
          and, if so, whether it is enabled:
        </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT SUPPORT FROM INFORMATION_SCHEMA.ENGINES</code></strong>
    -&gt;   <strong class="userinput"><code>WHERE ENGINE LIKE 'NDB%';</code></strong>
+---------+
| support |
+---------+
| ENABLED |
+---------+
</pre><p>
          See <a class="xref" href="information-schema.html#engines-table" title="25.9 The INFORMATION_SCHEMA ENGINES Table">Section 25.9, “The INFORMATION_SCHEMA ENGINES Table”</a>, for more information.
        </p></li><li class="listitem"><p>
          <a class="indexterm" name="idm140091580739168"></a>

          <code class="literal">SHOW VARIABLES LIKE 'NDB%'</code>
        </p><p>
          This statement provides a list of most server system variables
          relating to the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage
          engine, and their values, as shown here:
        </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE 'NDB%';</code></strong>
+-------------------------------------+-------+
| Variable_name                       | Value |
+-------------------------------------+-------+
| ndb_autoincrement_prefetch_sz       | 32    |
| ndb_cache_check_time                | 0     |
| ndb_extra_logging                   | 0     |
| ndb_force_send                      | ON    |
| ndb_index_stat_cache_entries        | 32    |
| ndb_index_stat_enable               | OFF   |
| ndb_index_stat_update_freq          | 20    |
| ndb_report_thresh_binlog_epoch_slip | 3     |
| ndb_report_thresh_binlog_mem_usage  | 10    |
| ndb_use_copying_alter_table         | OFF   |
| ndb_use_exact_count                 | ON    |
| ndb_use_transactions                | ON    |
+-------------------------------------+-------+
</pre><p>
          See <a class="xref" href="server-administration.html#server-system-variables" title="5.1.8 Server System Variables">Section 5.1.8, “Server System Variables”</a>, for more
          information.
        </p></li><li class="listitem"><p>
          <a class="indexterm" name="idm140091580729968"></a>

          <code class="literal">SELECT * FROM INFORMATION_SCHEMA.GLOBAL_VARIABLES
          WHERE VARIABLE_NAME LIKE 'NDB%';</code>
        </p><p>
          This statement is the equivalent of the
          <a class="link" href="mysql-cluster.html#ndbclient-show"><code class="literal">SHOW</code></a> command described in
          the previous item, and provides almost identical output, as
          shown here:
        </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT * FROM INFORMATION_SCHEMA.GLOBAL_VARIABLES</code></strong>
    -&gt;   <strong class="userinput"><code>WHERE VARIABLE_NAME LIKE 'NDB%';</code></strong>
+-------------------------------------+----------------+
| VARIABLE_NAME                       | VARIABLE_VALUE |
+-------------------------------------+----------------+
| NDB_AUTOINCREMENT_PREFETCH_SZ       | 32             |
| NDB_CACHE_CHECK_TIME                | 0              |
| NDB_EXTRA_LOGGING                   | 0              |
| NDB_FORCE_SEND                      | ON             |
| NDB_INDEX_STAT_CACHE_ENTRIES        | 32             |
| NDB_INDEX_STAT_ENABLE               | OFF            |
| NDB_INDEX_STAT_UPDATE_FREQ          | 20             |
| NDB_REPORT_THRESH_BINLOG_EPOCH_SLIP | 3              |
| NDB_REPORT_THRESH_BINLOG_MEM_USAGE  | 10             |
| NDB_USE_COPYING_ALTER_TABLE         | OFF            |
| NDB_USE_EXACT_COUNT                 | ON             |
| NDB_USE_TRANSACTIONS                | ON             |
+-------------------------------------+----------------+
</pre><p>
          Unlike the case with the
          <a class="link" href="mysql-cluster.html#ndbclient-show"><code class="literal">SHOW</code></a> command, it is
          possible to select individual columns. For example:
        </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT VARIABLE_VALUE </code></strong>
    -&gt;   <strong class="userinput"><code>FROM INFORMATION_SCHEMA.GLOBAL_VARIABLES</code></strong>
    -&gt;   <strong class="userinput"><code>WHERE VARIABLE_NAME = 'ndb_force_send';</code></strong>
+----------------+
| VARIABLE_VALUE |
+----------------+
| ON             |
+----------------+
</pre><p>
          See <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/variables-table.html" target="_top">The INFORMATION_SCHEMA GLOBAL_VARIABLES and SESSION_VARIABLES Tables</a>, and
          <a class="xref" href="server-administration.html#server-system-variables" title="5.1.8 Server System Variables">Section 5.1.8, “Server System Variables”</a>, for more
          information.
        </p></li><li class="listitem"><p>
          <a class="indexterm" name="idm140091580714896"></a>

          <code class="literal">SHOW STATUS LIKE 'NDB%'</code>
        </p><p>
          This statement shows at a glance whether or not the MySQL
          server is acting as a cluster SQL node, and if so, it provides
          the MySQL server's cluster node ID, the host name and port for
          the cluster management server to which it is connected, and
          the number of data nodes in the cluster, as shown here:
        </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'NDB%';</code></strong>
+--------------------------+----------------+
| Variable_name            | Value          |
+--------------------------+----------------+
| Ndb_cluster_node_id      | 10             |
| Ndb_config_from_host     | 198.51.100.103 |
| Ndb_config_from_port     | 1186           |
| Ndb_number_of_data_nodes | 4              |
+--------------------------+----------------+
</pre><p>
          If the MySQL server was built with clustering support, but it
          is not connected to a cluster, all rows in the output of this
          statement contain a zero or an empty string:
        </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'NDB%';</code></strong>
+--------------------------+-------+
| Variable_name            | Value |
+--------------------------+-------+
| Ndb_cluster_node_id      | 0     |
| Ndb_config_from_host     |       |
| Ndb_config_from_port     | 0     |
| Ndb_number_of_data_nodes | 0     |
+--------------------------+-------+
</pre><p>
          See also <a class="xref" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax">Section 13.7.6.35, “SHOW STATUS Syntax”</a>.
        </p></li><li class="listitem"><p>
          <a class="indexterm" name="idm140091580705568"></a>

          <code class="literal">SELECT * FROM INFORMATION_SCHEMA.GLOBAL_STATUS WHERE
          VARIABLE_NAME LIKE 'NDB%';</code>
        </p><p>
          This statement provides similar output to the
          <a class="link" href="mysql-cluster.html#ndbclient-show"><code class="literal">SHOW</code></a> command discussed in
          the previous item. However, unlike the case with
          <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW STATUS</code></a>, it is possible
          using the <a class="link" href="sql-syntax.html#select" title="13.2.10 SELECT Syntax"><code class="literal">SELECT</code></a> to extract
          values in SQL for use in scripts for monitoring and automation
          purposes.
        </p><p>
          See <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/status-table.html" target="_top">The INFORMATION_SCHEMA GLOBAL_STATUS and SESSION_STATUS Tables</a>, for more information.
</p></li></ul>
</div>
<p>
      You can also query the tables in the
      <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo" title="22.5.10 ndbinfo: The NDB Cluster Information Database"><code class="literal">ndbinfo</code></a> information database for
      real-time data about many NDB Cluster operations. See
      <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbinfo" title="22.5.10 ndbinfo: The NDB Cluster Information Database">Section 22.5.10, “ndbinfo: The NDB Cluster Information Database”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-ndbinfo"></a>22.5.10 ndbinfo: The NDB Cluster Information Database</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-arbitrator-validity-detail">22.5.10.1 The ndbinfo arbitrator_validity_detail Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-arbitrator-validity-summary">22.5.10.2 The ndbinfo arbitrator_validity_summary Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-blocks">22.5.10.3 The ndbinfo blocks Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-cluster-locks">22.5.10.4 The ndbinfo cluster_locks Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-cluster-operations">22.5.10.5 The ndbinfo cluster_operations Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-cluster-transactions">22.5.10.6 The ndbinfo cluster_transactions Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-config-nodes">22.5.10.7 The ndbinfo config_nodes Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-config-params">22.5.10.8 The ndbinfo config_params Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-config-values">22.5.10.9 The ndbinfo config_values Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-counters">22.5.10.10 The ndbinfo counters Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-cpustat">22.5.10.11 The ndbinfo cpustat Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-cpustat-50ms">22.5.10.12 The ndbinfo cpustat_50ms Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-cpustat-1sec">22.5.10.13 The ndbinfo cpustat_1sec Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-cpustat-20sec">22.5.10.14 The ndbinfo cpustat_20sec Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-dict-obj-info">22.5.10.15 The ndbinfo dict_obj_info Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-dict-obj-types">22.5.10.16 The ndbinfo dict_obj_types Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-disk-write-speed-base">22.5.10.17 The ndbinfo disk_write_speed_base Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-disk-write-speed-aggregate">22.5.10.18 The ndbinfo disk_write_speed_aggregate Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-disk-write-speed-aggregate-node">22.5.10.19 The ndbinfo disk_write_speed_aggregate_node Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-diskpagebuffer">22.5.10.20 The ndbinfo diskpagebuffer Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-error-messages">22.5.10.21 The ndbinfo error_messages Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-locks-per-fragment">22.5.10.22 The ndbinfo locks_per_fragment Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-logbuffers">22.5.10.23 The ndbinfo logbuffers Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-logspaces">22.5.10.24 The ndbinfo logspaces Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-membership">22.5.10.25 The ndbinfo membership Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-memoryusage">22.5.10.26 The ndbinfo memoryusage Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-memory-per-fragment">22.5.10.27 The ndbinfo memory_per_fragment Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-nodes">22.5.10.28 The ndbinfo nodes Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-operations-per-fragment">22.5.10.29 The ndbinfo operations_per_fragment Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-processes">22.5.10.30 The ndbinfo processes Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-resources">22.5.10.31 The ndbinfo resources Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-restart-info">22.5.10.32 The ndbinfo restart_info Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-server-locks">22.5.10.33 The ndbinfo server_locks Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-server-operations">22.5.10.34 The ndbinfo server_operations Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-server-transactions">22.5.10.35 The ndbinfo server_transactions Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-table-distribution-status">22.5.10.36 The ndbinfo table_distribution_status Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-table-fragments">22.5.10.37 The ndbinfo table_fragments Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-table-info">22.5.10.38 The ndbinfo table_info Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-table-replicas">22.5.10.39 The ndbinfo table_replicas Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-tc-time-track-stats">22.5.10.40 The ndbinfo tc_time_track_stats Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-threadblocks">22.5.10.41 The ndbinfo threadblocks Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-threads">22.5.10.42 The ndbinfo threads Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-threadstat">22.5.10.43 The ndbinfo threadstat Table</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-transporters">22.5.10.44 The ndbinfo transporters Table</a></span></dt></dl>
</div>
<a class="indexterm" name="idm140091580693648"></a><p>
      <code class="literal">ndbinfo</code> is a database containing information
      specific to NDB Cluster.
    </p><p>
      This database contains a number of tables, each providing a
      different sort of data about NDB Cluster node status, resource
      usage, and operations. You can find more detailed information
      about each of these tables in the next several sections.
    </p><a class="indexterm" name="idm140091580690032"></a><p>
      <code class="literal">ndbinfo</code> is included with NDB Cluster support in
      the MySQL Server; no special compilation or configuration steps
      are required; the tables are created by the MySQL Server when it
      connects to the cluster. You can verify that
      <code class="literal">ndbinfo</code> support is active in a given MySQL
      Server instance using <a class="link" href="sql-syntax.html#show-plugins" title="13.7.6.25 SHOW PLUGINS Syntax"><code class="literal">SHOW PLUGINS</code></a>;
      if <code class="literal">ndbinfo</code> support is enabled, you should see a
      row containing <code class="literal">ndbinfo</code> in the
      <code class="literal">Name</code> column and <code class="literal">ACTIVE</code> in
      the <code class="literal">Status</code> column, as shown here (emphasized
      text):
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW PLUGINS;</code></strong>
+----------------------------------+--------+--------------------+---------+---------+
| Name                             | Status | Type               | Library | License |
+----------------------------------+--------+--------------------+---------+---------+
| binlog                           | ACTIVE | STORAGE ENGINE     | NULL    | GPL     |
| mysql_native_password            | ACTIVE | AUTHENTICATION     | NULL    | GPL     |
| sha256_password                  | ACTIVE | AUTHENTICATION     | NULL    | GPL     |
| MRG_MYISAM                       | ACTIVE | STORAGE ENGINE     | NULL    | GPL     |
| MEMORY                           | ACTIVE | STORAGE ENGINE     | NULL    | GPL     |
| CSV                              | ACTIVE | STORAGE ENGINE     | NULL    | GPL     |
| MyISAM                           | ACTIVE | STORAGE ENGINE     | NULL    | GPL     |
| InnoDB                           | ACTIVE | STORAGE ENGINE     | NULL    | GPL     |
| INNODB_TRX                       | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_LOCKS                     | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_LOCK_WAITS                | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_CMP                       | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_CMP_RESET                 | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_CMPMEM                    | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_CMPMEM_RESET              | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_CMP_PER_INDEX             | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_CMP_PER_INDEX_RESET       | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_BUFFER_PAGE               | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_BUFFER_PAGE_LRU           | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_BUFFER_POOL_STATS         | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_TEMP_TABLE_INFO           | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_METRICS                   | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_FT_DEFAULT_STOPWORD       | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_FT_DELETED                | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_FT_BEING_DELETED          | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_FT_CONFIG                 | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_FT_INDEX_CACHE            | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_FT_INDEX_TABLE            | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_SYS_TABLES                | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_SYS_TABLESTATS            | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_SYS_INDEXES               | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_SYS_COLUMNS               | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_SYS_FIELDS                | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_SYS_FOREIGN               | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_SYS_FOREIGN_COLS          | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_SYS_TABLESPACES           | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_SYS_DATAFILES             | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_SYS_VIRTUAL               | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| PERFORMANCE_SCHEMA               | ACTIVE | STORAGE ENGINE     | NULL    | GPL     |
| ndbCluster                      | ACTIVE | STORAGE ENGINE     | NULL    | GPL     |
<span class="emphasis"><em>| ndbinfo                          | ACTIVE | STORAGE ENGINE     | NULL    | GPL     |</em></span>
| ndb_transid_mysql_connection_map | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| BLACKHOLE                        | ACTIVE | STORAGE ENGINE     | NULL    | GPL     |
| ARCHIVE                          | ACTIVE | STORAGE ENGINE     | NULL    | GPL     |
| partition                        | ACTIVE | STORAGE ENGINE     | NULL    | GPL     |
| ngram                            | ACTIVE | FTPARSER           | NULL    | GPL     |
+----------------------------------+--------+--------------------+---------+---------+
46 rows in set (0.00 sec)
</pre><p>
      You can also do this by checking the output of
      <a class="link" href="sql-syntax.html#show-engines" title="13.7.6.16 SHOW ENGINES Syntax"><code class="literal">SHOW ENGINES</code></a> for a line including
      <code class="literal">ndbinfo</code> in the <code class="literal">Engine</code> column
      and <code class="literal">YES</code> in the <code class="literal">Support</code>
      column, as shown here (emphasized text):
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW ENGINES\G</code></strong>
*************************** 1. row ***************************
      Engine: ndbcluster
     Support: YES
     Comment: Clustered, fault-tolerant tables
Transactions: YES
          XA: NO
  Savepoints: NO
*************************** 2. row ***************************
      Engine: CSV
     Support: YES
     Comment: CSV storage engine
Transactions: NO
          XA: NO
  Savepoints: NO
*************************** 3. row ***************************
      Engine: InnoDB
     Support: DEFAULT
     Comment: Supports transactions, row-level locking, and foreign keys
Transactions: YES
          XA: YES
  Savepoints: YES
*************************** 4. row ***************************
      Engine: BLACKHOLE
     Support: YES
     Comment: /dev/null storage engine (anything you write to it disappears)
Transactions: NO
          XA: NO
  Savepoints: NO
*************************** 5. row ***************************
      Engine: MyISAM
     Support: YES
     Comment: MyISAM storage engine
Transactions: NO
          XA: NO
  Savepoints: NO
*************************** 6. row ***************************
      Engine: MRG_MYISAM
     Support: YES
     Comment: Collection of identical MyISAM tables
Transactions: NO
          XA: NO
  Savepoints: NO
*************************** 7. row ***************************
      Engine: ARCHIVE
     Support: YES
     Comment: Archive storage engine
Transactions: NO
          XA: NO
  Savepoints: NO
<span class="emphasis"><em>*************************** 8. row ***************************
      Engine: ndbinfo
     Support: YES
     Comment: NDB Cluster system information storage engine
Transactions: NO
          XA: NO
  Savepoints: NO</em></span>
*************************** 9. row ***************************
      Engine: PERFORMANCE_SCHEMA
     Support: YES
     Comment: Performance Schema
Transactions: NO
          XA: NO
  Savepoints: NO
*************************** 10. row ***************************
      Engine: MEMORY
     Support: YES
     Comment: Hash based, stored in memory, useful for temporary tables
Transactions: NO
          XA: NO
  Savepoints: NO
10 rows in set (0.00 sec)
</pre><p>
      If <code class="literal">ndbinfo</code> support is enabled, then you can
      access <code class="literal">ndbinfo</code> using SQL statements in
      <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> or another MySQL client. For example, you
      can see <code class="literal">ndbinfo</code> listed in the output of
      <a class="link" href="sql-syntax.html#show-databases" title="13.7.6.14 SHOW DATABASES Syntax"><code class="literal">SHOW DATABASES</code></a>, as shown here
      (emphasized text):
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW DATABASES;</code></strong>
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
<span class="emphasis"><em>| ndbinfo            |</em></span>
| performance_schema |
| sys                |
+--------------------+
5 rows in set (0.04 sec)
</pre><p>
      If the <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> process was not started with the
      <a class="link" href="mysql-cluster.html#option_mysqld_ndbcluster"><code class="option">--ndbcluster</code></a> option,
      <code class="literal">ndbinfo</code> is not available and is not displayed
      by <a class="link" href="sql-syntax.html#show-databases" title="13.7.6.14 SHOW DATABASES Syntax"><code class="literal">SHOW DATABASES</code></a>. If
      <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> was formerly connected to an NDB Cluster
      but the cluster becomes unavailable (due to events such as cluster
      shutdown, loss of network connectivity, and so forth),
      <code class="literal">ndbinfo</code> and its tables remain visible, but an
      attempt to access any tables (other than <code class="literal">blocks</code>
      or <code class="literal">config_params</code>) fails with <span class="errortext">Got
      error 157 'Connection to NDB failed' from NDBINFO</span>.
    </p><p>
      With the exception of the <code class="literal">blocks</code> and
      <code class="literal">config_params</code> tables, what we refer to as
      <code class="literal">ndbinfo</code> <span class="quote">“<span class="quote">tables</span>”</span> are actually
      views generated from internal <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>
      tables not normally visible to the MySQL Server.
    </p><p>
      All <code class="literal">ndbinfo</code> tables are read-only, and are
      generated on demand when queried. Because many of them are
      generated in parallel by the data nodes while other are specific
      to a given SQL node, they are not guaranteed to provide a
      consistent snapshot.
    </p><p>
      In addition, pushing down of joins is not supported on
      <code class="literal">ndbinfo</code> tables; so joining large
      <code class="literal">ndbinfo</code> tables can require transfer of a large
      amount of data to the requesting API node, even when the query
      makes use of a <code class="literal">WHERE</code> clause.
    </p><a class="indexterm" name="idm140091580637984"></a><a class="indexterm" name="idm140091580636496"></a><p>
      <code class="literal">ndbinfo</code> tables are not included in the query
      cache. (Bug #59831)
    </p><p>
      You can select the <code class="literal">ndbinfo</code> database with a
      <a class="link" href="sql-syntax.html#use" title="13.8.4 USE Syntax"><code class="literal">USE</code></a> statement, and then issue a
      <a class="link" href="sql-syntax.html#show-tables" title="13.7.6.37 SHOW TABLES Syntax"><code class="literal">SHOW TABLES</code></a> statement to obtain a
      list of tables, just as for any other database, like this:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>USE ndbinfo;</code></strong>
Database changed

mysql&gt; <strong class="userinput"><code>SHOW TABLES;</code></strong>
+---------------------------------+
| Tables_in_ndbinfo               |
+---------------------------------+
| arbitrator_validity_detail      |
| arbitrator_validity_summary     |
| blocks                          |
| cluster_locks                   |
| cluster_operations              |
| cluster_transactions            |
| config_nodes                    |
| config_params                   |
| config_values                   |
| counters                        |
| cpustat                         |
| cpustat_1sec                    |
| cpustat_20sec                   |
| cpustat_50ms                    |
| dict_obj_info                   |
| dict_obj_types                  |
| disk_write_speed_aggregate      |
| disk_write_speed_aggregate_node |
| disk_write_speed_base           |
| diskpagebuffer                  |
| error_messages                  |
| locks_per_fragment              |
| logbuffers                      |
| logspaces                       |
| membership                      |
| memory_per_fragment             |
| memoryusage                     |
| nodes                           |
| operations_per_fragment         |
| processes                       |
| resources                       |
| restart_info                    |
| server_locks                    |
| server_operations               |
| server_transactions             |
| table_distribution_status       |
| table_fragments                 |
| table_info                      |
| table_replicas                  |
| tc_time_track_stats             |
| threadblocks                    |
| threads                         |
| threadstat                      |
| transporters                    |
+---------------------------------+
44 rows in set (0.00 sec)
</pre><p>
      In NDB 8.0, all <code class="literal">ndbinfo</code> tables use the
      <code class="literal">NDB</code> storage engine; however, an
      <code class="literal">ndbinfo</code> entry still appears in the output of
      <a class="link" href="sql-syntax.html#show-engines" title="13.7.6.16 SHOW ENGINES Syntax"><code class="literal">SHOW ENGINES</code></a> and
      <a class="link" href="sql-syntax.html#show-plugins" title="13.7.6.25 SHOW PLUGINS Syntax"><code class="literal">SHOW PLUGINS</code></a> as described
      previously.
    </p><a class="indexterm" name="idm140091580619232"></a><p>
      You can execute <a class="link" href="sql-syntax.html#select" title="13.2.10 SELECT Syntax"><code class="literal">SELECT</code></a> statements
      against these tables, just as you would normally expect:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT * FROM memoryusage;</code></strong>
+---------+---------------------+--------+------------+------------+-------------+
| node_id | memory_type         | used   | used_pages | total      | total_pages |
+---------+---------------------+--------+------------+------------+-------------+
|       5 | Data memory         | 753664 |         23 | 1073741824 |       32768 |
|       5 | Index memory        | 163840 |         20 | 1074003968 |      131104 |
|       5 | Long message buffer |   2304 |          9 |   67108864 |      262144 |
|       6 | Data memory         | 753664 |         23 | 1073741824 |       32768 |
|       6 | Index memory        | 163840 |         20 | 1074003968 |      131104 |
|       6 | Long message buffer |   2304 |          9 |   67108864 |      262144 |
+---------+---------------------+--------+------------+------------+-------------+
6 rows in set (0.02 sec)
</pre><p>
      More complex queries, such as the two following
      <a class="link" href="sql-syntax.html#select" title="13.2.10 SELECT Syntax"><code class="literal">SELECT</code></a> statements using the
      <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-memoryusage" title="22.5.10.26 The ndbinfo memoryusage Table"><code class="literal">memoryusage</code></a> table, are possible:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT SUM(used) as 'Data Memory Used, All Nodes'</code></strong>
     &gt;     <strong class="userinput"><code>FROM memoryusage</code></strong>
     &gt;     <strong class="userinput"><code>WHERE memory_type = 'Data memory';</code></strong>
+-----------------------------+
| Data Memory Used, All Nodes |
+-----------------------------+
|                        6460 |
+-----------------------------+
1 row in set (0.37 sec)

mysql&gt; <strong class="userinput"><code>SELECT SUM(max) as 'Total IndexMemory Available'</code></strong>
     &gt;     <strong class="userinput"><code>FROM memoryusage</code></strong>
     &gt;     <strong class="userinput"><code>WHERE memory_type = 'Index memory';</code></strong>
+-----------------------------+
| Total IndexMemory Available |
+-----------------------------+
|                       25664 |
+-----------------------------+
1 row in set (0.33 sec)
</pre><p>
      <code class="literal">ndbinfo</code> table and column names are case
      sensitive (as is the name of the <code class="literal">ndbinfo</code>
      database itself). These identifiers are in lowercase. Trying to
      use the wrong lettercase results in an error, as shown in this
      example:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT * FROM nodes;</code></strong>
+---------+--------+---------+-------------+
| node_id | uptime | status  | start_phase |
+---------+--------+---------+-------------+
|       1 |  13602 | STARTED |           0 |
|       2 |     16 | STARTED |           0 |
+---------+--------+---------+-------------+
2 rows in set (0.04 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM Nodes;</code></strong>
<span class="errortext">ERROR 1146 (42S02): Table 'ndbinfo.Nodes' doesn't exist</span>
</pre><p>
      <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a> ignores the
      <code class="literal">ndbinfo</code> database entirely, and excludes it from
      any output. This is true even when using the
      <a class="link" href="programs.html#option_mysqldump_databases"><code class="option">--databases</code></a> or
      <a class="link" href="programs.html#option_mysqldump_all-databases"><code class="option">--all-databases</code></a> option.
    </p><p>
      NDB Cluster also maintains tables in the
      <code class="literal">INFORMATION_SCHEMA</code> information database,
      including the <a class="link" href="information-schema.html#files-table" title="25.11 The INFORMATION_SCHEMA FILES Table"><code class="literal">FILES</code></a> table which
      contains information about files used for NDB Cluster Disk Data
      storage, and the
      <a class="link" href="information-schema.html#ndb-transid-mysql-connection-map-table" title="25.13 The INFORMATION_SCHEMA ndb_transid_mysql_connection_map Table"><code class="literal">ndb_transid_mysql_connection_map</code></a>
      table, which shows the relationships between transactions,
      transaction coordinators, and NDB Cluster API nodes. For more
      information, see the descriptions of the tables or
      <a class="xref" href="mysql-cluster.html#mysql-cluster-i_s-tables" title="22.5.11 INFORMATION_SCHEMA Tables for NDB Cluster">Section 22.5.11, “INFORMATION_SCHEMA Tables for NDB Cluster”</a>.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-arbitrator-validity-detail"></a>22.5.10.1 The ndbinfo arbitrator_validity_detail Table</h4>
</div>
</div>
</div>
<a class="indexterm" name="idm140091580588720"></a><p>
        The <code class="literal">arbitrator_validity_detail</code> table shows
        the view that each data node in the cluster has of the
        arbitrator. It is a subset of the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-membership" title="22.5.10.25 The ndbinfo membership Table"><code class="literal">membership</code></a> table.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">arbitrator_validity_detail</code> table. For
        each column, the table shows the name, data type, and a brief
        description. Additional information can be found in the notes
        following the table.
</p>
<div class="table">
<a name="idm140091580583120"></a><p class="title"><b>Table 22.375 Columns of the arbitrator_validity_detail table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>This node's node ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">arbitrator</code></td>
            <td>integer</td>
            <td>Node ID of arbitrator</td>
          </tr><tr>
            <td scope="row"><code class="literal">arb_ticket</code></td>
            <td>string</td>
            <td>Internal identifier used to track arbitration</td>
          </tr><tr>
            <td scope="row"><code class="literal">arb_connected</code></td>
            <td><code class="literal">Yes</code> or <code class="literal">No</code></td>
            <td>Whether this node is connected to the arbitrator</td>
          </tr><tr>
            <td scope="row"><code class="literal">arb_state</code></td>
            <td>Enumeration (see text)</td>
            <td>Arbitration state</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        The node ID is the same as that reported by <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm -e
        "SHOW"</strong></span></a>.
      </p><p>
        All nodes should show the same <code class="literal">arbitrator</code> and
        <code class="literal">arb_ticket</code> values as well as the same
        <code class="literal">arb_state</code> value. Possible
        <code class="literal">arb_state</code> values are
        <code class="literal">ARBIT_NULL</code>, <code class="literal">ARBIT_INIT</code>,
        <code class="literal">ARBIT_FIND</code>, <code class="literal">ARBIT_PREP1</code>,
        <code class="literal">ARBIT_PREP2</code>, <code class="literal">ARBIT_START</code>,
        <code class="literal">ARBIT_RUN</code>, <code class="literal">ARBIT_CHOOSE</code>,
        <code class="literal">ARBIT_CRASH</code>, and <code class="literal">UNKNOWN</code>.
      </p><p>
        <code class="literal">arb_connected</code> shows whether the current node
        is connected to the <code class="literal">arbitrator</code>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-arbitrator-validity-summary"></a>22.5.10.2 The ndbinfo arbitrator_validity_summary Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091580540496"></a><p>
        The <code class="literal">arbitrator_validity_summary</code> table
        provides a composite view of the arbitrator with regard to the
        cluster's data nodes.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">arbitrator_validity_summary</code> table. For
        each column, the table shows the name, data type, and a brief
        description. Additional information can be found in the notes
        following the table.
</p>
<div class="table">
<a name="idm140091580536352"></a><p class="title"><b>Table 22.376 Columns of the arbitrator_validity_summary table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">arbitrator</code></td>
            <td>integer</td>
            <td>Node ID of arbitrator</td>
          </tr><tr>
            <td scope="row"><code class="literal">arb_ticket</code></td>
            <td>string</td>
            <td>Internal identifier used to track arbitration</td>
          </tr><tr>
            <td scope="row"><code class="literal">arb_connected</code></td>
            <td><code class="literal">Yes</code> or <code class="literal">No</code></td>
            <td>Whether this arbitrator is connected to the cluster</td>
          </tr><tr>
            <td scope="row"><code class="literal">consensus_count</code></td>
            <td>integer</td>
            <td>Number of data nodes that see this node as arbitrator</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        In normal operations, this table should have only 1 row for any
        appreciable length of time. If it has more than 1 row for longer
        than a few moments, then either not all nodes are connected to
        the arbitrator, or all nodes are connected, but do not agree on
        the same arbitrator.
      </p><p>
        The <code class="literal">arbitrator</code> column shows the
        arbitrator's node ID.
      </p><p>
        <code class="literal">arb_ticket</code> is the internal identifier used by
        this arbitrator.
      </p><p>
        <code class="literal">arb_connected</code> shows whether this node is
        connected to the cluster as an arbitrator.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-blocks"></a>22.5.10.3 The ndbinfo blocks Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091580507216"></a><p>
        The <code class="literal">blocks</code> table is a static table which
        simply contains the names and internal IDs of all NDB kernel
        blocks (see <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-kernel-blocks.html" target="_top">NDB Kernel Blocks</a>). It
        is for use by the other
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo" title="22.5.10 ndbinfo: The NDB Cluster Information Database"><code class="literal">ndbinfo</code></a> tables (most of which
        are actually views) in mapping block numbers to block names for
        producing human-readable output.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">blocks</code> table. For each column, the table
        shows the name, data type, and a brief description. Additional
        information can be found in the notes following the table.
</p>
<div class="table">
<a name="idm140091580500944"></a><p class="title"><b>Table 22.377 Columns of the blocks table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">block_number</code></td>
            <td>integer</td>
            <td>Block number</td>
          </tr><tr>
            <td scope="row"><code class="literal">block_name</code></td>
            <td>string</td>
            <td>Block name</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        To obtain a list of all block names, simply execute
        <code class="literal">SELECT block_name FROM ndbinfo.blocks</code>.
        Although this is a static table, its content can vary between
        different NDB Cluster releases.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-cluster-locks"></a>22.5.10.4 The ndbinfo cluster_locks Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091580483376"></a><p>
        The <code class="literal">cluster_locks</code> table provides information
        about current lock requests holding and waiting for locks on
        <code class="literal">NDB</code> tables in an NDB Cluster, and is intended
        as a companion table to
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-cluster-operations" title="22.5.10.5 The ndbinfo cluster_operations Table"><code class="literal">cluster_operations</code></a>.
        Information obtain from the <code class="literal">cluster_locks</code>
        table may be useful in investigating stalls and deadlocks.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">cluster_locks</code> table. For each column, the
        table shows the name, data type, and a brief description.
        Additional information can be found in the notes following the
        table.
</p>
<div class="table">
<a name="idm140091580476192"></a><p class="title"><b>Table 22.378 Columns of the cluster_locks table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>ID of reporting node</td>
          </tr><tr>
            <td scope="row"><code class="literal">block_instance</code></td>
            <td>integer</td>
            <td>ID of reporting LDM instance</td>
          </tr><tr>
            <td scope="row"><code class="literal">tableid</code></td>
            <td>integer</td>
            <td>ID of table containing this row</td>
          </tr><tr>
            <td scope="row"><code class="literal">fragmentid</code></td>
            <td>integer</td>
            <td>ID of fragment containing locked row</td>
          </tr><tr>
            <td scope="row"><code class="literal">rowid</code></td>
            <td>integer</td>
            <td>ID of locked row</td>
          </tr><tr>
            <td scope="row"><code class="literal">transid</code></td>
            <td>integer</td>
            <td>Transaction ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">mode</code></td>
            <td>string</td>
            <td>Lock request mode</td>
          </tr><tr>
            <td scope="row"><code class="literal">state</code></td>
            <td>string</td>
            <td>Lock state</td>
          </tr><tr>
            <td scope="row"><code class="literal">detail</code></td>
            <td>string</td>
            <td>Whether this is first holding lock in row lock queue</td>
          </tr><tr>
            <td scope="row"><code class="literal">op</code></td>
            <td>string</td>
            <td>Operation type</td>
          </tr><tr>
            <td scope="row"><code class="literal">duration_millis</code></td>
            <td>integer</td>
            <td>Milliseconds spent waiting or holding lock</td>
          </tr><tr>
            <td scope="row"><code class="literal">lock_num</code></td>
            <td>integer</td>
            <td>ID of lock object</td>
          </tr><tr>
            <td scope="row"><code class="literal">waiting_for</code></td>
            <td>integer</td>
            <td>Waiting for lock with this ID</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        The table ID (<code class="literal">tableid</code> column) is assigned
        internally, and is the same as that used in other
        <code class="literal">ndbinfo</code> tables. It is also shown in the
        output of <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-show-tables" title="22.4.27 ndb_show_tables — Display List of NDB Tables"><span class="command"><strong>ndb_show_tables</strong></span></a>.
      </p><p>
        The transaction ID (<code class="literal">transid</code> column) is the
        identifier generated by the NDB API for the transaction
        requesting or holding the current lock.
      </p><p>
        The <code class="literal">mode</code> column shows the lock mode; this is
        always one of <code class="literal">S</code> (indicating a shared lock) or
        <code class="literal">X</code> (an exclusive lock). If a transaction holds
        an exclusive lock on a given row, all other locks on that row
        have the same transaction ID.
      </p><p>
        The <code class="literal">state</code> column shows the lock state. Its
        value is always one of <code class="literal">H</code> (holding) or
        <code class="literal">W</code> (waiting). A waiting lock request waits for
        a lock held by a different transaction.
      </p><p>
        When the <code class="literal">detail</code> column contains a
        <code class="literal">*</code> (asterisk character), this means that this
        lock is the first holding lock in the affected row's lock
        queue; otherwise, this column is empty. This information can be
        used to help identify the unique entries in a list of lock
        requests.
      </p><p>
        The <code class="literal">op</code> column shows the type of operation
        requesting the lock. This is always one of the values
        <code class="literal">READ</code>, <code class="literal">INSERT</code>,
        <code class="literal">UPDATE</code>, <code class="literal">DELETE</code>,
        <code class="literal">SCAN</code>, or <code class="literal">REFRESH</code>.
      </p><p>
        The <code class="literal">duration_millis</code> column shows the number
        of milliseconds for which this lock request has been waiting or
        holding the lock. This is reset to 0 when a lock is granted for
        a waiting request.
      </p><p>
        The lock ID (<code class="literal">lockid</code> column) is unique to this
        node and block instance.
      </p><p>
        The lock state is shown in the <code class="literal">lock_state</code>
        column; if this is <code class="literal">W</code>, the lock is waiting to
        be granted, and the <code class="literal">waiting_for</code> column shows
        the lock ID of the lock object this request is waiting for.
        Otherwise, the <code class="literal">waiting_for</code> column is empty.
        <code class="literal">waiting_for</code> can refer only to locks on the
        same row, as identified by <code class="literal">node_id</code>,
        <code class="literal">block_instance</code>, <code class="literal">tableid</code>,
        <code class="literal">fragmentid</code>, and <code class="literal">rowid</code>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-cluster-operations"></a>22.5.10.5 The ndbinfo cluster_operations Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091580391264"></a><p>
        The <code class="literal">cluster_operations</code> table provides a
        per-operation (stateful primary key op) view of all activity in
        the NDB Cluster from the point of view of the local data
        management (LQH) blocks (see
        <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-kernel-blocks-dblqh.html" target="_top">The DBLQH Block</a>).
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">cluster_operations</code> table. For each
        column, the table shows the name, data type, and a brief
        description. Additional information can be found in the notes
        following the table.
</p>
<div class="table">
<a name="idm140091580386288"></a><p class="title"><b>Table 22.379 Columns of the cluster_operations table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>Node ID of reporting LQH block</td>
          </tr><tr>
            <td scope="row"><code class="literal">block_instance</code></td>
            <td>integer</td>
            <td>LQH block instance</td>
          </tr><tr>
            <td scope="row"><code class="literal">transid</code></td>
            <td>integer</td>
            <td>Transaction ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">operation_type</code></td>
            <td>string</td>
            <td>Operation type (see text for possible values)</td>
          </tr><tr>
            <td scope="row"><code class="literal">state</code></td>
            <td>string</td>
            <td>Operation state (see text for possible values)</td>
          </tr><tr>
            <td scope="row"><code class="literal">tableid</code></td>
            <td>integer</td>
            <td>Table ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">fragmentid</code></td>
            <td>integer</td>
            <td>Fragment ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">client_node_id</code></td>
            <td>integer</td>
            <td>Client node ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">client_block_ref</code></td>
            <td>integer</td>
            <td>Client block reference</td>
          </tr><tr>
            <td scope="row"><code class="literal">tc_node_id</code></td>
            <td>integer</td>
            <td>Transaction coordinator node ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">tc_block_no</code></td>
            <td>integer</td>
            <td>Transaction coordinator block number</td>
          </tr><tr>
            <td scope="row"><code class="literal">tc_block_instance</code></td>
            <td>integer</td>
            <td>Transaction coordinator block instance</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        The transaction ID is a unique 64-bit number which can be
        obtained using the NDB API's
        <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndbtransaction-gettransactionid.html" target="_top"><code class="literal">getTransactionId()</code></a>
        method. (Currently, the MySQL Server does not expose the NDB API
        transaction ID of an ongoing transaction.)
      </p><p>
        The <code class="literal">operation_type</code> column can take any one of
        the values <code class="literal">READ</code>, <code class="literal">READ-SH</code>,
        <code class="literal">READ-EX</code>, <code class="literal">INSERT</code>,
        <code class="literal">UPDATE</code>, <code class="literal">DELETE</code>,
        <code class="literal">WRITE</code>, <code class="literal">UNLOCK</code>,
        <code class="literal">REFRESH</code>, <code class="literal">SCAN</code>,
        <code class="literal">SCAN-SH</code>, <code class="literal">SCAN-EX</code>, or
        <code class="literal">&lt;unknown&gt;</code>.
      </p><p>
        The <code class="literal">state</code> column can have any one of the
        values <code class="literal">ABORT_QUEUED</code>,
        <code class="literal">ABORT_STOPPED</code>, <code class="literal">COMMITTED</code>,
        <code class="literal">COMMIT_QUEUED</code>,
        <code class="literal">COMMIT_STOPPED</code>,
        <code class="literal">COPY_CLOSE_STOPPED</code>,
        <code class="literal">COPY_FIRST_STOPPED</code>,
        <code class="literal">COPY_STOPPED</code>, <code class="literal">COPY_TUPKEY</code>,
        <code class="literal">IDLE</code>, <code class="literal">LOG_ABORT_QUEUED</code>,
        <code class="literal">LOG_COMMIT_QUEUED</code>,
        <code class="literal">LOG_COMMIT_QUEUED_WAIT_SIGNAL</code>,
        <code class="literal">LOG_COMMIT_WRITTEN</code>,
        <code class="literal">LOG_COMMIT_WRITTEN_WAIT_SIGNAL</code>,
        <code class="literal">LOG_QUEUED</code>, <code class="literal">PREPARED</code>,
        <code class="literal">PREPARED_RECEIVED_COMMIT</code>,
        <code class="literal">SCAN_CHECK_STOPPED</code>,
        <code class="literal">SCAN_CLOSE_STOPPED</code>,
        <code class="literal">SCAN_FIRST_STOPPED</code>,
        <code class="literal">SCAN_RELEASE_STOPPED</code>,
        <code class="literal">SCAN_STATE_USED</code>,
        <code class="literal">SCAN_STOPPED</code>, <code class="literal">SCAN_TUPKEY</code>,
        <code class="literal">STOPPED</code>, <code class="literal">TC_NOT_CONNECTED</code>,
        <code class="literal">WAIT_ACC</code>, <code class="literal">WAIT_ACC_ABORT</code>,
        <code class="literal">WAIT_AI_AFTER_ABORT</code>,
        <code class="literal">WAIT_ATTR</code>, <code class="literal">WAIT_SCAN_AI</code>,
        <code class="literal">WAIT_TUP</code>, <code class="literal">WAIT_TUPKEYINFO</code>,
        <code class="literal">WAIT_TUP_COMMIT</code>, or
        <code class="literal">WAIT_TUP_TO_ABORT</code>. (If the MySQL Server is
        running with
        <a class="link" href="mysql-cluster.html#sysvar_ndbinfo_show_hidden"><code class="literal">ndbinfo_show_hidden</code></a> enabled,
        you can view this list of states by selecting from the
        <code class="literal">ndb$dblqh_tcconnect_state</code> table, which is
        normally hidden.)
      </p><p>
        You can obtain the name of an <code class="literal">NDB</code> table from
        its table ID by checking the output of
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-show-tables" title="22.4.27 ndb_show_tables — Display List of NDB Tables"><span class="command"><strong>ndb_show_tables</strong></span></a>.
      </p><p>
        The <code class="literal">fragid</code> is the same as the partition
        number seen in the output of <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-desc" title="22.4.9 ndb_desc — Describe NDB Tables"><span class="command"><strong>ndb_desc</strong></span></a>
        <a class="link" href="mysql-cluster.html#option_ndb_desc_extra-partition-info"><code class="option">--extra-partition-info</code></a> (short
        form <code class="option">-p</code>).
      </p><p>
        In <code class="literal">client_node_id</code> and
        <code class="literal">client_block_ref</code>, <code class="literal">client</code>
        refers to an NDB Cluster API or SQL node (that is, an NDB API
        client or a MySQL Server attached to the cluster).
      </p><p>
        The <code class="literal">block_instance</code> and
        <code class="literal">tc_block_instance</code> column provide,
        respectively, the <code class="literal">DBLQH</code> and
        <code class="literal">DBTC</code> block instance numbers. You can use
        these along with the block names to obtain information about
        specific threads from the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-threadblocks" title="22.5.10.41 The ndbinfo threadblocks Table"><code class="literal">threadblocks</code></a> table.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-cluster-transactions"></a>22.5.10.6 The ndbinfo cluster_transactions Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091580277792"></a><p>
        The <code class="literal">cluster_transactions</code> table shows
        information about all ongoing transactions in an NDB Cluster.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">cluster_transactions</code> table. For each
        column, the table shows the name, data type, and a brief
        description. Additional information can be found in the notes
        following the table.
</p>
<div class="table">
<a name="idm140091580273712"></a><p class="title"><b>Table 22.380 Columns of the cluster_transactions table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>Node ID of transaction coordinator</td>
          </tr><tr>
            <td scope="row"><code class="literal">block_instance</code></td>
            <td>integer</td>
            <td>TC block instance</td>
          </tr><tr>
            <td scope="row"><code class="literal">transid</code></td>
            <td>integer</td>
            <td>Transaction ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">state</code></td>
            <td>string</td>
            <td>Operation state (see text for possible values)</td>
          </tr><tr>
            <td scope="row"><code class="literal">count_operations</code></td>
            <td>integer</td>
            <td>Number of stateful primary key operations in transaction (includes reads
              with locks, as well as DML operations)</td>
          </tr><tr>
            <td scope="row"><code class="literal">outstanding_operations</code></td>
            <td>integer</td>
            <td>Operations still being executed in local data management blocks</td>
          </tr><tr>
            <td scope="row"><code class="literal">inactive_seconds</code></td>
            <td>integer</td>
            <td>Time spent waiting for API</td>
          </tr><tr>
            <td scope="row"><code class="literal">client_node_id</code></td>
            <td>integer</td>
            <td>Client node ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">client_block_ref</code></td>
            <td>integer</td>
            <td>Client block reference</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        The transaction ID is a unique 64-bit number which can be
        obtained using the NDB API's
        <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndbtransaction-gettransactionid.html" target="_top"><code class="literal">getTransactionId()</code></a>
        method. (Currently, the MySQL Server does not expose the NDB API
        transaction ID of an ongoing transaction.)
      </p><p>
        <code class="literal">block_instance</code> refers to an instance of a
        kernel block. Together with the block name, this number can be
        used to look up a given instance in the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-threadblocks" title="22.5.10.41 The ndbinfo threadblocks Table"><code class="literal">threadblocks</code></a> table.
      </p><p>
        The <code class="literal">state</code> column can have any one of the
        values <code class="literal">CS_ABORTING</code>,
        <code class="literal">CS_COMMITTING</code>,
        <code class="literal">CS_COMMIT_SENT</code>,
        <code class="literal">CS_COMPLETE_SENT</code>,
        <code class="literal">CS_COMPLETING</code>,
        <code class="literal">CS_CONNECTED</code>,
        <code class="literal">CS_DISCONNECTED</code>,
        <code class="literal">CS_FAIL_ABORTED</code>,
        <code class="literal">CS_FAIL_ABORTING</code>,
        <code class="literal">CS_FAIL_COMMITTED</code>,
        <code class="literal">CS_FAIL_COMMITTING</code>,
        <code class="literal">CS_FAIL_COMPLETED</code>,
        <code class="literal">CS_FAIL_PREPARED</code>,
        <code class="literal">CS_PREPARE_TO_COMMIT</code>,
        <code class="literal">CS_RECEIVING</code>,
        <code class="literal">CS_REC_COMMITTING</code>,
        <code class="literal">CS_RESTART</code>,
        <code class="literal">CS_SEND_FIRE_TRIG_REQ</code>,
        <code class="literal">CS_STARTED</code>,
        <code class="literal">CS_START_COMMITTING</code>,
        <code class="literal">CS_START_SCAN</code>,
        <code class="literal">CS_WAIT_ABORT_CONF</code>,
        <code class="literal">CS_WAIT_COMMIT_CONF</code>,
        <code class="literal">CS_WAIT_COMPLETE_CONF</code>,
        <code class="literal">CS_WAIT_FIRE_TRIG_REQ</code>. (If the MySQL Server
        is running with
        <a class="link" href="mysql-cluster.html#sysvar_ndbinfo_show_hidden"><code class="literal">ndbinfo_show_hidden</code></a> enabled,
        you can view this list of states by selecting from the
        <code class="literal">ndb$dbtc_apiconnect_state</code> table, which is
        normally hidden.)
      </p><p>
        In <code class="literal">client_node_id</code> and
        <code class="literal">client_block_ref</code>, <code class="literal">client</code>
        refers to an NDB Cluster API or SQL node (that is, an NDB API
        client or a MySQL Server attached to the cluster).
      </p><p>
        The <code class="literal">tc_block_instance</code> column provides the
        <code class="literal">DBTC</code> block instance number. You can use this
        along with the block name to obtain information about specific
        threads from the <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-threadblocks" title="22.5.10.41 The ndbinfo threadblocks Table"><code class="literal">threadblocks</code></a>
        table.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-config-nodes"></a>22.5.10.7 The ndbinfo config_nodes Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091580199728"></a><p>
        The <code class="literal">config_nodes</code> table shows nodes configured
        in an NDB Cluster <code class="filename">config.ini</code> file. For each
        node, the table displays a row containing the node ID, the type
        of node (management node, data node, or API node), and the name
        or IP address of the host on which the node is configured to
        run.
      </p><p>
        This table does not indicate whether a given node is actually
        running, or whether it is currently connected to the cluster.
        Information about nodes connected to an NDB Cluster can be
        obtained from the <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-nodes" title="22.5.10.28 The ndbinfo nodes Table"><code class="literal">nodes</code></a> and
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-processes" title="22.5.10.30 The ndbinfo processes Table"><code class="literal">processes</code></a> table.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">config_nodes</code> table. For each column, the
        table shows the name, data type, and a brief description.
        Additional information can be found in the notes following the
        table.
</p>
<div class="table">
<a name="idm140091580191504"></a><p class="title"><b>Table 22.381 Columns of the config_params table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>The node's ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">node_type</code></td>
            <td>string</td>
            <td>The type of node</td>
          </tr><tr>
            <td scope="row"><code class="literal">node_hostname</code></td>
            <td>string</td>
            <td>The name or IP address of the host on which the node resides</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        The <code class="literal">node_id</code> column shows the node ID used in
        the <code class="filename">config.ini</code> file for this node; if none
        is specified, the node ID that would be assigned automatically
        to this node is displayed.
      </p><p>
        The <code class="literal">node_type</code> column displays one of the
        following three values:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">MGM</code>: Management node.
          </p></li><li class="listitem"><p>
            <code class="literal">NDB</code>: Data node.
          </p></li><li class="listitem"><p>
            <code class="literal">API</code>: API node; this includes SQL nodes.
</p></li></ul>
</div>
<p>
        The <code class="literal">node_hostname</code> column shows the node host
        as specified in the <code class="filename">config.ini</code> file. This
        can be empty for an API node, if
        <a class="link" href="mysql-cluster.html#ndbparam-api-hostname"><code class="literal">HostName</code></a> has not been set
        in the cluster configuration file. If
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-hostname"><code class="literal">HostName</code></a> has not been
        set for a data node in the configuration file,
        <code class="literal">localhost</code> is used here.
        <code class="literal">localhost</code> is also used if
        <a class="link" href="mysql-cluster.html#ndbparam-mgmd-hostname"><code class="literal">HostName</code></a> has not been
        specified for a management node.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-config-params"></a>22.5.10.8 The ndbinfo config_params Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091580156192"></a><p>
        The <code class="literal">config_params</code> table is a static table
        which provides the names and internal ID numbers of and other
        information about NDB Cluster configuration parameters.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">config_params</code> table. For each column, the
        table shows the name, data type, and a brief description.
        Additional information can be found in the notes following the
        table. This table can also be used in conjunction with the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-config-values" title="22.5.10.9 The ndbinfo config_values Table"><code class="literal">config_values</code></a> table for
        obtaining realtime information about node configuration
        parameters.
</p>
<div class="table">
<a name="idm140091580150432"></a><p class="title"><b>Table 22.382 Columns of the config_params table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">param_number</code></td>
            <td>integer</td>
            <td>The parameter's internal ID number</td>
          </tr><tr>
            <td scope="row"><code class="literal">param_name</code></td>
            <td>string</td>
            <td>The name of the parameter</td>
          </tr><tr>
            <td scope="row"><code class="literal">param_description</code></td>
            <td>string</td>
            <td>A brief description of the parameter</td>
          </tr><tr>
            <td scope="row"><code class="literal">param_type</code></td>
            <td>string</td>
            <td>The parameter's data type</td>
          </tr><tr>
            <td scope="row"><code class="literal">param_default</code></td>
            <td>string</td>
            <td>The parameter's default value, if any</td>
          </tr><tr>
            <td scope="row"><code class="literal">param_min</code></td>
            <td>string</td>
            <td>The parameter's maximum value, if any</td>
          </tr><tr>
            <td scope="row"><code class="literal">param_max</code></td>
            <td>string</td>
            <td>The parameter's minimum value, if any</td>
          </tr><tr>
            <td scope="row"><code class="literal">param_mandatory</code></td>
            <td>integer</td>
            <td>This is 1 if the parameter is required, otherwise 0</td>
          </tr><tr>
            <td scope="row"><code class="literal">param_status</code></td>
            <td>string</td>
            <td>Currently unused</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        This table is read-only.
      </p><p>
        Although this is a static table, its content can vary between
        NDB Cluster installations, since supported parameters can vary
        due to differences between software releases, cluster hardware
        configurations, and other factors.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-config-values"></a>22.5.10.9 The ndbinfo config_values Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091580107024"></a><p>
        The <code class="literal">config_values</code> table provides information
        about the current state of node configuration parameter values.
        Each row in the table corresponds to the current value of a
        parameter on a given node.
</p>
<div class="table">
<a name="idm140091580104208"></a><p class="title"><b>Table 22.383 Columns of the config_params table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>ID of the node in the cluster</td>
          </tr><tr>
            <td scope="row"><code class="literal">config_param</code></td>
            <td>integer</td>
            <td>The parameter's internal ID number</td>
          </tr><tr>
            <td scope="row"><code class="literal">config_value</code></td>
            <td>string</td>
            <td>Current value of the parameter</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        This table's <code class="literal">config_param</code> column and the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-config-params" title="22.5.10.8 The ndbinfo config_params Table"><code class="literal">config_params</code></a> table's
        <code class="literal">param_number</code> column use the same parameter
        identifiers. By joining the two tables on these columns, you can
        obtain detailed information about desired node configuration
        parameters. The query shown here provides the current values for
        all parameters on each data node in the cluster, ordered by node
        ID and parameter name:
      </p><pre data-lang="sql" class="programlisting">
SELECT    v.node_id AS 'Node Id', 
          p.param_name AS 'Parameter', 
          v.config_value AS 'Value'
FROM      config_values v
JOIN      config_params p
ON        v.config_param=p.param_number
WHERE     p.param_name NOT LIKE '\_\_%'
ORDER BY  v.node_id, p.param_name;
</pre><p>
        Partial output from the previous query when run on a small
        example cluster used for simple testing:
      </p><pre data-lang="sql" class="programlisting">
+---------+------------------------------------------+----------------+
| Node Id | Parameter                                | Value          |
+---------+------------------------------------------+----------------+
|       2 | Arbitration                              | 1              |
|       2 | ArbitrationTimeout                       | 7500           |
|       2 | BackupDataBufferSize                     | 16777216       |
|       2 | BackupDataDir                            | /home/jon/data |
|       2 | BackupDiskWriteSpeedPct                  | 50             |
|       2 | BackupLogBufferSize                      | 16777216       |

...

|       3 | TotalSendBufferMemory                    | 0              |
|       3 | TransactionBufferMemory                  | 1048576        |
|       3 | TransactionDeadlockDetectionTimeout      | 1200           |
|       3 | TransactionInactiveTimeout               | 4294967039     |
|       3 | TwoPassInitialNodeRestartCopy            | 0              |
|       3 | UndoDataBuffer                           | 16777216       |
|       3 | UndoIndexBuffer                          | 2097152        |
+---------+------------------------------------------+----------------+
248 rows in set (0.02 sec)
</pre><p>
        The <code class="literal">WHERE</code> clause filters out parameters whose
        names begin with a double underscore (<code class="literal">__</code>);
        these parameters are reserved for testing and other internal
        uses by the NDB developers, and are not intended for use in a
        production NDB Cluster.
      </p><p>
        You can obtain output that is more specific, more detailed, or
        both by issuing the proper queries. This example provides all
        types of available information about the
        <code class="literal">NodeId</code>,
        <code class="literal">NoOfReplicas</code>,
        <code class="literal">HostName</code>,
        <code class="literal">DataMemory</code>,
        <code class="literal">IndexMemory</code>, and
        <code class="literal">TotalSendBufferMemory</code>
        parameters as currently set for all data nodes in the cluster:
      </p><pre data-lang="sql" class="programlisting">
SELECT  p.param_name AS Name,
        v.node_id AS Node,
        p.param_type AS Type,
        p.param_default AS 'Default',
        p.param_min AS Minimum,
        p.param_max AS Maximum,
        CASE p.param_mandatory WHEN 1 THEN 'Y' ELSE 'N' END AS 'Required',
        v.config_value AS Current
FROM    config_params p
JOIN    config_values v
ON      p.param_number = v.config_param
WHERE   p. param_name 
  IN ('NodeId', 'NoOfReplicas', 'HostName',
      'DataMemory', 'IndexMemory', 'TotalSendBufferMemory')\G
</pre><p>
        The output from this query when run on a small NDB Cluster with
        2 data nodes used for simple testing is shown here:
      </p><pre data-lang="sql" class="programlisting">
*************************** 1. row ***************************
    Name: NodeId
    Node: 2
    Type: unsigned
 Default: 
 Minimum: 1
 Maximum: 48
Required: Y
 Current: 2
*************************** 2. row ***************************
    Name: HostName
    Node: 2
    Type: string
 Default: localhost
 Minimum: 
 Maximum: 
Required: N
 Current: 127.0.0.1
*************************** 3. row ***************************
    Name: TotalSendBufferMemory
    Node: 2
    Type: unsigned
 Default: 0
 Minimum: 262144
 Maximum: 4294967039
Required: N
 Current: 0
*************************** 4. row ***************************
    Name: NoOfReplicas
    Node: 2
    Type: unsigned
 Default: 2
 Minimum: 1
 Maximum: 4
Required: N
 Current: 2
*************************** 5. row ***************************
    Name: DataMemory
    Node: 2
    Type: unsigned
 Default: 102760448
 Minimum: 1048576
 Maximum: 1099511627776
Required: N
 Current: 524288000
*************************** 6. row ***************************
    Name: NodeId
    Node: 3
    Type: unsigned
 Default: 
 Minimum: 1
 Maximum: 48
Required: Y
 Current: 3
*************************** 7. row ***************************
    Name: HostName
    Node: 3
    Type: string
 Default: localhost
 Minimum: 
 Maximum: 
Required: N
 Current: 127.0.0.1
*************************** 8. row ***************************
    Name: TotalSendBufferMemory
    Node: 3
    Type: unsigned
 Default: 0
 Minimum: 262144
 Maximum: 4294967039
Required: N
 Current: 0
*************************** 9. row ***************************
    Name: NoOfReplicas
    Node: 3
    Type: unsigned
 Default: 2
 Minimum: 1
 Maximum: 4
Required: N
 Current: 2
*************************** 10. row ***************************
    Name: DataMemory
    Node: 3
    Type: unsigned
 Default: 102760448
 Minimum: 1048576
 Maximum: 1099511627776
Required: N
 Current: 524288000
10 rows in set (0.01 sec)
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-counters"></a>22.5.10.10 The ndbinfo counters Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091580063216"></a><p>
        The <code class="literal">counters</code> table provides running totals of
        events such as reads and writes for specific kernel blocks and
        data nodes. Counts are kept from the most recent node start or
        restart; a node start or restart resets all counters on that
        node. Not all kernel blocks have all types of counters.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">counters</code> table. For each column, the
        table shows the name, data type, and a brief description.
        Additional information can be found in the notes following the
        table.
</p>
<div class="table">
<a name="idm140091580058912"></a><p class="title"><b>Table 22.384 Columns of the counters table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>The data node ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">block_name</code></td>
            <td>string</td>
            <td>Name of the associated NDB kernel block (see
              <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-kernel-blocks.html" target="_top">NDB Kernel Blocks</a>).</td>
          </tr><tr>
            <td scope="row"><code class="literal">block_instance</code></td>
            <td>integer</td>
            <td>Block instance</td>
          </tr><tr>
            <td scope="row"><code class="literal">counter_id</code></td>
            <td>integer</td>
            <td>The counter's internal ID number; normally an integer between 1 and
              10, inclusive.</td>
          </tr><tr>
            <td scope="row"><code class="literal">counter_name</code></td>
            <td>string</td>
            <td>The name of the counter. See text for names of individual counters and
              the NDB kernel block with which each counter is
              associated.</td>
          </tr><tr>
            <td scope="row"><code class="literal">val</code></td>
            <td>integer</td>
            <td>The counter's value</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        Each counter is associated with a particular NDB kernel block.
      </p><p>
        The <code class="literal">OPERATIONS</code> counter is associated with the
        <code class="literal">DBLQH</code> (local query handler) kernel block (see
        <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-kernel-blocks-dblqh.html" target="_top">The DBLQH Block</a>). A
        primary-key read counts as one operation, as does a primary-key
        update. For reads, there is one operation in
        <code class="literal">DBLQH</code> per operation in
        <code class="literal">DBTC</code>. For writes, there is one operation
        counted per replica.
      </p><p>
        The <code class="literal">ATTRINFO</code>,
        <code class="literal">TRANSACTIONS</code>, <code class="literal">COMMITS</code>,
        <code class="literal">READS</code>, <code class="literal">LOCAL_READS</code>,
        <code class="literal">SIMPLE_READS</code>, <code class="literal">WRITES</code>,
        <code class="literal">LOCAL_WRITES</code>, <code class="literal">ABORTS</code>,
        <code class="literal">TABLE_SCANS</code>, and
        <code class="literal">RANGE_SCANS</code> counters are associated with the
        DBTC (transaction co-ordinator) kernel block (see
        <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-kernel-blocks-dbtc.html" target="_top">The DBTC Block</a>).
      </p><p>
        <code class="literal">LOCAL_WRITES</code> and
        <code class="literal">LOCAL_READS</code> are primary-key operations using
        a transaction coordinator in a node that also holds the primary
        replica of the record.
      </p><p>
        The <code class="literal">READS</code> counter includes all reads.
        <code class="literal">LOCAL_READS</code> includes only those reads of the
        primary replica on the same node as this transaction
        coordinator. <code class="literal">SIMPLE_READS</code> includes only those
        reads in which the read operation is the beginning and ending
        operation for a given transaction. Simple reads do not hold
        locks but are part of a transaction, in that they observe
        uncommitted changes made by the transaction containing them but
        not of any other uncommitted transactions. Such reads are
        <span class="quote">“<span class="quote">simple</span>”</span> from the point of view of the TC block;
        since they hold no locks they are not durable, and once
        <code class="literal">DBTC</code> has routed them to the relevant LQH
        block, it holds no state for them.
      </p><p>
        <code class="literal">ATTRINFO</code> keeps a count of the number of times
        an interpreted program is sent to the data node. See
        <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-ndb-protocol-messages.html" target="_top">NDB Protocol Messages</a>, for more
        information about <code class="literal">ATTRINFO</code> messages in the
        <code class="literal">NDB</code> kernel.
      </p><p>
        The <code class="literal">LOCAL_TABLE_SCANS_SENT</code>,
        <code class="literal">READS_RECEIVED</code>,
        <code class="literal">PRUNED_RANGE_SCANS_RECEIVED</code>,
        <code class="literal">RANGE_SCANS_RECEIVED</code>,
        <code class="literal">LOCAL_READS_SENT</code>,
        <code class="literal">CONST_PRUNED_RANGE_SCANS_RECEIVED</code>,
        <code class="literal">LOCAL_RANGE_SCANS_SENT</code>,
        <code class="literal">REMOTE_READS_SENT</code>,
        <code class="literal">REMOTE_RANGE_SCANS_SENT</code>,
        <code class="literal">READS_NOT_FOUND</code>,
        <code class="literal">SCAN_BATCHES_RETURNED</code>,
        <code class="literal">TABLE_SCANS_RECEIVED</code>, and
        <code class="literal">SCAN_ROWS_RETURNED</code> counters are associated
        with the <code class="literal">DBSPJ</code> (select push-down join) kernel
        block (see <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-kernel-blocks-dbspj.html" target="_top">The DBSPJ Block</a>).
      </p><p>
        The <code class="literal">block_name</code> and
        <code class="literal">block_instance</code> columns provide, respectively,
        the applicable NDB kernel block name and instance number. You
        can use these to obtain information about specific threads from
        the <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-threadblocks" title="22.5.10.41 The ndbinfo threadblocks Table"><code class="literal">threadblocks</code></a> table.
      </p><p>
        A number of counters provide information about transporter
        overload and send buffer sizing when troubleshooting such
        issues. For each LQH instance, there is one instance of each
        counter in the following list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">LQHKEY_OVERLOAD</code>: Number of primary key
            requests rejected at the LQH block instance due to
            transporter overload
          </p></li><li class="listitem"><p>
            <code class="literal">LQHKEY_OVERLOAD_TC</code>: Count of instances of
            <code class="literal">LQHKEY_OVERLOAD</code> where the TC node
            transporter was overloaded
          </p></li><li class="listitem"><p>
            <code class="literal">LQHKEY_OVERLOAD_READER</code>: Count of
            instances of <code class="literal">LQHKEY_OVERLOAD</code> where the
            API reader (reads only) node was overloaded.
          </p></li><li class="listitem"><p>
            <code class="literal">LQHKEY_OVERLOAD_NODE_PEER</code>: Count of
            instances of <code class="literal">LQHKEY_OVERLOAD</code> where the
            next backup data node (writes only) was overloaded
          </p></li><li class="listitem"><p>
            <code class="literal">LQHKEY_OVERLOAD_SUBSCRIBER</code>: Count of
            instances of <code class="literal">LQHKEY_OVERLOAD</code> where a
            event subscriber (writes only) was overloaded.
          </p></li><li class="listitem"><p>
            <code class="literal">LQHSCAN_SLOWDOWNS</code>: Count of instances
            where a fragment scan batch size was reduced due to scanning
            API transporter overload.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-cpustat"></a>22.5.10.11 The ndbinfo cpustat Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091579974176"></a><p>
        The <code class="literal">cpustat</code> table provides per-thread CPU
        statistics gathered each second, for each thread running in the
        <code class="literal">NDB</code> kernel.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">cpustat</code> table. For each column, the table
        shows the name, data type, and a brief description. Additional
        information can be found in the notes following the table.
</p>
<div class="table">
<a name="idm140091579969408"></a><p class="title"><b>Table 22.385 Columns of the cpustat table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>ID of the node where the thread is running</td>
          </tr><tr>
            <td scope="row"><code class="literal">thr_no</code></td>
            <td>integer</td>
            <td>Thread ID (specific to this node)</td>
          </tr><tr>
            <td scope="row"><code class="literal">OS_user</code></td>
            <td>integer</td>
            <td>OS user time</td>
          </tr><tr>
            <td scope="row"><code class="literal">OS_system</code></td>
            <td>integer</td>
            <td>OS system time</td>
          </tr><tr>
            <td scope="row"><code class="literal">OS_idle</code></td>
            <td>integer</td>
            <td>OS idle time</td>
          </tr><tr>
            <td scope="row"><code class="literal">thread_exec</code></td>
            <td>integer</td>
            <td>Thread execution time</td>
          </tr><tr>
            <td scope="row"><code class="literal">thread_sleeping</code></td>
            <td>integer</td>
            <td>Thread sleep time</td>
          </tr><tr>
            <td scope="row"><code class="literal">thread_send</code></td>
            <td>integer</td>
            <td>Thread send time</td>
          </tr><tr>
            <td scope="row"><code class="literal">thread_buffer_full</code></td>
            <td>integer</td>
            <td>Thread buffer full time</td>
          </tr><tr>
            <td scope="row"><code class="literal">elapsed_time</code></td>
            <td>integer</td>
            <td>Elapsed time</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-cpustat-50ms"></a>22.5.10.12 The ndbinfo cpustat_50ms Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091579923328"></a><p>
        The <code class="literal">cpustat_50ms</code> table provides raw,
        per-thread CPU data obtained each 50 milliseconds for each
        thread running in the <code class="literal">NDB</code> kernel.
      </p><p>
        Like <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-cpustat-1sec" title="22.5.10.13 The ndbinfo cpustat_1sec Table"><code class="literal">cpustat_1sec</code></a> and
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-cpustat-20sec" title="22.5.10.14 The ndbinfo cpustat_20sec Table"><code class="literal">cpustat_20sec</code></a>, this table
        shows 20 measurement sets per thread, each referencing a period
        of the named duration. Thus, <code class="literal">cpsustat_50ms</code>
        provides 1 second of history.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">cpustat_50ms</code> table. For each column, the
        table shows the name, data type, and a brief description.
        Additional information can be found in the notes following the
        table.
</p>
<div class="table">
<a name="idm140091579914336"></a><p class="title"><b>Table 22.386 Columns of the cpustat_50ms table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>ID of the node where the thread is running</td>
          </tr><tr>
            <td scope="row"><code class="literal">thr_no</code></td>
            <td>integer</td>
            <td>Thread ID (specific to this node)</td>
          </tr><tr>
            <td scope="row"><code class="literal">OS_user_time</code></td>
            <td>integer</td>
            <td>OS user time</td>
          </tr><tr>
            <td scope="row"><code class="literal">OS_system_time</code></td>
            <td>integer</td>
            <td>OS system time</td>
          </tr><tr>
            <td scope="row"><code class="literal">OS_idle_time</code></td>
            <td>integer</td>
            <td>OS idle time</td>
          </tr><tr>
            <td scope="row"><code class="literal">exec_time</code></td>
            <td>integer</td>
            <td>Thread execution time</td>
          </tr><tr>
            <td scope="row"><code class="literal">sleep_time</code></td>
            <td>integer</td>
            <td>Thread sleep time</td>
          </tr><tr>
            <td scope="row"><code class="literal">send_time</code></td>
            <td>integer</td>
            <td>Thread send time</td>
          </tr><tr>
            <td scope="row"><code class="literal">buffer_full_time</code></td>
            <td>integer</td>
            <td>Thread buffer full time</td>
          </tr><tr>
            <td scope="row"><code class="literal">elapsed_time</code></td>
            <td>integer</td>
            <td>Elapsed time</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-cpustat-1sec"></a>22.5.10.13 The ndbinfo cpustat_1sec Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091579868416"></a><p>
        The <code class="literal">cpustat-1sec</code> table provides raw,
        per-thread CPU data obtained each second for each thread running
        in the <code class="literal">NDB</code> kernel.
      </p><p>
        Like <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-cpustat-50ms" title="22.5.10.12 The ndbinfo cpustat_50ms Table"><code class="literal">cpustat_50ms</code></a> and
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-cpustat-20sec" title="22.5.10.14 The ndbinfo cpustat_20sec Table"><code class="literal">cpustat_20sec</code></a>, this table
        shows 20 measurement sets per thread, each referencing a period
        of the named duration. Thus, <code class="literal">cpsustat_1sec</code>
        provides 20 seconds of history.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">cpustat_1sec</code> table. For each column, the
        table shows the name, data type, and a brief description.
        Additional information can be found in the notes following the
        table.
</p>
<div class="table">
<a name="idm140091579859648"></a><p class="title"><b>Table 22.387 Columns of the cpustat_1sec table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>ID of the node where the thread is running</td>
          </tr><tr>
            <td scope="row"><code class="literal">thr_no</code></td>
            <td>integer</td>
            <td>Thread ID (specific to this node)</td>
          </tr><tr>
            <td scope="row"><code class="literal">OS_user_time</code></td>
            <td>integer</td>
            <td>OS user time</td>
          </tr><tr>
            <td scope="row"><code class="literal">OS_system_time</code></td>
            <td>integer</td>
            <td>OS system time</td>
          </tr><tr>
            <td scope="row"><code class="literal">OS_idle_time</code></td>
            <td>integer</td>
            <td>OS idle time</td>
          </tr><tr>
            <td scope="row"><code class="literal">exec_time</code></td>
            <td>integer</td>
            <td>Thread execution time</td>
          </tr><tr>
            <td scope="row"><code class="literal">sleep_time</code></td>
            <td>integer</td>
            <td>Thread sleep time</td>
          </tr><tr>
            <td scope="row"><code class="literal">send_time</code></td>
            <td>integer</td>
            <td>Thread send time</td>
          </tr><tr>
            <td scope="row"><code class="literal">buffer_full_time</code></td>
            <td>integer</td>
            <td>Thread buffer full time</td>
          </tr><tr>
            <td scope="row"><code class="literal">elapsed_time</code></td>
            <td>integer</td>
            <td>Elapsed time</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-cpustat-20sec"></a>22.5.10.14 The ndbinfo cpustat_20sec Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091579813728"></a><p>
        The <code class="literal">cpustat_20sec</code> table provides raw,
        per-thread CPU data obtained each 20 seconds, for each thread
        running in the <code class="literal">NDB</code> kernel.
      </p><p>
        Like <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-cpustat-50ms" title="22.5.10.12 The ndbinfo cpustat_50ms Table"><code class="literal">cpustat_50ms</code></a> and
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-cpustat-1sec" title="22.5.10.13 The ndbinfo cpustat_1sec Table"><code class="literal">cpustat_1sec</code></a>, this table shows
        20 measurement sets per thread, each referencing a period of the
        named duration. Thus, <code class="literal">cpsustat_20sec</code> provides
        400 seconds of history.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">cpustat_20sec</code> table. For each column, the
        table shows the name, data type, and a brief description.
        Additional information can be found in the notes following the
        table.
</p>
<div class="table">
<a name="idm140091579805088"></a><p class="title"><b>Table 22.388 Columns of the cpustat_20sec table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>ID of the node where the thread is running</td>
          </tr><tr>
            <td scope="row"><code class="literal">thr_no</code></td>
            <td>integer</td>
            <td>Thread ID (specific to this node)</td>
          </tr><tr>
            <td scope="row"><code class="literal">OS_user_time</code></td>
            <td>integer</td>
            <td>OS user time</td>
          </tr><tr>
            <td scope="row"><code class="literal">OS_system_time</code></td>
            <td>integer</td>
            <td>OS system time</td>
          </tr><tr>
            <td scope="row"><code class="literal">OS_idle_time</code></td>
            <td>integer</td>
            <td>OS idle time</td>
          </tr><tr>
            <td scope="row"><code class="literal">exec_time</code></td>
            <td>integer</td>
            <td>Thread execution time</td>
          </tr><tr>
            <td scope="row"><code class="literal">sleep_time</code></td>
            <td>integer</td>
            <td>Thread sleep time</td>
          </tr><tr>
            <td scope="row"><code class="literal">send_time</code></td>
            <td>integer</td>
            <td>Thread send time</td>
          </tr><tr>
            <td scope="row"><code class="literal">buffer_full_time</code></td>
            <td>integer</td>
            <td>Thread buffer full time</td>
          </tr><tr>
            <td scope="row"><code class="literal">elapsed_time</code></td>
            <td>integer</td>
            <td>Elapsed time</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-dict-obj-info"></a>22.5.10.15 The ndbinfo dict_obj_info Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091579759056"></a><p>
        The <code class="literal">dict_obj_info</code> table provides information
        about <code class="literal">NDB</code> data dictionary
        (<code class="literal">DICT</code>) objects such as tables and indexes.
        (The <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-dict-obj-types" title="22.5.10.16 The ndbinfo dict_obj_types Table"><code class="literal">dict_obj_types</code></a> table can
        be queried for a list of all the types.) This information
        includes the object's type, state, parent object (if any),
        and fully qualified name.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">dict_obj_info</code> table. For each column, the
        table shows the name, data type, and a brief description.
</p>
<div class="table">
<a name="idm140091579751232"></a><p class="title"><b>Table 22.389 Columns of the dict_obj_info table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">type</code></td>
            <td>integer</td>
            <td>Type of <code class="literal">DICT</code> object; join on
              <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-dict-obj-types" title="22.5.10.16 The ndbinfo dict_obj_types Table"><code class="literal">dict_obj_types</code></a> to obtain
              the name</td>
          </tr><tr>
            <td scope="row"><code class="literal">id</code></td>
            <td>integer</td>
            <td>Object identifier</td>
          </tr><tr>
            <td scope="row"><code class="literal">version</code></td>
            <td>integer</td>
            <td>Object version</td>
          </tr><tr>
            <td scope="row"><code class="literal">state</code></td>
            <td>integer</td>
            <td>Object state</td>
          </tr><tr>
            <td scope="row"><code class="literal">parent_obj_type</code></td>
            <td>integer</td>
            <td>Parent object's type (a <code class="literal">dict_obj_types</code> type ID);
              0 indicates that the object has no parent</td>
          </tr><tr>
            <td scope="row"><code class="literal">parent_obj_id</code></td>
            <td>integer</td>
            <td>Parent object ID (such as a base table); 0 indicates that the object has
              no parent</td>
          </tr><tr>
            <td scope="row"><code class="literal">fq_name</code></td>
            <td>string</td>
            <td>Fully qualified object name; for a table, this has the form
              <code class="literal"><em class="replaceable"><code>database_name</code></em>/def/<em class="replaceable"><code>table_name</code></em></code>,
              for a primary key, the form is
              <code class="literal">sys/def/<em class="replaceable"><code>table_id</code></em>/PRIMARY</code>,
              and for a unique key it is
              <code class="literal">sys/def/<em class="replaceable"><code>table_id</code></em>/<em class="replaceable"><code>uk_name</code></em>$unique</code></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-dict-obj-types"></a>22.5.10.16 The ndbinfo dict_obj_types Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091579709600"></a><p>
        The <code class="literal">dict_obj_types</code> table is a static table
        listing possible dictionary object types used in the NDB kernel.
        These are the same types defined by
        <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-object-type.html" target="_top"><code class="literal">Object::Type</code></a> in the NDB API.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">dict_obj_types</code> table. For each column,
        the table shows the name, data type, and a brief description.
</p>
<div class="table">
<a name="idm140091579704400"></a><p class="title"><b>Table 22.390 Columns of the dict_obj_types table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">type_id</code></td>
            <td>integer</td>
            <td>The type ID for this type</td>
          </tr><tr>
            <td scope="row"><code class="literal">type_name</code></td>
            <td>string</td>
            <td>The name of this type</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-disk-write-speed-base"></a>22.5.10.17 The ndbinfo disk_write_speed_base Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091579688016"></a><p>
        The <code class="literal">disk_write_speed_base</code> table provides base
        information about the speed of disk writes during LCP, backup,
        and restore operations.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">disk_write_speed_base</code> table. For each
        column, the table shows the name, data type, and a brief
        description. Additional information can be found in the notes
        following the table.
</p>
<div class="table">
<a name="idm140091579683904"></a><p class="title"><b>Table 22.391 Columns of the disk_write_speed_base table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row">node_id</td>
            <td>integer</td>
            <td>Node ID of this node</td>
          </tr><tr>
            <td scope="row">thr_no</td>
            <td>integer</td>
            <td>Thread ID of this LDM thread</td>
          </tr><tr>
            <td scope="row">millis_ago</td>
            <td>integer</td>
            <td>Milliseconds since this reporting period ended</td>
          </tr><tr>
            <td scope="row">millis_passed</td>
            <td>integer</td>
            <td>Milliseconds elapsed in this reporting period</td>
          </tr><tr>
            <td scope="row">backup_lcp_bytes_written</td>
            <td>integer</td>
            <td>Number of bytes written to disk by local checkpoints and backup
              processes during this period</td>
          </tr><tr>
            <td scope="row">redo_bytes_written</td>
            <td>integer</td>
            <td>Number of bytes written to REDO log during this period</td>
          </tr><tr>
            <td scope="row">target_disk_write_speed</td>
            <td>integer</td>
            <td>Actual speed of disk writes per LDM thread (base data)</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-disk-write-speed-aggregate"></a>22.5.10.18 The ndbinfo disk_write_speed_aggregate Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091579651552"></a><p>
        The <code class="literal">disk_write_speed_aggregate</code> table provides
        aggregated information about the speed of disk writes during
        LCP, backup, and restore operations.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">disk_write_speed_aggregate</code> table. For
        each column, the table shows the name, data type, and a brief
        description. Additional information can be found in the notes
        following the table.
</p>
<div class="table">
<a name="idm140091579647376"></a><p class="title"><b>Table 22.392 Columns in the disk_write_speed_aggregate table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row">node_id</td>
            <td>integer</td>
            <td>Node ID of this node</td>
          </tr><tr>
            <td scope="row">thr_no</td>
            <td>integer</td>
            <td>Thread ID of this LDM thread</td>
          </tr><tr>
            <td scope="row">backup_lcp_speed_last_sec</td>
            <td>integer</td>
            <td>Number of bytes written to disk by backup and LCP processes in the last
              second</td>
          </tr><tr>
            <td scope="row">redo_speed_last_sec</td>
            <td>integer</td>
            <td>Number of bytes written to REDO log in the last second</td>
          </tr><tr>
            <td scope="row">backup_lcp_speed_last_10sec</td>
            <td>integer</td>
            <td>Number of bytes written to disk by backup and LCP processes per second,
              averaged over the last 10 seconds</td>
          </tr><tr>
            <td scope="row">redo_speed_last_10sec</td>
            <td>integer</td>
            <td>Number of bytes written to REDO log per second, averaged over the last
              10 seconds</td>
          </tr><tr>
            <td scope="row">std_dev_backup_lcp_speed_last_10sec</td>
            <td>integer</td>
            <td>Standard deviation in number of bytes written to disk by backup and LCP
              processes per second, averaged over the last 10 seconds</td>
          </tr><tr>
            <td scope="row">std_dev_redo_speed_last_10sec</td>
            <td>integer</td>
            <td>Standard deviation in number of bytes written to REDO log per second,
              averaged over the last 10 seconds</td>
          </tr><tr>
            <td scope="row">backup_lcp_speed_last_60sec</td>
            <td>integer</td>
            <td>Number of bytes written to disk by backup and LCP processes per second,
              averaged over the last 60 seconds</td>
          </tr><tr>
            <td scope="row">redo_speed_last_60sec</td>
            <td>integer</td>
            <td>Number of bytes written to REDO log per second, averaged over the last
              10 seconds</td>
          </tr><tr>
            <td scope="row">std_dev_backup_lcp_speed_last_60sec</td>
            <td>integer</td>
            <td>Standard deviation in number of bytes written to disk by backup and LCP
              processes per second, averaged over the last 60 seconds</td>
          </tr><tr>
            <td scope="row">std_dev_redo_speed_last_60sec</td>
            <td>integer</td>
            <td>Standard deviation in number of bytes written to REDO log per second,
              averaged over the last 60 seconds</td>
          </tr><tr>
            <td scope="row">slowdowns_due_to_io_lag</td>
            <td>integer</td>
            <td>Number of seconds since last node start that disk writes were slowed due
              to REDO log I/O lag</td>
          </tr><tr>
            <td scope="row">slowdowns_due_to_high_cpu</td>
            <td>integer</td>
            <td>Number of seconds since last node start that disk writes were slowed due
              to high CPU usage</td>
          </tr><tr>
            <td scope="row">disk_write_speed_set_to_min</td>
            <td>integer</td>
            <td>Number of seconds since last node start that disk write speed was set to
              minimum</td>
          </tr><tr>
            <td scope="row">current_target_disk_write_speed</td>
            <td>integer</td>
            <td>Actual speed of disk writes per LDM thread (aggregated)</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-disk-write-speed-aggregate-node"></a>22.5.10.19 The ndbinfo disk_write_speed_aggregate_node Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091579584080"></a><p>
        The <code class="literal">disk_write_speed_aggregate_node</code> table
        provides aggregated information per node about the speed of disk
        writes during LCP, backup, and restore operations.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">disk_write_speed_aggregate_node</code> table.
        For each column, the table shows the name, data type, and a
        brief description. Additional information can be found in the
        notes following the table.
</p>
<div class="table">
<a name="idm140091579579904"></a><p class="title"><b>Table 22.393 Columns of the disk_write_speed_aggregate_node table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row">node_id</td>
            <td>integer</td>
            <td>Node ID of this node</td>
          </tr><tr>
            <td scope="row">backup_lcp_speed_last_sec</td>
            <td>integer</td>
            <td>Number of bytes written to disk by backup and LCP processes in the last
              second</td>
          </tr><tr>
            <td scope="row">redo_speed_last_sec</td>
            <td>integer</td>
            <td>Number of bytes written to REDO log in the last second</td>
          </tr><tr>
            <td scope="row">backup_lcp_speed_last_10sec</td>
            <td>integer</td>
            <td>Number of bytes written to disk by backup and LCP processes per second,
              averaged over the last 10 seconds</td>
          </tr><tr>
            <td scope="row">redo_speed_last_10sec</td>
            <td>integer</td>
            <td>Number of bytes written to REDO log per second, averaged over the last
              10 seconds</td>
          </tr><tr>
            <td scope="row">backup_lcp_speed_last_60sec</td>
            <td>integer</td>
            <td>Number of bytes written to disk by backup and LCP processes per second,
              averaged over the last 60 seconds</td>
          </tr><tr>
            <td scope="row">redo_speed_last_60sec</td>
            <td>integer</td>
            <td>Number of bytes written to disk by backup and LCP processes per second,
              averaged over the last 60 seconds</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-diskpagebuffer"></a>22.5.10.20 The ndbinfo diskpagebuffer Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091579547376"></a><p>
        The <code class="literal">diskpagebuffer</code> table provides statistics
        about disk page buffer usage by NDB Cluster Disk Data tables.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">diskpagebuffer</code> table. For each column,
        the table shows the name, data type, and a brief description.
        Additional information can be found in the notes following the
        table.
</p>
<div class="table">
<a name="idm140091579543296"></a><p class="title"><b>Table 22.394 Columns of the diskpagebuffer table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>The data node ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">block_instance</code></td>
            <td>integer</td>
            <td>Block instance</td>
          </tr><tr>
            <td scope="row"><code class="literal">pages_written</code></td>
            <td>integer</td>
            <td>Number of pages written to disk.</td>
          </tr><tr>
            <td scope="row"><code class="literal">pages_written_lcp</code></td>
            <td>integer</td>
            <td>Number of pages written by local checkpoints.</td>
          </tr><tr>
            <td scope="row"><code class="literal">pages_read</code></td>
            <td>integer</td>
            <td>Number of pages read from disk</td>
          </tr><tr>
            <td scope="row"><code class="literal">log_waits</code></td>
            <td>integer</td>
            <td>Number of page writes waiting for log to be written to disk</td>
          </tr><tr>
            <td scope="row"><code class="literal">page_requests_direct_return</code></td>
            <td>integer</td>
            <td>Number of requests for pages that were available in buffer</td>
          </tr><tr>
            <td scope="row"><code class="literal">page_requests_wait_queue</code></td>
            <td>integer</td>
            <td>Number of requests that had to wait for pages to become available in
              buffer</td>
          </tr><tr>
            <td scope="row"><code class="literal">page_requests_wait_io</code></td>
            <td>integer</td>
            <td>Number of requests that had to be read from pages on disk (pages were
              unavailable in buffer)</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        You can use this table with NDB Cluster Disk Data tables to
        determine whether
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskpagebuffermemory"><code class="literal">DiskPageBufferMemory</code></a> is
        sufficiently large to allow data to be read from the buffer
        rather from disk; minimizing disk seeks can help improve
        performance of such tables.
      </p><p>
        You can determine the proportion of reads from
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskpagebuffermemory"><code class="literal">DiskPageBufferMemory</code></a> to
        the total number of reads using a query such as this one, which
        obtains this ratio as a percentage:
      </p><pre data-lang="sql" class="programlisting">
SELECT
  node_id,
  100 * page_requests_direct_return /
    (page_requests_direct_return + page_requests_wait_io)
      AS hit_ratio
FROM ndbinfo.diskpagebuffer;
</pre><p>
        The result from this query should be similar to what is shown
        here, with one row for each data node in the cluster (in this
        example, the cluster has 4 data nodes):
      </p><pre data-lang="sql" class="programlisting">
+---------+-----------+
| node_id | hit_ratio |
+---------+-----------+
|       5 |   97.6744 |
|       6 |   97.6879 |
|       7 |   98.1776 |
|       8 |   98.1343 |
+---------+-----------+
4 rows in set (0.00 sec)
</pre><p>
        <code class="literal">hit_ratio</code> values approaching 100% indicate
        that only a very small number of reads are being made from disk
        rather than from the buffer, which means that Disk Data read
        performance is approaching an optimum level. If any of these
        values are less than 95%, this is a strong indicator that the
        setting for
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskpagebuffermemory"><code class="literal">DiskPageBufferMemory</code></a>
        needs to be increased in the <code class="filename">config.ini</code>
        file.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          A change in
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskpagebuffermemory"><code class="literal">DiskPageBufferMemory</code></a>
          requires a rolling restart of all of the cluster's data
          nodes before it takes effect.
</p>
</div>
<p>
        <code class="literal">block_instance</code> refers to an instance of a
        kernel block. Together with the block name, this number can be
        used to look up a given instance in the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-threadblocks" title="22.5.10.41 The ndbinfo threadblocks Table"><code class="literal">threadblocks</code></a> table. Using this
        information, you can obtain information about disk page buffer
        metrics relating to individual threads; an example query using
        <code class="literal">LIMIT 1</code> to limit the output to a single
        thread is shown here:
      </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT</code></strong> 
     &gt;   <strong class="userinput"><code>node_id, thr_no, block_name, thread_name, pages_written,</code></strong>
     &gt;   <strong class="userinput"><code>pages_written_lcp, pages_read, log_waits,</code></strong>
     &gt;   <strong class="userinput"><code>page_requests_direct_return, page_requests_wait_queue,</code></strong>
     &gt;   <strong class="userinput"><code>page_requests_wait_io</code></strong>
     &gt; <strong class="userinput"><code>FROM ndbinfo.diskpagebuffer</code></strong>
     &gt;   <strong class="userinput"><code>INNER JOIN ndbinfo.threadblocks USING (node_id, block_instance)</code></strong>
     &gt;   <strong class="userinput"><code>INNER JOIN ndbinfo.threads USING (node_id, thr_no)</code></strong>
     &gt; <strong class="userinput"><code>WHERE block_name = 'PGMAN' LIMIT 1\G</code></strong>
*************************** 1. row ***************************
                    node_id: 1
                     thr_no: 1
                 block_name: PGMAN
                thread_name: rep
              pages_written: 0
          pages_written_lcp: 0
                 pages_read: 1
                  log_waits: 0
page_requests_direct_return: 4
   page_requests_wait_queue: 0
      page_requests_wait_io: 1
1 row in set (0.01 sec)
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-error-messages"></a>22.5.10.21 The ndbinfo error_messages Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091579477024"></a><p>
        The <code class="literal">error_messages</code> table provides information
        about
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">error_messages</code> table. For each column,
        the table shows the name, data type, and a brief description.
        Additional information can be found in the notes following the
        table.
</p>
<div class="table">
<a name="idm140091579472992"></a><p class="title"><b>Table 22.395 Columns of the error_messages table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">error_code</code></td>
            <td>integer</td>
            <td>Numeric error code</td>
          </tr><tr>
            <td scope="row"><code class="literal">error_description</code></td>
            <td>string</td>
            <td>Description of error</td>
          </tr><tr>
            <td scope="row"><code class="literal">error_status</code></td>
            <td>string</td>
            <td>Error status code</td>
          </tr><tr>
            <td scope="row"><code class="literal">error_classification</code></td>
            <td>integer</td>
            <td>Error classification code</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        <code class="literal">error_code</code> is a numeric NDB error code. This
        is the same error code that can be supplied to
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-perror" title="22.4.16 ndb_perror — Obtain NDB Error Message Information"><span class="command"><strong>ndb_perror</strong></span></a> or <a class="link" href="programs.html#perror" title="4.8.2 perror — Display MySQL Error Message Information"><span class="command"><strong>perror</strong></span></a>
        <a class="link" href="programs.html#option_perror_ndb"><code class="option">--ndb</code></a>.
      </p><p>
        <code class="literal">error_description</code> provides a basic
        description of the condition causing the error.
      </p><p>
        The <code class="literal">error_status</code> column provides status
        information relating to the error. Possible values for this
        column are listed here:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">No error</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Illegal connect string</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Illegal server handle</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Illegal reply from server</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Illegal number of nodes</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Illegal node status</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Out of memory</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Management server not connected</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Could not connect to socket</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Start failed</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Stop failed</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Restart failed</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Could not start backup</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Could not abort backup</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Could not enter single user mode</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Could not exit single user mode</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Failed to complete configuration change</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Failed to get configuration</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Usage error</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Success</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Permanent error</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Temporary error</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Unknown result</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Temporary error, restart node</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Permanent error, external action needed</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Ndbd file system error, restart node
            initial</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Unknown</code>
</p></li></ul>
</div>
<p>
        The error_classification column shows the error classification.
        See <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-error-classifications.html" target="_top">NDB Error Classifications</a>, for information
        about classification codes and their meanings.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-locks-per-fragment"></a>22.5.10.22 The ndbinfo locks_per_fragment Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091579400880"></a><p>
        The <code class="literal">locks_per_fragment</code> table provides
        information about counts of lock claim requests, and the
        outcomes of these requests on a per-fragment basis, serving as a
        companion table to
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-operations-per-fragment" title="22.5.10.29 The ndbinfo operations_per_fragment Table"><code class="literal">operations_per_fragment</code></a> and
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-memory-per-fragment" title="22.5.10.27 The ndbinfo memory_per_fragment Table"><code class="literal">memory_per_fragment</code></a>. This
        table also shows the total time spent waiting for locks
        successfully and unsuccessfully since fragment or table
        creation, or since the most recent restart.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">locks_per_fragment</code> table. For each
        column, the table shows the name, data type, and a brief
        description. Additional information can be found in the notes
        following the table.
</p>
<div class="table">
<a name="idm140091579393584"></a><p class="title"><b>Table 22.396 Columns of the locks_per_fragment table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">fq_name</code></td>
            <td>string</td>
            <td>Fully qualified table name</td>
          </tr><tr>
            <td scope="row"><code class="literal">parent_fq_name</code></td>
            <td>string</td>
            <td>Fully qualified name of parent object</td>
          </tr><tr>
            <td scope="row"><code class="literal">type</code></td>
            <td>string</td>
            <td>Table type; see text for possible values</td>
          </tr><tr>
            <td scope="row"><code class="literal">table_id</code></td>
            <td>integer</td>
            <td>Table ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>Reporting node ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">block_instance</code></td>
            <td>integer</td>
            <td>LDM instance ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">fragment_num</code></td>
            <td>integer</td>
            <td>Fragment identifier</td>
          </tr><tr>
            <td scope="row"><code class="literal">ex_req</code></td>
            <td>integer</td>
            <td>Exclusive lock requests started</td>
          </tr><tr>
            <td scope="row"><code class="literal">ex_imm_ok</code></td>
            <td>integer</td>
            <td>Exclusive lock requests immediately granted</td>
          </tr><tr>
            <td scope="row"><code class="literal">ex_wait_ok</code></td>
            <td>integer</td>
            <td>Exclusive lock requests granted following wait</td>
          </tr><tr>
            <td scope="row"><code class="literal">ex_wait_fail</code></td>
            <td>integer</td>
            <td>Exclusive lock requests not granted</td>
          </tr><tr>
            <td scope="row"><code class="literal">sh_req</code></td>
            <td>integer</td>
            <td>Shared lock requests started</td>
          </tr><tr>
            <td scope="row"><code class="literal">sh_imm_ok</code></td>
            <td>integer</td>
            <td>Shared lock requests immediately granted</td>
          </tr><tr>
            <td scope="row"><code class="literal">sh_wait_ok</code></td>
            <td>integer</td>
            <td>Shared lock requests granted following wait</td>
          </tr><tr>
            <td scope="row"><code class="literal">sh_wait_fail</code></td>
            <td>integer</td>
            <td>Shared lock requests not granted</td>
          </tr><tr>
            <td scope="row"><code class="literal">wait_ok_millis</code></td>
            <td>integer</td>
            <td>Time spent waiting for lock requests that were granted, in milliseconds</td>
          </tr><tr>
            <td scope="row"><code class="literal">wait_fail_millis</code></td>
            <td>integer</td>
            <td>Time spent waiting for lock requests that failed, in milliseconds</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        <code class="literal">block_instance</code> refers to an instance of a
        kernel block. Together with the block name, this number can be
        used to look up a given instance in the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-threadblocks" title="22.5.10.41 The ndbinfo threadblocks Table"><code class="literal">threadblocks</code></a> table.
      </p><p>
        <code class="literal">fq_name</code> is a fully qualified database object
        name in
        <em class="replaceable"><code>database</code></em>/<em class="replaceable"><code>schema</code></em>/<em class="replaceable"><code>name</code></em>
        format, such as <code class="literal">test/def/t1</code> or
        <code class="literal">sys/def/10/b$unique</code>.
      </p><p>
        <code class="literal">parent_fq_name</code> is the fully qualified name of
        this object's parent object (table).
      </p><p>
        <code class="literal">table_id</code> is the table's internal ID
        generated by <code class="literal">NDB</code>. This is the same internal
        table ID shown in other <code class="literal">ndbinfo</code> tables; it is
        also visible in the output of
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-show-tables" title="22.4.27 ndb_show_tables — Display List of NDB Tables"><span class="command"><strong>ndb_show_tables</strong></span></a>.
      </p><p>
        The <code class="literal">type</code> column shows the type of table. This
        is always one of <code class="literal">System table</code>, <code class="literal">User
        table</code>, <code class="literal">Unique hash index</code>,
        <code class="literal">Hash index</code>, <code class="literal">Unique ordered
        index</code>, <code class="literal">Ordered index</code>, <code class="literal">Hash
        index trigger</code>, <code class="literal">Subscription
        trigger</code>, <code class="literal">Read only constraint</code>,
        <code class="literal">Index trigger</code>, <code class="literal">Reorganize
        trigger</code>, <code class="literal">Tablespace</code>, <code class="literal">Log
        file group</code>, <code class="literal">Data file</code>,
        <code class="literal">Undo file</code>, <code class="literal">Hash map</code>,
        <code class="literal">Foreign key definition</code>, <code class="literal">Foreign key
        parent trigger</code>, <code class="literal">Foreign key child
        trigger</code>, or <code class="literal">Schema transaction</code>.
      </p><p>
        The values shown in all of the columns
        <code class="literal">ex_req</code>, <code class="literal">ex_req_imm_ok</code>,
        <code class="literal">ex_wait_ok</code>, <code class="literal">ex_wait_fail</code>,
        <code class="literal">sh_req</code>, <code class="literal">sh_req_imm_ok</code>,
        <code class="literal">sh_wait_ok</code>, and
        <code class="literal">sh_wait_fail</code> represent cumulative numbers of
        requests since the table or fragment was created, or since the
        last restart of this node, whichever of these occurred later.
        This is also true for the time values shown in the
        <code class="literal">wait_ok_millis</code> and
        <code class="literal">wait_fail_millis</code> columns.
      </p><p>
        Every lock request is considered either to be in progress, or to
        have completed in some way (that is, to have succeeded or
        failed). This means that the following relationships are true:
      </p><pre data-lang="simple" class="programlisting">
ex_req &gt;= (ex_req_imm_ok + ex_wait_ok + ex_wait_fail)

sh_req &gt;= (sh_req_imm_ok + sh_wait_ok + sh_wait_fail)
</pre><p>
        The number of requests currently in progress is the current
        number of incomplete requests, which can be found as shown here:
      </p><pre data-lang="simple" class="programlisting">
[exclusive lock requests in progress] =
    ex_req - (ex_req_imm_ok + ex_wait_ok + ex_wait_fail)

[shared lock requests in progress] =
    sh_req - (sh_req_imm_ok + sh_wait_ok + sh_wait_fail)
</pre><p>
        A failed wait indicates an aborted transaction, but the abort
        may or may not be caused by a lock wait timeout. You can obtain
        the total number of aborts while waiting for locks as shown
        here:
      </p><pre data-lang="simple" class="programlisting">
[aborts while waiting for locks] = ex_wait_fail + sh_wait_fail
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-logbuffers"></a>22.5.10.23 The ndbinfo logbuffers Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091579281872"></a><p>
        The <code class="literal">logbuffer</code> table provides information on
        NDB Cluster log buffer usage.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">logbuffers</code> table. For each column, the
        table shows the name, data type, and a brief description.
</p>
<div class="table">
<a name="idm140091579277904"></a><p class="title"><b>Table 22.397 Columns in the logbuffers table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>The ID of this data node.</td>
          </tr><tr>
            <td scope="row"><code class="literal">log_type</code></td>
            <td>string</td>
            <td>Type of log. One of: <code class="literal">REDO</code>,
              <code class="literal">DD-UNDO</code>,
              <code class="literal">BACKUP-DATA</code>, or
              <code class="literal">BACKUP-LOG</code>.</td>
          </tr><tr>
            <td scope="row"><code class="literal">log_id</code></td>
            <td>integer</td>
            <td>The log ID.</td>
          </tr><tr>
            <td scope="row"><code class="literal">log_part</code></td>
            <td>integer</td>
            <td>The log part number.</td>
          </tr><tr>
            <td scope="row"><code class="literal">total</code></td>
            <td>integer</td>
            <td>Total space available for this log.</td>
          </tr><tr>
            <td scope="row"><code class="literal">used</code></td>
            <td>integer</td>
            <td>Space used by this log.</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        <code class="literal">logbuffers</code> table rows reflecting two
        additional log types are available when performing an NDB
        backup. One of these rows has the log type
        <code class="literal">BACKUP-DATA</code>, which shows the amount of data
        buffer used during backup to copy fragments to backup files. The
        other row has the log type <code class="literal">BACKUP-LOG</code>, which
        displays the amount of log buffer used during the backup to
        record changes made after the backup has started. One each of
        these <code class="literal">log_type</code> rows is shown in the
        <code class="literal">logbuffers</code> table for each data node in the
        cluster. These rows are not present unless an NDB backup is
        currently being performed.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-logspaces"></a>22.5.10.24 The ndbinfo logspaces Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091579239360"></a><p>
        This table provides information about NDB Cluster log space
        usage.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">logspaces</code> table. For each column, the
        table shows the name, data type, and a brief description.
</p>
<div class="table">
<a name="idm140091579236096"></a><p class="title"><b>Table 22.398 Columns in the logspaces table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>The ID of this data node.</td>
          </tr><tr>
            <td scope="row"><code class="literal">log_type</code></td>
            <td>string</td>
            <td>Type of log; one of: <code class="literal">REDO</code> or
              <code class="literal">DD-UNDO</code>.</td>
          </tr><tr>
            <td scope="row"><code class="literal">log_id</code></td>
            <td>integer</td>
            <td>The log ID.</td>
          </tr><tr>
            <td scope="row"><code class="literal">log_part</code></td>
            <td>integer</td>
            <td>The log part number.</td>
          </tr><tr>
            <td scope="row"><code class="literal">total</code></td>
            <td>integer</td>
            <td>Total space available for this log.</td>
          </tr><tr>
            <td scope="row"><code class="literal">used</code></td>
            <td>integer</td>
            <td>Space used by this log.</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-membership"></a>22.5.10.25 The ndbinfo membership Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091579203520"></a><p>
        The <code class="literal">membership</code> table describes the view that
        each data node has of all the others in the cluster, including
        node group membership, president node, arbitrator, arbitrator
        successor, arbitrator connection states, and other information.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">membership</code> table. For each column, the
        table shows the name, data type, and a brief description.
        Additional information can be found in the notes following the
        table.
</p>
<div class="table">
<a name="idm140091579199280"></a><p class="title"><b>Table 22.399 Columns of the membership table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>This node's node ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">group_id</code></td>
            <td>integer</td>
            <td>Node group to which this node belongs</td>
          </tr><tr>
            <td scope="row"><code class="literal">left node</code></td>
            <td>integer</td>
            <td>Node ID of the previous node</td>
          </tr><tr>
            <td scope="row"><code class="literal">right_node</code></td>
            <td>integer</td>
            <td>Node ID of the next node</td>
          </tr><tr>
            <td scope="row"><code class="literal">president</code></td>
            <td>integer</td>
            <td>President's node ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">successor</code></td>
            <td>integer</td>
            <td>Node ID of successor to president</td>
          </tr><tr>
            <td scope="row"><code class="literal">succession_order</code></td>
            <td>integer</td>
            <td>Order in which this node succeeds to presidency</td>
          </tr><tr>
            <td scope="row"><code class="literal">Conf_HB_order</code></td>
            <td>integer</td>
            <td>-</td>
          </tr><tr>
            <td scope="row"><code class="literal">arbitrator</code></td>
            <td>integer</td>
            <td>Node ID of arbitrator</td>
          </tr><tr>
            <td scope="row"><code class="literal">arb_ticket</code></td>
            <td>string</td>
            <td>Internal identifier used to track arbitration</td>
          </tr><tr>
            <td scope="row"><code class="literal">arb_state</code></td>
            <td>Enumeration (see text)</td>
            <td>Arbitration state</td>
          </tr><tr>
            <td scope="row"><code class="literal">arb_connected</code></td>
            <td><code class="literal">Yes</code> or <code class="literal">No</code></td>
            <td>Whether this node is connected to the arbitrator</td>
          </tr><tr>
            <td scope="row"><code class="literal">connected_rank1_arbs</code></td>
            <td>List of node IDs</td>
            <td>Connected arbitrators of rank 1</td>
          </tr><tr>
            <td scope="row"><code class="literal">connected_rank2_arbs</code></td>
            <td>List of node IDs</td>
            <td>Connected arbitrators of rank 1</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        The node ID and node group ID are the same as reported by
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm -e "SHOW"</strong></span></a>.
      </p><p>
        <code class="literal">left_node</code> and <code class="literal">right_node</code>
        are defined in terms of a model that connects all data nodes in
        a circle, in order of their node IDs, similar to the ordering of
        the numbers on a clock dial, as shown here:
</p>
<div class="figure">
<a name="fig-mysql-cluster-circular-left-right"></a><p class="title"><b>Figure 22.26 Circular Arrangement of NDB Cluster Nodes</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/cluster-left-right.png" width="275" height="250" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"><p>
        In this example, we have 8 data nodes, numbered 5, 6, 7, 8, 12,
        13, 14, and 15, ordered clockwise in a circle. We determine
        <span class="quote">“<span class="quote">left</span>”</span> and <span class="quote">“<span class="quote">right</span>”</span> from the interior
        of the circle. The node to the left of node 5 is node 15, and
        the node to the right of node 5 is node 6. You can see all these
        relationships by running the following query and observing the
        output:
      </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT node_id,left_node,right_node</code></strong>
    -&gt; <strong class="userinput"><code>FROM ndbinfo.membership;</code></strong>
+---------+-----------+------------+
| node_id | left_node | right_node |
+---------+-----------+------------+
|       5 |        15 |          6 |
|       6 |         5 |          7 |
|       7 |         6 |          8 |
|       8 |         7 |         12 |
|      12 |         8 |         13 |
|      13 |        12 |         14 |
|      14 |        13 |         15 |
|      15 |        14 |          5 |
+---------+-----------+------------+
8 rows in set (0.00 sec)
</pre><p>
        The designations <span class="quote">“<span class="quote">left</span>”</span> and <span class="quote">“<span class="quote">right</span>”</span>
        are used in the event log in the same way.
      </p><p>
        The <code class="literal">president</code> node is the node viewed by the
        current node as responsible for setting an arbitrator (see
        <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-start-phases.html" target="_top">NDB Cluster Start Phases</a>). If the president
        fails or becomes disconnected, the current node expects the node
        whose ID is shown in the <code class="literal">successor</code> column to
        become the new president. The
        <code class="literal">succession_order</code> column shows the place in
        the succession queue that the current node views itself as
        having.
      </p><p>
        In a normal NDB Cluster, all data nodes should see the same node
        as <code class="literal">president</code>, and the same node (other than
        the president) as its <code class="literal">successor</code>. In addition,
        the current president should see itself as <code class="literal">1</code>
        in the order of succession, the <code class="literal">successor</code>
        node should see itself as <code class="literal">2</code>, and so on.
      </p><p>
        All nodes should show the same <code class="literal">arb_ticket</code>
        values as well as the same <code class="literal">arb_state</code> values.
        Possible <code class="literal">arb_state</code> values are
        <code class="literal">ARBIT_NULL</code>, <code class="literal">ARBIT_INIT</code>,
        <code class="literal">ARBIT_FIND</code>, <code class="literal">ARBIT_PREP1</code>,
        <code class="literal">ARBIT_PREP2</code>, <code class="literal">ARBIT_START</code>,
        <code class="literal">ARBIT_RUN</code>, <code class="literal">ARBIT_CHOOSE</code>,
        <code class="literal">ARBIT_CRASH</code>, and <code class="literal">UNKNOWN</code>.
      </p><p>
        <code class="literal">arb_connected</code> shows whether this node is
        connected to the node shown as this node's
        <code class="literal">arbitrator</code>.
      </p><p>
        The <code class="literal">connected_rank1_arbs</code> and
        <code class="literal">connected_rank2_arbs</code> columns each display a
        list of 0 or more arbitrators having an
        <a class="link" href="mysql-cluster.html#ndbparam-mgmd-arbitrationrank"><code class="literal">ArbitrationRank</code></a> equal to
        1, or to 2, respectively.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          Both management nodes and API nodes are eligible to become
          arbitrators.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-memoryusage"></a>22.5.10.26 The ndbinfo memoryusage Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091579097248"></a><p>
        Querying this table provides information similar to that
        provided by the <a class="link" href="mysql-cluster.html#ndbclient-report"><code class="literal">ALL REPORT
        MemoryUsage</code></a> command in the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a>
        client, or logged by <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-dump-commands.html" target="_top"><code class="literal">ALL DUMP
        1000</code></a>.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">memoryusage</code> table. For each column, the
        table shows the name, data type, and a brief description.
        Additional information can be found in the notes following the
        table.
</p>
<div class="table">
<a name="idm140091579090176"></a><p class="title"><b>Table 22.400 Columns of the memoryusage table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>The node ID of this data node.</td>
          </tr><tr>
            <td scope="row"><code class="literal">memory_type</code></td>
            <td>string</td>
            <td>One of <code class="literal">Data memory</code>, <code class="literal">Index memory</code>,
              or <code class="literal">Long message buffer</code>.</td>
          </tr><tr>
            <td scope="row"><code class="literal">used</code></td>
            <td>integer</td>
            <td>Number of bytes currently used for data memory or index memory by this
              data node.</td>
          </tr><tr>
            <td scope="row"><code class="literal">used_pages</code></td>
            <td>integer</td>
            <td>Number of pages currently used for data memory or index memory by this
              data node; see text.</td>
          </tr><tr>
            <td scope="row"><code class="literal">total</code></td>
            <td>integer</td>
            <td>Total number of bytes of data memory or index memory available for this
              data node; see text.</td>
          </tr><tr>
            <td scope="row"><code class="literal">total_pages</code></td>
            <td>integer</td>
            <td>Total number of memory pages available for data memory or index memory
              on this data node; see text.</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        The <code class="literal">total</code> column represents the total amount
        of memory in bytes available for the given resource (data memory
        or index memory) on a particular data node. This number should
        be approximately equal to the setting of the corresponding
        configuration parameter in the <code class="filename">config.ini</code>
        file.
      </p><p>
        Suppose that the cluster has 2 data nodes having node IDs
        <code class="literal">5</code> and <code class="literal">6</code>, and the
        <code class="filename">config.ini</code> file contains the following:
      </p><pre data-lang="ini" class="programlisting">
[ndbd default]
DataMemory = 1G
IndexMemory = 1G
</pre><p>
        Suppose also that the value of the
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-longmessagebuffer"><code class="literal">LongMessageBuffer</code></a>
        configuration parameter is allowed to assume its default (64
        MB).
      </p><p>
        The following query shows approximately the same values:
      </p><pre data-lang="sql" class="programlisting">
mysql&gt; SELECT node_id, memory_type, total
     &gt; FROM ndbinfo.memoryusage;
+---------+---------------------+------------+
| node_id | memory_type         | total      |
+---------+---------------------+------------+
|       5 | Data memory         | 1073741824 |
|       5 | Index memory        | 1074003968 |
|       5 | Long message buffer |   67108864 |
|       6 | Data memory         | 1073741824 |
|       6 | Index memory        | 1074003968 |
|       6 | Long message buffer |   67108864 |
+---------+---------------------+------------+
6 rows in set (0.00 sec)
</pre><p>
        In this case, the <code class="literal">total</code> column values for
        index memory are slightly higher than the value set of
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexmemory"><code class="literal">IndexMemory</code></a> due to
        internal rounding.
      </p><p>
        For the <code class="literal">used_pages</code> and
        <code class="literal">total_pages</code> columns, resources are measured
        in pages, which are 32K in size for
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a> and 8K for
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexmemory"><code class="literal">IndexMemory</code></a>. For long
        message buffer memory, the page size is 256 bytes.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-memory-per-fragment"></a>22.5.10.27 The ndbinfo memory_per_fragment Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091579039360"></a><p>
        The <code class="literal">memory_per_fragment</code> table provides
        information about the usage of memory by individual fragments.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">memory_per_fragment</code> table. For each
        column, the table shows the name, data type, and a brief
        description. Additional information can be found in the notes
        following the table.
</p>
<div class="table">
<a name="idm140091579035280"></a><p class="title"><b>Table 22.401 Columns of the memory_per_fragment table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row">fq_name</td>
            <td>string</td>
            <td>Name of this fragment</td>
          </tr><tr>
            <td scope="row">parent_fq_name</td>
            <td>string</td>
            <td>Name of this fragment's parent</td>
          </tr><tr>
            <td scope="row">type</td>
            <td>string</td>
            <td>Type of object; see text for possible values</td>
          </tr><tr>
            <td scope="row">table_id</td>
            <td>integer</td>
            <td>Table ID for this table</td>
          </tr><tr>
            <td scope="row">node_id</td>
            <td>integer</td>
            <td>Node ID for this node</td>
          </tr><tr>
            <td scope="row">block_instance</td>
            <td>integer</td>
            <td>Kernel block instance ID</td>
          </tr><tr>
            <td scope="row">fragment_num</td>
            <td>integer</td>
            <td>Fragment ID (number)</td>
          </tr><tr>
            <td scope="row">fixed_elem_alloc_bytes</td>
            <td>integer</td>
            <td>Number of bytes allocated for fixed-sized elements</td>
          </tr><tr>
            <td scope="row">fixed_elem_free_bytes</td>
            <td>integer</td>
            <td>Free bytes remaining in pages allocated to fixed-size elements</td>
          </tr><tr>
            <td scope="row">fixed_elem_size_bytes</td>
            <td>integer</td>
            <td>Length of each fixed-size element in bytes</td>
          </tr><tr>
            <td scope="row">fixed_elem_count</td>
            <td>integer</td>
            <td>Number of fixed-size elements</td>
          </tr><tr>
            <td scope="row">fixed_elem_free_count</td>
            <td>decimal</td>
            <td>Number of free rows for fixed-size elements</td>
          </tr><tr>
            <td scope="row">var_elem_alloc_bytes</td>
            <td>integer</td>
            <td>Number of bytes allocated for variable-size elements</td>
          </tr><tr>
            <td scope="row">var_elem_free_bytes</td>
            <td>integer</td>
            <td>Free bytes remaining in pages allocated to variable-size elements</td>
          </tr><tr>
            <td scope="row">var_elem_count</td>
            <td>integer</td>
            <td>Number of variable-size elements</td>
          </tr><tr>
            <td scope="row">hash_index_alloc_bytes</td>
            <td>integer</td>
            <td>Number of bytes allocated to hash indexes</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        The <code class="literal">type</code> column from this table shows the
        dictionary object type used for this fragment
        (<a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-object-type.html" target="_top"><code class="literal">Object::Type</code></a>, in the NDB API),
        and can take any one of the values shown in the following list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            System table
          </p></li><li class="listitem"><p>
            User table
          </p></li><li class="listitem"><p>
            Unique hash index
          </p></li><li class="listitem"><p>
            Hash index
          </p></li><li class="listitem"><p>
            Unique ordered index
          </p></li><li class="listitem"><p>
            Ordered index
          </p></li><li class="listitem"><p>
            Hash index trigger
          </p></li><li class="listitem"><p>
            Subscription trigger
          </p></li><li class="listitem"><p>
            Read only constraint
          </p></li><li class="listitem"><p>
            Index trigger
          </p></li><li class="listitem"><p>
            Reorganize trigger
          </p></li><li class="listitem"><p>
            Tablespace
          </p></li><li class="listitem"><p>
            Log file group
          </p></li><li class="listitem"><p>
            Data file
          </p></li><li class="listitem"><p>
            Undo file
          </p></li><li class="listitem"><p>
            Hash map
          </p></li><li class="listitem"><p>
            Foreign key definition
          </p></li><li class="listitem"><p>
            Foreign key parent trigger
          </p></li><li class="listitem"><p>
            Foreign key child trigger
          </p></li><li class="listitem"><p>
            Schema transaction
</p></li></ul>
</div>
<p>
        You can also obtain this list by executing
        <a class="link" href="sql-syntax.html#select" title="13.2.10 SELECT Syntax"><code class="literal">SELECT * FROM</code></a>
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-dict-obj-types" title="22.5.10.16 The ndbinfo dict_obj_types Table"><code class="literal">ndbinfo.dict_obj_types</code></a> in the
        <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client.
      </p><p>
        The <code class="literal">block_instance</code> column provides the NDB
        kernel block instance number. You can use this to obtain
        information about specific threads from the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-threadblocks" title="22.5.10.41 The ndbinfo threadblocks Table"><code class="literal">threadblocks</code></a> table.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-nodes"></a>22.5.10.28 The ndbinfo nodes Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091578947136"></a><p>
        This table contains information on the status of data nodes. For
        each data node that is running in the cluster, a corresponding
        row in this table provides the node's node ID, status, and
        uptime. For nodes that are starting, it also shows the current
        start phase.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">nodes</code> table. For each column, the table
        shows the name, data type, and a brief description. Additional
        information can be found in the notes following the table.
</p>
<div class="table">
<a name="idm140091578943584"></a><p class="title"><b>Table 22.402 Columns of the nodes table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>The data node's unique node ID in the cluster.</td>
          </tr><tr>
            <td scope="row"><code class="literal">uptime</code></td>
            <td>integer</td>
            <td>Time since the node was last started, in seconds.</td>
          </tr><tr>
            <td scope="row"><code class="literal">status</code></td>
            <td>string</td>
            <td>Current status of the data node; see text for possible values.</td>
          </tr><tr>
            <td scope="row"><code class="literal">start_phase</code></td>
            <td>integer</td>
            <td>If the data node is starting, the current start phase.</td>
          </tr><tr>
            <td scope="row"><code class="literal">config_generation</code></td>
            <td>integer</td>
            <td>The version of the cluster configuration file in use on this data node.</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        The <code class="literal">uptime</code> column shows the time in seconds
        that this node has been running since it was last started or
        restarted. This is a <a class="link" href="data-types.html#integer-types" title="11.2.1 Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a>
        value. This figure includes the time actually needed to start
        the node; in other words, this counter starts running the moment
        that <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> or <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> is
        first invoked; thus, even for a node that has not yet finished
        starting, <code class="literal">uptime</code> may show a nonzero value.
      </p><p>
        The <code class="literal">status</code> column shows the node's
        current status. This is one of: <code class="literal">NOTHING</code>,
        <code class="literal">CMVMI</code>, <code class="literal">STARTING</code>,
        <code class="literal">STARTED</code>, <code class="literal">SINGLEUSER</code>,
        <code class="literal">STOPPING_1</code>, <code class="literal">STOPPING_2</code>,
        <code class="literal">STOPPING_3</code>, or <code class="literal">STOPPING_4</code>.
        When the status is <code class="literal">STARTING</code>, you can see the
        current start phase in the <code class="literal">start_phase</code> column
        (see later in this section). <code class="literal">SINGLEUSER</code> is
        displayed in the <code class="literal">status</code> column for all data
        nodes when the cluster is in single user mode (see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-single-user-mode" title="22.5.8 NDB Cluster Single User Mode">Section 22.5.8, “NDB Cluster Single User Mode”</a>). Seeing one of
        the <code class="literal">STOPPING</code> states does not necessarily mean
        that the node is shutting down but can mean rather that it is
        entering a new state. For example, if you put the cluster in
        single user mode, you can sometimes see data nodes report their
        state briefly as <code class="literal">STOPPING_2</code> before the status
        changes to <code class="literal">SINGLEUSER</code>.
      </p><p>
        The <code class="literal">start_phase</code> column uses the same range of
        values as those used in the output of the
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> client
        <a class="link" href="mysql-cluster.html#ndbclient-status"><code class="literal"><em class="replaceable"><code>node_id</code></em>
        STATUS</code></a> command (see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-mgm-client-commands" title="22.5.2 Commands in the NDB Cluster Management Client">Section 22.5.2, “Commands in the NDB Cluster Management Client”</a>). If the
        node is not currently starting, then this column shows
        <code class="literal">0</code>. For a listing of NDB Cluster start phases
        with descriptions, see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-start-phases" title="22.5.1 Summary of NDB Cluster Start Phases">Section 22.5.1, “Summary of NDB Cluster Start Phases”</a>.
      </p><p>
        The <code class="literal">config_generation</code> column shows which
        version of the cluster configuration is in effect on each data
        node. This can be useful when performing a rolling restart of
        the cluster in order to make changes in configuration
        parameters. For example, from the output of the following
        <a class="link" href="sql-syntax.html#select" title="13.2.10 SELECT Syntax"><code class="literal">SELECT</code></a> statement, you can see
        that node 3 is not yet using the latest version of the cluster
        configuration (<code class="literal">6</code>) although nodes 1, 2, and 4
        are doing so:
      </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>USE ndbinfo;</code></strong>
Database changed
mysql&gt; <strong class="userinput"><code>SELECT * FROM nodes;</code></strong>
+---------+--------+---------+-------------+-------------------+
| node_id | uptime | status  | start_phase | config_generation |
+---------+--------+---------+-------------+-------------------+
|       1 |  10462 | STARTED |           0 |                 6 |
|       2 |  10460 | STARTED |           0 |                 6 |
|       3 |  10457 | STARTED |           0 |                 5 |
|       4 |  10455 | STARTED |           0 |                 6 |
+---------+--------+---------+-------------+-------------------+
2 rows in set (0.04 sec)
</pre><p>
        Therefore, for the case just shown, you should restart node 3 to
        complete the rolling restart of the cluster.
      </p><p>
        Nodes that are stopped are not accounted for in this table.
        Suppose that you have an NDB Cluster with 4 data nodes (node IDs
        1, 2, 3 and 4), and all nodes are running normally, then this
        table contains 4 rows, 1 for each data node:
      </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>USE ndbinfo;</code></strong>
Database changed
mysql&gt; <strong class="userinput"><code>SELECT * FROM nodes;</code></strong>
+---------+--------+---------+-------------+-------------------+
| node_id | uptime | status  | start_phase | config_generation |
+---------+--------+---------+-------------+-------------------+
|       1 |  11776 | STARTED |           0 |                 6 |
|       2 |  11774 | STARTED |           0 |                 6 |
|       3 |  11771 | STARTED |           0 |                 6 |
|       4 |  11769 | STARTED |           0 |                 6 |
+---------+--------+---------+-------------+-------------------+
4 rows in set (0.04 sec)
</pre><p>
        If you shut down one of the nodes, only the nodes that are still
        running are represented in the output of this
        <a class="link" href="sql-syntax.html#select" title="13.2.10 SELECT Syntax"><code class="literal">SELECT</code></a> statement, as shown here:
      </p><pre data-lang="ndbmgm" class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>2 STOP</code></strong>
Node 2: Node shutdown initiated
Node 2: Node shutdown completed.
Node 2 has shutdown.
</pre><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT * FROM nodes;</code></strong>
+---------+--------+---------+-------------+-------------------+
| node_id | uptime | status  | start_phase | config_generation |
+---------+--------+---------+-------------+-------------------+
|       1 |  11807 | STARTED |           0 |                 6 |
|       3 |  11802 | STARTED |           0 |                 6 |
|       4 |  11800 | STARTED |           0 |                 6 |
+---------+--------+---------+-------------+-------------------+
3 rows in set (0.02 sec)
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-operations-per-fragment"></a>22.5.10.29 The ndbinfo operations_per_fragment Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091578873872"></a><p>
        The <code class="literal">operations_per_fragment</code> table provides
        information about the operations performed on individual
        fragments and fragment replicas, as well as about some of the
        results from these operations.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">operations_per_fragment</code> table. For each
        column, the table shows the name, data type, and a brief
        description. Additional information can be found in the notes
        following the table.
</p>
<div class="table">
<a name="idm140091578869696"></a><p class="title"><b>Table 22.403 Columns of the operations_per_fragment table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row">fq_name</td>
            <td>string</td>
            <td>Name of this fragment</td>
          </tr><tr>
            <td scope="row">parent_fq_name</td>
            <td>string</td>
            <td>Name of this fragment's parent</td>
          </tr><tr>
            <td scope="row">type</td>
            <td>string</td>
            <td>Type of object; see text for possible values</td>
          </tr><tr>
            <td scope="row">table_id</td>
            <td>integer</td>
            <td>Table ID for this table</td>
          </tr><tr>
            <td scope="row">node_id</td>
            <td>integer</td>
            <td>Node ID for this node</td>
          </tr><tr>
            <td scope="row">block_instance</td>
            <td>integer</td>
            <td>Kernel block instance ID</td>
          </tr><tr>
            <td scope="row">fragment_num</td>
            <td>integer</td>
            <td>Fragment ID (number)</td>
          </tr><tr>
            <td scope="row">tot_key_reads</td>
            <td>integer</td>
            <td>Total number of key reads for this fragment replica</td>
          </tr><tr>
            <td scope="row">tot_key_inserts</td>
            <td>integer</td>
            <td>Total number of key inserts for this fragment replica</td>
          </tr><tr>
            <td scope="row">tot_key_updates</td>
            <td>integer</td>
            <td>total number of key updates for this fragment replica</td>
          </tr><tr>
            <td scope="row">tot_key_writes</td>
            <td>integer</td>
            <td>Total number of key writes for this fragment replica</td>
          </tr><tr>
            <td scope="row">tot_key_deletes</td>
            <td>integer</td>
            <td>Total number of key deletes for this fragment replica</td>
          </tr><tr>
            <td scope="row">tot_key_refs</td>
            <td>integer</td>
            <td>Number of key operations refused</td>
          </tr><tr>
            <td scope="row">tot_key_attrinfo_bytes</td>
            <td>integer</td>
            <td>Total size of all <code class="literal">attrinfo</code> attributes</td>
          </tr><tr>
            <td scope="row">tot_key_keyinfo_bytes</td>
            <td>integer</td>
            <td>Total size of all <code class="literal">keyinfo</code> attributes</td>
          </tr><tr>
            <td scope="row">tot_key_prog_bytes</td>
            <td>integer</td>
            <td>Total size of all interpreted programs carried by
              <code class="literal">attrinfo</code> attributes</td>
          </tr><tr>
            <td scope="row">tot_key_inst_exec</td>
            <td>integer</td>
            <td>Total number of instructions executed by interpreted programs for key
              operations</td>
          </tr><tr>
            <td scope="row">tot_key_bytes_returned</td>
            <td>integer</td>
            <td>Total size of all data and metadata returned from key read operations</td>
          </tr><tr>
            <td scope="row">tot_frag_scans</td>
            <td>integer</td>
            <td>Total number of scans performed on this fragment replica</td>
          </tr><tr>
            <td scope="row">tot_scan_rows_examined</td>
            <td>integer</td>
            <td>Total number of rows examined by scans</td>
          </tr><tr>
            <td scope="row">tot_scan_rows_returned</td>
            <td>integer</td>
            <td>Total number of rows returned to client</td>
          </tr><tr>
            <td scope="row">tot_scan_bytes_returned</td>
            <td>integer</td>
            <td>Total size of data and metadata returned to the client</td>
          </tr><tr>
            <td scope="row">tot_scan_prog_bytes</td>
            <td>integer</td>
            <td>Total size of interpreted programs for scan operations</td>
          </tr><tr>
            <td scope="row">tot_scan_bound_bytes</td>
            <td>integer</td>
            <td>Total size of all bounds used in ordered index scans</td>
          </tr><tr>
            <td scope="row">tot_scan_inst_exec</td>
            <td>integer</td>
            <td>Total number of instructions executed for scans</td>
          </tr><tr>
            <td scope="row">tot_qd_frag_scans</td>
            <td>integer</td>
            <td>Number of times that scans of this fragment replica have been queued</td>
          </tr><tr>
            <td scope="row">conc_frag_scans</td>
            <td>integer</td>
            <td>Number of scans currently active on this fragment replica (excluding
              queued scans)</td>
          </tr><tr>
            <td scope="row">conc_qd_frag_scans</td>
            <td>integer</td>
            <td>Number of scans currently queued for this fragment replica</td>
          </tr><tr>
            <td scope="row">tot_commits</td>
            <td>integer</td>
            <td>Total number of row changes committed to this fragment replica</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        The <code class="literal">fq_name</code> contains the fully qualified name
        of the schema object to which this fragment replica belongs.
        This currently has the following formats:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Base table: -
            <code class="literal"><em class="replaceable"><code>DbName</code></em>/def/<em class="replaceable"><code>TblName</code></em></code>
          </p></li><li class="listitem"><p>
            <code class="literal">BLOB</code> table: -
            <code class="literal"><em class="replaceable"><code>DbName</code></em>/def/NDB$BLOB_<em class="replaceable"><code>BaseTblId</code></em>_<em class="replaceable"><code>ColNo</code></em></code>
          </p></li><li class="listitem"><p>
            Ordered index: -
            <code class="literal">sys/def/<em class="replaceable"><code>BaseTblId</code></em>/<em class="replaceable"><code>IndexName</code></em></code>
          </p></li><li class="listitem"><p>
            Unique index: -
            <code class="literal">sys/def/<em class="replaceable"><code>BaseTblId</code></em>/<em class="replaceable"><code>IndexName</code></em>$unique</code>
</p></li></ul>
</div>
<p>
        The <code class="literal">$unique</code> suffix shown for unique indexes
        is added by <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>; for an index created by a
        different NDB API client application, this may differ, or not be
        present.
      </p><p>
        The syntax just shown for fully qualified object names is an
        internal interface which is subject to change in future
        releases.
      </p><p>
        Consider a table <code class="literal">t1</code> created and modified by
        the following SQL statements:
      </p><pre data-lang="sql" class="programlisting">
CREATE DATABASE mydb;

USE mydb;

CREATE TABLE t1 (
  a INT NOT NULL,
  b INT NOT NULL,
  t TEXT NOT NULL,
  PRIMARY KEY (b)
) ENGINE=ndbcluster;

CREATE UNIQUE INDEX ix1 ON t1(b) USING HASH;
</pre><p>
        If <code class="literal">t1</code> is assigned table ID 11, this yields
        the <code class="literal">fq_name</code> values shown here:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Base table: <code class="literal">mydb/def/t1</code>
          </p></li><li class="listitem"><p>
            <code class="literal">BLOB</code> table:
            <code class="literal">mydb/def/NDB$BLOB_11_2</code>
          </p></li><li class="listitem"><p>
            Ordered index (primary key):
            <code class="literal">sys/def/11/PRIMARY</code>
          </p></li><li class="listitem"><p>
            Unique index: <code class="literal">sys/def/11/ix1$unique</code>
</p></li></ul>
</div>
<p>
        For indexes or <code class="literal">BLOB</code> tables, the
        <code class="literal">parent_fq_name</code> column contains the
        <code class="literal">fq_name</code> of the corresponding base table. For
        base tables, this column is always <code class="literal">NULL</code>.
      </p><p>
        The <code class="literal">type</code> column shows the schema object type
        used for this fragment, which can take any one of the values
        <code class="literal">System table</code>, <code class="literal">User table</code>,
        <code class="literal">Unique hash index</code>, or <code class="literal">Ordered
        index</code>. <code class="literal">BLOB</code> tables are shown as
        <code class="literal">User table</code>.
      </p><p>
        The <code class="literal">table_id</code> column value is unique at any
        given time, but can be reused if the corresponding object has
        been deleted. The same ID can be seen using the
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-show-tables" title="22.4.27 ndb_show_tables — Display List of NDB Tables"><span class="command"><strong>ndb_show_tables</strong></span></a> utility.
      </p><p>
        The <code class="literal">block_instance</code> column shows which LDM
        instance this fragment replica belongs to. You can use this to
        obtain information about specific threads from the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-threadblocks" title="22.5.10.41 The ndbinfo threadblocks Table"><code class="literal">threadblocks</code></a> table. The first
        such instance is always numbered 0.
      </p><p>
        Since there are typically two replicas, and assuming that this
        is so, each <code class="literal">fragment_num</code> value should appear
        twice in the table, on two different data nodes from the same
        node group.
      </p><p>
        Since <code class="literal">NDB</code> does not use single-key access for
        ordered indexes, the counts for
        <code class="literal">tot_key_reads</code>,
        <code class="literal">tot_key_inserts</code>,
        <code class="literal">tot_key_updates</code>,
        <code class="literal">tot_key_writes</code>, and
        <code class="literal">tot_key_deletes</code> are not incremented by
        ordered index operations.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          When using <code class="literal">tot_key_writes</code>, you should keep
          in mind that a write operation in this context updates the row
          if the key exists, and inserts a new row otherwise. (One use
          of this is in the <code class="literal">NDB</code> implementation of the
          <a class="link" href="sql-syntax.html#replace" title="13.2.9 REPLACE Syntax"><code class="literal">REPLACE</code></a> SQL statement.)
</p>
</div>
<p>
        The <code class="literal">tot_key_refs</code> column shows the number of
        key operations refused by the LDM. Generally, such a refusal is
        due to duplicate keys (inserts), <span class="errortext">Key not
        found</span> errors (updates, deletes, and reads), or the
        operation was rejected by an interpreted program used as a
        predicate on the row matching the key.
      </p><p>
        The <code class="literal">attrinfo</code> and <code class="literal">keyinfo</code>
        attributes counted by the
        <code class="literal">tot_key_attrinfo_bytes</code> and
        <code class="literal">tot_key_keyinfo_bytes</code> columns are attributes
        of an <code class="literal">LQHKEYREQ</code> signal (see
        <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-ndb-protocol.html" target="_top">The NDB Communication Protocol</a>) used to initiate a
        key operation by the LDM. An <code class="literal">attrinfo</code>
        typically contains tuple field values (inserts and updates) or
        projection specifications (for reads);
        <code class="literal">keyinfo</code> contains the primary or unique key
        needed to locate a given tuple in this schema object.
      </p><p>
        The value shown by <code class="literal">tot_frag_scans</code> includes
        both full scans (that examine every row) and scans of subsets.
        Unique indexes and <code class="literal">BLOB</code> tables are never
        scanned, so this value, like other scan-related counts, is 0 for
        fragment replicas of these.
      </p><p>
        <code class="literal">tot_scan_rows_examined</code> may display less than
        the total number of rows in a given fragment replica, since
        ordered index scans can limited by bounds. In addition, a client
        may choose to end a scan before all potentially matching rows
        have been examined; this occurs when using an SQL statement
        containing a <code class="literal">LIMIT</code> or
        <code class="literal">EXISTS</code> clause, for example.
        <code class="literal">tot_scan_rows_returned</code> is always less than or
        equal to <code class="literal">tot_scan_rows_examined</code>.
      </p><p>
        <code class="literal">tot_scan_bytes_returned</code> includes, in the case
        of pushed joins, projections returned to the
        <code class="literal">DBSPJ</code> block in the NDB kernel.
      </p><p>
        <code class="literal">tot_qd_frag_scans</code> can be effected by the
        setting for the
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxparallelscansperfragment"><code class="literal">MaxParallelScansPerFragment</code></a>
        data node configuration parameter, which limits the number of
        scans that may execute concurrently on a single fragment
        replica.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-processes"></a>22.5.10.30 The ndbinfo processes Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091578692848"></a><p>
        This table contains information about NDB Cluster node
        processes; each node is represented by the row in the table.
        Only nodes that are connected to the cluster are shown in this
        table. You can obtain information about nodes that are
        configured but not connected to the cluster from the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-nodes" title="22.5.10.28 The ndbinfo nodes Table"><code class="literal">nodes</code></a> and
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-config-nodes" title="22.5.10.7 The ndbinfo config_nodes Table"><code class="literal">config_nodes</code></a> tables.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">processes</code> table. For each column, the
        table shows the name, data type, and a brief description.
        Additional information can be found in the notes following the
        table.
</p>
<div class="table">
<a name="idm140091578686544"></a><p class="title"><b>Table 22.404 Columns of the nodes table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>The node's unique node ID in the cluster</td>
          </tr><tr>
            <td scope="row"><code class="literal">node_type</code></td>
            <td>string</td>
            <td>Type of node (management, data, or API node; see text)</td>
          </tr><tr>
            <td scope="row"><code class="literal">node_version</code></td>
            <td>string</td>
            <td>Version of the <code class="literal">NDB</code> software program running on this
              node.</td>
          </tr><tr>
            <td scope="row"><code class="literal">process_id</code></td>
            <td>integer</td>
            <td>This node's process ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">angel_process_id</code></td>
            <td>integer</td>
            <td>Process ID of this node's angel process</td>
          </tr><tr>
            <td scope="row"><code class="literal">process_name</code></td>
            <td>string</td>
            <td>Name of the executable</td>
          </tr><tr>
            <td scope="row"><code class="literal">service_URI</code></td>
            <td>string</td>
            <td>Service URI of this node (see text)</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        <code class="literal">node_id</code> is the ID assigned to this node in
        the cluster.
      </p><p>
        The <code class="literal">node_type</code> column displays one of the
        following three values:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">MGM</code>: Management node.
          </p></li><li class="listitem"><p>
            <code class="literal">NDB</code>: Data node.
          </p></li><li class="listitem"><p>
            <code class="literal">API</code>: API or SQL node.
</p></li></ul>
</div>
<p>
        For an executable shipped with the NDB Cluster distribution,
        <code class="literal">node_version</code> shows the software Cluster
        version string, such as
        <code class="literal">8.0.17-ndb-8.0.17</code>.
      </p><p>
        <code class="literal">process_id</code> is the node executable's
        process ID as shown by the host operating system using a process
        display application such as <span class="command"><strong>top</strong></span> on Linux, or
        the Task Manager on Windows platforms.
      </p><p>
        <code class="literal">angel_process_id</code> is the system process ID for
        the node's angel process, which ensures that a data node or
        SQL is automatically restarted in cases of failures. For
        management nodes and API nodes other than SQL nodes, the value
        of this column is <code class="literal">NULL</code>.
      </p><p>
        The <code class="literal">process_name</code> column shows the name of the
        running executable. For management nodes, this is
        <code class="literal">ndb_mgmd</code>. For data nodes, this is
        <code class="literal">ndbd</code> (single-threaded) or
        <code class="literal">ndbmtd</code> (multithreaded). For SQL nodes, this
        is <code class="literal">mysqld</code>. For other types of API nodes, it
        is the name of the executable program connected to the cluster;
        NDB API applications can set a custom value for this using
        <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb-cluster-connection-set-name.html" target="_top"><code class="literal">Ndb_cluster_connection::set_name()</code></a>.
      </p><p>
        <code class="literal">service_URI</code> shows the service network
        address. For management nodes and data nodes, the scheme used is
        <code class="literal">ndb://</code>. For SQL nodes, this is
        <code class="literal">mysql://</code>. By default, API nodes other than
        SQL nodes use <code class="literal">ndb://</code> for the scheme; NDB API
        applications can set this to a custom value using
        <code class="literal">Ndb_cluster_connection::set_service_uri()</code>.
        regardless of the node type, the scheme is followed by the IP
        address used by the NDB transporter for the node in question.
        For management nodes and SQL nodes, this address includes the
        port number (usually 1186 for management nodes and 3306 for SQL
        nodes). If the SQL node was started with the
        <a class="link" href="server-administration.html#sysvar_bind_address"><code class="literal">bind_address</code></a> system variable
        set, this address is used instead of the transporter address,
        unless the bind address is set to <code class="literal">*</code>,
        <code class="literal">0.0.0.0</code>, or <code class="literal">::</code>.
      </p><p>
        Additional path information may be included in the
        <code class="literal">service_URI</code> value for an SQL node reflecting
        various configuration options. For example,
        <code class="literal">mysql://198.51.100.3/tmp/mysql.sock</code> indicates
        that the SQL node was started with
        <a class="link" href="server-administration.html#option_mysqld_skip-networking"><code class="option">--skip-networking</code></a>, and
        <code class="literal">mysql://198.51.100.3:3306/?server-id=1</code> shows
        that replication is enabled for this SQL node.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-resources"></a>22.5.10.31 The ndbinfo resources Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091578620464"></a><p>
        This table provides information about data node resource
        availability and usage.
      </p><p>
        These resources are sometimes known as
        <span class="firstterm">super-pools</span>.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">resources</code> table. For each column, the
        table shows the name, data type, and a brief description.
        Additional information can be found in the notes following the
        table.
</p>
<div class="table">
<a name="idm140091578615904"></a><p class="title"><b>Table 22.405 Columns of the resources table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>The unique node ID of this data node.</td>
          </tr><tr>
            <td scope="row"><code class="literal">resource_name</code></td>
            <td>string</td>
            <td>Name of the resource; see text.</td>
          </tr><tr>
            <td scope="row"><code class="literal">reserved</code></td>
            <td>integer</td>
            <td>The amount reserved for this resource.</td>
          </tr><tr>
            <td scope="row"><code class="literal">used</code></td>
            <td>integer</td>
            <td>The amount actually used by this resource.</td>
          </tr><tr>
            <td scope="row"><code class="literal">max</code></td>
            <td>integer</td>
            <td>The maximum amount of this resource used, since the node was last
              started.</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        The <code class="literal">resource_name</code> can be one of the names
        shown in the following table:
</p>
<div class="table">
<a name="idm140091578587648"></a><p class="title"><b>Table 22.406 ndbinfo.resources table resource names and
descriptions</b></p>
<div class="table-contents">
<table><col width="25%"><col width="75%"><thead><tr>
            <th scope="col">Resource name</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">RESERVED</code></td>
            <td>Reserved by the system; cannot be overridden.</td>
          </tr><tr>
            <td scope="row"><code class="literal">DISK_OPERATIONS</code></td>
            <td>If a log file group is allocated, the size of the undo log buffer is
              used to set the size of this resource. This resource is
              used only to allocate the undo log buffer for an undo log
              file group; there can only be one such group.
              Overallocation occurs as needed by
              <a class="link" href="sql-syntax.html#create-logfile-group" title="13.1.16 CREATE LOGFILE GROUP Syntax"><code class="literal">CREATE LOGFILE GROUP</code></a>.</td>
          </tr><tr>
            <td scope="row"><code class="literal">DISK_RECORDS</code></td>
            <td>Records allocated for Disk Data operations.</td>
          </tr><tr>
            <td scope="row"><code class="literal">DATA_MEMORY</code></td>
            <td>Used for main memory tuples, indexes, and hash indexes. Sum of
              DataMemory and IndexMemory, plus 8 pages of 32 KB each if
              IndexMemory has been set. Cannot be overallocated.</td>
          </tr><tr>
            <td scope="row"><code class="literal">JOBBUFFER</code></td>
            <td>Used for allocating job buffers by the NDB scheduler; cannot be
              overallocated. This is approximately 2 MB per thread plus
              a 1 MB buffer in both directions for all threads that can
              communicate. For large configurations this consume several
              GB.</td>
          </tr><tr>
            <td scope="row"><code class="literal">FILE_BUFFERS</code></td>
            <td>Used by the redo log handler in the <code class="literal">DBLQH</code> kernel
              block; cannot be overallocated. Size is
              <a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-nooffragmentlogparts"><code class="literal">NoOfFragmentLogParts</code></a>
              * <a class="link" href="mysql-cluster.html#ndbparam-ndbd-redobuffer"><code class="literal">RedoBuffer</code></a>, plus
              1 MB per log file part.</td>
          </tr><tr>
            <td scope="row"><code class="literal">TRANSPORTER_BUFFERS</code></td>
            <td>Used for send buffers by <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>; the sum of
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-totalsendbuffermemory"><code class="literal">TotalSendBufferMemory</code></a>
              and
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-extrasendbuffermemory"><code class="literal">ExtraSendBufferMemory</code></a>.
              This resource that can be overallocated by up to 25
              percent. <code class="literal">TotalSendBufferMemory</code> is
              calculated by summing the send buffer memory per node, the
              default value of which is 2 MB. Thus, in a system having
              four data nodes and eight API nodes, the data nodes have
              12 * 2 MB send buffer memory.
              <code class="literal">ExtraSendBufferMemory</code> is used by
              <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> and amounts to 2 MB extra memory
              per thread. Thus, with 4 LDM threads, 2 TC threads, 1 main
              thread, 1 replication thread, and 2 receive threads,
              <code class="literal">ExtraSendBufferMemory</code> is 10 * 2 MB.
              Overallocation of this resource can be performed by
              setting the
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-sharedglobalmemory"><code class="literal">SharedGlobalMemory</code></a>
              data node configuration parameter.</td>
          </tr><tr>
            <td scope="row"><code class="literal">DISK_PAGE_BUFFER</code></td>
            <td>Used for the disk page buffer; determined by the
              <a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskpagebuffermemory"><code class="literal">DiskPageBufferMemory</code></a>
              configuration parameter. Cannot be overallocated.</td>
          </tr><tr>
            <td scope="row"><code class="literal">QUERY_MEMORY</code></td>
            <td>Used by the <code class="literal">DBSPJ</code> kernel block.</td>
          </tr><tr>
            <td scope="row"><code class="literal">SCHEMA_TRANS_MEMORY</code></td>
            <td>Minimum is 2 MB; can be overallocated to use any remaining available
              memory.</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-restart-info"></a>22.5.10.32 The ndbinfo restart_info Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091578535712"></a><p>
        The <code class="literal">restart_info</code> table contains information
        about node restart operations. Each entry in the table
        corresponds to a node restart status report in real time from a
        data node with the given node ID. Only the most recent report
        for any given node is shown.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">restart_info</code> table. For each column, the
        table shows the name, data type, and a brief description.
        Additional information can be found in the notes following the
        table.
</p>
<div class="table">
<a name="idm140091578531456"></a><p class="title"><b>Table 22.407 Columns of the restart_info table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>Node ID in the cluster</td>
          </tr><tr>
            <td scope="row"><code class="literal">node_restart_status</code></td>
            <td>VARCHAR(256)</td>
            <td>Node status; see text for values. Each of these corresponds to a
              possible value of
              <code class="literal">node_restart_status_int</code>.</td>
          </tr><tr>
            <td scope="row"><code class="literal">node_restart_status_int</code></td>
            <td>integer</td>
            <td>Node status code; see text for values.</td>
          </tr><tr>
            <td scope="row"><code class="literal">secs_to_complete_node_failure</code></td>
            <td>integer</td>
            <td>Time in seconds to complete node failure handling</td>
          </tr><tr>
            <td scope="row"><code class="literal">secs_to_allocate_node_id</code></td>
            <td>integer</td>
            <td>Time in seconds from node failure completion to allocation of node ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">secs_to_include_in_heartbeat_protocol</code></td>
            <td>integer</td>
            <td>Time in seconds from allocation of node ID to inclusion in heartbeat
              protocol</td>
          </tr><tr>
            <td scope="row"><code class="literal">secs_until_wait_for_ndbcntr_master</code></td>
            <td>integer</td>
            <td>Time in seconds from being included in heartbeat protocol until waiting
              for <code class="literal">NDBCNTR</code> master began</td>
          </tr><tr>
            <td scope="row"><code class="literal">secs_wait_for_ndbcntr_master</code></td>
            <td>integer</td>
            <td>Time in seconds spent waiting to be accepted by
              <code class="literal">NDBCNTR</code> master for starting</td>
          </tr><tr>
            <td scope="row"><code class="literal">secs_to_get_start_permitted</code></td>
            <td>integer</td>
            <td>Time in seconds elapsed from receiving of permission for start from
              master until all nodes have accepted start of this node</td>
          </tr><tr>
            <td scope="row"><code class="literal">secs_to_wait_for_lcp_for_copy_meta_data</code></td>
            <td>integer</td>
            <td>Time in seconds spent waiting for LCP completion before copying meta
              data</td>
          </tr><tr>
            <td scope="row"><code class="literal">secs_to_copy_meta_data</code></td>
            <td>integer</td>
            <td>Time in seconds required to copy metadata from master to newly starting
              node</td>
          </tr><tr>
            <td scope="row"><code class="literal">secs_to_include_node</code></td>
            <td>integer</td>
            <td>Time in seconds waited for GCP and inclusion of all nodes into protocols</td>
          </tr><tr>
            <td scope="row"><code class="literal">secs_starting_node_to_request_local_recovery</code></td>
            <td>integer</td>
            <td>Time in seconds that the node just starting spent waiting to request
              local recovery</td>
          </tr><tr>
            <td scope="row"><code class="literal">secs_for_local_recovery</code></td>
            <td>integer</td>
            <td>Time in seconds required for local recovery by node just starting</td>
          </tr><tr>
            <td scope="row"><code class="literal">secs_restore_fragments</code></td>
            <td>integer</td>
            <td>Time in seconds required to restore fragments from LCP files</td>
          </tr><tr>
            <td scope="row"><code class="literal">secs_undo_disk_data</code></td>
            <td>integer</td>
            <td>Time in seconds required to execute undo log on disk data part of
              records</td>
          </tr><tr>
            <td scope="row"><code class="literal">secs_exec_redo_log</code></td>
            <td>integer</td>
            <td>Time in seconds required to execute redo log on all restored fragments</td>
          </tr><tr>
            <td scope="row"><code class="literal">secs_index_rebuild</code></td>
            <td>integer</td>
            <td>Time in seconds required to rebuild indexes on restored fragments</td>
          </tr><tr>
            <td scope="row"><code class="literal">secs_to_synchronize_starting_node</code></td>
            <td>integer</td>
            <td>Time in seconds required to synchronize starting node from live nodes</td>
          </tr><tr>
            <td scope="row"><code class="literal">secs_wait_lcp_for_restart</code></td>
            <td>integer</td>
            <td>Time in seconds required for LCP start and completion before restart was
              completed</td>
          </tr><tr>
            <td scope="row"><code class="literal">secs_wait_subscription_handover</code></td>
            <td>integer</td>
            <td>Time in seconds spent waiting for handover of replication subscriptions</td>
          </tr><tr>
            <td scope="row"><code class="literal">total_restart_secs</code></td>
            <td>integer</td>
            <td>Total number of seconds from node failure until node is started again</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        Defined values for <code class="literal">node_restart_status_int</code>
        and corresponding status names and messages
        (<code class="literal">node_restart_status</code>) are shown in the
        following table:
</p>
<div class="table">
<a name="idm140091578435792"></a><p class="title"><b>Table 22.408 Status codes and messages used in the restart_info table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row">0</td>
            <td><code class="literal">ALLOCATED_NODE_ID</code></td>
            <td><code class="literal">Allocated node id</code></td>
          </tr><tr>
            <td scope="row">1</td>
            <td><code class="literal">INCLUDED_IN_HB_PROTOCOL</code></td>
            <td><code class="literal">Included in heartbeat protocol</code></td>
          </tr><tr>
            <td scope="row">2</td>
            <td><code class="literal">NDBCNTR_START_WAIT</code></td>
            <td><code class="literal">Wait for NDBCNTR master to permit us to start</code></td>
          </tr><tr>
            <td scope="row">3</td>
            <td><code class="literal">NDBCNTR_STARTED</code></td>
            <td><code class="literal">NDBCNTR master permitted us to start</code></td>
          </tr><tr>
            <td scope="row">4</td>
            <td><code class="literal">START_PERMITTED</code></td>
            <td><code class="literal">All nodes permitted us to start</code></td>
          </tr><tr>
            <td scope="row">5</td>
            <td><code class="literal">WAIT_LCP_TO_COPY_DICT</code></td>
            <td><code class="literal">Wait for LCP completion to start copying metadata</code></td>
          </tr><tr>
            <td scope="row">6</td>
            <td><code class="literal">COPY_DICT_TO_STARTING_NODE</code></td>
            <td><code class="literal">Copying metadata to starting node</code></td>
          </tr><tr>
            <td scope="row">7</td>
            <td><code class="literal">INCLUDE_NODE_IN_LCP_AND_GCP</code></td>
            <td><code class="literal">Include node in LCP and GCP protocols</code></td>
          </tr><tr>
            <td scope="row">8</td>
            <td><code class="literal">LOCAL_RECOVERY_STARTED</code></td>
            <td><code class="literal">Restore fragments ongoing</code></td>
          </tr><tr>
            <td scope="row">9</td>
            <td><code class="literal">COPY_FRAGMENTS_STARTED</code></td>
            <td><code class="literal">Synchronizing starting node with live nodes</code></td>
          </tr><tr>
            <td scope="row">10</td>
            <td><code class="literal">WAIT_LCP_FOR_RESTART</code></td>
            <td><code class="literal">Wait for LCP to ensure durability</code></td>
          </tr><tr>
            <td scope="row">11</td>
            <td><code class="literal">WAIT_SUMA_HANDOVER</code></td>
            <td><code class="literal">Wait for handover of subscriptions</code></td>
          </tr><tr>
            <td scope="row">12</td>
            <td><code class="literal">RESTART_COMPLETED</code></td>
            <td><code class="literal">Restart completed</code></td>
          </tr><tr>
            <td scope="row">13</td>
            <td><code class="literal">NODE_FAILED</code></td>
            <td><code class="literal">Node failed, failure handling in progress</code></td>
          </tr><tr>
            <td scope="row">14</td>
            <td><code class="literal">NODE_FAILURE_COMPLETED</code></td>
            <td><code class="literal">Node failure handling completed</code></td>
          </tr><tr>
            <td scope="row">15</td>
            <td><code class="literal">NODE_GETTING_PERMIT</code></td>
            <td><code class="literal">All nodes permitted us to start</code></td>
          </tr><tr>
            <td scope="row">16</td>
            <td><code class="literal">NODE_GETTING_INCLUDED</code></td>
            <td><code class="literal">Include node in LCP and GCP protocols</code></td>
          </tr><tr>
            <td scope="row">17</td>
            <td><code class="literal">NODE_GETTING_SYNCHED</code></td>
            <td><code class="literal">Synchronizing starting node with live nodes</code></td>
          </tr><tr>
            <td scope="row">18</td>
            <td><code class="literal">NODE_GETTING_LCP_WAITED</code></td>
            <td>[none]</td>
          </tr><tr>
            <td scope="row">19</td>
            <td><code class="literal">NODE_ACTIVE</code></td>
            <td><code class="literal">Restart completed</code></td>
          </tr><tr>
            <td scope="row">20</td>
            <td><code class="literal">NOT_DEFINED_IN_CLUSTER</code></td>
            <td>[none]</td>
          </tr><tr>
            <td scope="row">21</td>
            <td><code class="literal">NODE_NOT_RESTARTED_YET</code></td>
            <td><code class="literal">Initial state</code></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        Status numbers 0 through 12 apply on master nodes only; the
        remainder of those shown in the table apply to all restarting
        data nodes. Status numbers 13 and 14 define node failure states;
        20 and 21 occur when no information about the restart of a given
        node is available.
      </p><p>
        See also <a class="xref" href="mysql-cluster.html#mysql-cluster-start-phases" title="22.5.1 Summary of NDB Cluster Start Phases">Section 22.5.1, “Summary of NDB Cluster Start Phases”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-server-locks"></a>22.5.10.33 The ndbinfo server_locks Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091578335744"></a><p>
        The <code class="literal">server_locks</code> table is similar in
        structure to the <code class="literal">cluster_locks</code> table, and
        provides a subset of the information found in the latter table,
        but which is specific to the SQL node (MySQL server) where it
        resides. (The <code class="literal">cluster_locks</code> table provides
        information about all locks in the cluster.) More precisely,
        <code class="literal">server_locks</code> contains information about locks
        requested by threads belonging to the current
        <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> instance, and serves as a companion
        table to <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-server-operations" title="22.5.10.34 The ndbinfo server_operations Table"><code class="literal">server_operations</code></a>.
        This may be useful for correlating locking patterns with
        specific MySQL user sessions, queries, or use cases.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">server_locks</code> table. For each column, the
        table shows the name, data type, and a brief description.
        Additional information can be found in the notes following the
        table.
</p>
<div class="table">
<a name="idm140091578326368"></a><p class="title"><b>Table 22.409 Columns of the server_locks table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">mysql_connection_id</code></td>
            <td>integer</td>
            <td>MySQL connection ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>ID of reporting node</td>
          </tr><tr>
            <td scope="row"><code class="literal">block_instance</code></td>
            <td>integer</td>
            <td>ID of reporting LDM instance</td>
          </tr><tr>
            <td scope="row"><code class="literal">tableid</code></td>
            <td>integer</td>
            <td>ID of table containing this row</td>
          </tr><tr>
            <td scope="row"><code class="literal">fragmentid</code></td>
            <td>integer</td>
            <td>ID of fragment containing locked row</td>
          </tr><tr>
            <td scope="row"><code class="literal">rowid</code></td>
            <td>integer</td>
            <td>ID of locked row</td>
          </tr><tr>
            <td scope="row"><code class="literal">transid</code></td>
            <td>integer</td>
            <td>Transaction ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">mode</code></td>
            <td>string</td>
            <td>Lock request mode</td>
          </tr><tr>
            <td scope="row"><code class="literal">state</code></td>
            <td>string</td>
            <td>Lock state</td>
          </tr><tr>
            <td scope="row"><code class="literal">detail</code></td>
            <td>string</td>
            <td>Whether this is first holding lock in row lock queue</td>
          </tr><tr>
            <td scope="row"><code class="literal">op</code></td>
            <td>string</td>
            <td>Operation type</td>
          </tr><tr>
            <td scope="row"><code class="literal">duration_millis</code></td>
            <td>integer</td>
            <td>Milliseconds spent waiting or holding lock</td>
          </tr><tr>
            <td scope="row"><code class="literal">lock_num</code></td>
            <td>integer</td>
            <td>ID of lock object</td>
          </tr><tr>
            <td scope="row"><code class="literal">waiting_for</code></td>
            <td>integer</td>
            <td>Waiting for lock with this ID</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        The <code class="literal">mysql_connection_id</code> column shows the
        MySQL connection or thread ID as shown by
        <a class="link" href="sql-syntax.html#show-processlist" title="13.7.6.29 SHOW PROCESSLIST Syntax"><code class="literal">SHOW PROCESSLIST</code></a>.
      </p><p>
        <code class="literal">block_instance</code> refers to an instance of a
        kernel block. Together with the block name, this number can be
        used to look up a given instance in the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-threadblocks" title="22.5.10.41 The ndbinfo threadblocks Table"><code class="literal">threadblocks</code></a> table.
      </p><p>
        The <code class="literal">tableid</code> is assigned to the table by
        <code class="literal">NDB</code>; the same ID is used for this table in
        other <code class="literal">ndbinfo</code> tables, as well as in the
        output of <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-show-tables" title="22.4.27 ndb_show_tables — Display List of NDB Tables"><span class="command"><strong>ndb_show_tables</strong></span></a>.
      </p><p>
        The transaction ID shown in the <code class="literal">transid</code>
        column is the identifier generated by the NDB API for the
        transaction requesting or holding the current lock.
      </p><p>
        The <code class="literal">mode</code> column shows the lock mode, which is
        always one of <code class="literal">S</code> (shared lock) or
        <code class="literal">X</code> (exclusive lock). If a transaction has an
        exclusive lock on a given row, all other locks on that row have
        the same transaction ID.
      </p><p>
        The <code class="literal">state</code> column shows the lock state. Its
        value is always one of <code class="literal">H</code> (holding) or
        <code class="literal">W</code> (waiting). A waiting lock request waits for
        a lock held by a different transaction.
      </p><p>
        The <code class="literal">detail</code> column indicates whether this lock
        is the first holding lock in the affected row's lock queue,
        in which case it contains a <code class="literal">*</code> (asterisk
        character); otherwise, this column is empty. This information
        can be used to help identify the unique entries in a list of
        lock requests.
      </p><p>
        The <code class="literal">op</code> column shows the type of operation
        requesting the lock. This is always one of the values
        <code class="literal">READ</code>, <code class="literal">INSERT</code>,
        <code class="literal">UPDATE</code>, <code class="literal">DELETE</code>,
        <code class="literal">SCAN</code>, or <code class="literal">REFRESH</code>.
      </p><p>
        The <code class="literal">duration_millis</code> column shows the number
        of milliseconds for which this lock request has been waiting or
        holding the lock. This is reset to 0 when a lock is granted for
        a waiting request.
      </p><p>
        The lock ID (<code class="literal">lockid</code> column) is unique to this
        node and block instance.
      </p><p>
        If the <code class="literal">lock_state</code> column's value is
        <code class="literal">W</code>, this lock is waiting to be granted, and
        the <code class="literal">waiting_for</code> column shows the lock ID of
        the lock object this request is waiting for. Otherwise,
        <code class="literal">waiting_for</code> is empty.
        <code class="literal">waiting_for</code> can refer only to locks on the
        same row (as identified by <code class="literal">node_id</code>,
        <code class="literal">block_instance</code>, <code class="literal">tableid</code>,
        <code class="literal">fragmentid</code>, and <code class="literal">rowid</code>).
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-server-operations"></a>22.5.10.34 The ndbinfo server_operations Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091578231376"></a><p>
        The <code class="literal">server_operations</code> table contains entries
        for all ongoing <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> operations that
        the current SQL node (MySQL Server) is currently involved in. It
        effectively is a subset of the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-cluster-operations" title="22.5.10.5 The ndbinfo cluster_operations Table"><code class="literal">cluster_operations</code></a> table, in
        which operations for other SQL and API nodes are not shown.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">server_operations</code> table. For each column,
        the table shows the name, data type, and a brief description.
        Additional information can be found in the notes following the
        table.
</p>
<div class="table">
<a name="idm140091578224592"></a><p class="title"><b>Table 22.410 Columns of the server_operations table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">mysql_connection_id</code></td>
            <td>integer</td>
            <td>MySQL Server connection ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>Node ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">block_instance</code></td>
            <td>integer</td>
            <td>Block instance</td>
          </tr><tr>
            <td scope="row"><code class="literal">transid</code></td>
            <td>integer</td>
            <td>Transaction ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">operation_type</code></td>
            <td>string</td>
            <td>Operation type (see text for possible values)</td>
          </tr><tr>
            <td scope="row"><code class="literal">state</code></td>
            <td>string</td>
            <td>Operation state (see text for possible values)</td>
          </tr><tr>
            <td scope="row"><code class="literal">tableid</code></td>
            <td>integer</td>
            <td>Table ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">fragmentid</code></td>
            <td>integer</td>
            <td>Fragment ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">client_node_id</code></td>
            <td>integer</td>
            <td>Client node ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">client_block_ref</code></td>
            <td>integer</td>
            <td>Client block reference</td>
          </tr><tr>
            <td scope="row"><code class="literal">tc_node_id</code></td>
            <td>integer</td>
            <td>Transaction coordinator node ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">tc_block_no</code></td>
            <td>integer</td>
            <td>Transaction coordinator block number</td>
          </tr><tr>
            <td scope="row"><code class="literal">tc_block_instance</code></td>
            <td>integer</td>
            <td>Transaction coordinator block instance</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        The <code class="literal">mysql_connection_id</code> is the same as the
        connection or session ID shown in the output of
        <a class="link" href="sql-syntax.html#show-processlist" title="13.7.6.29 SHOW PROCESSLIST Syntax"><code class="literal">SHOW PROCESSLIST</code></a>. It is obtained
        from the <code class="literal">INFORMATION_SCHEMA</code> table
        <a class="link" href="information-schema.html#ndb-transid-mysql-connection-map-table" title="25.13 The INFORMATION_SCHEMA ndb_transid_mysql_connection_map Table"><code class="literal">NDB_TRANSID_MYSQL_CONNECTION_MAP</code></a>.
      </p><p>
        <code class="literal">block_instance</code> refers to an instance of a
        kernel block. Together with the block name, this number can be
        used to look up a given instance in the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-threadblocks" title="22.5.10.41 The ndbinfo threadblocks Table"><code class="literal">threadblocks</code></a> table.
      </p><p>
        The transaction ID (<code class="literal">transid</code>) is a unique
        64-bit number which can be obtained using the NDB API's
        <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndbtransaction-gettransactionid.html" target="_top"><code class="literal">getTransactionId()</code></a>
        method. (Currently, the MySQL Server does not expose the NDB API
        transaction ID of an ongoing transaction.)
      </p><p>
        The <code class="literal">operation_type</code> column can take any one of
        the values <code class="literal">READ</code>, <code class="literal">READ-SH</code>,
        <code class="literal">READ-EX</code>, <code class="literal">INSERT</code>,
        <code class="literal">UPDATE</code>, <code class="literal">DELETE</code>,
        <code class="literal">WRITE</code>, <code class="literal">UNLOCK</code>,
        <code class="literal">REFRESH</code>, <code class="literal">SCAN</code>,
        <code class="literal">SCAN-SH</code>, <code class="literal">SCAN-EX</code>, or
        <code class="literal">&lt;unknown&gt;</code>.
      </p><p>
        The <code class="literal">state</code> column can have any one of the
        values <code class="literal">ABORT_QUEUED</code>,
        <code class="literal">ABORT_STOPPED</code>, <code class="literal">COMMITTED</code>,
        <code class="literal">COMMIT_QUEUED</code>,
        <code class="literal">COMMIT_STOPPED</code>,
        <code class="literal">COPY_CLOSE_STOPPED</code>,
        <code class="literal">COPY_FIRST_STOPPED</code>,
        <code class="literal">COPY_STOPPED</code>, <code class="literal">COPY_TUPKEY</code>,
        <code class="literal">IDLE</code>, <code class="literal">LOG_ABORT_QUEUED</code>,
        <code class="literal">LOG_COMMIT_QUEUED</code>,
        <code class="literal">LOG_COMMIT_QUEUED_WAIT_SIGNAL</code>,
        <code class="literal">LOG_COMMIT_WRITTEN</code>,
        <code class="literal">LOG_COMMIT_WRITTEN_WAIT_SIGNAL</code>,
        <code class="literal">LOG_QUEUED</code>, <code class="literal">PREPARED</code>,
        <code class="literal">PREPARED_RECEIVED_COMMIT</code>,
        <code class="literal">SCAN_CHECK_STOPPED</code>,
        <code class="literal">SCAN_CLOSE_STOPPED</code>,
        <code class="literal">SCAN_FIRST_STOPPED</code>,
        <code class="literal">SCAN_RELEASE_STOPPED</code>,
        <code class="literal">SCAN_STATE_USED</code>,
        <code class="literal">SCAN_STOPPED</code>, <code class="literal">SCAN_TUPKEY</code>,
        <code class="literal">STOPPED</code>, <code class="literal">TC_NOT_CONNECTED</code>,
        <code class="literal">WAIT_ACC</code>, <code class="literal">WAIT_ACC_ABORT</code>,
        <code class="literal">WAIT_AI_AFTER_ABORT</code>,
        <code class="literal">WAIT_ATTR</code>, <code class="literal">WAIT_SCAN_AI</code>,
        <code class="literal">WAIT_TUP</code>, <code class="literal">WAIT_TUPKEYINFO</code>,
        <code class="literal">WAIT_TUP_COMMIT</code>, or
        <code class="literal">WAIT_TUP_TO_ABORT</code>. (If the MySQL Server is
        running with
        <a class="link" href="mysql-cluster.html#sysvar_ndbinfo_show_hidden"><code class="literal">ndbinfo_show_hidden</code></a> enabled,
        you can view this list of states by selecting from the
        <code class="literal">ndb$dblqh_tcconnect_state</code> table, which is
        normally hidden.)
      </p><p>
        You can obtain the name of an <code class="literal">NDB</code> table from
        its table ID by checking the output of
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-show-tables" title="22.4.27 ndb_show_tables — Display List of NDB Tables"><span class="command"><strong>ndb_show_tables</strong></span></a>.
      </p><p>
        The <code class="literal">fragid</code> is the same as the partition
        number seen in the output of <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-desc" title="22.4.9 ndb_desc — Describe NDB Tables"><span class="command"><strong>ndb_desc</strong></span></a>
        <a class="link" href="mysql-cluster.html#option_ndb_desc_extra-partition-info"><code class="option">--extra-partition-info</code></a> (short
        form <code class="option">-p</code>).
      </p><p>
        In <code class="literal">client_node_id</code> and
        <code class="literal">client_block_ref</code>, <code class="literal">client</code>
        refers to an NDB Cluster API or SQL node (that is, an NDB API
        client or a MySQL Server attached to the cluster).
      </p><p>
        The <code class="literal">block_instance</code> and
        <code class="literal">tc_block_instance</code> column provide NDB kernel
        block instance numbers. You can use these to obtain information
        about specific threads from the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-threadblocks" title="22.5.10.41 The ndbinfo threadblocks Table"><code class="literal">threadblocks</code></a> table.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-server-transactions"></a>22.5.10.35 The ndbinfo server_transactions Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091578106304"></a><p>
        The <code class="literal">server_transactions</code> table is subset of
        the <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-cluster-transactions" title="22.5.10.6 The ndbinfo cluster_transactions Table"><code class="literal">cluster_transactions</code></a>
        table, but includes only those transactions in which the current
        SQL node (MySQL Server) is a participant, while including the
        relevant connection IDs.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">server_transactions</code> table. For each
        column, the table shows the name, data type, and a brief
        description. Additional information can be found in the notes
        following the table.
</p>
<div class="table">
<a name="idm140091578100704"></a><p class="title"><b>Table 22.411 Columns of the server_transactions table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">mysql_connection_id</code></td>
            <td>integer</td>
            <td>MySQL Server connection ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>Transaction coordinator node ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">block_instance</code></td>
            <td>integer</td>
            <td>Transaction coordinator block instance</td>
          </tr><tr>
            <td scope="row"><code class="literal">transid</code></td>
            <td>integer</td>
            <td>Transaction ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">state</code></td>
            <td>string</td>
            <td>Operation state (see text for possible values)</td>
          </tr><tr>
            <td scope="row"><code class="literal">count_operations</code></td>
            <td>integer</td>
            <td>Number of stateful operations in the transaction</td>
          </tr><tr>
            <td scope="row"><code class="literal">outstanding_operations</code></td>
            <td>integer</td>
            <td>Operations still being executed by local data management layer (LQH
              blocks)</td>
          </tr><tr>
            <td scope="row"><code class="literal">inactive_seconds</code></td>
            <td>integer</td>
            <td>Time spent waiting for API</td>
          </tr><tr>
            <td scope="row"><code class="literal">client_node_id</code></td>
            <td>integer</td>
            <td>Client node ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">client_block_ref</code></td>
            <td>integer</td>
            <td>Client block reference</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        The <code class="literal">mysql_connection_id</code> is the same as the
        connection or session ID shown in the output of
        <a class="link" href="sql-syntax.html#show-processlist" title="13.7.6.29 SHOW PROCESSLIST Syntax"><code class="literal">SHOW PROCESSLIST</code></a>. It is obtained
        from the <code class="literal">INFORMATION_SCHEMA</code> table
        <a class="link" href="information-schema.html#ndb-transid-mysql-connection-map-table" title="25.13 The INFORMATION_SCHEMA ndb_transid_mysql_connection_map Table"><code class="literal">NDB_TRANSID_MYSQL_CONNECTION_MAP</code></a>.
      </p><p>
        <code class="literal">block_instance</code> refers to an instance of a
        kernel block. Together with the block name, this number can be
        used to look up a given instance in the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-threadblocks" title="22.5.10.41 The ndbinfo threadblocks Table"><code class="literal">threadblocks</code></a> table.
      </p><p>
        The transaction ID (<code class="literal">transid</code>) is a unique
        64-bit number which can be obtained using the NDB API's
        <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndbtransaction-gettransactionid.html" target="_top"><code class="literal">getTransactionId()</code></a>
        method. (Currently, the MySQL Server does not expose the NDB API
        transaction ID of an ongoing transaction.)
      </p><p>
        The <code class="literal">state</code> column can have any one of the
        values <code class="literal">CS_ABORTING</code>,
        <code class="literal">CS_COMMITTING</code>,
        <code class="literal">CS_COMMIT_SENT</code>,
        <code class="literal">CS_COMPLETE_SENT</code>,
        <code class="literal">CS_COMPLETING</code>,
        <code class="literal">CS_CONNECTED</code>,
        <code class="literal">CS_DISCONNECTED</code>,
        <code class="literal">CS_FAIL_ABORTED</code>,
        <code class="literal">CS_FAIL_ABORTING</code>,
        <code class="literal">CS_FAIL_COMMITTED</code>,
        <code class="literal">CS_FAIL_COMMITTING</code>,
        <code class="literal">CS_FAIL_COMPLETED</code>,
        <code class="literal">CS_FAIL_PREPARED</code>,
        <code class="literal">CS_PREPARE_TO_COMMIT</code>,
        <code class="literal">CS_RECEIVING</code>,
        <code class="literal">CS_REC_COMMITTING</code>,
        <code class="literal">CS_RESTART</code>,
        <code class="literal">CS_SEND_FIRE_TRIG_REQ</code>,
        <code class="literal">CS_STARTED</code>,
        <code class="literal">CS_START_COMMITTING</code>,
        <code class="literal">CS_START_SCAN</code>,
        <code class="literal">CS_WAIT_ABORT_CONF</code>,
        <code class="literal">CS_WAIT_COMMIT_CONF</code>,
        <code class="literal">CS_WAIT_COMPLETE_CONF</code>,
        <code class="literal">CS_WAIT_FIRE_TRIG_REQ</code>. (If the MySQL Server
        is running with
        <a class="link" href="mysql-cluster.html#sysvar_ndbinfo_show_hidden"><code class="literal">ndbinfo_show_hidden</code></a> enabled,
        you can view this list of states by selecting from the
        <code class="literal">ndb$dbtc_apiconnect_state</code> table, which is
        normally hidden.)
      </p><p>
        In <code class="literal">client_node_id</code> and
        <code class="literal">client_block_ref</code>, <code class="literal">client</code>
        refers to an NDB Cluster API or SQL node (that is, an NDB API
        client or a MySQL Server attached to the cluster).
      </p><p>
        The <code class="literal">block_instance</code> column provides the
        <code class="literal">DBTC</code> kernel block instance number. You can
        use this to obtain information about specific threads from the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-threadblocks" title="22.5.10.41 The ndbinfo threadblocks Table"><code class="literal">threadblocks</code></a> table.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-table-distribution-status"></a>22.5.10.36 The ndbinfo table_distribution_status Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091578017856"></a><p>
        The <code class="literal">table_distribution_status</code> table provides
        information about the progress of table distribution for
        <code class="literal">NDB</code> tables.
      </p><p>
        The following table provides information about the columns in
        <code class="literal">table_distribution_status</code>. For each column,
        the table shows the name, data type, and a brief description.
</p>
<div class="table">
<a name="idm140091578013184"></a><p class="title"><b>Table 22.412 Columns of the table_distribution_status table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>Node id</td>
          </tr><tr>
            <td scope="row"><code class="literal">table_id</code></td>
            <td>integer</td>
            <td>Table ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">tab_copy_status</code></td>
            <td>string</td>
            <td>Status of copying of table distribution data to disk; one of
              <code class="literal">IDLE</code>,
              <code class="literal">SR_PHASE1_READ_PAGES</code>,
              <code class="literal">SR_PHASE2_READ_TABLE</code>,
              <code class="literal">SR_PHASE3_COPY_TABLE</code>,
              <code class="literal">REMOVE_NODE</code>,
              <code class="literal">LCP_READ_TABLE</code>,
              <code class="literal">COPY_TAB_REQ</code>,
              <code class="literal">COPY_NODE_STATE</code>,
              <code class="literal">ADD_TABLE_MASTER</code>,
              <code class="literal">ADD_TABLE_SLAVE</code>,
              <code class="literal">INVALIDATE_NODE_LCP</code>,
              <code class="literal">ALTER_TABLE</code>,
              <code class="literal">COPY_TO_SAVE</code>, or
              <code class="literal">GET_TABINFO</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">tab_update_status</code></td>
            <td>string</td>
            <td>Status of updating of table distribution data; one of
              <code class="literal">IDLE</code>,
              <code class="literal">LOCAL_CHECKPOINT</code>,
              <code class="literal">LOCAL_CHECKPOINT_QUEUED</code>,
              <code class="literal">REMOVE_NODE</code>,
              <code class="literal">COPY_TAB_REQ</code>,
              <code class="literal">ADD_TABLE_MASTER</code>,
              <code class="literal">ADD_TABLE_SLAVE</code>,
              <code class="literal">INVALIDATE_NODE_LCP</code>, or
              <code class="literal">CALLBACK</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">tab_lcp_status</code></td>
            <td>string</td>
            <td>Status of table LCP; one of <code class="literal">ACTIVE</code> (waiting for local
              checkpoint to be performed),
              <code class="literal">WRITING_TO_FILE</code> (checkpoint performed
              but not yet written to disk), or
              <code class="literal">COMPLETED</code> (checkpoint performed and
              persisted to disk)</td>
          </tr><tr>
            <td scope="row"><code class="literal">tab_status</code></td>
            <td>string</td>
            <td>Table internal status; one of <code class="literal">ACTIVE</code> (table exists),
              <code class="literal">CREATING</code> (table is being created), or
              <code class="literal">DROPPING</code> (table is being dropped)</td>
          </tr><tr>
            <td scope="row"><code class="literal">tab_storage</code></td>
            <td>string</td>
            <td>Table recoverability; one of <code class="literal">NORMAL</code> (fully
              recoverable with redo logging and checkpointing),
              <code class="literal">NOLOGGING</code> (recoverable from node crash,
              empty following cluster crash), or
              <code class="literal">TEMPORARY</code> (not recoverable)</td>
          </tr><tr>
            <td scope="row"><code class="literal">tab_partitions</code></td>
            <td>integer</td>
            <td>Number of partitions in table</td>
          </tr><tr>
            <td scope="row"><code class="literal">tab_fragments</code></td>
            <td>integer</td>
            <td>Number of fragments in table; normally same as
              <code class="literal">tab_partitions</code>; for fully replicated
              tables equal to <code class="literal">tab_partitions * [number of node
              groups]</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">current_scan_count</code></td>
            <td>integer</td>
            <td>Current number of active scans</td>
          </tr><tr>
            <td scope="row"><code class="literal">scan_count_wait</code></td>
            <td>integer</td>
            <td>Current number of scans waiting to be performed before <code class="literal">ALTER
              TABLE</code> can complete.</td>
          </tr><tr>
            <td scope="row"><code class="literal">is_reorg_ongoing</code></td>
            <td>integer</td>
            <td>Whether table is currently being reorganized (1 if true)</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-table-fragments"></a>22.5.10.37 The ndbinfo table_fragments Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091577934000"></a><p>
        The <code class="literal">table_fragments</code> table provides
        information about the fragmentation, partitioning, distribution,
        and (internal) replication of <code class="literal">NDB</code> tables.
      </p><p>
        The following table provides information about the columns in
        <code class="literal">table_fragments</code>. For each column, the table
        shows the name, data type, and a brief description.
</p>
<div class="table">
<a name="idm140091577929296"></a><p class="title"><b>Table 22.413 Columns of the table_fragments table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>Node ID (<code class="literal">DIH</code> master)</td>
          </tr><tr>
            <td scope="row"><code class="literal">table_id</code></td>
            <td>integer</td>
            <td>Table ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">partition_id</code></td>
            <td>integer</td>
            <td>Partition ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">fragment_id</code></td>
            <td>integer</td>
            <td>Fragment ID (same as partition ID unless table is fully replicated)</td>
          </tr><tr>
            <td scope="row"><code class="literal">partition_order</code></td>
            <td>integer</td>
            <td>Order of fragment in partition</td>
          </tr><tr>
            <td scope="row"><code class="literal">log_part_id</code></td>
            <td>integer</td>
            <td>Log part ID of fragment</td>
          </tr><tr>
            <td scope="row"><code class="literal">no_of_replicas</code></td>
            <td>integer</td>
            <td>Number of replicas</td>
          </tr><tr>
            <td scope="row"><code class="literal">current_primary</code></td>
            <td>integer</td>
            <td>Current primary node ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">preferred_primary</code></td>
            <td>integer</td>
            <td>Preferred primary node ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">current_first_backup</code></td>
            <td>integer</td>
            <td>Current first backup node ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">current_second_backup</code></td>
            <td>integer</td>
            <td>Current second backup node ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">current_third_backup</code></td>
            <td>integer</td>
            <td>Current third backup node ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">num_alive_replicas</code></td>
            <td>integer</td>
            <td>Current number of live replicas</td>
          </tr><tr>
            <td scope="row"><code class="literal">num_dead_replicas</code></td>
            <td>integer</td>
            <td>Current number of dead replicas</td>
          </tr><tr>
            <td scope="row"><code class="literal">num_lcp_replicas</code></td>
            <td>integer</td>
            <td>Number of replicas remaining to be checkpointed</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-table-info"></a>22.5.10.38 The ndbinfo table_info Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091577863888"></a><p>
        The <code class="literal">table_info</code> table provides information
        about logging, checkpointing, distribution, and storage options
        in effect for individual <code class="literal">NDB</code> tables.
      </p><p>
        The following table provides information about the columns in
        <code class="literal">table_info</code>. For each column, the table shows
        the name, data type, and a brief description.
</p>
<div class="table">
<a name="idm140091577859184"></a><p class="title"><b>Table 22.414 Columns of the table_info table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">table_id</code></td>
            <td>integer</td>
            <td>Table ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">logged_table</code></td>
            <td>integer</td>
            <td>Whether table is logged (1) or not (0)</td>
          </tr><tr>
            <td scope="row"><code class="literal">row_contains_gci</code></td>
            <td>integer</td>
            <td>Whether table rows contain GCI (1 true, 0 false)</td>
          </tr><tr>
            <td scope="row"><code class="literal">row_contains_checksum</code></td>
            <td>integer</td>
            <td>Whether table rows contain checksum (1 true, 0 false)</td>
          </tr><tr>
            <td scope="row"><code class="literal">read_backup</code></td>
            <td>integer</td>
            <td>If backup replicas are read this is 1, otherwise 0</td>
          </tr><tr>
            <td scope="row"><code class="literal">fully_replicated</code></td>
            <td>integer</td>
            <td>If table is fully replicated this is 1, otherwise 0</td>
          </tr><tr>
            <td scope="row"><code class="literal">storage_type</code></td>
            <td>string</td>
            <td>Table storage type; one of <code class="literal">MEMORY</code> or
              <code class="literal">DISK</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">hashmap_id</code></td>
            <td>integer</td>
            <td>Hashmap ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">partition_balance</code></td>
            <td>string</td>
            <td>Partition balance (fragment count type) used for table; one of
              <code class="literal">FOR_RP_BY_NODE</code>,
              <code class="literal">FOR_RA_BY_NODE</code>,
              <code class="literal">FOR_RP_BY_LDM</code>, or
              <code class="literal">FOR_RA_BY_LDM</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">create_gci</code></td>
            <td>integer</td>
            <td>GCI in which table was created</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-table-replicas"></a>22.5.10.39 The ndbinfo table_replicas Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091577808960"></a><p>
        The <code class="literal">table_replicas</code> table provides information
        about the copying, distribution, and checkpointing of
        <code class="literal">NDB</code> table fragments and fragment replicas.
      </p><p>
        The following table provides information about the columns in
        <code class="literal">table_replicas</code>. For each column, the table
        shows the name, data type, and a brief description.
</p>
<div class="table">
<a name="idm140091577804256"></a><p class="title"><b>Table 22.415 Columns of the table_replicas table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>ID of the node from which data is fetched (<code class="literal">DIH</code>
              master)</td>
          </tr><tr>
            <td scope="row"><code class="literal">table_id</code></td>
            <td>integer</td>
            <td>Table ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">fragment_id</code></td>
            <td>integer</td>
            <td>Fragment ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">initial_gci</code></td>
            <td>integer</td>
            <td>Initial GCI for table</td>
          </tr><tr>
            <td scope="row"><code class="literal">replica_node_id</code></td>
            <td>integer</td>
            <td>ID of node where replica is stored</td>
          </tr><tr>
            <td scope="row"><code class="literal">is_lcp_ongoing</code></td>
            <td>integer</td>
            <td>Is 1 if LCP is ongoing on this fragment, 0 otherwise</td>
          </tr><tr>
            <td scope="row"><code class="literal">num_crashed_replicas</code></td>
            <td>integer</td>
            <td>Number of crashed replica instances</td>
          </tr><tr>
            <td scope="row"><code class="literal">last_max_gci_started</code></td>
            <td>integer</td>
            <td>Highest GCI started in most recent LCP</td>
          </tr><tr>
            <td scope="row"><code class="literal">last_max_gci_completed</code></td>
            <td>integer</td>
            <td>Highest GCI completed in most recent LCP</td>
          </tr><tr>
            <td scope="row"><code class="literal">last_lcp_id</code></td>
            <td>integer</td>
            <td>ID of most recent LCP</td>
          </tr><tr>
            <td scope="row"><code class="literal">prev_lcp_id</code></td>
            <td>integer</td>
            <td>ID of previous LCP</td>
          </tr><tr>
            <td scope="row"><code class="literal">prev_max_gci_started</code></td>
            <td>integer</td>
            <td>Highest GCI started in previous LCP</td>
          </tr><tr>
            <td scope="row"><code class="literal">prev_max_gci_completed</code></td>
            <td>integer</td>
            <td>Highest GCI completed in previous LCP</td>
          </tr><tr>
            <td scope="row"><code class="literal">last_create_gci</code></td>
            <td>integer</td>
            <td>Last Create GCI of last crashed replica instance</td>
          </tr><tr>
            <td scope="row"><code class="literal">last_replica_gci</code></td>
            <td>integer</td>
            <td>Last GCI of last crashed replica instance</td>
          </tr><tr>
            <td scope="row"><code class="literal">is_replica_alive</code></td>
            <td>integer</td>
            <td>1 if this replica is alive, 0 otherwise</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-tc-time-track-stats"></a>22.5.10.40 The ndbinfo tc_time_track_stats Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091577734976"></a><p>
        The <code class="literal">tc_time_track_stats</code> table provides
        time-tracking information obtained from the
        <code class="literal">DBTC</code> block (TC) instances in the data nodes,
        through API nodes access <code class="literal">NDB</code>. Each TC
        instance tracks latencies for a set of activities it undertakes
        on behalf of API nodes or other data nodes; these activities
        include transactions, transaction errors, key reads, key writes,
        unique index operations, failed key operations of any type,
        scans, failed scans, fragment scans, and failed fragment scans.
      </p><p>
        A set of counters is maintained for each activity, each counter
        covering a range of latencies less than or equal to an upper
        bound. At the conclusion of each activity, its latency is
        determined and the appropriate counter incremented.
        <code class="literal">tc_time_track_stats</code> presents this information
        as rows, with a row for each instance of the following:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Data node, using its ID
          </p></li><li class="listitem"><p>
            TC block instance
          </p></li><li class="listitem"><p>
            Other communicating data node or API node, using its ID
          </p></li><li class="listitem"><p>
            Upper bound value
</p></li></ul>
</div>
<p>
        Each row contains a value for each activity type. This is the
        number of times that this activity occurred with a latency
        within the range specified by the row (that is, where the
        latency does not exceed the upper bound).
      </p><p>
        The following table provides information about the columns in
        <code class="literal">tc_time_track_stats</code>. For each column, the
        table shows the name, data type, and a brief description.
        Additional information can be found in the notes following the
        table.
</p>
<div class="table">
<a name="idm140091577723296"></a><p class="title"><b>Table 22.416 Columns of the tc_time_track_stats table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>Requesting node ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">block_number</code></td>
            <td>integer</td>
            <td>TC block number</td>
          </tr><tr>
            <td scope="row"><code class="literal">block_instance</code></td>
            <td>integer</td>
            <td>TC block instance number</td>
          </tr><tr>
            <td scope="row"><code class="literal">comm_node_id</code></td>
            <td>integer</td>
            <td>Node ID of communicating API or data node</td>
          </tr><tr>
            <td scope="row"><code class="literal">upper_bound</code></td>
            <td>integer</td>
            <td>Upper bound of interval (in microseconds)</td>
          </tr><tr>
            <td scope="row"><code class="literal">scans</code></td>
            <td>integer</td>
            <td>Based on duration of successful scans from opening to closing, tracked
              against the API or data nodes requesting them.</td>
          </tr><tr>
            <td scope="row"><code class="literal">scan_errors</code></td>
            <td>integer</td>
            <td>Based on duration of failed scans from opening to closing, tracked
              against the API or data nodes requesting them.</td>
          </tr><tr>
            <td scope="row"><code class="literal">scan_fragments</code></td>
            <td>integer</td>
            <td>Based on duration of successful fragment scans from opening to closing,
              tracked against the data nodes executing them</td>
          </tr><tr>
            <td scope="row"><code class="literal">scan_fragment_errors</code></td>
            <td>integer</td>
            <td>Based on duration of failed fragment scans from opening to closing,
              tracked against the data nodes executing them</td>
          </tr><tr>
            <td scope="row"><code class="literal">transactions</code></td>
            <td>integer</td>
            <td>Based on duration of successful transactions from beginning until
              sending of commit <code class="literal">ACK</code>, tracked against
              the API or data nodes requesting them. Stateless
              transactions are not included.</td>
          </tr><tr>
            <td scope="row"><code class="literal">transaction_errors</code></td>
            <td>integer</td>
            <td>Based on duration of failing transactions from start to point of
              failure, tracked against the API or data nodes requesting
              them.</td>
          </tr><tr>
            <td scope="row"><code class="literal">read_key_ops</code></td>
            <td>integer</td>
            <td>Based on duration of successful primary key reads with locks. Tracked
              against both the API or data node requesting them and the
              data node executing them.</td>
          </tr><tr>
            <td scope="row"><code class="literal">write_key_ops</code></td>
            <td>integer</td>
            <td>Based on duration of successful primary key writes, tracked against both
              the API or data node requesting them and the data node
              executing them.</td>
          </tr><tr>
            <td scope="row"><code class="literal">index_key_ops</code></td>
            <td>integer</td>
            <td>Based on duration of successful unique index key operations, tracked
              against both the API or data node requesting them and the
              data node executing reads of base tables.</td>
          </tr><tr>
            <td scope="row"><code class="literal">key_op_errors</code></td>
            <td>integer</td>
            <td>Based on duration of all unsuccessful key read or write operations,
              tracked against both the API or data node requesting them
              and the data node executing them.</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        The <code class="literal">block_instance</code> column provides the
        <code class="literal">DBTC</code> kernel block instance number. You can
        use this together with the block name to obtain information
        about specific threads from the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-threadblocks" title="22.5.10.41 The ndbinfo threadblocks Table"><code class="literal">threadblocks</code></a> table.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-threadblocks"></a>22.5.10.41 The ndbinfo threadblocks Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091577653184"></a><p>
        The <code class="literal">threadblocks</code> table associates data nodes,
        threads, and instances of <code class="literal">NDB</code> kernel blocks.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">threadblocks</code> table. For each column, the
        table shows the name, data type, and a brief description.
        Additional information can be found in the notes following the
        table.
</p>
<div class="table">
<a name="idm140091577648448"></a><p class="title"><b>Table 22.417 Columns of the threadblocks table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>Node ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">thr_no</code></td>
            <td>integer</td>
            <td>Thread ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">block_name</code></td>
            <td>string</td>
            <td>Block name</td>
          </tr><tr>
            <td scope="row"><code class="literal">block_instance</code></td>
            <td>integer</td>
            <td>Block instance number</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        The value of the <code class="literal">block_name</code> in this table is
        one of the values found in the <code class="literal">block_name</code>
        column when selecting from the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-blocks" title="22.5.10.3 The ndbinfo blocks Table"><code class="literal">ndbinfo.blocks</code></a> table. Although
        the list of possible values is static for a given NDB Cluster
        release, the list may vary between releases.
      </p><p>
        The <code class="literal">block_instance</code> column provides the kernel
        block instance number.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-threads"></a>22.5.10.42 The ndbinfo threads Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091577620096"></a><p>
        The <code class="literal">threads</code> table provides information about
        threads running in the <code class="literal">NDB</code> kernel.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">threads</code> table. For each column, the table
        shows the name, data type, and a brief description. Additional
        information can be found in the notes following the table.
</p>
<div class="table">
<a name="idm140091577615376"></a><p class="title"><b>Table 22.418 Columns of the threads table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>ID of the node where the thread is running</td>
          </tr><tr>
            <td scope="row"><code class="literal">thr_no</code></td>
            <td>integer</td>
            <td>Thread ID (specific to this node)</td>
          </tr><tr>
            <td scope="row"><code class="literal">thread_name</code></td>
            <td>string</td>
            <td>Thread name (type of thread)</td>
          </tr><tr>
            <td scope="row"><code class="literal">thread_description</code></td>
            <td>string</td>
            <td>Thread (type) description</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        Sample output from a 2-node example cluster, including thread
        descriptions, is shown here:
      </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT * FROM threads;</code></strong>
+---------+--------+-------------+------------------------------------------------------------------+
| node_id | thr_no | thread_name | thread_description                                               |
+---------+--------+-------------+------------------------------------------------------------------+
|       5 |      0 | main        | main thread, schema and distribution handling                    |
|       5 |      1 | rep         | rep thread, asynch replication and proxy block handling          |
|       5 |      2 | ldm         | ldm thread, handling a set of data partitions                    |
|       5 |      3 | recv        | receive thread, performing receive and polling for new receives |
|       6 |      0 | main        | main thread, schema and distribution handling                    |
|       6 |      1 | rep         | rep thread, asynch replication and proxy block handling          |
|       6 |      2 | ldm         | ldm thread, handling a set of data partitions                    |
|       6 |      3 | recv        | receive thread, performing receive and polling for new receives |
+---------+--------+-------------+------------------------------------------------------------------+
8 rows in set (0.01 sec)
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-threadstat"></a>22.5.10.43 The ndbinfo threadstat Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091577588208"></a><p>
        The <code class="literal">threadstat</code> table provides a rough
        snapshot of statistics for threads running in the
        <code class="literal">NDB</code> kernel.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">threadstat</code> table. For each column, the
        table shows the name, data type, and a brief description.
        Additional information can be found in the notes following the
        table.
</p>
<div class="table">
<a name="idm140091577583440"></a><p class="title"><b>Table 22.419 Columns of the threadstat table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>Node ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">thr_no</code></td>
            <td>integer</td>
            <td>Thread ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">thr_nm</code></td>
            <td>string</td>
            <td>Thread name</td>
          </tr><tr>
            <td scope="row"><code class="literal">c_loop</code></td>
            <td>string</td>
            <td>Number of loops in main loop</td>
          </tr><tr>
            <td scope="row"><code class="literal">c_exec</code></td>
            <td>string</td>
            <td>Number of signals executed</td>
          </tr><tr>
            <td scope="row"><code class="literal">c_wait</code></td>
            <td>string</td>
            <td>Number of times waiting for additional input</td>
          </tr><tr>
            <td scope="row"><code class="literal">c_l_sent_prioa</code></td>
            <td>integer</td>
            <td>Number of priority A signals sent to own node</td>
          </tr><tr>
            <td scope="row"><code class="literal">c_l_sent_priob</code></td>
            <td>integer</td>
            <td>Number of priority B signals sent to own node</td>
          </tr><tr>
            <td scope="row"><code class="literal">c_r_sent_prioa</code></td>
            <td>integer</td>
            <td>Number of priority A signals sent to remote node</td>
          </tr><tr>
            <td scope="row"><code class="literal">c_r_sent_priob</code></td>
            <td>integer</td>
            <td>Number of priority B signals sent to remote node</td>
          </tr><tr>
            <td scope="row"><code class="literal">os_tid</code></td>
            <td>integer</td>
            <td>OS thread ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">os_now</code></td>
            <td>integer</td>
            <td>OS time (ms)</td>
          </tr><tr>
            <td scope="row"><code class="literal">os_ru_utime</code></td>
            <td>integer</td>
            <td>OS user CPU time (µs)</td>
          </tr><tr>
            <td scope="row"><code class="literal">os_ru_stime</code></td>
            <td>integer</td>
            <td>OS system CPU time (µs)</td>
          </tr><tr>
            <td scope="row"><code class="literal">os_ru_minflt</code></td>
            <td>integer</td>
            <td>OS page reclaims (soft page faults)</td>
          </tr><tr>
            <td scope="row"><code class="literal">os_ru_majflt</code></td>
            <td>integer</td>
            <td>OS page faults (hard page faults)</td>
          </tr><tr>
            <td scope="row"><code class="literal">os_ru_nvcsw</code></td>
            <td>integer</td>
            <td>OS voluntary context switches</td>
          </tr><tr>
            <td scope="row"><code class="literal">os_ru_nivcsw</code></td>
            <td>integer</td>
            <td>OS involuntary context switches</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        <code class="literal">os_time</code> uses the system
        <code class="function">gettimeofday()</code> call.
      </p><p>
        The values of the <code class="literal">os_ru_utime</code>,
        <code class="literal">os_ru_stime</code>, <code class="literal">os_ru_minflt</code>,
        <code class="literal">os_ru_majflt</code>, <code class="literal">os_ru_nvcsw</code>,
        and <code class="literal">os_ru_nivcsw</code> columns are obtained using
        the system <code class="function">getrusage()</code> call, or the
        equivalent.
      </p><p>
        Since this table contains counts taken at a given point in time,
        for best results it is necessary to query this table
        periodically and store the results in an intermediate table or
        tables. The MySQL Server's Event Scheduler can be employed
        to automate such monitoring. For more information, see
        <a class="xref" href="stored-objects.html#event-scheduler" title="24.4 Using the Event Scheduler">Section 24.4, “Using the Event Scheduler”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-ndbinfo-transporters"></a>22.5.10.44 The ndbinfo transporters Table</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091577498768"></a><p>
        This table contains information about NDB transporters.
      </p><p>
        The following table provides information about the columns in
        the <code class="literal">transporters</code> table. For each column, the
        table shows the name, data type, and a brief description.
        Additional information can be found in the notes following the
        table.
</p>
<div class="table">
<a name="idm140091577495440"></a><p class="title"><b>Table 22.420 Columns of the transporters table</b></p>
<div class="table-contents">
<table><col width="30%"><col width="25%"><col width="45%"><thead><tr>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">node_id</code></td>
            <td>integer</td>
            <td>This data node's unique node ID in the cluster</td>
          </tr><tr>
            <td scope="row"><code class="literal">remote_node_id</code></td>
            <td>integer</td>
            <td>The remote data node's node ID</td>
          </tr><tr>
            <td scope="row"><code class="literal">status</code></td>
            <td>string</td>
            <td>Status of the connection</td>
          </tr><tr>
            <td scope="row"><code class="literal">remote_address</code></td>
            <td>string</td>
            <td>Name or IP address of the remote host</td>
          </tr><tr>
            <td scope="row"><code class="literal">bytes_sent</code></td>
            <td>integer</td>
            <td>Number of bytes sent using this connection</td>
          </tr><tr>
            <td scope="row"><code class="literal">bytes_received</code></td>
            <td>integer</td>
            <td>Number of bytes received using this connection</td>
          </tr><tr>
            <td scope="row"><code class="literal">connect_count</code></td>
            <td>integer</td>
            <td>Number of times connection established on this transporter</td>
          </tr><tr>
            <td scope="row"><code class="literal">overloaded</code></td>
            <td>boolean (0 or 1)</td>
            <td>1 if this transporter is currently overloaded, otherwise 0</td>
          </tr><tr>
            <td scope="row"><code class="literal">overload_count</code></td>
            <td>integer</td>
            <td>Number of times this transporter has entered overload state since
              connecting</td>
          </tr><tr>
            <td scope="row"><code class="literal">slowdown</code></td>
            <td>boolean (0 or 1)</td>
            <td>1 if this transporter is in slowdown state, otherwise 0</td>
          </tr><tr>
            <td scope="row"><code class="literal">slowdown_count</code></td>
            <td>integer</td>
            <td>Number of times this transporter has entered slowdown state since
              connecting</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        For each running data node in the cluster, the
        <code class="literal">transporters</code> table displays a row showing the
        status of each of that node's connections with all nodes in
        the cluster, <span class="emphasis"><em>including itself</em></span>. This
        information is shown in the table's
        <span class="emphasis"><em>status</em></span> column, which can have any one of
        the following values: <code class="literal">CONNECTING</code>,
        <code class="literal">CONNECTED</code>, <code class="literal">DISCONNECTING</code>,
        or <code class="literal">DISCONNECTED</code>.
      </p><p>
        Connections to API and management nodes which are configured but
        not currently connected to the cluster are shown with status
        <code class="literal">DISCONNECTED</code>. Rows where the
        <code class="literal">node_id</code> is that of a data node which is not
        currently connected are not shown in this table. (This is
        similar omission of disconnected nodes in the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-nodes" title="22.5.10.28 The ndbinfo nodes Table"><code class="literal">ndbinfo.nodes</code></a> table.
      </p><p>
        The <code class="literal">remote_address</code> is the host name or
        address for the node whose ID is shown in the
        <code class="literal">remote_node_id</code> column. The
        <code class="literal">bytes_sent</code> from this node and
        <code class="literal">bytes_received</code> by this node are the numbers,
        respectively, of bytes sent and received by the node using this
        connection since it was established. For nodes whose status is
        <code class="literal">CONNECTING</code> or
        <code class="literal">DISCONNECTED</code>, these columns always display
        <code class="literal">0</code>.
      </p><p>
        Assume you have a 5-node cluster consisting of 2 data nodes, 2
        SQL nodes, and 1 management node, as shown in the output of the
        <a class="link" href="mysql-cluster.html#ndbclient-show"><code class="literal">SHOW</code></a> command in the
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> client:
      </p><pre data-lang="ndbmgm" class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>SHOW</code></strong>
Connected to Management Server at: localhost:1186
Cluster Configuration
---------------------
[ndbd(NDB)]     2 node(s)
id=1    @10.100.10.1  (8.0.17-ndb-8.0.17, Nodegroup: 0, *)
id=2    @10.100.10.2  (8.0.17-ndb-8.0.17, Nodegroup: 0)

[ndb_mgmd(MGM)] 1 node(s)
id=10   @10.100.10.10  (8.0.17-ndb-8.0.17)

[mysqld(API)]   2 node(s)
id=20   @10.100.10.20  (8.0.17-ndb-8.0.17)
id=21   @10.100.10.21  (8.0.17-ndb-8.0.17)
</pre><p>
        There are 10 rows in the <code class="literal">transporters</code>
        table—5 for the first data node, and 5 for the
        second—assuming that all data nodes are running, as shown
        here:
      </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT node_id, remote_node_id, status</code></strong>
    -&gt;   <strong class="userinput"><code>FROM ndbinfo.transporters;</code></strong>
+---------+----------------+---------------+
| node_id | remote_node_id | status        |
+---------+----------------+---------------+
|       1 |              1 | DISCONNECTED  |
|       1 |              2 | CONNECTED     |
|       1 |             10 | CONNECTED     |
|       1 |             20 | CONNECTED     |
|       1 |             21 | CONNECTED     |
|       2 |              1 | CONNECTED     |
|       2 |              2 | DISCONNECTED  |
|       2 |             10 | CONNECTED     |
|       2 |             20 | CONNECTED     |
|       2 |             21 | CONNECTED     |
+---------+----------------+---------------+
10 rows in set (0.04 sec)
</pre><p>
        If you shut down one of the data nodes in this cluster using the
        command <code class="literal">2 STOP</code> in the
        <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> client, then repeat the previous
        query (again using the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client), this
        table now shows only 5 rows—1 row for each connection from
        the remaining management node to another node, including both
        itself and the data node that is currently offline—and
        displays <code class="literal">CONNECTING</code> for the status of each
        remaining connection to the data node that is currently offline,
        as shown here:
      </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT node_id, remote_node_id, status</code></strong>
    -&gt;   <strong class="userinput"><code>FROM ndbinfo.transporters;</code></strong>
+---------+----------------+---------------+
| node_id | remote_node_id | status        |
+---------+----------------+---------------+
|       1 |              1 | DISCONNECTED  |
|       1 |              2 | CONNECTING    |
|       1 |             10 | CONNECTED     |
|       1 |             20 | CONNECTED     |
|       1 |             21 | CONNECTED     |
+---------+----------------+---------------+
5 rows in set (0.02 sec)
</pre><p>
        The <code class="literal">connect_count</code>,
        <code class="literal">overloaded</code>,
        <code class="literal">overload_count</code>, <code class="literal">slowdown</code>,
        and <code class="literal">slowdown_count</code> counters are reset on
        connection, and retain their values after the remote node
        disconnects. The <code class="literal">bytes_sent</code> and
        <code class="literal">bytes_received</code> counters are also reset on
        connection, and so retain their values following disconnection
        (until the next connection resets them).
      </p><p>
        The <span class="emphasis"><em>overload</em></span> state referred to by the
        <code class="literal">overloaded</code> and
        <code class="literal">overload_count</code> columns occurs when this
        transporter's send buffer contains more than
        <a class="link" href="mysql-cluster.html#ndbparam-tcp-overloadlimit"><code class="literal">OVerloadLimit</code></a> bytes
        (default is 80% of
        <a class="link" href="mysql-cluster.html#ndbparam-tcp-sendbuffermemory"><code class="literal">SendBufferMemory</code></a>, that
        is, 0.8 * 2097152 = 1677721 bytes). When a given transporter is
        in a state of overload, any new transaction that tries to use
        this transporter fails with Error 1218 (<span class="errortext">Send Buffers
        overloaded in NDB kernel</span>). This affects both scans
        and primary key operations.
      </p><p>
        The <span class="emphasis"><em>slowdown</em></span> state referenced by the
        <code class="literal">slowdown</code> and
        <code class="literal">slowdown_count</code> columns of this table occurs
        when the transporter's send buffer contains more than 60%
        of the overload limit (equal to 0.6 * 2097152 = 1258291 bytes by
        default). In this state, any new scan using this transporter has
        its batch size reduced to minimize the load on the transporter.
      </p><p>
        Common causes of send buffer slowdown or overloading include the
        following:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Data size, in particular the quantity of data stored in
            <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> columns or
            <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> columns (or both types
            of columns)
          </p></li><li class="listitem"><p>
            Having a data node (ndbd or ndbmtd) on the same host as an
            SQL node that is engaged in binary logging
          </p></li><li class="listitem"><p>
            Large number of rows per transaction or transaction batch
          </p></li><li class="listitem"><p>
            Configuration issues such as insufficient
            <a class="link" href="mysql-cluster.html#ndbparam-tcp-sendbuffermemory"><code class="literal">SendBufferMemory</code></a>
          </p></li><li class="listitem"><p>
            Hardware issues such as insufficient RAM or poor network
            connectivity
</p></li></ul>
</div>
<p>
        See also <a class="xref" href="mysql-cluster.html#mysql-cluster-config-send-buffers" title="22.3.3.14 Configuring NDB Cluster Send Buffer Parameters">Section 22.3.3.14, “Configuring NDB Cluster Send Buffer Parameters”</a>.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-i_s-tables"></a>22.5.11 INFORMATION_SCHEMA Tables for NDB Cluster</h3>

</div>

</div>

</div>
<p>
      Two <a class="link" href="information-schema.html" title="Chapter 25 INFORMATION_SCHEMA Tables"><code class="literal">INFORMATION_SCHEMA</code></a> tables provide
      information that is of particular use when managing an NDB Cluster
      . The <a class="link" href="information-schema.html#files-table" title="25.11 The INFORMATION_SCHEMA FILES Table"><code class="literal">FILES</code></a> table provides
      information about NDB Cluster Disk Data files. The
      <a class="link" href="information-schema.html#ndb-transid-mysql-connection-map-table" title="25.13 The INFORMATION_SCHEMA ndb_transid_mysql_connection_map Table"><code class="literal">ndb_transid_mysql_connection_map</code></a>
      table provides a mapping between transactions, transaction
      coordinators, and API nodes.
    </p><p>
      Additional statistical and other data about NDB Cluster
      transactions, operations, threads, blocks, and other aspects of
      performance can be obtained from the tables in the
      <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo" title="22.5.10 ndbinfo: The NDB Cluster Information Database"><code class="literal">ndbinfo</code></a> database. For
      information about these tables, see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbinfo" title="22.5.10 ndbinfo: The NDB Cluster Information Database">Section 22.5.10, “ndbinfo: The NDB Cluster Information Database”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-security"></a>22.5.12 NDB Cluster Security Issues</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-security-networking-issues">22.5.12.1 NDB Cluster Security and Networking Issues</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-security-mysql-privileges">22.5.12.2 NDB Cluster and MySQL Privileges</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-security-mysql-security-procedures">22.5.12.3 NDB Cluster and MySQL Security Procedures</a></span></dt></dl>
</div>
<a class="indexterm" name="idm140091577381184"></a><p>
      This section discusses security considerations to take into
      account when setting up and running NDB Cluster.
    </p><p>
      Topics covered in this section include the following:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          NDB Cluster and network security issues
        </p></li><li class="listitem"><p>
          Configuration issues relating to running NDB Cluster securely
        </p></li><li class="listitem"><p>
          NDB Cluster and the MySQL privilege system
        </p></li><li class="listitem"><p>
          MySQL standard security procedures as applicable to NDB
          Cluster
</p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-security-networking-issues"></a>22.5.12.1 NDB Cluster Security and Networking Issues</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091577373776"></a><p>
        In this section, we discuss basic network security issues as
        they relate to NDB Cluster. It is extremely important to
        remember that NDB Cluster <span class="quote">“<span class="quote">out of the box</span>”</span> is not
        secure; you or your network administrator must take the proper
        steps to ensure that your cluster cannot be compromised over the
        network.
      </p><a class="indexterm" name="idm140091577370688"></a><p>
        Cluster communication protocols are inherently insecure, and no
        encryption or similar security measures are used in
        communications between nodes in the cluster. Because network
        speed and latency have a direct impact on the cluster's
        efficiency, it is also not advisable to employ SSL or other
        encryption to network connections between nodes, as such schemes
        will effectively slow communications.
      </p><p>
        It is also true that no authentication is used for controlling
        API node access to an NDB Cluster. As with encryption, the
        overhead of imposing authentication requirements would have an
        adverse impact on Cluster performance.
      </p><p>
        In addition, there is no checking of the source IP address for
        either of the following when accessing the cluster:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            SQL or API nodes using <span class="quote">“<span class="quote">free slots</span>”</span> created by
            empty <code class="literal">[mysqld]</code> or
            <code class="literal">[api]</code> sections in the
            <code class="filename">config.ini</code> file
          </p><p>
            This means that, if there are any empty
            <code class="literal">[mysqld]</code> or <code class="literal">[api]</code>
            sections in the <code class="filename">config.ini</code> file, then
            any API nodes (including SQL nodes) that know the management
            server's host name (or IP address) and port can connect to
            the cluster and access its data without restriction. (See
            <a class="xref" href="mysql-cluster.html#mysql-cluster-security-mysql-privileges" title="22.5.12.2 NDB Cluster and MySQL Privileges">Section 22.5.12.2, “NDB Cluster and MySQL Privileges”</a>,
            for more information about this and related issues.)
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              <a class="indexterm" name="idm140091577359344"></a>

              <a class="indexterm" name="idm140091577357440"></a>

              <a class="indexterm" name="idm140091577355536"></a>

              You can exercise some control over SQL and API node access
              to the cluster by specifying a <code class="literal">HostName</code>
              parameter for all <code class="literal">[mysqld]</code> and
              <code class="literal">[api]</code> sections in the
              <code class="filename">config.ini</code> file. However, this also
              means that, should you wish to connect an API node to the
              cluster from a previously unused host, you need to add an
              <code class="literal">[api]</code> section containing its host name
              to the <code class="filename">config.ini</code> file.
            </p><p>
              More information is available
              <a class="link" href="mysql-cluster.html#ndbparam-api-hostname">elsewhere in this
              chapter</a> about the <code class="literal">HostName</code>
              parameter. Also see <a class="xref" href="mysql-cluster.html#mysql-cluster-quick" title="22.3.1 Quick Test Setup of NDB Cluster">Section 22.3.1, “Quick Test Setup of NDB Cluster”</a>,
              for configuration examples using
              <code class="literal">HostName</code> with API nodes.
</p>
</div>
</li><li class="listitem"><p>
            Any <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> client
          </p><p>
            This means that any cluster management client that is given
            the management server's host name (or IP address) and port
            (if not the standard port) can connect to the cluster and
            execute any management client command. This includes
            commands such as <a class="link" href="mysql-cluster.html#ndbclient-stop"><code class="literal">ALL
            STOP</code></a> and
            <a class="link" href="mysql-cluster.html#ndbclient-shutdown"><code class="literal">SHUTDOWN</code></a>.
</p></li></ul>
</div>
<p>
        <a class="indexterm" name="idm140091577340304"></a>

        <a class="indexterm" name="idm140091577338384"></a>

        For these reasons, it is necessary to protect the cluster on the
        network level. The safest network configuration for Cluster is
        one which isolates connections between Cluster nodes from any
        other network communications. This can be accomplished by any of
        the following methods:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Keeping Cluster nodes on a network that is physically
            separate from any public networks. This option is the most
            dependable; however, it is the most expensive to implement.
          </p><p>
            We show an example of an NDB Cluster setup using such a
            physically segregated network here:
</p>
<div class="figure">
<a name="fig-mysql-cluster-hardware-firewall"></a><p class="title"><b>Figure 22.27 NDB Cluster with Hardware Firewall</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/cluster-security-network-1.png" width="550" height="347" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"><p>
            This setup has two networks, one private (solid box) for the
            Cluster management servers and data nodes, and one public
            (dotted box) where the SQL nodes reside. (We show the
            management and data nodes connected using a gigabit switch
            since this provides the best performance.) Both networks are
            protected from the outside by a hardware firewall, sometimes
            also known as a <span class="firstterm">network-based
            firewall</span>.
          </p><p>
            This network setup is safest because no packets can reach
            the cluster's management or data nodes from outside the
            network—and none of the cluster's internal
            communications can reach the outside—without going
            through the SQL nodes, as long as the SQL nodes do not
            permit any packets to be forwarded. This means, of course,
            that all SQL nodes must be secured against hacking attempts.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              With regard to potential security vulnerabilities, an SQL
              node is no different from any other MySQL server. See
              <a class="xref" href="security.html#security-against-attack" title="6.1.3 Making MySQL Secure Against Attackers">Section 6.1.3, “Making MySQL Secure Against Attackers”</a>, for a
              description of techniques you can use to secure MySQL
              servers.
</p>
</div>
</li><li class="listitem"><p>
            <a class="indexterm" name="idm140091577321648"></a>

            <a class="indexterm" name="idm140091577319776"></a>

            Using one or more software firewalls (also known as
            <span class="firstterm">host-based firewalls</span>)
            to control which packets pass through to the cluster from
            portions of the network that do not require access to it. In
            this type of setup, a software firewall must be installed on
            every host in the cluster which might otherwise be
            accessible from outside the local network.
          </p><p>
            The host-based option is the least expensive to implement,
            but relies purely on software to provide protection and so
            is the most difficult to keep secure.
          </p><p>
            This type of network setup for NDB Cluster is illustrated
            here:
</p>
<div class="figure">
<a name="fig-mysql-cluster-software-firewalls"></a><p class="title"><b>Figure 22.28 NDB Cluster with Software Firewalls</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/cluster-security-network-2.png" width="550" height="489" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"><p>
            Using this type of network setup means that there are two
            zones of NDB Cluster hosts. Each cluster host must be able
            to communicate with all of the other machines in the
            cluster, but only those hosting SQL nodes (dotted box) can
            be permitted to have any contact with the outside, while
            those in the zone containing the data nodes and management
            nodes (solid box) must be isolated from any machines that
            are not part of the cluster. Applications using the cluster
            and user of those applications must <span class="emphasis"><em>not</em></span>
            be permitted to have direct access to the management and
            data node hosts.
          </p><p>
            To accomplish this, you must set up software firewalls that
            limit the traffic to the type or types shown in the
            following table, according to the type of node that is
            running on each cluster host computer:
</p>
<div class="table">
<a name="idm140091577306384"></a><p class="title"><b>Table 22.421 Node types in a host-based firewall cluster configuration</b></p>
<div class="table-contents">
<table><col width="25%"><col width="75%"><thead><tr>
                <th scope="col">Node Type</th>
                <th scope="col">Permitted Traffic</th>
              </tr></thead><tbody><tr>
                <td scope="row">SQL or API node</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        It originates from the IP address of a
                        management or data node (using any TCP or UDP
                        port).
                      </p></li><li class="listitem"><p>
                        It originates from within the network in which
                        the cluster resides and is on the port that your
                        application is using.
</p></li></ul>
</div>
</td>
              </tr><tr>
                <td scope="row">Data node or Management node</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        It originates from the IP address of a
                        management or data node (using any TCP or UDP
                        port).
                      </p></li><li class="listitem"><p>
                        It originates from the IP address of an SQL or
                        API node.
</p></li></ul>
</div>
</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
            Any traffic other than that shown in the table for a given
            node type should be denied.
          </p><p>
            The specifics of configuring a firewall vary from firewall
            application to firewall application, and are beyond the
            scope of this Manual. <span class="command"><strong>iptables</strong></span> is a very
            common and reliable firewall application, which is often
            used with <span class="command"><strong>APF</strong></span> as a front end to make
            configuration easier. You can (and should) consult the
            documentation for the software firewall that you employ,
            should you choose to implement an NDB Cluster network setup
            of this type, or of a <span class="quote">“<span class="quote">mixed</span>”</span> type as discussed
            under the next item.
          </p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140091577287712"></a>

            <a class="indexterm" name="idm140091577285808"></a>

            It is also possible to employ a combination of the first two
            methods, using both hardware and software to secure the
            cluster—that is, using both network-based and
            host-based firewalls. This is between the first two schemes
            in terms of both security level and cost. This type of
            network setup keeps the cluster behind the hardware
            firewall, but permits incoming packets to travel beyond the
            router connecting all cluster hosts to reach the SQL nodes.
          </p><p>
            One possible network deployment of an NDB Cluster using
            hardware and software firewalls in combination is shown
            here:
</p>
<div class="figure">
<a name="fig-mysql-cluster-combination-firewalls"></a><p class="title"><b>Figure 22.29 NDB Cluster with a Combination of Hardware and Software Firewalls</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/cluster-security-network-3.png" width="550" height="410" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"><p>
            In this case, you can set the rules in the hardware firewall
            to deny any external traffic except to SQL nodes and API
            nodes, and then permit traffic to them only on the ports
            required by your application.
</p></li></ol>
</div>
<p>
        Whatever network configuration you use, remember that your
        objective from the viewpoint of keeping the cluster secure
        remains the same—to prevent any unessential traffic from
        reaching the cluster while ensuring the most efficient
        communication between the nodes in the cluster.
      </p><p>
        <a class="indexterm" name="idm140091577273760"></a>

        <a class="indexterm" name="idm140091577271856"></a>

        Because NDB Cluster requires large numbers of ports to be open
        for communications between nodes, the recommended option is to
        use a segregated network. This represents the simplest way to
        prevent unwanted traffic from reaching the cluster.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          <a class="indexterm" name="idm140091577269424"></a>

          <a class="indexterm" name="idm140091577267504"></a>

          If you wish to administer an NDB Cluster remotely (that is,
          from outside the local network), the recommended way to do
          this is to use <span class="command"><strong>ssh</strong></span> or another secure login
          shell to access an SQL node host. From this host, you can then
          run the management client to access the management server
          safely, from within the Cluster's own local network.
        </p><p>
          Even though it is possible to do so in theory, it is
          <span class="emphasis"><em>not</em></span> recommended to use
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> to manage a Cluster directly from
          outside the local network on which the Cluster is running.
          Since neither authentication nor encryption takes place
          between the management client and the management server, this
          represents an extremely insecure means of managing the
          cluster, and is almost certain to be compromised sooner or
          later.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-security-mysql-privileges"></a>22.5.12.2 NDB Cluster and MySQL Privileges</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091577260832"></a><p>
        In this section, we discuss how the MySQL privilege system works
        in relation to NDB Cluster and the implications of this for
        keeping an NDB Cluster secure.
      </p><p>
        <a class="indexterm" name="idm140091577258496"></a>

        Standard MySQL privileges apply to NDB Cluster tables. This
        includes all MySQL privilege types
        (<a class="link" href="security.html#priv_select"><code class="literal">SELECT</code></a> privilege,
        <a class="link" href="security.html#priv_update"><code class="literal">UPDATE</code></a> privilege,
        <a class="link" href="security.html#priv_delete"><code class="literal">DELETE</code></a> privilege, and so on)
        granted on the database, table, and column level. As with any
        other MySQL Server, user and privilege information is stored in
        the <code class="literal">mysql</code> system database. The SQL statements
        used to grant and revoke privileges on
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables, databases containing
        such tables, and columns within such tables are identical in all
        respects with the <a class="link" href="sql-syntax.html#grant" title="13.7.1.6 GRANT Syntax"><code class="literal">GRANT</code></a> and
        <a class="link" href="sql-syntax.html#revoke" title="13.7.1.8 REVOKE Syntax"><code class="literal">REVOKE</code></a> statements used in
        connection with database objects involving any (other) MySQL
        storage engine. The same thing is true with respect to the
        <a class="link" href="sql-syntax.html#create-user" title="13.7.1.3 CREATE USER Syntax"><code class="literal">CREATE USER</code></a> and
        <a class="link" href="sql-syntax.html#drop-user" title="13.7.1.5 DROP USER Syntax"><code class="literal">DROP USER</code></a> statements.
      </p><p>
        <a class="indexterm" name="idm140091577245440"></a>

        It is important to keep in mind that, by default, the MySQL
        grant tables use the <a class="link" href="storage-engines.html#myisam-storage-engine" title="16.2 The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> storage
        engine. Because of this, those tables are not normally
        duplicated or shared among MySQL servers acting as SQL nodes in
        an NDB Cluster. In other words, changes in users and their
        privileges do not automatically propagate between SQL nodes by
        default. If you wish, you can enable automatic distribution of
        MySQL users and privileges across NDB Cluster SQL nodes; see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-privilege-distribution" title="22.5.16 Distributed MySQL Privileges (Not Supported)">Section 22.5.16, “Distributed MySQL Privileges (Not Supported)”</a>, for
        details.
      </p><p>
        <a class="indexterm" name="idm140091577240912"></a>

        <a class="indexterm" name="idm140091577239424"></a>

        Conversely, because there is no way in MySQL to deny privileges
        (privileges can either be revoked or not granted in the first
        place, but not denied as such), there is no special protection
        for <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables on one SQL node from
        users that have privileges on another SQL node; (This is true
        even if you are not using automatic distribution of user
        privileges. The definitive example of this is the MySQL
        <code class="literal">root</code> account, which can perform any action on
        any database object. In combination with empty
        <code class="literal">[mysqld]</code> or <code class="literal">[api]</code> sections
        of the <code class="filename">config.ini</code> file, this account can be
        especially dangerous. To understand why, consider the following
        scenario:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            The <code class="filename">config.ini</code> file contains at least
            one empty <code class="literal">[mysqld]</code> or
            <code class="literal">[api]</code> section. This means that the NDB
            Cluster management server performs no checking of the host
            from which a MySQL Server (or other API node) accesses the
            NDB Cluster.
          </p></li><li class="listitem"><p>
            There is no firewall, or the firewall fails to protect
            against access to the NDB Cluster from hosts external to the
            network.
          </p></li><li class="listitem"><p>
            The host name or IP address of the NDB Cluster management
            server is known or can be determined from outside the
            network.
</p></li></ul>
</div>
<p>
        If these conditions are true, then anyone, anywhere can start a
        MySQL Server with <a class="link" href="mysql-cluster.html#option_mysqld_ndbcluster"><code class="option">--ndbcluster</code></a>
        <a class="link" href="mysql-cluster.html#option_mysqld_ndb-connectstring"><code class="option">--ndb-connectstring=<em class="replaceable"><code>management_host</code></em></code></a>
        and access this NDB Cluster. Using the MySQL
        <code class="literal">root</code> account, this person can then perform
        the following actions:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Execute metadata statements such as
            <a class="link" href="sql-syntax.html#show-databases" title="13.7.6.14 SHOW DATABASES Syntax"><code class="literal">SHOW DATABASES</code></a> statement (to
            obtain a list of all <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>
            databases on the server) or
            <a class="link" href="sql-syntax.html#show-tables" title="13.7.6.37 SHOW TABLES Syntax"><code class="literal">SHOW TABLES
            FROM <em class="replaceable"><code>some_ndb_database</code></em></code></a>
            statement to obtain a list of all
            <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables in a given database
          </p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140091577217072"></a>

            <a class="indexterm" name="idm140091577215568"></a>

            Run any legal MySQL statements on any of the discovered
            tables, such as:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">SELECT * FROM
                <em class="replaceable"><code>some_table</code></em></code> to read
                all the data from any table
              </p></li><li class="listitem"><p>
                <code class="literal">DELETE FROM
                <em class="replaceable"><code>some_table</code></em></code> to
                delete all the data from a table
              </p></li><li class="listitem"><p>
                <code class="literal">DESCRIBE
                <em class="replaceable"><code>some_table</code></em></code> or
                <code class="literal">SHOW CREATE TABLE
                <em class="replaceable"><code>some_table</code></em></code> to
                determine the table schema
              </p></li><li class="listitem"><p>
                <code class="literal">UPDATE <em class="replaceable"><code>some_table</code></em>
                SET <em class="replaceable"><code>column1</code></em> =
                <em class="replaceable"><code>some_value</code></em></code> to fill
                a table column with <span class="quote">“<span class="quote">garbage</span>”</span> data; this
                could actually cause much greater damage than simply
                deleting all the data
              </p><p>
                More insidious variations might include statements like
                these:
              </p><pre data-lang="sql" class="programlisting">
UPDATE <em class="replaceable"><code>some_table</code></em> SET <em class="replaceable"><code>an_int_column</code></em> = <em class="replaceable"><code>an_int_column</code></em> + 1
</pre><p>
                or
              </p><pre data-lang="sql" class="programlisting">
UPDATE <em class="replaceable"><code>some_table</code></em> SET <em class="replaceable"><code>a_varchar_column</code></em> = REVERSE(<em class="replaceable"><code>a_varchar_column</code></em>)
</pre><p>
                Such malicious statements are limited only by the
                imagination of the attacker.
</p></li></ul>
</div>
<p>
            The only tables that would be safe from this sort of mayhem
            would be those tables that were created using storage
            engines other than <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>, and so
            not visible to a <span class="quote">“<span class="quote">rogue</span>”</span> SQL node.
          </p><p>
            <a class="indexterm" name="idm140091577195168"></a>

            <a class="indexterm" name="idm140091577193680"></a>

            A user who can log in as <code class="literal">root</code> can also
            access the <code class="literal">INFORMATION_SCHEMA</code> database
            and its tables, and so obtain information about databases,
            tables, stored routines, scheduled events, and any other
            database objects for which metadata is stored in
            <code class="literal">INFORMATION_SCHEMA</code>.
          </p><p>
            It is also a very good idea to use different passwords for
            the <code class="literal">root</code> accounts on different NDB
            Cluster SQL nodes unless you are using distributed
            privileges.
</p></li></ul>
</div>
<p>
        In sum, you cannot have a safe NDB Cluster if it is directly
        accessible from outside your local network.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
          <span class="emphasis"><em>Never leave the MySQL root account password
          empty</em></span>. This is just as true when running MySQL as
          an NDB Cluster SQL node as it is when running it as a
          standalone (non-Cluster) MySQL Server, and should be done as
          part of the MySQL installation process before configuring the
          MySQL Server as an SQL node in an NDB Cluster.
</p>
</div>
<p>
        If you wish to employ NDB Cluster's distributed privilege
        capabilities, you should not simply convert the system tables in
        the <code class="literal">mysql</code> database to use the
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine manually. Use
        the stored procedure provided for this purpose instead; see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-privilege-distribution" title="22.5.16 Distributed MySQL Privileges (Not Supported)">Section 22.5.16, “Distributed MySQL Privileges (Not Supported)”</a>.
      </p><p>
        Otherwise, if you need to synchronize <code class="literal">mysql</code>
        system tables between SQL nodes, you can use standard MySQL
        replication to do so, or employ a script to copy table entries
        between the MySQL servers.
      </p><p><b>Summary. </b>
          The most important points to remember regarding the MySQL
          privilege system with regard to NDB Cluster are listed here:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Users and privileges established on one SQL node do not
            automatically exist or take effect on other SQL nodes in the
            cluster. Conversely, removing a user or privilege on one SQL
            node in the cluster does not remove the user or privilege
            from any other SQL nodes.
          </p></li><li class="listitem"><p>
            You can distribute MySQL users and privileges among SQL
            nodes using the SQL script, and the stored procedures it
            contains, that are supplied for this purpose in the NDB
            Cluster distribution.
          </p></li><li class="listitem"><p>
            Once a MySQL user is granted privileges on an
            <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table from one SQL node in
            an NDB Cluster, that user can <span class="quote">“<span class="quote">see</span>”</span> any data in
            that table regardless of the SQL node from which the data
            originated, even if you are not using privilege
            distribution.
</p></li></ol>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-security-mysql-security-procedures"></a>22.5.12.3 NDB Cluster and MySQL Security Procedures</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091577172848"></a><a class="indexterm" name="idm140091577171360"></a><p>
        In this section, we discuss MySQL standard security procedures
        as they apply to running NDB Cluster.
      </p><p>
        In general, any standard procedure for running MySQL securely
        also applies to running a MySQL Server as part of an NDB
        Cluster. First and foremost, you should always run a MySQL
        Server as the <code class="literal">mysql</code> operating system user;
        this is no different from running MySQL in a standard
        (non-Cluster) environment. The <code class="literal">mysql</code> system
        account should be uniquely and clearly defined. Fortunately,
        this is the default behavior for a new MySQL installation. You
        can verify that the <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> process is running
        as the <code class="literal">mysql</code> operating system user by using
        the system command such as the one shown here:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ps aux | grep mysql</code></strong>
root     10467  0.0  0.1   3616  1380 pts/3    S    11:53   0:00 \
  /bin/sh ./mysqld_safe --ndbcluster --ndb-connectstring=localhost:1186
mysql    10512  0.2  2.5  58528 26636 pts/3    Sl   11:53   0:00 \
  /usr/local/mysql/libexec/mysqld --basedir=/usr/local/mysql \
  --datadir=/usr/local/mysql/var --user=mysql --ndbcluster \
  --ndb-connectstring=localhost:1186 --pid-file=/usr/local/mysql/var/mothra.pid \
  --log-error=/usr/local/mysql/var/mothra.err
jon      10579  0.0  0.0   2736   688 pts/0    S+   11:54   0:00 grep mysql
</pre><p>
        If the <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> process is running as any other
        user than <code class="literal">mysql</code>, you should immediately shut
        it down and restart it as the <code class="literal">mysql</code> user. If
        this user does not exist on the system, the
        <code class="literal">mysql</code> user account should be created, and
        this user should be part of the <code class="literal">mysql</code> user
        group; in this case, you should also make sure that the MySQL
        data directory on this system (as set using the
        <a class="link" href="server-administration.html#option_mysqld_datadir"><code class="option">--datadir</code></a> option for
        <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>) is owned by the
        <code class="literal">mysql</code> user, and that the SQL node's
        <code class="filename">my.cnf</code> file includes
        <code class="literal">user=mysql</code> in the <code class="literal">[mysqld]</code>
        section. Alternatively, you can start the MySQL server process
        with <a class="link" href="server-administration.html#option_mysqld_user"><code class="option">--user=mysql</code></a> on the command
        line, but it is preferable to use the
        <code class="filename">my.cnf</code> option, since you might forget to
        use the command-line option and so have
        <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> running as another user
        unintentionally. The <a class="link" href="programs.html#mysqld-safe" title="4.3.2 mysqld_safe — MySQL Server Startup Script"><span class="command"><strong>mysqld_safe</strong></span></a> startup
        script forces MySQL to run as the <code class="literal">mysql</code> user.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
          Never run <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> as the system root user.
          Doing so means that potentially any file on the system can be
          read by MySQL, and thus—should MySQL be
          compromised—by an attacker.
</p>
</div>
<p>
        <a class="indexterm" name="idm140091577145440"></a>

        As mentioned in the previous section (see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-security-mysql-privileges" title="22.5.12.2 NDB Cluster and MySQL Privileges">Section 22.5.12.2, “NDB Cluster and MySQL Privileges”</a>), you
        should always set a root password for the MySQL Server as soon
        as you have it running. You should also delete the anonymous
        user account that is installed by default. You can accomplish
        these tasks using the following statements:
      </p><pre data-lang="sql" class="programlisting">
shell&gt; <strong class="userinput"><code>mysql -u root</code></strong>

mysql&gt; <strong class="userinput"><code>UPDATE mysql.user</code></strong>
    -&gt;     <strong class="userinput"><code>SET Password=PASSWORD('<em class="replaceable"><code>secure_password</code></em>')</code></strong>
    -&gt;     <strong class="userinput"><code>WHERE User='root';</code></strong>

mysql&gt; <strong class="userinput"><code>DELETE FROM mysql.user</code></strong>
    -&gt;     <strong class="userinput"><code>WHERE User='';</code></strong>

mysql&gt; <strong class="userinput"><code>FLUSH PRIVILEGES;</code></strong>
</pre><p>
        Be very careful when executing the
        <a class="link" href="sql-syntax.html#delete" title="13.2.2 DELETE Syntax"><code class="literal">DELETE</code></a> statement not to omit the
        <code class="literal">WHERE</code> clause, or you risk deleting
        <span class="emphasis"><em>all</em></span> MySQL users. Be sure to run the
        <a class="link" href="sql-syntax.html#flush-privileges"><code class="literal">FLUSH PRIVILEGES</code></a> statement as
        soon as you have modified the <code class="literal">mysql.user</code>
        table, so that the changes take immediate effect. Without
        <a class="link" href="sql-syntax.html#flush-privileges"><code class="literal">FLUSH PRIVILEGES</code></a>, the changes do
        not take effect until the next time that the server is
        restarted.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          <a class="indexterm" name="idm140091577129664"></a>

          <a class="indexterm" name="idm140091577128176"></a>

          Many of the NDB Cluster utilities such as
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-show-tables" title="22.4.27 ndb_show_tables — Display List of NDB Tables"><span class="command"><strong>ndb_show_tables</strong></span></a>,
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-desc" title="22.4.9 ndb_desc — Describe NDB Tables"><span class="command"><strong>ndb_desc</strong></span></a>, and
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-select-all" title="22.4.24 ndb_select_all — Print Rows from an NDB Table"><span class="command"><strong>ndb_select_all</strong></span></a> also work without
          authentication and can reveal table names, schemas, and data.
          By default these are installed on Unix-style systems with the
          permissions <code class="literal">wxr-xr-x</code> (755), which means
          they can be executed by any user that can access the
          <code class="filename">mysql/bin</code> directory.
        </p><p>
          See <a class="xref" href="mysql-cluster.html#mysql-cluster-programs" title="22.4 NDB Cluster Programs">Section 22.4, “NDB Cluster Programs”</a>, for more
          information about these utilities.
</p>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-disk-data"></a>22.5.13 NDB Cluster Disk Data Tables</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-disk-data-objects">22.5.13.1 NDB Cluster Disk Data Objects</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-disk-data-symlinks">22.5.13.2 Using Symbolic Links with Disk Data Objects</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-disk-data-storage-requirements">22.5.13.3 NDB Cluster Disk Data Storage Requirements</a></span></dt></dl>
</div>
<a class="indexterm" name="idm140091577118368"></a><a class="indexterm" name="idm140091577117328"></a><a class="indexterm" name="idm140091577115424"></a><p>
      NDB Cluster supports storing nonindexed columns of
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables on disk, rather than in
      RAM. Column data and logging metadata are kept in data files and
      undo log files, conceptualized as tablespaces and log file groups,
      as described in the next section—see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-disk-data-objects" title="22.5.13.1 NDB Cluster Disk Data Objects">Section 22.5.13.1, “NDB Cluster Disk Data Objects”</a>.
    </p><p>
      NDB Cluster Disk Data performance can be influenced by a number of
      configuration parameters. For information about these parameters
      and their effects, see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition-disk-data-parameters" title="Disk Data Configuration Parameters">Disk Data Configuration Parameters</a>,
      and
      <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition-gcp-stop-errors" title="Disk Data and GCP Stop errors">Disk Data and GCP Stop errors</a>.
    </p><p>
      The performance of an NDB Cluster that uses Disk Data storage can
      also be greatly improved by separating data node file systems from
      undo log files and tablespace data files, which can be done using
      symbolic links. For more information, see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-disk-data-symlinks" title="22.5.13.2 Using Symbolic Links with Disk Data Objects">Section 22.5.13.2, “Using Symbolic Links with Disk Data Objects”</a>.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-disk-data-objects"></a>22.5.13.1 NDB Cluster Disk Data Objects</h4>
</div>
</div>
</div>
<p>
        NDB Cluster Disk Data storage is implemented using the following
        objects:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="firstterm">Tablespace</span>: Acts as
            containers for other Disk Data objects. A tablespace
            contains one or more data files and one or more undo log
            file groups.
          </p></li><li class="listitem"><p>
            <span class="firstterm">Data file</span>: Stores
            column data. A data file is assigned directly to a
            tablespace.
          </p></li><li class="listitem"><p>
            <span class="firstterm">Undo log file</span>:
            Contains undo information required for rolling back
            transactions. Assigned to an undo log file group.
          </p></li><li class="listitem"><p>
            <span class="firstterm">log file group</span>:
            Contains one or more undo log files. Assigned to a
            tablespace.
</p></li></ul>
</div>
<p>
        Undo log files and data files are actual files in the file
        system of each data node; by default they are placed in
        <code class="literal">ndb_<em class="replaceable"><code>node_id</code></em>_fs</code> in
        the <em class="replaceable"><code>DataDir</code></em> specified in the NDB
        Cluster <code class="filename">config.ini</code> file, and where
        <em class="replaceable"><code>node_id</code></em> is the data node's node
        ID. It is possible to place these elsewhere by specifying either
        an absolute or relative path as part of the filename when
        creating the undo log or data file. Statements that create these
        files are shown later in this section.
      </p><p>
        Undo log files are used only by Disk Data tables, and are not
        needed or used by <code class="literal">NDB</code> tables that are stored
        in memory only.
      </p><p>
        NDB Cluster tablespaces and log file groups are not implemented
        as files.
      </p><p>
        Although not all Disk Data objects are implemented as files,
        they all share the same namespace. This means that
        <span class="emphasis"><em>each Disk Data object</em></span> must be uniquely
        named (and not merely each Disk Data object of a given type).
        For example, you cannot have a tablespace and a log file group
        both named <code class="literal">dd1</code>.
      </p><p>
        Assuming that you have already set up an NDB Cluster with all
        nodes (including management and SQL nodes), the basic steps for
        creating an NDB Cluster table on disk are as follows:
</p><a class="indexterm" name="idm140091577091152"></a>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Create a log file group, and assign one or more undo log
            files to it (an undo log file is also sometimes referred to
            as an <span class="firstterm">undofile</span>).
          </p></li><li class="listitem"><p>
            Create a tablespace; assign the log file group, as well as
            one or more data files, to the tablespace.
          </p></li><li class="listitem"><p>
            Create a Disk Data table that uses this tablespace for data
            storage.
</p></li></ol>
</div>
<p>
        Each of these tasks can be accomplished using SQL statements in
        the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client or other MySQL client
        application, as shown in the example that follows.
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            <a class="indexterm" name="idm140091577081392"></a>

            We create a log file group named <code class="literal">lg_1</code>
            using <a class="link" href="sql-syntax.html#create-logfile-group" title="13.1.16 CREATE LOGFILE GROUP Syntax"><code class="literal">CREATE LOGFILE GROUP</code></a>.
            This log file group is to be made up of two undo log files,
            which we name <code class="filename">undo_1.log</code> and
            <code class="filename">undo_2.log</code>, whose initial sizes are 16
            MB and 12 MB, respectively. (The default initial size for an
            undo log file is 128 MB.) Optionally, you can also specify a
            size for the log file group's undo buffer, or permit it
            to assume the default value of 8 MB. In this example, we set
            the UNDO buffer's size at 2 MB. A log file group must
            be created with an undo log file; so we add
            <code class="filename">undo_1.log</code> to <code class="literal">lg_1</code>
            in this <a class="link" href="sql-syntax.html#create-logfile-group" title="13.1.16 CREATE LOGFILE GROUP Syntax"><code class="literal">CREATE LOGFILE GROUP</code></a>
            statement:
          </p><pre data-lang="sql" class="programlisting">
CREATE LOGFILE GROUP lg_1
    ADD UNDOFILE 'undo_1.log'
    INITIAL_SIZE 16M
    UNDO_BUFFER_SIZE 2M
    ENGINE NDBCLUSTER;
</pre><p>
            To add <code class="filename">undo_2.log</code> to the log file
            group, use the following <a class="link" href="sql-syntax.html#alter-logfile-group" title="13.1.6 ALTER LOGFILE GROUP Syntax"><code class="literal">ALTER LOGFILE
            GROUP</code></a> statement:
          </p><pre data-lang="sql" class="programlisting">
ALTER LOGFILE GROUP lg_1
    ADD UNDOFILE 'undo_2.log'
    INITIAL_SIZE 12M
    ENGINE NDBCLUSTER;
</pre><p>
            Some items of note:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                The <code class="filename">.log</code> file extension used here
                is not required. We employ it merely to make the log
                files easily recognizable.
              </p></li><li class="listitem"><p>
                Every <a class="link" href="sql-syntax.html#create-logfile-group" title="13.1.16 CREATE LOGFILE GROUP Syntax"><code class="literal">CREATE LOGFILE
                GROUP</code></a> and <a class="link" href="sql-syntax.html#alter-logfile-group" title="13.1.6 ALTER LOGFILE GROUP Syntax"><code class="literal">ALTER LOGFILE
                GROUP</code></a> statement must include an
                <code class="literal">ENGINE</code> option. The only permitted
                values for this option are
                <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> and
                <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
                  There can exist at most one log file group in the same
                  NDB Cluster at any given time.
</p>
</div>
</li><li class="listitem"><p>
                When you add an undo log file to a log file group using
                <code class="literal">ADD UNDOFILE
                '<em class="replaceable"><code>filename</code></em>'</code>, a file
                with the name <em class="replaceable"><code>filename</code></em> is
                created in the
                <code class="literal">ndb_<em class="replaceable"><code>node_id</code></em>_fs</code>
                directory within the
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datadir"><code class="literal">DataDir</code></a> of each
                data node in the cluster, where
                <em class="replaceable"><code>node_id</code></em> is the node ID of the
                data node. Each undo log file is of the size specified
                in the SQL statement. For example, if an NDB Cluster has
                4 data nodes, then the <a class="link" href="sql-syntax.html#alter-logfile-group" title="13.1.6 ALTER LOGFILE GROUP Syntax"><code class="literal">ALTER
                LOGFILE GROUP</code></a> statement just shown creates 4
                undo log files, 1 each on in the data directory of each
                of the 4 data nodes; each of these files is named
                <code class="filename">undo_2.log</code> and each file is 12 MB
                in size.
              </p></li><li class="listitem"><p>
                <code class="literal">UNDO_BUFFER_SIZE</code> is limited by the
                amount of system memory available.
              </p></li><li class="listitem"><p>
                See <a class="xref" href="sql-syntax.html#create-logfile-group" title="13.1.16 CREATE LOGFILE GROUP Syntax">Section 13.1.16, “CREATE LOGFILE GROUP Syntax”</a>, and
                <a class="xref" href="sql-syntax.html#alter-logfile-group" title="13.1.6 ALTER LOGFILE GROUP Syntax">Section 13.1.6, “ALTER LOGFILE GROUP Syntax”</a>, for more
                information about these statements.
</p></li></ul>
</div>
</li><li class="listitem"><p>
            <a class="indexterm" name="idm140091577045968"></a>

            Now we can create a tablespace—an abstract container
            for files used by Disk Data tables to store data. A
            tablespace is associated with a particular log file group;
            when creating a new tablespace, you must specify the log
            file group it uses for undo logging. You must also specify
            at least one data file; you can add more data files to the
            tablespace after the tablespace is created. It is also
            possible to drop data files from a tablespace (see example
            later in this section).
          </p><p>
            Assume that we wish to create a tablespace named
            <code class="literal">ts_1</code> which uses <code class="literal">lg_1</code>
            as its log file group. We want the tablespace to contain two
            data files, named <code class="filename">data_1.dat</code> and
            <code class="filename">data_2.dat</code>, whose initial sizes are 32
            MB and 48 MB, respectively. (The default value for
            <code class="literal">INITIAL_SIZE</code> is 128 MB.) We can do this
            using two SQL statements, as shown here:
          </p><pre data-lang="sql" class="programlisting">
CREATE TABLESPACE ts_1
    ADD DATAFILE 'data_1.dat'
    USE LOGFILE GROUP lg_1
    INITIAL_SIZE 32M
    ENGINE NDBCLUSTER;

ALTER TABLESPACE ts_1
    ADD DATAFILE 'data_2.dat'
    INITIAL_SIZE 48M;
</pre><p>
            The <a class="link" href="sql-syntax.html#create-tablespace" title="13.1.21 CREATE TABLESPACE Syntax"><code class="literal">CREATE TABLESPACE</code></a>
            statement creates a tablespace <code class="literal">ts_1</code> with
            the data file <code class="filename">data_1.dat</code>, and
            associates <code class="literal">ts_1</code> with log file group
            <code class="literal">lg_1</code>. The <a class="link" href="sql-syntax.html#alter-tablespace" title="13.1.10 ALTER TABLESPACE Syntax"><code class="literal">ALTER
            TABLESPACE</code></a> adds the second data file
            (<code class="filename">data_2.dat</code>).
          </p><p>
            Some items of note:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                As is the case with the <code class="filename">.log</code> file
                extension used in this example for undo log files, there
                is no special significance for the
                <code class="filename">.dat</code> file extension; it is used
                merely for easy recognition.
              </p></li><li class="listitem"><p>
                When you add a data file to a tablespace using
                <code class="literal">ADD DATAFILE
                '<em class="replaceable"><code>filename</code></em>'</code>, a file
                with the name <em class="replaceable"><code>filename</code></em> is
                created in the
                <code class="literal">ndb_<em class="replaceable"><code>node_id</code></em>_fs</code>
                directory within the
                <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datadir"><code class="literal">DataDir</code></a> of each
                data node in the cluster, where
                <em class="replaceable"><code>node_id</code></em> is the node ID of the
                data node. Each data file is of the size specified in
                the SQL statement. For example, if an NDB Cluster has 4
                data nodes, then the <a class="link" href="sql-syntax.html#alter-tablespace" title="13.1.10 ALTER TABLESPACE Syntax"><code class="literal">ALTER
                TABLESPACE</code></a> statement just shown creates 4 data
                files, 1 each in the data directory of each of the 4
                data nodes; each of these files is named
                <code class="filename">data_2.dat</code> and each file is 48 MB
                in size.
              </p></li><li class="listitem"><p>
                <a class="link" href="sql-syntax.html#create-tablespace" title="13.1.21 CREATE TABLESPACE Syntax"><code class="literal">CREATE TABLESPACE</code></a>
                statements must contain an <code class="literal">ENGINE</code>
                clause; only tables using the same storage engine as the
                tablespace can be created in the tablespace. For
                <a class="link" href="sql-syntax.html#alter-tablespace" title="13.1.10 ALTER TABLESPACE Syntax"><code class="literal">ALTER TABLESPACE</code></a>, an
                <code class="literal">ENGINE</code> clause is accepted but is
                deprecated and subject to removal in a future release.
                For <code class="literal">NDB</code> tablespaces, the only
                permitted values for this option are
                <code class="literal">NDBCLUSTER</code> and
                <code class="literal">NDB</code>.
              </p></li><li class="listitem"><p>
                For more information about the
                <a class="link" href="sql-syntax.html#create-tablespace" title="13.1.21 CREATE TABLESPACE Syntax"><code class="literal">CREATE TABLESPACE</code></a> and
                <a class="link" href="sql-syntax.html#alter-tablespace" title="13.1.10 ALTER TABLESPACE Syntax"><code class="literal">ALTER TABLESPACE</code></a>
                statements, see <a class="xref" href="sql-syntax.html#create-tablespace" title="13.1.21 CREATE TABLESPACE Syntax">Section 13.1.21, “CREATE TABLESPACE Syntax”</a>, and
                <a class="xref" href="sql-syntax.html#alter-tablespace" title="13.1.10 ALTER TABLESPACE Syntax">Section 13.1.10, “ALTER TABLESPACE Syntax”</a>.
</p></li></ul>
</div>
</li><li class="listitem"><p>
            <a class="indexterm" name="idm140091577008080"></a>

            Now it is possible to create a table whose unindexed columns
            are stored on disk using files in tablespace
            <code class="literal">ts_1</code>:
          </p><pre data-lang="sql" class="programlisting">
CREATE TABLE dt_1 (
    member_id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    last_name VARCHAR(50) NOT NULL,
    first_name VARCHAR(50) NOT NULL,
    dob DATE NOT NULL,
    joined DATE NOT NULL,
    INDEX(last_name, first_name)
    )
    TABLESPACE ts_1 STORAGE DISK
    ENGINE NDBCLUSTER;
</pre><p>
            <code class="literal">TABLESPACE ts_1 STORAGE DISK</code> tells the
            <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine to use
            tablespace <code class="literal">ts_1</code> for data storage on disk.
          </p><p>
            Once table <code class="literal">ts_1</code> has been created as
            shown, you can perform
            <a class="link" href="sql-syntax.html#insert" title="13.2.6 INSERT Syntax"><code class="literal">INSERT</code></a>,
            <a class="link" href="sql-syntax.html#select" title="13.2.10 SELECT Syntax"><code class="literal">SELECT</code></a>,
            <a class="link" href="sql-syntax.html#update" title="13.2.12 UPDATE Syntax"><code class="literal">UPDATE</code></a>, and
            <a class="link" href="sql-syntax.html#delete" title="13.2.2 DELETE Syntax"><code class="literal">DELETE</code></a> statements on it just
            as you would with any other MySQL table.
          </p><p>
            It is also possible to specify whether an individual column
            is stored on disk or in memory by using a
            <code class="literal">STORAGE</code> clause as part of the column's
            definition in a <a class="link" href="sql-syntax.html#create-table" title="13.1.20 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>
            or <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statement.
            <code class="literal">STORAGE DISK</code> causes the column to be
            stored on disk, and <code class="literal">STORAGE MEMORY</code> causes
            in-memory storage to be used. See
            <a class="xref" href="sql-syntax.html#create-table" title="13.1.20 CREATE TABLE Syntax">Section 13.1.20, “CREATE TABLE Syntax”</a>, for more information.
</p></li></ol>
</div>
<p>
        You can obtain information about the <code class="literal">NDB</code> disk
        data files and undo log files just created by querying the
        <a class="link" href="information-schema.html#files-table" title="25.11 The INFORMATION_SCHEMA FILES Table"><code class="literal">FILES</code></a> table in the
        <code class="literal">INFORMATION_SCHEMA</code> database, as shown here:
      </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT</code></strong>
              <strong class="userinput"><code>FILE_NAME AS File, FILE_TYPE AS Type,</code></strong> 
              <strong class="userinput"><code>TABLESPACE_NAME AS Tablespace, TABLE_NAME AS Name,</code></strong> 
              <strong class="userinput"><code>LOGFILE_GROUP_NAME AS 'File group',</code></strong>
              <strong class="userinput"><code>FREE_EXTENTS AS Free, TOTAL_EXTENTS AS Total</code></strong> 
          <strong class="userinput"><code>FROM INFORMATION_SCHEMA.FILES</code></strong> 
          <strong class="userinput"><code>WHERE ENGINE='ndbcluster';</code></strong>
+--------------+----------+------------+------+------------+------+---------+
| File         | Type     | Tablespace | Name | File group | Free | Total   |
+--------------+----------+------------+------+------------+------+---------+
| ./undo_1.log | UNDO LOG | lg_1       | NULL | lg_1       |    0 | 4194304 |
| ./undo_2.log | UNDO LOG | lg_1       | NULL | lg_1       |    0 | 3145728 |
| ./data_1.dat | DATAFILE | ts_1       | NULL | lg_1       |   32 |      32 |
| ./data_2.dat | DATAFILE | ts_1       | NULL | lg_1       |   48 |      48 |
+--------------+----------+------------+------+------------+------+---------+
4 rows in set (0.00 sec)
</pre><p>
        For more information and examples, see
        <a class="xref" href="information-schema.html#files-table" title="25.11 The INFORMATION_SCHEMA FILES Table">Section 25.11, “The INFORMATION_SCHEMA FILES Table”</a>.
      </p><p><b>Indexing of columns implicitly stored on disk. </b>
          For table <code class="literal">dt_1</code> as defined in the example
          just shown, only the <code class="literal">dob</code> and
          <code class="literal">joined</code> columns are stored on disk. This is
          because there are indexes on the <code class="literal">id</code>,
          <code class="literal">last_name</code>, and
          <code class="literal">first_name</code> columns, and so data belonging
          to these columns is stored in RAM. Only nonindexed columns can
          be held on disk; indexes and indexed column data continue to
          be stored in memory. This tradeoff between the use of indexes
          and conservation of RAM is something you must keep in mind as
          you design Disk Data tables.
        </p><p>
        You cannot add an index to a column that has been explicitly
        declared <code class="literal">STORAGE DISK</code>, without first changing
        its storage type to <code class="literal">MEMORY</code>; any attempt to do
        so fails with an error. A column which
        <span class="emphasis"><em>implicitly</em></span> uses disk storage can be
        indexed; when this is done, the column's storage type is
        changed to <code class="literal">MEMORY</code> automatically. By
        <span class="quote">“<span class="quote">implicitly</span>”</span>, we mean a column whose storage type
        is not declared, but which is which inherited from the parent
        table. In the following CREATE TABLE statement (using the
        tablespace <code class="literal">ts_1</code> defined previously), columns
        <code class="literal">c2</code> and <code class="literal">c3</code> use disk storage
        implicitly:
      </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>CREATE TABLE ti (</code></strong>
    -&gt;     <strong class="userinput"><code>c1 INT PRIMARY KEY,</code></strong> 
    -&gt;     <strong class="userinput"><code>c2 INT,</code></strong>
    -&gt;     <strong class="userinput"><code>c3 INT,</code></strong>
    -&gt;     <strong class="userinput"><code>c4 INT</code></strong>
    -&gt; <strong class="userinput"><code>)</code></strong>
    -&gt;     <strong class="userinput"><code>STORAGE DISK</code></strong>
    -&gt;     <strong class="userinput"><code>TABLESPACE ts_1</code></strong>
    -&gt;     <strong class="userinput"><code>ENGINE NDBCLUSTER;</code></strong>
Query OK, 0 rows affected (1.31 sec)
</pre><p>
        Because <code class="literal">c2</code>, <code class="literal">c3</code>, and
        <code class="literal">c4</code> are themselves not declared with
        <code class="literal">STORAGE DISK</code>, it is possible to index them.
        Here, we add indexes to <code class="literal">c2</code> and
        <code class="literal">c3</code>, using, respectively, <code class="literal">CREATE
        INDEX</code> and <code class="literal">ALTER TABLE</code>:
      </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>CREATE INDEX i1 ON ti(c2);</code></strong>
Query OK, 0 rows affected (2.72 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>ALTER TABLE ti ADD INDEX i2(c3);</code></strong>
Query OK, 0 rows affected (0.92 sec)
Records: 0  Duplicates: 0  Warnings: 0
</pre><p>
        <a class="link" href="sql-syntax.html#show-create-table" title="13.7.6.10 SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE TABLE</code></a> confirms that
        the indexes were added.
      </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW CREATE TABLE ti\G</code></strong>
*************************** 1. row ***************************
       Table: ti
Create Table: CREATE TABLE `ti` (
  `c1` int(11) NOT NULL,
  `c2` int(11) DEFAULT NULL,
  `c3` int(11) DEFAULT NULL,
  `c4` int(11) DEFAULT NULL,
  PRIMARY KEY (`c1`),
  KEY `i1` (`c2`),
  KEY `i2` (`c3`)
) /*!50100 TABLESPACE `ts_1` STORAGE DISK */ ENGINE=ndbcluster DEFAULT CHARSET=latin1
1 row in set (0.00 sec)
</pre><p>
        You can see using <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-desc" title="22.4.9 ndb_desc — Describe NDB Tables"><span class="command"><strong>ndb_desc</strong></span></a> that the indexed
        columns (emphasized text) now use in-memory rather than on-disk
        storage:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>./ndb_desc -d test t1</code></strong>
-- t1 --
Version: 33554433
Fragment type: HashMapPartition
K Value: 6
Min load factor: 78
Max load factor: 80
Temporary table: no
Number of attributes: 4
Number of primary keys: 1
Length of frm data: 317
Max Rows: 0
Row Checksum: 1
Row GCI: 1
SingleUserMode: 0
ForceVarPart: 1
PartitionCount: 4
FragmentCount: 4
PartitionBalance: FOR_RP_BY_LDM
ExtraRowGciBits: 0
ExtraRowAuthorBits: 0
TableStatus: Retrieved
Table options:
HashMap: DEFAULT-HASHMAP-3840-4
-- Attributes --
c1 Int PRIMARY KEY DISTRIBUTION KEY AT=FIXED ST=MEMORY
<span class="emphasis"><em>c2 Int NULL AT=FIXED ST=MEMORY
c3 Int NULL AT=FIXED ST=MEMORY</em></span>
c4 Int NULL AT=FIXED ST=DISK
-- Indexes -- 
PRIMARY KEY(c1) - UniqueHashIndex
i2(c3) - OrderedIndex
PRIMARY(c1) - OrderedIndex
i1(c2) - OrderedIndex

NDBT_ProgramExit: 0 - OK
</pre><p><b>Performance note. </b>
          The performance of a cluster using Disk Data storage is
          greatly improved if Disk Data files are kept on a separate
          physical disk from the data node file system. This must be
          done for each data node in the cluster to derive any
          noticeable benefit.
        </p><p>
        You can use absolute and relative file system paths with
        <code class="literal">ADD UNDOFILE</code> and <code class="literal">ADD
        DATAFILE</code>; relative paths are calculated with respect
        to the data node's data directory. You can also use
        symbolic links to point to a directory on a different disk; see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-disk-data-symlinks" title="22.5.13.2 Using Symbolic Links with Disk Data Objects">Section 22.5.13.2, “Using Symbolic Links with Disk Data Objects”</a>, for more
        information and examples.
      </p><p>
        A log file group, a tablespace, and any Disk Data tables using
        these must be created in a particular order. This is also true
        for dropping these objects, sibject to the following
        constraints:
</p><a class="indexterm" name="idm140091576936432"></a>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            A log file group cannot be dropped as long as any
            tablespaces use it.
          </p></li><li class="listitem"><p>
            A tablespace cannot be dropped as long as it contains any
            data files.
          </p></li><li class="listitem"><p>
            You cannot drop any data files from a tablespace as long as
            there remain any tables which are using the tablespace.
          </p></li><li class="listitem"><p>
            It is not possible to drop files created in association with
            a different tablespace other than the one with which the
            files were created.
</p></li></ul>
</div>
<p>
        For example, to drop all the objects created so far in this
        section, you can use the following statements:
      </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>DROP TABLE dt_1;</code></strong>

mysql&gt; <strong class="userinput"><code>ALTER TABLESPACE ts_1</code></strong>
    -&gt; <strong class="userinput"><code>DROP DATAFILE 'data_2.dat'</code></strong>
    -&gt; <strong class="userinput"><code>ENGINE NDBCLUSTER;</code></strong>

mysql&gt; <strong class="userinput"><code>ALTER TABLESPACE ts_1</code></strong>
    -&gt; <strong class="userinput"><code>DROP DATAFILE 'data_1.dat'</code></strong>
    -&gt; <strong class="userinput"><code>ENGINE NDBCLUSTER;</code></strong>

mysql&gt; <strong class="userinput"><code>DROP TABLESPACE ts_1</code></strong>
    -&gt; <strong class="userinput"><code>ENGINE NDBCLUSTER;</code></strong>

mysql&gt; <strong class="userinput"><code>DROP LOGFILE GROUP lg_1</code></strong>
    -&gt; <strong class="userinput"><code>ENGINE NDBCLUSTER;</code></strong>
</pre><p>
        These statements must be performed in the order shown, except
        that the two <code class="literal">ALTER TABLESPACE ... DROP
        DATAFILE</code> statements may be executed in either order.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-disk-data-symlinks"></a>22.5.13.2 Using Symbolic Links with Disk Data Objects</h4>

</div>

</div>

</div>
<p>
        The performance of an NDB Cluster that uses Disk Data storage
        can be greatly improved by separating the data node file system
        from any tablespace files (undo log files and data files), and
        placing these on different disks. In early versions of NDB
        Cluster, there was no direct support for this in NDB Cluster,
        but it was possible to achieve this separation using symbolic
        links as described in this section. NDB Cluster supports the
        data node configuration parameters
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathdd"><code class="literal">FileSystemPathDD</code></a>,
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathdatafiles"><code class="literal">FileSystemPathDataFiles</code></a>,
        and
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathundofiles"><code class="literal">FileSystemPathUndoFiles</code></a>,
        which make the use of symbolic links for this purpose
        unnecessary. For more information about these parameters, see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-disk-data-filesystem-parameters" title="Disk Data file system parameters">Disk Data file system parameters</a>.
      </p><p>
        Each data node in the cluster creates a file system in the
        directory named
        <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_fs</code>
        under the data node's
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datadir"><code class="literal">DataDir</code></a> as defined in
        the <code class="filename">config.ini</code> file. In this example, we
        assume that each data node host has 3 disks, aliased as
        <code class="filename">/data0</code>, <code class="filename">/data1</code>, and
        <code class="filename">/data2</code>, and that the cluster's
        <code class="filename">config.ini</code> includes the following:
      </p><pre data-lang="ini" class="programlisting">
[ndbd default]
DataDir= /data0
</pre><p>
        Our objective is to place all Disk Data log files in
        <code class="filename">/data1</code>, and all Disk Data data files in
        <code class="filename">/data2</code>, on each data node host.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          In this example, we assume that the cluster's data node
          hosts are all using Linux operating systems. For other
          platforms, you may need to substitute you operating
          system's commands for those shown here.
</p>
</div>
<p>
        To accomplish this, perform the following steps:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Under the data node file system create symbolic links
            pointing to the other drives:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>cd /data0/ndb_2_fs</code></strong>
shell&gt; <strong class="userinput"><code>ls</code></strong>
D1  D10  D11  D2  D8  D9  LCP
shell&gt; <strong class="userinput"><code>ln -s /data0 dnlogs</code></strong>
shell&gt; <strong class="userinput"><code>ln -s /data1 dndata</code></strong>
</pre><p>
            You should now have two symbolic links:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ls -l --hide=D*</code></strong>
lrwxrwxrwx 1 user group   30 2007-03-19 13:58 dndata -&gt; /data1
lrwxrwxrwx 1 user group   30 2007-03-19 13:59 dnlogs -&gt; /data2
</pre><p>
            We show this only for the data node with node ID 2; however,
            you must do this for <span class="emphasis"><em>each</em></span> data node.
          </p></li><li class="listitem"><p>
            Now, in the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client, create a log
            file group and tablespace using the symbolic links, as shown
            here:
          </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>CREATE LOGFILE GROUP lg1</code></strong>
    -&gt;    <strong class="userinput"><code>ADD UNDOFILE 'dnlogs/undo1.log'</code></strong>
    -&gt;    <strong class="userinput"><code>INITIAL_SIZE 150M</code></strong>
    -&gt;    <strong class="userinput"><code>UNDO_BUFFER_SIZE = 1M</code></strong>
    -&gt;    <strong class="userinput"><code>ENGINE=NDBCLUSTER;</code></strong>

mysql&gt; <strong class="userinput"><code>CREATE TABLESPACE ts1</code></strong>
    -&gt;    <strong class="userinput"><code>ADD DATAFILE 'dndata/data1.log'</code></strong>
    -&gt;    <strong class="userinput"><code>USE LOGFILE GROUP lg1</code></strong>
    -&gt;    <strong class="userinput"><code>INITIAL_SIZE 1G</code></strong>
    -&gt;    <strong class="userinput"><code>ENGINE=NDBCLUSTER;</code></strong>
</pre><p>
            Verify that the files were created and placed correctly as
            shown here:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>cd /data1</code></strong>
shell&gt; <strong class="userinput"><code>ls -l</code></strong>
total 2099304
-rw-rw-r--  1 user group 157286400 2007-03-19 14:02 undo1.dat

shell&gt; <strong class="userinput"><code>cd /data2</code></strong>
shell&gt; <strong class="userinput"><code>ls -l</code></strong>
total 2099304
-rw-rw-r--  1 user group 1073741824 2007-03-19 14:02 data1.dat
</pre></li><li class="listitem"><p>
            If you are running multiple data nodes on one host, you must
            take care to avoid having them try to use the same space for
            Disk Data files. You can make this easier by creating a
            symbolic link in each data node file system. Suppose you are
            using <code class="filename">/data0</code> for both data node file
            systems, but you wish to have the Disk Data files for both
            nodes on <code class="filename">/data1</code>. In this case, you can
            do something similar to what is shown here:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>cd /data0</code></strong>
shell&gt; <strong class="userinput"><code>ln -s /data1/dn2 ndb_2_fs/dd</code></strong>
shell&gt; <strong class="userinput"><code>ln -s /data1/dn3 ndb_3_fs/dd</code></strong>
shell&gt; <strong class="userinput"><code>ls -l --hide=D* ndb_2_fs</code></strong>
lrwxrwxrwx 1 user group   30 2007-03-19 14:22 dd -&gt; /data1/dn2
shell&gt; <strong class="userinput"><code>ls -l --hide=D* ndb_3_fs</code></strong>
lrwxrwxrwx 1 user group   30 2007-03-19 14:22 dd -&gt; /data1/dn3
</pre></li><li class="listitem"><p>
            Now you can create a logfile group and tablespace using the
            symbolic link, like this:
          </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>CREATE LOGFILE GROUP lg1</code></strong>
    -&gt;    <strong class="userinput"><code>ADD UNDOFILE 'dd/undo1.log'</code></strong>
    -&gt;    <strong class="userinput"><code>INITIAL_SIZE 150M</code></strong>
    -&gt;    <strong class="userinput"><code>UNDO_BUFFER_SIZE = 1M</code></strong>
    -&gt;    <strong class="userinput"><code>ENGINE=NDBCLUSTER;</code></strong>

mysql&gt; <strong class="userinput"><code>CREATE TABLESPACE ts1</code></strong>
    -&gt;    <strong class="userinput"><code>ADD DATAFILE 'dd/data1.log'</code></strong>
    -&gt;    <strong class="userinput"><code>USE LOGFILE GROUP lg1</code></strong>
    -&gt;    <strong class="userinput"><code>INITIAL_SIZE 1G</code></strong>
    -&gt;    <strong class="userinput"><code>ENGINE=NDBCLUSTER;</code></strong>
</pre><p>
            Verify that the files were created and placed correctly as
            shown here:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>cd /data1</code></strong>
shell&gt; <strong class="userinput"><code>ls</code></strong>
dn2        dn3
shell&gt; <strong class="userinput"><code>ls dn2</code></strong>
undo1.log        data1.log
shell&gt; <strong class="userinput"><code>ls dn3</code></strong>
undo1.log        data1.log
</pre></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-disk-data-storage-requirements"></a>22.5.13.3 NDB Cluster Disk Data Storage Requirements</h4>

</div>

</div>

</div>
<p>
        <a class="indexterm" name="idm140091576855408"></a>

        The following items apply to Disk Data storage requirements:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Variable-length columns of Disk Data tables take up a fixed
            amount of space. For each row, this is equal to the space
            required to store the largest possible value for that
            column.
          </p><p>
            For general information about calculating these values, see
            <a class="xref" href="data-types.html#storage-requirements" title="11.8 Data Type Storage Requirements">Section 11.8, “Data Type Storage Requirements”</a>.
          </p><p>
            You can obtain an estimate the amount of space available in
            data files and undo log files by querying the
            <a class="link" href="information-schema.html#files-table" title="25.11 The INFORMATION_SCHEMA FILES Table"><code class="literal">INFORMATION_SCHEMA.FILES</code></a> table.
            For more information and examples, see
            <a class="xref" href="information-schema.html#files-table" title="25.11 The INFORMATION_SCHEMA FILES Table">Section 25.11, “The INFORMATION_SCHEMA FILES Table”</a>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              The <a class="link" href="sql-syntax.html#optimize-table" title="13.7.3.4 OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a>
              statement does not have any effect on Disk Data tables.
</p>
</div>
</li><li class="listitem"><p>
            In a Disk Data table, the first 256 bytes of a
            <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> or
            <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> column are stored in
            memory; only the remainder is stored on disk.
          </p></li><li class="listitem"><p>
            Each row in a Disk Data table uses 8 bytes in memory to
            point to the data stored on disk. This means that, in some
            cases, converting an in-memory column to the disk-based
            format can actually result in greater memory usage. For
            example, converting a <code class="literal">CHAR(4)</code> column from
            memory-based to disk-based format increases the amount of
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a> used per
            row from 4 to 8 bytes.
</p></li></ul>
</div>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Important
</div>
<p>
          Starting the cluster with the <code class="option">--initial</code>
          option does <span class="emphasis"><em>not</em></span> remove Disk Data files.
          You must remove these manually prior to performing an initial
          restart of the cluster.
</p>
</div>
<p>
        Performance of Disk Data tables can be improved by minimizing
        the number of disk seeks by making sure that
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskpagebuffermemory"><code class="literal">DiskPageBufferMemory</code></a> is
        of sufficient size. You can query the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-diskpagebuffer" title="22.5.10.20 The ndbinfo diskpagebuffer Table"><code class="literal">diskpagebuffer</code></a> table to help
        determine whether the value for this parameter needs to be
        increased.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-online-operations"></a>22.5.14 Online Operations with ALTER TABLE in NDB Cluster</h3>

</div>

</div>

</div>
<p>
      MySQL NDB Cluster 8.0 supports online table schema changes using
      the standard <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> syntax
      employed by the MySQL Server
      (<code class="literal">ALGORITHM=DEFAULT|INPLACE|COPY</code>), and described
      elsewhere.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        Some older releases of NDB Cluster used a syntax specific to
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> for online <code class="literal">ALTER
        TABLE</code> operations. That syntax has since been removed.
</p>
</div>
<p>
      Operations that add and drop indexes on variable-width columns of
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables occur online. Online
      operations are noncopying; that is, they do not require that
      indexes be re-created. They do not lock the table being altered
      from access by other API nodes in an NDB Cluster (but see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-online-limitations" title="Limitations of NDB online operations">Limitations of NDB online operations</a>, later in this
      section). Such operations do not require single user mode for
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table alterations made in an NDB
      cluster with multiple API nodes; transactions can continue
      uninterrupted during online DDL operations.
    </p><p>
      <code class="literal">ALGORITHM=INPLACE</code> can be used to perform online
      <code class="literal">ADD COLUMN</code>, <code class="literal">ADD INDEX</code>
      (including <code class="literal">CREATE INDEX</code> statements), and
      <code class="literal">DROP INDEX</code> operations on
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables. Online renaming of
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables is also supported.
    </p><p>
      Currently you cannot add disk-based columns to
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables online. This means that,
      if you wish to add an in-memory column to an
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table that uses a table-level
      <code class="literal">STORAGE DISK</code> option, you must declare the new
      column as using memory-based storage explicitly. For
      example—assuming that you have already created tablespace
      <code class="literal">ts1</code>—suppose that you create table
      <code class="literal">t1</code> as follows:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>CREATE TABLE t1 (</code></strong>
     &gt;     <strong class="userinput"><code>c1 INT NOT NULL PRIMARY KEY,</code></strong>
     &gt;     <strong class="userinput"><code>c2 VARCHAR(30)</code></strong>
     &gt;     <strong class="userinput"><code>)</code></strong>
     &gt;     <strong class="userinput"><code>TABLESPACE ts1 STORAGE DISK</code></strong>
     &gt;     <strong class="userinput"><code>ENGINE NDB;</code></strong>
Query OK, 0 rows affected (1.73 sec)
Records: 0  Duplicates: 0  Warnings: 0
</pre><p>
      You can add a new in-memory column to this table online as shown
      here:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>ALTER TABLE t1</code></strong> 
     &gt;     <strong class="userinput"><code>ADD COLUMN c3 INT COLUMN_FORMAT DYNAMIC STORAGE MEMORY,</code></strong>
     &gt;     <strong class="userinput"><code>ALGORITHM=INPLACE;</code></strong>
Query OK, 0 rows affected (1.25 sec)
Records: 0  Duplicates: 0  Warnings: 0
</pre><p>
      This statement fails if the <code class="literal">STORAGE MEMORY</code>
      option is omitted:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>ALTER TABLE t1</code></strong>
     &gt;     <strong class="userinput"><code>ADD COLUMN c4 INT COLUMN_FORMAT DYNAMIC,</code></strong>
     &gt;     <strong class="userinput"><code>ALGORITHM=INPLACE;</code></strong>
<span class="errortext">ERROR 1846 (0A000): ALGORITHM=INPLACE is not supported. Reason: 
Adding column(s) or add/reorganize partition not supported online. Try 
ALGORITHM=COPY.</span>
</pre><p>
      If you omit the <code class="literal">COLUMN_FORMAT DYNAMIC</code> option,
      the dynamic column format is employed automatically, but a warning
      is issued, as shown here:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>ALTER ONLINE TABLE t1 ADD COLUMN c4 INT STORAGE MEMORY;</code></strong>
Query OK, 0 rows affected, 1 warning (1.17 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS\G</code></strong>
*************************** 1. row ***************************
  Level: Warning
   Code: 1478
Message: DYNAMIC column c4 with STORAGE DISK is not supported, column will 
become FIXED


mysql&gt; <strong class="userinput"><code>SHOW CREATE TABLE t1\G</code></strong>
*************************** 1. row ***************************
       Table: t1
Create Table: CREATE TABLE `t1` (
  `c1` int(11) NOT NULL,
  `c2` varchar(30) DEFAULT NULL,
  `c3` int(11) /*!50606 STORAGE MEMORY */ /*!50606 COLUMN_FORMAT DYNAMIC */ DEFAULT NULL,
  `c4` int(11) /*!50606 STORAGE MEMORY */ DEFAULT NULL,
  PRIMARY KEY (`c1`)
) /*!50606 TABLESPACE ts_1 STORAGE DISK */ ENGINE=ndbcluster DEFAULT CHARSET=latin1
1 row in set (0.03 sec)
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        The <code class="literal">STORAGE</code> and
        <code class="literal">COLUMN_FORMAT</code> keywords are supported only in
        NDB Cluster; in any other version of MySQL, attempting to use
        either of these keywords in a <a class="link" href="sql-syntax.html#create-table" title="13.1.20 CREATE TABLE Syntax"><code class="literal">CREATE
        TABLE</code></a> or <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>
        statement results in an error.
</p>
</div>
<p>
      It is also possible to use the statement <code class="literal">ALTER TABLE ...
      REORGANIZE PARTITION, ALGORITHM=INPLACE</code> with no
      <code class="literal"><em class="replaceable"><code>partition_names</code></em> INTO
      (<em class="replaceable"><code>partition_definitions</code></em>)</code>
      option on <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables. This can be
      used to redistribute NDB Cluster data among new data nodes that
      have been added to the cluster online. This does
      <span class="emphasis"><em>not</em></span> perform any defragmentation, which
      requires an <a class="link" href="sql-syntax.html#optimize-table" title="13.7.3.4 OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> or null
      <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statement. For more
      information, see <a class="xref" href="mysql-cluster.html#mysql-cluster-online-add-node" title="22.5.15 Adding NDB Cluster Data Nodes Online">Section 22.5.15, “Adding NDB Cluster Data Nodes Online”</a>.
</p>
<h4><a name="mysql-cluster-online-limitations"></a>Limitations of NDB online operations</h4>
<p>
      Online <code class="literal">DROP COLUMN</code> operations are not
      supported.
    </p><p>
      Online <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>,
      <a class="link" href="sql-syntax.html#create-index" title="13.1.15 CREATE INDEX Syntax"><code class="literal">CREATE INDEX</code></a>, or
      <a class="link" href="sql-syntax.html#drop-index" title="13.1.27 DROP INDEX Syntax"><code class="literal">DROP INDEX</code></a> statements that add
      columns or add or drop indexes are subject to the following
      limitations:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          A given online <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> can
          use only one of <code class="literal">ADD COLUMN</code>, <code class="literal">ADD
          INDEX</code>, or <code class="literal">DROP INDEX</code>. One or more
          columns can be added online in a single statement; only one
          index may be created or dropped online in a single statement.
        </p></li><li class="listitem"><p>
          The table being altered is not locked with respect to API
          nodes other than the one on which an online
          <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> <code class="literal">ADD
          COLUMN</code>, <code class="literal">ADD INDEX</code>, or
          <code class="literal">DROP INDEX</code> operation (or
          <a class="link" href="sql-syntax.html#create-index" title="13.1.15 CREATE INDEX Syntax"><code class="literal">CREATE INDEX</code></a> or
          <a class="link" href="sql-syntax.html#drop-index" title="13.1.27 DROP INDEX Syntax"><code class="literal">DROP INDEX</code></a> statement) is run.
          However, the table is locked against any other operations
          originating on the <span class="emphasis"><em>same</em></span> API node while
          the online operation is being executed.
        </p></li><li class="listitem"><p>
          The table to be altered must have an explicit primary key; the
          hidden primary key created by the
          <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine is not
          sufficient for this purpose.
        </p></li><li class="listitem"><p>
          The storage engine used by the table cannot be changed online.
        </p></li><li class="listitem"><p>
          When used with NDB Cluster Disk Data tables, it is not
          possible to change the storage type (<code class="literal">DISK</code>
          or <code class="literal">MEMORY</code>) of a column online. This means,
          that when you add or drop an index in such a way that the
          operation would be performed online, and you want the storage
          type of the column or columns to be changed, you must use
          <code class="literal">ALGORITHM=COPY</code> in the statement that adds
          or drops the index.
</p></li></ul>
</div>
<p>
      Columns to be added online cannot use the
      <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> or
      <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> type, and must meet the
      following criteria:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          The columns must be dynamic; that is, it must be possible to
          create them using <code class="literal">COLUMN_FORMAT DYNAMIC</code>. If
          you omit the <code class="literal">COLUMN_FORMAT DYNAMIC</code> option,
          the dynamic column format is employed automatically.
        </p></li><li class="listitem"><p>
          The columns must permit <code class="literal">NULL</code> values and not
          have any explicit default value other than
          <code class="literal">NULL</code>. Columns added online are
          automatically created as <code class="literal">DEFAULT NULL</code>, as
          can be seen here:
        </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>CREATE TABLE t2 (</code></strong>
     &gt;     <strong class="userinput"><code>c1 INT NOT NULL AUTO_INCREMENT PRIMARY KEY</code></strong>
     &gt;     <strong class="userinput"><code>) ENGINE=NDB;</code></strong>
Query OK, 0 rows affected (1.44 sec)

mysql&gt; <strong class="userinput"><code>ALTER TABLE t2</code></strong>
     &gt;     <strong class="userinput"><code>ADD COLUMN c2 INT,</code></strong>
     &gt;     <strong class="userinput"><code>ADD COLUMN c3 INT,</code></strong>
     &gt;     <strong class="userinput"><code>ALGORITHM=INPLACE;</code></strong>
Query OK, 0 rows affected, 2 warnings (0.93 sec)

mysql&gt; <strong class="userinput"><code>SHOW CREATE TABLE t1\G</code></strong>
*************************** 1. row ***************************
       Table: t1
Create Table: CREATE TABLE `t2` (
  `c1` int(11) NOT NULL AUTO_INCREMENT,
  `c2` int(11) DEFAULT NULL,
  `c3` int(11) DEFAULT NULL,
  PRIMARY KEY (`c1`)
) ENGINE=ndbcluster DEFAULT CHARSET=latin1
1 row in set (0.00 sec)
</pre></li><li class="listitem"><p>
          The columns must be added following any existing columns. If
          you attempt to add a column online before any existing columns
          or using the <code class="literal">FIRST</code> keyword, the statement
          fails with an error.
        </p></li><li class="listitem"><p>
          Existing table columns cannot be reordered online.
</p></li></ul>
</div>
<p>
      For online <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> operations
      on <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables, fixed-format columns
      are converted to dynamic when they are added online, or when
      indexes are created or dropped online, as shown here (repeating
      the <code class="literal">CREATE TABLE</code> and <code class="literal">ALTER
      TABLE</code> statements just shown for the sake of clarity):
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>CREATE TABLE t2 (</code></strong>
     &gt;     <strong class="userinput"><code>c1 INT NOT NULL AUTO_INCREMENT PRIMARY KEY</code></strong>
     &gt;     <strong class="userinput"><code>) ENGINE=NDB;</code></strong>
Query OK, 0 rows affected (1.44 sec)

mysql&gt; <strong class="userinput"><code>ALTER TABLE t2</code></strong>
     &gt;     <strong class="userinput"><code>ADD COLUMN c2 INT,</code></strong>
     &gt;     <strong class="userinput"><code>ADD COLUMN c3 INT,</code></strong>
     &gt;     <strong class="userinput"><code>ALGORITHM=INPLACE;</code></strong>
Query OK, 0 rows affected, 2 warnings (0.93 sec)

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS;</code></strong>
*************************** 1. row ***************************
  Level: Warning
   Code: 1478
Message: Converted FIXED field 'c2' to DYNAMIC to enable online ADD COLUMN
*************************** 2. row ***************************
  Level: Warning
   Code: 1478
Message: Converted FIXED field 'c3' to DYNAMIC to enable online ADD COLUMN
2 rows in set (0.00 sec)
</pre><p>
      Only the column or columns to be added online must be dynamic.
      Existing columns need not be; this includes the table's
      primary key, which may also be <code class="literal">FIXED</code>, as shown
      here:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>CREATE TABLE t3 (</code></strong>
     &gt;     <strong class="userinput"><code>c1 INT NOT NULL AUTO_INCREMENT PRIMARY KEY COLUMN_FORMAT FIXED</code></strong>
     &gt;     <strong class="userinput"><code>) ENGINE=NDB;</code></strong>
Query OK, 0 rows affected (2.10 sec)

mysql&gt; <strong class="userinput"><code>ALTER TABLE t3 ADD COLUMN c2 INT, ALGORITHM=INPLACE;</code></strong>
Query OK, 0 rows affected, 1 warning (0.78 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS;</code></strong>
*************************** 1. row ***************************
  Level: Warning
   Code: 1478
Message: Converted FIXED field 'c2' to DYNAMIC to enable online ADD COLUMN
1 row in set (0.00 sec)
</pre><p>
      Columns are not converted from <code class="literal">FIXED</code> to
      <code class="literal">DYNAMIC</code> column format by renaming operations.
      For more information about <code class="literal">COLUMN_FORMAT</code>, see
      <a class="xref" href="sql-syntax.html#create-table" title="13.1.20 CREATE TABLE Syntax">Section 13.1.20, “CREATE TABLE Syntax”</a>.
    </p><p>
      The <code class="literal">KEY</code>, <code class="literal">CONSTRAINT</code>, and
      <code class="literal">IGNORE</code> keywords are supported in
      <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statements using
      <code class="literal">ALGORITHM=INPLACE</code>.
    </p><p>
      Setting <code class="literal">MAX_ROWS</code> to 0 using an online
      <code class="literal">ALTER TABLE</code> statement is disallowed. You must
      use a copying <code class="literal">ALTER TABLE</code> to perform this
      operation. (Bug #21960004)
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-online-add-node"></a>22.5.15 Adding NDB Cluster Data Nodes Online</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-online-add-node-remarks">22.5.15.1 Adding NDB Cluster Data Nodes Online: General Issues</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-online-add-node-basics">22.5.15.2 Adding NDB Cluster Data Nodes Online: Basic procedure</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-online-add-node-example">22.5.15.3 Adding NDB Cluster Data Nodes Online: Detailed Example</a></span></dt></dl>
</div>
<p>
      This section describes how to add NDB Cluster data nodes
      <span class="quote">“<span class="quote">online</span>”</span>—that is, without needing to shut down
      the cluster completely and restart it as part of the process.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
        Currently, you must add new data nodes to an NDB Cluster as part
        of a new node group. In addition, it is not possible to change
        the number of replicas (or the number of nodes per node group)
        online.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-online-add-node-remarks"></a>22.5.15.1 Adding NDB Cluster Data Nodes Online: General Issues</h4>

</div>

</div>

</div>
<p>
        This section provides general information about the behavior of
        and current limitations in adding NDB Cluster nodes online.
      </p><p><b>Redistribution of Data. </b>
          The ability to add new nodes online includes a means to
          reorganize <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> table data
          and indexes so that they are distributed across all data
          nodes, including the new ones, by means of the
          <a class="link" href="sql-syntax.html#alter-table-partition-operations" title="13.1.9.1 ALTER TABLE Partition Operations"><code class="literal">ALTER
          TABLE ... REORGANIZE PARTITION</code></a> statement. Table
          reorganization of both in-memory and Disk Data tables is
          supported. This redistribution does not currently include
          unique indexes (only ordered indexes are redistributed).
        </p><p>
        The redistribution for <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a>
        tables already existing before the new data nodes were added is
        not automatic, but can be accomplished using simple SQL
        statements in <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> or another MySQL client
        application. However, all data and indexes added to tables
        created after a new node group has been added are distributed
        automatically among all cluster data nodes, including those
        added as part of the new node group.
      </p><p><b>Partial starts. </b>
          It is possible to add a new node group without all of the new
          data nodes being started. It is also possible to add a new
          node group to a degraded cluster—that is, a cluster that
          is only partially started, or where one or more data nodes are
          not running. In the latter case, the cluster must have enough
          nodes running to be viable before the new node group can be
          added.
        </p><p><b>Effects on ongoing operations. </b>
          Normal DML operations using NDB Cluster data are not prevented
          by the creation or addition of a new node group, or by table
          reorganization. However, it is not possible to perform DDL
          concurrently with table reorganization—that is, no other
          DDL statements can be issued while an
          <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE ...
          REORGANIZE PARTITION</code></a> statement is executing. In
          addition, during the execution of <code class="literal">ALTER TABLE ...
          REORGANIZE PARTITION</code> (or the execution of any other
          DDL statement), it is not possible to restart cluster data
          nodes.
        </p><p><b>Failure handling. </b>
          Failures of data nodes during node group creation and table
          reorganization are handled as shown in the following table:
</p>
<div class="table">
<a name="idm140091576687904"></a><p class="title"><b>Table 22.422 Data node failure handling during node group creation and
table reorganization</b></p>
<div class="table-contents">
<table><col width="25%"><col width="25%"><col width="25%"><col width="25%"><thead><tr>
            <th scope="col">Failure during</th>
            <th scope="col">Failure in <span class="quote">“<span class="quote">Old</span>”</span> data node</th>
            <th scope="col">Failure in <span class="quote">“<span class="quote">New</span>”</span> data node</th>
            <th scope="col">System Failure</th>
          </tr></thead><tbody><tr>
            <td scope="row">Node group creation</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>If a node other than the master fails: </b>
                      The creation of the node group is always rolled
                      forward.
</p></li><li class="listitem"><p><b>If the master fails: </b></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><b>If the internal commit point has been reached: </b>
                          The creation of the node group is rolled
                          forward.
                        </p></li><li class="listitem"><p><b>If the internal commit point has not yet been reached. </b>
                          The creation of the node group is rolled back
</p></li></ul>
</div>
</li></ul>
</div>
</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>If a node other than the master fails: </b>
                      The creation of the node group is always rolled
                      forward.
</p></li><li class="listitem"><p><b>If the master fails: </b></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><b>If the internal commit point has been reached: </b>
                          The creation of the node group is rolled
                          forward.
                        </p></li><li class="listitem"><p><b>If the internal commit point has not yet been reached. </b>
                          The creation of the node group is rolled back
</p></li></ul>
</div>
</li></ul>
</div>
</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>If the execution of CREATE NODEGROUP has reached the internal commit
                      point: </b>
                      When restarted, the cluster includes the new node
                      group. Otherwise it without.
                    </p></li><li class="listitem"><p><b>If the execution of CREATE NODEGROUP has not yet reached the internal
                      commit point: </b>
                      When restarted, the cluster does not include the
                      new node group.
</p></li></ul>
</div>
</td>
          </tr><tr>
            <td scope="row">Table reorganization</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>If a node other than the master fails: </b>
                      The table reorganization is always rolled forward.
</p></li><li class="listitem"><p><b>If the master fails: </b></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><b>If the internal commit point has been reached: </b>
                          The table reorganization is rolled forward.
                        </p></li><li class="listitem"><p><b>If the internal commit point has not yet been reached. </b>
                          The table reorganization is rolled back.
</p></li></ul>
</div>
</li></ul>
</div>
</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>If a node other than the master fails: </b>
                      The table reorganization is always rolled forward.
</p></li><li class="listitem"><p><b>If the master fails: </b></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><b>If the internal commit point has been reached: </b>
                          The table reorganization is rolled forward.
                        </p></li><li class="listitem"><p><b>If the internal commit point has not yet been reached. </b>
                          The table reorganization is rolled back.
</p></li></ul>
</div>
</li></ul>
</div>
</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>If the execution of an ALTER TABLE ... REORGANIZE PARTITION statement
                      has reached the internal commit point: </b>
                      When the cluster is restarted, the data and
                      indexes belonging to
                      <em class="replaceable"><code>table</code></em> are distributed
                      using the <span class="quote">“<span class="quote">new</span>”</span> data nodes.
                    </p></li><li class="listitem"><p><b>If the execution of an ALTER TABLE ... REORGANIZE PARTITION statement
                      has not yet reached the internal commit point: </b>
                      When the cluster is restarted, the data and
                      indexes belonging to
                      <em class="replaceable"><code>table</code></em> are distributed
                      using only the <span class="quote">“<span class="quote">old</span>”</span> data nodes.
</p></li></ul>
</div>
</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p><b>Dropping node groups. </b>
          The <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> client supports a
          <a class="link" href="mysql-cluster.html#ndbclient-drop-nodegroup"><code class="literal">DROP NODEGROUP</code></a> command,
          but it is possible to drop a node group only when no data
          nodes in the node group contain any data. Since there is
          currently no way to <span class="quote">“<span class="quote">empty</span>”</span> a specific data node
          or node group, this command works only the following two
          cases:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            After issuing <a class="link" href="mysql-cluster.html#ndbclient-create-nodegroup"><code class="literal">CREATE
            NODEGROUP</code></a> in the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a>
            client, but before issuing any
            <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE ...
            REORGANIZE PARTITION</code></a> statements in the
            <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client.
          </p></li><li class="listitem"><p>
            After dropping all <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a>
            tables using <a class="link" href="sql-syntax.html#drop-table" title="13.1.32 DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a>.
          </p><p>
            <a class="link" href="sql-syntax.html#truncate-table" title="13.1.37 TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE TABLE</code></a> does not work
            for this purpose because the data nodes continue to store
            the table definitions.
</p></li></ol>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-online-add-node-basics"></a>22.5.15.2 Adding NDB Cluster Data Nodes Online: Basic procedure</h4>

</div>

</div>

</div>
<p>
        In this section, we list the basic steps required to add new
        data nodes to an NDB Cluster. This procedure applies whether you
        are using <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> or <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>
        binaries for the data node processes. For a more detailed
        example, see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-online-add-node-example" title="22.5.15.3 Adding NDB Cluster Data Nodes Online: Detailed Example">Section 22.5.15.3, “Adding NDB Cluster Data Nodes Online: Detailed Example”</a>.
      </p><p>
        Assuming that you already have a running NDB Cluster, adding
        data nodes online requires the following steps:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Edit the cluster configuration
            <code class="filename">config.ini</code> file, adding new
            <code class="literal">[ndbd]</code> sections corresponding to the
            nodes to be added. In the case where the cluster uses
            multiple management servers, these changes need to be made
            to all <code class="filename">config.ini</code> files used by the
            management servers.
          </p><p>
            You must be careful that node IDs for any new data nodes
            added in the <code class="filename">config.ini</code> file do not
            overlap node IDs used by existing nodes. In the event that
            you have API nodes using dynamically allocated node IDs and
            these IDs match node IDs that you want to use for new data
            nodes, it is possible to force any such API nodes to
            <span class="quote">“<span class="quote">migrate</span>”</span>, as described later in this
            procedure.
          </p></li><li class="listitem"><p>
            Perform a rolling restart of all NDB Cluster management
            servers.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              All management servers must be restarted with the
              <a class="link" href="mysql-cluster.html#option_ndb_mgmd_reload"><code class="option">--reload</code></a> or
              <a class="link" href="mysql-cluster.html#option_ndb_mgmd_initial"><code class="option">--initial</code></a> option to force
              the reading of the new configuration.
</p>
</div>
</li><li class="listitem"><p>
            Perform a rolling restart of all existing NDB Cluster data
            nodes. It is not necessary (or usually even desirable) to
            use <a class="link" href="mysql-cluster.html#option_ndbd_initial"><code class="option">--initial</code></a> when restarting
            the existing data nodes.
          </p><p>
            If you are using API nodes with dynamically allocated IDs
            matching any node IDs that you wish to assign to new data
            nodes, you must restart all API nodes (including SQL nodes)
            before restarting any of the data nodes processes in this
            step. This causes any API nodes with node IDs that were
            previously not explicitly assigned to relinquish those node
            IDs and acquire new ones.
          </p></li><li class="listitem"><p>
            Perform a rolling restart of any SQL or API nodes connected
            to the NDB Cluster.
          </p></li><li class="listitem"><p>
            Start the new data nodes.
          </p><p>
            The new data nodes may be started in any order. They can
            also be started concurrently, as long as they are started
            after the rolling restarts of all existing data nodes have
            been completed, and before proceeding to the next step.
          </p></li><li class="listitem"><p>
            Execute one or more <a class="link" href="mysql-cluster.html#ndbclient-create-nodegroup"><code class="literal">CREATE
            NODEGROUP</code></a> commands in the NDB Cluster management
            client to create the new node group or node groups to which
            the new data nodes will belong.
          </p></li><li class="listitem"><p>
            Redistribute the cluster's data among all data nodes,
            including the new ones. Normally this is done by issuing an
            <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE ...
            ALGORITHM=INPLACE, REORGANIZE PARTITION</code></a> statement
            in the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client for each
            <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> table.
          </p><p>
            <span class="emphasis"><em>Exception</em></span>: For tables created using the
            <code class="literal">MAX_ROWS</code> option, this statement does not
            work; instead, use <code class="literal">ALTER TABLE ...
            ALGORITHM=INPLACE MAX_ROWS=...</code> to reorganize such
            tables. You should also bear in mind that using
            <code class="literal">MAX_ROWS</code> to set the number of partitions
            in this fashion is deprecated, and you should use
            <code class="literal">PARTITION_BALANCE</code> instead; see
            <a class="xref" href="sql-syntax.html#create-table-ndb-table-comment-options" title="13.1.20.11 Setting NDB_TABLE Options">Section 13.1.20.11, “Setting NDB_TABLE Options”</a>,
            for more information.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              This needs to be done only for tables already existing at
              the time the new node group is added. Data in tables
              created after the new node group is added is distributed
              automatically; however, data added to any given table
              <code class="literal">tbl</code> that existed before the new nodes
              were added is not distributed using the new nodes until
              that table has been reorganized.
</p>
</div>
</li><li class="listitem"><p>
            <code class="literal">ALTER TABLE ... REORGANIZE PARTITION
            ALGORITHM=INPLACE</code> reorganizes partitions but does
            not reclaim the space freed on the <span class="quote">“<span class="quote">old</span>”</span> nodes.
            You can do this by issuing, for each
            <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> table, an
            <a class="link" href="sql-syntax.html#optimize-table" title="13.7.3.4 OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> statement in
            the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client.
          </p><p>
            This works for space used by variable-width columns of
            in-memory <code class="literal">NDB</code> tables. <code class="literal">OPTIMIZE
            TABLE</code> is not supported for fixed-width columns of
            in-memory tables; it is also not supported for Disk Data
            tables.
</p></li></ol>
</div>
<p>
        You can add all the nodes desired, then issue several
        <a class="link" href="mysql-cluster.html#ndbclient-create-nodegroup"><code class="literal">CREATE NODEGROUP</code></a> commands in
        succession to add the new node groups to the cluster.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-online-add-node-example"></a>22.5.15.3 Adding NDB Cluster Data Nodes Online: Detailed Example</h4>

</div>

</div>

</div>
<p>
        In this section we provide a detailed example illustrating how
        to add new NDB Cluster data nodes online, starting with an NDB
        Cluster having 2 data nodes in a single node group and
        concluding with a cluster having 4 data nodes in 2 node groups.
      </p><p><b>Starting configuration. </b>
          For purposes of illustration, we assume a minimal
          configuration, and that the cluster uses a
          <code class="filename">config.ini</code> file containing only the
          following information:
        </p><pre data-lang="ini" class="programlisting">
[ndbd default]
DataMemory = 100M
IndexMemory = 100M
NoOfReplicas = 2
DataDir = /usr/local/mysql/var/mysql-cluster

[ndbd]
Id = 1
HostName = 198.51.100.1

[ndbd]
Id = 2
HostName = 198.51.100.2

[mgm]
HostName = 198.51.100.10
Id = 10

[api]
Id=20
HostName = 198.51.100.20

[api]
Id=21
HostName = 198.51.100.21
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          We have left a gap in the sequence between data node IDs and
          other nodes. This make it easier later to assign node IDs that
          are not already in use to data nodes which are newly added.
</p>
</div>
<p>
        We also assume that you have already started the cluster using
        the appropriate command line or <code class="filename">my.cnf</code>
        options, and that running
        <a class="link" href="mysql-cluster.html#ndbclient-show"><code class="literal">SHOW</code></a> in the management
        client produces output similar to what is shown here:
      </p><pre data-lang="ndbmgm" class="programlisting">
-- NDB Cluster -- Management Client --
ndb_mgm&gt; <strong class="userinput"><code>SHOW</code></strong>
Connected to Management Server at: 198.51.100.10:1186
Cluster Configuration
---------------------
[ndbd(NDB)]     2 node(s)
id=1    @198.51.100.1  (8.0.17-ndb-8.0.17, Nodegroup: 0, *)
id=2    @198.51.100.2  (8.0.17-ndb-8.0.17, Nodegroup: 0)

[ndb_mgmd(MGM)] 1 node(s)
id=10   @198.51.100.10  (8.0.17-ndb-8.0.17)

[mysqld(API)]   2 node(s)
id=20   @198.51.100.20  (8.0.17-ndb-8.0.17)
id=21   @198.51.100.21  (8.0.17-ndb-8.0.17)
</pre><p>
        Finally, we assume that the cluster contains a single
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> table created as shown
        here:
      </p><pre data-lang="sql" class="programlisting">
USE n;

CREATE TABLE ips (
    id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    country_code CHAR(2) NOT NULL,
    type CHAR(4) NOT NULL,
    ip_address VARCHAR(15) NOT NULL,
    addresses BIGINT UNSIGNED DEFAULT NULL,
    date BIGINT UNSIGNED DEFAULT NULL
)   ENGINE NDBCLUSTER;
</pre><p>
        The memory usage and related information shown later in this
        section was generated after inserting approximately 50000 rows
        into this table.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          In this example, we show the single-threaded
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> being used for the data node
          processes. You can also apply this example, if you are using
          the multithreaded <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> by substituting
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> for <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> wherever
          it appears in the steps that follow.
</p>
</div>
<p><b>Step 1: Update configuration file. </b>
          Open the cluster global configuration file in a text editor
          and add <code class="literal">[ndbd]</code> sections corresponding to
          the 2 new data nodes. (We give these data nodes IDs 3 and 4,
          and assume that they are to be run on host machines at
          addresses 198.51.100.3 and 198.51.100.4, respectively.) After
          you have added the new sections, the contents of the
          <code class="filename">config.ini</code> file should look like what is
          shown here, where the additions to the file are shown in bold
          type:
        </p><pre data-lang="ini" class="programlisting">
[ndbd default]
DataMemory = 100M
IndexMemory = 100M
NoOfReplicas = 2
DataDir = /usr/local/mysql/var/mysql-cluster

[ndbd]
Id = 1
HostName = 198.51.100.1

[ndbd]
Id = 2
HostName = 198.51.100.2

<span class="bold"><strong>[ndbd]
Id = 3
HostName = 198.51.100.3

[ndbd]
Id = 4
HostName = 198.51.100.4</strong></span>

[mgm]
HostName = 198.51.100.10
Id = 10

[api]
Id=20
HostName = 198.51.100.20

[api]
Id=21
HostName = 198.51.100.21
</pre><p>
        Once you have made the necessary changes, save the file.
      </p><p><b>Step 2: Restart the management server. </b>
          Restarting the cluster management server requires that you
          issue separate commands to stop the management server and then
          to start it again, as follows:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Stop the management server using the management client
            <a class="link" href="mysql-cluster.html#ndbclient-stop"><code class="literal">STOP</code></a> command, as shown
            here:
          </p><pre data-lang="ndbmgm" class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>10 STOP</code></strong>
Node 10 has shut down.
Disconnecting to allow Management Server to shutdown

shell&gt;
</pre></li><li class="listitem"><p>
            Because shutting down the management server causes the
            management client to terminate, you must start the
            management server from the system shell. For simplicity, we
            assume that <code class="filename">config.ini</code> is in the same
            directory as the management server binary, but in practice,
            you must supply the correct path to the configuration file.
            You must also supply the
            <a class="link" href="mysql-cluster.html#option_ndb_mgmd_reload"><code class="option">--reload</code></a> or
            <a class="link" href="mysql-cluster.html#option_ndb_mgmd_initial"><code class="option">--initial</code></a> option so that
            the management server reads the new configuration from the
            file rather than its configuration cache. If your
            shell's current directory is also the same as the
            directory where the management server binary is located,
            then you can invoke the management server as shown here:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_mgmd -f config.ini --reload</code></strong>
2008-12-08 17:29:23 [MgmSrvr] INFO     -- NDB Cluster Management Server. 8.0.17-ndb-8.0.17
2008-12-08 17:29:23 [MgmSrvr] INFO     -- Reading cluster configuration from 'config.ini'
</pre></li></ol>
</div>
<p>
        If you check the output of
        <a class="link" href="mysql-cluster.html#ndbclient-show"><code class="literal">SHOW</code></a> in the management
        client after restarting the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> process,
        you should now see something like this:
      </p><pre data-lang="ndbmgm" class="programlisting">
-- NDB Cluster -- Management Client --
ndb_mgm&gt; <strong class="userinput"><code>SHOW</code></strong>
Connected to Management Server at: 198.51.100.10:1186
Cluster Configuration
---------------------
[ndbd(NDB)]     2 node(s)
id=1    @198.51.100.1  (8.0.17-ndb-8.0.17, Nodegroup: 0, *)
id=2    @198.51.100.2  (8.0.17-ndb-8.0.17, Nodegroup: 0)
id=3 (not connected, accepting connect from 198.51.100.3)
id=4 (not connected, accepting connect from 198.51.100.4)

[ndb_mgmd(MGM)] 1 node(s)
id=10   @198.51.100.10  (8.0.17-ndb-8.0.17)

[mysqld(API)]   2 node(s)
id=20   @198.51.100.20  (8.0.17-ndb-8.0.17)
id=21   @198.51.100.21  (8.0.17-ndb-8.0.17)
</pre><p><b>Step 3: Perform a rolling restart of the existing data nodes. </b>
          This step can be accomplished entirely within the cluster
          management client using the
          <a class="link" href="mysql-cluster.html#ndbclient-restart"><code class="literal">RESTART</code></a> command, as shown
          here:
        </p><pre data-lang="ndbmgm" class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>1 RESTART</code></strong>
Node 1: Node shutdown initiated
Node 1: Node shutdown completed, restarting, no start.
Node 1 is being restarted

ndb_mgm&gt; Node 1: Start initiated (version 8.0.17)
Node 1: Started (version 8.0.17)

ndb_mgm&gt; <strong class="userinput"><code>2 RESTART</code></strong>
Node 2: Node shutdown initiated
Node 2: Node shutdown completed, restarting, no start.
Node 2 is being restarted

ndb_mgm&gt; Node 2: Start initiated (version 8.0.17)

ndb_mgm&gt; Node 2: Started (version 8.0.17)
</pre>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
          After issuing each <code class="literal"><em class="replaceable"><code>X</code></em>
          RESTART</code> command, wait until the management client
          reports <code class="literal">Node <em class="replaceable"><code>X</code></em>: Started
          (version ...)</code> <span class="emphasis"><em>before</em></span> proceeding
          any further.
</p>
</div>
<p>
        You can verify that all existing data nodes were restarted using
        the updated configuration by checking the
        <a class="link" href="mysql-cluster.html#mysql-cluster-ndbinfo-nodes" title="22.5.10.28 The ndbinfo nodes Table"><code class="literal">ndbinfo.nodes</code></a> table in the
        <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client.
      </p><p><b>Step 4: Perform a rolling restart of all cluster API nodes. </b>
          Shut down and restart each MySQL server acting as an SQL node
          in the cluster using <a class="link" href="programs.html#mysqladmin" title="4.5.2 mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin shutdown</strong></span></a>
          followed by <a class="link" href="programs.html#mysqld-safe" title="4.3.2 mysqld_safe — MySQL Server Startup Script"><span class="command"><strong>mysqld_safe</strong></span></a> (or another startup
          script). This should be similar to what is shown here, where
          <em class="replaceable"><code>password</code></em> is the MySQL
          <code class="literal">root</code> password for a given MySQL server
          instance:
        </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>mysqladmin -uroot -p<em class="replaceable"><code>password</code></em> shutdown</code></strong>
081208 20:19:56 mysqld_safe mysqld from pid file
/usr/local/mysql/var/tonfisk.pid ended
shell&gt; <strong class="userinput"><code>mysqld_safe --ndbcluster --ndb-connectstring=198.51.100.10 &amp;</code></strong>
081208 20:20:06 mysqld_safe Logging to '/usr/local/mysql/var/tonfisk.err'.
081208 20:20:06 mysqld_safe Starting mysqld daemon with databases
from /usr/local/mysql/var
</pre><p>
        Of course, the exact input and output depend on how and where
        MySQL is installed on the system, as well as which options you
        choose to start it (and whether or not some or all of these
        options are specified in a <code class="filename">my.cnf</code> file).
      </p><p><b>Step 5: Perform an initial start of the new data nodes. </b>
          From a system shell on each of the hosts for the new data
          nodes, start the data nodes as shown here, using the
          <a class="link" href="mysql-cluster.html#option_ndbd_initial"><code class="option">--initial</code></a> option:
        </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndbd -c 198.51.100.10 --initial</code></strong>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          Unlike the case with restarting the existing data nodes, you
          can start the new data nodes concurrently; you do not need to
          wait for one to finish starting before starting the other.
</p>
</div>
<p>
        <span class="emphasis"><em>Wait until both of the new data nodes have started
        before proceeding with the next step</em></span>. Once the new
        data nodes have started, you can see in the output of the
        management client <a class="link" href="mysql-cluster.html#ndbclient-show"><code class="literal">SHOW</code></a>
        command that they do not yet belong to any node group (as
        indicated with bold type here):
      </p><pre data-lang="ndbmgm" class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>SHOW</code></strong>
Connected to Management Server at: 198.51.100.10:1186
Cluster Configuration
---------------------
[ndbd(NDB)]     2 node(s)
id=1    @198.51.100.1  (8.0.17-ndb-8.0.17, Nodegroup: 0, *)
id=2    @198.51.100.2  (8.0.17-ndb-8.0.17, Nodegroup: 0)
id=3    @198.51.100.3  (8.0.17-ndb-8.0.17, <span class="bold"><strong>no nodegroup</strong></span>)
id=4    @198.51.100.4  (8.0.17-ndb-8.0.17, <span class="bold"><strong>no nodegroup</strong></span>)

[ndb_mgmd(MGM)] 1 node(s)
id=10   @198.51.100.10  (8.0.17-ndb-8.0.17)

[mysqld(API)]   2 node(s)
id=20   @198.51.100.20  (8.0.17-ndb-8.0.17)
id=21   @198.51.100.21  (8.0.17-ndb-8.0.17)
</pre><p><b>Step 6: Create a new node group. </b>
          You can do this by issuing a <a class="link" href="mysql-cluster.html#ndbclient-create-nodegroup"><code class="literal">CREATE
          NODEGROUP</code></a> command in the cluster management client.
          This command takes as its argument a comma-separated list of
          the node IDs of the data nodes to be included in the new node
          group, as shown here:
        </p><pre data-lang="ndbmgm" class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>CREATE NODEGROUP 3,4</code></strong>
Nodegroup 1 created
</pre><p>
        By issuing <a class="link" href="mysql-cluster.html#ndbclient-show"><code class="literal">SHOW</code></a> again, you
        can verify that data nodes 3 and 4 have joined the new node
        group (again indicated in bold type):
      </p><pre data-lang="ndbmgm" class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>SHOW</code></strong>
Connected to Management Server at: 198.51.100.10:1186
Cluster Configuration
---------------------
[ndbd(NDB)]     2 node(s)
id=1    @198.51.100.1  (8.0.17-ndb-8.0.17, Nodegroup: 0, *)
id=2    @198.51.100.2  (8.0.17-ndb-8.0.17, Nodegroup: 0)
id=3    @198.51.100.3  (8.0.17-ndb-8.0.17, <span class="bold"><strong>Nodegroup: 1</strong></span>)
id=4    @198.51.100.4  (8.0.17-ndb-8.0.17, <span class="bold"><strong>Nodegroup: 1</strong></span>)

[ndb_mgmd(MGM)] 1 node(s)
id=10   @198.51.100.10  (8.0.17-ndb-8.0.17)

[mysqld(API)]   2 node(s)
id=20   @198.51.100.20  (8.0.17-ndb-8.0.17)
id=21   @198.51.100.21  (8.0.17-ndb-8.0.17)
</pre><p><b>Step 7: Redistribute cluster data. </b>
          When a node group is created, existing data and indexes are
          not automatically distributed to the new node group's
          data nodes, as you can see by issuing the appropriate
          <a class="link" href="mysql-cluster.html#ndbclient-report"><code class="literal">REPORT</code></a> command in the
          management client:
        </p><pre data-lang="ndbmgm" class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>ALL REPORT MEMORY</code></strong>

Node 1: Data usage is 5%(177 32K pages of total 3200)
Node 1: Index usage is 0%(108 8K pages of total 12832)
Node 2: Data usage is 5%(177 32K pages of total 3200)
Node 2: Index usage is 0%(108 8K pages of total 12832)
<span class="bold"><strong>Node 3: Data usage is 0%(0 32K pages of total 3200)
Node 3: Index usage is 0%(0 8K pages of total 12832)
Node 4: Data usage is 0%(0 32K pages of total 3200)
Node 4: Index usage is 0%(0 8K pages of total 12832)</strong></span>
</pre><p>
        By using <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-desc" title="22.4.9 ndb_desc — Describe NDB Tables"><span class="command"><strong>ndb_desc</strong></span></a> with the
        <code class="option">-p</code> option, which causes the output to include
        partitioning information, you can see that the table still uses
        only 2 partitions (in the <code class="literal">Per partition info</code>
        section of the output, shown here in bold text):
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_desc -c 198.51.100.10 -d n ips -p</code></strong>
-- ips --
Version: 1
Fragment type: 9
K Value: 6
Min load factor: 78
Max load factor: 80
Temporary table: no
Number of attributes: 6
Number of primary keys: 1
Length of frm data: 340
Row Checksum: 1
Row GCI: 1
SingleUserMode: 0
ForceVarPart: 1
FragmentCount: 2
TableStatus: Retrieved
-- Attributes --
id Bigint PRIMARY KEY DISTRIBUTION KEY AT=FIXED ST=MEMORY AUTO_INCR
country_code Char(2;latin1_swedish_ci) NOT NULL AT=FIXED ST=MEMORY
type Char(4;latin1_swedish_ci) NOT NULL AT=FIXED ST=MEMORY
ip_address Varchar(15;latin1_swedish_ci) NOT NULL AT=SHORT_VAR ST=MEMORY
addresses Bigunsigned NULL AT=FIXED ST=MEMORY
date Bigunsigned NULL AT=FIXED ST=MEMORY

-- Indexes --
PRIMARY KEY(id) - UniqueHashIndex
PRIMARY(id) - OrderedIndex

<span class="bold"><strong>-- Per partition info --
Partition   Row count   Commit count  Frag fixed memory   Frag varsized memory
0           26086       26086         1572864             557056
1           26329       26329         1605632             557056</strong></span>

NDBT_ProgramExit: 0 - OK
</pre><p>
        You can cause the data to be redistributed among all of the data
        nodes by performing, for each <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>
        table, an <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER
        TABLE ... ALGORITHM=INPLACE, REORGANIZE PARTITION</code></a>
        statement in the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
          <code class="literal">ALTER TABLE ... ALGORITHM=INPLACE, REORGANIZE
          PARTITION</code> does not work on tables that were created
          with the <code class="literal">MAX_ROWS</code> option. Instead, use
          <code class="literal">ALTER TABLE ... ALGORITHM=INPLACE,
          MAX_ROWS=...</code> to reorganize such tables.
        </p><p>
          Keep in mind that using <code class="literal">MAX_ROWS</code> to set the
          number of partitions per table is deprecated, and you should
          use <code class="literal">PARTITION_BALANCE</code> instead; see
          <a class="xref" href="sql-syntax.html#create-table-ndb-table-comment-options" title="13.1.20.11 Setting NDB_TABLE Options">Section 13.1.20.11, “Setting NDB_TABLE Options”</a>, for
          more information.
</p>
</div>
<p>
        After issuing the statement <code class="literal">ALTER TABLE ips
        ALGORITHM=INPLACE, REORGANIZE PARTITION</code>, you can see
        using <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-desc" title="22.4.9 ndb_desc — Describe NDB Tables"><span class="command"><strong>ndb_desc</strong></span></a> that the data for this table
        is now stored using 4 partitions, as shown here (with the
        relevant portions of the output in bold type):
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_desc -c 198.51.100.10 -d n ips -p</code></strong>
-- ips --
Version: 16777217
Fragment type: 9
K Value: 6
Min load factor: 78
Max load factor: 80
Temporary table: no
Number of attributes: 6
Number of primary keys: 1
Length of frm data: 341
Row Checksum: 1
Row GCI: 1
SingleUserMode: 0
ForceVarPart: 1
FragmentCount: 4
TableStatus: Retrieved
-- Attributes --
id Bigint PRIMARY KEY DISTRIBUTION KEY AT=FIXED ST=MEMORY AUTO_INCR
country_code Char(2;latin1_swedish_ci) NOT NULL AT=FIXED ST=MEMORY
type Char(4;latin1_swedish_ci) NOT NULL AT=FIXED ST=MEMORY
ip_address Varchar(15;latin1_swedish_ci) NOT NULL AT=SHORT_VAR ST=MEMORY
addresses Bigunsigned NULL AT=FIXED ST=MEMORY
date Bigunsigned NULL AT=FIXED ST=MEMORY

-- Indexes --
PRIMARY KEY(id) - UniqueHashIndex
PRIMARY(id) - OrderedIndex

<span class="bold"><strong>-- Per partition info --
Partition   Row count   Commit count  Frag fixed memory   Frag varsized memory
0           12981       52296         1572864             557056
1           13236       52515         1605632             557056
2           13105       13105         819200              294912
3           13093       13093         819200              294912</strong></span>

NDBT_ProgramExit: 0 - OK
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          Normally, <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER
          TABLE <em class="replaceable"><code>table_name</code></em>
          [ALGORITHM=INPLACE,] REORGANIZE PARTITION</code></a> is used
          with a list of partition identifiers and a set of partition
          definitions to create a new partitioning scheme for a table
          that has already been explicitly partitioned. Its use here to
          redistribute data onto a new NDB Cluster node group is an
          exception in this regard; when used in this way, no other
          keywords or identifiers follow <code class="literal">REORGANIZE
          PARTITION</code>.
        </p><p>
          For more information, see <a class="xref" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax">Section 13.1.9, “ALTER TABLE Syntax”</a>.
</p>
</div>
<p>
        In addition, for each table, the
        <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER
        TABLE</code></a> statement should be followed by an
        <a class="link" href="sql-syntax.html#optimize-table" title="13.7.3.4 OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> to reclaim wasted
        space. You can obtain a list of all
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> tables using the
        following query against the
        <a class="link" href="information-schema.html#tables-table" title="25.30 The INFORMATION_SCHEMA TABLES Table"><code class="literal">INFORMATION_SCHEMA.TABLES</code></a> table:
      </p><pre data-lang="sql" class="programlisting">
SELECT TABLE_SCHEMA, TABLE_NAME
    FROM INFORMATION_SCHEMA.TABLES
    WHERE ENGINE = 'NDBCLUSTER';
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          The <code class="literal">INFORMATION_SCHEMA.TABLES.ENGINE</code> value
          for an NDB Cluster table is always
          <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a>, regardless of whether
          the <code class="literal">CREATE TABLE</code> statement used to create
          the table (or <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>
          statement used to convert an existing table from a different
          storage engine) used <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> or
          <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> in its
          <code class="literal">ENGINE</code> option.
</p>
</div>
<p>
        You can see after performing these statements in the output of
        <a class="link" href="mysql-cluster.html#ndbclient-report"><code class="literal">ALL REPORT MEMORY</code></a> that the
        data and indexes are now redistributed between all cluster data
        nodes, as shown here:
      </p><pre data-lang="ndbmgm" class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>ALL REPORT MEMORY</code></strong>

Node 1: Data usage is 5%(176 32K pages of total 3200)
Node 1: Index usage is 0%(76 8K pages of total 12832)
Node 2: Data usage is 5%(176 32K pages of total 3200)
Node 2: Index usage is 0%(76 8K pages of total 12832)
Node 3: Data usage is 2%(80 32K pages of total 3200)
Node 3: Index usage is 0%(51 8K pages of total 12832)
Node 4: Data usage is 2%(80 32K pages of total 3200)
Node 4: Index usage is 0%(50 8K pages of total 12832)
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          Since only one DDL operation on
          <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> tables can be executed
          at a time, you must wait for each
          <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE ...
          REORGANIZE PARTITION</code></a> statement to finish before
          issuing the next one.
</p>
</div>
<p>
        It is not necessary to issue
        <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE ...
        REORGANIZE PARTITION</code></a> statements for
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> tables created
        <span class="emphasis"><em>after</em></span> the new data nodes have been added;
        data added to such tables is distributed among all data nodes
        automatically. However, in
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> tables that existed
        <span class="emphasis"><em>prior to</em></span> the addition of the new nodes,
        neither existing nor new data is distributed using the new nodes
        until these tables have been reorganized using
        <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE ...
        REORGANIZE PARTITION</code></a>.
      </p><p><b>Alternative procedure, without rolling restart. </b>
          It is possible to avoid the need for a rolling restart by
          configuring the extra data nodes, but not starting them, when
          first starting the cluster. We assume, as before, that you
          wish to start with two data nodes—nodes 1 and 2—in
          one node group and later to expand the cluster to four data
          nodes, by adding a second node group consisting of nodes 3 and
          4:
        </p><pre data-lang="ini" class="programlisting">
[ndbd default]
DataMemory = 100M
IndexMemory = 100M
NoOfReplicas = 2
DataDir = /usr/local/mysql/var/mysql-cluster

[ndbd]
Id = 1
HostName = 198.51.100.1

[ndbd]
Id = 2
HostName = 198.51.100.2

[ndbd]
Id = 3
HostName = 198.51.100.3
Nodegroup = 65536 

[ndbd]
Id = 4
HostName = 198.51.100.4
Nodegroup = 65536 

[mgm]
HostName = 198.51.100.10
Id = 10

[api]
Id=20
HostName = 198.51.100.20

[api]
Id=21
HostName = 198.51.100.21
</pre><p>
        The data nodes to be brought online at a later time (nodes 3 and
        4) can be configured with
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-nodegroup"><code class="literal">NodeGroup = 65536</code></a>, in
        which case nodes 1 and 2 can each be started as shown here:
      </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndbd -c 198.51.100.10 --initial</code></strong>
</pre><p>
        The data nodes configured with
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-nodegroup"><code class="literal">NodeGroup = 65536</code></a> are
        treated by the management server as though you had started nodes
        1 and 2 using <a class="link" href="mysql-cluster.html#option_ndbd_nowait-nodes"><code class="option">--nowait-nodes=3,4</code></a>
        after waiting for a period of time determined by the setting for
        the
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-startnonodegrouptimeout"><code class="literal">StartNoNodeGroupTimeout</code></a>
        data node configuration parameter. By default, this is 15
        seconds (15000 milliseconds).
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-startnonodegrouptimeout"><code class="literal">StartNoNodegroupTimeout</code></a>
          must be the same for all data nodes in the cluster; for this
          reason, you should always set it in the <code class="literal">[ndbd
          default]</code> section of the
          <code class="filename">config.ini</code> file, rather than for
          individual data nodes.
</p>
</div>
<p>
        When you are ready to add the second node group, you need only
        perform the following additional steps:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Start data nodes 3 and 4, invoking the data node process
            once for each new node:
          </p><pre data-lang="terminal" class="programlisting">
shell&gt; <strong class="userinput"><code>ndbd -c 198.51.100.10 --initial</code></strong>
</pre></li><li class="listitem"><p>
            Issue the appropriate <a class="link" href="mysql-cluster.html#ndbclient-create-nodegroup"><code class="literal">CREATE
            NODEGROUP</code></a> command in the management client:
          </p><pre data-lang="ndbmgm" class="programlisting">
ndb_mgm&gt; <strong class="userinput"><code>CREATE NODEGROUP 3,4</code></strong>
</pre></li><li class="listitem"><p>
            In the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client, issue
            <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE ...
            REORGANIZE PARTITION</code></a> and
            <a class="link" href="sql-syntax.html#optimize-table" title="13.7.3.4 OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> statements for
            each existing <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> table.
            (As noted elsewhere in this section, existing NDB Cluster
            tables cannot use the new nodes for data distribution until
            this has been done.)
</p></li></ol>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-privilege-distribution"></a>22.5.16 Distributed MySQL Privileges (Not Supported)</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091576393456"></a><a class="indexterm" name="idm140091576392416"></a><p>
      NDB Cluster 8.0 no longer supports distribution of MySQL users and
      privileges across all SQL nodes in an NDB Cluster as implemented
      in previous releases. For information about the impact of this
      change on upgrades to NDB 8.0 from a previous release, see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-upgrade-downgrade" title="22.2.8 Upgrading and Downgrading NDB Cluster">Section 22.2.8, “Upgrading and Downgrading NDB Cluster”</a>.
    </p><p>
      For information on distributed privileges in NDB 7.6 and earlier,
      see
      <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-privilege-distribution.html" target="_top">Distributed MySQL Privileges for NDB Cluster</a>,
      in <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster.html" target="_top">MySQL NDB Cluster 7.5 and NDB Cluster 7.6</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-ndb-api-statistics"></a>22.5.17 NDB API Statistics Counters and Variables</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091576386480"></a><a class="indexterm" name="idm140091576384992"></a><a class="indexterm" name="idm140091576383952"></a><p>
      A number of types of statistical counters relating to actions
      performed by or affecting <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb.html" target="_top"><code class="literal">Ndb</code></a>
      objects are available. Such actions include starting and closing
      (or aborting) transactions; primary key and unique key operations;
      table, range, and pruned scans; threads blocked while waiting for
      the completion of various operations; and data and events sent and
      received by <code class="literal">NDBCLUSTER</code>. The counters are
      incremented inside the NDB kernel whenever NDB API calls are made
      or data is sent to or received by the data nodes.
      <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> exposes these counters as system status
      variables; their values can be read in the output of
      <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW STATUS</code></a>, or by querying the
      <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/status-table.html" target="_top"><code class="literal">INFORMATION_SCHEMA.SESSION_STATUS</code></a>
      or
      <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/status-table.html" target="_top"><code class="literal">INFORMATION_SCHEMA.GLOBAL_STATUS</code></a>
      table. By comparing the values before and after statements
      operating on <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables, you can
      observe the corresponding actions taken on the API level, and thus
      the cost of performing the statement.
    </p><p>
      You can list all of these status variables using the following
      <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW STATUS</code></a> statement:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'ndb_api%';</code></strong>
+--------------------------------------------+----------+
| Variable_name                              | Value    |
+--------------------------------------------+----------+
| Ndb_api_wait_exec_complete_count_session   | 0        |
| Ndb_api_wait_scan_result_count_session     | 0        |
| Ndb_api_wait_meta_request_count_session    | 0        |
| Ndb_api_wait_nanos_count_session           | 0        |
| Ndb_api_bytes_sent_count_session           | 0        |
| Ndb_api_bytes_received_count_session       | 0        |
| Ndb_api_trans_start_count_session          | 0        |
| Ndb_api_trans_commit_count_session         | 0        |
| Ndb_api_trans_abort_count_session          | 0        |
| Ndb_api_trans_close_count_session          | 0        |
| Ndb_api_pk_op_count_session                | 0        |
| Ndb_api_uk_op_count_session                | 0        |
| Ndb_api_table_scan_count_session           | 0        |
| Ndb_api_range_scan_count_session           | 0        |
| Ndb_api_pruned_scan_count_session          | 0        |
| Ndb_api_scan_batch_count_session           | 0        |
| Ndb_api_read_row_count_session             | 0        |
| Ndb_api_trans_local_read_row_count_session | 0        |
| Ndb_api_event_data_count_injector          | 0        |
| Ndb_api_event_nondata_count_injector       | 0        |
| Ndb_api_event_bytes_count_injector         | 0        |
| Ndb_api_wait_exec_complete_count_slave     | 0        |
| Ndb_api_wait_scan_result_count_slave       | 0        |
| Ndb_api_wait_meta_request_count_slave      | 0        |
| Ndb_api_wait_nanos_count_slave             | 0        |
| Ndb_api_bytes_sent_count_slave             | 0        |
| Ndb_api_bytes_received_count_slave         | 0        |
| Ndb_api_trans_start_count_slave            | 0        |
| Ndb_api_trans_commit_count_slave           | 0        |
| Ndb_api_trans_abort_count_slave            | 0        |
| Ndb_api_trans_close_count_slave            | 0        |
| Ndb_api_pk_op_count_slave                  | 0        |
| Ndb_api_uk_op_count_slave                  | 0        |
| Ndb_api_table_scan_count_slave             | 0        |
| Ndb_api_range_scan_count_slave             | 0        |
| Ndb_api_pruned_scan_count_slave            | 0        |
| Ndb_api_scan_batch_count_slave             | 0        |
| Ndb_api_read_row_count_slave               | 0        |
| Ndb_api_trans_local_read_row_count_slave   | 0        |
| Ndb_api_wait_exec_complete_count           | 2        |
| Ndb_api_wait_scan_result_count             | 3        |
| Ndb_api_wait_meta_request_count            | 27       |
| Ndb_api_wait_nanos_count                   | 45612023 |
| Ndb_api_bytes_sent_count                   | 992      |
| Ndb_api_bytes_received_count               | 9640     |
| Ndb_api_trans_start_count                  | 2        |
| Ndb_api_trans_commit_count                 | 1        |
| Ndb_api_trans_abort_count                  | 0        |
| Ndb_api_trans_close_count                  | 2        |
| Ndb_api_pk_op_count                        | 1        |
| Ndb_api_uk_op_count                        | 0        |
| Ndb_api_table_scan_count                   | 1        |
| Ndb_api_range_scan_count                   | 0        |
| Ndb_api_pruned_scan_count                  | 0        |
| Ndb_api_scan_batch_count                   | 0        |
| Ndb_api_read_row_count                     | 1        |
| Ndb_api_trans_local_read_row_count         | 1        |
| Ndb_api_event_data_count                   | 0        |
| Ndb_api_event_nondata_count                | 0        |
| Ndb_api_event_bytes_count                  | 0        |
+--------------------------------------------+----------+
60 rows in set (0.02 sec)
</pre><p>
      These status variables are also available from the
      <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/status-table.html" target="_top"><code class="literal">SESSION_STATUS</code></a> and
      <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/status-table.html" target="_top"><code class="literal">GLOBAL_STATUS</code></a>
      tables of the <code class="literal">INFORMATION_SCHEMA</code> database, as
      shown here:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT * FROM INFORMATION_SCHEMA.SESSION_STATUS </code></strong>
    -&gt;   <strong class="userinput"><code>WHERE VARIABLE_NAME LIKE 'ndb_api%';</code></strong>
+--------------------------------------------+----------------+
| VARIABLE_NAME                              | VARIABLE_VALUE |
+--------------------------------------------+----------------+
| NDB_API_WAIT_EXEC_COMPLETE_COUNT_SESSION   | 2              |
| NDB_API_WAIT_SCAN_RESULT_COUNT_SESSION     | 0              |
| NDB_API_WAIT_META_REQUEST_COUNT_SESSION    | 1              |
| NDB_API_WAIT_NANOS_COUNT_SESSION           | 8144375        |
| NDB_API_BYTES_SENT_COUNT_SESSION           | 68             |
| NDB_API_BYTES_RECEIVED_COUNT_SESSION       | 84             |
| NDB_API_TRANS_START_COUNT_SESSION          | 1              |
| NDB_API_TRANS_COMMIT_COUNT_SESSION         | 1              |
| NDB_API_TRANS_ABORT_COUNT_SESSION          | 0              |
| NDB_API_TRANS_CLOSE_COUNT_SESSION          | 1              |
| NDB_API_PK_OP_COUNT_SESSION                | 1              |
| NDB_API_UK_OP_COUNT_SESSION                | 0              |
| NDB_API_TABLE_SCAN_COUNT_SESSION           | 0              |
| NDB_API_RANGE_SCAN_COUNT_SESSION           | 0              |
| NDB_API_PRUNED_SCAN_COUNT_SESSION          | 0              |
| NDB_API_SCAN_BATCH_COUNT_SESSION           | 0              |
| NDB_API_READ_ROW_COUNT_SESSION             | 1              |
| NDB_API_TRANS_LOCAL_READ_ROW_COUNT_SESSION | 1              |
| NDB_API_EVENT_DATA_COUNT_INJECTOR          | 0              |
| NDB_API_EVENT_NONDATA_COUNT_INJECTOR       | 0              |
| NDB_API_EVENT_BYTES_COUNT_INJECTOR         | 0              |
| NDB_API_WAIT_EXEC_COMPLETE_COUNT_SLAVE     | 0              |
| NDB_API_WAIT_SCAN_RESULT_COUNT_SLAVE       | 0              |
| NDB_API_WAIT_META_REQUEST_COUNT_SLAVE      | 0              |
| NDB_API_WAIT_NANOS_COUNT_SLAVE             | 0              |
| NDB_API_BYTES_SENT_COUNT_SLAVE             | 0              |
| NDB_API_BYTES_RECEIVED_COUNT_SLAVE         | 0              |
| NDB_API_TRANS_START_COUNT_SLAVE            | 0              |
| NDB_API_TRANS_COMMIT_COUNT_SLAVE           | 0              |
| NDB_API_TRANS_ABORT_COUNT_SLAVE            | 0              |
| NDB_API_TRANS_CLOSE_COUNT_SLAVE            | 0              |
| NDB_API_PK_OP_COUNT_SLAVE                  | 0              |
| NDB_API_UK_OP_COUNT_SLAVE                  | 0              |
| NDB_API_TABLE_SCAN_COUNT_SLAVE             | 0              |
| NDB_API_RANGE_SCAN_COUNT_SLAVE             | 0              |
| NDB_API_PRUNED_SCAN_COUNT_SLAVE            | 0              |
| NDB_API_SCAN_BATCH_COUNT_SLAVE             | 0              |
| NDB_API_READ_ROW_COUNT_SLAVE               | 0              |
| NDB_API_TRANS_LOCAL_READ_ROW_COUNT_SLAVE   | 0              |
| NDB_API_WAIT_EXEC_COMPLETE_COUNT           | 4              |
| NDB_API_WAIT_SCAN_RESULT_COUNT             | 3              |
| NDB_API_WAIT_META_REQUEST_COUNT            | 28             |
| NDB_API_WAIT_NANOS_COUNT                   | 53756398       |
| NDB_API_BYTES_SENT_COUNT                   | 1060           |
| NDB_API_BYTES_RECEIVED_COUNT               | 9724           |
| NDB_API_TRANS_START_COUNT                  | 3              |
| NDB_API_TRANS_COMMIT_COUNT                 | 2              |
| NDB_API_TRANS_ABORT_COUNT                  | 0              |
| NDB_API_TRANS_CLOSE_COUNT                  | 3              |
| NDB_API_PK_OP_COUNT                        | 2              |
| NDB_API_UK_OP_COUNT                        | 0              |
| NDB_API_TABLE_SCAN_COUNT                   | 1              |
| NDB_API_RANGE_SCAN_COUNT                   | 0              |
| NDB_API_PRUNED_SCAN_COUNT                  | 0              |
| NDB_API_SCAN_BATCH_COUNT                   | 0              |
| NDB_API_READ_ROW_COUNT                     | 2              |
| NDB_API_TRANS_LOCAL_READ_ROW_COUNT         | 2              |
| NDB_API_EVENT_DATA_COUNT                   | 0              |
| NDB_API_EVENT_NONDATA_COUNT                | 0              |
| NDB_API_EVENT_BYTES_COUNT                  | 0              |
+--------------------------------------------+----------------+
60 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM INFORMATION_SCHEMA.GLOBAL_STATUS</code></strong>
    -&gt;     <strong class="userinput"><code>WHERE VARIABLE_NAME LIKE 'ndb_api%';</code></strong>
+--------------------------------------------+----------------+
| VARIABLE_NAME                              | VARIABLE_VALUE |
+--------------------------------------------+----------------+
| NDB_API_WAIT_EXEC_COMPLETE_COUNT_SESSION   | 2              |
| NDB_API_WAIT_SCAN_RESULT_COUNT_SESSION     | 0              |
| NDB_API_WAIT_META_REQUEST_COUNT_SESSION    | 1              |
| NDB_API_WAIT_NANOS_COUNT_SESSION           | 8144375        |
| NDB_API_BYTES_SENT_COUNT_SESSION           | 68             |
| NDB_API_BYTES_RECEIVED_COUNT_SESSION       | 84             |
| NDB_API_TRANS_START_COUNT_SESSION          | 1              |
| NDB_API_TRANS_COMMIT_COUNT_SESSION         | 1              |
| NDB_API_TRANS_ABORT_COUNT_SESSION          | 0              |
| NDB_API_TRANS_CLOSE_COUNT_SESSION          | 1              |
| NDB_API_PK_OP_COUNT_SESSION                | 1              |
| NDB_API_UK_OP_COUNT_SESSION                | 0              |
| NDB_API_TABLE_SCAN_COUNT_SESSION           | 0              |
| NDB_API_RANGE_SCAN_COUNT_SESSION           | 0              |
| NDB_API_PRUNED_SCAN_COUNT_SESSION          | 0              |
| NDB_API_SCAN_BATCH_COUNT_SESSION           | 0              |
| NDB_API_READ_ROW_COUNT_SESSION             | 1              |
| NDB_API_TRANS_LOCAL_READ_ROW_COUNT_SESSION | 1              |
| NDB_API_EVENT_DATA_COUNT_INJECTOR          | 0              |
| NDB_API_EVENT_NONDATA_COUNT_INJECTOR       | 0              |
| NDB_API_EVENT_BYTES_COUNT_INJECTOR         | 0              |
| NDB_API_WAIT_EXEC_COMPLETE_COUNT_SLAVE     | 0              |
| NDB_API_WAIT_SCAN_RESULT_COUNT_SLAVE       | 0              |
| NDB_API_WAIT_META_REQUEST_COUNT_SLAVE      | 0              |
| NDB_API_WAIT_NANOS_COUNT_SLAVE             | 0              |
| NDB_API_BYTES_SENT_COUNT_SLAVE             | 0              |
| NDB_API_BYTES_RECEIVED_COUNT_SLAVE         | 0              |
| NDB_API_TRANS_START_COUNT_SLAVE            | 0              |
| NDB_API_TRANS_COMMIT_COUNT_SLAVE           | 0              |
| NDB_API_TRANS_ABORT_COUNT_SLAVE            | 0              |
| NDB_API_TRANS_CLOSE_COUNT_SLAVE            | 0              |
| NDB_API_PK_OP_COUNT_SLAVE                  | 0              |
| NDB_API_UK_OP_COUNT_SLAVE                  | 0              |
| NDB_API_TABLE_SCAN_COUNT_SLAVE             | 0              |
| NDB_API_RANGE_SCAN_COUNT_SLAVE             | 0              |
| NDB_API_PRUNED_SCAN_COUNT_SLAVE            | 0              |
| NDB_API_SCAN_BATCH_COUNT_SLAVE             | 0              |
| NDB_API_READ_ROW_COUNT_SLAVE               | 0              |
| NDB_API_TRANS_LOCAL_READ_ROW_COUNT_SLAVE   | 0              |
| NDB_API_WAIT_EXEC_COMPLETE_COUNT           | 4              |
| NDB_API_WAIT_SCAN_RESULT_COUNT             | 3              |
| NDB_API_WAIT_META_REQUEST_COUNT            | 28             |
| NDB_API_WAIT_NANOS_COUNT                   | 53756398       |
| NDB_API_BYTES_SENT_COUNT                   | 1060           |
| NDB_API_BYTES_RECEIVED_COUNT               | 9724           |
| NDB_API_TRANS_START_COUNT                  | 3              |
| NDB_API_TRANS_COMMIT_COUNT                 | 2              |
| NDB_API_TRANS_ABORT_COUNT                  | 0              |
| NDB_API_TRANS_CLOSE_COUNT                  | 3              |
| NDB_API_PK_OP_COUNT                        | 2              |
| NDB_API_UK_OP_COUNT                        | 0              |
| NDB_API_TABLE_SCAN_COUNT                   | 1              |
| NDB_API_RANGE_SCAN_COUNT                   | 0              |
| NDB_API_PRUNED_SCAN_COUNT                  | 0              |
| NDB_API_SCAN_BATCH_COUNT                   | 0              |
| NDB_API_READ_ROW_COUNT                     | 2              |
| NDB_API_TRANS_LOCAL_READ_ROW_COUNT         | 2              |
| NDB_API_EVENT_DATA_COUNT                   | 0              |
| NDB_API_EVENT_NONDATA_COUNT                | 0              |
| NDB_API_EVENT_BYTES_COUNT                  | 0              |
+--------------------------------------------+----------------+
60 rows in set (0.00 sec)
</pre><a class="indexterm" name="idm140091576339024"></a><a class="indexterm" name="idm140091576337520"></a><p>
      Each <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb.html" target="_top"><code class="literal">Ndb</code></a> object has its own
      counters. NDB API applications can read the values of the counters
      for use in optimization or monitoring. For multithreaded clients
      which use more than one <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb.html" target="_top"><code class="literal">Ndb</code></a>
      object concurrently, it is also possible to obtain a summed view
      of counters from all <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb.html" target="_top"><code class="literal">Ndb</code></a> objects
      belonging to a given
      <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb-cluster-connection.html" target="_top"><code class="literal">Ndb_cluster_connection</code></a>.
    </p><p>
      Four sets of these counters are exposed. One set applies to the
      current session only; the other 3 are global. <span class="emphasis"><em>This is in
      spite of the fact that their values can be obtained as either
      session or global status variables in the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>
      client</em></span>. This means that specifying the
      <code class="literal">SESSION</code> or <code class="literal">GLOBAL</code> keyword
      with <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW STATUS</code></a> has no effect on
      the values reported for NDB API statistics status variables, and
      the value for each of these variables is the same whether the
      value is obtained from the equivalent column of the
      <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/status-table.html" target="_top"><code class="literal">SESSION_STATUS</code></a> or
      the <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/status-table.html" target="_top"><code class="literal">GLOBAL_STATUS</code></a>
      table.
</p><a class="indexterm" name="idm140091576323232"></a><a class="indexterm" name="idm140091576321728"></a>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <span class="emphasis"><em>Session counters (session specific)</em></span>
        </p><p>
          Session counters relate to the
          <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb.html" target="_top"><code class="literal">Ndb</code></a> objects in use by (only)
          the current session. Use of such objects by other MySQL
          clients does not influence these counts.
        </p><p>
          In order to minimize confusion with standard MySQL session
          variables, we refer to the variables that correspond to these
          NDB API session counters as <span class="quote">“<span class="quote"><code class="literal">_session</code>
          variables</span>”</span>, with a leading underscore.
        </p></li><li class="listitem"><p>
          <span class="emphasis"><em>Slave counters (global)</em></span>
        </p><p>
          This set of counters relates to the
          <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb.html" target="_top"><code class="literal">Ndb</code></a> objects used by the
          replication slave SQL thread, if any. If this
          <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> does not act as a replication slave,
          or does not use <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables, then
          all of these counts are 0.
        </p><p>
          We refer to the related status variables as
          <span class="quote">“<span class="quote"><code class="literal">_slave</code> variables</span>”</span> (with a
          leading underscore).
        </p></li><li class="listitem"><p>
          <span class="emphasis"><em>Injector counters (global)</em></span>
        </p><p>
          Injector counters relate to the
          <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb.html" target="_top"><code class="literal">Ndb</code></a> object used to listen to
          cluster events by the binary log injector thread. Even when
          not writing a binary log, <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> processes
          attached to an NDB Cluster continue to listen for some events,
          such as schema changes.
        </p><p>
          We refer to the status variables that correspond to NDB API
          injector counters as <span class="quote">“<span class="quote"><code class="literal">_injector</code>
          variables</span>”</span> (with a leading underscore).
        </p></li><li class="listitem"><p>
          <span class="emphasis"><em>Server (Global) counters (global)</em></span>
        </p><p>
          This set of counters relates to all
          <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb.html" target="_top"><code class="literal">Ndb</code></a> objects currently used by
          this <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>. This includes all MySQL client
          applications, the slave SQL thread (if any), the binlog
          injector, and the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> utility
          thread.
        </p><p>
          We refer to the status variables that correspond to these
          counters as <span class="quote">“<span class="quote">global variables</span>”</span> or
          <span class="quote">“<span class="quote"><a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>-level variables</span>”</span>.
</p></li></ul>
</div>
<p>
      You can obtain values for a particular set of variables by
      additionally filtering for the substring
      <code class="literal">session</code>, <code class="literal">slave</code>, or
      <code class="literal">injector</code> in the variable name (along with the
      common prefix <code class="literal">Ndb_api</code>). For
      <code class="literal">_session</code> variables, this can be done as shown
      here:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'ndb_api%session';</code></strong>
+--------------------------------------------+---------+
| Variable_name                              | Value   |
+--------------------------------------------+---------+
| Ndb_api_wait_exec_complete_count_session   | 2       |
| Ndb_api_wait_scan_result_count_session     | 0       |
| Ndb_api_wait_meta_request_count_session    | 1       |
| Ndb_api_wait_nanos_count_session           | 8144375 |
| Ndb_api_bytes_sent_count_session           | 68      |
| Ndb_api_bytes_received_count_session       | 84      |
| Ndb_api_trans_start_count_session          | 1       |
| Ndb_api_trans_commit_count_session         | 1       |
| Ndb_api_trans_abort_count_session          | 0       |
| Ndb_api_trans_close_count_session          | 1       |
| Ndb_api_pk_op_count_session                | 1       |
| Ndb_api_uk_op_count_session                | 0       |
| Ndb_api_table_scan_count_session           | 0       |
| Ndb_api_range_scan_count_session           | 0       |
| Ndb_api_pruned_scan_count_session          | 0       |
| Ndb_api_scan_batch_count_session           | 0       |
| Ndb_api_read_row_count_session             | 1       |
| Ndb_api_trans_local_read_row_count_session | 1       |
+--------------------------------------------+---------+
18 rows in set (0.50 sec)
</pre><p>
      To obtain a listing of the NDB API <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>-level
      status variables, filter for variable names beginning with
      <code class="literal">ndb_api</code> and ending in
      <code class="literal">_count</code>, like this:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT * FROM INFORMATION_SCHEMA.SESSION_STATUS</code></strong>
    -&gt;     <strong class="userinput"><code>WHERE VARIABLE_NAME LIKE 'ndb_api%count';</code></strong>
+------------------------------------+----------------+
| VARIABLE_NAME                      | VARIABLE_VALUE |
+------------------------------------+----------------+
| NDB_API_WAIT_EXEC_COMPLETE_COUNT   | 4              |
| NDB_API_WAIT_SCAN_RESULT_COUNT     | 3              |
| NDB_API_WAIT_META_REQUEST_COUNT    | 28             |
| NDB_API_WAIT_NANOS_COUNT           | 53756398       |
| NDB_API_BYTES_SENT_COUNT           | 1060           |
| NDB_API_BYTES_RECEIVED_COUNT       | 9724           |
| NDB_API_TRANS_START_COUNT          | 3              |
| NDB_API_TRANS_COMMIT_COUNT         | 2              |
| NDB_API_TRANS_ABORT_COUNT          | 0              |
| NDB_API_TRANS_CLOSE_COUNT          | 3              |
| NDB_API_PK_OP_COUNT                | 2              |
| NDB_API_UK_OP_COUNT                | 0              |
| NDB_API_TABLE_SCAN_COUNT           | 1              |
| NDB_API_RANGE_SCAN_COUNT           | 0              |
| NDB_API_PRUNED_SCAN_COUNT          | 0              |
| NDB_API_SCAN_BATCH_COUNT           | 0              |
| NDB_API_READ_ROW_COUNT             | 2              |
| NDB_API_TRANS_LOCAL_READ_ROW_COUNT | 2              |
| NDB_API_EVENT_DATA_COUNT           | 0              |
| NDB_API_EVENT_NONDATA_COUNT        | 0              |
| NDB_API_EVENT_BYTES_COUNT          | 0              |
+------------------------------------+----------------+
21 rows in set (0.09 sec)
</pre><p>
      Not all counters are reflected in all 4 sets of status variables.
      For the event counters <code class="literal">DataEventsRecvdCount</code>,
      <code class="literal">NondataEventsRecvdCount</code>, and
      <code class="literal">EventBytesRecvdCount</code>, only
      <code class="literal">_injector</code> and <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>-level
      NDB API status variables are available:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'ndb_api%event%';</code></strong>
+--------------------------------------+-------+
| Variable_name                        | Value |
+--------------------------------------+-------+
| Ndb_api_event_data_count_injector    | 0     |
| Ndb_api_event_nondata_count_injector | 0     |
| Ndb_api_event_bytes_count_injector   | 0     |
| Ndb_api_event_data_count             | 0     |
| Ndb_api_event_nondata_count          | 0     |
| Ndb_api_event_bytes_count            | 0     |
+--------------------------------------+-------+
6 rows in set (0.00 sec)
</pre><p>
      <code class="literal">_injector</code> status variables are not implemented
      for any other NDB API counters, as shown here:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'ndb_api%injector%';</code></strong>
+--------------------------------------+-------+
| Variable_name                        | Value |
+--------------------------------------+-------+
| Ndb_api_event_data_count_injector    | 0     |
| Ndb_api_event_nondata_count_injector | 0     |
| Ndb_api_event_bytes_count_injector   | 0     |
+--------------------------------------+-------+
3 rows in set (0.00 sec)
</pre><a class="indexterm" name="idm140091576269344"></a><a class="indexterm" name="idm140091576267824"></a><p>
      The names of the status variables can easily be associated with
      the names of the corresponding counters. Each NDB API statistics
      counter is listed in the following table with a description as
      well as the names of any MySQL server status variables
      corresponding to this counter.
</p>
<div class="table">
<a name="idm140091576265600"></a><p class="title"><b>Table 22.423 NDB API statistics counters</b></p>
<div class="table-contents">
<table><col width="30%"><col width="35%"><col width="40%"><thead><tr>
          <th scope="col">Counter Name</th>
          <th scope="col">Description</th>
<th scope="col">Status Variables (by statistic type):
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  Session
                </p></li><li class="listitem"><p>
                  Slave
                </p></li><li class="listitem"><p>
                  Injector
                </p></li><li class="listitem"><p>
                  Server
</p></li></ul>
</div>
</th>
        </tr></thead><tbody><tr>
          <td scope="row"><code class="literal">WaitExecCompleteCount</code></td>
          <td>Number of times thread has been blocked while waiting for execution of
            an operation to complete. Includes all
            <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndbtransaction-execute.html" target="_top"><code class="literal">execute()</code></a>
            calls as well as implicit executes for blob operations and
            auto-increment not visible to clients.</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_exec_complete_count_session"><code class="literal">Ndb_api_wait_exec_complete_count_session</code></a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_exec_complete_count_slave"><code class="literal">Ndb_api_wait_exec_complete_count_slave</code></a>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_exec_complete_count"><code class="literal">Ndb_api_wait_exec_complete_count</code></a>
</p></li></ul>
</div>
</td>
        </tr><tr>
          <td scope="row"><code class="literal">WaitScanResultCount</code></td>
          <td>Number of times thread has been blocked while waiting for a scan-based
            signal, such waiting for additional results, or for a scan
            to close.</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_scan_result_count_session"><code class="literal">Ndb_api_wait_scan_result_count_session</code></a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_scan_result_count_slave"><code class="literal">Ndb_api_wait_scan_result_count_slave</code></a>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_scan_result_count"><code class="literal">Ndb_api_wait_scan_result_count</code></a>
</p></li></ul>
</div>
</td>
        </tr><tr>
          <td scope="row"><code class="literal">WaitMetaRequestCount</code></td>
          <td>Number of times thread has been blocked waiting for a metadata-based
            signal; this can occur when waiting for a DDL operation or
            for an epoch to be started (or ended).</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_meta_request_count_session"><code class="literal">Ndb_api_wait_meta_request_count_session</code></a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_meta_request_count_slave"><code class="literal">Ndb_api_wait_meta_request_count_slave</code></a>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_meta_request_count"><code class="literal">Ndb_api_wait_meta_request_count</code></a>
</p></li></ul>
</div>
</td>
        </tr><tr>
          <td scope="row"><code class="literal">WaitNanosCount</code></td>
          <td>Total time (in nanoseconds) spent waiting for some type of signal from
            the data nodes.</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_nanos_count_session"><code class="literal">Ndb_api_wait_nanos_count_session</code></a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_nanos_count_slave"><code class="literal">Ndb_api_wait_nanos_count_slave</code></a>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_nanos_count"><code class="literal">Ndb_api_wait_nanos_count</code></a>
</p></li></ul>
</div>
</td>
        </tr><tr>
          <td scope="row"><code class="literal">BytesSentCount</code></td>
          <td>Amount of data (in bytes) sent to the data nodes</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_sent_count_session"><code class="literal">Ndb_api_bytes_sent_count_session</code></a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_sent_count_slave"><code class="literal">Ndb_api_bytes_sent_count_slave</code></a>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_sent_count"><code class="literal">Ndb_api_bytes_sent_count</code></a>
</p></li></ul>
</div>
</td>
        </tr><tr>
          <td scope="row"><code class="literal">BytesRecvdCount</code></td>
          <td>Amount of data (in bytes) received from the data nodes</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_received_count_session"><code class="literal">Ndb_api_bytes_received_count_session</code></a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_received_count_slave"><code class="literal">Ndb_api_bytes_received_count_slave</code></a>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_received_count"><code class="literal">Ndb_api_bytes_received_count</code></a>
</p></li></ul>
</div>
</td>
        </tr><tr>
          <td scope="row"><code class="literal">TransStartCount</code></td>
          <td>Number of transactions started.</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_start_count_session"><code class="literal">Ndb_api_trans_start_count_session</code></a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_start_count_slave"><code class="literal">Ndb_api_trans_start_count_slave</code></a>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_start_count"><code class="literal">Ndb_api_trans_start_count</code></a>
</p></li></ul>
</div>
</td>
        </tr><tr>
          <td scope="row"><code class="literal">TransCommitCount</code></td>
          <td>Number of transactions committed.</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_commit_count_session"><code class="literal">Ndb_api_trans_commit_count_session</code></a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_commit_count_slave"><code class="literal">Ndb_api_trans_commit_count_slave</code></a>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_commit_count"><code class="literal">Ndb_api_trans_commit_count</code></a>
</p></li></ul>
</div>
</td>
        </tr><tr>
          <td scope="row"><code class="literal">TransAbortCount</code></td>
          <td>Number of transactions aborted.</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_abort_count_session"><code class="literal">Ndb_api_trans_abort_count_session</code></a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_abort_count_slave"><code class="literal">Ndb_api_trans_abort_count_slave</code></a>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_abort_count"><code class="literal">Ndb_api_trans_abort_count</code></a>
</p></li></ul>
</div>
</td>
        </tr><tr>
          <td scope="row"><code class="literal">TransCloseCount</code></td>
          <td>Number of transactions aborted. (This value may be greater than the sum
            of <code class="literal">TransCommitCount</code> and
            <code class="literal">TransAbortCount</code>.)</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_close_count_session"><code class="literal">Ndb_api_trans_close_count_session</code></a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_close_count_slave"><code class="literal">Ndb_api_trans_close_count_slave</code></a>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_close_count"><code class="literal">Ndb_api_trans_close_count</code></a>
</p></li></ul>
</div>
</td>
        </tr><tr>
          <td scope="row"><code class="literal">PkOpCount</code></td>
          <td>Number of operations based on or using primary keys. This count includes
            blob-part table operations, implicit unlocking operations,
            and auto-increment operations, as well as primary key
            operations normally visible to MySQL clients.</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_pk_op_count_session"><code class="literal">Ndb_api_pk_op_count_session</code></a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_pk_op_count_slave"><code class="literal">Ndb_api_pk_op_count_slave</code></a>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_pk_op_count"><code class="literal">Ndb_api_pk_op_count</code></a>
</p></li></ul>
</div>
</td>
        </tr><tr>
          <td scope="row"><code class="literal">UkOpCount</code></td>
          <td>Number of operations based on or using unique keys.</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_uk_op_count_session"><code class="literal">Ndb_api_uk_op_count_session</code></a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_uk_op_count_slave"><code class="literal">Ndb_api_uk_op_count_slave</code></a>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_uk_op_count"><code class="literal">Ndb_api_uk_op_count</code></a>
</p></li></ul>
</div>
</td>
        </tr><tr>
          <td scope="row"><code class="literal">TableScanCount</code></td>
          <td>Number of table scans that have been started. This includes scans of
            internal tables.</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_table_scan_count_session"><code class="literal">Ndb_api_table_scan_count_session</code></a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_table_scan_count_slave"><code class="literal">Ndb_api_table_scan_count_slave</code></a>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_table_scan_count"><code class="literal">Ndb_api_table_scan_count</code></a>
</p></li></ul>
</div>
</td>
        </tr><tr>
          <td scope="row"><code class="literal">RangeScanCount</code></td>
          <td>Number of range scans that have been started.</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_range_scan_count_session"><code class="literal">Ndb_api_range_scan_count_session</code></a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_range_scan_count_slave"><code class="literal">Ndb_api_range_scan_count_slave</code></a>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_range_scan_count"><code class="literal">Ndb_api_range_scan_count</code></a>
</p></li></ul>
</div>
</td>
        </tr><tr>
          <td scope="row"><code class="literal">PrunedScanCount</code></td>
          <td>Number of scans that have been pruned to a single partition.</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_pruned_scan_count_session"><code class="literal">Ndb_api_pruned_scan_count_session</code></a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_pruned_scan_count_slave"><code class="literal">Ndb_api_pruned_scan_count_slave</code></a>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_pruned_scan_count"><code class="literal">Ndb_api_pruned_scan_count</code></a>
</p></li></ul>
</div>
</td>
        </tr><tr>
          <td scope="row"><code class="literal">ScanBatchCount</code></td>
          <td>Number of batches of rows received. (A
            <span class="firstterm">batch</span> in this context
            is a set of scan results from a single fragment.)</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_scan_batch_count_session"><code class="literal">Ndb_api_scan_batch_count_session</code></a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_scan_batch_count_slave"><code class="literal">Ndb_api_scan_batch_count_slave</code></a>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_scan_batch_count"><code class="literal">Ndb_api_scan_batch_count</code></a>
</p></li></ul>
</div>
</td>
        </tr><tr>
          <td scope="row"><code class="literal">ReadRowCount</code></td>
          <td>Total number of rows that have been read. Includes rows read using
            primary key, unique key, and scan operations.</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_read_row_count_session"><code class="literal">Ndb_api_read_row_count_session</code></a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_read_row_count_slave"><code class="literal">Ndb_api_read_row_count_slave</code></a>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_read_row_count"><code class="literal">Ndb_api_read_row_count</code></a>
</p></li></ul>
</div>
</td>
        </tr><tr>
          <td scope="row"><code class="literal">TransLocalReadRowCount</code></td>
          <td>Number of rows read from the data same node on which the transaction was
            being run.</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_local_read_row_count_session"><code class="literal">Ndb_api_trans_local_read_row_count_session</code></a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_local_read_row_count_slave"><code class="literal">Ndb_api_trans_local_read_row_count_slave</code></a>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_local_read_row_count"><code class="literal">Ndb_api_trans_local_read_row_count</code></a>
</p></li></ul>
</div>
</td>
        </tr><tr>
          <td scope="row"><code class="literal">DataEventsRecvdCount</code></td>
          <td>Number of row change events received.</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_event_data_count_injector"><code class="literal">Ndb_api_event_data_count_injector</code></a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_event_data_count"><code class="literal">Ndb_api_event_data_count</code></a>
</p></li></ul>
</div>
</td>
        </tr><tr>
          <td scope="row"><code class="literal">NondataEventsRecvdCount</code></td>
          <td>Number of events received, other than row change events.</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_event_nondata_count_injector"><code class="literal">Ndb_api_event_nondata_count_injector</code></a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_event_nondata_count"><code class="literal">Ndb_api_event_nondata_count</code></a>
</p></li></ul>
</div>
</td>
        </tr><tr>
          <td scope="row"><code class="literal">EventBytesRecvdCount</code></td>
          <td>Number of bytes of events received.</td>
<td>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_event_bytes_count_injector"><code class="literal">Ndb_api_event_bytes_count_injector</code></a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="mysql-cluster.html#statvar_Ndb_api_event_bytes_count"><code class="literal">Ndb_api_event_bytes_count</code></a>
</p></li></ul>
</div>
</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
      To see all counts of committed transactions—that is, all
      <code class="literal">TransCommitCount</code> counter status
      variables—you can filter the results of
      <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW STATUS</code></a> for the substring
      <code class="literal">trans_commit_count</code>, like this:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE '%trans_commit_count%';</code></strong>
+------------------------------------+-------+
| Variable_name                      | Value |
+------------------------------------+-------+
| Ndb_api_trans_commit_count_session | 1     |
| Ndb_api_trans_commit_count_slave   | 0     |
| Ndb_api_trans_commit_count         | 2     |
+------------------------------------+-------+
3 rows in set (0.00 sec)
</pre><p>
      From this you can determine that 1 transaction has been committed
      in the current <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client session, and 2
      transactions have been committed on this <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>
      since it was last restarted.
    </p><p>
      You can see how various NDB API counters are incremented by a
      given SQL statement by comparing the values of the corresponding
      <code class="literal">_session</code> status variables immediately before
      and after performing the statement. In this example, after getting
      the initial values from <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW
      STATUS</code></a>, we create in the <code class="literal">test</code>
      database an <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table, named
      <code class="literal">t</code>, that has a single column:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'ndb_api%session%';</code></strong>
+--------------------------------------------+--------+
| Variable_name                              | Value  |
+--------------------------------------------+--------+
| Ndb_api_wait_exec_complete_count_session   | 2      |
| Ndb_api_wait_scan_result_count_session     | 0      |
| Ndb_api_wait_meta_request_count_session    | 3      |
| Ndb_api_wait_nanos_count_session           | 820705 |
| Ndb_api_bytes_sent_count_session           | 132    |
| Ndb_api_bytes_received_count_session       | 372    |
| Ndb_api_trans_start_count_session          | 1      |
| Ndb_api_trans_commit_count_session         | 1      |
| Ndb_api_trans_abort_count_session          | 0      |
| Ndb_api_trans_close_count_session          | 1      |
| Ndb_api_pk_op_count_session                | 1      |
| Ndb_api_uk_op_count_session                | 0      |
| Ndb_api_table_scan_count_session           | 0      |
| Ndb_api_range_scan_count_session           | 0      |
| Ndb_api_pruned_scan_count_session          | 0      |
| Ndb_api_scan_batch_count_session           | 0      |
| Ndb_api_read_row_count_session             | 1      |
| Ndb_api_trans_local_read_row_count_session | 1      |
+--------------------------------------------+--------+
18 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>USE test;</code></strong>
Database changed
mysql&gt; <strong class="userinput"><code>CREATE TABLE t (c INT) ENGINE NDBCLUSTER;</code></strong>
Query OK, 0 rows affected (0.85 sec)
</pre><p>
      Now you can execute a new <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW
      STATUS</code></a> statement and observe the changes, as shown here
      (with the changed rows highlighted in the output):
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'ndb_api%session%';</code></strong>
+--------------------------------------------+-----------+
| Variable_name                              | Value     |
+--------------------------------------------+-----------+<span class="emphasis"><em>
| Ndb_api_wait_exec_complete_count_session   | 8         |</em></span>
| Ndb_api_wait_scan_result_count_session     | 0         |
<span class="emphasis"><em>| Ndb_api_wait_meta_request_count_session    | 17        |</em></span>
<span class="emphasis"><em>| Ndb_api_wait_nanos_count_session           | 706871709 |</em></span>
<span class="emphasis"><em>| Ndb_api_bytes_sent_count_session           | 2376      |</em></span>
<span class="emphasis"><em>| Ndb_api_bytes_received_count_session       | 3844      |</em></span>
<span class="emphasis"><em>| Ndb_api_trans_start_count_session          | 4         |</em></span>
<span class="emphasis"><em>| Ndb_api_trans_commit_count_session         | 4         |</em></span>
| Ndb_api_trans_abort_count_session          | 0         |
<span class="emphasis"><em>| Ndb_api_trans_close_count_session          | 4         |</em></span>
<span class="emphasis"><em>| Ndb_api_pk_op_count_session                | 6         |</em></span>
| Ndb_api_uk_op_count_session                | 0         |
| Ndb_api_table_scan_count_session           | 0         |
| Ndb_api_range_scan_count_session           | 0         |
| Ndb_api_pruned_scan_count_session          | 0         |
| Ndb_api_scan_batch_count_session           | 0         |
<span class="emphasis"><em>| Ndb_api_read_row_count_session             | 2         |</em></span>
| Ndb_api_trans_local_read_row_count_session | 1         |
+--------------------------------------------+-----------+
18 rows in set (0.00 sec)
</pre><p>
      Similarly, you can see the changes in the NDB API statistics
      counters caused by inserting a row into <code class="literal">t</code>:
      Insert the row, then run the same <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW
      STATUS</code></a> statement used in the previous example, as shown
      here:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>INSERT INTO t VALUES (100);</code></strong>
Query OK, 1 row affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'ndb_api%session%';</code></strong>
+--------------------------------------------+-----------+
| Variable_name                              | Value     |
+--------------------------------------------+-----------+
<span class="emphasis"><em>| Ndb_api_wait_exec_complete_count_session   | 11        |</em></span>
<span class="emphasis"><em>| Ndb_api_wait_scan_result_count_session     | 6         |</em></span>
<span class="emphasis"><em>| Ndb_api_wait_meta_request_count_session    | 20        |</em></span>
<span class="emphasis"><em>| Ndb_api_wait_nanos_count_session           | 707370418 |</em></span>
<span class="emphasis"><em>| Ndb_api_bytes_sent_count_session           | 2724      |</em></span>
<span class="emphasis"><em>| Ndb_api_bytes_received_count_session       | 4116      |</em></span>
<span class="emphasis"><em>| Ndb_api_trans_start_count_session          | 7         |</em></span>
<span class="emphasis"><em>| Ndb_api_trans_commit_count_session         | 6         |</em></span>
| Ndb_api_trans_abort_count_session          | 0         |
<span class="emphasis"><em>| Ndb_api_trans_close_count_session          | 7         |</em></span>
<span class="emphasis"><em>| Ndb_api_pk_op_count_session                | 8         |</em></span>
| Ndb_api_uk_op_count_session                | 0         |
<span class="emphasis"><em>| Ndb_api_table_scan_count_session           | 1         |</em></span>
| Ndb_api_range_scan_count_session           | 0         |
| Ndb_api_pruned_scan_count_session          | 0         |
| Ndb_api_scan_batch_count_session           | 0         |
<span class="emphasis"><em>| Ndb_api_read_row_count_session             | 3         |</em></span>
<span class="emphasis"><em>| Ndb_api_trans_local_read_row_count_session | 2         |</em></span>
+--------------------------------------------+-----------+
18 rows in set (0.00 sec)
</pre><p>
      We can make a number of observations from these results:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Although we created <code class="literal">t</code> with no explicit
          primary key, 5 primary key operations were performed in doing
          so (the difference in the <span class="quote">“<span class="quote">before</span>”</span> and
          <span class="quote">“<span class="quote">after</span>”</span> values of
          <a class="link" href="mysql-cluster.html#statvar_Ndb_api_pk_op_count_session"><code class="literal">Ndb_api_pk_op_count_session</code></a>,
          or 6 minus 1). This reflects the creation of the hidden
          primary key that is a feature of all tables using the
          <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine.
        </p></li><li class="listitem"><p>
          By comparing successive values for
          <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_nanos_count_session"><code class="literal">Ndb_api_wait_nanos_count_session</code></a>,
          we can see that the NDB API operations implementing the
          <a class="link" href="sql-syntax.html#create-table" title="13.1.20 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statement waited
          much longer (706871709 - 820705 = 706051004 nanoseconds, or
          approximately 0.7 second) for responses from the data nodes
          than those executed by the
          <a class="link" href="sql-syntax.html#insert" title="13.2.6 INSERT Syntax"><code class="literal">INSERT</code></a> (707370418 - 706871709 =
          498709 ns or roughly .0005 second). The execution times
          reported for these statements in the <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>
          client correlate roughly with these figures.
        </p><p>
          On platforms without sufficient (nanosecond) time resolution,
          small changes in the value of the
          <code class="literal">WaitNanosCount</code> NDB API counter due to SQL
          statements that execute very quickly may not always be visible
          in the values of
          <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_nanos_count_session"><code class="literal">Ndb_api_wait_nanos_count_session</code></a>,
          <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_nanos_count_slave"><code class="literal">Ndb_api_wait_nanos_count_slave</code></a>,
          or <a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_nanos_count"><code class="literal">Ndb_api_wait_nanos_count</code></a>.
        </p></li><li class="listitem"><p>
          The <a class="link" href="sql-syntax.html#insert" title="13.2.6 INSERT Syntax"><code class="literal">INSERT</code></a> statement
          incremented both the <code class="literal">ReadRowCount</code> and
          <code class="literal">TransLocalReadRowCount</code> NDB API statistics
          counters, as reflected by the increased values of
          <a class="link" href="mysql-cluster.html#statvar_Ndb_api_read_row_count_session"><code class="literal">Ndb_api_read_row_count_session</code></a>
          and
          <a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_local_read_row_count_session"><code class="literal">Ndb_api_trans_local_read_row_count_session</code></a>.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="mysql-cluster-replication"></a>22.6 NDB Cluster Replication</h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-abbreviations">22.6.1 NDB Cluster Replication: Abbreviations and Symbols</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-general">22.6.2 General Requirements for NDB Cluster Replication</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-issues">22.6.3 Known Issues in NDB Cluster Replication</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-schema">22.6.4 NDB Cluster Replication Schema and Tables</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-preparation">22.6.5 Preparing the NDB Cluster for Replication</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-starting">22.6.6 Starting NDB Cluster Replication (Single Replication Channel)</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-two-channels">22.6.7 Using Two Replication Channels for NDB Cluster Replication</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-failover">22.6.8 Implementing Failover with NDB Cluster Replication</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-backups">22.6.9 NDB Cluster Backups With NDB Cluster Replication</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-multi-master">22.6.10 NDB Cluster Replication: Multi-Master and Circular Replication</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution">22.6.11 NDB Cluster Replication Conflict Resolution</a></span></dt></dl>
</div>
<a class="indexterm" name="idm140091575961952"></a><a class="indexterm" name="idm140091575960048"></a><a class="indexterm" name="idm140091575958144"></a><a class="indexterm" name="idm140091575957072"></a><a class="indexterm" name="idm140091575955616"></a><p>
    NDB Cluster supports <span class="firstterm">asynchronous
    replication</span>, more usually referred to simply as
    <span class="quote">“<span class="quote">replication</span>”</span>. This section explains how to set up and
    manage a configuration in which one group of computers operating as
    an NDB Cluster replicates to a second computer or group of
    computers. We assume some familiarity on the part of the reader with
    standard MySQL replication as discussed elsewhere in this Manual.
    (See <a class="xref" href="replication.html" title="Chapter 17 Replication">Chapter 17, <i>Replication</i></a>).
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
      NDB Cluster does not support replication using GTIDs;
      semisynchronous replication is also not supported by the
      <code class="literal">NDB</code> storage engine.
</p>
</div>
<p>
    Normal (non-clustered) replication involves a <span class="quote">“<span class="quote">master</span>”</span>
    server and a <span class="quote">“<span class="quote">slave</span>”</span> server, the master being the
    source of the operations and data to be replicated and the slave
    being the recipient of these. In NDB Cluster, replication is
    conceptually very similar but can be more complex in practice, as it
    may be extended to cover a number of different configurations
    including replicating between two complete clusters. Although an NDB
    Cluster itself depends on the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>
    storage engine for clustering functionality, it is not necessary to
    use <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> as the storage engine for the
    slave's copies of the replicated tables (see
    <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-to-non-ndb" title="Replication from NDB to other storage engines">Replication from NDB to other storage engines</a>).
    However, for maximum availability, it is possible (and preferable)
    to replicate from one NDB Cluster to another, and it is this
    scenario that we discuss, as shown in the following figure:
</p>
<div class="figure">
<a name="fig-mysql-cluster-cluster-replication"></a><p class="title"><b>Figure 22.30 NDB Cluster-to-Cluster Replication Layout</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/cluster-replication-overview.png" width="640" height="360" alt="Much of the content is described in the surrounding text. It visualizes how a master MySQL server is replicated as a slave. The slave differs in that it shows an I/O thread pointing to a Relay Binlog, and that Relay Binlog pointing to an SQL thread. In addition, while the binlog points to and from the NdbCluster Engine on the master, on the slave diagram it points directly to the slave's MySQL server.">
</div>

</div>

</div>
<br class="figure-break"><p>
    In this scenario, the replication process is one in which successive
    states of a master cluster are logged and saved to a slave cluster.
    This process is accomplished by a special thread known as the NDB
    binary log injector thread, which runs on each MySQL server and
    produces a binary log (<code class="literal">binlog</code>). This thread
    ensures that all changes in the cluster producing the binary
    log—and not just those changes that are effected through the
    MySQL Server—are inserted into the binary log with the correct
    serialization order. We refer to the MySQL replication master and
    replication slave servers as replication servers or replication
    nodes, and the data flow or line of communication between them as a
    <span class="firstterm">replication channel</span>.
  </p><p>
    For information about performing point-in-time recovery with NDB
    Cluster and NDB Cluster Replication, see
    <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-pitr" title="22.6.9.2 Point-In-Time Recovery Using NDB Cluster Replication">Section 22.6.9.2, “Point-In-Time Recovery Using NDB Cluster Replication”</a>.
  </p><a class="indexterm" name="idm140091575932992"></a><a class="indexterm" name="idm140091575931536"></a><p><b>NDB API _slave status variables. </b>
      NDB API counters can provide enhanced monitoring capabilities on
      NDB Cluster replication slaves. These are implemented as NDB
      statistics <code class="literal">_slave</code> status variables, as seen in
      the output of <a class="link" href="sql-syntax.html#show-status" title="13.7.6.35 SHOW STATUS Syntax"><code class="literal">SHOW STATUS</code></a>, or in
      the results of queries against the
      <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/status-table.html" target="_top"><code class="literal">SESSION_STATUS</code></a> or
      <a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/status-table.html" target="_top"><code class="literal">GLOBAL_STATUS</code></a>
      table in a <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client session connected to a
      MySQL Server that is acting as a slave in NDB Cluster Replication.
      By comparing the values of these status variables before and after
      the execution of statements affecting replicated
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables, you can observe the
      corresponding actions taken on the NDB API level by the slave,
      which can be useful when monitoring or troubleshooting NDB Cluster
      Replication. <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="22.5.17 NDB API Statistics Counters and Variables">Section 22.5.17, “NDB API Statistics Counters and Variables”</a>,
      provides additional information.
    </p><p><b>Replication from NDB to non-NDB tables. </b>
      It is possible to replicate <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>
      tables from an NDB Cluster acting as the master to tables using
      other MySQL storage engines such as
      <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> or
      <a class="link" href="storage-engines.html#myisam-storage-engine" title="16.2 The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> on a slave
      <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>. This is subject to a number of
      conditions; see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-to-non-ndb" title="Replication from NDB to other storage engines">Replication from NDB to other storage engines</a>, and
      <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-to-nontransactional" title="Replication from NDB to a nontransactional storage engine">Replication from NDB to a nontransactional storage engine</a>,
      for more information.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-replication-abbreviations"></a>22.6.1 NDB Cluster Replication: Abbreviations and Symbols</h3>
</div>
</div>
</div>
<a class="indexterm" name="idm140091575911568"></a><p>
      Throughout this section, we use the following abbreviations or
      symbols for referring to the master and slave clusters, and to
      processes and commands run on the clusters or cluster nodes:
</p>
<div class="table">
<a name="idm140091575909472"></a><p class="title"><b>Table 22.424 Abbreviations used throughout this section referring to master and slave clusters, and to processes and
commands run on nodes</b></p>
<div class="table-contents">
<table><col width="25%"><col width="75%"><thead><tr>
          <th scope="col">Symbol or Abbreviation</th>
          <th scope="col">Description (Refers to...)</th>
        </tr></thead><tbody><tr>
          <td scope="row"><em class="replaceable"><code>M</code></em></td>
          <td>The cluster serving as the (primary) replication master</td>
        </tr><tr>
          <td scope="row"><em class="replaceable"><code>S</code></em></td>
          <td>The cluster acting as the (primary) replication slave</td>
        </tr><tr>
          <td scope="row"><code class="literal">shell<em class="replaceable"><code>M</code></em>&gt;</code></td>
          <td>Shell command to be issued on the master cluster</td>
        </tr><tr>
          <td scope="row"><code class="literal">mysql<em class="replaceable"><code>M</code></em>&gt;</code></td>
          <td>MySQL client command issued on a single MySQL server running as an SQL
            node on the master cluster</td>
        </tr><tr>
          <td scope="row"><code class="literal">mysql<em class="replaceable"><code>M*</code></em>&gt;</code></td>
          <td>MySQL client command to be issued on all SQL nodes participating in the
            replication master cluster</td>
        </tr><tr>
          <td scope="row"><code class="literal">shell<em class="replaceable"><code>S</code></em>&gt;</code></td>
          <td>Shell command to be issued on the slave cluster</td>
        </tr><tr>
          <td scope="row"><code class="literal">mysql<em class="replaceable"><code>S</code></em>&gt;</code></td>
          <td>MySQL client command issued on a single MySQL server running as an SQL
            node on the slave cluster</td>
        </tr><tr>
          <td scope="row"><code class="literal">mysql<em class="replaceable"><code>S*</code></em>&gt;</code></td>
          <td>MySQL client command to be issued on all SQL nodes participating in the
            replication slave cluster</td>
        </tr><tr>
          <td scope="row"><em class="replaceable"><code>C</code></em></td>
          <td>Primary replication channel</td>
        </tr><tr>
          <td scope="row"><em class="replaceable"><code>C'</code></em></td>
          <td>Secondary replication channel</td>
        </tr><tr>
          <td scope="row"><em class="replaceable"><code>M'</code></em></td>
          <td>Secondary replication master</td>
        </tr><tr>
          <td scope="row"><em class="replaceable"><code>S'</code></em></td>
          <td>Secondary replication slave</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-replication-general"></a>22.6.2 General Requirements for NDB Cluster Replication</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091575867168"></a><a class="indexterm" name="idm140091575865680"></a><p>
      A replication channel requires two MySQL servers acting as
      replication servers (one each for the master and slave). For
      example, this means that in the case of a replication setup with
      two replication channels (to provide an extra channel for
      redundancy), there will be a total of four replication nodes, two
      per cluster.
    </p><p>
      Replication of an NDB Cluster as described in this section and
      those following is dependent on row-based replication. This means
      that the replication master MySQL server must be running with
      <a class="link" href="replication.html#sysvar_binlog_format"><code class="option">--binlog-format=ROW</code></a> or
      <a class="link" href="replication.html#sysvar_binlog_format"><code class="option">--binlog-format=MIXED</code></a>, as described
      in <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-starting" title="22.6.6 Starting NDB Cluster Replication (Single Replication Channel)">Section 22.6.6, “Starting NDB Cluster Replication (Single Replication Channel)”</a>. For
      general information about row-based replication, see
      <a class="xref" href="replication.html#replication-formats" title="17.2.1 Replication Formats">Section 17.2.1, “Replication Formats”</a>.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
        If you attempt to use NDB Cluster Replication with
        <a class="link" href="replication.html#sysvar_binlog_format"><code class="option">--binlog-format=STATEMENT</code></a>,
        replication fails to work properly because the
        <code class="literal">ndb_binlog_index</code> table on the master and the
        <code class="literal">epoch</code> column of the
        <code class="literal">ndb_apply_status</code> table on the slave are not
        updated (see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-schema" title="22.6.4 NDB Cluster Replication Schema and Tables">Section 22.6.4, “NDB Cluster Replication Schema and Tables”</a>). Instead,
        only updates on the MySQL server acting as the replication
        master propagate to the slave, and no updates from any other SQL
        nodes on the master cluster are replicated.
      </p><p>
        The default value for the
        <a class="link" href="replication.html#sysvar_binlog_format"><code class="option">--binlog-format</code></a> option in NDB 8.0
        is <code class="literal">MIXED</code>.
</p>
</div>
<p>
      Each MySQL server used for replication in either cluster must be
      uniquely identified among all the MySQL replication servers
      participating in either cluster (you cannot have replication
      servers on both the master and slave clusters sharing the same
      ID). This can be done by starting each SQL node using the
      <code class="option">--server-id=<em class="replaceable"><code>id</code></em></code> option,
      where <em class="replaceable"><code>id</code></em> is a unique integer. Although
      it is not strictly necessary, we will assume for purposes of this
      discussion that all NDB Cluster binaries are of the same release
      version.
    </p><p>
      It is generally true in MySQL Replication that both MySQL servers
      (<a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> processes) involved must be compatible
      with one another with respect to both the version of the
      replication protocol used and the SQL feature sets which they
      support (see <a class="xref" href="replication.html#replication-compatibility" title="17.4.2 Replication Compatibility Between MySQL Versions">Section 17.4.2, “Replication Compatibility Between MySQL Versions”</a>). It is
      due to such differences between the binaries in the NDB Cluster
      and MySQL Server 8.0 distributions that NDB Cluster
      Replication has the additional requirement that both
      <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> binaries come from an NDB Cluster
      distribution. The simplest and easiest way to assure that the
      <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> servers are compatible is to use the
      same NDB Cluster distribution for all master and slave
      <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> binaries.
    </p><p>
      We assume that the slave server or cluster is dedicated to
      replication of the master, and that no other data is being stored
      on it.
    </p><a class="indexterm" name="idm140091575843072"></a><a class="indexterm" name="idm140091575841568"></a><p>
      All <code class="literal">NDB</code> tables being replicated must be created
      using a MySQL server and client. Tables and other database objects
      created using the NDB API (with, for example,
      <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-dictionary-createtable.html" target="_top"><code class="literal">Dictionary::createTable()</code></a>) are
      not visible to a MySQL server and so are not replicated. Updates
      by NDB API applications to existing tables that were created using
      a MySQL server can be replicated.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        It is possible to replicate an NDB Cluster using statement-based
        replication. However, in this case, the following restrictions
        apply:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            All updates to data rows on the cluster acting as the master
            must be directed to a single MySQL server.
          </p></li><li class="listitem"><p>
            It is not possible to replicate a cluster using multiple
            simultaneous MySQL replication processes.
          </p></li><li class="listitem"><p>
            Only changes made at the SQL level are replicated.
</p></li></ul>
</div>
<p>
        These are in addition to the other limitations of
        statement-based replication as opposed to row-based replication;
        see <a class="xref" href="replication.html#replication-sbr-rbr" title="17.2.1.1 Advantages and Disadvantages of Statement-Based and Row-Based Replication">Section 17.2.1.1, “Advantages and Disadvantages of Statement-Based and Row-Based
        Replication”</a>, for more specific
        information concerning the differences between the two
        replication formats.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-replication-issues"></a>22.6.3 Known Issues in NDB Cluster Replication</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091575830832"></a><p>
      This section discusses known problems or issues when using
      replication with NDB Cluster 8.0.
    </p><p><b>Loss of master-slave connection. </b>
        <a class="indexterm" name="idm140091575827920"></a>

        A loss of connection can occur either between the replication
        master SQL node and the replication slave SQL node, or between
        the replication master SQL node and the data nodes in the master
        cluster. In the latter case, this can occur not only as a result
        of loss of physical connection (for example, a broken network
        cable), but due to the overflow of data node event buffers; if
        the SQL node is too slow to respond, it may be dropped by the
        cluster (this is controllable to some degree by adjusting the
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxbufferedepochs"><code class="literal">MaxBufferedEpochs</code></a> and
        <a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenepochs"><code class="literal">TimeBetweenEpochs</code></a>
        configuration parameters). If this occurs, <span class="emphasis"><em>it is
        entirely possible for new data to be inserted into the master
        cluster without being recorded in the replication master's
        binary log</em></span>. For this reason, to guarantee high
        availability, it is extremely important to maintain a backup
        replication channel, to monitor the primary channel, and to fail
        over to the secondary replication channel when necessary to keep
        the slave cluster synchronized with the master. NDB Cluster is
        not designed to perform such monitoring on its own; for this, an
        external application is required.
      </p><p>
      <a class="indexterm" name="idm140091575821696"></a>

      <a class="indexterm" name="idm140091575820208"></a>

      The replication master issues a <span class="quote">“<span class="quote">gap</span>”</span> event when
      connecting or reconnecting to the master cluster. (A gap event is
      a type of <span class="quote">“<span class="quote">incident event,</span>”</span> which indicates an
      incident that occurs that affects the contents of the database but
      that cannot easily be represented as a set of changes. Examples of
      incidents are server crashes, database resynchronization, (some)
      software updates, and (some) hardware changes.) When the slave
      encounters a gap in the replication log, it stops with an error
      message. This message is available in the output of
      <a class="link" href="sql-syntax.html#show-slave-status" title="13.7.6.34 SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE STATUS</code></a>, and indicates
      that the SQL thread has stopped due to an incident registered in
      the replication stream, and that manual intervention is required.
      See <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-failover" title="22.6.8 Implementing Failover with NDB Cluster Replication">Section 22.6.8, “Implementing Failover with NDB Cluster Replication”</a>, for more
      information about what to do in such circumstances.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
        Because NDB Cluster is not designed on its own to monitor
        replication status or provide failover, if high availability is
        a requirement for the slave server or cluster, then you must set
        up multiple replication lines, monitor the master
        <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> on the primary replication line, and
        be prepared fail over to a secondary line if and as necessary.
        This must be done manually, or possibly by means of a
        third-party application. For information about implementing this
        type of setup, see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-two-channels" title="22.6.7 Using Two Replication Channels for NDB Cluster Replication">Section 22.6.7, “Using Two Replication Channels for NDB Cluster Replication”</a>, and
        <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-failover" title="22.6.8 Implementing Failover with NDB Cluster Replication">Section 22.6.8, “Implementing Failover with NDB Cluster Replication”</a>.
      </p><p>
        However, if you are replicating from a standalone MySQL server
        to an NDB Cluster, one channel is usually sufficient.
</p>
</div>
<p><b>Circular replication. </b>
        <a class="indexterm" name="idm140091575809632"></a>

        <a class="indexterm" name="idm140091575808144"></a>

        <a class="indexterm" name="idm140091575806656"></a>

        NDB Cluster Replication supports circular replication, as shown
        in the next example. The replication setup involves three NDB
        Clusters numbered 1, 2, and 3, in which Cluster 1 acts as the
        replication master for Cluster 2, Cluster 2 acts as the master
        for Cluster 3, and Cluster 3 acts as the master for Cluster 1,
        thus completing the circle. Each NDB Cluster has two SQL nodes,
        with SQL nodes A and B belonging to Cluster 1, SQL nodes C and D
        belonging to Cluster 2, and SQL nodes E and F belonging to
        Cluster 3.
      </p><p>
      Circular replication using these clusters is supported as long as
      the following conditions are met:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          The SQL nodes on all masters and slaves are the same
        </p></li><li class="listitem"><p>
          All SQL nodes acting as replication masters and slaves are
          started using the
          <a class="link" href="replication.html#option_mysqld_log-slave-updates"><code class="option">--log-slave-updates</code></a> option
</p></li></ul>
</div>
<p>
      This type of circular replication setup is shown in the following
      diagram:
</p>
<div class="figure">
<a name="fig-mysql-cluster-circular-all-masters-slaves"></a><p class="title"><b>Figure 22.31 NDB Cluster Circular Replication With All Masters As Slaves</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/cluster-circular-replication-1.png" width="550" height="646" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"><p>
      In this scenario, SQL node A in Cluster 1 replicates to SQL node C
      in Cluster 2; SQL node C replicates to SQL node E in Cluster 3;
      SQL node E replicates to SQL node A. In other words, the
      replication line (indicated by the curved arrows in the diagram)
      directly connects all SQL nodes used as replication masters and
      slaves.
    </p><p>
      It should also be possible to set up circular replication in which
      not all master SQL nodes are also slaves, as shown here:
</p>
<div class="figure">
<a name="fig-mysql-cluster-circular-not-all-masters-slaves"></a><p class="title"><b>Figure 22.32 NDB Cluster Circular Replication Where Not All Masters Are Slaves</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/cluster-circular-replication-2.png" width="550" height="622" alt="Some content is described in the surrounding text. It shows three clusters, each with two nodes. Arrows connect nodes from different clusters to represent that now all masters are slaves.">
</div>

</div>

</div>
<br class="figure-break"><p>
      In this case, different SQL nodes in each cluster are used as
      replication masters and slaves. However, you must
      <span class="emphasis"><em>not</em></span> start any of the SQL nodes using
      <a class="link" href="replication.html#option_mysqld_log-slave-updates"><code class="option">--log-slave-updates</code></a>. This type of
      circular replication scheme for NDB Cluster, in which the line of
      replication (again indicated by the curved arrows in the diagram)
      is discontinuous, should be possible, but it should be noted that
      it has not yet been thoroughly tested and must therefore still be
      considered experimental.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        The <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine uses
        <span class="firstterm">idempotent execution mode</span>,
        which suppresses duplicate-key and other errors that otherwise
        break circular replication of NDB Cluster. This is equivalent to
        setting the global
        <a class="link" href="replication.html#sysvar_slave_exec_mode"><code class="literal">slave_exec_mode</code></a> system variable
        to <code class="literal">IDEMPOTENT</code>, although this is not necessary
        in NDB Cluster replication, since NDB Cluster sets this variable
        automatically and ignores any attempts to set it explicitly.
</p>
</div>
<p><b>NDB Cluster replication and primary keys. </b>
        <a class="indexterm" name="idm140091575776992"></a>

        In the event of a node failure, errors in replication of
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables without primary keys can
        still occur, due to the possibility of duplicate rows being
        inserted in such cases. For this reason, it is highly
        recommended that all <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables
        being replicated have primary keys.
      </p><p><b>NDB Cluster Replication and Unique Keys. </b>
        <a class="indexterm" name="idm140091575771584"></a>

        In older versions of NDB Cluster, operations that updated values
        of unique key columns of <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables
        could result in duplicate-key errors when replicated. This issue
        is solved for replication between
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables by deferring unique key
        checks until after all table row updates have been performed.
      </p><p>
      Deferring constraints in this way is currently supported only by
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>. Thus, updates of unique keys
      when replicating from <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> to a
      different storage engine such as
      <a class="link" href="storage-engines.html#myisam-storage-engine" title="16.2 The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> or
      <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> are still not supported.
    </p><p>
      The problem encountered when replicating without deferred checking
      of unique key updates can be illustrated using
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table such as
      <code class="literal">t</code>, is created and populated on the master (and
      replicated to a slave that does not support deferred unique key
      updates) as shown here:
    </p><pre data-lang="sql" class="programlisting">
CREATE TABLE t (
    p INT PRIMARY KEY,
    c INT,
    UNIQUE KEY u (c)
)   ENGINE NDB;

INSERT INTO t
    VALUES (1,1), (2,2), (3,3), (4,4), (5,5);
</pre><p>
      The following <a class="link" href="sql-syntax.html#update" title="13.2.12 UPDATE Syntax"><code class="literal">UPDATE</code></a> statement on
      <code class="literal">t</code> succeeded on the master, since the rows
      affected are processed in the order determined by the
      <code class="literal">ORDER BY</code> option, performed over the entire
      table:
    </p><pre data-lang="sql" class="programlisting">
UPDATE t SET c = c - 1 ORDER BY p;
</pre><p>
      However, the same statement failed with a duplicate key error or
      other constraint violation on the slave, because the ordering of
      the row updates was done for one partition at a time, rather than
      for the table as a whole.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        Every <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table is implicitly
        partitioned by key when it is created. See
        <a class="xref" href="partitioning.html#partitioning-key" title="23.2.5 KEY Partitioning">Section 23.2.5, “KEY Partitioning”</a>, for more information.
</p>
</div>
<p><b>GTIDs not supported. </b>
        Replication using global transaction IDs is not compatible with
        the <code class="literal">NDB</code> storage engine, and is not supported.
        Enabling GTIDs is likely to cause NDB Cluster Replication to
        fail.
      </p><p><b>Multithreaded slaves not supported. </b>
        NDB Cluster does not support multithreaded slaves, and setting
        related system variables such as
        <a class="link" href="replication.html#sysvar_slave_parallel_workers"><code class="literal">slave_parallel_workers</code></a>,
        <a class="link" href="replication.html#sysvar_slave_checkpoint_group"><code class="literal">slave_checkpoint_group</code></a>, and
        <a class="link" href="replication.html#sysvar_slave_checkpoint_group"><code class="literal">slave_checkpoint_group</code></a> (or the
        equivalent <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> startup options) has no
        effect.
      </p><p>
      This is because the slave may not be able to separate transactions
      occurring in one database from those in another if they are
      written within the same epoch. In addition, every transaction
      handled by the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine
      involves at least two databases—the target database and the
      <code class="literal">mysql</code> system database—due to the
      requirement for updating the
      <code class="literal">mysql.ndb_apply_status</code> table (see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-schema" title="22.6.4 NDB Cluster Replication Schema and Tables">Section 22.6.4, “NDB Cluster Replication Schema and Tables”</a>). This in turn
      breaks the requirement for multithreading that the transaction is
      specific to a given database.
    </p><p><b>Restarting with --initial. </b>
        <a class="indexterm" name="idm140091575736720"></a>

        Restarting the cluster with the
        <a class="link" href="mysql-cluster.html#option_ndbd_initial"><code class="option">--initial</code></a> option causes the
        sequence of GCI and epoch numbers to start over from
        <code class="literal">0</code>. (This is generally true of NDB Cluster and
        not limited to replication scenarios involving Cluster.) The
        MySQL servers involved in replication should in this case be
        restarted. After this, you should use the
        <a class="link" href="sql-syntax.html#reset-master" title="13.4.1.2 RESET MASTER Syntax"><code class="literal">RESET MASTER</code></a> and
        <a class="link" href="sql-syntax.html#reset-slave" title="13.4.2.4 RESET SLAVE Syntax"><code class="literal">RESET SLAVE</code></a> statements to clear
        the invalid <code class="literal">ndb_binlog_index</code> and
        <code class="literal">ndb_apply_status</code> tables, respectively.
      </p><p><a name="mysql-cluster-replication-ndb-to-non-ndb"></a><b>Replication from NDB to other storage engines. </b>
        It is possible to replicate an <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>
        table on the master to a table using a different storage engine
        on the slave, taking into account the restrictions listed here:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Multi-master and circular replication are not supported
          (tables on both the master and the slave must use the
          <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine for this to
          work).
        </p></li><li class="listitem"><p>
          Using a storage engine which does not perform binary logging
          for slave tables requires special handling.
        </p></li><li class="listitem"><p>
          Use of a nontransactional storage engine for slave tables also
          requires special handling.
        </p></li><li class="listitem"><p>
          The master <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> must be started with
          <a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-update-as-write"><code class="option">--ndb-log-update-as-write=0</code></a> or
          <code class="option">--ndb-log-update-as-write=OFF</code>.
</p></li></ul>
</div>
<p>
      The next few paragraphs provide additional information about each
      of the issues just described.
    </p><p><b>Multiple masters not supported when replicating NDB to other storage
        engines. </b>
        For replication from <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> to a
        different storage engine, the relationship between the two
        databases must be a simple master-slave one. This means that
        circular or master-master replication is not supported between
        NDB Cluster and other storage engines.
      </p><p>
      In addition, it is not possible to configure more than one
      replication channel when replicating between
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> and a different storage engine.
      (However, an NDB Cluster database <span class="emphasis"><em>can</em></span>
      simultaneously replicate to multiple slave NDB Cluster databases.)
      If the master uses <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables, it is
      still possible to have more than one MySQL Server maintain a
      binary log of all changes; however, for the slave to change
      masters (fail over), the new master-slave relationship must be
      explicitly defined on the slave.
    </p><p><b>Replicating NDB to a slave storage engine that does not perform binary
        logging. </b>
        <a class="indexterm" name="idm140091575710064"></a>

        If you attempt to replicate from an NDB Cluster to a slave that
        uses a storage engine that does not handle its own binary
        logging, the replication process aborts with the error
        <span class="errortext">Binary logging not possible ... Statement cannot be
        written atomically since more than one engine involved and at
        least one engine is self-logging</span> (Error
        <span class="errorcode">1595</span>). It is possible to work around this
        issue in one of the following ways:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Turn off binary logging on the slave. </b>
            This can be accomplished by setting
            <a class="link" href="replication.html#sysvar_sql_log_bin"><code class="literal">sql_log_bin = 0</code></a>.
          </p></li><li class="listitem"><p><b>Change the storage engine used for the mysql.ndb_apply_status table. </b>
            Causing this table to use an engine that does not handle its
            own binary logging can also eliminate the conflict. This can
            be done by issuing a statement such as
            <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE
            mysql.ndb_apply_status ENGINE=MyISAM</code></a> on the slave.
            It is safe to do this when using a
            non-<a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine on the
            slave, since you do not then need to worry about keeping
            multiple slave SQL nodes synchronized.
          </p></li><li class="listitem"><p><b>Filter out changes to the mysql.ndb_apply_status table on the slave. </b>
            This can be done by starting the slave SQL node with
            <a class="link" href="replication.html#option_mysqld_replicate-ignore-table"><code class="option">--replicate-ignore-table=mysql.ndb_apply_status</code></a>.
            If you need for other tables to be ignored by replication,
            you might wish to use an appropriate
            <a class="link" href="replication.html#option_mysqld_replicate-wild-ignore-table"><code class="option">--replicate-wild-ignore-table</code></a>
            option instead.
</p></li></ul>
</div>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Important
</div>
<p>
        You should <span class="emphasis"><em>not</em></span> disable replication or
        binary logging of <code class="literal">mysql.ndb_apply_status</code> or
        change the storage engine used for this table when replicating
        from one NDB Cluster to another. See
        <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-issues-filtering" title="Replication and binary log filtering rules with replication between NDB Clusters">Replication and binary log filtering rules with replication between NDB
        Clusters</a>,
        for details.
</p>
</div>
<p><a name="mysql-cluster-replication-ndb-to-nontransactional"></a><b>Replication from NDB to a nontransactional storage engine. </b>
        When replicating from <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> to a
        nontransactional storage engine such as
        <a class="link" href="storage-engines.html#myisam-storage-engine" title="16.2 The MyISAM Storage Engine"><code class="literal">MyISAM</code></a>, you may encounter
        unnecessary duplicate key errors when replicating
        <a class="link" href="sql-syntax.html#insert-on-duplicate" title="13.2.6.2 INSERT ... ON DUPLICATE KEY UPDATE Syntax"><code class="literal">INSERT ...
        ON DUPLICATE KEY UPDATE</code></a> statements. You can suppress
        these by using
        <a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-update-as-write"><code class="option">--ndb-log-update-as-write=0</code></a>,
        which forces updates to be logged as writes (rather than as
        updates).
      </p><p><a name="mysql-cluster-replication-issues-filtering"></a><b>Replication and binary log filtering rules with replication between NDB
        Clusters. </b>
        If you are using any of the options
        <code class="option">--replicate-do-*</code>,
        <code class="option">--replicate-ignore-*</code>,
        <a class="link" href="replication.html#option_mysqld_binlog-do-db"><code class="option">--binlog-do-db</code></a>, or
        <a class="link" href="replication.html#option_mysqld_binlog-ignore-db"><code class="option">--binlog-ignore-db</code></a> to filter
        databases or tables being replicated, care must be taken not to
        block replication or binary logging of the
        <code class="literal">mysql.ndb_apply_status</code>, which is required for
        replication between NDB Clusters to operate properly. In
        particular, you must keep in mind the following:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
          Using
          <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db=<em class="replaceable"><code>db_name</code></em></code></a>
          (and no other <code class="option">--replicate-do-*</code> or
          <code class="option">--replicate-ignore-*</code> options) means that
          <span class="emphasis"><em>only</em></span> tables in database
          <em class="replaceable"><code>db_name</code></em> are replicated. In this
          case, you should also use
          <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db=mysql</code></a>,
          <a class="link" href="replication.html#option_mysqld_binlog-do-db"><code class="option">--binlog-do-db=mysql</code></a>, or
          <a class="link" href="replication.html#option_mysqld_replicate-do-table"><code class="option">--replicate-do-table=mysql.ndb_apply_status</code></a>
          to ensure that <code class="literal">mysql.ndb_apply_status</code> is
          populated on slaves.
        </p><p>
          Using
          <a class="link" href="replication.html#option_mysqld_binlog-do-db"><code class="option">--binlog-do-db=<em class="replaceable"><code>db_name</code></em></code></a>
          (and no other <a class="link" href="replication.html#option_mysqld_binlog-do-db"><code class="option">--binlog-do-db</code></a>
          options) means that changes <span class="emphasis"><em>only</em></span> to
          tables in database <em class="replaceable"><code>db_name</code></em> are
          written to the binary log. In this case, you should also use
          <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db=mysql</code></a>,
          <a class="link" href="replication.html#option_mysqld_binlog-do-db"><code class="option">--binlog-do-db=mysql</code></a>, or
          <a class="link" href="replication.html#option_mysqld_replicate-do-table"><code class="option">--replicate-do-table=mysql.ndb_apply_status</code></a>
          to ensure that <code class="literal">mysql.ndb_apply_status</code> is
          populated on slaves.
        </p></li><li class="listitem"><p>
          Using
          <a class="link" href="replication.html#option_mysqld_replicate-ignore-db"><code class="option">--replicate-ignore-db=mysql</code></a>
          means that no tables in the <code class="literal">mysql</code> database
          are replicated. In this case, you should also use
          <a class="link" href="replication.html#option_mysqld_replicate-do-table"><code class="option">--replicate-do-table=mysql.ndb_apply_status</code></a>
          to ensure that <code class="literal">mysql.ndb_apply_status</code> is
          replicated.
        </p><p>
          Using <a class="link" href="replication.html#option_mysqld_binlog-ignore-db"><code class="option">--binlog-ignore-db=mysql</code></a>
          means that no changes to tables in the
          <code class="literal">mysql</code> database are written to the binary
          log. In this case, you should also use
          <a class="link" href="replication.html#option_mysqld_replicate-do-table"><code class="option">--replicate-do-table=mysql.ndb_apply_status</code></a>
          to ensure that <code class="literal">mysql.ndb_apply_status</code> is
          replicated.
</p></li></ol>
</div>
<p>
      You should also remember that each replication rule requires the
      following:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
          Its own <code class="option">--replicate-do-*</code> or
          <code class="option">--replicate-ignore-*</code> option, and that
          multiple rules cannot be expressed in a single replication
          filtering option. For information about these rules, see
          <a class="xref" href="replication.html#replication-options" title="17.1.6 Replication and Binary Logging Options and Variables">Section 17.1.6, “Replication and Binary Logging Options and Variables”</a>.
        </p></li><li class="listitem"><p>
          Its own <a class="link" href="replication.html#option_mysqld_binlog-do-db"><code class="option">--binlog-do-db</code></a> or
          <a class="link" href="replication.html#option_mysqld_binlog-ignore-db"><code class="option">--binlog-ignore-db</code></a> option, and
          that multiple rules cannot be expressed in a single binary log
          filtering option. For information about these rules, see
          <a class="xref" href="server-administration.html#binary-log" title="5.4.4 The Binary Log">Section 5.4.4, “The Binary Log”</a>.
</p></li></ol>
</div>
<p>
      If you are replicating an NDB Cluster to a slave that uses a
      storage engine other than <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>, the
      considerations just given previously may not apply, as discussed
      elsewhere in this section.
    </p><p><b>NDB Cluster Replication and IPv6. </b>
        Currently, the NDB API and MGM API do not support IPv6. However,
        MySQL Servers—including those acting as SQL nodes in an
        NDB Cluster —can use IPv6 to contact other MySQL Servers.
        This means that you can replicate between NDB Clusters using
        IPv6 to connect the master and slave SQL nodes as shown by the
        dotted arrow in the following diagram:
</p>
<div class="figure">
<a name="fig-mysql-cluster-replication-ipv6"></a><p class="title"><b>Figure 22.33 Replication Between SQL Nodes Connected Using IPv6</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/cluster-replication-ipv6.png" width="625" height="400" alt="Most content is described in the surrounding text. The dotted line representing a MySQL-to-MySQL IPv6 connection is between two nodes, one each from master and slave clusters. All connections within the cluster, such as ndbd-to-ndbd, node to ndb_mgmd, are connected with solid lines to indicate IPv4 connections only.">
</div>

</div>

</div>
<br class="figure-break"><p>
      However, all connections originating <span class="emphasis"><em>within</em></span>
      the NDB Cluster —represented in the preceding diagram by
      solid arrows—must use IPv4. In other words, all NDB Cluster
      data nodes, management servers, and management clients must be
      accessible from one another using IPv4. In addition, SQL nodes
      must use IPv4 to communicate with the cluster.
    </p><p>
      Since there is currently no support in the NDB and MGM APIs for
      IPv6, any applications written using these APIs must also make all
      connections using IPv4.
    </p><p><b>Attribute promotion and demotion. </b>
        NDB Cluster Replication includes support for attribute promotion
        and demotion. The implementation of the latter distinguishes
        between lossy and non-lossy type conversions, and their use on
        the slave can be controlled by setting the
        <a class="link" href="replication.html#sysvar_slave_type_conversions"><code class="literal">slave_type_conversions</code></a> global
        server system variable.
      </p><p>
      For more information about attribute promotion and demotion in NDB
      Cluster, see
      <a class="xref" href="replication.html#replication-features-attribute-promotion" title="Row-based replication: attribute promotion and demotion">Row-based replication: attribute promotion and demotion</a>.
    </p><p>
      <code class="literal">NDB</code>, unlike <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>
      or <a class="link" href="storage-engines.html#myisam-storage-engine" title="16.2 The MyISAM Storage Engine"><code class="literal">MyISAM</code></a>, does not write changes to
      virtual columns to the binary log; however, this has no
      detrimental effects on NDB Cluster Replication or replication
      between <code class="literal">NDB</code> and other storage engines. Changes
      to stored generated columns are logged.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-replication-schema"></a>22.6.4 NDB Cluster Replication Schema and Tables</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091575624784"></a><a class="indexterm" name="idm140091575623296"></a><a class="indexterm" name="idm140091575621840"></a><a class="indexterm" name="idm140091575620336"></a><a class="indexterm" name="idm140091575618832"></a><a class="indexterm" name="idm140091575617312"></a><a class="indexterm" name="idm140091575615808"></a><a class="indexterm" name="idm140091575614304"></a><a class="indexterm" name="idm140091575612816"></a><p>
      Replication in NDB Cluster makes use of a number of dedicated
      tables in the <code class="literal">mysql</code> database on each MySQL
      Server instance acting as an SQL node in both the cluster being
      replicated and the replication slave (whether the slave is a
      single server or a cluster). These tables are created during the
      MySQL installation process, and include a table for storing the
      binary log's indexing data. Since the
      <code class="literal">ndb_binlog_index</code> table is local to each MySQL
      server and does not participate in clustering, it uses the
      <code class="literal">InnoDB</code> storage engine. This means that it must
      be created separately on each <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>
      participating in the master cluster. (However, the binary log
      itself contains updates from all MySQL servers in the cluster to
      be replicated.) This table is defined as follows:
    </p><pre data-lang="sql" class="programlisting">
CREATE TABLE `ndb_binlog_index` (
    `Position` BIGINT(20) UNSIGNED NOT NULL,
    `File` VARCHAR(255) NOT NULL,
    `epoch` BIGINT(20) UNSIGNED NOT NULL,
    `inserts` INT(10) UNSIGNED NOT NULL,
    `updates` INT(10) UNSIGNED NOT NULL,
    `deletes` INT(10) UNSIGNED NOT NULL,
    `schemaops` INT(10) UNSIGNED NOT NULL,
    `orig_server_id` INT(10) UNSIGNED NOT NULL,
    `orig_epoch` BIGINT(20) UNSIGNED NOT NULL,
    `gci` INT(10) UNSIGNED NOT NULL,
    `next_position` bigint(20) unsigned NOT NULL,
    `next_file` varchar(255) NOT NULL,
    PRIMARY KEY (`epoch`,`orig_server_id`,`orig_epoch`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        If you are upgrading from an old release (prior to NDB 7.5.2),
        perform the MySQL upgrade procedure and ensure that the system
        tables are upgraded. (As of MySQL 8.0.16, start the server with
        the <code class="option">--upgrade=FORCE</code> option. Prior to MySQL
        8.0.16, invoke <a class="link" href="programs.html#mysql-upgrade" title="4.4.5 mysql_upgrade — Check and Upgrade MySQL Tables"><span class="command"><strong>mysql_upgrade</strong></span></a> with the
        <a class="link" href="programs.html#option_mysql_upgrade_force"><code class="option">--force</code></a> and
        <a class="link" href="programs.html#option_mysql_upgrade_upgrade-system-tables"><code class="option">--upgrade-system-tables</code></a>
        options after starting the server.) The system table upgrade
        causes an <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER
        TABLE ... ENGINE=INNODB</code></a> statement to be executed for
        this table. Use of the <code class="literal">MyISAM</code> storage engine
        for this table continues to be supported for backward
        compatibility.
      </p><p>
        <code class="literal">ndb_binlog_index</code> may require additional disk
        space after being converted to <code class="literal">InnoDB</code>. If
        this becomes an issue, you may be able to conserve space by
        using an <code class="literal">InnoDB</code> tablespace for this table,
        changing its <code class="literal">ROW_FORMAT</code> to
        <code class="literal">COMPRESSED</code>, or both. For more information,
        see <a class="xref" href="sql-syntax.html#create-tablespace" title="13.1.21 CREATE TABLESPACE Syntax">Section 13.1.21, “CREATE TABLESPACE Syntax”</a>, and
        <a class="xref" href="sql-syntax.html#create-table" title="13.1.20 CREATE TABLE Syntax">Section 13.1.20, “CREATE TABLE Syntax”</a>, as well as
        <a class="xref" href="innodb-storage-engine.html#innodb-tablespace" title="15.6.3 Tablespaces">Section 15.6.3, “Tablespaces”</a>.
</p>
</div>
<p>
      The size of this table is dependent on the number of epochs per
      binary log file and the number of binary log files. The number of
      epochs per binary log file normally depends on the amount of
      binary log generated per epoch and the size of the binary log
      file, with smaller epochs resulting in more epochs per file. You
      should be aware that empty epochs produce inserts to the
      <code class="filename">ndb_binlog_index</code> table, even when the
      <a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-empty-epochs"><code class="option">--ndb-log-empty-epochs</code></a> option is
      <code class="literal">OFF</code>, meaning that the number of entries per
      file depends on the length of time that the file is in use; that
      is,
    </p><pre data-lang="simple" class="programlisting">
[number of epochs per file] = [time spent per file] / <a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenepochs"><code class="literal">TimeBetweenEpochs</code></a>
</pre><p>
      A busy NDB Cluster writes to the binary log regularly and
      presumably rotates binary log files more quickly than a quiet one.
      This means that a <span class="quote">“<span class="quote">quiet</span>”</span> NDB Cluster with
      <a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-empty-epochs"><code class="option">--ndb-log-empty-epochs=ON</code></a> can
      actually have a much higher number of
      <code class="literal">ndb_binlog_index</code> rows per file than one with a
      great deal of activity.
    </p><p>
      When <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> is started with the
      <a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-orig"><code class="option">--ndb-log-orig</code></a> option, the
      <code class="literal">orig_server_id</code> and
      <code class="literal">orig_epoch</code> columns store, respectively, the ID
      of the server on which the event originated and the epoch in which
      the event took place on the originating server, which is useful in
      NDB Cluster replication setups employing multiple masters. The
      <a class="link" href="sql-syntax.html#select" title="13.2.10 SELECT Syntax"><code class="literal">SELECT</code></a> statement used to find the
      closest binary log position to the highest applied epoch on the
      slave in a multi-master setup (see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-multi-master" title="22.6.10 NDB Cluster Replication: Multi-Master and Circular Replication">Section 22.6.10, “NDB Cluster Replication: Multi-Master and Circular Replication”</a>) employs
      these two columns, which are not indexed. This can lead to
      performance issues when trying to fail over, since the query must
      perform a table scan, especially when the master has been running
      with <a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-empty-epochs"><code class="option">--ndb-log-empty-epochs=ON</code></a>. You
      can improve multi-master failover times by adding an index to
      these columns, as shown here:
    </p><pre data-lang="sql" class="programlisting">
ALTER TABLE mysql.ndb_binlog_index
    ADD INDEX orig_lookup USING BTREE (orig_server_id, orig_epoch);
</pre><p>
      Adding this index provides no benefit when replicating from a
      single master to a single slave, since the query used to get the
      binary log position in such cases makes no use of
      <code class="literal">orig_server_id</code> or
      <code class="literal">orig_epoch</code>.
    </p><p>
      See <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-failover" title="22.6.8 Implementing Failover with NDB Cluster Replication">Section 22.6.8, “Implementing Failover with NDB Cluster Replication”</a>, for more
      information about using the <code class="literal">next_position</code> and
      <code class="literal">next_file</code> columns.
    </p><p>
      The following figure shows the relationship of the NDB Cluster
      replication master server, its binary log injector thread, and the
      <code class="literal">mysql.ndb_binlog_index</code> table.
</p>
<div class="figure">
<a name="fig-mysql-cluster-replication-master-cluster"></a><p class="title"><b>Figure 22.34 The Replication Master Cluster</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/cluster-replication-binlog-injector.png" width="640" height="481" alt="Most concepts are described in the surrounding text. This complex image has three main areas. The top area is divided into three sections: MySQL Server (mysqld), NdbCluster table handler, and mutex. A connection thread connects these three areas, and receiver and injector threads connect NdbCluster table handler and mutex. The bottom area lists four data nodes (ndbd). They all have events arrows pointing to the receiver thread, and the receiver thread also points to the connection and injector threads. One node sends and receives to the mutex area. The injector thread points to a binlog and also the third area in this image: the ndb_binlog_index table, a table described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"><a class="indexterm" name="idm140091575560864"></a><a class="indexterm" name="idm140091575559408"></a><p>
      An additional table, named <code class="literal">ndb_apply_status</code>, is
      used to keep a record of the operations that have been replicated
      from the master to the slave. Unlike the case with
      <code class="literal">ndb_binlog_index</code>, the data in this table is not
      specific to any one SQL node in the (slave) cluster, and so
      <code class="literal">ndb_apply_status</code> can use the
      <code class="literal">NDBCLUSTER</code> storage engine, as shown here:
    </p><pre data-lang="sql" class="programlisting">
CREATE TABLE `ndb_apply_status` (
    `server_id`   INT(10) UNSIGNED NOT NULL,
    `epoch`       BIGINT(20) UNSIGNED NOT NULL,
    `log_name`    VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_bin NOT NULL,
    `start_pos`   BIGINT(20) UNSIGNED NOT NULL,
    `end_pos`     BIGINT(20) UNSIGNED NOT NULL,
    PRIMARY KEY (`server_id`) USING HASH
) ENGINE=NDBCLUSTER   DEFAULT CHARSET=latin1;
</pre><p>
      The <code class="literal">ndb_apply_status</code> table is populated only on
      slaves, which means that, on the master, this table never contains
      any rows; thus, there is no need to allow for
      <a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory"><code class="literal">DataMemory</code></a> or
      <a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexmemory"><code class="literal">IndexMemory</code></a> to be allotted
      to <code class="literal">ndb_apply_status</code> there.
    </p><p>
      Because this table is populated from data originating on the
      master, it should be allowed to replicate; any replication
      filtering or binary log filtering rules that inadvertently prevent
      the slave from updating <code class="literal">ndb_apply_status</code> or the
      master from writing into the binary log may prevent replication
      between clusters from operating properly. For more information
      about potential problems arising from such filtering rules, see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-issues-filtering" title="Replication and binary log filtering rules with replication between NDB Clusters">Replication and binary log filtering rules with replication between NDB
        Clusters</a>.
    </p><a class="indexterm" name="idm140091575546128"></a><p>
      The <code class="literal">ndb_binlog_index</code> and
      <code class="literal">ndb_apply_status</code> tables are created in the
      <code class="literal">mysql</code> database because they should not be
      explicitly replicated by the user. User intervention is normally
      not required to create or maintain either of these tables, since
      both <code class="literal">ndb_binlog_index</code> and the
      <code class="literal">ndb_apply_status</code> are maintained by the
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> binary log (binlog) injector
      thread. This keeps the master <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> process
      updated to changes performed by the
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine. The
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> <span class="firstterm">binlog
      injector thread</span> receives events directly from the
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine. The
      <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> injector is responsible for
      capturing all the data events within the cluster, and ensures that
      all events which change, insert, or delete data are recorded in
      the <code class="literal">ndb_binlog_index</code> table. The slave I/O
      thread transfers the events from the master's binary log to the
      slave's relay log.
    </p><p>
      However, it is advisable to check for the existence and integrity
      of these tables as an initial step in preparing an NDB Cluster for
      replication. It is possible to view event data recorded in the
      binary log by querying the
      <code class="literal">mysql.ndb_binlog_index</code> table directly on the
      master. This can be also be accomplished using the
      <a class="link" href="sql-syntax.html#show-binlog-events" title="13.7.6.2 SHOW BINLOG EVENTS Syntax"><code class="literal">SHOW BINLOG EVENTS</code></a> statement on
      either the replication master or slave MySQL servers. (See
      <a class="xref" href="sql-syntax.html#show-binlog-events" title="13.7.6.2 SHOW BINLOG EVENTS Syntax">Section 13.7.6.2, “SHOW BINLOG EVENTS Syntax”</a>.)
    </p><p>
      You can also obtain useful information from the output of
      <a class="link" href="sql-syntax.html#show-engine" title="13.7.6.15 SHOW ENGINE Syntax"><code class="literal">SHOW ENGINE NDB
      STATUS</code></a>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        When performing schema changes on
        <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables, applications should
        wait until the <a class="link" href="sql-syntax.html#alter-table" title="13.1.9 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>
        statement has returned in the MySQL client connection that
        issued the statement before attempting to use the updated
        definition of the table.
</p>
</div>
<p>
      If the <code class="literal">ndb_apply_status</code> table does not exist on
      the slave, <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> re-creates it.
    </p><p>
      Conflict resolution for NDB Cluster Replication requires the
      presence of an additional <code class="literal">mysql.ndb_replication</code>
      table. Currently, this table must be created manually. For
      information about how to do this, see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="22.6.11 NDB Cluster Replication Conflict Resolution">Section 22.6.11, “NDB Cluster Replication Conflict Resolution”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-replication-preparation"></a>22.6.5 Preparing the NDB Cluster for Replication</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091575517392"></a><a class="indexterm" name="idm140091575515904"></a><p>
      Preparing the NDB Cluster for replication consists of the
      following steps:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
          Check all MySQL servers for version compatibility (see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-general" title="22.6.2 General Requirements for NDB Cluster Replication">Section 22.6.2, “General Requirements for NDB Cluster Replication”</a>).
        </p></li><li class="listitem"><p>
          Create a slave account on the master Cluster with the
          appropriate privileges:
        </p><pre data-lang="sql" class="programlisting">
mysql<em class="replaceable"><code>M</code></em>&gt; <strong class="userinput"><code>GRANT REPLICATION SLAVE</code></strong>
     -&gt; <strong class="userinput"><code>ON *.* TO '<em class="replaceable"><code>slave_user</code></em>'@'<em class="replaceable"><code>slave_host</code></em>'</code></strong>
     -&gt; <strong class="userinput"><code>IDENTIFIED BY '<em class="replaceable"><code>slave_password</code></em>';</code></strong>
</pre><p>
          In the previous statement,
          <em class="replaceable"><code>slave_user</code></em> is the slave account
          user name, <em class="replaceable"><code>slave_host</code></em> is the host
          name or IP address of the replication slave, and
          <em class="replaceable"><code>slave_password</code></em> is the password to
          assign to this account.
        </p><p>
          For example, to create a slave user account with the name
          <code class="literal">myslave</code>, logging in from the host named
          <code class="literal">rep-slave</code>, and using the password
          <code class="literal">53cr37</code>, use the following
          <a class="link" href="sql-syntax.html#grant" title="13.7.1.6 GRANT Syntax"><code class="literal">GRANT</code></a> statement:
        </p><pre data-lang="sql" class="programlisting">
mysql<em class="replaceable"><code>M</code></em>&gt; <strong class="userinput"><code>GRANT REPLICATION SLAVE</code></strong>
     -&gt; <strong class="userinput"><code>ON *.* TO 'myslave'@'rep-slave'</code></strong>
     -&gt; <strong class="userinput"><code>IDENTIFIED BY '53cr37';</code></strong>
</pre><p>
          For security reasons, it is preferable to use a unique user
          account—not employed for any other purpose—for the
          replication slave account.
        </p></li><li class="listitem"><p>
          <a class="indexterm" name="idm140091575495328"></a>

          Configure the slave to use the master. Using the MySQL
          Monitor, this can be accomplished with the
          <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> statement:
        </p><pre data-lang="sql" class="programlisting">
mysql<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>CHANGE MASTER TO</code></strong>
     -&gt; <strong class="userinput"><code>MASTER_HOST='<em class="replaceable"><code>master_host</code></em>',</code></strong>
     -&gt; <strong class="userinput"><code>MASTER_PORT=<em class="replaceable"><code>master_port</code></em>,</code></strong>
     -&gt; <strong class="userinput"><code>MASTER_USER='<em class="replaceable"><code>slave_user</code></em>',</code></strong>
     -&gt; <strong class="userinput"><code>MASTER_PASSWORD='<em class="replaceable"><code>slave_password</code></em>';</code></strong>
</pre><p>
          In the previous statement,
          <em class="replaceable"><code>master_host</code></em> is the host name or IP
          address of the replication master,
          <em class="replaceable"><code>master_port</code></em> is the port for the
          slave to use for connecting to the master,
          <em class="replaceable"><code>slave_user</code></em> is the user name set up
          for the slave on the master, and
          <em class="replaceable"><code>slave_password</code></em> is the password set
          for that user account in the previous step.
        </p><p>
          For example, to tell the slave to replicate from the MySQL
          server whose host name is <code class="literal">rep-master</code>, using
          the replication slave account created in the previous step,
          use the following statement:
        </p><pre data-lang="sql" class="programlisting">
mysql<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>CHANGE MASTER TO</code></strong>
     -&gt; <strong class="userinput"><code>MASTER_HOST='rep-master',</code></strong>
     -&gt; <strong class="userinput"><code>MASTER_PORT=3306,</code></strong>
     -&gt; <strong class="userinput"><code>MASTER_USER='myslave',</code></strong>
     -&gt; <strong class="userinput"><code>MASTER_PASSWORD='53cr37';</code></strong>
</pre><p>
          For a complete list of options that can be used with this
          statement, see <a class="xref" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax">Section 13.4.2.1, “CHANGE MASTER TO Syntax”</a>.
        </p><p>
          To provide replication backup capability, you also need to add
          an <a class="link" href="mysql-cluster.html#option_mysqld_ndb-connectstring"><code class="option">--ndb-connectstring</code></a> option
          to the slave's <code class="filename">my.cnf</code> file prior to
          starting the replication process. See
          <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-backups" title="22.6.9 NDB Cluster Backups With NDB Cluster Replication">Section 22.6.9, “NDB Cluster Backups With NDB Cluster Replication”</a>, for
          details.
        </p><p>
          For additional options that can be set in
          <code class="filename">my.cnf</code> for replication slaves, see
          <a class="xref" href="replication.html#replication-options" title="17.1.6 Replication and Binary Logging Options and Variables">Section 17.1.6, “Replication and Binary Logging Options and Variables”</a>.
        </p></li><li class="listitem"><p>
          If the master cluster is already in use, you can create a
          backup of the master and load this onto the slave to cut down
          on the amount of time required for the slave to synchronize
          itself with the master. If the slave is also running NDB
          Cluster, this can be accomplished using the backup and restore
          procedure described in
          <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-backups" title="22.6.9 NDB Cluster Backups With NDB Cluster Replication">Section 22.6.9, “NDB Cluster Backups With NDB Cluster Replication”</a>.
        </p><pre data-lang="simple" class="programlisting">
ndb-connectstring=<em class="replaceable"><code>management_host</code></em>[:<em class="replaceable"><code>port</code></em>]
</pre><p>
          In the event that you are <span class="emphasis"><em>not</em></span> using NDB
          Cluster on the replication slave, you can create a backup with
          this command on the replication master:
        </p><pre data-lang="terminal" class="programlisting">
shell<em class="replaceable"><code>M</code></em>&gt; <strong class="userinput"><code>mysqldump --master-data=1</code></strong>
</pre><p>
          Then import the resulting data dump onto the slave by copying
          the dump file over to the slave. After this, you can use the
          <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client to import the data from the
          dumpfile into the slave database as shown here, where
          <em class="replaceable"><code>dump_file</code></em> is the name of the file
          that was generated using <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a> on the
          master, and <em class="replaceable"><code>db_name</code></em> is the name of
          the database to be replicated:
        </p><pre data-lang="terminal" class="programlisting">
shell<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>mysql -u root -p <em class="replaceable"><code>db_name</code></em> &lt; <em class="replaceable"><code>dump_file</code></em></code></strong>
</pre><p>
          For a complete list of options to use with
          <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a>, see <a class="xref" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program">Section 4.5.4, “<span class="command"><strong>mysqldump</strong></span> — A Database Backup Program”</a>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
            If you copy the data to the slave in this fashion, you
            should make sure that the slave is started with the
            <a class="link" href="replication.html#option_mysqld_skip-slave-start"><code class="option">--skip-slave-start</code></a> option on
            the command line, or else include
            <code class="literal">skip-slave-start</code> in the slave's
            <code class="filename">my.cnf</code> file to keep it from trying to
            connect to the master to begin replicating before all the
            data has been loaded. Once the data loading has completed,
            follow the additional steps outlined in the next two
            sections.
</p>
</div>
</li><li class="listitem"><p>
          Ensure that each MySQL server acting as a replication master
          is configured with a unique server ID, and with binary logging
          enabled, using the row format. (See
          <a class="xref" href="replication.html#replication-formats" title="17.2.1 Replication Formats">Section 17.2.1, “Replication Formats”</a>.) These options can be
          set either in the master server's <code class="filename">my.cnf</code>
          file, or on the command line when starting the master
          <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> process. See
          <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-starting" title="22.6.6 Starting NDB Cluster Replication (Single Replication Channel)">Section 22.6.6, “Starting NDB Cluster Replication (Single Replication Channel)”</a>, for
          information regarding the latter option.
</p></li></ol>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-replication-starting"></a>22.6.6 Starting NDB Cluster Replication (Single Replication Channel)</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091575445120"></a><p>
      This section outlines the procedure for starting NDB Cluster
      replication using a single replication channel.
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
          Start the MySQL replication master server by issuing this
          command:
        </p><pre data-lang="terminal" class="programlisting">
shell<em class="replaceable"><code>M</code></em>&gt; <strong class="userinput"><code>mysqld --ndbcluster --server-id=<em class="replaceable"><code>id</code></em> \</code></strong>
        <strong class="userinput"><code>--log-bin &amp;</code></strong>
</pre><p>
          In the previous statement, <em class="replaceable"><code>id</code></em> is
          this server's unique ID (see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-general" title="22.6.2 General Requirements for NDB Cluster Replication">Section 22.6.2, “General Requirements for NDB Cluster Replication”</a>). This
          starts the server's <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> process with
          binary logging enabled using the proper logging format.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
            You can also start the master with
            <a class="link" href="replication.html#sysvar_binlog_format"><code class="option">--binlog-format=MIXED</code></a>, in
            which case row-based replication is used automatically when
            replicating between clusters. <code class="literal">STATEMENT</code>
            based binary logging is not supported for NDB Cluster
            Replication (see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-general" title="22.6.2 General Requirements for NDB Cluster Replication">Section 22.6.2, “General Requirements for NDB Cluster Replication”</a>).
</p>
</div>
</li><li class="listitem"><p>
          Start the MySQL replication slave server as shown here:
        </p><pre data-lang="terminal" class="programlisting">
shell<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>mysqld --ndbcluster --server-id=<em class="replaceable"><code>id</code></em> &amp;</code></strong>
</pre><p>
          In the command just shown, <em class="replaceable"><code>id</code></em> is
          the slave server's unique ID. It is not necessary to enable
          logging on the replication slave.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
            You should use the
            <a class="link" href="replication.html#option_mysqld_skip-slave-start"><code class="option">--skip-slave-start</code></a> option
            with this command or else you should include
            <code class="literal">skip-slave-start</code> in the slave server's
            <code class="filename">my.cnf</code> file, unless you want
            replication to begin immediately. With the use of this
            option, the start of replication is delayed until the
            appropriate <a class="link" href="sql-syntax.html#start-slave" title="13.4.2.6 START SLAVE Syntax"><code class="literal">START SLAVE</code></a>
            statement has been issued, as explained in Step 4 below.
</p>
</div>
</li><li class="listitem"><p>
          It is necessary to synchronize the slave server with the
          master server's replication binary log. If binary logging has
          not previously been running on the master, run the following
          statement on the slave:
        </p><pre data-lang="sql" class="programlisting">
mysql<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>CHANGE MASTER TO</code></strong>
     -&gt; <strong class="userinput"><code>MASTER_LOG_FILE='',</code></strong>
     -&gt; <strong class="userinput"><code>MASTER_LOG_POS=4;</code></strong>
</pre><p>
          This instructs the slave to begin reading the master's binary
          log from the log's starting point. Otherwise—that is, if
          you are loading data from the master using a backup—see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-failover" title="22.6.8 Implementing Failover with NDB Cluster Replication">Section 22.6.8, “Implementing Failover with NDB Cluster Replication”</a>, for
          information on how to obtain the correct values to use for
          <code class="literal">MASTER_LOG_FILE</code> and
          <code class="literal">MASTER_LOG_POS</code> in such cases.
        </p></li><li class="listitem"><p>
          Finally, you must instruct the slave to begin applying
          replication by issuing this command from the
          <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client on the replication slave:
        </p><pre data-lang="sql" class="programlisting">
mysql<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>START SLAVE;</code></strong>
</pre><p>
          This also initiates the transmission of replication data from
          the master to the slave.
</p></li></ol>
</div>
<p>
      It is also possible to use two replication channels, in a manner
      similar to the procedure described in the next section; the
      differences between this and using a single replication channel
      are covered in
      <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-two-channels" title="22.6.7 Using Two Replication Channels for NDB Cluster Replication">Section 22.6.7, “Using Two Replication Channels for NDB Cluster Replication”</a>.
    </p><a class="indexterm" name="idm140091575409040"></a><p>
      It is also possible to improve cluster replication performance by
      enabling <span class="firstterm">batched updates</span>.
      This can be accomplished by setting the
      <a class="link" href="mysql-cluster.html#sysvar_slave_allow_batching"><code class="literal">slave_allow_batching</code></a> system
      variable on the slave <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> processes.
      Normally, updates are applied as soon as they are received.
      However, the use of batching causes updates to be applied in 32 KB
      batches, which can result in higher throughput and less CPU usage,
      particularly where individual updates are relatively small.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        Slave batching works on a per-epoch basis; updates belonging to
        more than one transaction can be sent as part of the same batch.
      </p><p>
        All outstanding updates are applied when the end of an epoch is
        reached, even if the updates total less than 32 KB.
</p>
</div>
<a class="indexterm" name="idm140091575402464"></a><p>
      Batching can be turned on and off at runtime. To activate it at
      runtime, you can use either of these two statements:
    </p><pre data-lang="sql" class="programlisting">
SET GLOBAL slave_allow_batching = 1;
SET GLOBAL slave_allow_batching = ON;
</pre><p>
      If a particular batch causes problems (such as a statement whose
      effects do not appear to be replicated correctly), slave batching
      can be deactivated using either of the following statements:
    </p><pre data-lang="sql" class="programlisting">
SET GLOBAL slave_allow_batching = 0;
SET GLOBAL slave_allow_batching = OFF;
</pre><p>
      You can check whether slave batching is currently being used by
      means of an appropriate <a class="link" href="sql-syntax.html#show-variables" title="13.7.6.39 SHOW VARIABLES Syntax"><code class="literal">SHOW
      VARIABLES</code></a> statement, like this one:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE 'slave%';</code></strong>
+---------------------------+-------+
| Variable_name             | Value |
+---------------------------+-------+
| slave_allow_batching      | ON    |
| slave_compressed_protocol | OFF   |
| slave_load_tmpdir         | /tmp  |
| slave_net_timeout         | 3600  |
| slave_skip_errors         | OFF   |
| slave_transaction_retries | 10    |
+---------------------------+-------+
6 rows in set (0.00 sec)
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-replication-two-channels"></a>22.6.7 Using Two Replication Channels for NDB Cluster Replication</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091575393120"></a><a class="indexterm" name="idm140091575391664"></a><p>
      In a more complete example scenario, we envision two replication
      channels to provide redundancy and thereby guard against possible
      failure of a single replication channel. This requires a total of
      four replication servers, two masters for the master cluster and
      two slave servers for the slave cluster. For purposes of the
      discussion that follows, we assume that unique identifiers are
      assigned as shown here:
</p>
<div class="table">
<a name="idm140091575389312"></a><p class="title"><b>Table 22.425 NDB Cluster replication servers described in the text</b></p>
<div class="table-contents">
<table><col width="25%"><col width="75%"><thead><tr>
          <th scope="col">Server ID</th>
          <th scope="col">Description</th>
        </tr></thead><tbody><tr>
          <td scope="row">1</td>
          <td>Master - primary replication channel (<span class="emphasis"><em>M</em></span>)</td>
        </tr><tr>
          <td scope="row">2</td>
          <td>Master - secondary replication channel (<span class="emphasis"><em>M'</em></span>)</td>
        </tr><tr>
          <td scope="row">3</td>
          <td>Slave - primary replication channel (<span class="emphasis"><em>S</em></span>)</td>
        </tr><tr>
          <td scope="row">4</td>
          <td>Slave - secondary replication channel (<span class="emphasis"><em>S'</em></span>)</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
      Setting up replication with two channels is not radically
      different from setting up a single replication channel. First, the
      <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> processes for the primary and secondary
      replication masters must be started, followed by those for the
      primary and secondary slaves. Then the replication processes may
      be initiated by issuing the <a class="link" href="sql-syntax.html#start-slave" title="13.4.2.6 START SLAVE Syntax"><code class="literal">START
      SLAVE</code></a> statement on each of the slaves. The commands and
      the order in which they need to be issued are shown here:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
          Start the primary replication master:
        </p><pre data-lang="terminal" class="programlisting">
shell<em class="replaceable"><code>M</code></em>&gt; <strong class="userinput"><code>mysqld --ndbcluster --server-id=1 \</code></strong>
               <strong class="userinput"><code>--log-bin &amp;</code></strong>
</pre></li><li class="listitem"><p>
          Start the secondary replication master:
        </p><pre data-lang="terminal" class="programlisting">
shell<em class="replaceable"><code>M'</code></em>&gt; <strong class="userinput"><code>mysqld --ndbcluster --server-id=2 \</code></strong>
               <strong class="userinput"><code>--log-bin &amp;</code></strong>
</pre></li><li class="listitem"><p>
          Start the primary replication slave server:
        </p><pre data-lang="terminal" class="programlisting">
shell<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>mysqld --ndbcluster --server-id=3 \</code></strong>
               <strong class="userinput"><code>--skip-slave-start &amp;</code></strong>
</pre></li><li class="listitem"><p>
          Start the secondary replication slave:
        </p><pre data-lang="terminal" class="programlisting">
shell<em class="replaceable"><code>S'</code></em>&gt; <strong class="userinput"><code>mysqld --ndbcluster --server-id=4 \</code></strong>
                <strong class="userinput"><code>--skip-slave-start &amp;</code></strong>
</pre></li><li class="listitem"><p>
          Finally, initiate replication on the primary channel by
          executing the <a class="link" href="sql-syntax.html#start-slave" title="13.4.2.6 START SLAVE Syntax"><code class="literal">START SLAVE</code></a>
          statement on the primary slave as shown here:
        </p><pre data-lang="sql" class="programlisting">
mysql<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>START SLAVE;</code></strong>
</pre>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Warning
</div>
<p>
            Only the primary channel is to be started at this point. The
            secondary replication channel is to be started only in the
            event that the primary replication channel fails, as
            described in
            <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-failover" title="22.6.8 Implementing Failover with NDB Cluster Replication">Section 22.6.8, “Implementing Failover with NDB Cluster Replication”</a>.
            Running multiple replication channels simultaneously can
            result in unwanted duplicate records being created on the
            replication slaves.
</p>
</div>
</li></ol>
</div>
<p>
      As mentioned previously, it is not necessary to enable binary
      logging on replication slaves.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-replication-failover"></a>22.6.8 Implementing Failover with NDB Cluster Replication</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091575345696"></a><a class="indexterm" name="idm140091575344208"></a><p>
      In the event that the primary Cluster replication process fails,
      it is possible to switch over to the secondary replication
      channel. The following procedure describes the steps required to
      accomplish this.
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
          <a class="indexterm" name="idm140091575340800"></a>

          <a class="indexterm" name="idm140091575339696"></a>

          Obtain the time of the most recent global checkpoint (GCP).
          That is, you need to determine the most recent epoch from the
          <code class="literal">ndb_apply_status</code> table on the slave
          cluster, which can be found using the following query:
        </p><pre data-lang="sql" class="programlisting">
mysql<em class="replaceable"><code>S'</code></em>&gt; <strong class="userinput"><code>SELECT @latest:=MAX(epoch)</code></strong>
      -&gt;        <strong class="userinput"><code>FROM mysql.ndb_apply_status;</code></strong>
</pre><p>
          In a circular replication topology, with a master and a slave
          running on each host, when you are using
          <code class="literal">ndb_log_apply_status=1</code>, NDB
          Cluster epochs are written in the slave binary logs. This
          means that the <code class="literal">ndb_apply_status</code> table
          contains information for the slave on this host as well as for
          any other host which acts as a slave of the master running on
          this host.
        </p><p>
          In this case, you need to determine the latest epoch on this
          slave to the exclusion of any epochs from any other slaves in
          this slave's binary log that were not listed in the
          <code class="literal">IGNORE_SERVER_IDS</code> options of the
          <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> statement used
          to set up this slave. The reason for excluding such epochs is
          that rows in the <code class="literal">mysql.ndb_apply_status</code>
          table whose server IDs have a match in the
          <code class="literal">IGNORE_SERVER_IDS</code> list used with the CHANGE
          MASTER TO statement used to prepare this slave's master
          are also considered to be from local servers, in addition to
          those having the slave's own server ID. You can retrieve
          this list as <code class="literal">Replicate_Ignore_Server_Ids</code>
          from the output of <a class="link" href="sql-syntax.html#show-slave-status" title="13.7.6.34 SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE
          STATUS</code></a>. We assume that you have obtained this list
          and are substituting it for
          <em class="replaceable"><code>ignore_server_ids</code></em> in the query
          shown here, which like the previous version of the query,
          selects the greatest epoch into a variable named
          <code class="literal">@latest</code>:
        </p><pre data-lang="sql" class="programlisting">
mysql<em class="replaceable"><code>S'</code></em>&gt; <strong class="userinput"><code>SELECT @latest:=MAX(epoch)</code></strong>
      -&gt;        <strong class="userinput"><code>FROM mysql.ndb_apply_status</code></strong>
      -&gt;        <strong class="userinput"><code>WHERE server_id NOT IN (<em class="replaceable"><code>ignore_server_ids</code></em>);</code></strong>
</pre><p>
          In some cases, it may be simpler or more efficient (or both)
          to use a list of the server IDs to be included and
          <code class="literal">server_id IN
          <em class="replaceable"><code>server_id_list</code></em></code> in the
          <code class="literal">WHERE</code> condition of the preceding query.
        </p></li><li class="listitem"><p>
          <a class="indexterm" name="idm140091575317552"></a>

          Using the information obtained from the query shown in Step 1,
          obtain the corresponding records from the
          <code class="literal">ndb_binlog_index</code> table on the master
          cluster.
        </p><p>
          You can use the following query to obtain the needed records
          from the master's <code class="literal">ndb_binlog_index</code>
          table:
        </p><pre data-lang="sql" class="programlisting">
mysql<em class="replaceable"><code>M'</code></em>&gt; <strong class="userinput"><code>SELECT</code></strong>
      -&gt;     <strong class="userinput"><code>@file:=SUBSTRING_INDEX(next_file, '/', -1),</code></strong>
      -&gt;     <strong class="userinput"><code>@pos:=next_position</code></strong>
      -&gt; <strong class="userinput"><code>FROM mysql.ndb_binlog_index</code></strong>
      -&gt; <strong class="userinput"><code>WHERE epoch &gt;= @latest</code></strong>
      -&gt; <strong class="userinput"><code>ORDER BY epoch ASC LIMIT 1;</code></strong>
</pre><p>
          These are the records saved on the master since the failure of
          the primary replication channel. We have employed a user
          variable <code class="literal">@latest</code> here to represent the
          value obtained in Step 1. Of course, it is not possible for
          one <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> instance to access user
          variables set on another server instance directly. These
          values must be <span class="quote">“<span class="quote">plugged in</span>”</span> to the second query
          manually or in application code.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
            You must ensure that the slave <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> is
            started with
            <a class="link" href="replication.html#option_mysqld_slave-skip-errors"><code class="option">--slave-skip-errors=ddl_exist_errors</code></a>
            before executing <a class="link" href="sql-syntax.html#start-slave" title="13.4.2.6 START SLAVE Syntax"><code class="literal">START SLAVE</code></a>.
            Otherwise, replication may stop with duplicate DDL errors.
</p>
</div>
</li><li class="listitem"><p>
          Now it is possible to synchronize the secondary channel by
          running the following query on the secondary slave server:
        </p><pre data-lang="sql" class="programlisting">
mysql<em class="replaceable"><code>S'</code></em>&gt; <strong class="userinput"><code>CHANGE MASTER TO</code></strong>
      -&gt;     <strong class="userinput"><code>MASTER_LOG_FILE='@file',</code></strong>
      -&gt;     <strong class="userinput"><code>MASTER_LOG_POS=@pos;</code></strong>
</pre><p>
          Again we have employed user variables (in this case
          <code class="literal">@file</code> and <code class="literal">@pos</code>) to
          represent the values obtained in Step 2 and applied in Step 3;
          in practice these values must be inserted manually or using
          application code that can access both of the servers involved.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
            <code class="literal">@file</code> is a string value such as
            <code class="literal">'/var/log/mysql/replication-master-bin.00001'</code>,
            and so must be quoted when used in SQL or application code.
            However, the value represented by <code class="literal">@pos</code>
            must <span class="emphasis"><em>not</em></span> be quoted. Although MySQL
            normally attempts to convert strings to numbers, this case
            is an exception.
</p>
</div>
</li><li class="listitem"><p>
          You can now initiate replication on the secondary channel by
          issuing the appropriate command on the secondary slave
          <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>:
        </p><pre data-lang="sql" class="programlisting">
mysql<em class="replaceable"><code>S'</code></em>&gt; <strong class="userinput"><code>START SLAVE;</code></strong>
</pre></li></ol>
</div>
<p>
      Once the secondary replication channel is active, you can
      investigate the failure of the primary and effect repairs. The
      precise actions required to do this will depend upon the reasons
      for which the primary channel failed.
</p>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Warning
</div>
<p>
        The secondary replication channel is to be started only if and
        when the primary replication channel has failed. Running
        multiple replication channels simultaneously can result in
        unwanted duplicate records being created on the replication
        slaves.
</p>
</div>
<p>
      If the failure is limited to a single server, it should (in
      theory) be possible to replicate from <em class="replaceable"><code>M</code></em>
      to <em class="replaceable"><code>S'</code></em>, or from
      <em class="replaceable"><code>M'</code></em> to <em class="replaceable"><code>S</code></em>;
      however, this has not yet been tested.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-replication-backups"></a>22.6.9 NDB Cluster Backups With NDB Cluster Replication</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-auto-sync">22.6.9.1 NDB Cluster Replication: Automating Synchronization of the Replication
Slave to the Master Binary Log</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-pitr">22.6.9.2 Point-In-Time Recovery Using NDB Cluster Replication</a></span></dt></dl>
</div>
<a class="indexterm" name="idm140091575280992"></a><a class="indexterm" name="idm140091575279504"></a><a class="indexterm" name="idm140091575278048"></a><a class="indexterm" name="idm140091575276560"></a><p>
      This section discusses making backups and restoring from them
      using NDB Cluster replication. We assume that the replication
      servers have already been configured as covered previously (see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-preparation" title="22.6.5 Preparing the NDB Cluster for Replication">Section 22.6.5, “Preparing the NDB Cluster for Replication”</a>, and the
      sections immediately following). This having been done, the
      procedure for making a backup and then restoring from it is as
      follows:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
          There are two different methods by which the backup may be
          started.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Method A. </b>
                This method requires that the cluster backup process was
                previously enabled on the master server, prior to
                starting the replication process. This can be done by
                including the following line in a
                <code class="literal">[mysql_cluster]</code> section in the
                <code class="filename">my.cnf file</code>, where
                <em class="replaceable"><code>management_host</code></em> is the IP
                address or host name of the
                <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> management server for
                the master cluster, and <em class="replaceable"><code>port</code></em>
                is the management server's port number:
              </p><pre data-lang="ini" class="programlisting">
ndb-connectstring=<em class="replaceable"><code>management_host</code></em>[:<em class="replaceable"><code>port</code></em>]
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
                The port number needs to be specified only if the
                default port (1186) is not being used. See
                <a class="xref" href="mysql-cluster.html#mysql-cluster-install-configuration" title="22.2.4 Initial Configuration of NDB Cluster">Section 22.2.4, “Initial Configuration of NDB Cluster”</a>,
                for more information about ports and port allocation in
                NDB Cluster.
</p>
</div>
<p>
              <a class="indexterm" name="idm140091575262432"></a>

              In this case, the backup can be started by executing this
              statement on the replication master:
            </p><pre data-lang="terminal" class="programlisting">
shell<em class="replaceable"><code>M</code></em>&gt; <strong class="userinput"><code>ndb_mgm -e "START BACKUP"</code></strong>
</pre></li><li class="listitem"><p><b>Method B. </b>
                If the <code class="filename">my.cnf</code> file does not specify
                where to find the management host, you can start the
                backup process by passing this information to the
                <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> management client as
                part of the <a class="link" href="mysql-cluster.html#mysql-cluster-backup-using-management-client" title="22.5.3.2 Using The NDB Cluster Management Client to Create a Backup"><code class="literal">START
                BACKUP</code></a> command. This can be done as shown
                here, where <em class="replaceable"><code>management_host</code></em>
                and <em class="replaceable"><code>port</code></em> are the host name
                and port number of the management server:
              </p><pre data-lang="terminal" class="programlisting">
shell<em class="replaceable"><code>M</code></em>&gt; <strong class="userinput"><code>ndb_mgm <em class="replaceable"><code>management_host</code></em>:<em class="replaceable"><code>port</code></em> -e "START BACKUP"</code></strong>
</pre><p>
              In our scenario as outlined earlier (see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-preparation" title="22.6.5 Preparing the NDB Cluster for Replication">Section 22.6.5, “Preparing the NDB Cluster for Replication”</a>),
              this would be executed as follows:
            </p><pre data-lang="terminal" class="programlisting">
shell<em class="replaceable"><code>M</code></em>&gt; <strong class="userinput"><code>ndb_mgm rep-master:1186 -e "START BACKUP"</code></strong>
</pre></li></ul>
</div>
</li><li class="listitem"><p>
          Copy the cluster backup files to the slave that is being
          brought on line. Each system running an
          <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> process for the master cluster will
          have cluster backup files located on it, and
          <span class="emphasis"><em>all</em></span> of these files must be copied to the
          slave to ensure a successful restore. The backup files can be
          copied into any directory on the computer where the slave
          management host resides, so long as the MySQL and NDB binaries
          have read permissions in that directory. In this case, we will
          assume that these files have been copied into the directory
          <code class="filename">/var/BACKUPS/BACKUP-1</code>.
        </p><p>
          It is not necessary that the slave cluster have the same
          number of <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> processes (data nodes) as
          the master; however, it is highly recommended this number be
          the same. It <span class="emphasis"><em>is</em></span> necessary that the slave
          be started with the
          <a class="link" href="replication.html#option_mysqld_skip-slave-start"><code class="option">--skip-slave-start</code></a> option, to
          prevent premature startup of the replication process.
        </p></li><li class="listitem"><p>
          Create any databases on the slave cluster that are present on
          the master cluster that are to be replicated to the slave.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
            A <a class="link" href="sql-syntax.html#create-database" title="13.1.12 CREATE DATABASE Syntax"><code class="literal">CREATE DATABASE</code></a> (or
            <a class="link" href="sql-syntax.html#create-database" title="13.1.12 CREATE DATABASE Syntax"><code class="literal">CREATE
            SCHEMA</code></a>) statement corresponding to each database
            to be replicated must be executed on each SQL node in the
            slave cluster.
</p>
</div>
</li><li class="listitem"><p>
          Reset the slave cluster using this statement in the MySQL
          Monitor:
        </p><pre data-lang="sql" class="programlisting">
mysql<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>RESET SLAVE;</code></strong>
</pre></li><li class="listitem"><p>
          You can now start the cluster restoration process on the
          replication slave using the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>
          command for each backup file in turn. For the first of these,
          it is necessary to include the <code class="option">-m</code> option to
          restore the cluster metadata:
        </p><pre data-lang="terminal" class="programlisting">
shell<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>ndb_restore -c <em class="replaceable"><code>slave_host</code></em>:<em class="replaceable"><code>port</code></em> -n <em class="replaceable"><code>node-id</code></em> \</code></strong>
        <strong class="userinput"><code>-b <em class="replaceable"><code>backup-id</code></em> -m -r <em class="replaceable"><code>dir</code></em></code></strong>
</pre><p>
          <em class="replaceable"><code>dir</code></em> is the path to the directory
          where the backup files have been placed on the replication
          slave. For the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> commands
          corresponding to the remaining backup files, the
          <code class="option">-m</code> option should <span class="emphasis"><em>not</em></span> be
          used.
        </p><p>
          For restoring from a master cluster with four data nodes (as
          shown in the figure in
          <a class="xref" href="mysql-cluster.html#mysql-cluster-replication" title="22.6 NDB Cluster Replication">Section 22.6, “NDB Cluster Replication”</a>) where the backup
          files have been copied to the directory
          <code class="filename">/var/BACKUPS/BACKUP-1</code>, the proper
          sequence of commands to be executed on the slave might look
          like this:
        </p><pre data-lang="terminal" class="programlisting">
shell<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>ndb_restore -c rep-slave:1186 -n 2 -b 1 -m \</code></strong>
        <strong class="userinput"><code>-r ./var/BACKUPS/BACKUP-1</code></strong>
shell<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>ndb_restore -c rep-slave:1186 -n 3 -b 1 \</code></strong>
        <strong class="userinput"><code>-r ./var/BACKUPS/BACKUP-1</code></strong>
shell<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>ndb_restore -c rep-slave:1186 -n 4 -b 1 \</code></strong>
        <strong class="userinput"><code>-r ./var/BACKUPS/BACKUP-1</code></strong>
shell<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>ndb_restore -c rep-slave:1186 -n 5 -b 1 -e \</code></strong>
        <strong class="userinput"><code>-r ./var/BACKUPS/BACKUP-1</code></strong>
</pre>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
            The <code class="option">-e</code> (or
            <a class="link" href="mysql-cluster.html#option_ndb_restore_restore-epoch"><code class="option">--restore-epoch</code></a>) option
            in the final invocation of <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a> in
            this example is required in order that the epoch is written
            to the slave <code class="literal">mysql.ndb_apply_status</code>.
            Without this information, the slave will not be able to
            synchronize properly with the master. (See
            <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup">Section 22.4.23, “<span class="command"><strong>ndb_restore</strong></span> — Restore an NDB Cluster Backup”</a>.)
</p>
</div>
</li><li class="listitem"><p>
          Now you need to obtain the most recent epoch from the
          <code class="literal">ndb_apply_status</code> table on the slave (as
          discussed in
          <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-failover" title="22.6.8 Implementing Failover with NDB Cluster Replication">Section 22.6.8, “Implementing Failover with NDB Cluster Replication”</a>):
        </p><pre data-lang="sql" class="programlisting">
mysql<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>SELECT @latest:=MAX(epoch)</code></strong>
        <strong class="userinput"><code>FROM mysql.ndb_apply_status;</code></strong>
</pre></li><li class="listitem"><p>
          Using <code class="literal">@latest</code> as the epoch value obtained
          in the previous step, you can obtain the correct starting
          position <code class="literal">@pos</code> in the correct binary log
          file <code class="literal">@file</code> from the master's
          <code class="literal">mysql.ndb_binlog_index</code> table using the
          query shown here:
        </p><pre data-lang="sql" class="programlisting">
mysql<em class="replaceable"><code>M</code></em>&gt; <strong class="userinput"><code>SELECT</code></strong>
     -&gt;     <strong class="userinput"><code>@file:=SUBSTRING_INDEX(File, '/', -1),</code></strong>
     -&gt;     <strong class="userinput"><code>@pos:=Position</code></strong>
     -&gt; <strong class="userinput"><code>FROM mysql.ndb_binlog_index</code></strong>
     -&gt; <strong class="userinput"><code>WHERE epoch &gt;= @latest</code></strong>
     -&gt; <strong class="userinput"><code>ORDER BY epoch ASC LIMIT 1;</code></strong>
</pre><p>
          In the event that there is currently no replication traffic,
          you can get this information by running
          <a class="link" href="sql-syntax.html#show-master-status" title="13.7.6.23 SHOW MASTER STATUS Syntax"><code class="literal">SHOW MASTER STATUS</code></a> on the
          master and using the value in the <code class="literal">Position</code>
          column for the file whose name has the suffix with the
          greatest value for all files shown in the
          <code class="literal">File</code> column. However, in this case, you
          must determine this and supply it in the next step manually or
          by parsing the output with a script.
        </p></li><li class="listitem"><p>
          Using the values obtained in the previous step, you can now
          issue the appropriate <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER
          TO</code></a> statement in the slave's <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>
          client:
        </p><pre data-lang="sql" class="programlisting">
mysql<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>CHANGE MASTER TO</code></strong>
     -&gt;     <strong class="userinput"><code>MASTER_LOG_FILE='@file',</code></strong>
     -&gt;     <strong class="userinput"><code>MASTER_LOG_POS=@pos;</code></strong>
</pre></li><li class="listitem"><p>
          Now that the slave <span class="quote">“<span class="quote">knows</span>”</span> from what point in
          which binary log file to start reading data from the master,
          you can cause the slave to begin replicating with this
          standard MySQL statement:
        </p><pre data-lang="sql" class="programlisting">
mysql<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>START SLAVE;</code></strong>
</pre></li></ol>
</div>
<p>
      To perform a backup and restore on a second replication channel,
      it is necessary only to repeat these steps, substituting the host
      names and IDs of the secondary master and slave for those of the
      primary master and slave replication servers where appropriate,
      and running the preceding statements on them.
    </p><p>
      For additional information on performing Cluster backups and
      restoring Cluster from backups, see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-backup" title="22.5.3 Online Backup of NDB Cluster">Section 22.5.3, “Online Backup of NDB Cluster”</a>.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-replication-auto-sync"></a>22.6.9.1 NDB Cluster Replication: Automating Synchronization of the Replication
Slave to the Master Binary Log</h4>
</div>
</div>
</div>
<a class="indexterm" name="idm140091575173488"></a><a class="indexterm" name="idm140091575172032"></a><p>
        It is possible to automate much of the process described in the
        previous section (see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-backups" title="22.6.9 NDB Cluster Backups With NDB Cluster Replication">Section 22.6.9, “NDB Cluster Backups With NDB Cluster Replication”</a>). The
        following Perl script <code class="filename">reset-slave.pl</code> serves
        as an example of how you can do this.
      </p><a class="indexterm" name="idm140091575168512"></a><a class="indexterm" name="idm140091575167008"></a><pre data-lang="perl" class="programlisting">
#!/user/bin/perl -w

#  file: reset-slave.pl

#  Copyright ©2005 MySQL AB

#  This program is free software; you can redistribute it and/or modify
#  it under the terms of the GNU General Public License as published by
#  the Free Software Foundation; either version 2 of the License, or
#  (at your option) any later version.

#  This program is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#  GNU General Public License for more details.

#  You should have received a copy of the GNU General Public License
#  along with this program; if not, write to:
#  Free Software Foundation, Inc.
#  59 Temple Place, Suite 330
#  Boston, MA 02111-1307 USA
#
#  Version 1.1


######################## Includes ###############################

use DBI;

######################## Globals ################################

my  $m_host='';
my  $m_port='';
my  $m_user='';
my  $m_pass='';
my  $s_host='';
my  $s_port='';
my  $s_user='';
my  $s_pass='';
my  $dbhM='';
my  $dbhS='';

####################### Sub Prototypes ##########################

sub CollectCommandPromptInfo;
sub ConnectToDatabases;
sub DisconnectFromDatabases;
sub GetSlaveEpoch;
sub GetMasterInfo;
sub UpdateSlave;

######################## Program Main ###########################

CollectCommandPromptInfo;
ConnectToDatabases;
GetSlaveEpoch;
GetMasterInfo;
UpdateSlave;
DisconnectFromDatabases;

################## Collect Command Prompt Info ##################

sub CollectCommandPromptInfo
{
  ### Check that user has supplied correct number of command line args
  die "Usage:\n
       reset-slave &gt;master MySQL host&lt; &gt;master MySQL port&lt; \n
                   &gt;master user&lt; &gt;master pass&lt; &gt;slave MySQL host&lt; \n
                   &gt;slave MySQL port&lt; &gt;slave user&lt; &gt;slave pass&lt; \n
       All 8 arguments must be passed. Use BLANK for NULL passwords\n"
       unless @ARGV == 8;

  $m_host  =  $ARGV[0];
  $m_port  =  $ARGV[1];
  $m_user  =  $ARGV[2];
  $m_pass  =  $ARGV[3];
  $s_host  =  $ARGV[4];
  $s_port  =  $ARGV[5];
  $s_user  =  $ARGV[6];
  $s_pass  =  $ARGV[7];

  if ($m_pass eq "BLANK") { $m_pass = '';}
  if ($s_pass eq "BLANK") { $s_pass = '';}
}

###############  Make connections to both databases #############

sub ConnectToDatabases
{
  ### Connect to both master and slave cluster databases

  ### Connect to master
  $dbhM
    = DBI-&gt;connect(
    "dbi:mysql:database=mysql;host=$m_host;port=$m_port",
    "$m_user", "$m_pass")
      or die "Can't connect to Master Cluster MySQL process!
              Error: $DBI::errstr\n";

  ### Connect to slave
  $dbhS
    = DBI-&gt;connect(
          "dbi:mysql:database=mysql;host=$s_host",
          "$s_user", "$s_pass")
    or die "Can't connect to Slave Cluster MySQL process!
            Error: $DBI::errstr\n";
}

################  Disconnect from both databases ################

sub DisconnectFromDatabases
{
  ### Disconnect from master

  $dbhM-&gt;disconnect
  or warn " Disconnection failed: $DBI::errstr\n";

  ### Disconnect from slave

  $dbhS-&gt;disconnect
  or warn " Disconnection failed: $DBI::errstr\n";
}

######################  Find the last good GCI ##################

sub GetSlaveEpoch
{
  $sth = $dbhS-&gt;prepare("SELECT MAX(epoch)
                         FROM mysql.ndb_apply_status;")
      or die "Error while preparing to select epoch from slave: ",
             $dbhS-&gt;errstr;

  $sth-&gt;execute
      or die "Selecting epoch from slave error: ", $sth-&gt;errstr;

  $sth-&gt;bind_col (1, \$epoch);
  $sth-&gt;fetch;
  print "\tSlave Epoch =  $epoch\n";
  $sth-&gt;finish;
}

#######  Find the position of the last GCI in the binary log ########

sub GetMasterInfo
{
  $sth = $dbhM-&gt;prepare("SELECT
                           SUBSTRING_INDEX(File, '/', -1), Position
                         FROM mysql.ndb_binlog_index
                         WHERE epoch &gt; $epoch
                         ORDER BY epoch ASC LIMIT 1;")
      or die "Prepare to select from master error: ", $dbhM-&gt;errstr;

  $sth-&gt;execute
      or die "Selecting from master error: ", $sth-&gt;errstr;

  $sth-&gt;bind_col (1, \$binlog);
  $sth-&gt;bind_col (2, \$binpos);
  $sth-&gt;fetch;
  print "\tMaster binary log =  $binlog\n";
  print "\tMaster binary log position =  $binpos\n";
  $sth-&gt;finish;
}

##########  Set the slave to process from that location #########

sub UpdateSlave
{
  $sth = $dbhS-&gt;prepare("CHANGE MASTER TO
                         MASTER_LOG_FILE='$binlog',
                         MASTER_LOG_POS=$binpos;")
      or die "Prepare to CHANGE MASTER error: ", $dbhS-&gt;errstr;

  $sth-&gt;execute
       or die "CHANGE MASTER on slave error: ", $sth-&gt;errstr;
  $sth-&gt;finish;
  print "\tSlave has been updated. You may now start the slave.\n";
}

# end reset-slave.pl
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-cluster-replication-pitr"></a>22.6.9.2 Point-In-Time Recovery Using NDB Cluster Replication</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140091575158064"></a><a class="indexterm" name="idm140091575156576"></a><a class="indexterm" name="idm140091575155120"></a><p>
        <span class="firstterm">Point-in-time</span>
        recovery—that is, recovery of data changes made since a
        given point in time—is performed after restoring a full
        backup that returns the server to its state when the backup was
        made. Performing point-in-time recovery of NDB Cluster tables
        with NDB Cluster and NDB Cluster Replication can be accomplished
        using a native <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> data backup
        (taken by issuing <a class="link" href="mysql-cluster.html#ndbclient-create-nodegroup"><code class="literal">CREATE
        BACKUP</code></a> in the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> client) and
        restoring the <code class="literal">ndb_binlog_index</code> table (from a
        dump made using <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a>).
      </p><p>
        To perform point-in-time recovery of NDB Cluster, it is
        necessary to follow the steps shown here:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Back up all <code class="literal">NDB</code> databases in the cluster,
            using the <a class="link" href="mysql-cluster.html#mysql-cluster-backup-using-management-client" title="22.5.3.2 Using The NDB Cluster Management Client to Create a Backup"><code class="literal">START BACKUP</code></a>
            command in the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="22.4.5 ndb_mgm — The NDB Cluster Management Client"><span class="command"><strong>ndb_mgm</strong></span></a> client (see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-backup" title="22.5.3 Online Backup of NDB Cluster">Section 22.5.3, “Online Backup of NDB Cluster”</a>).
          </p></li><li class="listitem"><p>
            At some later point, prior to restoring the cluster, make a
            backup of the <code class="literal">mysql.ndb_binlog_index</code>
            table. It is probably simplest to use
            <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a> for this task. Also back up the
            binary log files at this time.
          </p><p>
            This backup should be updated regularly—perhaps even
            hourly—depending on your needs.
          </p></li><li class="listitem"><p>
            (<span class="emphasis"><em>Catastrophic failure or error occurs</em></span>.)
          </p></li><li class="listitem"><p>
            Locate the last known good backup.
          </p></li><li class="listitem"><p>
            Clear the data node file systems (using
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="22.4.1 ndbd — The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>
            <a class="link" href="mysql-cluster.html#option_ndbd_initial"><code class="option">--initial</code></a> or
            <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="22.4.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>
            <a class="link" href="mysql-cluster.html#option_ndbd_initial"><code class="option">--initial</code></a>).
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              NDB Cluster Disk Data tablespace and log files are not
              removed by <a class="link" href="mysql-cluster.html#option_ndbd_initial"><code class="option">--initial</code></a>. You
              must delete these manually.
</p>
</div>
</li><li class="listitem"><p>
            Use <a class="link" href="sql-syntax.html#drop-table" title="13.1.32 DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a> or
            <a class="link" href="sql-syntax.html#truncate-table" title="13.1.37 TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE TABLE</code></a> with the
            <code class="literal">mysql.ndb_binlog_index</code> table.
          </p></li><li class="listitem"><p>
            Execute <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>, restoring all data.
            You must include the
            <a class="link" href="mysql-cluster.html#option_ndb_restore_restore-epoch"><code class="option">--restore-epoch</code></a> option
            when you run <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>, so that the
            <code class="literal">ndb_apply_status</code> table is populated
            correctly. (See
            <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup">Section 22.4.23, “<span class="command"><strong>ndb_restore</strong></span> — Restore an NDB Cluster Backup”</a>, for
            more information.)
          </p></li><li class="listitem"><p>
            Restore the <code class="literal">ndb_binlog_index</code> table from
            the output of <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a> and restore the
            binary log files from backup, if necessary.
          </p></li><li class="listitem"><p>
            Find the epoch applied most recently—that is, the
            maximum <code class="literal">epoch</code> column value in the
            <code class="literal">ndb_apply_status</code> table—as the user
            variable <code class="literal">@LATEST_EPOCH</code> (emphasized):
          </p><pre data-lang="sql" class="programlisting">
SELECT <span class="emphasis"><em>@LATEST_EPOCH</em></span>:=MAX(epoch)
    FROM mysql.ndb_apply_status;
</pre></li><li class="listitem"><p>
            Find the latest binary log file
            (<code class="literal">@FIRST_FILE</code>) and position
            (<code class="literal">Position</code> column value) within this file
            that correspond to <code class="literal">@LATEST_EPOCH</code> in the
            <code class="literal">ndb_binlog_index</code> table:
          </p><pre data-lang="sql" class="programlisting">
SELECT Position, <span class="emphasis"><em>@FIRST_FILE</em></span>:=File
    FROM mysql.ndb_binlog_index
    WHERE epoch &gt; <span class="emphasis"><em>@LATEST_EPOCH</em></span> ORDER BY epoch ASC LIMIT 1;
</pre></li><li class="listitem"><p>
            Using <a class="link" href="programs.html#mysqlbinlog" title="4.6.8 mysqlbinlog — Utility for Processing Binary Log Files"><span class="command"><strong>mysqlbinlog</strong></span></a>, replay the binary log
            events from the given file and position up to the point of
            the failure. (See <a class="xref" href="programs.html#mysqlbinlog" title="4.6.8 mysqlbinlog — Utility for Processing Binary Log Files">Section 4.6.8, “<span class="command"><strong>mysqlbinlog</strong></span> — Utility for Processing Binary Log Files”</a>.)
</p></li></ol>
</div>
<p>
        See also <a class="xref" href="backup-and-recovery.html#point-in-time-recovery" title="7.5 Point-in-Time (Incremental) Recovery Using the Binary Log">Section 7.5, “Point-in-Time (Incremental) Recovery Using the Binary Log”</a>, for more
        information about the binary log, replication, and incremental
        recovery.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-replication-multi-master"></a>22.6.10 NDB Cluster Replication: Multi-Master and Circular Replication</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091575098464"></a><a class="indexterm" name="idm140091575097040"></a><a class="indexterm" name="idm140091575095552"></a><a class="indexterm" name="idm140091575094048"></a><p>
      It is possible to use NDB Cluster in multi-master replication,
      including circular replication between a number of NDB Clusters.
    </p><p><b>Circular replication example. </b>
        In the next few paragraphs we consider the example of a
        replication setup involving three NDB Clusters numbered 1, 2,
        and 3, in which Cluster 1 acts as the replication master for
        Cluster 2, Cluster 2 acts as the master for Cluster 3, and
        Cluster 3 acts as the master for Cluster 1. Each cluster has two
        SQL nodes, with SQL nodes A and B belonging to Cluster 1, SQL
        nodes C and D belonging to Cluster 2, and SQL nodes E and F
        belonging to Cluster 3.
      </p><p>
      Circular replication using these clusters is supported as long as
      the following conditions are met:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          The SQL nodes on all masters and slaves are the same
        </p></li><li class="listitem"><p>
          All SQL nodes acting as replication masters and slaves are
          started using the
          <a class="link" href="replication.html#option_mysqld_log-slave-updates"><code class="option">--log-slave-updates</code></a> option
</p></li></ul>
</div>
<p>
      This type of circular replication setup is shown in the following
      diagram:
</p>
<div class="figure">
<a name="fig-mysql-cluster-replication-circular-all-masters-as-slaves"></a><p class="title"><b>Figure 22.35 NDB Cluster Circular Replication with All Masters As Slaves</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/cluster-circular-replication-1.png" width="550" height="646" alt="Content is described in the surrounding text.">
</div>

</div>

</div>
<br class="figure-break"><p>
      In this scenario, SQL node A in Cluster 1 replicates to SQL node C
      in Cluster 2; SQL node C replicates to SQL node E in Cluster 3;
      SQL node E replicates to SQL node A. In other words, the
      replication line (indicated by the curved arrows in the diagram)
      directly connects all SQL nodes used as replication masters and
      slaves.
    </p><p>
      It is also possible to set up circular replication in such a way
      that not all master SQL nodes are also slaves, as shown here:
</p>
<div class="figure">
<a name="fig-mysql-cluster-replication-circular-not-all-masters-as-slaves"></a><p class="title"><b>Figure 22.36 NDB Cluster Circular Replication Where Not All Masters Are Slaves</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/cluster-circular-replication-2.png" width="550" height="622" alt="Logic is described in the surrounding text. Here SQL node A in Cluster 1 replicates to SQL node C in Cluster 2; SQL node D in Cluster 2 replicates to SQL node F in Cluster 3; SQL node E in Cluster 3 replicates to SQL node B in Cluster 1.">
</div>

</div>

</div>
<br class="figure-break"><p>
      In this case, different SQL nodes in each cluster are used as
      replication masters and slaves. However, you must
      <span class="emphasis"><em>not</em></span> start any of the SQL nodes using
      <a class="link" href="replication.html#option_mysqld_log-slave-updates"><code class="option">--log-slave-updates</code></a>. This type of
      circular replication scheme for NDB Cluster, in which the line of
      replication (again indicated by the curved arrows in the diagram)
      is discontinuous, should be possible, but it should be noted that
      it has not yet been thoroughly tested and must therefore still be
      considered experimental.
    </p><p><b>Using NDB-native backup and restore to initialize a slave NDB Cluster. </b>
        <a class="indexterm" name="idm140091575067904"></a>

        When setting up circular replication, it is possible to
        initialize the slave cluster by using the management client
        <code class="literal">BACKUP</code> command on one NDB Cluster to create a
        backup and then applying this backup on another NDB Cluster
        using <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="22.4.23 ndb_restore — Restore an NDB Cluster Backup"><span class="command"><strong>ndb_restore</strong></span></a>. However, this does not
        automatically create binary logs on the second NDB Cluster
        's SQL node acting as the replication slave. In order to
        cause the binary logs to be created, you must issue a
        <a class="link" href="sql-syntax.html#show-tables" title="13.7.6.37 SHOW TABLES Syntax"><code class="literal">SHOW TABLES</code></a> statement on that SQL
        node; this should be done prior to running
        <a class="link" href="sql-syntax.html#start-slave" title="13.4.2.6 START SLAVE Syntax"><code class="literal">START SLAVE</code></a>.
      </p><p>
      This is a known issue which we intend to address in a future
      release.
    </p><p><b>Multi-master failover example. </b>
        In this section, we discuss failover in a multi-master NDB
        Cluster replication setup with three NDB Clusters having server
        IDs 1, 2, and 3. In this scenario, Cluster 1 replicates to
        Clusters 2 and 3; Cluster 2 also replicates to Cluster 3. This
        relationship is shown here:
</p>
<div class="figure">
<a name="fig-mysql-cluster-replication-3-master"></a><p class="title"><b>Figure 22.37 NDB Cluster Multi-Master Replication With 3 Masters</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/cluster-replication-multi-master.png" width="350" height="275" alt="Multi-master NDB Cluster replication setup with three NDB Clusters having server IDs 1, 2, and 3; Cluster 1 replicates to Clusters 2 and 3; Cluster 2 also replicates to Cluster 3.">
</div>

</div>

</div>
<br class="figure-break"><p>
      In other words, data replicates from Cluster 1 to Cluster 3
      through 2 different routes: directly, and by way of Cluster 2.
    </p><p>
      Not all MySQL servers taking part in multi-master replication must
      act as both master and slave, and a given NDB Cluster might use
      different SQL nodes for different replication channels. Such a
      case is shown here:
</p>
<div class="figure">
<a name="fig-mysql-cluster-replication-mysql-servers"></a><p class="title"><b>Figure 22.38 NDB Cluster Multi-Master Replication, With MySQL Servers</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/cluster-replication-multi-master-mysqlds.png" width="500" height="375" alt="Concepts are described in the surrounding text. Shows three nodes: SQL node A in Cluster 1 replicates to SQL node F in Cluster 3; SQL node B in Cluster 1 replicates to SQL node C in Cluster 2; SQL node E in Cluster 3 replicates to SQL node G in Cluster 3. SQL nodes A and B in cluster 1 have --log-slave-updates=0; SQL nodes C in Cluster 2, and SQL nodes F and G in Cluster 3 have --log-slave-updates=1; and SQL nodes D and E in Cluster 2 have --log-slave-updates=0.">
</div>

</div>

</div>
<br class="figure-break"><p>
      MySQL servers acting as replication slaves must be run with the
      <a class="link" href="replication.html#option_mysqld_log-slave-updates"><code class="option">--log-slave-updates</code></a> option. Which
      <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> processes require this option is also
      shown in the preceding diagram.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        Using the <a class="link" href="replication.html#option_mysqld_log-slave-updates"><code class="option">--log-slave-updates</code></a>
        option has no effect on servers not being run as replication
        slaves.
</p>
</div>
<p>
      The need for failover arises when one of the replicating clusters
      goes down. In this example, we consider the case where Cluster 1
      is lost to service, and so Cluster 3 loses 2 sources of updates
      from Cluster 1. Because replication between NDB Clusters is
      asynchronous, there is no guarantee that Cluster 3's updates
      originating directly from Cluster 1 are more recent than those
      received through Cluster 2. You can handle this by ensuring that
      Cluster 3 catches up to Cluster 2 with regard to updates from
      Cluster 1. In terms of MySQL servers, this means that you need to
      replicate any outstanding updates from MySQL server C to server F.
    </p><p>
      On server C, perform the following queries:
    </p><pre data-lang="sql" class="programlisting">
mysqlC&gt; SELECT @latest:=MAX(epoch)
     -&gt;     FROM mysql.ndb_apply_status
     -&gt;     WHERE server_id=1;

mysqlC&gt; SELECT
     -&gt;     @file:=SUBSTRING_INDEX(File, '/', -1),
     -&gt;     @pos:=Position
     -&gt;     FROM mysql.ndb_binlog_index
     -&gt;     WHERE orig_epoch &gt;= @latest
     -&gt;     AND orig_server_id = 1
     -&gt;     ORDER BY epoch ASC LIMIT 1;
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        You can improve the performance of this query, and thus likely
        speed up failover times significantly, by adding the appropriate
        index to the <code class="literal">ndb_binlog_index</code> table. See
        <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-schema" title="22.6.4 NDB Cluster Replication Schema and Tables">Section 22.6.4, “NDB Cluster Replication Schema and Tables”</a>, for more
        information.
</p>
</div>
<p>
      Copy over the values for <em class="replaceable"><code>@file</code></em> and
      <em class="replaceable"><code>@pos</code></em> manually from server C to server F
      (or have your application perform the equivalent). Then, on server
      F, execute the following <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER
      TO</code></a> statement:
    </p><pre data-lang="sql" class="programlisting">
mysqlF&gt; CHANGE MASTER TO
     -&gt;     MASTER_HOST = 'serverC'
     -&gt;     MASTER_LOG_FILE='@file',
     -&gt;     MASTER_LOG_POS=@pos;
</pre><p>
      Once this has been done, you can issue a
      <a class="link" href="sql-syntax.html#start-slave" title="13.4.2.6 START SLAVE Syntax"><code class="literal">START SLAVE</code></a> statement on MySQL
      server F, and any missing updates originating from server B will
      be replicated to server F.
    </p><p>
      The <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> statement also
      supports an <code class="literal">IGNORE_SERVER_IDS</code> option which
      takes a comma-separated list of server IDs and causes events
      originating from the corresponding servers to be ignored. For more
      information, see <a class="xref" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax">Section 13.4.2.1, “CHANGE MASTER TO Syntax”</a>, and
      <a class="xref" href="sql-syntax.html#show-slave-status" title="13.7.6.34 SHOW SLAVE STATUS Syntax">Section 13.7.6.34, “SHOW SLAVE STATUS Syntax”</a>. For information about how
      this option intereacts with the
      <a class="link" href="mysql-cluster.html#sysvar_ndb_log_apply_status"><code class="literal">ndb_log_apply_status</code></a> variable,
      see <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-failover" title="22.6.8 Implementing Failover with NDB Cluster Replication">Section 22.6.8, “Implementing Failover with NDB Cluster Replication”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-cluster-replication-conflict-resolution"></a>22.6.11 NDB Cluster Replication Conflict Resolution</h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140091575020592"></a><a class="indexterm" name="idm140091575019136"></a><a class="indexterm" name="idm140091575017648"></a><a class="indexterm" name="idm140091575016144"></a><p>
      When using a replication setup involving multiple masters
      (including circular replication), it is possible that different
      masters may try to update the same row on the slave with different
      data. Conflict resolution in NDB Cluster Replication provides a
      means of resolving such conflicts by permitting a user-defined
      resolution column to be used to determine whether or not an update
      on a given master should be applied on the slave.
    </p><p>
      Some types of conflict resolution supported by NDB Cluster
      (<code class="literal">NDB$OLD()</code>, <code class="literal">NDB$MAX()</code>,
      <code class="literal">NDB$MAX_DELETE_WIN()</code>) implement this
      user-defined column as a <span class="quote">“<span class="quote">timestamp</span>”</span> column (although
      its type cannot be <a class="link" href="data-types.html#datetime" title="11.3.1 The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a>, as
      explained later in this section). These types of conflict
      resolution are always applied a row-by-row basis rather than a
      transactional basis. The epoch-based conflict resolution functions
      <code class="literal">NDB$EPOCH()</code> and
      <code class="literal">NDB$EPOCH_TRANS()</code> compare the order in which
      epochs are replicated (and thus these functions are
      transactional). Different methods can be used to compare
      resolution column values on the slave when conflicts occur, as
      explained later in this section; the method used can be set on a
      per-table basis.
    </p><p>
      You should also keep in mind that it is the application's
      responsibility to ensure that the resolution column is correctly
      populated with relevant values, so that the resolution function
      can make the appropriate choice when determining whether to apply
      an update.
    </p><p><b>Requirements. </b>
        Preparations for conflict resolution must be made on both the
        master and the slave. These tasks are described in the following
        list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          On the master writing the binary logs, you must determine
          which columns are sent (all columns or only those that have
          been updated). This is done for the MySQL Server as a whole by
          applying the <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> startup option
          <a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-updated-only"><code class="option">--ndb-log-updated-only</code></a>
          (described later in this section) or on a per-table basis by
          entries in the <code class="literal">mysql.ndb_replication</code> table
          (see <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-replication-table" title="The ndb_replication system table">The ndb_replication system table</a>).
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
            If you are replicating tables with very large columns (such
            as <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> or
            <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> columns),
            <a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-updated-only"><code class="option">--ndb-log-updated-only</code></a> can
            also be useful for reducing the size of the master and slave
            binary logs and avoiding possible replication failures due
            to exceeding
            <a class="link" href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a>.
          </p><p>
            See
            <a class="xref" href="replication.html#replication-features-max-allowed-packet" title="17.4.1.20 Replication and max_allowed_packet">Section 17.4.1.20, “Replication and max_allowed_packet”</a>,
            for more information about this issue.
</p>
</div>
</li><li class="listitem"><p>
          On the slave, you must determine which type of conflict
          resolution to apply (<span class="quote">“<span class="quote">latest timestamp wins</span>”</span>,
          <span class="quote">“<span class="quote">same timestamp wins</span>”</span>, <span class="quote">“<span class="quote">primary
          wins</span>”</span>, <span class="quote">“<span class="quote">primary wins, complete
          transaction</span>”</span>, or none). This is done using the
          <code class="literal">mysql.ndb_replication</code> system table, on a
          per-table basis (see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-replication-table" title="The ndb_replication system table">The ndb_replication system table</a>).
        </p></li><li class="listitem"><p>
          NDB Cluster also supports read conflict detection, that is,
          detecting conflicts between reads of a given row in one
          cluster and updates or deletes of the same row in another
          cluster. This requires exclusive read locks obtained by
          setting
          <a class="link" href="mysql-cluster.html#sysvar_ndb_log_exclusive_reads"><code class="literal">ndb_log_exclusive_reads</code></a> equal
          to 1 on the slave. All rows read by a conflicting read are
          logged in the exceptions table. For more information, see
          <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-examples-read-conflicts" title="Read conflict detection and resolution">Read conflict detection and resolution</a>.
</p></li></ul>
</div>
<p>
      When using the functions <code class="literal">NDB$OLD()</code>,
      <code class="literal">NDB$MAX()</code>, and
      <code class="literal">NDB$MAX_DELETE_WIN()</code> for timestamp-based
      conflict resolution, we often refer to the column used for
      determining updates as a <span class="quote">“<span class="quote">timestamp</span>”</span> column. However,
      the data type of this column is never
      <a class="link" href="data-types.html#datetime" title="11.3.1 The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a>; instead, its data type
      should be <a class="link" href="data-types.html#integer-types" title="11.2.1 Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">INT</code></a>
      (<a class="link" href="data-types.html#integer-types" title="11.2.1 Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">INTEGER</code></a>) or
      <a class="link" href="data-types.html#integer-types" title="11.2.1 Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a>. The
      <span class="quote">“<span class="quote">timestamp</span>”</span> column should also be
      <code class="literal">UNSIGNED</code> and <code class="literal">NOT NULL</code>.
    </p><p>
      The <code class="literal">NDB$EPOCH()</code> and
      <code class="literal">NDB$EPOCH_TRANS()</code> functions discussed later in
      this section work by comparing the relative order of replication
      epochs applied on a primary and secondary NDB Cluster, and do not
      make use of timestamps.
    </p><a class="indexterm" name="idm140091574973552"></a><p><b>Master column control. </b>
        We can see update operations in terms of <span class="quote">“<span class="quote">before</span>”</span>
        and <span class="quote">“<span class="quote">after</span>”</span> images—that is, the states of the
        table before and after the update is applied. Normally, when
        updating a table with a primary key, the <span class="quote">“<span class="quote">before</span>”</span>
        image is not of great interest; however, when we need to
        determine on a per-update basis whether or not to use the
        updated values on a replication slave, we need to make sure that
        both images are written to the master's binary log. This is
        done with the
        <a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-update-as-write"><code class="option">--ndb-log-update-as-write</code></a> option
        for <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>, as described later in this
        section.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
        Whether logging of complete rows or of updated columns only is
        done is decided when the MySQL server is started, and cannot be
        changed online; you must either restart
        <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>, or start a new
        <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> instance with different logging
        options.
</p>
</div>
<a class="indexterm" name="idm140091574963504"></a>
<h4><a name="idm140091574962016"></a>Logging Full or Partial Rows (--ndb-log-updated-only Option)</h4>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for ndb_log_updated_only"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--ndb-log-updated-only[={OFF|ON}]</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
<td><code class="literal">ndb_log_updated_only</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
<td>Global</td>
</tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
<td>Yes</td>
</tr><tr><td scope="row"><span class="bold"><strong><a class="link" href="optimization.html#optimizer-hints-set-var" title="Variable-Setting Hint Syntax"><code class="literal">SET_VAR</code></a> Hint Applies</strong></span></td>
<td>No</td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">ON</code></td>
</tr></tbody></table>
</div>
<p><a name="option_mysqld_ndb-log-updated-only"></a>
      For purposes of conflict resolution, there are two basic methods
      of logging rows, as determined by the setting of the
      <a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-updated-only"><code class="option">--ndb-log-updated-only</code></a> option for
      <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Log complete rows
        </p></li><li class="listitem"><p>
          Log only column data that has been updated—that is,
          column data whose value has been set, regardless of whether or
          not this value was actually changed. This is the default
          behavior.
</p></li></ul>
</div>
<p>
      It is usually sufficient—and more efficient—to log
      updated columns only; however, if you need to log full rows, you
      can do so by setting
      <a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-updated-only"><code class="option">--ndb-log-updated-only</code></a> to
      <code class="literal">0</code> or <code class="literal">OFF</code>.
</p>
<h4><a name="idm140091574925536"></a>--ndb-log-update-as-write Option: Logging Changed Data as Updates</h4>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for ndb-log-update-as-write"><col width="50%"><col width="50%"><thead><tr><th scope="col">Property</th>
<th scope="col">Value</th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
<td><code class="literal">--ndb-log-update-as-write[={OFF|ON}]</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
<td><code class="literal">ndb_log_update_as_write</code></td>
</tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
<td>Global</td>
</tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
<td>Yes</td>
</tr><tr><td scope="row"><span class="bold"><strong><a class="link" href="optimization.html#optimizer-hints-set-var" title="Variable-Setting Hint Syntax"><code class="literal">SET_VAR</code></a> Hint Applies</strong></span></td>
<td>No</td>
</tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
<td>Boolean</td>
</tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
<td><code class="literal">ON</code></td>
</tr></tbody></table>
</div>
<p><a name="option_mysqld_ndb-log-update-as-write"></a>
      The setting of the MySQL Server's
      <a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-update-as-write"><code class="option">--ndb-log-update-as-write</code></a> option
      determines whether logging is performed with or without the
      <span class="quote">“<span class="quote">before</span>”</span> image. Because conflict resolution is done
      in the MySQL Server's update handler, it is necessary to
      control logging on the master such that updates are updates and
      not writes; that is, such that updates are treated as changes in
      existing rows rather than the writing of new rows (even though
      these replace existing rows). This option is turned on by default;
      in other words, updates are treated as writes. (That is, updates
      are by default written as <code class="literal">write_row</code> events in
      the binary log, rather than as <code class="literal">update_row</code>
      events.)
    </p><p>
      To turn off the option, start the master <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>
      with <code class="option">--ndb-log-update-as-write=0</code> or
      <code class="option">--ndb-log-update-as-write=OFF</code>. You must do this
      when replicating from NDB tables to tables using a different
      storage engine; see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-to-non-ndb" title="Replication from NDB to other storage engines">Replication from NDB to other storage engines</a>, and
      <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-to-nontransactional" title="Replication from NDB to a nontransactional storage engine">Replication from NDB to a nontransactional storage engine</a>,
      for more information.
    </p><a class="indexterm" name="idm140091574889296"></a><p><b>Conflict resolution control. </b>
        Conflict resolution is usually enabled on the server where
        conflicts can occur. Like logging method selection, it is
        enabled by entries in the
        <code class="literal">mysql.ndb_replication</code> table.
      </p><p><a name="mysql-cluster-ndb-replication-table"></a><b>The ndb_replication system table. </b>
        <a class="indexterm" name="idm140091574884352"></a>

        <a class="indexterm" name="idm140091574883264"></a>

        To enable conflict resolution, it is necessary to create an
        <code class="literal">ndb_replication</code> table in the
        <code class="literal">mysql</code> system database on the master, the
        slave, or both, depending on the conflict resolution type and
        method to be employed. This table is used to control logging and
        conflict resolution functions on a per-table basis, and has one
        row per table involved in replication.
        <code class="literal">ndb_replication</code> is created and filled with
        control information on the server where the conflict is to be
        resolved. In a simple master-slave setup where data can also be
        changed locally on the slave this will typically be the slave.
        In a more complex master-master (2-way) replication schema this
        will usually be all of the masters involved. Each row in
        <code class="literal">mysql.ndb_replication</code> corresponds to a table
        being replicated, and specifies how to log and resolve conflicts
        (that is, which conflict resolution function, if any, to use)
        for that table. The definition of the
        <code class="literal">mysql.ndb_replication</code> table is shown here:
      </p><pre data-lang="sql" class="programlisting">
CREATE TABLE mysql.ndb_replication  (
    db VARBINARY(63),
    table_name VARBINARY(63),
    server_id INT UNSIGNED,
    binlog_type INT UNSIGNED,
    conflict_fn VARBINARY(128),
    PRIMARY KEY USING HASH (db, table_name, server_id)
)   ENGINE=NDB
PARTITION BY KEY(db,table_name);
</pre><p>
      The columns in this table are described in the next few
      paragraphs.
    </p><p><b>db. </b>
        The name of the database containing the table to be replicated.
        You may employ either or both of the wildcards
        <code class="literal">_</code> and <code class="literal">%</code> as part of the
        database name. Matching is similar to what is implemented for
        the <a class="link" href="functions.html#operator_like"><code class="literal">LIKE</code></a> operator.
      </p><p><b>table_name. </b>
        The name of the table to be replicated. The table name may
        include either or both of the wildcards <code class="literal">_</code> and
        <code class="literal">%</code>. Matching is similar to what is implemented
        for the <a class="link" href="functions.html#operator_like"><code class="literal">LIKE</code></a> operator.
      </p><p><b>server_id. </b>
        The unique server ID of the MySQL instance (SQL node) where the
        table resides.
      </p><p><b>binlog_type. </b>
        The type of binary logging to be employed. This is determined as
        shown in the following table:
</p>
<div class="table">
<a name="idm140091574864672"></a><p class="title"><b>Table 22.426 binlog_type values, with internal values and descriptions</b></p>
<div class="table-contents">
<table><col width="20%"><col width="20%"><col width="60%"><thead><tr>
          <th scope="col">Value</th>
          <th scope="col">Internal Value</th>
          <th scope="col">Description</th>
        </tr></thead><tbody><tr>
          <td scope="row">0</td>
          <td><code class="literal">NBT_DEFAULT</code></td>
          <td>Use server default</td>
        </tr><tr>
          <td scope="row">1</td>
          <td><code class="literal">NBT_NO_LOGGING</code></td>
          <td>Do not log this table in the binary log</td>
        </tr><tr>
          <td scope="row">2</td>
          <td><code class="literal">NBT_UPDATED_ONLY</code></td>
          <td>Only updated attributes are logged</td>
        </tr><tr>
          <td scope="row">3</td>
          <td><code class="literal">NBT_FULL</code></td>
          <td>Log full row, even if not updated (MySQL server default behavior)</td>
        </tr><tr>
          <td scope="row">4</td>
          <td><code class="literal">NBT_USE_UPDATE</code></td>
          <td>(For generating <code class="literal">NBT_UPDATED_ONLY_USE_UPDATE</code> and
            <code class="literal">NBT_FULL_USE_UPDATE</code> values only—not
            intended for separate use)</td>
        </tr><tr>
          <td scope="row">5</td>
          <td>[<span class="emphasis"><em>Not used</em></span>]</td>
          <td>---</td>
        </tr><tr>
          <td scope="row">6</td>
          <td><code class="literal">NBT_UPDATED_ONLY_USE_UPDATE</code> (equal to
            <code class="literal">NBT_UPDATED_ONLY | NBT_USE_UPDATE</code>)</td>
          <td>Use updated attributes, even if values are unchanged</td>
        </tr><tr>
          <td scope="row">7</td>
          <td><code class="literal">NBT_FULL_USE_UPDATE</code> (equal to <code class="literal">NBT_FULL |
            NBT_USE_UPDATE</code>)</td>
          <td>Use full row, even if values are unchanged</td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p><b>conflict_fn. </b>
        The conflict resolution function to be applied. This function
        must be specified as one of those shown in the following list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-old" title="NDB$OLD(column_name)">NDB$OLD(column_name)</a>
        </p></li><li class="listitem"><p>
          <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-max" title="NDB$MAX(column_name)">NDB$MAX(column_name)</a>
        </p></li><li class="listitem"><p>
          <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-max-delete-win" title="NDB$MAX_DELETE_WIN()">NDB$MAX_DELETE_WIN()</a>
        </p></li><li class="listitem"><p>
          <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-epoch" title="NDB$EPOCH() and NDB$EPOCH_TRANS()">NDB$EPOCH() and NDB$EPOCH_TRANS()</a>
        </p></li><li class="listitem"><p>
          <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-epoch-trans" title="NDB$EPOCH_TRANS()">NDB$EPOCH_TRANS()</a>
        </p></li><li class="listitem"><p>
          <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-epoch2" title="NDB$EPOCH2()">NDB$EPOCH2()</a>
        </p></li><li class="listitem"><p>
          <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-epoch2-trans" title="NDB$EPOCH2_TRANS()">NDB$EPOCH2_TRANS()</a>
        </p></li><li class="listitem"><p>
          <code class="literal">NULL</code>: Indicates that conflict resolution is
          not to be used for the corresponding table.
</p></li></ul>
</div>
<p>
      These functions are described in the next few paragraphs.
    </p><p><a name="mysql-cluster-replication-ndb-old"></a><b>NDB$OLD(column_name). </b>
        <a class="indexterm" name="idm140091574808096"></a>

        If the value of <em class="replaceable"><code>column_name</code></em> is the
        same on both the master and the slave, then the update is
        applied; otherwise, the update is not applied on the slave and
        an exception is written to the log. This is illustrated by the
        following pseudocode:
      </p><pre data-lang="clike" class="programlisting">
if (<em class="replaceable"><code>master_old_column_value</code></em> == <em class="replaceable"><code>slave_current_column_value</code></em>)
  apply_update();
else
  log_exception();
</pre><p>
      <a class="indexterm" name="idm140091574803920"></a>

      This function can be used for <span class="quote">“<span class="quote">same value wins</span>”</span>
      conflict resolution. This type of conflict resolution ensures that
      updates are not applied on the slave from the wrong master.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
        The column value from the master's <span class="quote">“<span class="quote">before</span>”</span>
        image is used by this function.
</p>
</div>
<p><a name="mysql-cluster-replication-ndb-max"></a><b>NDB$MAX(column_name). </b>
        <a class="indexterm" name="idm140091574799328"></a>

        If the <span class="quote">“<span class="quote">timestamp</span>”</span> column value for a given row
        coming from the master is higher than that on the slave, it is
        applied; otherwise it is not applied on the slave. This is
        illustrated by the following pseudocode:
      </p><pre data-lang="clike" class="programlisting">
if (<em class="replaceable"><code>master_new_column_value</code></em> &gt; <em class="replaceable"><code>slave_current_column_value</code></em>)
  apply_update();
</pre><p>
      <a class="indexterm" name="idm140091574795232"></a>

      This function can be used for <span class="quote">“<span class="quote">greatest timestamp
      wins</span>”</span> conflict resolution. This type of conflict resolution
      ensures that, in the event of a conflict, the version of the row
      that was most recently updated is the version that persists.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
        The column value from the master's <span class="quote">“<span class="quote">after</span>”</span>
        image is used by this function.
</p>
</div>
<p><a name="mysql-cluster-replication-ndb-max-delete-win"></a><b>NDB$MAX_DELETE_WIN(). </b>
        <a class="indexterm" name="idm140091574790576"></a>

        This is a variation on <code class="literal">NDB$MAX()</code>. Due to the
        fact that no timestamp is available for a delete operation, a
        delete using <code class="literal">NDB$MAX()</code> is in fact processed
        as <code class="literal">NDB$OLD</code>. However, for some use cases, this
        is not optimal. For <code class="literal">NDB$MAX_DELETE_WIN()</code>, if
        the <span class="quote">“<span class="quote">timestamp</span>”</span> column value for a given row adding
        or updating an existing row coming from the master is higher
        than that on the slave, it is applied. However, delete
        operations are treated as always having the higher value. This
        is illustrated in the following pseudocode:
      </p><pre data-lang="clike" class="programlisting">
if ( (<em class="replaceable"><code>master_new_column_value</code></em> &gt; <em class="replaceable"><code>slave_current_column_value</code></em>)
        ||
      <em class="replaceable"><code>operation.type</code></em> == "delete")
  apply_update();
</pre><p>
      <a class="indexterm" name="idm140091574782832"></a>

      This function can be used for <span class="quote">“<span class="quote">greatest timestamp, delete
      wins</span>”</span> conflict resolution. This type of conflict resolution
      ensures that, in the event of a conflict, the version of the row
      that was deleted or (otherwise) most recently updated is the
      version that persists.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        As with <code class="literal">NDB$MAX()</code>, the column value from the
        master's <span class="quote">“<span class="quote">after</span>”</span> image is the value used by
        this function.
</p>
</div>
<p><a name="mysql-cluster-replication-ndb-epoch"></a><b>NDB$EPOCH() and NDB$EPOCH_TRANS(). </b>
        <a class="indexterm" name="idm140091574777552"></a>

        <a class="indexterm" name="idm140091574776480"></a>

        The <code class="literal">NDB$EPOCH()</code> function tracks the order in
        which replicated epochs are applied on a slave NDB Cluster
        relative to changes originating on the slave. This relative
        ordering is used to determine whether changes originating on the
        slave are concurrent with any changes that originate locally,
        and are therefore potentially in conflict.
      </p><p>
      Most of what follows in the description of
      <code class="literal">NDB$EPOCH()</code> also applies to
      <code class="literal">NDB$EPOCH_TRANS()</code>. Any exceptions are noted in
      the text.
    </p><p>
      <code class="literal">NDB$EPOCH()</code> is asymmetric, operating on one NDB
      Cluster in a two-cluster circular replication configuration
      (sometimes referred to as <span class="quote">“<span class="quote">active-active</span>”</span>
      replication). We refer here to cluster on which it operates as the
      primary, and the other as the secondary. The slave on the primary
      is responsible for detecting and handling conflicts, while the
      slave on the secondary is not involved in any conflict detection
      or handling.
    </p><p>
      When the slave on the primary detects conflicts, it injects events
      into its own binary log to compensate for these; this ensures that
      the secondary NDB Cluster eventually realigns itself with the
      primary and so keeps the primary and secondary from diverging.
      This compensation and realignment mechanism requires that the
      primary NDB Cluster always wins any conflicts with the
      secondary—that is, that the primary's changes are
      always used rather than those from the secondary in event of a
      conflict. This <span class="quote">“<span class="quote">primary always wins</span>”</span> rule has the
      following implications:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Operations that change data, once committed on the primary,
          are fully persistent and will not be undone or rolled back by
          conflict detection and resolution.
        </p></li><li class="listitem"><p>
          Data read from the primary is fully consistent. Any changes
          committed on the Primary (locally or from the slave) will not
          be reverted later.
        </p></li><li class="listitem"><p>
          Operations that change data on the secondary may later be
          reverted if the primary determines that they are in conflict.
        </p></li><li class="listitem"><p>
          Individual rows read on the secondary are self-consistent at
          all times, each row always reflecting either a state committed
          by the secondary, or one committed by the primary.
        </p></li><li class="listitem"><p>
          Sets of rows read on the secondary may not necessarily be
          consistent at a given single point in time. For
          <code class="literal">NDB$EPOCH_TRANS()</code>, this is a transient
          state; for <code class="literal">NDB$EPOCH()</code>, it can be a
          persistent state.
        </p></li><li class="listitem"><p>
          Assuming a period of sufficient length without any conflicts,
          all data on the secondary NDB Cluster (eventually) becomes
          consistent with the primary's data.
</p></li></ul>
</div>
<p>
      <code class="literal">NDB$EPOCH()</code> and
      <code class="literal">NDB$EPOCH_TRANS()</code> do not require any user
      schema modifications, or application changes to provide conflict
      detection. However, careful thought must be given to the schema
      used, and the access patterns used, to verify that the complete
      system behaves within specified limits.
    </p><p>
      Each of the <code class="literal">NDB$EPOCH()</code> and
      <code class="literal">NDB$EPOCH_TRANS()</code> functions can take an
      optional parameter; this is the number of bits to use to represent
      the lower 32 bits of the epoch, and should be set to no less than
    </p><pre data-lang="sql" class="programlisting">
CEIL( LOG2( <a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenglobalcheckpoints"><code class="literal">TimeBetweenGlobalCheckpoints</code></a> / <a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenepochs"><code class="literal">TimeBetweenEpochs</code></a> ), 1)
</pre><p>
      For the default values of these configuration parameters (2000 and
      100 milliseconds, respectively), this gives a value of 5 bits, so
      the default value (6) should be sufficient, unless other values
      are used for
      <a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenglobalcheckpoints"><code class="literal">TimeBetweenGlobalCheckpoints</code></a>,
      <a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenepochs"><code class="literal">TimeBetweenEpochs</code></a>, or
      both. A value that is too small can result in false positives,
      while one that is too large could lead to excessive wasted space
      in the database.
    </p><p>
      Both <code class="literal">NDB$EPOCH()</code> and
      <code class="literal">NDB$EPOCH_TRANS()</code> insert entries for
      conflicting rows into the relevant exceptions tables, provided
      that these tables have been defined according to the same
      exceptions table schema rules as described elsewhere in this
      section (see <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-old" title="NDB$OLD(column_name)">NDB$OLD(column_name)</a>).
      You need to create any exceptions table before creating the table
      with which it is to be used.
    </p><p>
      As with the other conflict detection functions discussed in this
      section, <code class="literal">NDB$EPOCH()</code> and
      <code class="literal">NDB$EPOCH_TRANS()</code> are activated by including
      relevant entries in the <code class="literal">mysql.ndb_replication</code>
      table (see <a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-replication-table" title="The ndb_replication system table">The ndb_replication system table</a>).
      The roles of the primary and secondary NDB Clusters in this
      scenario are fully determined by
      <code class="literal">mysql.ndb_replication</code> table entries.
    </p><p>
      Because the conflict detection algorithms employed by
      <code class="literal">NDB$EPOCH()</code> and
      <code class="literal">NDB$EPOCH_TRANS()</code> are asymmetric, you must use
      different values for the primary slave's and secondary
      slave's <code class="literal">server_id</code> entries.
    </p><p>
      A conflict between <code class="literal">DELETE</code> operations alone is
      not sufficient to trigger a conflict using
      <code class="literal">NDB$EPOCH()</code> or
      <code class="literal">NDB$EPOCH_TRANS()</code>, and the relative placement
      within epochs does not matter. (Bug #18459944)
    </p><p><a name="mysql-cluster-replication-ndb-epoch-statvars"></a><b>Conflict detection status variables. </b>
        <a class="indexterm" name="idm140091574735792"></a>

        <a class="indexterm" name="idm140091574734336"></a>

        Several status variables can be used to monitor conflict
        detection. You can see how many rows have been found in conflict
        by <code class="literal">NDB$EPOCH()</code> since this slave was last
        restarted from the current value of the
        <a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_fn_epoch"><code class="literal">Ndb_conflict_fn_epoch</code></a> system
        status variable.
      </p><p>
      <a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_fn_epoch_trans"><code class="literal">Ndb_conflict_fn_epoch_trans</code></a>
      provides the number of rows that have been found directly in
      conflict by <code class="literal">NDB$EPOCH_TRANS()</code>.
      <a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_fn_epoch2"><code class="literal">Ndb_conflict_fn_epoch2</code></a> and
      <a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_fn_epoch2_trans"><code class="literal">Ndb_conflict_fn_epoch2_trans</code></a>
      show the number of rows found in conflict by
      <code class="literal">NDB$EPOCH2()</code> and
      <code class="literal">NDB$EPOCH2_TRANS()</code>, respectively. The number of
      rows actually realigned, including those affected due to their
      membership in or dependency on the same transactions as other
      conflicting rows, is given by
      <a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_trans_row_reject_count"><code class="literal">Ndb_conflict_trans_row_reject_count</code></a>.
    </p><p>
      For more information, see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-status-variables" title="22.3.3.9.3 NDB Cluster Status Variables">Section 22.3.3.9.3, “NDB Cluster Status Variables”</a>.
    </p><p><a name="mysql-cluster-replication-ndb-epoch-limitations"></a><b>Limitations on NDB$EPOCH(). </b>
        <a class="indexterm" name="idm140091574719744"></a>

        The following limitations currently apply when using
        <code class="literal">NDB$EPOCH()</code> to perform conflict detection:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Conflicts are detected using NDB Cluster epoch boundaries,
          with granularity proportional to
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenepochs"><code class="literal">TimeBetweenEpochs</code></a>
          (default: 100 milliseconds). The minimum conflict window is
          the minimum time during which concurrent updates to the same
          data on both clusters always report a conflict. This is always
          a nonzero length of time, and is roughly proportional to
          <code class="literal">2 * (latency + queueing +
          TimeBetweenEpochs)</code>. This implies that—assuming
          the default for
          <a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenepochs"><code class="literal">TimeBetweenEpochs</code></a> and
          ignoring any latency between clusters (as well as any queuing
          delays)—the minimum conflict window size is
          approximately 200 milliseconds. This minimum window should be
          considered when looking at expected application
          <span class="quote">“<span class="quote">race</span>”</span> patterns.
        </p></li><li class="listitem"><p>
          Additional storage is required for tables using the
          <code class="literal">NDB$EPOCH()</code> and
          <code class="literal">NDB$EPOCH_TRANS()</code> functions; from 1 to 32
          bits extra space per row is required, depending on the value
          passed to the function.
        </p></li><li class="listitem"><p>
          Conflicts between delete operations may result in divergence
          between the primary and secondary. When a row is deleted on
          both clusters concurrently, the conflict can be detected, but
          is not recorded, since the row is deleted. This means that
          further conflicts during the propagation of any subsequent
          realignment operations will not be detected, which can lead to
          divergence.
        </p><p>
          Deletes should be externally serialized, or routed to one
          cluster only. Alternatively, a separate row should be updated
          transactionally with such deletes and any inserts that follow
          them, so that conflicts can be tracked across row deletes.
          This may require changes in applications.
        </p></li><li class="listitem"><p>
          Only two NDB Clusters in a circular
          <span class="quote">“<span class="quote">active-active</span>”</span> configuration are currently
          supported when using <code class="literal">NDB$EPOCH()</code> or
          <code class="literal">NDB$EPOCH_TRANS()</code> for conflict detection.
        </p></li><li class="listitem"><p>
          Tables having <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> or
          <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> columns are not currently
          supported with <code class="literal">NDB$EPOCH()</code> or
          <code class="literal">NDB$EPOCH_TRANS()</code>.
</p></li></ul>
</div>
<p><a name="mysql-cluster-replication-ndb-epoch-trans"></a><b>NDB$EPOCH_TRANS(). </b>
        <a class="indexterm" name="idm140091574697872"></a>

        <code class="literal">NDB$EPOCH_TRANS()</code> extends the
        <code class="literal">NDB$EPOCH()</code> function. Conflicts are detected
        and handled in the same way using the <span class="quote">“<span class="quote">primary wins
        all</span>”</span> rule (see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-epoch" title="NDB$EPOCH() and NDB$EPOCH_TRANS()">NDB$EPOCH() and NDB$EPOCH_TRANS()</a>) but with
        the extra condition that any other rows updated in the same
        transaction in which the conflict occurred are also regarded as
        being in conflict. In other words, where
        <code class="literal">NDB$EPOCH()</code> realigns individual conflicting
        rows on the secondary, <code class="literal">NDB$EPOCH_TRANS()</code>
        realigns conflicting transactions.
      </p><p>
      In addition, any transactions which are detectably dependent on a
      conflicting transaction are also regarded as being in conflict,
      these dependencies being determined by the contents of the
      secondary cluster's binary log. Since the binary log contains
      only data modification operations (inserts, updates, and deletes),
      only overlapping data modifications are used to determine
      dependencies between transactions.
    </p><p>
      <code class="literal">NDB$EPOCH_TRANS()</code> is subject to the same
      conditions and limitations as <code class="literal">NDB$EPOCH()</code>, and
      in addition requires that Version 2 binary log row events are used
      (<a class="link" href="replication.html#option_mysqld_log-bin-use-v1-row-events"><code class="option">--log-bin-use-v1-row-events</code></a> equal
      to 0), which adds a storage overhead of 2 bytes per event in the
      binary log. In addition, all transaction IDs must be recorded in
      the secondary's binary log
      (<a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-transaction-id"><code class="option">--ndb-log-transaction-id</code></a> option),
      which adds a further variable overhead (up to 13 bytes per row).
    </p><p>
      See <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-epoch" title="NDB$EPOCH() and NDB$EPOCH_TRANS()">NDB$EPOCH() and NDB$EPOCH_TRANS()</a>.
    </p><p><b>Status information. </b>
        A server status variable
        <a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_fn_max"><code class="literal">Ndb_conflict_fn_max</code></a> provides a
        count of the number of times that a row was not applied on the
        current SQL node due to <span class="quote">“<span class="quote">greatest timestamp wins</span>”</span>
        conflict resolution since the last time that
        <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> was started.
      </p><p>
      The number of times that a row was not applied as the result of
      <span class="quote">“<span class="quote">same timestamp wins</span>”</span> conflict resolution on a given
      <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> since the last time it was restarted is
      given by the global status variable
      <a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_fn_old"><code class="literal">Ndb_conflict_fn_old</code></a>. In addition
      to incrementing
      <a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_fn_old"><code class="literal">Ndb_conflict_fn_old</code></a>, the primary
      key of the row that was not used is inserted into an
      <span class="firstterm">exceptions table</span>, as
      explained later in this section.
    </p><p><a name="mysql-cluster-replication-ndb-epoch2"></a><b>NDB$EPOCH2(). </b>
        <a class="indexterm" name="idm140091574674688"></a>

        The <code class="literal">NDB$EPOCH2()</code> function is similar to
        <code class="literal">NDB$EPOCH()</code>, except that
        <code class="literal">NDB$EPOCH2()</code> provides for delete-delete
        handling with a circular replication
        (<span class="quote">“<span class="quote">master-master</span>”</span>) topology. In this scenario,
        primary and secondary roles are assigned to the two masters by
        setting the
        <a class="link" href="mysql-cluster.html#sysvar_ndb_slave_conflict_role"><code class="literal">ndb_slave_conflict_role</code></a> system
        variable to the appropriate value on each master (usually one
        each of <code class="literal">PRIMARY</code>,
        <code class="literal">SECONDARY</code>). When this is done, modifications
        made by the secondary are reflected by the primary back to the
        secondary which then conditionally applies them.
      </p><p><a name="mysql-cluster-replication-ndb-epoch2-trans"></a><b>NDB$EPOCH2_TRANS(). </b>
        <a class="indexterm" name="idm140091574666096"></a>

        <code class="literal">NDB$EPOCH2_TRANS()</code> extends the
        <code class="literal">NDB$EPOCH2()</code> function. Conflicts are detected
        and handled in the same way, and assigning primary and secondary
        roles to the replicating clusters, but with the extra condition
        that any other rows updated in the same transaction in which the
        conflict occurred are also regarded as being in conflict. That
        is, <code class="literal">NDB$EPOCH2()</code> realigns individual
        conflicting rows on the secondary, while
        <code class="literal">NDB$EPOCH_TRANS()</code> realigns conflicting
        transactions.
      </p><p>
      Where <code class="literal">NDB$EPOCH()</code> and
      <code class="literal">NDB$EPOCH_TRANS()</code> use metadata that is
      specified per row, per last modified epoch, to determine on the
      primary whether an incoming replicated row change from the
      secondary is concurrent with a locally committed change;
      concurrent changes are regarded as conflicting, with subesequent
      exceptions table updates and realignment of the secondary. A
      problem arises when a row is deleted on the primary so there is no
      longer any last-modified epoch available to determine whether any
      replicated operations conflict, which means that conflicting
      delete operationss are not detected. This can result in
      divergence, an example being a delete on one cluster which is
      concurrent with a delete and insert on the other; this why delete
      operations can be routed to only one cluster when using
      <code class="literal">NDB$EPOCH()</code> and
      <code class="literal">NDB$EPOCH_TRANS()</code>.
    </p><p>
      <code class="literal">NDB$EPOCH2()</code> bypasses the issue just
      described—storing information about deleted rows on the
      PRIMARY—by ignoring any delete-delete conflict, and by
      avoiding any potential resultant divergence as well. This is
      accomplished by reflecting any operation successfully applied on
      and replicated from the secondary back to the secondary. On its
      return to the secondary, it can be used to reapply an operation on
      the secondary which was deleted by an operation originating from
      the primary.
    </p><p>
      When using <code class="literal">NDB$EPOCH2()</code>, you should keep in
      mind that the secondary applies the delete from the primary,
      removing the new row until it is restored by a reflected
      operation. In theory, the subsequent insert or update on the
      secondary conflicts with the delete from the primary, but in this
      case, we choose to ignore this and allow the secondary to
      <span class="quote">“<span class="quote">win</span>”</span>, in the interest of preventing divergence
      between the clusters. In other words, after a delete, the primary
      does not detect conflicts, and instead adopts the secondary's
      following changes immediately. Because of this, the
      secondary's state can revisit multiple previous committed
      states as it progresses to a final (stable) state, and some of
      these may be visible.
    </p><p>
      You should also be aware that reflecting all operations from the
      secondary back to the primary increases the size of the primary's
      logbinary log, as well as demands on bandwidth, CPU usage, and
      disk I/O.
    </p><p>
      Application of reflected operations on the secondary depends on
      the state of the target row on the secondary. Whether or not
      reflected changes are applied on the secondary can be tracked by
      checking the
      <a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_reflected_op_prepare_count"><code class="literal">Ndb_conflict_reflected_op_prepare_count</code></a>
      and
      <a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_reflected_op_discard_count"><code class="literal">Ndb_conflict_reflected_op_discard_count</code></a>
      status variables. The number of changes applied is simply the
      difference between these two values (note that
      <code class="literal">Ndb_conflict_reflected_op_prepare_count</code> is
      always greater than or equal to
      <code class="literal">Ndb_conflict_reflected_op_discard_count</code>).
    </p><p>
      Events are applied if and only if both of the following conditions
      are true:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          The existence of the row—that is, whether or not it
          exists—is in accordance with the type of event. For
          delete and update operations, the row must already exist. For
          insert operations, the row must <span class="emphasis"><em>not</em></span>
          exist.
        </p></li><li class="listitem"><p>
          The row was last modified by the primary. It is possible that
          the modification was accomplished through the execution of a
          reflected operation.
</p></li></ul>
</div>
<p>
      If both of the conditions are not met, the reflected operation is
      discarded by the secondary.
    </p><p><a name="mysql-cluster-replication-exceptions-table"></a><b>Conflict resolution exceptions table. </b>
        <a class="indexterm" name="idm140091574642224"></a>

        <a class="indexterm" name="idm140091574640768"></a>

        To use the <code class="literal">NDB$OLD()</code> conflict resolution
        function, it is also necessary to create an exceptions table
        corresponding to each <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table for
        which this type of conflict resolution is to be employed. This
        is also true when using <code class="literal">NDB$EPOCH()</code> or
        <code class="literal">NDB$EPOCH_TRANS()</code>. The name of this table is
        that of the table for which conflict resolution is to be
        applied, with the string <code class="literal">$EX</code> appended. (For
        example, if the name of the original table is
        <code class="literal">mytable</code>, the name of the corresponding
        exceptions table name should be <code class="literal">mytable$EX</code>.)
        The syntax for creating the exceptions table is as shown here:
      </p><pre data-lang="sql" class="programlisting">
CREATE TABLE <em class="replaceable"><code>original_table</code></em>$EX  (
    [NDB$]server_id INT UNSIGNED,
    [NDB$]master_server_id INT UNSIGNED,
    [NDB$]master_epoch BIGINT UNSIGNED,
    [NDB$]count INT UNSIGNED,

    [NDB$OP_TYPE ENUM('WRITE_ROW','UPDATE_ROW', 'DELETE_ROW',
      'REFRESH_ROW', 'READ_ROW') NOT NULL,]
    [NDB$CFT_CAUSE ENUM('ROW_DOES_NOT_EXIST', 'ROW_ALREADY_EXISTS',
      'DATA_IN_CONFLICT', 'TRANS_IN_CONFLICT') NOT NULL,]
    [NDB$ORIG_TRANSID BIGINT UNSIGNED NOT NULL,]

    <em class="replaceable"><code>original_table_pk_columns</code></em>,

    [<em class="replaceable"><code>orig_table_column</code></em>|<em class="replaceable"><code>orig_table_column</code></em>$OLD|<em class="replaceable"><code>orig_table_column</code></em>$NEW,]

    [<em class="replaceable"><code>additional_columns</code></em>,]

    PRIMARY KEY([NDB$]server_id, [NDB$]master_server_id, [NDB$]master_epoch, [NDB$]count)
) ENGINE=NDB;
</pre><p>
      The first four columns are required. The names of the first four
      columns and the columns matching the original table's primary
      key columns are not critical; however, we suggest for reasons of
      clarity and consistency, that you use the names shown here for the
      <code class="literal">server_id</code>, <code class="literal">master_server_id</code>,
      <code class="literal">master_epoch</code>, and <code class="literal">count</code>
      columns, and that you use the same names as in the original table
      for the columns matching those in the original table's
      primary key.
    </p><p>
      If the exceptions table uses one or more of the optional columns
      <code class="literal">NDB$OP_TYPE</code>, <code class="literal">NDB$CFT_CAUSE</code>,
      or <code class="literal">NDB$ORIG_TRANSID</code> discussed later in this
      section, then each of the required columns must also be named
      using the prefix <code class="literal">NDB$</code>. If desired, you can use
      the <code class="literal">NDB$</code> prefix to name the required columns
      even if you do not define any optional columns, but in this case,
      all four of the required columns must be named using the prefix.
    </p><p>
      Following these columns, the columns making up the original
      table's primary key should be copied in the order in which
      they are used to define the primary key of the original table. The
      data types for the columns duplicating the primary key columns of
      the original table should be the same as (or larger than) those of
      the original columns. A subset of the primary key columns may be
      used.
    </p><p>
      Regardless of the NDB Cluster version employed, the exceptions
      table must use the <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage
      engine. (An example that uses <code class="literal">NDB$OLD()</code> with an
      exceptions table is shown later in this section.)
    </p><p>
      Additional columns may optionally be defined following the copied
      primary key columns, but not before any of them; any such extra
      columns cannot be <code class="literal">NOT NULL</code>. NDB Cluster
      supports three additional, predefined optional columns
      <code class="literal">NDB$OP_TYPE</code>, <code class="literal">NDB$CFT_CAUSE</code>,
      and <code class="literal">NDB$ORIG_TRANSID</code>, which are described in
      the next few paragraphs.
    </p><p>
      <a class="indexterm" name="idm140091574613472"></a>

      <code class="literal">NDB$OP_TYPE</code>: This column can be used to obtain
      the type of operation causing the conflict. If you use this
      column, define it as shown here:
    </p><pre data-lang="sql" class="programlisting">
NDB$OP_TYPE ENUM('WRITE_ROW', 'UPDATE_ROW', 'DELETE_ROW',
    'REFRESH_ROW', 'READ_ROW') NOT NULL
</pre><p>
      The <code class="literal">WRITE_ROW</code>, <code class="literal">UPDATE_ROW</code>,
      and <code class="literal">DELETE_ROW</code> operation types represent
      user-initiated operations. <code class="literal">REFRESH_ROW</code>
      operations are operations generated by conflict resolution in
      compensating transactions sent back to the originating cluster
      from the cluster that detected the conflict.
      <code class="literal">READ_ROW</code> operations are user-initiated read
      tracking operations defined with exclusive row locks.
    </p><p>
      <a class="indexterm" name="idm140091574605872"></a>

      <code class="literal">NDB$CFT_CAUSE</code>: You can define an optional
      column <code class="literal">NDB$CFT_CAUSE</code> which provides the cause
      of the registered conflict. This column, if used, is defined as
      shown here:
    </p><pre data-lang="sql" class="programlisting">
NDB$CFT_CAUSE ENUM('ROW_DOES_NOT_EXIST', 'ROW_ALREADY_EXISTS',
    'DATA_IN_CONFLICT', 'TRANS_IN_CONFLICT') NOT NULL
</pre><p>
      <code class="literal">ROW_DOES_NOT_EXIST</code> can be reported as the cause
      for <code class="literal">UPDATE_ROW</code> and <code class="literal">WRITE_ROW</code>
      operations; <code class="literal">ROW_ALREADY_EXISTS</code> can be reported
      for <code class="literal">WRITE_ROW</code> events.
      <code class="literal">DATA_IN_CONFLICT</code> is reported when a row-based
      conflict function detects a conflict;
      <code class="literal">TRANS_IN_CONFLICT</code> is reported when a
      transactional conflict function rejects all of the operations
      belonging to a complete transaction.
    </p><p>
      <a class="indexterm" name="idm140091574596176"></a>

      <code class="literal">NDB$ORIG_TRANSID</code>: The
      <code class="literal">NDB$ORIG_TRANSID</code> column, if used, contains the
      ID of the originating transaction. This column should be defined
      as follows:
    </p><pre data-lang="sql" class="programlisting">
NDB$ORIG_TRANSID BIGINT UNSIGNED NOT NULL
</pre><p>
      <code class="literal">NDB$ORIG_TRANSID</code> is a 64-bit value generated by
      <code class="literal">NDB</code>. This value can be used to correlate
      multiple exceptions table entries belonging to the same
      conflicting transaction from the same or different exceptions
      tables.
    </p><p>
      Additional reference columns which are not part of the original
      table's primary key can be named
      <code class="literal"><em class="replaceable"><code>colname</code></em>$OLD</code> or
      <code class="literal"><em class="replaceable"><code>colname</code></em>$NEW</code>.
      <code class="literal"><em class="replaceable"><code>colname</code></em>$OLD</code>
      references old values in update and delete operations—that
      is, operations containing <code class="literal">DELETE_ROW</code> events.
      <code class="literal"><em class="replaceable"><code>colname</code></em>$NEW</code> can be
      used to reference new values in insert and update
      operations—in other words, operations using
      <code class="literal">WRITE_ROW</code> events, <code class="literal">UPDATE_ROW</code>
      events, or both types of events. Where a conflicting operation
      does not supply a value for a given non-primary-key reference
      column, the exceptions table row contains either
      <code class="literal">NULL</code>, or a defined default value for that
      column.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
        The <code class="literal">mysql.ndb_replication</code> table is read when
        a data table is set up for replication, so the row corresponding
        to a table to be replicated must be inserted into
        <code class="literal">mysql.ndb_replication</code>
        <span class="emphasis"><em>before</em></span> the table to be replicated is
        created.
</p>
</div>
<h4><a name="idm140091574578720"></a>Examples</h4>
<p>
      The following examples assume that you have already a working NDB
      Cluster replication setup, as described in
      <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-preparation" title="22.6.5 Preparing the NDB Cluster for Replication">Section 22.6.5, “Preparing the NDB Cluster for Replication”</a>, and
      <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-starting" title="22.6.6 Starting NDB Cluster Replication (Single Replication Channel)">Section 22.6.6, “Starting NDB Cluster Replication (Single Replication Channel)”</a>.
    </p><p><a name="mysql-cluster-replication-examples-ndbmax"></a><b>NDB$MAX() example. </b>
        Suppose you wish to enable <span class="quote">“<span class="quote">greatest timestamp
        wins</span>”</span> conflict resolution on table
        <code class="literal">test.t1</code>, using column
        <code class="literal">mycol</code> as the <span class="quote">“<span class="quote">timestamp</span>”</span>. This
        can be done using the following steps:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
          Make sure that you have started the master
          <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> with
          <a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-update-as-write"><code class="option">--ndb-log-update-as-write=OFF</code></a>.
        </p></li><li class="listitem"><p>
          On the master, perform this
          <a class="link" href="sql-syntax.html#insert" title="13.2.6 INSERT Syntax"><code class="literal">INSERT</code></a> statement:
        </p><pre data-lang="sql" class="programlisting">
INSERT INTO mysql.ndb_replication
    VALUES ('test', 't1', 0, NULL, 'NDB$MAX(mycol)');
</pre><p>
          Inserting a 0 into the
          <a class="link" href="server-administration.html#sysvar_server_id"><code class="literal">server_id</code></a> indicates that all
          SQL nodes accessing this table should use conflict resolution.
          If you want to use conflict resolution on a specific
          <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> only, use the actual server ID.
        </p><p>
          Inserting <code class="literal">NULL</code> into the
          <code class="literal">binlog_type</code> column has the same effect as
          inserting 0 (<code class="literal">NBT_DEFAULT</code>); the server
          default is used.
        </p></li><li class="listitem"><p>
          Create the <code class="literal">test.t1</code> table:
        </p><pre data-lang="sql" class="programlisting">
CREATE TABLE test.t1 (
    <em class="replaceable"><code>columns</code></em>
    mycol INT UNSIGNED,
    <em class="replaceable"><code>columns</code></em>
) ENGINE=NDB;
</pre><p>
          Now, when updates are done on this table, conflict resolution
          is applied, and the version of the row having the greatest
          value for <code class="literal">mycol</code> is written to the slave.
</p></li></ol>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Note
</div>
<p>
        Other <code class="literal">binlog_type</code> options—such as
        <code class="literal">NBT_UPDATED_ONLY_USE_UPDATE</code> should be used to
        control logging on the master using the
        <code class="literal">ndb_replication</code> table rather than by using
        command-line options.
</p>
</div>
<p><a name="mysql-cluster-replication-examples-ndbold"></a><b>NDB$OLD() example. </b>
        Suppose an <a class="link" href="mysql-cluster.html" title="Chapter 22 MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> table such as the
        one defined here is being replicated, and you wish to enable
        <span class="quote">“<span class="quote">same timestamp wins</span>”</span> conflict resolution for
        updates to this table:
      </p><pre data-lang="sql" class="programlisting">
CREATE TABLE test.t2  (
    a INT UNSIGNED NOT NULL,
    b CHAR(25) NOT NULL,
    <em class="replaceable"><code>columns</code></em>,
    mycol INT UNSIGNED NOT NULL,
    <em class="replaceable"><code>columns</code></em>,
    PRIMARY KEY pk (a, b)
)   ENGINE=NDB;
</pre><p>
      The following steps are required, in the order shown:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
          First—and <span class="emphasis"><em>prior</em></span> to creating
          <code class="literal">test.t2</code>—you must insert a row into
          the
          <a class="link" href="mysql-cluster.html#mysql-cluster-ndb-replication-table" title="The ndb_replication system table"><code class="literal">mysql.ndb_replication</code></a>
          table, as shown here:
        </p><pre data-lang="sql" class="programlisting">
INSERT INTO mysql.ndb_replication
    VALUES ('test', 't2', 0, NULL, 'NDB$OLD(mycol)');
</pre><p>
          Possible values for the <code class="literal">binlog_type</code> column
          are shown earlier in this section. The value
          <code class="literal">'NDB$OLD(mycol)'</code> should be inserted into
          the <code class="literal">conflict_fn</code> column.
        </p></li><li class="listitem"><p>
          Create an appropriate exceptions table for
          <code class="literal">test.t2</code>. The table creation statement shown
          here includes all required columns; any additional columns
          must be declared following these columns, and before the
          definition of the table's primary key.
        </p><pre data-lang="sql" class="programlisting">
CREATE TABLE test.t2$EX  (
    server_id INT UNSIGNED,
    master_server_id INT UNSIGNED,
    master_epoch BIGINT UNSIGNED,
    count INT UNSIGNED,
    a INT UNSIGNED NOT NULL,
    b CHAR(25) NOT NULL,

    [<em class="replaceable"><code>additional_columns</code></em>,]

    PRIMARY KEY(server_id, master_server_id, master_epoch, count)
)   ENGINE=NDB;
</pre><p>
          We can include additional columns for information about the
          type, cause, and originating transaction ID for a given
          conflict. We are also not required to supply matching columns
          for all primary key columns in the original table. This means
          you can create the exceptions table like this:
        </p><pre data-lang="sql" class="programlisting">
CREATE TABLE test.t2$EX  (
    NDB$server_id INT UNSIGNED,
    NDB$master_server_id INT UNSIGNED,
    NDB$master_epoch BIGINT UNSIGNED,
    NDB$count INT UNSIGNED,
    a INT UNSIGNED NOT NULL,
  
    NDB$OP_TYPE ENUM('WRITE_ROW','UPDATE_ROW', 'DELETE_ROW',
      'REFRESH_ROW', 'READ_ROW') NOT NULL,
    NDB$CFT_CAUSE ENUM('ROW_DOES_NOT_EXIST', 'ROW_ALREADY_EXISTS',
      'DATA_IN_CONFLICT', 'TRANS_IN_CONFLICT') NOT NULL,
    NDB$ORIG_TRANSID BIGINT UNSIGNED NOT NULL,

    [<em class="replaceable"><code>additional_columns</code></em>,]

    PRIMARY KEY(NDB$server_id, NDB$master_server_id, NDB$master_epoch, NDB$count)
)   ENGINE=NDB;
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
            The <code class="literal">NDB$</code> prefix is required for the four
            required columns since we included at least one of the
            columns <code class="literal">NDB$OP_TYPE</code>,
            <code class="literal">NDB$CFT_CAUSE</code>, or
            <code class="literal">NDB$ORIG_TRANSID</code> in the table definition.
</p>
</div>
</li><li class="listitem"><p>
          Create the table <code class="literal">test.t2</code> as shown
          previously.
</p></li></ol>
</div>
<p>
      These steps must be followed for every table for which you wish to
      perform conflict resolution using <code class="literal">NDB$OLD()</code>.
      For each such table, there must be a corresponding row in
      <code class="literal">mysql.ndb_replication</code>, and there must be an
      exceptions table in the same database as the table being
      replicated.
    </p><a class="indexterm" name="idm140091574524032"></a><a class="indexterm" name="idm140091574522512"></a><p><a name="mysql-cluster-replication-examples-read-conflicts"></a><b>Read conflict detection and resolution. </b>
        NDB Cluster also supports tracking of read operations, which
        makes it possible in circular replication setups to manage
        conflicts between reads of a given row in one cluster and
        updates or deletes of the same row in another. This example uses
        <code class="literal">employee</code> and <code class="literal">department</code>
        tables to model a scenario in which an employee is moved from
        one department to another on the master cluster (which we refer
        to hereafter as cluster <span class="emphasis"><em>A</em></span>) while the slave
        cluster (hereafter <span class="emphasis"><em>B</em></span>) updates the employee
        count of the employee's former department in an interleaved
        transaction.
      </p><p>
      The data tables have been created using the following SQL
      statements:
    </p><pre data-lang="sql" class="programlisting">
# Employee table
CREATE TABLE employee (
    id INT PRIMARY KEY,
    name VARCHAR(2000),
    dept INT NOT NULL
)   ENGINE=NDB;

# Department table
CREATE TABLE department (
    id INT PRIMARY KEY,
    name VARCHAR(2000),
    members INT
)   ENGINE=NDB;
</pre><p>
      The contents of the two tables include the rows shown in the
      (partial) output of the following
      <a class="link" href="sql-syntax.html#select" title="13.2.10 SELECT Syntax"><code class="literal">SELECT</code></a> statements:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT id, name, dept FROM employee;</code></strong>
+---------------+------+
| id   | name   | dept |
+------+--------+------+
...
| 998  |  Mike  | 3    |
| 999  |  Joe   | 3    |
| 1000 |  Mary  | 3    |
...
+------+--------+------+

mysql&gt; <strong class="userinput"><code>SELECT id, name, members FROM department;</code></strong>
+-----+-------------+---------+
| id  | name        | members |
+-----+-------------+---------+
...
| 3   | Old project | 24      |
...
+-----+-------------+---------+
</pre><p>
      We assume that we are already using an exceptions table that
      includes the four required columns (and these are used for this
      table's primary key), the optional columns for operation type
      and cause, and the original table's primary key column,
      created using the SQL statement shown here:
    </p><pre data-lang="sql" class="programlisting">
CREATE TABLE employee$EX  (
    NDB$server_id INT UNSIGNED,
    NDB$master_server_id INT UNSIGNED,
    NDB$master_epoch BIGINT UNSIGNED,
    NDB$count INT UNSIGNED,

    NDB$OP_TYPE ENUM( 'WRITE_ROW','UPDATE_ROW', 'DELETE_ROW',
                      'REFRESH_ROW','READ_ROW') NOT NULL,
    NDB$CFT_CAUSE ENUM( 'ROW_DOES_NOT_EXIST',
                        'ROW_ALREADY_EXISTS',
                        'DATA_IN_CONFLICT',
                        'TRANS_IN_CONFLICT') NOT NULL,

    id INT NOT NULL,
                  
    PRIMARY KEY(NDB$server_id, NDB$master_server_id, NDB$master_epoch, NDB$count)
)   ENGINE=NDB;
</pre><p>
      Suppose there occur the two simultaneous transactions on the two
      clusters. On cluster <span class="emphasis"><em>A</em></span>, we create a new
      department, then move employee number 999 into that department,
      using the following SQL statements:
    </p><pre data-lang="sql" class="programlisting">
<a class="link" href="sql-syntax.html#commit" title="13.3.1 START TRANSACTION, COMMIT, and ROLLBACK Syntax"><code class="literal">BEGIN</code></a>;
  <a class="link" href="sql-syntax.html#insert" title="13.2.6 INSERT Syntax"><code class="literal">INSERT</code></a> INTO department VALUES (4, "New project", 1);    
  <span class="emphasis"><em><a class="link" href="sql-syntax.html#update" title="13.2.12 UPDATE Syntax"><code class="literal">UPDATE</code></a> employee SET dept = 4 WHERE id = 999;</em></span>
COMMIT;
</pre><p>
      At the same time, on cluster <span class="emphasis"><em>B</em></span>, another
      transaction reads from <code class="literal">employee</code>, as shown here:
    </p><pre data-lang="sql" class="programlisting">
BEGIN;
  <span class="emphasis"><em>SELECT name FROM employee WHERE id = 999;</em></span>
  UPDATE department SET members = members - 1  WHERE id = 3;
commit;
</pre><a class="indexterm" name="idm140091574498864"></a><p>
      The conflicting transactions are not normally detected by the
      conflict resolution mechanism, since the conflict is between a
      read (<code class="literal">SELECT</code>) and an update operation. You can
      circumvent this issue by executing
      <a class="link" href="sql-syntax.html#set-variable" title="13.7.5.1 SET Syntax for Variable Assignment"><code class="literal">SET</code></a>
      <a class="link" href="mysql-cluster.html#sysvar_ndb_log_exclusive_reads"><code class="literal">ndb_log_exclusive_reads</code></a>
      <code class="literal">= 1</code> on the slave cluster. Acquiring exclusive
      read locks in this way causes any rows read on the master to be
      flagged as needing conflict resolution on the slave cluster. If we
      enable exclusive reads in this way prior to the logging of these
      transactions, the read on cluster <span class="emphasis"><em>B</em></span> is
      tracked and sent to cluster <span class="emphasis"><em>A</em></span> for resolution;
      the conflict on the employee row will be detected and the
      transaction on cluster <span class="emphasis"><em>B</em></span> is aborted.
    </p><p>
      The conflict is registered in the exceptions table (on cluster
      <span class="emphasis"><em>A</em></span>) as a <code class="literal">READ_ROW</code> operation
      (see <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-exceptions-table" title="Conflict resolution exceptions table">Conflict resolution exceptions table</a>,
      for a description of operation types), as shown here:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT id, NDB$OP_TYPE, NDB$CFT_CAUSE FROM employee$EX;</code></strong>
+-------+-------------+-------------------+
| id    | NDB$OP_TYPE | NDB$CFT_CAUSE     |
+-------+-------------+-------------------+
...
| 999   | READ_ROW    | TRANS_IN_CONFLICT |
+-------+-------------+-------------------+
</pre><p>
      Any existing rows found in the read operation are flagged. This
      means that multiple rows resulting from the same conflict may be
      logged in the exception table, as shown by examining the effects a
      conflict between an update on cluster <span class="emphasis"><em>A</em></span> and a
      read of multiple rows on cluster <span class="emphasis"><em>B</em></span> from the
      same table in simultaneous transactions. The transaction executed
      on cluster <span class="emphasis"><em>A</em></span> is shown here:
    </p><pre data-lang="sql" class="programlisting">
BEGIN;
  INSERT INTO department VALUES (4, "New project", 0);    
  <span class="emphasis"><em>UPDATE employee SET dept = 4 WHERE dept = 3;</em></span>
  SELECT COUNT(*) INTO @count FROM employee WHERE dept = 4;
  UPDATE department SET members = @count WHERE id = 4;
COMMIT;
</pre><p>
      Concurrently a transaction containing the statements shown here
      runs on cluster <span class="emphasis"><em>B</em></span>:
    </p><pre data-lang="sql" class="programlisting">
SET ndb_log_exclusive_reads = 1;  # Must be set if not already enabled
...
BEGIN;
  <span class="emphasis"><em>SELECT COUNT(*) INTO @count FROM employee WHERE dept = 3 FOR UPDATE;</em></span>
  UPDATE department SET members = @count WHERE id = 3;
COMMIT;
</pre><p>
      In this case, all three rows matching the <code class="literal">WHERE</code>
      condition in the second transaction's
      <code class="literal">SELECT</code> are read, and are thus flagged in the
      exceptions table, as shown here:
    </p><pre data-lang="sql" class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT id, NDB$OP_TYPE, NDB$CFT_CAUSE FROM employee$EX;</code></strong>
+-------+-------------+-------------------+
| id    | NDB$OP_TYPE | NDB$CFT_CAUSE     |
+-------+-------------+-------------------+
...
| 998   | READ_ROW    | TRANS_IN_CONFLICT |
| 999   | READ_ROW    | TRANS_IN_CONFLICT |
| 1000  | READ_ROW    | TRANS_IN_CONFLICT |
...
+-------+-------------+-------------------+
</pre><p>
      Read tracking is performed on the basis of existing rows only. A
      read based on a given condition track conflicts only of any rows
      that are <span class="emphasis"><em>found</em></span> and not of any rows that are
      inserted in an interleaved transaction. This is similar to how
      exclusive row locking is performed in a single instance of NDB
      Cluster.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="mysql-cluster-news"></a>22.7 NDB Cluster Release Notes</h2>

</div>

</div>

</div>
<p>
      Changes in NDB Cluster releases are documented separately from
      this reference manual; you can find release notes for the changes
      in each NDB Cluster 8.0 release at
      <a class="ulink" href="https://dev.mysql.com/doc/relnotes/mysql-cluster/8.0/en/" target="_top">NDB 8.0
      Release Notes</a>, and for each NDB Cluster 7.6 release at
      <a class="ulink" href="https://dev.mysql.com/doc/relnotes/mysql-cluster/7.6/en/" target="_top">NDB 7.6
      Release Notes</a>.
    </p><p>
      You can obtain release notes for older versions of NDB Cluster
      from
      <a class="ulink" href="https://dev.mysql.com/doc/index-cluster.html#cluster-relnotes" target="_top">NDB
      Cluster Release Notes</a>.
</p>
</div>

</div>
<div class="copyright-footer">

</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left"><a accesskey="p" href="mysql-innodb-cluster-userguide.html">Prev</a></td>
<td width="20%" align="center"><a accesskey="u" href="">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="partitioning.html">Next</a></td>
</tr>
<tr>
<td width="40%" align="left" valign="top">Chapter 21 InnoDB Cluster</td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top">Chapter 23 Partitioning</td>
</tr>
</table>
</div>
</body>
</html>
